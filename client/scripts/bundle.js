(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"./client/scripts/main.js":[function(require,module,exports){
'use strict';

var namespace = 'main';

var angular = require('angular');

var app = angular.module(namespace, [
    'ui.router', 'ionic',
    // inject:modules start
    require('./common')(namespace).name,
    require('./ngFacebook')(namespace).name
    // inject:modules end
]);

app.run(function(facebook, $window, $state) {
    facebook.init('ENTER YOUR APP ID HERE');

    if(facebook.oauthCallback($window.location.href)) {
        $state.go('tabs.newsfeed');
    }
});

module.exports = app;
},{"./common":"/home/codio/workspace/client/scripts/common/index.js","./ngFacebook":"/home/codio/workspace/client/scripts/ngFacebook/index.js","angular":"/home/codio/workspace/bower_components/angular/angular.min.js"}],"/home/codio/workspace/bower_components/angular-animate/angular-animate.min.js":[function(require,module,exports){
/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(F,e,O){'use strict';e.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(G,s,g){g=g.ngAnimateChildren;e.isString(g)&&0===g.length?s.data("$$ngAnimateChildren",!0):G.$watch(g,function(e){s.data("$$ngAnimateChildren",!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,s){return function(g){return e(function(){g()})}}]).config(["$provide","$animateProvider",function(G,s){function g(e){for(var g=0;g<e.length;g++){var l=e[g];if(l.nodeType==aa)return l}}
function B(l){return e.element(g(l))}var m=e.noop,u=e.forEach,P=s.$$selectors,aa=1,l="$$ngAnimateState",V="$$ngAnimateChildren",J="ng-animate",n={running:!0};G.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(z,F,$,R,E,H,O){function K(a){var b=a.data(l)||{};b.running=!0;a.data(l,b)}function L(a){if(a){var b=[],c={};a=a.substr(1).split(".");($.transitions||$.animations)&&b.push(F.get(P[""]));for(var d=0;d<a.length;d++){var f=
a[d],e=P[f];e&&!c[f]&&(b.push(F.get(e)),c[f]=!0)}return b}}function G(a,b,c){function d(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];if(c||d)return"leave"==b&&(d=c,c=null),n.push({event:b,fn:c}),h.push({event:b,fn:d}),!0}function f(b,d,e){var f=[];u(b,function(a){a.fn&&f.push(a)});var g=0;u(f,function(b,l){var C=function(){a:{if(d){(d[l]||m)();if(++g<f.length)break a;d=null}e()}};switch(b.event){case "setClass":d.push(b.fn(a,A,k,C));break;case "addClass":d.push(b.fn(a,A||c,
C));break;case "removeClass":d.push(b.fn(a,k||c,C));break;default:d.push(b.fn(a,C))}});d&&0===d.length&&e()}var g=a[0];if(g){var l="setClass"==b,p=l||"addClass"==b||"removeClass"==b,A,k;e.isArray(c)&&(A=c[0],k=c[1],c=A+" "+k);var x=a.attr("class")+" "+c;if(M(x)){var t=m,w=[],h=[],q=m,y=[],n=[],x=(" "+x).replace(/\s+/g,".");u(L(x),function(a){!d(a,b)&&l&&(d(a,"addClass"),d(a,"removeClass"))});return{node:g,event:b,className:c,isClassBased:p,isSetClassOperation:l,before:function(a){t=a;f(h,w,function(){t=
m;a()})},after:function(a){q=a;f(n,y,function(){q=m;a()})},cancel:function(){w&&(u(w,function(a){(a||m)(!0)}),t(!0));y&&(u(y,function(a){(a||m)(!0)}),q(!0))}}}}}function r(a,b,c,d,f,g,n){function p(d){var e="$animate:"+d;q&&(q[e]&&0<q[e].length)&&E(function(){c.triggerHandler(e,{event:a,className:b})})}function A(){p("before")}function m(){p("after")}function x(){p("close");n&&E(function(){n()})}function t(){t.hasBeenRun||(t.hasBeenRun=!0,g())}function w(){if(!w.hasBeenRun){w.hasBeenRun=!0;var d=
c.data(l);d&&(h&&h.isClassBased?k(c,b):(E(function(){var d=c.data(l)||{};r==d.index&&k(c,b,a)}),c.data(l,d)));x()}}var h=G(c,a,b);if(h){b=h.className;var q=e.element._data(h.node),q=q&&q.events;d||(d=f?f.parent():c.parent());var y=c.data(l)||{};f=y.active||{};var z=y.totalActive||0,C=y.last,D;h.isClassBased&&(D=y.running||y.disabled||C&&!C.isClassBased);if(D||N(c,d))t(),A(),m(),w();else{d=!1;if(0<z){D=[];if(h.isClassBased)"setClass"==C.event?(D.push(C),k(c,b)):f[b]&&(v=f[b],v.event==a?d=!0:(D.push(v),
k(c,b)));else if("leave"==a&&f["ng-leave"])d=!0;else{for(var v in f)D.push(f[v]),k(c,v);f={};z=0}0<D.length&&u(D,function(a){a.cancel()})}!h.isClassBased||(h.isSetClassOperation||d)||(d="addClass"==a==c.hasClass(b));if(d)t(),A(),m(),x();else{if("leave"==a)c.one("$destroy",function(a){a=e.element(this);var b=a.data(l);b&&(b=b.active["ng-leave"])&&(b.cancel(),k(a,"ng-leave"))});c.addClass(J);var r=Y++;z++;f[b]=h;c.data(l,{last:h,active:f,index:r,totalActive:z});A();h.before(function(d){var e=c.data(l);
d=d||!e||!e.active[b]||h.isClassBased&&e.active[b].event!=a;t();!0===d?w():(m(),h.after(w))})}}}else t(),A(),m(),w()}function T(a){if(a=g(a))a=e.isFunction(a.getElementsByClassName)?a.getElementsByClassName(J):a.querySelectorAll("."+J),u(a,function(a){a=e.element(a);(a=a.data(l))&&a.active&&u(a.active,function(a){a.cancel()})})}function k(a,b){if(g(a)==g(R))n.disabled||(n.running=!1,n.structural=!1);else if(b){var c=a.data(l)||{},d=!0===b;!d&&(c.active&&c.active[b])&&(c.totalActive--,delete c.active[b]);
if(d||!c.totalActive)a.removeClass(J),a.removeData(l)}}function N(a,b){if(n.disabled)return!0;if(g(a)==g(R))return n.running;var c,d,f;do{if(0===b.length)break;var m=g(b)==g(R),k=m?n:b.data(l)||{};if(k.disabled)return!0;m&&(f=!0);!1!==c&&(m=b.data(V),e.isDefined(m)&&(c=m));d=d||k.running||k.last&&!k.last.isClassBased}while(b=b.parent());return!f||!c&&d}var Y=0;R.data(l,n);H.$$postDigest(function(){H.$$postDigest(function(){n.running=!1})});var Q=s.classNameFilter(),M=Q?function(a){return Q.test(a)}:
function(){return!0};return{enter:function(a,b,c,d){a=e.element(a);b=b&&e.element(b);c=c&&e.element(c);K(a);z.enter(a,b,c);H.$$postDigest(function(){a=B(a);r("enter","ng-enter",a,b,c,m,d)})},leave:function(a,b){a=e.element(a);T(a);K(a);H.$$postDigest(function(){r("leave","ng-leave",B(a),null,null,function(){z.leave(a)},b)})},move:function(a,b,c,d){a=e.element(a);b=b&&e.element(b);c=c&&e.element(c);T(a);K(a);z.move(a,b,c);H.$$postDigest(function(){a=B(a);r("move","ng-move",a,b,c,m,d)})},addClass:function(a,
b,c){a=e.element(a);a=B(a);r("addClass",b,a,null,null,function(){z.addClass(a,b)},c)},removeClass:function(a,b,c){a=e.element(a);a=B(a);r("removeClass",b,a,null,null,function(){z.removeClass(a,b)},c)},setClass:function(a,b,c,d){a=e.element(a);a=B(a);r("setClass",[b,c],a,null,null,function(){z.setClass(a,b,c)},d)},enabled:function(a,b){switch(arguments.length){case 2:if(a)k(b);else{var c=b.data(l)||{};c.disabled=!0;b.data(l,c)}break;case 1:n.disabled=!a;break;default:a=!n.disabled}return!!a}}}]);s.register("",
["$window","$sniffer","$timeout","$$animateReflow",function(l,n,s,B){function E(a,U){S&&S();W.push(U);S=B(function(){u(W,function(a){a()});W=[];S=null;v={}})}function H(a,U){var b=g(a);a=e.element(b);Z.push(a);b=Date.now()+U;b<=da||(s.cancel(ca),da=b,ca=s(function(){G(Z);Z=[]},U,!1))}function G(a){u(a,function(a){(a=a.data(q))&&(a.closeAnimationFn||m)()})}function K(a,b){var c=b?v[b]:null;if(!c){var d=0,e=0,f=0,g=0,m,k,h,q;u(a,function(a){if(a.nodeType==aa){a=l.getComputedStyle(a)||{};h=a[I+P];d=
Math.max(L(h),d);q=a[I+x];m=a[I+t];e=Math.max(L(m),e);k=a[p+t];g=Math.max(L(k),g);var b=L(a[p+P]);0<b&&(b*=parseInt(a[p+w],10)||1);f=Math.max(b,f)}});c={total:0,transitionPropertyStyle:q,transitionDurationStyle:h,transitionDelayStyle:m,transitionDelay:e,transitionDuration:d,animationDelayStyle:k,animationDelay:g,animationDuration:f};b&&(v[b]=c)}return c}function L(a){var b=0;a=e.isString(a)?a.split(/\s*,\s*/):[];u(a,function(a){b=Math.max(parseFloat(a)||0,b)});return b}function J(a){var b=a.parent(),
c=b.data(h);c||(b.data(h,++ba),c=ba);return c+"-"+g(a).getAttribute("class")}function r(a,b,c,d){var e=J(b),f=e+" "+c,l=v[f]?++v[f].total:0,k={};if(0<l){var h=c+"-stagger",k=e+" "+h;(e=!v[k])&&b.addClass(h);k=K(b,k);e&&b.removeClass(h)}d=d||function(a){return a()};b.addClass(c);var h=b.data(q)||{},n=d(function(){return K(b,f)});d=n.transitionDuration;e=n.animationDuration;if(0===d&&0===e)return b.removeClass(c),!1;b.data(q,{running:h.running||0,itemIndex:l,stagger:k,timings:n,closeAnimationFn:m});
a=0<h.running||"setClass"==a;0<d&&T(b,c,a);0<e&&(0<k.animationDelay&&0===k.animationDuration)&&(g(b).style[p]="none 0s");return!0}function T(a,b,c){"ng-enter"!=b&&("ng-move"!=b&&"ng-leave"!=b)&&c?a.addClass(y):g(a).style[I+x]="none"}function k(a,b){var c=I+x,d=g(a);d.style[c]&&0<d.style[c].length&&(d.style[c]="");a.removeClass(y)}function N(a){var b=p;a=g(a);a.style[b]&&0<a.style[b].length&&(a.style[b]="")}function Y(a,b,d,e){function k(a){b.off(x,l);b.removeClass(m);c(b,d);a=g(b);for(var e in s)a.style.removeProperty(s[e])}
function l(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||b.timeStamp||Date.now();b=parseFloat(b.elapsedTime.toFixed(V));Math.max(a-z,0)>=y&&b>=v&&e()}var h=g(b);a=b.data(q);if(-1!=h.getAttribute("class").indexOf(d)&&a){var m="";u(d.split(" "),function(a,b){m+=(0<b?" ":"")+a+"-active"});var n=a.stagger,p=a.timings,t=a.itemIndex,v=Math.max(p.transitionDuration,p.animationDuration),w=Math.max(p.transitionDelay,p.animationDelay),y=w*D,z=Date.now(),x=A+" "+X,r="",s=[];if(0<p.transitionDuration){var B=
p.transitionPropertyStyle;-1==B.indexOf("all")&&(r+=f+"transition-property: "+B+";",r+=f+"transition-duration: "+p.transitionDurationStyle+";",s.push(f+"transition-property"),s.push(f+"transition-duration"))}0<t&&(0<n.transitionDelay&&0===n.transitionDuration&&(r+=f+"transition-delay: "+Q(p.transitionDelayStyle,n.transitionDelay,t)+"; ",s.push(f+"transition-delay")),0<n.animationDelay&&0===n.animationDuration&&(r+=f+"animation-delay: "+Q(p.animationDelayStyle,n.animationDelay,t)+"; ",s.push(f+"animation-delay")));
0<s.length&&(p=h.getAttribute("style")||"",h.setAttribute("style",p+"; "+r));b.on(x,l);b.addClass(m);a.closeAnimationFn=function(){k();e()};h=(t*(Math.max(n.animationDelay,n.transitionDelay)||0)+(w+v)*C)*D;a.running++;H(b,h);return k}e()}function Q(a,b,c){var d="";u(a.split(","),function(a,e){d+=(0<e?",":"")+(c*b+parseInt(a,10))+"s"});return d}function M(a,b,d,e){if(r(a,b,d,e))return function(a){a&&c(b,d)}}function a(a,b,d,e){if(b.data(q))return Y(a,b,d,e);c(b,d);e()}function b(b,c,d,e){var f=M(b,
c,d);if(f){var g=f;E(c,function(){k(c,d);N(c);g=a(b,c,d,e)});return function(a){(g||m)(a)}}e()}function c(a,b){a.removeClass(b);var c=a.data(q);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(q))}function d(a,b){var c="";a=e.isArray(a)?a:a.split(/\s+/);u(a,function(a,d){a&&0<a.length&&(c+=(0<d?" ":"")+a+b)});return c}var f="",I,X,p,A;F.ontransitionend===O&&F.onwebkittransitionend!==O?(f="-webkit-",I="WebkitTransition",X="webkitTransitionEnd transitionend"):(I="transition",X="transitionend");
F.onanimationend===O&&F.onwebkitanimationend!==O?(f="-webkit-",p="WebkitAnimation",A="webkitAnimationEnd animationend"):(p="animation",A="animationend");var P="Duration",x="Property",t="Delay",w="IterationCount",h="$$ngAnimateKey",q="$$ngAnimateCSS3Data",y="ng-animate-block-transitions",V=3,C=1.5,D=1E3,v={},ba=0,W=[],S,ca=null,da=0,Z=[];return{enter:function(a,c){return b("enter",a,"ng-enter",c)},leave:function(a,c){return b("leave",a,"ng-leave",c)},move:function(a,c){return b("move",a,"ng-move",
c)},beforeSetClass:function(a,b,c,e){var f=d(c,"-remove")+" "+d(b,"-add"),g=M("setClass",a,f,function(d){var e=a.attr("class");a.removeClass(c);a.addClass(b);d=d();a.attr("class",e);return d});if(g)return E(a,function(){k(a,f);N(a);e()}),g;e()},beforeAddClass:function(a,b,c){var e=M("addClass",a,d(b,"-add"),function(c){a.addClass(b);c=c();a.removeClass(b);return c});if(e)return E(a,function(){k(a,b);N(a);c()}),e;c()},setClass:function(b,c,e,f){e=d(e,"-remove");c=d(c,"-add");return a("setClass",b,
e+" "+c,f)},addClass:function(b,c,e){return a("addClass",b,d(c,"-add"),e)},beforeRemoveClass:function(a,b,c){var e=M("removeClass",a,d(b,"-remove"),function(c){var d=a.attr("class");a.removeClass(b);c=c();a.attr("class",d);return c});if(e)return E(a,function(){k(a,b);N(a);c()}),e;c()},removeClass:function(b,c,e){return a("removeClass",b,d(c,"-remove"),e)}}}])}])})(window,window.angular);
//# sourceMappingURL=angular-animate.min.js.map

},{}],"/home/codio/workspace/bower_components/angular-sanitize/angular-sanitize.min.js":[function(require,module,exports){
/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(q,g,r){'use strict';function F(a){var d=[];t(d,g.noop).chars(a);return d.join("")}function m(a){var d={};a=a.split(",");var c;for(c=0;c<a.length;c++)d[a[c]]=!0;return d}function G(a,d){function c(a,b,c,h){b=g.lowercase(b);if(u[b])for(;f.last()&&v[f.last()];)e("",f.last());w[b]&&f.last()==b&&e("",b);(h=x[b]||!!h)||f.push(b);var n={};c.replace(H,function(a,b,d,c,e){n[b]=s(d||c||e||"")});d.start&&d.start(b,n,h)}function e(a,b){var c=0,e;if(b=g.lowercase(b))for(c=f.length-1;0<=c&&f[c]!=b;c--);
if(0<=c){for(e=f.length-1;e>=c;e--)d.end&&d.end(f[e]);f.length=c}}"string"!==typeof a&&(a=null===a||"undefined"===typeof a?"":""+a);var b,l,f=[],n=a,h;for(f.last=function(){return f[f.length-1]};a;){h="";l=!0;if(f.last()&&y[f.last()])a=a.replace(RegExp("(.*)<\\s*\\/\\s*"+f.last()+"[^>]*>","i"),function(a,b){b=b.replace(I,"$1").replace(J,"$1");d.chars&&d.chars(s(b));return""}),e("",f.last());else{if(0===a.indexOf("\x3c!--"))b=a.indexOf("--",4),0<=b&&a.lastIndexOf("--\x3e",b)===b&&(d.comment&&d.comment(a.substring(4,
b)),a=a.substring(b+3),l=!1);else if(z.test(a)){if(b=a.match(z))a=a.replace(b[0],""),l=!1}else if(K.test(a)){if(b=a.match(A))a=a.substring(b[0].length),b[0].replace(A,e),l=!1}else L.test(a)&&((b=a.match(B))?(b[4]&&(a=a.substring(b[0].length),b[0].replace(B,c)),l=!1):(h+="<",a=a.substring(1)));l&&(b=a.indexOf("<"),h+=0>b?a:a.substring(0,b),a=0>b?"":a.substring(b),d.chars&&d.chars(s(h)))}if(a==n)throw M("badparse",a);n=a}e()}function s(a){if(!a)return"";var d=N.exec(a);a=d[1];var c=d[3];if(d=d[2])p.innerHTML=
d.replace(/</g,"&lt;"),d="textContent"in p?p.textContent:p.innerText;return a+d+c}function C(a){return a.replace(/&/g,"&amp;").replace(O,function(a){var c=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(c-55296)+(a-56320)+65536)+";"}).replace(P,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function t(a,d){var c=!1,e=g.bind(a,a.push);return{start:function(a,l,f){a=g.lowercase(a);!c&&y[a]&&(c=a);c||!0!==D[a]||(e("<"),e(a),g.forEach(l,function(c,f){var k=
g.lowercase(f),l="img"===a&&"src"===k||"background"===k;!0!==Q[k]||!0===E[k]&&!d(c,l)||(e(" "),e(f),e('="'),e(C(c)),e('"'))}),e(f?"/>":">"))},end:function(a){a=g.lowercase(a);c||!0!==D[a]||(e("</"),e(a),e(">"));a==c&&(c=!1)},chars:function(a){c||e(C(a))}}}var M=g.$$minErr("$sanitize"),B=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,A=/^<\/\s*([\w:-]+)[^>]*>/,H=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,L=/^</,
K=/^<\//,I=/\x3c!--(.*?)--\x3e/g,z=/<!DOCTYPE([^>]*?)>/i,J=/<!\[CDATA\[(.*?)]]\x3e/g,O=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P=/([^\#-~| |!])/g,x=m("area,br,col,hr,img,wbr");q=m("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr");r=m("rp,rt");var w=g.extend({},r,q),u=g.extend({},q,m("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),v=g.extend({},r,m("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),
y=m("script,style"),D=g.extend({},x,u,v,w),E=m("background,cite,href,longdesc,src,usemap"),Q=g.extend({},E,m("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),p=document.createElement("pre"),N=/^(\s*)([\s\S]*?)(\s*)$/;g.module("ngSanitize",[]).provider("$sanitize",
function(){this.$get=["$$sanitizeUri",function(a){return function(d){var c=[];G(d,t(c,function(c,b){return!/^unsafe/.test(a(c,b))}));return c.join("")}}]});g.module("ngSanitize").filter("linky",["$sanitize",function(a){var d=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,c=/^mailto:/;return function(e,b){function l(a){a&&k.push(F(a))}function f(a,c){k.push("<a ");g.isDefined(b)&&(k.push('target="'),k.push(b),k.push('" '));k.push('href="');k.push(a);k.push('">');l(c);k.push("</a>")}
if(!e)return e;for(var n,h=e,k=[],m,p;n=h.match(d);)m=n[0],n[2]==n[3]&&(m="mailto:"+m),p=n.index,l(h.substr(0,p)),f(m,n[0].replace(c,"")),h=h.substring(p+n[0].length);l(h);return a(k.join(""))}}])})(window,window.angular);
//# sourceMappingURL=angular-sanitize.min.js.map

},{}],"/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js":[function(require,module,exports){
(function (global){

; require("/home/codio/workspace/bower_components/angular/angular.min.js");
;__browserify_shim_require__=require;(function browserifyShim(module, define, require) {
/**
 * State-based routing for AngularJS
 * @version v0.2.10
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return I(new(I(function(){},{prototype:a})),b)}function e(a){return H(arguments,function(b){b!==a&&H(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function h(a,b,c,d){var e,h=f(c,d),i={},j=[];for(var k in h)if(h[k].params&&h[k].params.length){e=h[k].params;for(var l in e)g(j,e[l])>=0||(j.push(e[l]),i[e[l]]=a[e[l]])}return I({},i,b)}function i(a,b){var c={};return H(a,function(a){var d=b[a];c[a]=null!=d?String(d):null}),c}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return H(a,function(a){c[a]=b[a]}),c}function l(a,b){var d=1,f=2,g={},h=[],i=g,j=I(a.when(g),{$$promises:g,$$values:g});this.study=function(g){function k(a,c){if(o[c]!==f){if(n.push(c),o[c]===d)throw n.splice(0,n.indexOf(c)),new Error("Cyclic dependency: "+n.join(" -> "));if(o[c]=d,E(a))m.push(c,[function(){return b.get(a)}],h);else{var e=b.annotate(a);H(e,function(a){a!==c&&g.hasOwnProperty(a)&&k(g[a],a)}),m.push(c,a,e)}n.pop(),o[c]=f}}function l(a){return F(a)&&a.then&&a.$$promises}if(!F(g))throw new Error("'invocables' must be an object");var m=[],n=[],o={};return H(g,k),g=n=o=null,function(d,f,g){function h(){--s||(t||e(r,f.$$values),p.$$values=r,p.$$promises=!0,o.resolve(r))}function k(a){p.$$failure=a,o.reject(a)}function n(c,e,f){function i(a){l.reject(a),k(a)}function j(){if(!C(p.$$failure))try{l.resolve(b.invoke(e,g,r)),l.promise.then(function(a){r[c]=a,h()},i)}catch(a){i(a)}}var l=a.defer(),m=0;H(f,function(a){q.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,q[a].then(function(b){r[a]=b,--m||j()},i))}),m||j(),q[c]=l.promise}if(l(d)&&g===c&&(g=f,f=d,d=null),d){if(!F(d))throw new Error("'locals' must be an object")}else d=i;if(f){if(!l(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=j;var o=a.defer(),p=o.promise,q=p.$$promises={},r=I({},d),s=1+m.length/3,t=!1;if(C(f.$$failure))return k(f.$$failure),p;f.$$values?(t=e(r,f.$$values),h()):(I(q,f.$$promises),f.then(h,k));for(var u=0,v=m.length;v>u;u+=3)d.hasOwnProperty(m[u])?h():n(m[u],m[u+1],m[u+2]);return p}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function m(a,b,c){this.fromConfig=function(a,b,c){return C(a.template)?this.fromString(a.template,b):C(a.templateUrl)?this.fromUrl(a.templateUrl,b):C(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return D(a)?a(b):a},this.fromUrl=function(c,d){return D(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function n(a){function b(b){if(!/^\w+(-+\w+)*$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(f[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");f[b]=!0,j.push(b)}function c(a){return a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var d,e=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f={},g="^",h=0,i=this.segments=[],j=this.params=[];this.source=a;for(var k,l,m;(d=e.exec(a))&&(k=d[2]||d[3],l=d[4]||("*"==d[1]?".*":"[^/]*"),m=a.substring(h,d.index),!(m.indexOf("?")>=0));)g+=c(m)+"("+l+")",b(k),i.push(m),h=e.lastIndex;m=a.substring(h);var n=m.indexOf("?");if(n>=0){var o=this.sourceSearch=m.substring(n);m=m.substring(0,n),this.sourcePath=a.substring(0,h+n),H(o.substring(1).split(/[&?]/),b)}else this.sourcePath=a,this.sourceSearch="";g+=c(m)+"$",i.push(m),this.regexp=new RegExp(g),this.prefix=i[0]}function o(){this.compile=function(a){return new n(a)},this.isMatcher=function(a){return F(a)&&D(a.exec)&&D(a.format)&&D(a.concat)},this.$get=function(){return this}}function p(a){function b(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function c(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function d(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return C(d)?d:!0}var e=[],f=null;this.rule=function(a){if(!D(a))throw new Error("'rule' must be a function");return e.push(a),this},this.otherwise=function(a){if(E(a)){var b=a;a=function(){return b}}else if(!D(a))throw new Error("'rule' must be a function");return f=a,this},this.when=function(e,f){var g,h=E(f);if(E(e)&&(e=a.compile(e)),!h&&!D(f)&&!G(f))throw new Error("invalid 'handler' in when()");var i={matcher:function(b,c){return h&&(g=a.compile(c),c=["$match",function(a){return g.format(a)}]),I(function(a,e){return d(a,c,b.exec(e.path(),e.search()))},{prefix:E(b.prefix)?b.prefix:""})},regex:function(a,e){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(g=e,e=["$match",function(a){return c(g,a)}]),I(function(b,c){return d(b,e,a.exec(c.path()))},{prefix:b(a)})}},j={matcher:a.isMatcher(e),regex:e instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](e,f));throw new Error("invalid 'what' in when()")},this.$get=["$location","$rootScope","$injector",function(a,b,c){function d(b){function d(b){var d=b(c,a);return d?(E(d)&&a.replace().url(d),!0):!1}if(!b||!b.defaultPrevented){var g,h=e.length;for(g=0;h>g;g++)if(d(e[g]))return;f&&d(f)}}return b.$on("$locationChangeSuccess",d),{sync:function(){d()}}}]}function q(a,e,f){function g(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function l(a,b){var d=E(a),e=d?a:a.name,f=g(e);if(f){if(!b)throw new Error("No reference point given for path '"+e+"'");for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=w[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function m(a,b){x[a]||(x[a]=[]),x[a].push(b)}function n(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!E(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(w.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):E(b.parent)?b.parent:"";if(e&&!w[e])return m(e,b.self);for(var f in z)D(z[f])&&(b[f]=z[f](b,z.$delegates[f]));if(w[c]=b,!b[y]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){v.$current.navigable==b&&j(a,c)||v.transitionTo(b,a,{location:!1})}]),x[c])for(var g=0;g<x[c].length;g++)n(x[c][g]);return b}function o(a){return a.indexOf("*")>-1}function p(a){var b=a.split("."),c=v.$current.name.split(".");if("**"===b[0]&&(c=c.slice(c.indexOf(b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(c.indexOf(b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length)return!1;for(var d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return c.join("")===b.join("")}function q(a,b){return E(a)&&!C(b)?z[a]:D(b)&&E(a)?(z[a]&&!z.$delegates[a]&&(z.$delegates[a]=z[a]),z[a]=b,this):this}function r(a,b){return F(a)?b=a:b.name=a,n(b),this}function s(a,e,g,m,n,q,r,s,x){function z(){r.url()!==M&&(r.url(M),r.replace())}function A(a,c,d,f,h){var i=d?c:k(a.params,c),j={$stateParams:i};h.resolve=n.resolve(a.resolve,j,h.resolve,a);var l=[h.resolve.then(function(a){h.globals=a})];return f&&l.push(f),H(a.views,function(c,d){var e=c.resolve&&c.resolve!==a.resolve?c.resolve:{};e.$template=[function(){return g.load(d,{view:c,locals:j,params:i,notify:!1})||""}],l.push(n.resolve(e,j,h.resolve,a).then(function(f){if(D(c.controllerProvider)||G(c.controllerProvider)){var g=b.extend({},e,j);f.$$controller=m.invoke(c.controllerProvider,null,g)}else f.$$controller=c.controller;f.$$state=a,f.$$controllerAs=c.controllerAs,h[d]=f}))}),e.all(l).then(function(){return h})}var B=e.reject(new Error("transition superseded")),F=e.reject(new Error("transition prevented")),K=e.reject(new Error("transition aborted")),L=e.reject(new Error("transition failed")),M=r.url(),N=x.baseHref();return u.locals={resolve:null,globals:{$stateParams:{}}},v={params:{},current:u.self,$current:u,transition:null},v.reload=function(){v.transitionTo(v.current,q,{reload:!0,inherit:!1,notify:!1})},v.go=function(a,b,c){return this.transitionTo(a,b,I({inherit:!0,relative:v.$current},c))},v.transitionTo=function(b,c,f){c=c||{},f=I({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,k=v.$current,n=v.params,o=k.path,p=l(b,f.relative);if(!C(p)){var s={to:b,toParams:c,options:f};if(g=a.$broadcast("$stateNotFound",s,k.self,n),g.defaultPrevented)return z(),K;if(g.retry){if(f.$retry)return z(),L;var w=v.transition=e.when(g.retry);return w.then(function(){return w!==v.transition?B:(s.options.$retry=!0,v.transitionTo(s.to,s.toParams,s.options))},function(){return K}),z(),w}if(b=s.to,c=s.toParams,f=s.options,p=l(b,f.relative),!C(p)){if(f.relative)throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'");throw new Error("No such state '"+b+"'")}}if(p[y])throw new Error("Cannot transition to abstract state '"+b+"'");f.inherit&&(c=h(q,c||{},v.$current,p)),b=p;var x,D,E=b.path,G=u.locals,H=[];for(x=0,D=E[x];D&&D===o[x]&&j(c,n,D.ownParams)&&!f.reload;x++,D=E[x])G=H[x]=D.locals;if(t(b,k,G,f))return b.self.reloadOnSearch!==!1&&z(),v.transition=null,e.when(v.current);if(c=i(b.params,c||{}),f.notify&&(g=a.$broadcast("$stateChangeStart",b.self,c,k.self,n),g.defaultPrevented))return z(),F;for(var N=e.when(G),O=x;O<E.length;O++,D=E[O])G=H[O]=d(G),N=A(D,c,D===b,N,G);var P=v.transition=N.then(function(){var d,e,g;if(v.transition!==P)return B;for(d=o.length-1;d>=x;d--)g=o[d],g.self.onExit&&m.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=x;d<E.length;d++)e=E[d],e.locals=H[d],e.self.onEnter&&m.invoke(e.self.onEnter,e.self,e.locals.globals);if(v.transition!==P)return B;v.$current=b,v.current=b.self,v.params=c,J(v.params,q),v.transition=null;var h=b.navigable;return f.location&&h&&(r.url(h.url.format(h.locals.globals.$stateParams)),"replace"===f.location&&r.replace()),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,k.self,n),M=r.url(),v.current},function(d){return v.transition!==P?B:(v.transition=null,a.$broadcast("$stateChangeError",b.self,c,k.self,n,d),z(),e.reject(d))});return P},v.is=function(a,d){var e=l(a);return C(e)?v.$current!==e?!1:C(d)&&null!==d?b.equals(q,d):!0:c},v.includes=function(a,d){if(E(a)&&o(a)){if(!p(a))return!1;a=v.$current.name}var e=l(a);if(!C(e))return c;if(!C(v.$current.includes[e.name]))return!1;var f=!0;return b.forEach(d,function(a,b){C(q[b])&&q[b]===a||(f=!1)}),f},v.href=function(a,b,c){c=I({lossy:!0,inherit:!1,absolute:!1,relative:v.$current},c||{});var d=l(a,c.relative);if(!C(d))return null;b=h(q,b||{},v.$current,d);var e=d&&c.lossy?d.navigable:d,g=e&&e.url?e.url.format(i(d.params,b||{})):null;return!f.html5Mode()&&g&&(g="#"+f.hashPrefix()+g),"/"!==N&&(f.html5Mode()?g=N.slice(0,-1)+g:c.absolute&&(g=N.slice(1)+g)),c.absolute&&g&&(g=r.protocol()+"://"+r.host()+(80==r.port()||443==r.port()?"":":"+r.port())+(!f.html5Mode()&&g?"/":"")+g),g},v.get=function(a,b){if(!C(a)){var c=[];return H(w,function(a){c.push(a.self)}),c}var d=l(a,b);return d&&d.self?d.self:null},v}function t(a,b,c,d){return a!==b||(c!==b.locals||d.reload)&&a.self.reloadOnSearch!==!1?void 0:!0}var u,v,w={},x={},y="abstract",z={parent:function(a){if(C(a.parent)&&a.parent)return l(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?l(b[1]):u},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=I({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url;if(E(b))return"^"==b.charAt(0)?e.compile(b.substring(1)):(a.parent.navigable||u).url.concat(b);if(e.isMatcher(b)||null==b)return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},params:function(a){if(!a.params)return a.url?a.url.parameters():a.parent.params;if(!G(a.params))throw new Error("Invalid params in state '"+a+"'");if(a.url)throw new Error("Both params and url specicified in state '"+a+"'");return a.params},views:function(a){var b={};return H(C(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},ownParams:function(a){if(!a.parent)return a.params;var b={};H(a.params,function(a){b[a]=!0}),H(a.parent.params,function(c){if(!b[c])throw new Error("Missing required parameter '"+c+"' in state '"+a.name+"'");b[c]=!1});var c=[];return H(b,function(a,b){a&&c.push(b)}),c},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?I({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};u=n({name:"",url:"^",views:null,"abstract":!0}),u.navigable=null,this.decorator=q,this.state=r,this.$get=s,s.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter","$browser"]}function r(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=I(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function s(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){c(function(){a[0].scrollIntoView()},0,!1)}}]}function t(a,c,d){function e(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function f(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(i)return{enter:function(a,b,c){i.enter(a,null,b,c)},leave:function(a,b){i.leave(a,b)}};if(h){var d=h&&h(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var g=e(),h=g("$animator"),i=g("$animate"),j={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,e,g){return function(c,e,h){function i(){k&&(k.remove(),k=null),m&&(m.$destroy(),m=null),l&&(q.leave(l,function(){k=null}),k=l,l=null)}function j(f){var h=c.$new(),j=l&&l.data("$uiViewName"),k=j&&a.$current&&a.$current.locals[j];if(f||k!==n){var r=g(h,function(a){q.enter(a,e,function(){(b.isDefined(p)&&!p||c.$eval(p))&&d(a)}),i()});n=a.$current.locals[r.data("$uiViewName")],l=r,m=h,m.$emit("$viewContentLoaded"),m.$eval(o)}}var k,l,m,n,o=h.onload||"",p=h.autoscroll,q=f(h,c);c.$on("$stateChangeSuccess",function(){j(!1)}),c.$on("$viewContentLoading",function(){j(!1)}),j(!0)}}};return j}function u(a,b,c){return{restrict:"ECA",priority:-400,compile:function(d){var e=d.html();return function(d,f,g){var h=g.uiView||g.name||"",i=f.inheritedData("$uiView");h.indexOf("@")<0&&(h=h+"@"+(i?i.state.name:"")),f.data("$uiViewName",h);var j=c.$current,k=j&&j.locals[h];if(k){f.data("$uiView",{name:h,state:k.$$state}),f.html(k.$template?k.$template:e);var l=a(f.contents());if(k.$$controller){k.$scope=d;var m=b(k.$$controller,k);k.$$controllerAs&&(d[k.$$controllerAs]=m),f.data("$ngControllerController",m),f.children().data("$ngControllerController",m)}l(d)}}}}}function v(a){var b=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!b||4!==b.length)throw new Error("Invalid state ref '"+a+"'");return{state:b[1],paramExpr:b[3]||null}}function w(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function x(a,c){var d=["location","inherit","reload"];return{restrict:"A",require:"?^uiSrefActive",link:function(e,f,g,h){var i=v(g.uiSref),j=null,k=w(f)||a.$current,l="FORM"===f[0].nodeName,m=l?"action":"href",n=!0,o={relative:k},p=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in p&&(o[a]=p[a])});var q=function(b){if(b&&(j=b),n){var c=a.href(i.state,j,o);return h&&h.$$setStateInfo(i.state,j),c?void(f[0][m]=c):(n=!1,!1)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a){a!==j&&q(a)},!0),j=e.$eval(i.paramExpr)),q(),l||f.bind("click",function(b){var d=b.which||b.button;d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target")||(c(function(){a.go(i.state,j,o)}),b.preventDefault())})}}}function y(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(d,e,f){function g(){a.$current.self===i&&h()?e.addClass(l):e.removeClass(l)}function h(){return!k||j(k,b)}var i,k,l;l=c(f.uiSrefActive||"",!1)(d),this.$$setStateInfo=function(b,c){i=a.get(b,w(e)),k=c,g()},d.$on("$stateChangeSuccess",g)}]}}function z(a){return function(b){return a.is(b)}}function A(a){return function(b){return a.includes(b)}}function B(a,b){function e(a){this.locals=a.locals.globals,this.params=this.locals.$stateParams}function f(){this.locals=null,this.params=null}function g(c,g){if(null!=g.redirectTo){var h,j=g.redirectTo;if(E(j))h=j;else{if(!D(j))throw new Error("Invalid 'redirectTo' in when()");h=function(a,b){return j(a,b.path(),b.search())}}b.when(c,h)}else a.state(d(g,{parent:null,name:"route:"+encodeURIComponent(c),url:c,onEnter:e,onExit:f}));return i.push(g),this}function h(a,b,d){function e(a){return""!==a.name?a:c}var f={routes:i,params:d,current:c};return b.$on("$stateChangeStart",function(a,c,d,f){b.$broadcast("$routeChangeStart",e(c),e(f))}),b.$on("$stateChangeSuccess",function(a,c,d,g){f.current=e(c),b.$broadcast("$routeChangeSuccess",e(c),e(g)),J(d,f.params)}),b.$on("$stateChangeError",function(a,c,d,f,g,h){b.$broadcast("$routeChangeError",e(c),e(f),h)}),f}var i=[];e.$inject=["$$state"],this.when=g,this.$get=h,h.$inject=["$state","$rootScope","$routeParams"]}var C=b.isDefined,D=b.isFunction,E=b.isString,F=b.isObject,G=b.isArray,H=b.forEach,I=b.extend,J=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),l.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",l),m.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",m),n.prototype.concat=function(a){return new n(this.sourcePath+a+this.sourceSearch)},n.prototype.toString=function(){return this.source},n.prototype.exec=function(a,b){var c=this.regexp.exec(a);if(!c)return null;var d,e=this.params,f=e.length,g=this.segments.length-1,h={};if(g!==c.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(d=0;g>d;d++)h[e[d]]=c[d+1];for(;f>d;d++)h[e[d]]=b[e[d]];return h},n.prototype.parameters=function(){return this.params},n.prototype.format=function(a){var b=this.segments,c=this.params;if(!a)return b.join("");var d,e,f,g=b.length-1,h=c.length,i=b[0];for(d=0;g>d;d++)f=a[c[d]],null!=f&&(i+=encodeURIComponent(f)),i+=b[d+1];for(;h>d;d++)f=a[c[d]],null!=f&&(i+=(e?"&":"?")+c[d]+"="+encodeURIComponent(f),e=!0);return i},b.module("ui.router.util").provider("$urlMatcherFactory",o),p.$inject=["$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",p),q.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",q),r.$inject=[],b.module("ui.router.state").provider("$view",r),b.module("ui.router.state").provider("$uiViewScroll",s),t.$inject=["$state","$injector","$uiViewScroll"],u.$inject=["$compile","$controller","$state"],b.module("ui.router.state").directive("uiView",t),b.module("ui.router.state").directive("uiView",u),x.$inject=["$state","$timeout"],y.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",x).directive("uiSrefActive",y),z.$inject=["$state"],A.$inject=["$state"],b.module("ui.router.state").filter("isState",z).filter("includedByState",A),B.$inject=["$stateProvider","$urlRouterProvider"],b.module("ui.router.compat").provider("$route",B).directive("ngView",t)}(window,window.angular);
}).call(global, module, undefined, undefined);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"/home/codio/workspace/bower_components/angular/angular.min.js":"/home/codio/workspace/bower_components/angular/angular.min.js"}],"/home/codio/workspace/bower_components/angular/angular.min.js":[function(require,module,exports){
(function (global){
;__browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {
/*
 AngularJS v1.2.26
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(W,X,t){'use strict';function C(b){return function(){var a=arguments[0],c,a="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.2.26/"+(b?b+"/":"")+a;for(c=1;c<arguments.length;c++)a=a+(1==c?"?":"&")+"p"+(c-1)+"="+encodeURIComponent("function"==typeof arguments[c]?arguments[c].toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof arguments[c]?"undefined":"string"!=typeof arguments[c]?JSON.stringify(arguments[c]):arguments[c]);return Error(a)}}function Pa(b){if(null==b||Ga(b))return!1;
var a=b.length;return 1===b.nodeType&&a?!0:v(b)||J(b)||0===a||"number"===typeof a&&0<a&&a-1 in b}function r(b,a,c){var d;if(b)if(P(b))for(d in b)"prototype"==d||("length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d))||a.call(c,b[d],d);else if(J(b)||Pa(b))for(d=0;d<b.length;d++)a.call(c,b[d],d);else if(b.forEach&&b.forEach!==r)b.forEach(a,c);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d);return b}function Zb(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a.sort()}function Tc(b,
a,c){for(var d=Zb(b),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function $b(b){return function(a,c){b(c,a)}}function hb(){for(var b=ma.length,a;b;){b--;a=ma[b].charCodeAt(0);if(57==a)return ma[b]="A",ma.join("");if(90==a)ma[b]="0";else return ma[b]=String.fromCharCode(a+1),ma.join("")}ma.unshift("0");return ma.join("")}function ac(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function D(b){var a=b.$$hashKey;r(arguments,function(a){a!==b&&r(a,function(a,c){b[c]=a})});ac(b,a);return b}function U(b){return parseInt(b,
10)}function bc(b,a){return D(new (D(function(){},{prototype:b})),a)}function E(){}function Qa(b){return b}function ba(b){return function(){return b}}function x(b){return"undefined"===typeof b}function y(b){return"undefined"!==typeof b}function T(b){return null!=b&&"object"===typeof b}function v(b){return"string"===typeof b}function ib(b){return"number"===typeof b}function ta(b){return"[object Date]"===za.call(b)}function P(b){return"function"===typeof b}function jb(b){return"[object RegExp]"===za.call(b)}
function Ga(b){return b&&b.document&&b.location&&b.alert&&b.setInterval}function Uc(b){return!(!b||!(b.nodeName||b.prop&&b.attr&&b.find))}function Vc(b,a,c){var d=[];r(b,function(b,f,g){d.push(a.call(c,b,f,g))});return d}function Ra(b,a){if(b.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(a===b[c])return c;return-1}function Sa(b,a){var c=Ra(b,a);0<=c&&b.splice(c,1);return a}function Ha(b,a,c,d){if(Ga(b)||b&&b.$evalAsync&&b.$watch)throw Ta("cpws");if(a){if(b===a)throw Ta("cpi");c=c||[];
d=d||[];if(T(b)){var e=Ra(c,b);if(-1!==e)return d[e];c.push(b);d.push(a)}if(J(b))for(var f=a.length=0;f<b.length;f++)e=Ha(b[f],null,c,d),T(b[f])&&(c.push(b[f]),d.push(e)),a.push(e);else{var g=a.$$hashKey;J(a)?a.length=0:r(a,function(b,c){delete a[c]});for(f in b)e=Ha(b[f],null,c,d),T(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e;ac(a,g)}}else if(a=b)J(b)?a=Ha(b,[],c,d):ta(b)?a=new Date(b.getTime()):jb(b)?(a=RegExp(b.source,b.toString().match(/[^\/]*$/)[0]),a.lastIndex=b.lastIndex):T(b)&&(a=Ha(b,{},c,d));
return a}function ha(b,a){if(J(b)){a=a||[];for(var c=0;c<b.length;c++)a[c]=b[c]}else if(T(b))for(c in a=a||{},b)!kb.call(b,c)||"$"===c.charAt(0)&&"$"===c.charAt(1)||(a[c]=b[c]);return a||b}function Aa(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c)if(J(b)){if(!J(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!Aa(b[d],a[d]))return!1;return!0}}else{if(ta(b))return ta(a)?isNaN(b.getTime())&&isNaN(a.getTime())||b.getTime()===
a.getTime():!1;if(jb(b)&&jb(a))return b.toString()==a.toString();if(b&&b.$evalAsync&&b.$watch||a&&a.$evalAsync&&a.$watch||Ga(b)||Ga(a)||J(a))return!1;c={};for(d in b)if("$"!==d.charAt(0)&&!P(b[d])){if(!Aa(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==t&&!P(a[d]))return!1;return!0}return!1}function Bb(b,a){var c=2<arguments.length?Ba.call(arguments,2):[];return!P(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,c.concat(Ba.call(arguments,
0))):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function Wc(b,a){var c=a;"string"===typeof b&&"$"===b.charAt(0)?c=t:Ga(a)?c="$WINDOW":a&&X===a?c="$DOCUMENT":a&&(a.$evalAsync&&a.$watch)&&(c="$SCOPE");return c}function na(b,a){return"undefined"===typeof b?t:JSON.stringify(b,Wc,a?"  ":null)}function cc(b){return v(b)?JSON.parse(b):b}function Ua(b){"function"===typeof b?b=!0:b&&0!==b.length?(b=K(""+b),b=!("f"==b||"0"==b||"false"==b||"no"==b||"n"==b||"[]"==b)):b=!1;
return b}function ia(b){b=w(b).clone();try{b.empty()}catch(a){}var c=w("<div>").append(b).html();try{return 3===b[0].nodeType?K(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+K(b)})}catch(d){return K(c)}}function dc(b){try{return decodeURIComponent(b)}catch(a){}}function ec(b){var a={},c,d;r((b||"").split("&"),function(b){b&&(c=b.replace(/\+/g,"%20").split("="),d=dc(c[0]),y(d)&&(b=y(c[1])?dc(c[1]):!0,kb.call(a,d)?J(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))});return a}function Cb(b){var a=
[];r(b,function(b,d){J(b)?r(b,function(b){a.push(Ca(d,!0)+(!0===b?"":"="+Ca(b,!0)))}):a.push(Ca(d,!0)+(!0===b?"":"="+Ca(b,!0)))});return a.length?a.join("&"):""}function lb(b){return Ca(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ca(b,a){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,a?"%20":"+")}function Xc(b,a){function c(a){a&&d.push(a)}var d=[b],e,f,g=["ng:app","ng-app","x-ng-app",
"data-ng-app"],k=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;r(g,function(a){g[a]=!0;c(X.getElementById(a));a=a.replace(":","\\:");b.querySelectorAll&&(r(b.querySelectorAll("."+a),c),r(b.querySelectorAll("."+a+"\\:"),c),r(b.querySelectorAll("["+a+"]"),c))});r(d,function(a){if(!e){var b=k.exec(" "+a.className+" ");b?(e=a,f=(b[2]||"").replace(/\s+/g,",")):r(a.attributes,function(b){!e&&g[b.name]&&(e=a,f=b.value)})}});e&&a(e,f?[f]:[])}function fc(b,a){var c=function(){b=w(b);if(b.injector()){var c=b[0]===X?
"document":ia(b);throw Ta("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);a.unshift("ng");c=gc(a);c.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(a,b,c,d,e){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},d=/^NG_DEFER_BOOTSTRAP!/;if(W&&!d.test(W.name))return c();W.name=W.name.replace(d,"");Va.resumeBootstrap=function(b){r(b,function(b){a.push(b)});c()}}function mb(b,a){a=
a||"_";return b.replace(Yc,function(b,d){return(d?a:"")+b.toLowerCase()})}function Db(b,a,c){if(!b)throw Ta("areq",a||"?",c||"required");return b}function Wa(b,a,c){c&&J(b)&&(b=b[b.length-1]);Db(P(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b}function Da(b,a){if("hasOwnProperty"===b)throw Ta("badname",a);}function hc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,g=0;g<f;g++)d=a[g],b&&(b=(e=b)[d]);return!c&&P(b)?Bb(e,b):b}function Eb(b){var a=
b[0];b=b[b.length-1];if(a===b)return w(a);var c=[a];do{a=a.nextSibling;if(!a)break;c.push(a)}while(a!==b);return w(c)}function Zc(b){var a=C("$injector"),c=C("ng");b=b.angular||(b.angular={});b.$$minErr=b.$$minErr||C;return b.module||(b.module=function(){var b={};return function(e,f,g){if("hasOwnProperty"===e)throw c("badname","module");f&&b.hasOwnProperty(e)&&(b[e]=null);return b[e]||(b[e]=function(){function b(a,d,e){return function(){c[e||"push"]([a,d,arguments]);return n}}if(!f)throw a("nomod",
e);var c=[],d=[],l=b("$injector","invoke"),n={_invokeQueue:c,_runBlocks:d,requires:f,name:e,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:b("$provide","value"),constant:b("$provide","constant","unshift"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:l,run:function(a){d.push(a);return this}};g&&l(g);return n}())}}())}
function $c(b){D(b,{bootstrap:fc,copy:Ha,extend:D,equals:Aa,element:w,forEach:r,injector:gc,noop:E,bind:Bb,toJson:na,fromJson:cc,identity:Qa,isUndefined:x,isDefined:y,isString:v,isFunction:P,isObject:T,isNumber:ib,isElement:Uc,isArray:J,version:ad,isDate:ta,lowercase:K,uppercase:Ia,callbacks:{counter:0},$$minErr:C,$$csp:Xa});Ya=Zc(W);try{Ya("ngLocale")}catch(a){Ya("ngLocale",[]).provider("$locale",bd)}Ya("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:cd});a.provider("$compile",
ic).directive({a:dd,input:jc,textarea:jc,form:ed,script:fd,select:gd,style:hd,option:id,ngBind:jd,ngBindHtml:kd,ngBindTemplate:ld,ngClass:md,ngClassEven:nd,ngClassOdd:od,ngCloak:pd,ngController:qd,ngForm:rd,ngHide:sd,ngIf:td,ngInclude:ud,ngInit:vd,ngNonBindable:wd,ngPluralize:xd,ngRepeat:yd,ngShow:zd,ngStyle:Ad,ngSwitch:Bd,ngSwitchWhen:Cd,ngSwitchDefault:Dd,ngOptions:Ed,ngTransclude:Fd,ngModel:Gd,ngList:Hd,ngChange:Id,required:kc,ngRequired:kc,ngValue:Jd}).directive({ngInclude:Kd}).directive(Fb).directive(lc);
a.provider({$anchorScroll:Ld,$animate:Md,$browser:Nd,$cacheFactory:Od,$controller:Pd,$document:Qd,$exceptionHandler:Rd,$filter:mc,$interpolate:Sd,$interval:Td,$http:Ud,$httpBackend:Vd,$location:Wd,$log:Xd,$parse:Yd,$rootScope:Zd,$q:$d,$sce:ae,$sceDelegate:be,$sniffer:ce,$templateCache:de,$timeout:ee,$window:fe,$$rAF:ge,$$asyncCallback:he})}])}function Za(b){return b.replace(ie,function(a,b,d,e){return e?d.toUpperCase():d}).replace(je,"Moz$1")}function Gb(b,a,c,d){function e(b){var e=c&&b?[this.filter(b)]:
[this],m=a,h,l,n,p,q,s;if(!d||null!=b)for(;e.length;)for(h=e.shift(),l=0,n=h.length;l<n;l++)for(p=w(h[l]),m?p.triggerHandler("$destroy"):m=!m,q=0,p=(s=p.children()).length;q<p;q++)e.push(Ea(s[q]));return f.apply(this,arguments)}var f=Ea.fn[b],f=f.$original||f;e.$original=f;Ea.fn[b]=e}function S(b){if(b instanceof S)return b;v(b)&&(b=aa(b));if(!(this instanceof S)){if(v(b)&&"<"!=b.charAt(0))throw Hb("nosel");return new S(b)}if(v(b)){var a=b;b=X;var c;if(c=ke.exec(a))b=[b.createElement(c[1])];else{var d=
b,e;b=d.createDocumentFragment();c=[];if(Ib.test(a)){d=b.appendChild(d.createElement("div"));e=(le.exec(a)||["",""])[1].toLowerCase();e=ea[e]||ea._default;d.innerHTML="<div>&#160;</div>"+e[1]+a.replace(me,"<$1></$2>")+e[2];d.removeChild(d.firstChild);for(a=e[0];a--;)d=d.lastChild;a=0;for(e=d.childNodes.length;a<e;++a)c.push(d.childNodes[a]);d=b.firstChild;d.textContent=""}else c.push(d.createTextNode(a));b.textContent="";b.innerHTML="";b=c}Jb(this,b);w(X.createDocumentFragment()).append(this)}else Jb(this,
b)}function Kb(b){return b.cloneNode(!0)}function Ja(b){Lb(b);var a=0;for(b=b.childNodes||[];a<b.length;a++)Ja(b[a])}function nc(b,a,c,d){if(y(d))throw Hb("offargs");var e=oa(b,"events");oa(b,"handle")&&(x(a)?r(e,function(a,c){$a(b,c,a);delete e[c]}):r(a.split(" "),function(a){x(c)?($a(b,a,e[a]),delete e[a]):Sa(e[a]||[],c)}))}function Lb(b,a){var c=b.ng339,d=ab[c];d&&(a?delete ab[c].data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),nc(b)),delete ab[c],b.ng339=t))}function oa(b,a,c){var d=
b.ng339,d=ab[d||-1];if(y(c))d||(b.ng339=d=++ne,d=ab[d]={}),d[a]=c;else return d&&d[a]}function Mb(b,a,c){var d=oa(b,"data"),e=y(c),f=!e&&y(a),g=f&&!T(a);d||g||oa(b,"data",d={});if(e)d[a]=c;else if(f){if(g)return d&&d[a];D(d,a)}else return d}function Nb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function nb(b,a){a&&b.setAttribute&&r(a.split(" "),function(a){b.setAttribute("class",aa((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g,
" ").replace(" "+aa(a)+" "," ")))})}function ob(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(a.split(" "),function(a){a=aa(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});b.setAttribute("class",aa(c))}}function Jb(b,a){if(a){a=a.nodeName||!y(a.length)||Ga(a)?[a]:a;for(var c=0;c<a.length;c++)b.push(a[c])}}function oc(b,a){return pb(b,"$"+(a||"ngController")+"Controller")}function pb(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=J(a)?a:[a];b;){for(var d=
0,e=a.length;d<e;d++)if((c=w.data(b,a[d]))!==t)return c;b=b.parentNode||11===b.nodeType&&b.host}}function pc(b){for(var a=0,c=b.childNodes;a<c.length;a++)Ja(c[a]);for(;b.firstChild;)b.removeChild(b.firstChild)}function qc(b,a){var c=qb[a.toLowerCase()];return c&&rc[b.nodeName]&&c}function oe(b,a){var c=function(c,e){c.preventDefault||(c.preventDefault=function(){c.returnValue=!1});c.stopPropagation||(c.stopPropagation=function(){c.cancelBubble=!0});c.target||(c.target=c.srcElement||X);if(x(c.defaultPrevented)){var f=
c.preventDefault;c.preventDefault=function(){c.defaultPrevented=!0;f.call(c)};c.defaultPrevented=!1}c.isDefaultPrevented=function(){return c.defaultPrevented||!1===c.returnValue};var g=ha(a[e||c.type]||[]);r(g,function(a){a.call(b,c)});8>=Q?(c.preventDefault=null,c.stopPropagation=null,c.isDefaultPrevented=null):(delete c.preventDefault,delete c.stopPropagation,delete c.isDefaultPrevented)};c.elem=b;return c}function Ka(b,a){var c=typeof b,d;"function"==c||"object"==c&&null!==b?"function"==typeof(d=
b.$$hashKey)?d=b.$$hashKey():d===t&&(d=b.$$hashKey=(a||hb)()):d=b;return c+":"+d}function bb(b,a){if(a){var c=0;this.nextUid=function(){return++c}}r(b,this.put,this)}function sc(b){var a,c;"function"===typeof b?(a=b.$inject)||(a=[],b.length&&(c=b.toString().replace(pe,""),c=c.match(qe),r(c[1].split(re),function(b){b.replace(se,function(b,c,d){a.push(d)})})),b.$inject=a):J(b)?(c=b.length-1,Wa(b[c],"fn"),a=b.slice(0,c)):Wa(b,"fn",!0);return a}function gc(b){function a(a){return function(b,c){if(T(b))r(b,
$b(a));else return a(b,c)}}function c(a,b){Da(a,"service");if(P(b)||J(b))b=n.instantiate(b);if(!b.$get)throw cb("pget",a);return l[a+k]=b}function d(a,b){return c(a,{$get:b})}function e(a){var b=[],c,d,f,k;r(a,function(a){if(!h.get(a)){h.put(a,!0);try{if(v(a))for(c=Ya(a),b=b.concat(e(c.requires)).concat(c._runBlocks),d=c._invokeQueue,f=0,k=d.length;f<k;f++){var g=d[f],m=n.get(g[0]);m[g[1]].apply(m,g[2])}else P(a)?b.push(n.invoke(a)):J(a)?b.push(n.invoke(a)):Wa(a,"module")}catch(l){throw J(a)&&(a=
a[a.length-1]),l.message&&(l.stack&&-1==l.stack.indexOf(l.message))&&(l=l.message+"\n"+l.stack),cb("modulerr",a,l.stack||l.message||l);}}});return b}function f(a,b){function c(d){if(a.hasOwnProperty(d)){if(a[d]===g)throw cb("cdep",d+" <- "+m.join(" <- "));return a[d]}try{return m.unshift(d),a[d]=g,a[d]=b(d)}catch(e){throw a[d]===g&&delete a[d],e;}finally{m.shift()}}function d(a,b,e){var f=[],k=sc(a),g,m,h;m=0;for(g=k.length;m<g;m++){h=k[m];if("string"!==typeof h)throw cb("itkn",h);f.push(e&&e.hasOwnProperty(h)?
e[h]:c(h))}J(a)&&(a=a[g]);return a.apply(b,f)}return{invoke:d,instantiate:function(a,b){var c=function(){},e;c.prototype=(J(a)?a[a.length-1]:a).prototype;c=new c;e=d(a,c,b);return T(e)||P(e)?e:c},get:c,annotate:sc,has:function(b){return l.hasOwnProperty(b+k)||a.hasOwnProperty(b)}}}var g={},k="Provider",m=[],h=new bb([],!0),l={$provide:{provider:a(c),factory:a(d),service:a(function(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}),value:a(function(a,b){return d(a,ba(b))}),constant:a(function(a,
b){Da(a,"constant");l[a]=b;p[a]=b}),decorator:function(a,b){var c=n.get(a+k),d=c.$get;c.$get=function(){var a=q.invoke(d,c);return q.invoke(b,null,{$delegate:a})}}}},n=l.$injector=f(l,function(){throw cb("unpr",m.join(" <- "));}),p={},q=p.$injector=f(p,function(a){a=n.get(a+k);return q.invoke(a.$get,a)});r(e(b),function(a){q.invoke(a||E)});return q}function Ld(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;
r(a,function(a){b||"a"!==K(a.nodeName)||(b=a)});return b}function f(){var b=c.hash(),d;b?(d=g.getElementById(b))?d.scrollIntoView():(d=e(g.getElementsByName(b)))?d.scrollIntoView():"top"===b&&a.scrollTo(0,0):a.scrollTo(0,0)}var g=a.document;b&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(f)});return f}]}function he(){this.$get=["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:function(b){return a(b,0,!1)}}]}function te(b,a,c,d){function e(a){try{a.apply(null,
Ba.call(arguments,1))}finally{if(s--,0===s)for(;F.length;)try{F.pop()()}catch(b){c.error(b)}}}function f(a,b){(function fa(){r(u,function(a){a()});A=b(fa,a)})()}function g(){z=null;N!=k.url()&&(N=k.url(),r(ca,function(a){a(k.url())}))}var k=this,m=a[0],h=b.location,l=b.history,n=b.setTimeout,p=b.clearTimeout,q={};k.isMock=!1;var s=0,F=[];k.$$completeOutstandingRequest=e;k.$$incOutstandingRequestCount=function(){s++};k.notifyWhenNoOutstandingRequests=function(a){r(u,function(a){a()});0===s?a():F.push(a)};
var u=[],A;k.addPollFn=function(a){x(A)&&f(100,n);u.push(a);return a};var N=h.href,R=a.find("base"),z=null;k.url=function(a,c){h!==b.location&&(h=b.location);l!==b.history&&(l=b.history);if(a){if(N!=a)return N=a,d.history?c?l.replaceState(null,"",a):(l.pushState(null,"",a),R.attr("href",R.attr("href"))):(z=a,c?h.replace(a):h.href=a),k}else return z||h.href.replace(/%27/g,"'")};var ca=[],L=!1;k.onUrlChange=function(a){if(!L){if(d.history)w(b).on("popstate",g);if(d.hashchange)w(b).on("hashchange",g);
else k.addPollFn(g);L=!0}ca.push(a);return a};k.$$checkUrlChange=g;k.baseHref=function(){var a=R.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var O={},da="",B=k.baseHref();k.cookies=function(a,b){var d,e,f,k;if(a)b===t?m.cookie=escape(a)+"=;path="+B+";expires=Thu, 01 Jan 1970 00:00:00 GMT":v(b)&&(d=(m.cookie=escape(a)+"="+escape(b)+";path="+B).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));else{if(m.cookie!==
da)for(da=m.cookie,d=da.split("; "),O={},f=0;f<d.length;f++)e=d[f],k=e.indexOf("="),0<k&&(a=unescape(e.substring(0,k)),O[a]===t&&(O[a]=unescape(e.substring(k+1))));return O}};k.defer=function(a,b){var c;s++;c=n(function(){delete q[c];e(a)},b||0);q[c]=!0;return c};k.defer.cancel=function(a){return q[a]?(delete q[a],p(a),e(E),!0):!1}}function Nd(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new te(b,d,a,c)}]}function Od(){this.$get=function(){function b(b,d){function e(a){a!=
n&&(p?p==a&&(p=a.n):p=a,f(a.n,a.p),f(a,n),n=a,n.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw C("$cacheFactory")("iid",b);var g=0,k=D({},d,{id:b}),m={},h=d&&d.capacity||Number.MAX_VALUE,l={},n=null,p=null;return a[b]={put:function(a,b){if(h<Number.MAX_VALUE){var c=l[a]||(l[a]={key:a});e(c)}if(!x(b))return a in m||g++,m[a]=b,g>h&&this.remove(p.key),b},get:function(a){if(h<Number.MAX_VALUE){var b=l[a];if(!b)return;e(b)}return m[a]},remove:function(a){if(h<Number.MAX_VALUE){var b=
l[a];if(!b)return;b==n&&(n=b.p);b==p&&(p=b.n);f(b.n,b.p);delete l[a]}delete m[a];g--},removeAll:function(){m={};g=0;l={};n=p=null},destroy:function(){l=k=m=null;delete a[b]},info:function(){return D({},k,{size:g})}}}var a={};b.info=function(){var b={};r(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};return b}}function de(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function ic(b,a){var c={},d="Directive",e=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,f=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,
g=/^(on[a-z]+|formaction)$/;this.directive=function m(a,e){Da(a,"directive");v(a)?(Db(e,"directiveFactory"),c.hasOwnProperty(a)||(c[a]=[],b.factory(a+d,["$injector","$exceptionHandler",function(b,d){var e=[];r(c[a],function(c,f){try{var g=b.invoke(c);P(g)?g={compile:ba(g)}:!g.compile&&g.link&&(g.compile=ba(g.link));g.priority=g.priority||0;g.index=f;g.name=g.name||a;g.require=g.require||g.controller&&g.name;g.restrict=g.restrict||"A";e.push(g)}catch(m){d(m)}});return e}])),c[a].push(e)):r(a,$b(m));
return this};this.aHrefSanitizationWhitelist=function(b){return y(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,l,n,p,q,s,F,u,A,N,R){function z(a,b,c,d,e){a instanceof
w||(a=w(a));r(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=w(b).wrap("<span></span>").parent()[0])});var f=L(a,b,a,c,d,e);ca(a,"ng-scope");return function(b,c,d,e){Db(b,"scope");var g=c?La.clone.call(a):a;r(d,function(a,b){g.data("$"+b+"Controller",a)});d=0;for(var m=g.length;d<m;d++){var h=g[d].nodeType;1!==h&&9!==h||g.eq(d).data("$scope",b)}c&&c(g,b);f&&f(b,g,g,e);return g}}function ca(a,b){try{a.addClass(b)}catch(c){}}function L(a,b,c,d,e,f){function g(a,c,d,e){var f,h,l,q,n,
p,s;f=c.length;var M=Array(f);for(q=0;q<f;q++)M[q]=c[q];p=q=0;for(n=m.length;q<n;p++)h=M[p],c=m[q++],f=m[q++],c?(c.scope?(l=a.$new(),w.data(h,"$scope",l)):l=a,s=c.transcludeOnThisElement?O(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?O(a,b):null,c(f,l,h,d,s)):f&&f(a,h.childNodes,t,e)}for(var m=[],h,l,q,n,p=0;p<a.length;p++)h=new Ob,l=da(a[p],[],h,0===p?d:t,e),(f=l.length?H(l,a[p],h,b,c,null,[],[],f):null)&&f.scope&&ca(h.$$element,"ng-scope"),h=f&&f.terminal||!(q=a[p].childNodes)||!q.length?
null:L(q,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b),m.push(f,h),n=n||f||h,f=null;return n?g:null}function O(a,b,c){return function(d,e,f){var g=!1;d||(d=a.$new(),g=d.$$transcluded=!0);e=b(d,e,f,c);if(g)e.on("$destroy",function(){d.$destroy()});return e}}function da(a,b,c,d,g){var m=c.$attr,h;switch(a.nodeType){case 1:fa(b,pa(Ma(a).toLowerCase()),"E",d,g);for(var l,q,n,p=a.attributes,s=0,F=p&&p.length;s<F;s++){var A=!1,N=!1;l=p[s];if(!Q||8<=Q||l.specified){h=l.name;q=
aa(l.value);l=pa(h);if(n=U.test(l))h=mb(l.substr(6),"-");var u=l.replace(/(Start|End)$/,"");l===u+"Start"&&(A=h,N=h.substr(0,h.length-5)+"end",h=h.substr(0,h.length-6));l=pa(h.toLowerCase());m[l]=h;if(n||!c.hasOwnProperty(l))c[l]=q,qc(a,l)&&(c[l]=!0);S(a,b,q,l);fa(b,l,"A",d,g,A,N)}}a=a.className;if(v(a)&&""!==a)for(;h=f.exec(a);)l=pa(h[2]),fa(b,l,"C",d,g)&&(c[l]=aa(h[3])),a=a.substr(h.index+h[0].length);break;case 3:K(b,a.nodeValue);break;case 8:try{if(h=e.exec(a.nodeValue))l=pa(h[1]),fa(b,l,"M",
d,g)&&(c[l]=aa(h[2]))}catch(z){}}b.sort(x);return b}function B(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ja("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return w(d)}function I(a,b,c){return function(d,e,f,g,h){e=B(e[0],b,c);return a(d,e,f,g,h)}}function H(a,c,d,e,f,g,m,n,p){function F(a,b,c,d){if(a){c&&(a=I(a,c,d));a.require=G.require;a.directiveName=C;if(L===G||G.$$isolateScope)a=
tc(a,{isolateScope:!0});m.push(a)}if(b){c&&(b=I(b,c,d));b.require=G.require;b.directiveName=C;if(L===G||G.$$isolateScope)b=tc(b,{isolateScope:!0});n.push(b)}}function A(a,b,c,d){var e,f="data",g=!1;if(v(b)){for(;"^"==(e=b.charAt(0))||"?"==e;)b=b.substr(1),"^"==e&&(f="inheritedData"),g=g||"?"==e;e=null;d&&"data"===f&&(e=d[b]);e=e||c[f]("$"+b+"Controller");if(!e&&!g)throw ja("ctreq",b,a);}else J(b)&&(e=[],r(b,function(b){e.push(A(a,b,c,d))}));return e}function N(a,e,f,g,p){function F(a,b){var c;2>arguments.length&&
(b=a,a=t);K&&(c=da);return p(a,b,c)}var u,M,z,O,I,B,da={},rb;u=c===f?d:ha(d,new Ob(w(f),d.$attr));M=u.$$element;if(L){var Na=/^\s*([@=&])(\??)\s*(\w*)\s*$/;B=e.$new(!0);!H||H!==L&&H!==L.$$originalDirective?M.data("$isolateScopeNoTemplate",B):M.data("$isolateScope",B);ca(M,"ng-isolate-scope");r(L.scope,function(a,c){var d=a.match(Na)||[],f=d[3]||c,g="?"==d[2],d=d[1],m,l,n,p;B.$$isolateBindings[c]=d+f;switch(d){case "@":u.$observe(f,function(a){B[c]=a});u.$$observers[f].$$scope=e;u[f]&&(B[c]=b(u[f])(e));
break;case "=":if(g&&!u[f])break;l=q(u[f]);p=l.literal?Aa:function(a,b){return a===b||a!==a&&b!==b};n=l.assign||function(){m=B[c]=l(e);throw ja("nonassign",u[f],L.name);};m=B[c]=l(e);B.$watch(function(){var a=l(e);p(a,B[c])||(p(a,m)?n(e,a=B[c]):B[c]=a);return m=a},null,l.literal);break;case "&":l=q(u[f]);B[c]=function(a){return l(e,a)};break;default:throw ja("iscp",L.name,c,a);}})}rb=p&&F;R&&r(R,function(a){var b={$scope:a===L||a.$$isolateScope?B:e,$element:M,$attrs:u,$transclude:rb},c;I=a.controller;
"@"==I&&(I=u[a.name]);c=s(I,b);da[a.name]=c;K||M.data("$"+a.name+"Controller",c);a.controllerAs&&(b.$scope[a.controllerAs]=c)});g=0;for(z=m.length;g<z;g++)try{O=m[g],O(O.isolateScope?B:e,M,u,O.require&&A(O.directiveName,O.require,M,da),rb)}catch(G){l(G,ia(M))}g=e;L&&(L.template||null===L.templateUrl)&&(g=B);a&&a(g,f.childNodes,t,p);for(g=n.length-1;0<=g;g--)try{O=n[g],O(O.isolateScope?B:e,M,u,O.require&&A(O.directiveName,O.require,M,da),rb)}catch(y){l(y,ia(M))}}p=p||{};for(var u=-Number.MAX_VALUE,
O,R=p.controllerDirectives,L=p.newIsolateScopeDirective,H=p.templateDirective,fa=p.nonTlbTranscludeDirective,x=!1,D=!1,K=p.hasElementTranscludeDirective,Z=d.$$element=w(c),G,C,V,S=e,Q,Fa=0,qa=a.length;Fa<qa;Fa++){G=a[Fa];var U=G.$$start,Y=G.$$end;U&&(Z=B(c,U,Y));V=t;if(u>G.priority)break;if(V=G.scope)O=O||G,G.templateUrl||(db("new/isolated scope",L,G,Z),T(V)&&(L=G));C=G.name;!G.templateUrl&&G.controller&&(V=G.controller,R=R||{},db("'"+C+"' controller",R[C],G,Z),R[C]=G);if(V=G.transclude)x=!0,G.$$tlb||
(db("transclusion",fa,G,Z),fa=G),"element"==V?(K=!0,u=G.priority,V=Z,Z=d.$$element=w(X.createComment(" "+C+": "+d[C]+" ")),c=Z[0],Na(f,Ba.call(V,0),c),S=z(V,e,u,g&&g.name,{nonTlbTranscludeDirective:fa})):(V=w(Kb(c)).contents(),Z.empty(),S=z(V,e));if(G.template)if(D=!0,db("template",H,G,Z),H=G,V=P(G.template)?G.template(Z,d):G.template,V=W(V),G.replace){g=G;V=Ib.test(V)?w(aa(V)):[];c=V[0];if(1!=V.length||1!==c.nodeType)throw ja("tplrt",C,"");Na(f,Z,c);qa={$attr:{}};V=da(c,[],qa);var $=a.splice(Fa+
1,a.length-(Fa+1));L&&y(V);a=a.concat(V).concat($);E(d,qa);qa=a.length}else Z.html(V);if(G.templateUrl)D=!0,db("template",H,G,Z),H=G,G.replace&&(g=G),N=ue(a.splice(Fa,a.length-Fa),Z,d,f,x&&S,m,n,{controllerDirectives:R,newIsolateScopeDirective:L,templateDirective:H,nonTlbTranscludeDirective:fa}),qa=a.length;else if(G.compile)try{Q=G.compile(Z,d,S),P(Q)?F(null,Q,U,Y):Q&&F(Q.pre,Q.post,U,Y)}catch(ve){l(ve,ia(Z))}G.terminal&&(N.terminal=!0,u=Math.max(u,G.priority))}N.scope=O&&!0===O.scope;N.transcludeOnThisElement=
x;N.templateOnThisElement=D;N.transclude=S;p.hasElementTranscludeDirective=K;return N}function y(a){for(var b=0,c=a.length;b<c;b++)a[b]=bc(a[b],{$$isolateScope:!0})}function fa(b,e,f,g,h,q,n){if(e===h)return null;h=null;if(c.hasOwnProperty(e)){var p;e=a.get(e+d);for(var s=0,u=e.length;s<u;s++)try{p=e[s],(g===t||g>p.priority)&&-1!=p.restrict.indexOf(f)&&(q&&(p=bc(p,{$$start:q,$$end:n})),b.push(p),h=p)}catch(F){l(F)}}return h}function E(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;r(a,function(d,e){"$"!=
e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});r(b,function(b,f){"class"==f?(ca(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function ue(a,b,c,d,e,f,g,h){var m=[],l,q,s=b[0],u=a.shift(),F=D({},u,{templateUrl:null,transclude:null,replace:null,$$originalDirective:u}),N=P(u.templateUrl)?u.templateUrl(b,c):u.templateUrl;
b.empty();n.get(A.getTrustedResourceUrl(N),{cache:p}).success(function(n){var p,A;n=W(n);if(u.replace){n=Ib.test(n)?w(aa(n)):[];p=n[0];if(1!=n.length||1!==p.nodeType)throw ja("tplrt",u.name,N);n={$attr:{}};Na(d,b,p);var z=da(p,[],n);T(u.scope)&&y(z);a=z.concat(a);E(c,n)}else p=s,b.html(n);a.unshift(F);l=H(a,p,c,e,b,u,f,g,h);r(d,function(a,c){a==p&&(d[c]=b[0])});for(q=L(b[0].childNodes,e);m.length;){n=m.shift();A=m.shift();var R=m.shift(),I=m.shift(),z=b[0];if(A!==s){var B=A.className;h.hasElementTranscludeDirective&&
u.replace||(z=Kb(p));Na(R,w(A),z);ca(w(z),B)}A=l.transcludeOnThisElement?O(n,l.transclude,I):I;l(q,n,z,d,A)}m=null}).error(function(a,b,c,d){throw ja("tpload",d.url);});return function(a,b,c,d,e){a=e;m?(m.push(b),m.push(c),m.push(d),m.push(a)):(l.transcludeOnThisElement&&(a=O(b,l.transclude,e)),l(q,b,c,d,a))}}function x(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function db(a,b,c,d){if(b)throw ja("multidir",b.name,c.name,a,ia(d));}function K(a,
c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){var b=a.parent().length;b&&ca(a.parent(),"ng-binding");return function(a,c){var e=c.parent(),f=e.data("$binding")||[];f.push(d);e.data("$binding",f);b||ca(e,"ng-binding");a.$watch(d,function(a){c[0].nodeValue=a})}}})}function C(a,b){if("srcdoc"==b)return A.HTML;var c=Ma(a);if("xlinkHref"==b||"FORM"==c&&"action"==b||"IMG"!=c&&("src"==b||"ngSrc"==b))return A.RESOURCE_URL}function S(a,c,d,e){var f=b(d,!0);if(f){if("multiple"===e&&"SELECT"===
Ma(a))throw ja("selmulti",ia(a));c.push({priority:100,compile:function(){return{pre:function(c,d,m){d=m.$$observers||(m.$$observers={});if(g.test(e))throw ja("nodomevents");if(f=b(m[e],!0,C(a,e)))m[e]=f(c),(d[e]||(d[e]=[])).$$inter=!0,(m.$$observers&&m.$$observers[e].$$scope||c).$watch(f,function(a,b){"class"===e&&a!=b?m.$updateClass(a,b):m.$set(e,a)})}}}})}}function Na(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,m;if(a)for(g=0,m=a.length;g<m;g++)if(a[g]==d){a[g++]=c;m=g+e-1;for(var h=a.length;g<
h;g++,m++)m<h?a[g]=a[m]:delete a[g];a.length-=e-1;break}f&&f.replaceChild(c,d);a=X.createDocumentFragment();a.appendChild(d);c[w.expando]=d[w.expando];d=1;for(e=b.length;d<e;d++)f=b[d],w(f).remove(),a.appendChild(f),delete b[d];b[0]=c;b.length=1}function tc(a,b){return D(function(){return a.apply(null,arguments)},a,b)}var Ob=function(a,b){this.$$element=a;this.$attr=b||{}};Ob.prototype={$normalize:pa,$addClass:function(a){a&&0<a.length&&N.addClass(this.$$element,a)},$removeClass:function(a){a&&0<
a.length&&N.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=uc(a,b),d=uc(b,a);0===c.length?N.removeClass(this.$$element,d):0===d.length?N.addClass(this.$$element,c):N.setClass(this.$$element,c,d)},$set:function(a,b,c,d){var e=qc(this.$$element[0],a);e&&(this.$$element.prop(a,b),d=e);this[a]=b;d?this.$attr[a]=d:(d=this.$attr[a])||(this.$attr[a]=d=mb(a,"-"));e=Ma(this.$$element);if("A"===e&&"href"===a||"IMG"===e&&"src"===a)this[a]=b=R(b,"src"===a);!1!==c&&(null===b||b===t?this.$$element.removeAttr(d):
this.$$element.attr(d,b));(c=this.$$observers)&&r(c[a],function(a){try{a(b)}catch(c){l(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);e.push(b);F.$evalAsync(function(){e.$$inter||b(c[a])});return b}};var qa=b.startSymbol(),Z=b.endSymbol(),W="{{"==qa||"}}"==Z?Qa:function(a){return a.replace(/\{\{/g,qa).replace(/}}/g,Z)},U=/^ngAttr[A-Z]/;return z}]}function pa(b){return Za(b.replace(we,""))}function uc(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=
0;a:for(;f<d.length;f++){for(var g=d[f],k=0;k<e.length;k++)if(g==e[k])continue a;c+=(0<c.length?" ":"")+g}return c}function Pd(){var b={},a=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,d){Da(a,"controller");T(a)?D(b,a):b[a]=d};this.$get=["$injector","$window",function(c,d){return function(e,f){var g,k,m;v(e)&&(g=e.match(a),k=g[1],m=g[3],e=b.hasOwnProperty(k)?b[k]:hc(f.$scope,k,!0)||hc(d,k,!0),Wa(e,k,!0));g=c.instantiate(e,f);if(m){if(!f||"object"!==typeof f.$scope)throw C("$controller")("noscp",
k||e.name,m);f.$scope[m]=g}return g}}]}function Qd(){this.$get=["$window",function(b){return w(b.document)}]}function Rd(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function vc(b){var a={},c,d,e;if(!b)return a;r(b.split("\n"),function(b){e=b.indexOf(":");c=K(aa(b.substr(0,e)));d=aa(b.substr(e+1));c&&(a[c]=a[c]?a[c]+", "+d:d)});return a}function wc(b){var a=T(b)?b:t;return function(c){a||(a=vc(b));return c?a[K(c)]||null:a}}function xc(b,a,c){if(P(c))return c(b,
a);r(c,function(c){b=c(b,a)});return b}function Ud(){var b=/^\s*(\[|\{[^\{])/,a=/[\}\]]\s*$/,c=/^\)\]\}',?\n/,d={"Content-Type":"application/json;charset=utf-8"},e=this.defaults={transformResponse:[function(d){v(d)&&(d=d.replace(c,""),b.test(d)&&a.test(d)&&(d=cc(d)));return d}],transformRequest:[function(a){return T(a)&&"[object File]"!==za.call(a)&&"[object Blob]"!==za.call(a)?na(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ha(d),put:ha(d),patch:ha(d)},xsrfCookieName:"XSRF-TOKEN",
xsrfHeaderName:"X-XSRF-TOKEN"},f=this.interceptors=[],g=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,c,d,n,p){function q(a){function b(a){var d=D({},a,{data:xc(a.data,a.headers,c.transformResponse)});return 200<=a.status&&300>a.status?d:n.reject(d)}var c={method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},d=function(a){var b=e.headers,c=D({},a.headers),d,f,b=D({},b.common,b[K(a.method)]);
a:for(d in b){a=K(d);for(f in c)if(K(f)===a)continue a;c[d]=b[d]}(function(a){var b;r(a,function(c,d){P(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})})(c);return c}(a);D(c,a);c.headers=d;c.method=Ia(c.method);var f=[function(a){d=a.headers;var c=xc(a.data,wc(d),a.transformRequest);x(c)&&r(d,function(a,b){"content-type"===K(b)&&delete d[b]});x(a.withCredentials)&&!x(e.withCredentials)&&(a.withCredentials=e.withCredentials);return s(a,c,d).then(b,b)},t],g=n.when(c);for(r(A,function(a){(a.request||a.requestError)&&
f.unshift(a.request,a.requestError);(a.response||a.responseError)&&f.push(a.response,a.responseError)});f.length;){a=f.shift();var m=f.shift(),g=g.then(a,m)}g.success=function(a){g.then(function(b){a(b.data,b.status,b.headers,c)});return g};g.error=function(a){g.then(null,function(b){a(b.data,b.status,b.headers,c)});return g};return g}function s(c,f,g){function h(a,b,c,e){I&&(200<=a&&300>a?I.put(w,[a,b,vc(c),e]):I.remove(w));p(b,a,c,e);d.$$phase||d.$apply()}function p(a,b,d,e){b=Math.max(b,0);(200<=
b&&300>b?A.resolve:A.reject)({data:a,status:b,headers:wc(d),config:c,statusText:e})}function s(){var a=Ra(q.pendingRequests,c);-1!==a&&q.pendingRequests.splice(a,1)}var A=n.defer(),r=A.promise,I,H,w=F(c.url,c.params);q.pendingRequests.push(c);r.then(s,s);!c.cache&&!e.cache||(!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method)||(I=T(c.cache)?c.cache:T(e.cache)?e.cache:u);if(I)if(H=I.get(w),y(H)){if(H&&P(H.then))return H.then(s,s),H;J(H)?p(H[1],H[0],ha(H[2]),H[3]):p(H,200,{},"OK")}else I.put(w,r);x(H)&&
((H=Pb(c.url)?b.cookies()[c.xsrfCookieName||e.xsrfCookieName]:t)&&(g[c.xsrfHeaderName||e.xsrfHeaderName]=H),a(c.method,w,f,h,g,c.timeout,c.withCredentials,c.responseType));return r}function F(a,b){if(!b)return a;var c=[];Tc(b,function(a,b){null===a||x(a)||(J(a)||(a=[a]),r(a,function(a){T(a)&&(a=ta(a)?a.toISOString():na(a));c.push(Ca(b)+"="+Ca(a))}))});0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&"));return a}var u=c("$http"),A=[];r(f,function(a){A.unshift(v(a)?p.get(a):p.invoke(a))});r(g,
function(a,b){var c=v(a)?p.get(a):p.invoke(a);A.splice(b,0,{response:function(a){return c(n.when(a))},responseError:function(a){return c(n.reject(a))}})});q.pendingRequests=[];(function(a){r(arguments,function(a){q[a]=function(b,c){return q(D(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){r(arguments,function(a){q[a]=function(b,c,d){return q(D(d||{},{method:a,url:b,data:c}))}})})("post","put");q.defaults=e;return q}]}function xe(b){if(8>=Q&&(!b.match(/^(get|post|head|put|delete|options)$/i)||
!W.XMLHttpRequest))return new W.ActiveXObject("Microsoft.XMLHTTP");if(W.XMLHttpRequest)return new W.XMLHttpRequest;throw C("$httpBackend")("noxhr");}function Vd(){this.$get=["$browser","$window","$document",function(b,a,c){return ye(b,xe,b.defer,a.angular.callbacks,c[0])}]}function ye(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),g=null;f.type="text/javascript";f.src=a;f.async=!0;g=function(a){$a(f,"load",g);$a(f,"error",g);e.body.removeChild(f);f=null;var k=-1,s="unknown";a&&("load"!==
a.type||d[b].called||(a={type:"error"}),s=a.type,k="error"===a.type?404:200);c&&c(k,s)};sb(f,"load",g);sb(f,"error",g);8>=Q&&(f.onreadystatechange=function(){v(f.readyState)&&/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,g({type:"load"}))});e.body.appendChild(f);return g}var g=-1;return function(e,m,h,l,n,p,q,s){function F(){A=g;R&&R();z&&z.abort()}function u(a,d,e,f,g){L&&c.cancel(L);R=z=null;0===d&&(d=e?200:"file"==ua(m).protocol?404:0);a(1223===d?204:d,e,f,g||"");b.$$completeOutstandingRequest(E)}
var A;b.$$incOutstandingRequestCount();m=m||b.url();if("jsonp"==K(e)){var N="_"+(d.counter++).toString(36);d[N]=function(a){d[N].data=a;d[N].called=!0};var R=f(m.replace("JSON_CALLBACK","angular.callbacks."+N),N,function(a,b){u(l,a,d[N].data,"",b);d[N]=E})}else{var z=a(e);z.open(e,m,!0);r(n,function(a,b){y(a)&&z.setRequestHeader(b,a)});z.onreadystatechange=function(){if(z&&4==z.readyState){var a=null,b=null,c="";A!==g&&(a=z.getAllResponseHeaders(),b="response"in z?z.response:z.responseText);A===g&&
10>Q||(c=z.statusText);u(l,A||z.status,b,a,c)}};q&&(z.withCredentials=!0);if(s)try{z.responseType=s}catch(ca){if("json"!==s)throw ca;}z.send(h||null)}if(0<p)var L=c(F,p);else p&&P(p.then)&&p.then(F)}}function Sd(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(f,h,l){for(var n,p,q=0,s=[],F=f.length,u=!1,A=[];q<F;)-1!=(n=f.indexOf(b,q))&&-1!=(p=f.indexOf(a,
n+g))?(q!=n&&s.push(f.substring(q,n)),s.push(q=c(u=f.substring(n+g,p))),q.exp=u,q=p+k,u=!0):(q!=F&&s.push(f.substring(q)),q=F);(F=s.length)||(s.push(""),F=1);if(l&&1<s.length)throw yc("noconcat",f);if(!h||u)return A.length=F,q=function(a){try{for(var b=0,c=F,g;b<c;b++){if("function"==typeof(g=s[b]))if(g=g(a),g=l?e.getTrusted(l,g):e.valueOf(g),null==g)g="";else switch(typeof g){case "string":break;case "number":g=""+g;break;default:g=na(g)}A[b]=g}return A.join("")}catch(k){a=yc("interr",f,k.toString()),
d(a)}},q.exp=f,q.parts=s,q}var g=b.length,k=a.length;f.startSymbol=function(){return b};f.endSymbol=function(){return a};return f}]}function Td(){this.$get=["$rootScope","$window","$q",function(b,a,c){function d(d,g,k,m){var h=a.setInterval,l=a.clearInterval,n=c.defer(),p=n.promise,q=0,s=y(m)&&!m;k=y(k)?k:0;p.then(null,null,d);p.$$intervalId=h(function(){n.notify(q++);0<k&&q>=k&&(n.resolve(q),l(p.$$intervalId),delete e[p.$$intervalId]);s||b.$apply()},g);e[p.$$intervalId]=n;return p}var e={};d.cancel=
function(b){return b&&b.$$intervalId in e?(e[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete e[b.$$intervalId],!0):!1};return d}]}function bd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),
SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other"}}}}function Qb(b){b=b.split("/");for(var a=b.length;a--;)b[a]=
lb(b[a]);return b.join("/")}function zc(b,a,c){b=ua(b,c);a.$$protocol=b.protocol;a.$$host=b.hostname;a.$$port=U(b.port)||ze[b.protocol]||null}function Ac(b,a,c){var d="/"!==b.charAt(0);d&&(b="/"+b);b=ua(b,c);a.$$path=decodeURIComponent(d&&"/"===b.pathname.charAt(0)?b.pathname.substring(1):b.pathname);a.$$search=ec(b.search);a.$$hash=decodeURIComponent(b.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function ra(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function eb(b){var a=
b.indexOf("#");return-1==a?b:b.substr(0,a)}function Rb(b){return b.substr(0,eb(b).lastIndexOf("/")+1)}function Bc(b,a){this.$$html5=!0;a=a||"";var c=Rb(b);zc(b,this,b);this.$$parse=function(a){var e=ra(c,a);if(!v(e))throw Sb("ipthprfx",a,c);Ac(e,this,b);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Cb(this.$$search),b=this.$$hash?"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1)};this.$$rewrite=function(d){var e;
if((e=ra(b,d))!==t)return d=e,(e=ra(a,e))!==t?c+(ra("/",e)||e):b+d;if((e=ra(c,d))!==t)return c+e;if(c==d+"/")return c}}function Tb(b,a){var c=Rb(b);zc(b,this,b);this.$$parse=function(d){var e=ra(b,d)||ra(c,d),e="#"==e.charAt(0)?ra(a,e):this.$$html5?e:"";if(!v(e))throw Sb("ihshprfx",d,a);Ac(e,this,b);d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,""));f.exec(e)||(d=(e=f.exec(d))?e[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var c=Cb(this.$$search),e=this.$$hash?
"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+(this.$$url?a+this.$$url:"")};this.$$rewrite=function(a){if(eb(b)==eb(a))return a}}function Ub(b,a){this.$$html5=!0;Tb.apply(this,arguments);var c=Rb(b);this.$$rewrite=function(d){var e;if(b==eb(d))return d;if(e=ra(c,d))return b+a+e;if(c===d+"/")return c};this.$$compose=function(){var c=Cb(this.$$search),e=this.$$hash?"#"+lb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+a+this.$$url}}function tb(b){return function(){return this[b]}}
function Cc(b,a){return function(c){if(x(c))return this[b];this[b]=a(c);this.$$compose();return this}}function Wd(){var b="",a=!1;this.hashPrefix=function(a){return y(a)?(b=a,this):b};this.html5Mode=function(b){return y(b)?(a=b,this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(c,d,e,f){function g(a){c.$broadcast("$locationChangeSuccess",k.absUrl(),a)}var k,m,h=d.baseHref(),l=d.url(),n;a?(n=l.substring(0,l.indexOf("/",l.indexOf("//")+2))+(h||"/"),m=e.history?Bc:Ub):(n=
eb(l),m=Tb);k=new m(n,"#"+b);k.$$parse(k.$$rewrite(l));var p=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(!a.ctrlKey&&!a.metaKey&&2!=a.which){for(var e=w(a.target);"a"!==K(e[0].nodeName);)if(e[0]===f[0]||!(e=e.parent())[0])return;var g=e.prop("href");T(g)&&"[object SVGAnimatedString]"===g.toString()&&(g=ua(g.animVal).href);if(!p.test(g)){if(m===Ub){var h=e.attr("href")||e.attr("xlink:href");if(h&&0>h.indexOf("://"))if(g="#"+b,"/"==h[0])g=n+g+h;else if("#"==h[0])g=n+g+(k.path()||"/")+h;
else{var l=k.path().split("/"),h=h.split("/");2!==l.length||l[1]||(l.length=1);for(var q=0;q<h.length;q++)"."!=h[q]&&(".."==h[q]?l.pop():h[q].length&&l.push(h[q]));g=n+g+l.join("/")}}l=k.$$rewrite(g);g&&(!e.attr("target")&&l&&!a.isDefaultPrevented())&&(a.preventDefault(),l!=d.url()&&(k.$$parse(l),c.$apply(),W.angular["ff-684208-preventDefault"]=!0))}}});k.absUrl()!=l&&d.url(k.absUrl(),!0);d.onUrlChange(function(a){k.absUrl()!=a&&(c.$evalAsync(function(){var b=k.absUrl();k.$$parse(a);c.$broadcast("$locationChangeStart",
a,b).defaultPrevented?(k.$$parse(b),d.url(b)):g(b)}),c.$$phase||c.$digest())});var q=0;c.$watch(function(){var a=d.url(),b=k.$$replace;q&&a==k.absUrl()||(q++,c.$evalAsync(function(){c.$broadcast("$locationChangeStart",k.absUrl(),a).defaultPrevented?k.$$parse(a):(d.url(k.absUrl(),b),g(a))}));k.$$replace=!1;return q});return k}]}function Xd(){var b=!0,a=this;this.debugEnabled=function(a){return y(a)?(b=a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&
-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},e=b[a]||b.log||E;a=!1;try{a=!!e.apply}catch(m){}return a?function(){var a=[];r(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function ka(b,
a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw la("isecfld",a);return b}function va(b,a){if(b){if(b.constructor===b)throw la("isecfn",a);if(b.document&&b.location&&b.alert&&b.setInterval)throw la("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw la("isecdom",a);if(b===Object)throw la("isecobj",a);}return b}function ub(b,a,c,d,e){va(b,d);e=e||{};a=a.split(".");for(var f,g=0;1<a.length;g++){f=ka(a.shift(),
d);var k=va(b[f],d);k||(k={},b[f]=k);b=k;b.then&&e.unwrapPromises&&(wa(d),"$$v"in b||function(a){a.then(function(b){a.$$v=b})}(b),b.$$v===t&&(b.$$v={}),b=b.$$v)}f=ka(a.shift(),d);va(b[f],d);return b[f]=c}function Dc(b,a,c,d,e,f,g){ka(b,f);ka(a,f);ka(c,f);ka(d,f);ka(e,f);return g.unwrapPromises?function(g,m){var h=m&&m.hasOwnProperty(b)?m:g,l;if(null==h)return h;(h=h[b])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!a)return h;if(null==h)return t;(h=h[a])&&h.then&&
(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!c)return h;if(null==h)return t;(h=h[c])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!d)return h;if(null==h)return t;(h=h[d])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);if(!e)return h;if(null==h)return t;(h=h[e])&&h.then&&(wa(f),"$$v"in h||(l=h,l.$$v=t,l.then(function(a){l.$$v=a})),h=h.$$v);return h}:function(f,g){var h=g&&g.hasOwnProperty(b)?g:f;if(null==
h)return h;h=h[b];if(!a)return h;if(null==h)return t;h=h[a];if(!c)return h;if(null==h)return t;h=h[c];if(!d)return h;if(null==h)return t;h=h[d];return e?null==h?t:h=h[e]:h}}function Ec(b,a,c){if(Vb.hasOwnProperty(b))return Vb[b];var d=b.split("."),e=d.length,f;if(a.csp)f=6>e?Dc(d[0],d[1],d[2],d[3],d[4],c,a):function(b,f){var g=0,k;do k=Dc(d[g++],d[g++],d[g++],d[g++],d[g++],c,a)(b,f),f=t,b=k;while(g<e);return k};else{var g="var p;\n";r(d,function(b,d){ka(b,c);g+="if(s == null) return undefined;\ns="+
(d?"s":'((k&&k.hasOwnProperty("'+b+'"))?k:s)')+'["'+b+'"];\n'+(a.unwrapPromises?'if (s && s.then) {\n pw("'+c.replace(/(["\r\n])/g,"\\$1")+'");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n':"")});var g=g+"return s;",k=new Function("s","k","pw",g);k.toString=ba(g);f=a.unwrapPromises?function(a,b){return k(a,b,wa)}:k}"hasOwnProperty"!==b&&(Vb[b]=f);return f}function Yd(){var b={},a={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=
function(b){return y(b)?(a.unwrapPromises=!!b,this):a.unwrapPromises};this.logPromiseWarnings=function(b){return y(b)?(a.logPromiseWarnings=b,this):a.logPromiseWarnings};this.$get=["$filter","$sniffer","$log",function(c,d,e){a.csp=d.csp;wa=function(b){a.logPromiseWarnings&&!Fc.hasOwnProperty(b)&&(Fc[b]=!0,e.warn("[$parse] Promise found in the expression `"+b+"`. Automatic unwrapping of promises in Angular expressions is deprecated."))};return function(d){var e;switch(typeof d){case "string":if(b.hasOwnProperty(d))return b[d];
e=new Wb(a);e=(new fb(e,c,a)).parse(d);"hasOwnProperty"!==d&&(b[d]=e);return e;case "function":return d;default:return E}}}]}function $d(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return Ae(function(a){b.$evalAsync(a)},a)}]}function Ae(b,a){function c(a){return a}function d(a){return g(a)}var e=function(){var g=[],h,l;return l={resolve:function(a){if(g){var c=g;g=t;h=f(a);c.length&&b(function(){for(var a,b=0,d=c.length;b<d;b++)a=c[b],h.then(a[0],a[1],a[2])})}},reject:function(a){l.resolve(k(a))},
notify:function(a){if(g){var c=g;g.length&&b(function(){for(var b,d=0,e=c.length;d<e;d++)b=c[d],b[2](a)})}},promise:{then:function(b,f,k){var l=e(),F=function(d){try{l.resolve((P(b)?b:c)(d))}catch(e){l.reject(e),a(e)}},u=function(b){try{l.resolve((P(f)?f:d)(b))}catch(c){l.reject(c),a(c)}},A=function(b){try{l.notify((P(k)?k:c)(b))}catch(d){a(d)}};g?g.push([F,u,A]):h.then(F,u,A);return l.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,c){var d=e();c?d.resolve(a):
d.reject(a);return d.promise}function d(e,f){var g=null;try{g=(a||c)()}catch(k){return b(k,!1)}return g&&P(g.then)?g.then(function(){return b(e,f)},function(a){return b(a,!1)}):b(e,f)}return this.then(function(a){return d(a,!0)},function(a){return d(a,!1)})}}}},f=function(a){return a&&P(a.then)?a:{then:function(c){var d=e();b(function(){d.resolve(c(a))});return d.promise}}},g=function(a){var b=e();b.reject(a);return b.promise},k=function(c){return{then:function(f,g){var k=e();b(function(){try{k.resolve((P(g)?
g:d)(c))}catch(b){k.reject(b),a(b)}});return k.promise}}};return{defer:e,reject:g,when:function(k,h,l,n){var p=e(),q,s=function(b){try{return(P(h)?h:c)(b)}catch(d){return a(d),g(d)}},F=function(b){try{return(P(l)?l:d)(b)}catch(c){return a(c),g(c)}},u=function(b){try{return(P(n)?n:c)(b)}catch(d){a(d)}};b(function(){f(k).then(function(a){q||(q=!0,p.resolve(f(a).then(s,F,u)))},function(a){q||(q=!0,p.resolve(F(a)))},function(a){q||p.notify(u(a))})});return p.promise},all:function(a){var b=e(),c=0,d=J(a)?
[]:{};r(a,function(a,e){c++;f(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise}}}function ge(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:
function(b){var c=a(b,16.66,!1);return function(){a.cancel(c)}};f.supported=e;return f}]}function Zd(){var b=10,a=C("$rootScope"),c=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,e,f,g){function k(){this.$id=hb();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$postDigestQueue=
[];this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings={}}function m(b){if(p.$$phase)throw a("inprog",p.$$phase);p.$$phase=b}function h(a,b){var c=f(a);Wa(c,b);return c}function l(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function n(){}k.prototype={constructor:k,$new:function(a){a?(a=new k,a.$root=this.$root,a.$$asyncQueue=this.$$asyncQueue,a.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=
function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$id=hb();this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),a=new this.$$childScopeClass);a["this"]=a;a.$parent=this;a.$$prevSibling=this.$$childTail;this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a;return a},$watch:function(a,b,d){var e=h(a,"watch"),f=this.$$watchers,g={fn:b,last:n,get:e,exp:a,
eq:!!d};c=null;if(!P(b)){var k=h(b||E,"listener");g.fn=function(a,b,c){k(c)}}if("string"==typeof a&&e.constant){var l=g.fn;g.fn=function(a,b,c){l.call(this,a,b,c);Sa(f,g)}}f||(f=this.$$watchers=[]);f.unshift(g);return function(){Sa(f,g);c=null}},$watchCollection:function(a,b){var c=this,d,e,g,k=1<b.length,h=0,l=f(a),m=[],p={},n=!0,r=0;return this.$watch(function(){d=l(c);var a,b,f;if(T(d))if(Pa(d))for(e!==m&&(e=m,r=e.length=0,h++),a=d.length,r!==a&&(h++,e.length=r=a),b=0;b<a;b++)f=e[b]!==e[b]&&d[b]!==
d[b],f||e[b]===d[b]||(h++,e[b]=d[b]);else{e!==p&&(e=p={},r=0,h++);a=0;for(b in d)d.hasOwnProperty(b)&&(a++,e.hasOwnProperty(b)?(f=e[b]!==e[b]&&d[b]!==d[b],f||e[b]===d[b]||(h++,e[b]=d[b])):(r++,e[b]=d[b],h++));if(r>a)for(b in h++,e)e.hasOwnProperty(b)&&!d.hasOwnProperty(b)&&(r--,delete e[b])}else e!==d&&(e=d,h++);return h},function(){n?(n=!1,b(d,d,c)):b(d,g,c);if(k)if(T(d))if(Pa(d)){g=Array(d.length);for(var a=0;a<d.length;a++)g[a]=d[a]}else for(a in g={},d)kb.call(d,a)&&(g[a]=d[a]);else g=d})},$digest:function(){var d,
f,k,h,l=this.$$asyncQueue,r=this.$$postDigestQueue,R,z,t=b,L,O=[],w,B,I;m("$digest");g.$$checkUrlChange();c=null;do{z=!1;for(L=this;l.length;){try{I=l.shift(),I.scope.$eval(I.expression)}catch(H){p.$$phase=null,e(H)}c=null}a:do{if(h=L.$$watchers)for(R=h.length;R--;)try{if(d=h[R])if((f=d.get(L))!==(k=d.last)&&!(d.eq?Aa(f,k):"number"===typeof f&&"number"===typeof k&&isNaN(f)&&isNaN(k)))z=!0,c=d,d.last=d.eq?Ha(f,null):f,d.fn(f,k===n?f:k,L),5>t&&(w=4-t,O[w]||(O[w]=[]),B=P(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):
d.exp,B+="; newVal: "+na(f)+"; oldVal: "+na(k),O[w].push(B));else if(d===c){z=!1;break a}}catch(y){p.$$phase=null,e(y)}if(!(h=L.$$childHead||L!==this&&L.$$nextSibling))for(;L!==this&&!(h=L.$$nextSibling);)L=L.$parent}while(L=h);if((z||l.length)&&!t--)throw p.$$phase=null,a("infdig",b,na(O));}while(z||l.length);for(p.$$phase=null;r.length;)try{r.shift()()}catch(v){e(v)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this!==p&&(r(this.$$listenerCount,
Bb(null,l,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=E,this.$on=
this.$watch=function(){return E})}},$eval:function(a,b){return f(a)(this,b)},$evalAsync:function(a){p.$$phase||p.$$asyncQueue.length||g.defer(function(){p.$$asyncQueue.length&&p.$digest()});this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return m("$apply"),this.$eval(a)}catch(b){e(b)}finally{p.$$phase=null;try{p.$digest()}catch(c){throw e(c),c;}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=
c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){c[Ra(c,b)]=null;l(e,1,a)}},$emit:function(a,b){var c=[],d,f=this,g=!1,k={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){k.defaultPrevented=!0},defaultPrevented:!1},h=[k].concat(Ba.call(arguments,1)),l,m;do{d=f.$$listeners[a]||c;k.currentScope=f;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,h)}catch(p){e(p)}else d.splice(l,
1),l--,m--;if(g)break;f=f.$parent}while(f);return k},$broadcast:function(a,b){for(var c=this,d=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1},g=[f].concat(Ba.call(arguments,1)),k,h;c=d;){f.currentScope=c;d=c.$$listeners[a]||[];k=0;for(h=d.length;k<h;k++)if(d[k])try{d[k].apply(null,g)}catch(l){e(l)}else d.splice(k,1),k--,h--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}return f}};
var p=new k;return p}]}function cd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file):|data:image\/)/;this.aHrefSanitizationWhitelist=function(a){return y(a)?(b=a,this):b};this.imgSrcSanitizationWhitelist=function(b){return y(b)?(a=b,this):a};this.$get=function(){return function(c,d){var e=d?a:b,f;if(!Q||8<=Q)if(f=ua(c).href,""!==f&&!f.match(e))return"unsafe:"+f;return c}}}function Be(b){if("self"===b)return b;if(v(b)){if(-1<b.indexOf("***"))throw xa("iwcard",b);b=b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,
"\\$1").replace(/\x08/g,"\\x08").replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return RegExp("^"+b+"$")}if(jb(b))return RegExp("^"+b.source+"$");throw xa("imatcher");}function Gc(b){var a=[];y(b)&&r(b,function(b){a.push(Be(b))});return a}function be(){this.SCE_CONTEXTS=ga;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=Gc(a));return b};this.resourceUrlBlacklist=function(b){arguments.length&&(a=Gc(b));return a};this.$get=["$injector",function(c){function d(a){var b=
function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var e=function(a){throw xa("unsafe");};c.has("$sanitize")&&(e=c.get("$sanitize"));var f=d(),g={};g[ga.HTML]=d(f);g[ga.CSS]=d(f);g[ga.URL]=d(f);g[ga.JS]=d(f);g[ga.RESOURCE_URL]=d(g[ga.URL]);return{trustAs:function(a,b){var c=g.hasOwnProperty(a)?g[a]:null;if(!c)throw xa("icontext",
a,b);if(null===b||b===t||""===b)return b;if("string"!==typeof b)throw xa("itype",a);return new c(b)},getTrusted:function(c,d){if(null===d||d===t||""===d)return d;var f=g.hasOwnProperty(c)?g[c]:null;if(f&&d instanceof f)return d.$$unwrapTrustedValue();if(c===ga.RESOURCE_URL){var f=ua(d.toString()),l,n,p=!1;l=0;for(n=b.length;l<n;l++)if("self"===b[l]?Pb(f):b[l].exec(f.href)){p=!0;break}if(p)for(l=0,n=a.length;l<n;l++)if("self"===a[l]?Pb(f):a[l].exec(f.href)){p=!1;break}if(p)return d;throw xa("insecurl",
d.toString());}if(c===ga.HTML)return e(d);throw xa("unsafe");},valueOf:function(a){return a instanceof f?a.$$unwrapTrustedValue():a}}}]}function ae(){var b=!0;this.enabled=function(a){arguments.length&&(b=!!a);return b};this.$get=["$parse","$sniffer","$sceDelegate",function(a,c,d){if(b&&c.msie&&8>c.msieDocumentMode)throw xa("iequirks");var e=ha(ga);e.isEnabled=function(){return b};e.trustAs=d.trustAs;e.getTrusted=d.getTrusted;e.valueOf=d.valueOf;b||(e.trustAs=e.getTrusted=function(a,b){return b},
e.valueOf=Qa);e.parseAs=function(b,c){var d=a(c);return d.literal&&d.constant?d:function(a,c){return e.getTrusted(b,d(a,c))}};var f=e.parseAs,g=e.getTrusted,k=e.trustAs;r(ga,function(a,b){var c=K(b);e[Za("parse_as_"+c)]=function(b){return f(a,b)};e[Za("get_trusted_"+c)]=function(b){return g(a,b)};e[Za("trust_as_"+c)]=function(b){return k(a,b)}});return e}]}function ce(){this.$get=["$window","$document",function(b,a){var c={},d=U((/android (\d+)/.exec(K((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||
{}).userAgent),f=a[0]||{},g=f.documentMode,k,m=/^(Moz|webkit|O|ms)(?=[A-Z])/,h=f.body&&f.body.style,l=!1,n=!1;if(h){for(var p in h)if(l=m.exec(p)){k=l[0];k=k.substr(0,1).toUpperCase()+k.substr(1);break}k||(k="WebkitOpacity"in h&&"webkit");l=!!("transition"in h||k+"Transition"in h);n=!!("animation"in h||k+"Animation"in h);!d||l&&n||(l=v(f.body.style.webkitTransition),n=v(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hashchange:"onhashchange"in b&&(!g||7<
g),hasEvent:function(a){if("input"==a&&9==Q)return!1;if(x(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:Xa(),vendorPrefix:k,transitions:l,animations:n,android:d,msie:Q,msieDocumentMode:g}}]}function ee(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(b,a,c,d){function e(e,k,m){var h=c.defer(),l=h.promise,n=y(m)&&!m;k=a.defer(function(){try{h.resolve(e())}catch(a){h.reject(a),d(a)}finally{delete f[l.$$timeoutId]}n||b.$apply()},k);l.$$timeoutId=k;f[k]=h;
return l}var f={};e.cancel=function(b){return b&&b.$$timeoutId in f?(f[b.$$timeoutId].reject("canceled"),delete f[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1};return e}]}function ua(b,a){var c=b;Q&&(Y.setAttribute("href",c),c=Y.href);Y.setAttribute("href",c);return{href:Y.href,protocol:Y.protocol?Y.protocol.replace(/:$/,""):"",host:Y.host,search:Y.search?Y.search.replace(/^\?/,""):"",hash:Y.hash?Y.hash.replace(/^#/,""):"",hostname:Y.hostname,port:Y.port,pathname:"/"===Y.pathname.charAt(0)?Y.pathname:
"/"+Y.pathname}}function Pb(b){b=v(b)?ua(b):b;return b.protocol===Hc.protocol&&b.host===Hc.host}function fe(){this.$get=ba(W)}function mc(b){function a(d,e){if(T(d)){var f={};r(d,function(b,c){f[c]=a(c,b)});return f}return b.factory(d+c,e)}var c="Filter";this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}];a("currency",Ic);a("date",Jc);a("filter",Ce);a("json",De);a("limitTo",Ee);a("lowercase",Fe);a("number",Kc);a("orderBy",Lc);a("uppercase",Ge)}function Ce(){return function(b,
a,c){if(!J(b))return b;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0};"function"!==d&&(c="boolean"===d&&c?function(a,b){return Va.equals(a,b)}:function(a,b){if(a&&b&&"object"===typeof a&&"object"===typeof b){for(var d in a)if("$"!==d.charAt(0)&&kb.call(a,d)&&c(a[d],b[d]))return!0;return!1}b=(""+b).toLowerCase();return-1<(""+a).toLowerCase().indexOf(b)});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case "boolean":case "number":case "string":return c(a,
b);case "object":switch(typeof b){case "object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case "array":for(d=0;d<a.length;d++)if(f(a[d],b))return!0;return!1;default:return!1}};switch(typeof a){case "boolean":case "number":case "string":a={$:a};case "object":for(var g in a)(function(b){"undefined"!==typeof a[b]&&e.push(function(c){return f("$"==b?c:c&&c[b],a[b])})})(g);break;case "function":e.push(a);break;default:return b}d=[];for(g=0;g<b.length;g++){var k=
b[g];e.check(k)&&d.push(k)}return d}}function Ic(b){var a=b.NUMBER_FORMATS;return function(b,d){x(d)&&(d=a.CURRENCY_SYM);return Mc(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,2).replace(/\u00A4/g,d)}}function Kc(b){var a=b.NUMBER_FORMATS;return function(b,d){return Mc(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function Mc(b,a,c,d,e){if(null==b||!isFinite(b)||T(b))return"";var f=0>b;b=Math.abs(b);var g=b+"",k="",m=[],h=!1;if(-1!==g.indexOf("e")){var l=g.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&
l[3]>e+1?(g="0",b=0):(k=g,h=!0)}if(h)0<e&&(-1<b&&1>b)&&(k=b.toFixed(e));else{g=(g.split(Nc)[1]||"").length;x(e)&&(e=Math.min(Math.max(a.minFrac,g),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);0===b&&(f=!1);b=(""+b).split(Nc);g=b[0];b=b[1]||"";var l=0,n=a.lgSize,p=a.gSize;if(g.length>=n+p)for(l=g.length-n,h=0;h<l;h++)0===(l-h)%p&&0!==h&&(k+=c),k+=g.charAt(h);for(h=l;h<g.length;h++)0===(g.length-h)%n&&0!==h&&(k+=c),k+=g.charAt(h);for(;b.length<e;)b+="0";e&&"0"!==e&&(k+=d+b.substr(0,
e))}m.push(f?a.negPre:a.posPre);m.push(k);m.push(f?a.negSuf:a.posSuf);return m.join("")}function Xb(b,a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function $(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c)e+=c;0===e&&-12==c&&(e=12);return Xb(e,a,d)}}function vb(b,a){return function(c,d){var e=c["get"+b](),f=Ia(a?"SHORT"+b:b);return d[f][e]}}function Jc(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,g=0,k=b[8]?
a.setUTCFullYear:a.setFullYear,m=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=U(b[9]+b[10]),g=U(b[9]+b[11]));k.call(a,U(b[1]),U(b[2])-1,U(b[3]));f=U(b[4]||0)-f;g=U(b[5]||0)-g;k=U(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));m.call(a,f,g,k,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e){var f="",g=[],k,m;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;v(c)&&(c=He.test(c)?U(c):a(c));ib(c)&&(c=new Date(c));
if(!ta(c))return c;for(;e;)(m=Ie.exec(e))?(g=g.concat(Ba.call(m,1)),e=g.pop()):(g.push(e),e=null);r(g,function(a){k=Je[a];f+=k?k(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return f}}function De(){return function(b){return na(b,!0)}}function Ee(){return function(b,a){if(!J(b)&&!v(b))return b;a=Infinity===Math.abs(Number(a))?Number(a):U(a);if(v(b))return a?0<=a?b.slice(0,a):b.slice(a,b.length):"";var c=[],d,e;a>b.length?a=b.length:a<-b.length&&(a=-b.length);0<a?(d=0,e=a):(d=
b.length+a,e=b.length);for(;d<e;d++)c.push(b[d]);return c}}function Lc(b){return function(a,c,d){function e(a,b){return Ua(b)?function(b,c){return a(c,b)}:a}function f(a,b){var c=typeof a,d=typeof b;return c==d?(ta(a)&&ta(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!Pa(a)||!c)return a;c=J(c)?c:[c];c=Vc(c,function(a){var c=!1,d=a||Qa;if(v(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))c="-"==a.charAt(0),a=a.substring(1);d=b(a);if(d.constant){var g=
d();return e(function(a,b){return f(a[g],b[g])},c)}}return e(function(a,b){return f(d(a),d(b))},c)});for(var g=[],k=0;k<a.length;k++)g.push(a[k]);return g.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}function ya(b){P(b)&&(b={link:b});b.restrict=b.restrict||"AC";return ba(b)}function Oc(b,a,c,d){function e(a,c){c=c?"-"+mb(c,"-"):"";d.setClass(b,(a?wb:xb)+c,(a?xb:wb)+c)}var f=this,g=b.parent().controller("form")||yb,k=0,m=f.$error={},h=[];f.$name=
a.name||a.ngForm;f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;g.$addControl(f);b.addClass(Oa);e(!0);f.$addControl=function(a){Da(a.$name,"input");h.push(a);a.$name&&(f[a.$name]=a)};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];r(m,function(b,c){f.$setValidity(c,!0,a)});Sa(h,a)};f.$setValidity=function(a,b,c){var d=m[a];if(b)d&&(Sa(d,c),d.length||(k--,k||(e(b),f.$valid=!0,f.$invalid=!1),m[a]=!1,e(!0,a),g.$setValidity(a,!0,f)));else{k||e(b);if(d){if(-1!=Ra(d,c))return}else m[a]=
d=[],k++,e(!1,a),g.$setValidity(a,!1,f);d.push(c);f.$valid=!1;f.$invalid=!0}};f.$setDirty=function(){d.removeClass(b,Oa);d.addClass(b,zb);f.$dirty=!0;f.$pristine=!1;g.$setDirty()};f.$setPristine=function(){d.removeClass(b,zb);d.addClass(b,Oa);f.$dirty=!1;f.$pristine=!0;r(h,function(a){a.$setPristine()})}}function sa(b,a,c,d){b.$setValidity(a,c);return c?d:t}function Pc(b,a){var c,d;if(a)for(c=0;c<a.length;++c)if(d=a[c],b[d])return!0;return!1}function Ke(b,a,c,d,e){T(e)&&(b.$$hasNativeValidators=!0,
b.$parsers.push(function(f){if(b.$error[a]||Pc(e,d)||!Pc(e,c))return f;b.$setValidity(a,!1)}))}function Ab(b,a,c,d,e,f){var g=a.prop(Le),k=a[0].placeholder,m={},h=K(a[0].type);d.$$validityState=g;if(!e.android){var l=!1;a.on("compositionstart",function(a){l=!0});a.on("compositionend",function(){l=!1;n()})}var n=function(e){if(!l){var f=a.val();if(Q&&"input"===(e||m).type&&a[0].placeholder!==k)k=a[0].placeholder;else if("password"!==h&&Ua(c.ngTrim||"T")&&(f=aa(f)),e=g&&d.$$hasNativeValidators,d.$viewValue!==
f||""===f&&e)b.$root.$$phase?d.$setViewValue(f):b.$apply(function(){d.$setViewValue(f)})}};if(e.hasEvent("input"))a.on("input",n);else{var p,q=function(){p||(p=f.defer(function(){n();p=null}))};a.on("keydown",function(a){a=a.keyCode;91===a||(15<a&&19>a||37<=a&&40>=a)||q()});if(e.hasEvent("paste"))a.on("paste cut",q)}a.on("change",n);d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)};var s=c.ngPattern;s&&((e=s.match(/^\/(.*)\/([gim]*)$/))?(s=RegExp(e[1],e[2]),e=function(a){return sa(d,
"pattern",d.$isEmpty(a)||s.test(a),a)}):e=function(c){var e=b.$eval(s);if(!e||!e.test)throw C("ngPattern")("noregexp",s,e,ia(a));return sa(d,"pattern",d.$isEmpty(c)||e.test(c),c)},d.$formatters.push(e),d.$parsers.push(e));if(c.ngMinlength){var r=U(c.ngMinlength);e=function(a){return sa(d,"minlength",d.$isEmpty(a)||a.length>=r,a)};d.$parsers.push(e);d.$formatters.push(e)}if(c.ngMaxlength){var u=U(c.ngMaxlength);e=function(a){return sa(d,"maxlength",d.$isEmpty(a)||a.length<=u,a)};d.$parsers.push(e);
d.$formatters.push(e)}}function Yb(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],l=0;l<b.length;l++)if(e==b[l])continue a;c.push(e)}return c}function e(a){if(!J(a)){if(v(a))return a.split(" ");if(T(a)){var b=[];r(a,function(a,c){a&&(b=b.concat(c.split(" ")))});return b}}return a}return{restrict:"AC",link:function(f,g,k){function m(a,b){var c=g.data("$classCounts")||{},d=[];r(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<
b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function h(b){if(!0===a||f.$index%2===a){var h=e(b||[]);if(!l){var q=m(h,1);k.$addClass(q)}else if(!Aa(b,l)){var s=e(l),q=d(h,s),h=d(s,h),h=m(h,-1),q=m(q,1);0===q.length?c.removeClass(g,h):0===h.length?c.addClass(g,q):c.setClass(g,q,h)}}l=ha(b)}var l;f.$watch(k[b],h,!0);k.$observe("class",function(a){h(f.$eval(k[b]))});"ngClass"!==b&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var h=e(f.$eval(k[b]));g===a?(g=m(h,1),k.$addClass(g)):
(g=m(h,-1),k.$removeClass(g))}})}}}]}var Le="validity",K=function(b){return v(b)?b.toLowerCase():b},kb=Object.prototype.hasOwnProperty,Ia=function(b){return v(b)?b.toUpperCase():b},Q,w,Ea,Ba=[].slice,Me=[].push,za=Object.prototype.toString,Ta=C("ng"),Va=W.angular||(W.angular={}),Ya,Ma,ma=["0","0","0"];Q=U((/msie (\d+)/.exec(K(navigator.userAgent))||[])[1]);isNaN(Q)&&(Q=U((/trident\/.*; rv:(\d+)/.exec(K(navigator.userAgent))||[])[1]));E.$inject=[];Qa.$inject=[];var J=function(){return P(Array.isArray)?
Array.isArray:function(b){return"[object Array]"===za.call(b)}}(),aa=function(){return String.prototype.trim?function(b){return v(b)?b.trim():b}:function(b){return v(b)?b.replace(/^\s\s*/,"").replace(/\s\s*$/,""):b}}();Ma=9>Q?function(b){b=b.nodeName?b:b[0];return b.scopeName&&"HTML"!=b.scopeName?Ia(b.scopeName+":"+b.nodeName):b.nodeName}:function(b){return b.nodeName?b.nodeName:b[0].nodeName};var Xa=function(){if(y(Xa.isActive_))return Xa.isActive_;var b=!(!X.querySelector("[ng-csp]")&&!X.querySelector("[data-ng-csp]"));
if(!b)try{new Function("")}catch(a){b=!0}return Xa.isActive_=b},Yc=/[A-Z]/g,ad={full:"1.2.26",major:1,minor:2,dot:26,codeName:"captivating-disinterest"};S.expando="ng339";var ab=S.cache={},ne=1,sb=W.document.addEventListener?function(b,a,c){b.addEventListener(a,c,!1)}:function(b,a,c){b.attachEvent("on"+a,c)},$a=W.document.removeEventListener?function(b,a,c){b.removeEventListener(a,c,!1)}:function(b,a,c){b.detachEvent("on"+a,c)};S._data=function(b){return this.cache[b[this.expando]]||{}};var ie=/([\:\-\_]+(.))/g,
je=/^moz([A-Z])/,Hb=C("jqLite"),ke=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ib=/<|&#?\w+;/,le=/<([\w:]+)/,me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ea={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ea.optgroup=ea.option;ea.tbody=ea.tfoot=ea.colgroup=ea.caption=ea.thead;ea.th=
ea.td;var La=S.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===X.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),S(W).on("load",a))},toString:function(){var b=[];r(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return 0<=b?w(this[b]):w(this[this.length+b])},length:0,push:Me,sort:[].sort,splice:[].splice},qb={};r("multiple selected checked disabled readOnly required open".split(" "),function(b){qb[K(b)]=b});var rc={};r("input select option textarea button form details".split(" "),
function(b){rc[Ia(b)]=!0});r({data:Mb,removeData:Lb},function(b,a){S[a]=b});r({data:Mb,inheritedData:pb,scope:function(b){return w.data(b,"$scope")||pb(b.parentNode||b,["$isolateScope","$scope"])},isolateScope:function(b){return w.data(b,"$isolateScope")||w.data(b,"$isolateScopeNoTemplate")},controller:oc,injector:function(b){return pb(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Nb,css:function(b,a,c){a=Za(a);if(y(c))b.style[a]=c;else{var d;8>=Q&&(d=b.currentStyle&&b.currentStyle[a],
""===d&&(d="auto"));d=d||b.style[a];8>=Q&&(d=""===d?t:d);return d}},attr:function(b,a,c){var d=K(a);if(qb[d])if(y(c))c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||(b.attributes.getNamedItem(a)||E).specified?d:t;else if(y(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?t:b},prop:function(b,a,c){if(y(c))b[a]=c;else return b[a]},text:function(){function b(b,d){var e=a[b.nodeType];if(x(d))return e?b[e]:"";b[e]=d}var a=[];9>Q?(a[1]=
"innerText",a[3]="nodeValue"):a[1]=a[3]="textContent";b.$dv="";return b}(),val:function(b,a){if(x(a)){if("SELECT"===Ma(b)&&b.multiple){var c=[];r(b.options,function(a){a.selected&&c.push(a.value||a.text)});return 0===c.length?null:c}return b.value}b.value=a},html:function(b,a){if(x(a))return b.innerHTML;for(var c=0,d=b.childNodes;c<d.length;c++)Ja(d[c]);b.innerHTML=a},empty:pc},function(b,a){S.prototype[a]=function(a,d){var e,f,g=this.length;if(b!==pc&&(2==b.length&&b!==Nb&&b!==oc?a:d)===t){if(T(a)){for(e=
0;e<g;e++)if(b===Mb)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv;g=e===t?Math.min(g,1):g;for(f=0;f<g;f++){var k=b(this[f],a,d);e=e?e+k:k}return e}for(e=0;e<g;e++)b(this[e],a,d);return this}});r({removeData:Lb,dealoc:Ja,on:function a(c,d,e,f){if(y(f))throw Hb("onargs");var g=oa(c,"events"),k=oa(c,"handle");g||oa(c,"events",g={});k||oa(c,"handle",k=oe(c,g));r(d.split(" "),function(d){var f=g[d];if(!f){if("mouseenter"==d||"mouseleave"==d){var l=X.body.contains||X.body.compareDocumentPosition?
function(a,c){var d=9===a.nodeType?a.documentElement:a,e=c&&c.parentNode;return a===e||!!(e&&1===e.nodeType&&(d.contains?d.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&16))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1};g[d]=[];a(c,{mouseleave:"mouseout",mouseenter:"mouseover"}[d],function(a){var c=a.relatedTarget;c&&(c===this||l(this,c))||k(a,d)})}else sb(c,d,k),g[d]=[];f=g[d]}f.push(e)})},off:nc,one:function(a,c,d){a=w(a);a.on(c,function f(){a.off(c,
d);a.off(c,f)});a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;Ja(a);r(new S(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];r(a.childNodes,function(a){1===a.nodeType&&c.push(a)});return c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){r(new S(c),function(c){1!==a.nodeType&&11!==a.nodeType||a.appendChild(c)})},prepend:function(a,c){if(1===a.nodeType){var d=a.firstChild;r(new S(c),function(c){a.insertBefore(c,
d)})}},wrap:function(a,c){c=w(c)[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:function(a){Ja(a);var c=a.parentNode;c&&c.removeChild(a)},after:function(a,c){var d=a,e=a.parentNode;r(new S(c),function(a){e.insertBefore(a,d.nextSibling);d=a})},addClass:ob,removeClass:nb,toggleClass:function(a,c,d){c&&r(c.split(" "),function(c){var f=d;x(f)&&(f=!Nb(a,c));(f?ob:nb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;
for(a=a.nextSibling;null!=a&&1!==a.nodeType;)a=a.nextSibling;return a},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Kb,triggerHandler:function(a,c,d){var e,f;e=c.type||c;var g=(oa(a,"events")||{})[e];g&&(e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:E,type:e,target:a},c.type&&(e=D(e,c)),c=ha(g),f=d?[e].concat(d):[e],r(c,function(c){c.apply(a,f)}))}},function(a,c){S.prototype[c]=
function(c,e,f){for(var g,k=0;k<this.length;k++)x(g)?(g=a(this[k],c,e,f),y(g)&&(g=w(g))):Jb(g,a(this[k],c,e,f));return y(g)?g:this};S.prototype.bind=S.prototype.on;S.prototype.unbind=S.prototype.off});bb.prototype={put:function(a,c){this[Ka(a,this.nextUid)]=c},get:function(a){return this[Ka(a,this.nextUid)]},remove:function(a){var c=this[a=Ka(a,this.nextUid)];delete this[a];return c}};var qe=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,re=/,/,se=/^\s*(_?)(\S+?)\1\s*$/,pe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,
cb=C("$injector"),Ne=C("$animate"),Md=["$provide",function(a){this.$$selectors={};this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw Ne("notcsel",c);this.$$selectors[c.substr(1)]=e;a.factory(e,d)};this.classNameFilter=function(a){1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter};this.$get=["$timeout","$$asyncCallback",function(a,d){return{enter:function(a,c,g,k){g?g.after(a):(c&&c[0]||(c=g.parent()),c.append(a));k&&
d(k)},leave:function(a,c){a.remove();c&&d(c)},move:function(a,c,d,k){this.enter(a,c,d,k)},addClass:function(a,c,g){c=v(c)?c:J(c)?c.join(" "):"";r(a,function(a){ob(a,c)});g&&d(g)},removeClass:function(a,c,g){c=v(c)?c:J(c)?c.join(" "):"";r(a,function(a){nb(a,c)});g&&d(g)},setClass:function(a,c,g,k){r(a,function(a){ob(a,c);nb(a,g)});k&&d(k)},enabled:E}}]}],ja=C("$compile");ic.$inject=["$provide","$$sanitizeUriProvider"];var we=/^(x[\:\-_]|data[\:\-_])/i,yc=C("$interpolate"),Oe=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,
ze={http:80,https:443,ftp:21},Sb=C("$location");Ub.prototype=Tb.prototype=Bc.prototype={$$html5:!1,$$replace:!1,absUrl:tb("$$absUrl"),url:function(a){if(x(a))return this.$$url;a=Oe.exec(a);a[1]&&this.path(decodeURIComponent(a[1]));(a[2]||a[1])&&this.search(a[3]||"");this.hash(a[5]||"");return this},protocol:tb("$$protocol"),host:tb("$$host"),port:tb("$$port"),path:Cc("$$path",function(a){a=a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;
case 1:if(v(a)||ib(a))a=a.toString(),this.$$search=ec(a);else if(T(a))r(a,function(c,e){null==c&&delete a[e]}),this.$$search=a;else throw Sb("isrcharg");break;default:x(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:Cc("$$hash",function(a){return a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};var la=C("$parse"),Fc={},wa,Pe=Function.prototype.call,Qe=Function.prototype.apply,Qc=Function.prototype.bind,gb={"null":function(){return null},
"true":function(){return!0},"false":function(){return!1},undefined:E,"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return y(d)?y(e)?d+e:d:y(e)?e:t},"-":function(a,c,d,e){d=d(a,c);e=e(a,c);return(y(d)?d:0)-(y(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"^":function(a,c,d,e){return d(a,c)^e(a,c)},"=":E,"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,
c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,c,d,e){return d(a,c)||e(a,c)},"&":function(a,c,d,e){return d(a,c)&e(a,c)},"|":function(a,c,d,e){return e(a,c)(a,c,d(a,c))},"!":function(a,c,d){return!d(a,c)}},Re={n:"\n",f:"\f",r:"\r",
t:"\t",v:"\v","'":"'",'"':'"'},Wb=function(a){this.options=a};Wb.prototype={constructor:Wb,lex:function(a){this.text=a;this.index=0;this.ch=t;this.lastCh=":";for(this.tokens=[];this.index<this.text.length;){this.ch=this.text.charAt(this.index);if(this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),
this.index++;else if(this.isWhitespace(this.ch)){this.index++;continue}else{a=this.ch+this.peek();var c=a+this.peek(2),d=gb[this.ch],e=gb[a],f=gb[c];f?(this.tokens.push({index:this.index,text:c,fn:f}),this.index+=3):e?(this.tokens.push({index:this.index,text:a,fn:e}),this.index+=2):d?(this.tokens.push({index:this.index,text:this.ch,fn:d}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},
was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){d=d||this.index;c=y(c)?"s "+c+"-"+this.index+" ["+
this.text.substring(c,d)+"]":" "+d;throw la("lexerr",a,c,this.text);},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=K(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}a*=
1;this.tokens.push({index:c,text:a,literal:!0,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a=this,c="",d=this.index,e,f,g,k;this.index<this.text.length;){k=this.text.charAt(this.index);if("."===k||this.isIdent(k)||this.isNumber(k))"."===k&&(e=this.index),c+=k;else break;this.index++}if(e)for(f=this.index;f<this.text.length;){k=this.text.charAt(f);if("("===k){g=c.substr(e-d+1);c=c.substr(0,e-d);this.index=f;break}if(this.isWhitespace(k))f++;else break}d={index:d,text:c};if(gb.hasOwnProperty(c))d.fn=
gb[c],d.literal=!0,d.constant=!0;else{var m=Ec(c,this.options,this.text);d.fn=D(function(a,c){return m(a,c)},{assign:function(d,e){return ub(d,c,e,a.text,a.options)}})}this.tokens.push(d);g&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:g}))},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var g=this.text.charAt(this.index),e=e+g;if(f)"u"===g?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||
this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=Re[g]||g,f=!1;else if("\\"===g)f=!0;else{if(g===a){this.index++;this.tokens.push({index:c,text:e,string:d,literal:!0,constant:!0,fn:function(){return d}});return}d+=g}this.index++}this.throwError("Unterminated quote",c)}};var fb=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d};fb.ZERO=D(function(){return 0},{constant:!0});fb.prototype={constructor:fb,parse:function(a){this.text=
a;this.tokens=this.lexer.lex(a);a=this.statements();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;return a},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var c=this.expect();(a=c.fn)||this.throwError("not a primary expression",c);a.literal=!!c.literal;a.constant=!!c.constant}for(var d;c=
this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw la("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},peekToken:function(){if(0===this.tokens.length)throw la("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){if(0<this.tokens.length){var f=this.tokens[0],g=f.text;if(g===a||g===c||g===d||g===
e||!(a||c||d||e))return f}return!1},expect:function(a,c,d,e){return(a=this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,c){return D(function(d,e){return a(d,e,c)},{constant:c.constant})},ternaryFn:function(a,c,d){return D(function(e,f){return a(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})},binaryFn:function(a,c,d){return D(function(e,f){return c(e,f,a,d)},{constant:a.constant&&
d.constant})},statements:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(c,d){for(var e,f=0;f<a.length;f++){var g=a[f];g&&(e=g(c,d))}return e}},filterChain:function(){for(var a=this.expression(),c;;)if(c=this.expect("|"))a=this.binaryFn(a,c.fn,this.filter());else return a},filter:function(){for(var a=this.expect(),c=this.$filter(a.text),d=[];;)if(a=this.expect(":"))d.push(this.expression());
else{var e=function(a,e,k){k=[k];for(var m=0;m<d.length;m++)k.push(d[m](a,e));return c.apply(a,k)};return function(){return e}}},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),function(d,f){return a.assign(d,c(d,f),f)}):a},ternary:function(){var a=this.logicalOR(),c,d;if(this.expect("?")){c=this.assignment();
if(d=this.expect(":"))return this.ternaryFn(a,c,this.assignment());this.throwError("expected :",d)}else return a},logicalOR:function(){for(var a=this.logicalAND(),c;;)if(c=this.expect("||"))a=this.binaryFn(a,c.fn,this.logicalAND());else return a},logicalAND:function(){var a=this.equality(),c;if(c=this.expect("&&"))a=this.binaryFn(a,c.fn,this.logicalAND());return a},equality:function(){var a=this.relational(),c;if(c=this.expect("==","!=","===","!=="))a=this.binaryFn(a,c.fn,this.equality());return a},
relational:function(){var a=this.additive(),c;if(c=this.expect("<",">","<=",">="))a=this.binaryFn(a,c.fn,this.relational());return a},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a=this.binaryFn(a,c.fn,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a=this.binaryFn(a,c.fn,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(fb.ZERO,a.fn,
this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var c=this,d=this.expect().text,e=Ec(d,this.options,this.text);return D(function(c,d,k){return e(k||a(c,d))},{assign:function(e,g,k){(k=a(e,k))||a.assign(e,k={});return ub(k,d,g,c.text,c.options)}})},objectIndex:function(a){var c=this,d=this.expression();this.consume("]");return D(function(e,f){var g=a(e,f),k=d(e,f),m;ka(k,c.text);if(!g)return t;(g=va(g[k],c.text))&&(g.then&&c.options.unwrapPromises)&&
(m=g,"$$v"in g||(m.$$v=t,m.then(function(a){m.$$v=a})),g=g.$$v);return g},{assign:function(e,f,g){var k=ka(d(e,g),c.text);(g=va(a(e,g),c.text))||a.assign(e,g={});return g[k]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text){do d.push(this.expression());while(this.expect(","))}this.consume(")");var e=this;return function(f,g){for(var k=[],m=c?c(f,g):f,h=0;h<d.length;h++)k.push(va(d[h](f,g),e.text));h=a(f,g,m)||E;va(m,e.text);var l=e.text;if(h){if(h.constructor===h)throw la("isecfn",
l);if(h===Pe||h===Qe||Qc&&h===Qc)throw la("isecff",l);}k=h.apply?h.apply(m,k):h(k[0],k[1],k[2],k[3],k[4]);return va(k,e.text)}},arrayDeclaration:function(){var a=[],c=!0;if("]"!==this.peekToken().text){do{if(this.peek("]"))break;var d=this.expression();a.push(d);d.constant||(c=!1)}while(this.expect(","))}this.consume("]");return D(function(c,d){for(var g=[],k=0;k<a.length;k++)g.push(a[k](c,d));return g},{literal:!0,constant:c})},object:function(){var a=[],c=!0;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;
var d=this.expect(),d=d.string||d.text;this.consume(":");var e=this.expression();a.push({key:d,value:e});e.constant||(c=!1)}while(this.expect(","))}this.consume("}");return D(function(c,d){for(var e={},m=0;m<a.length;m++){var h=a[m];e[h.key]=h.value(c,d)}return e},{literal:!0,constant:c})}};var Vb={},xa=C("$sce"),ga={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Y=X.createElement("a"),Hc=ua(W.location.href,!0);mc.$inject=["$provide"];Ic.$inject=["$locale"];Kc.$inject=["$locale"];
var Nc=".",Je={yyyy:$("FullYear",4),yy:$("FullYear",2,0,!0),y:$("FullYear",1),MMMM:vb("Month"),MMM:vb("Month",!0),MM:$("Month",2,1),M:$("Month",1,1),dd:$("Date",2),d:$("Date",1),HH:$("Hours",2),H:$("Hours",1),hh:$("Hours",2,-12),h:$("Hours",1,-12),mm:$("Minutes",2),m:$("Minutes",1),ss:$("Seconds",2),s:$("Seconds",1),sss:$("Milliseconds",3),EEEE:vb("Day"),EEE:vb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(Xb(Math[0<
a?"floor":"ceil"](a/60),2)+Xb(Math.abs(a%60),2))}},Ie=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,He=/^\-?\d+$/;Jc.$inject=["$locale"];var Fe=ba(K),Ge=ba(Ia);Lc.$inject=["$parse"];var dd=ba({restrict:"E",compile:function(a,c){8>=Q&&(c.href||c.name||c.$set("href",""),a.append(X.createComment("IE fix")));if(!c.href&&!c.xlinkHref&&!c.name)return function(a,c){var f="[object SVGAnimatedString]"===za.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||
a.preventDefault()})}}}),Fb={};r(qb,function(a,c){if("multiple"!=a){var d=pa("ng-"+c);Fb[d]=function(){return{priority:100,link:function(a,f,g){a.$watch(g[d],function(a){g.$set(c,!!a)})}}}}});r(["src","srcset","href"],function(a){var c=pa("ng-"+a);Fb[c]=function(){return{priority:99,link:function(d,e,f){var g=a,k=a;"href"===a&&"[object SVGAnimatedString]"===za.call(e.prop("href"))&&(k="xlinkHref",f.$attr[k]="xlink:href",g=null);f.$observe(c,function(c){c?(f.$set(k,c),Q&&g&&e.prop(g,f[k])):"href"===
a&&f.$set(k,null)})}}}});var yb={$addControl:E,$removeControl:E,$setValidity:E,$setDirty:E,$setPristine:E};Oc.$inject=["$element","$attrs","$scope","$animate"];var Rc=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:Oc,compile:function(){return{pre:function(a,e,f,g){if(!f.action){var k=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};sb(e[0],"submit",k);e.on("$destroy",function(){c(function(){$a(e[0],"submit",k)},0,!1)})}var m=e.parent().controller("form"),
h=f.name||f.ngForm;h&&ub(a,h,g,h);if(m)e.on("$destroy",function(){m.$removeControl(g);h&&ub(a,h,t,h);D(g,yb)})}}}}}]},ed=Rc(),rd=Rc(!0),Se=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Te=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ue=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Sc={text:Ab,number:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);e.$parsers.push(function(a){var c=e.$isEmpty(a);if(c||Ue.test(a))return e.$setValidity("number",
!0),""===a?null:c?a:parseFloat(a);e.$setValidity("number",!1);return t});Ke(e,"number",Ve,null,e.$$validityState);e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a});d.min&&(a=function(a){var c=parseFloat(d.min);return sa(e,"min",e.$isEmpty(a)||a>=c,a)},e.$parsers.push(a),e.$formatters.push(a));d.max&&(a=function(a){var c=parseFloat(d.max);return sa(e,"max",e.$isEmpty(a)||a<=c,a)},e.$parsers.push(a),e.$formatters.push(a));e.$formatters.push(function(a){return sa(e,"number",e.$isEmpty(a)||
ib(a),a)})},url:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);a=function(a){return sa(e,"url",e.$isEmpty(a)||Se.test(a),a)};e.$formatters.push(a);e.$parsers.push(a)},email:function(a,c,d,e,f,g){Ab(a,c,d,e,f,g);a=function(a){return sa(e,"email",e.$isEmpty(a)||Te.test(a),a)};e.$formatters.push(a);e.$parsers.push(a)},radio:function(a,c,d,e){x(d.name)&&c.attr("name",hb());c.on("click",function(){c[0].checked&&a.$apply(function(){e.$setViewValue(d.value)})});e.$render=function(){c[0].checked=d.value==e.$viewValue};
d.$observe("value",e.$render)},checkbox:function(a,c,d,e){var f=d.ngTrueValue,g=d.ngFalseValue;v(f)||(f=!0);v(g)||(g=!1);c.on("click",function(){a.$apply(function(){e.$setViewValue(c[0].checked)})});e.$render=function(){c[0].checked=e.$viewValue};e.$isEmpty=function(a){return a!==f};e.$formatters.push(function(a){return a===f});e.$parsers.push(function(a){return a?f:g})},hidden:E,button:E,submit:E,reset:E,file:E},Ve=["badInput"],jc=["$browser","$sniffer",function(a,c){return{restrict:"E",require:"?ngModel",
link:function(d,e,f,g){g&&(Sc[K(f.type)]||Sc.text)(d,e,f,g,c,a)}}}],wb="ng-valid",xb="ng-invalid",Oa="ng-pristine",zb="ng-dirty",We=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate",function(a,c,d,e,f,g){function k(a,c){c=c?"-"+mb(c,"-"):"";g.removeClass(e,(a?xb:wb)+c);g.addClass(e,(a?wb:xb)+c)}this.$modelValue=this.$viewValue=Number.NaN;this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=
d.name;var m=f(d.ngModel),h=m.assign;if(!h)throw C("ngModel")("nonassign",d.ngModel,ia(e));this.$render=E;this.$isEmpty=function(a){return x(a)||""===a||null===a||a!==a};var l=e.inheritedData("$formController")||yb,n=0,p=this.$error={};e.addClass(Oa);k(!0);this.$setValidity=function(a,c){p[a]!==!c&&(c?(p[a]&&n--,n||(k(!0),this.$valid=!0,this.$invalid=!1)):(k(!1),this.$invalid=!0,this.$valid=!1,n++),p[a]=!c,k(c,a),l.$setValidity(a,c,this))};this.$setPristine=function(){this.$dirty=!1;this.$pristine=
!0;g.removeClass(e,zb);g.addClass(e,Oa)};this.$setViewValue=function(d){this.$viewValue=d;this.$pristine&&(this.$dirty=!0,this.$pristine=!1,g.removeClass(e,Oa),g.addClass(e,zb),l.$setDirty());r(this.$parsers,function(a){d=a(d)});this.$modelValue!==d&&(this.$modelValue=d,h(a,d),r(this.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}}))};var q=this;a.$watch(function(){var c=m(a);if(q.$modelValue!==c){var d=q.$formatters,e=d.length;for(q.$modelValue=c;e--;)c=d[e](c);q.$viewValue!==c&&(q.$viewValue=
c,q.$render())}return c})}],Gd=function(){return{require:["ngModel","^?form"],controller:We,link:function(a,c,d,e){var f=e[0],g=e[1]||yb;g.$addControl(f);a.$on("$destroy",function(){g.$removeControl(f)})}}},Id=ba({require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),kc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){d.required=!0;var f=function(a){if(d.required&&e.$isEmpty(a))e.$setValidity("required",!1);else return e.$setValidity("required",
!0),a};e.$formatters.push(f);e.$parsers.unshift(f);d.$observe("required",function(){f(e.$viewValue)})}}}},Hd=function(){return{require:"ngModel",link:function(a,c,d,e){var f=(a=/\/(.*)\//.exec(d.ngList))&&RegExp(a[1])||d.ngList||",";e.$parsers.push(function(a){if(!x(a)){var c=[];a&&r(a.split(f),function(a){a&&c.push(aa(a))});return c}});e.$formatters.push(function(a){return J(a)?a.join(", "):t});e.$isEmpty=function(a){return!a||!a.length}}}},Xe=/^(true|false|\d+)$/,Jd=function(){return{priority:100,
compile:function(a,c){return Xe.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},jd=ya({compile:function(a){a.addClass("ng-binding");return function(a,d,e){d.data("$binding",e.ngBind);a.$watch(e.ngBind,function(a){d.text(a==t?"":a)})}}}),ld=["$interpolate",function(a){return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate));d.addClass("ng-binding").data("$binding",c);e.$observe("ngBindTemplate",function(a){d.text(a)})}}],
kd=["$sce","$parse",function(a,c){return{compile:function(d){d.addClass("ng-binding");return function(d,f,g){f.data("$binding",g.ngBindHtml);var k=c(g.ngBindHtml);d.$watch(function(){return(k(d)||"").toString()},function(c){f.html(a.getTrustedHtml(k(d))||"")})}}}}],md=Yb("",!0),od=Yb("Odd",0),nd=Yb("Even",1),pd=ya({compile:function(a,c){c.$set("ngCloak",t);a.removeClass("ng-cloak")}}),qd=[function(){return{scope:!0,controller:"@",priority:500}}],lc={},Ye={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var c=pa("ng-"+a);lc[c]=["$parse","$rootScope",function(d,e){return{compile:function(f,g){var k=d(g[c]);return function(c,d){d.on(a,function(d){var f=function(){k(c,{$event:d})};Ye[a]&&e.$$phase?c.$evalAsync(f):c.$apply(f)})}}}}]});var td=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var k,m,h;c.$watch(e.ngIf,function(f){Ua(f)?m||(m=c.$new(),g(m,function(c){c[c.length++]=X.createComment(" end ngIf: "+e.ngIf+
" ");k={clone:c};a.enter(c,d.parent(),d)})):(h&&(h.remove(),h=null),m&&(m.$destroy(),m=null),k&&(h=Eb(k.clone),a.leave(h,function(){h=null}),k=null))})}}}],ud=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,c,d,e,f){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Va.noop,compile:function(g,k){var m=k.ngInclude||k.src,h=k.onload||"",l=k.autoscroll;return function(g,k,q,r,F){var u=0,t,w,R,z=function(){w&&(w.remove(),w=null);t&&(t.$destroy(),t=null);
R&&(e.leave(R,function(){w=null}),w=R,R=null)};g.$watch(f.parseAsResourceUrl(m),function(f){var m=function(){!y(l)||l&&!g.$eval(l)||d()},q=++u;f?(a.get(f,{cache:c}).success(function(a){if(q===u){var c=g.$new();r.template=a;a=F(c,function(a){z();e.enter(a,null,k,m)});t=c;R=a;t.$emit("$includeContentLoaded");g.$eval(h)}}).error(function(){q===u&&z()}),g.$emit("$includeContentRequested")):(z(),r.template=null)})}}}}],Kd=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",
link:function(c,d,e,f){d.html(f.template);a(d.contents())(c)}}}],vd=ya({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),wd=ya({terminal:!0,priority:1E3}),xd=["$locale","$interpolate",function(a,c){var d=/{}/g;return{restrict:"EA",link:function(e,f,g){var k=g.count,m=g.$attr.when&&f.attr(g.$attr.when),h=g.offset||0,l=e.$eval(m)||{},n={},p=c.startSymbol(),q=c.endSymbol(),s=/^when(Minus)?(.+)$/;r(g,function(a,c){s.test(c)&&(l[K(c.replace("when","").replace("Minus","-"))]=
f.attr(g.$attr[c]))});r(l,function(a,e){n[e]=c(a.replace(d,p+k+"-"+h+q))});e.$watch(function(){var c=parseFloat(e.$eval(k));if(isNaN(c))return"";c in l||(c=a.pluralCat(c-h));return n[c](e,f,!0)},function(a){f.text(a)})}}}],yd=["$parse","$animate",function(a,c){var d=C("ngRepeat");return{transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,link:function(e,f,g,k,m){var h=g.ngRepeat,l=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),n,p,q,s,t,u,A={$id:Ka};if(!l)throw d("iexp",
h);g=l[1];k=l[2];(l=l[3])?(n=a(l),p=function(a,c,d){u&&(A[u]=a);A[t]=c;A.$index=d;return n(e,A)}):(q=function(a,c){return Ka(c)},s=function(a){return a});l=g.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!l)throw d("iidexp",g);t=l[3]||l[1];u=l[2];var y={};e.$watchCollection(k,function(a){var g,k,l=f[0],n,A={},B,I,H,v,E,C,x,J=[];if(Pa(a))C=a,E=p||q;else{E=p||s;C=[];for(H in a)a.hasOwnProperty(H)&&"$"!=H.charAt(0)&&C.push(H);C.sort()}B=C.length;k=J.length=C.length;for(g=0;g<k;g++)if(H=a===
C?g:C[g],v=a[H],n=E(H,v,g),Da(n,"`track by` id"),y.hasOwnProperty(n))x=y[n],delete y[n],A[n]=x,J[g]=x;else{if(A.hasOwnProperty(n))throw r(J,function(a){a&&a.scope&&(y[a.id]=a)}),d("dupes",h,n,na(v));J[g]={id:n};A[n]=!1}for(H in y)y.hasOwnProperty(H)&&(x=y[H],g=Eb(x.clone),c.leave(g),r(g,function(a){a.$$NG_REMOVED=!0}),x.scope.$destroy());g=0;for(k=C.length;g<k;g++){H=a===C?g:C[g];v=a[H];x=J[g];J[g-1]&&(l=J[g-1].clone[J[g-1].clone.length-1]);if(x.scope){I=x.scope;n=l;do n=n.nextSibling;while(n&&n.$$NG_REMOVED);
x.clone[0]!=n&&c.move(Eb(x.clone),null,w(l));l=x.clone[x.clone.length-1]}else I=e.$new();I[t]=v;u&&(I[u]=H);I.$index=g;I.$first=0===g;I.$last=g===B-1;I.$middle=!(I.$first||I.$last);I.$odd=!(I.$even=0===(g&1));x.scope||m(I,function(a){a[a.length++]=X.createComment(" end ngRepeat: "+h+" ");c.enter(a,null,w(l));l=a;x.scope=I;x.clone=a;A[x.id]=x})}y=A})}}}],zd=["$animate",function(a){return function(c,d,e){c.$watch(e.ngShow,function(c){a[Ua(c)?"removeClass":"addClass"](d,"ng-hide")})}}],sd=["$animate",
function(a){return function(c,d,e){c.$watch(e.ngHide,function(c){a[Ua(c)?"addClass":"removeClass"](d,"ng-hide")})}}],Ad=ya(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&r(d,function(a,d){c.css(d,"")});a&&c.css(a)},!0)}),Bd=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var g=[],k=[],m=[],h=[];c.$watch(e.ngSwitch||e.on,function(d){var n,p;n=0;for(p=m.length;n<p;++n)m[n].remove();n=m.length=0;for(p=
h.length;n<p;++n){var q=k[n];h[n].$destroy();m[n]=q;a.leave(q,function(){m.splice(n,1)})}k.length=0;h.length=0;if(g=f.cases["!"+d]||f.cases["?"])c.$eval(e.change),r(g,function(d){var e=c.$new();h.push(e);d.transclude(e,function(c){var e=d.element;k.push(c);a.enter(c,e.parent(),e)})})})}}}],Cd=ya({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c})}}),Dd=
ya({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c})}}),Fd=ya({link:function(a,c,d,e,f){if(!f)throw C("ngTransclude")("orphan",ia(c));f(function(a){c.empty();c.append(a)})}}),fd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],Ze=C("ngOptions"),Ed=ba({terminal:!0}),gd=["$compile","$parse",function(a,c){var d=
/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,e={$setViewValue:E};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var m=this,h={},l=e,n;m.databound=d.ngModel;m.init=function(a,c,d){l=a;n=d};m.addOption=function(c){Da(c,'"option value"');h[c]=!0;l.$viewValue==c&&(a.val(c),n.parent()&&n.remove())};
m.removeOption=function(a){this.hasOption(a)&&(delete h[a],l.$viewValue==a&&this.renderUnknownOption(a))};m.renderUnknownOption=function(c){c="? "+Ka(c)+" ?";n.val(c);a.prepend(n);a.val(c);n.prop("selected",!0)};m.hasOption=function(a){return h.hasOwnProperty(a)};c.$on("$destroy",function(){m.renderUnknownOption=E})}],link:function(e,g,k,m){function h(a,c,d,e){d.$render=function(){var a=d.$viewValue;e.hasOption(a)?(v.parent()&&v.remove(),c.val(a),""===a&&u.prop("selected",!0)):x(a)&&u?c.val(""):e.renderUnknownOption(a)};
c.on("change",function(){a.$apply(function(){v.parent()&&v.remove();d.$setViewValue(c.val())})})}function l(a,c,d){var e;d.$render=function(){var a=new bb(d.$viewValue);r(c.find("option"),function(c){c.selected=y(a.get(c.value))})};a.$watch(function(){Aa(e,d.$viewValue)||(e=ha(d.$viewValue),d.$render())});c.on("change",function(){a.$apply(function(){var a=[];r(c.find("option"),function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function n(e,f,g){function k(){var a={"":[]},c=[""],d,h,
s,t,v;s=g.$modelValue;t=w(e)||[];var E=n?Zb(t):t,I,M,B;M={};B=!1;if(q)if(h=g.$modelValue,x&&J(h))for(B=new bb([]),d={},v=0;v<h.length;v++)d[m]=h[v],B.put(x(e,d),h[v]);else B=new bb(h);v=B;var D,K;for(B=0;I=E.length,B<I;B++){h=B;if(n){h=E[B];if("$"===h.charAt(0))continue;M[n]=h}M[m]=t[h];d=r(e,M)||"";(h=a[d])||(h=a[d]=[],c.push(d));q?d=y(v.remove(x?x(e,M):u(e,M))):(x?(d={},d[m]=s,d=x(e,d)===x(e,M)):d=s===u(e,M),v=v||d);D=l(e,M);D=y(D)?D:"";h.push({id:x?x(e,M):n?E[B]:B,label:D,selected:d})}q||(F||null===
s?a[""].unshift({id:"",label:"",selected:!v}):v||a[""].unshift({id:"?",label:"",selected:!0}));M=0;for(E=c.length;M<E;M++){d=c[M];h=a[d];z.length<=M?(s={element:C.clone().attr("label",d),label:h.label},t=[s],z.push(t),f.append(s.element)):(t=z[M],s=t[0],s.label!=d&&s.element.attr("label",s.label=d));D=null;B=0;for(I=h.length;B<I;B++)d=h[B],(v=t[B+1])?(D=v.element,v.label!==d.label&&D.text(v.label=d.label),v.id!==d.id&&D.val(v.id=d.id),D[0].selected!==d.selected&&(D.prop("selected",v.selected=d.selected),
Q&&D.prop("selected",v.selected))):(""===d.id&&F?K=F:(K=A.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).text(d.label),t.push({element:K,label:d.label,id:d.id,selected:d.selected}),p.addOption(d.label,K),D?D.after(K):s.element.append(K),D=K);for(B++;t.length>B;)d=t.pop(),p.removeOption(d.label),d.element.remove()}for(;z.length>M;)z.pop()[0].element.remove()}var h;if(!(h=s.match(d)))throw Ze("iexp",s,ia(f));var l=c(h[2]||h[1]),m=h[4]||h[6],n=h[5],r=c(h[3]||""),u=c(h[2]?
h[1]:m),w=c(h[7]),x=h[8]?c(h[8]):null,z=[[{element:f,label:""}]];F&&(a(F)(e),F.removeClass("ng-scope"),F.remove());f.empty();f.on("change",function(){e.$apply(function(){var a,c=w(e)||[],d={},h,l,p,r,s,v,y;if(q)for(l=[],r=0,v=z.length;r<v;r++)for(a=z[r],p=1,s=a.length;p<s;p++){if((h=a[p].element)[0].selected){h=h.val();n&&(d[n]=h);if(x)for(y=0;y<c.length&&(d[m]=c[y],x(e,d)!=h);y++);else d[m]=c[h];l.push(u(e,d))}}else if(h=f.val(),"?"==h)l=t;else if(""===h)l=null;else if(x)for(y=0;y<c.length;y++){if(d[m]=
c[y],x(e,d)==h){l=u(e,d);break}}else d[m]=c[h],n&&(d[n]=h),l=u(e,d);g.$setViewValue(l);k()})});g.$render=k;e.$watchCollection(w,k);e.$watchCollection(function(){var a={},c=w(e);if(c){for(var d=Array(c.length),f=0,g=c.length;f<g;f++)a[m]=c[f],d[f]=l(e,a);return d}},k);q&&e.$watchCollection(function(){return g.$modelValue},k)}if(m[1]){var p=m[0];m=m[1];var q=k.multiple,s=k.ngOptions,F=!1,u,A=w(X.createElement("option")),C=w(X.createElement("optgroup")),v=A.clone();k=0;for(var z=g.children(),E=z.length;k<
E;k++)if(""===z[k].value){u=F=z.eq(k);break}p.init(m,F,v);q&&(m.$isEmpty=function(a){return!a||0===a.length});s?n(e,g,m):q?l(e,g,m):h(e,g,m,p)}}}}],id=["$interpolate",function(a){var c={addOption:E,removeOption:E};return{restrict:"E",priority:100,compile:function(d,e){if(x(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var h=d.parent(),l=h.data("$selectController")||h.parent().data("$selectController");l&&l.databound?d.prop("selected",!1):l=c;f?a.$watch(f,function(a,
c){e.$set("value",a);a!==c&&l.removeOption(c);l.addOption(a)}):l.addOption(e.value);d.on("$destroy",function(){l.removeOption(e.value)})}}}}],hd=ba({restrict:"E",terminal:!0});W.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):((Ea=W.jQuery)&&Ea.fn.on?(w=Ea,D(Ea.fn,{scope:La.scope,isolateScope:La.isolateScope,controller:La.controller,injector:La.injector,inheritedData:La.inheritedData}),Gb("remove",!0,!0,!1),Gb("empty",!1,!1,!1),Gb("html",!1,!1,!0)):w=S,Va.element=w,
$c(Va),w(X).ready(function(){Xc(X,fc)}))})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');
//# sourceMappingURL=angular.min.js.map

; browserify_shim__define__module__export__(typeof angular != "undefined" ? angular : window.angular);

}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],"/home/codio/workspace/bower_components/ionic/release/js/ionic-angular.min.js":[function(require,module,exports){
(function (global){

; require("/home/codio/workspace/bower_components/ionic/release/js/ionic.min.js");
require("/home/codio/workspace/bower_components/angular/angular.min.js");
require("/home/codio/workspace/bower_components/angular-animate/angular-animate.min.js");
require("/home/codio/workspace/bower_components/angular-sanitize/angular-sanitize.min.js");
require("/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js");
;__browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {
/*!
 * Copyright 2014 Drifty Co.
 * http://drifty.com/
 *
 * Ionic, v1.0.0-beta.13
 * A powerful HTML5 mobile app framework.
 * http://ionicframework.com/
 *
 * By @maxlynch, @benjsperry, @adamdbradley <3
 *
 * Licensed under the MIT license. Please see LICENSE for more information.
 *
 */

!function(){function e(e){if(e.$root!==e){var t=e.$parent;e.$$disconnected=!0,t.$$childHead===e&&(t.$$childHead=e.$$nextSibling),t.$$childTail===e&&(t.$$childTail=e.$$prevSibling),e.$$prevSibling&&(e.$$prevSibling.$$nextSibling=e.$$nextSibling),e.$$nextSibling&&(e.$$nextSibling.$$prevSibling=e.$$prevSibling),e.$$nextSibling=e.$$prevSibling=null}}function t(e){if(e.$root!==e&&e.$$disconnected){var t=e.$parent;e.$$disconnected=!1,e.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=e,t.$$childTail=e):t.$$childHead=t.$$childTail=e}}function n(e){return["$log",function(t){function n(e){this.handle=e}var i=this,o=this._instances=[];this._registerInstance=function(e,t){return e.$$delegateHandle=t,o.push(e),function(){var t=o.indexOf(e);-1!==t&&o.splice(t,1)}},this.$getByHandle=function(e){return e?new n(e):i},e.forEach(function(e){n.prototype[e]=function(){var n,i,r=this.handle,a=arguments,s=0;return o.forEach(function(t){t.$$delegateHandle===r&&(s++,i=t[e].apply(t,a),1===s&&(n=i))}),s?n:t.warn('Delegate for handle "'+this.handle+'" could not find a corresponding element with delegate-handle="'+this.handle+'"! '+e+"() was not called!\nPossible cause: If you are calling "+e+'() immediately, and your element with delegate-handle="'+this.handle+'" is a child of your controller, then your element may not be compiled yet. Put a $timeout around your call to '+e+"() and try again.")},i[e]=function(){var t,n,i=arguments;return o.forEach(function(o,r){n=o[e].apply(o,i),0===r&&(t=n)}),t}})}]}function i(e,t){return[function(){return{priority:"99",link:function(n,i,o){o.$observe(e,function(e){e||i[0].removeAttribute(t)})}}}]}function o(e){return["$ionicGesture","$parse",function(t,n){var i=e.substr(2).toLowerCase();return function(o,r,a){var s=n(a[e]),c=function(e){o.$apply(function(){s(o,{$event:e})})},l=t.on(i,c,r);o.$on("$destroy",function(){t.off(l,i,c)})}}]}function r(){return["$ionicScrollDelegate",function(e){return{restrict:"E",link:function(t,n,i){function o(t){for(var i=3,o=t.target;i--&&o;){if(o.classList.contains("button")||o.tagName.match(/input|textarea|select/i)||o.isContentEditable)return;o=o.parentNode}var r=t.gesture&&t.gesture.touches[0]||t.detail.touches[0],a=n[0].getBoundingClientRect();ionic.DomUtil.rectContains(r.pageX,r.pageY,a.left,a.top-20,a.left+a.width,a.top+a.height)&&e.scrollTop(!0)}"true"!=i.noTapScroll&&(ionic.on("tap",o,n[0]),t.$on("$destroy",function(){ionic.off("tap",o,n[0])}))}}}]}function a(e){return[function(){return{restrict:"E",compile:function(t){function n(t,n,i){var o=(new ionic.views.HeaderBar({el:n[0],alignTitle:i.alignTitle||"center"}),n[0]);e?(t.$watch(function(){return o.className},function(e){var n=-1===e.indexOf("ng-hide"),i=-1!==e.indexOf("bar-subheader");t.$hasHeader=n&&!i,t.$hasSubheader=n&&i}),t.$on("$destroy",function(){delete t.$hasHeader,delete t.$hasSubheader})):(t.$watch(function(){return o.className},function(e){var n=-1===e.indexOf("ng-hide"),i=-1!==e.indexOf("bar-subfooter");t.$hasFooter=n&&!i,t.$hasSubfooter=n&&i}),t.$on("$destroy",function(){delete t.$hasFooter,delete t.$hasSubfooter}),t.$watch("$hasTabs",function(e){n.toggleClass("has-tabs",!!e)}))}t.addClass(e?"bar bar-header":"bar bar-footer");var i=t[0].parentNode;return i.querySelector(".tabs-top")&&t.addClass("has-tabs-top"),{pre:n}}}}]}function s(e){return e.clientHeight}function c(e){e.stopPropagation()}var l={method:function(e,t,n){var i=!1;return function(){return i||(i=!0,t(e)),n.apply(this,arguments)}},field:function(e,t,n,i,o){var r=!1,a=function(){return r||(r=!0,t(e)),o},s=function(n){return r||(r=!0,t(e)),o=n,n};Object.defineProperty(n,i,{get:a,set:s,enumerable:!0})}},u=angular.module("ionic",["ngAnimate","ngSanitize","ui.router"]),d=angular.extend,f=angular.forEach,h=angular.isDefined,p=angular.isString,v=angular.element;u.factory("$ionicActionSheet",["$rootScope","$compile","$animate","$timeout","$ionicTemplateLoader","$ionicPlatform","$ionicBody",function(e,t,n,i,o,r,a){function s(o){var s=e.$new(!0);angular.extend(s,{cancel:angular.noop,destructiveButtonClicked:angular.noop,buttonClicked:angular.noop,$deregisterBackButton:angular.noop,buttons:[],cancelOnStateChange:!0},o||{});var c=s.element=t('<ion-action-sheet buttons="buttons"></ion-action-sheet>')(s),l=v(c[0].querySelector(".action-sheet-wrapper")),u=s.cancelOnStateChange?e.$on("$stateChangeSuccess",function(){s.cancel()}):angular.noop;return s.removeSheet=function(e){s.removed||(s.removed=!0,l.removeClass("action-sheet-up"),i(function(){a.removeClass("action-sheet-open")},400),s.$deregisterBackButton(),u(),n.removeClass(c,"active",function(){s.$destroy(),c.remove(),s.cancel.$scope=null,(e||angular.noop)()}))},s.showSheet=function(e){s.removed||(a.append(c).addClass("action-sheet-open"),n.addClass(c,"active",function(){s.removed||(e||angular.noop)()}),i(function(){s.removed||l.addClass("action-sheet-up")},20,!1))},s.$deregisterBackButton=r.registerBackButtonAction(function(){i(s.cancel)},C),s.cancel=function(){s.removeSheet(o.cancel)},s.buttonClicked=function(e){o.buttonClicked(e,o.buttons[e])===!0&&s.removeSheet()},s.destructiveButtonClicked=function(){o.destructiveButtonClicked()===!0&&s.removeSheet()},s.showSheet(),s.cancel.$scope=s,s.cancel}return{show:s}}]),v.prototype.addClass=function(e){var t,n,i,o,r,a;if(e&&"ng-scope"!=e&&"ng-isolate-scope"!=e)for(t=0;t<this.length;t++)if(o=this[t],o.setAttribute)if(e.indexOf(" ")<0&&o.classList.add)o.classList.add(e);else{for(a=(" "+(o.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=e.split(" "),n=0;n<r.length;n++)i=r[n].trim(),-1===a.indexOf(" "+i+" ")&&(a+=i+" ");o.setAttribute("class",a.trim())}return this},v.prototype.removeClass=function(e){var t,n,i,o,r;if(e)for(t=0;t<this.length;t++)if(r=this[t],r.getAttribute)if(e.indexOf(" ")<0&&r.classList.remove)r.classList.remove(e);else for(i=e.split(" "),n=0;n<i.length;n++)o=i[n],r.setAttribute("class",(" "+(r.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+o.trim()+" "," ").trim());return this},u.factory("$ionicBackdrop",["$document","$timeout",function(e,t){function n(){1===++a&&(r.addClass("visible"),ionic.requestAnimationFrame(function(){a&&r.addClass("active")}))}function i(){0===--a&&(r.removeClass("active"),t(function(){!a&&r.removeClass("visible")},400,!1))}function o(){return r}var r=v('<div class="backdrop">'),a=0;return e[0].body.appendChild(r[0]),{retain:n,release:i,getElement:o,_element:r}}]),u.factory("$ionicBind",["$parse","$interpolate",function(e,t){var n=/^\s*([@=&])(\??)\s*(\w*)\s*$/;return function(i,o,r){f(r||{},function(r,a){var s,c,l=r.match(n)||[],u=l[3]||a,d=l[1];switch(d){case"@":if(!o[u])return;o.$observe(u,function(e){i[a]=e}),o[u]&&(i[a]=t(o[u])(i));break;case"=":if(!o[u])return;c=i.$watch(o[u],function(e){i[a]=e}),i.$on("$destroy",c);break;case"&":if(o[u]&&o[u].match(RegExp(a+"(.*?)")))throw new Error('& expression binding "'+a+'" looks like it will recursively call "'+o[u]+'" and cause a stack overflow! Please choose a different scopeName.');s=e(o[u]),i[a]=function(e){return s(i,e)}}})}}]),u.factory("$ionicBody",["$document",function(e){return{addClass:function(){for(var t=0;t<arguments.length;t++)e[0].body.classList.add(arguments[t]);return this},removeClass:function(){for(var t=0;t<arguments.length;t++)e[0].body.classList.remove(arguments[t]);return this},enableClass:function(e){var t=Array.prototype.slice.call(arguments).slice(1);return e?this.addClass.apply(this,t):this.removeClass.apply(this,t),this},append:function(t){return e[0].body.appendChild(t.length?t[0]:t),this},get:function(){return e[0].body}}}]),u.factory("$ionicClickBlock",["$document","$ionicBody","$timeout",function(e,t,n){var i=e[0].createElement("div");return i.className="click-block",{show:function(){i.parentElement?i.classList.remove("hide"):t.append(i),n(function(){i.classList.add("hide")},500)},hide:function(){i.classList.add("hide")}}}]),u.factory("$collectionDataSource",["$cacheFactory","$parse","$rootScope",function(n,i,o){function r(e){e.css(ionic.CSS.TRANSFORM,"translate3d(-2000px,-2000px,0)")}function a(e){this.scope=e.scope,this.transcludeFn=e.transcludeFn,this.transcludeParent=e.transcludeParent,this.element=e.element,this.keyExpr=e.keyExpr,this.listExpr=e.listExpr,this.trackByExpr=e.trackByExpr,this.heightGetter=e.heightGetter,this.widthGetter=e.widthGetter,this.dimensions=[],this.data=[],this.attachedItems={},this.BACKUP_ITEMS_LENGTH=20,this.backupItemsArray=[]}return a.prototype={setup:function(){if(!this.isSetup){this.isSetup=!0;for(var e=0;e<this.BACKUP_ITEMS_LENGTH;e++)this.detachItem(this.createItem())}},destroy:function(){this.dimensions.length=0,this.data=null,this.backupItemsArray.length=0,this.attachedItems={}},calculateDataDimensions:function(){var e={};this.dimensions=this.data.map(function(t,n){return e[this.keyExpr]=t,e.$index=n,{width:this.widthGetter(this.scope,e),height:this.heightGetter(this.scope,e)}},this),this.dimensions=this.beforeSiblings.concat(this.dimensions).concat(this.afterSiblings),this.dataStartIndex=this.beforeSiblings.length},createItem:function(){var e={};return e.scope=this.scope.$new(),this.transcludeFn(e.scope,function(t){t.css("position","absolute"),e.element=t}),this.transcludeParent.append(e.element),e},getItem:function(e){return(item=this.attachedItems[e])||((item=this.backupItemsArray.pop())?t(item.scope):item=this.createItem()),item},attachItemAtIndex:function(e){if(e<this.dataStartIndex)return this.beforeSiblings[e];if(e-=this.dataStartIndex,e>this.data.length-1)return this.afterSiblings[e-this.dataStartIndex];var t=this.getItem(e),n=this.data[e];return(t.index!==e||t.scope[this.keyExpr]!==n)&&(t.index=t.scope.$index=e,t.scope[this.keyExpr]=n,t.scope.$first=0===e,t.scope.$last=e===this.getLength()-1,t.scope.$middle=!(t.scope.$first||t.scope.$last),t.scope.$odd=!(t.scope.$even=0===(1&e)),o.$$phase||t.scope.$digest()),this.attachedItems[e]=t,t},destroyItem:function(e){e.element.remove(),e.scope.$destroy(),e.scope=null,e.element=null},detachItem:function(t){delete this.attachedItems[t.index],t.isOutside?r(t.element):this.backupItemsArray.length>=this.BACKUP_ITEMS_LENGTH?this.destroyItem(t):(this.backupItemsArray.push(t),r(t.element),e(t.scope))},getLength:function(){return this.dimensions&&this.dimensions.length||0},setData:function(e,t,n){this.data=e||[],this.beforeSiblings=t||[],this.afterSiblings=n||[],this.calculateDataDimensions(),this.afterSiblings.forEach(function(e){e.element.css({position:"absolute",top:"0",left:"0"}),r(e.element)})}},a}]),u.factory("$collectionRepeatManager",["$rootScope","$timeout",function(){function e(e){function t(){return n.viewportSize}var n=this;this.dataSource=e.dataSource,this.element=e.element,this.scrollView=e.scrollView,this.isVertical=!!this.scrollView.options.scrollingY,this.renderedItems={},this.dimensions=[],this.setCurrentIndex(0),this.scrollView.__$callback=this.scrollView.__callback,this.scrollView.__callback=angular.bind(this,this.renderScroll),this.isVertical?(this.scrollView.options.getContentHeight=t,this.scrollValue=function(){return this.scrollView.__scrollTop},this.scrollMaxValue=function(){return this.scrollView.__maxScrollTop},this.scrollSize=function(){return this.scrollView.__clientHeight},this.secondaryScrollSize=function(){return this.scrollView.__clientWidth},this.transformString=function(e,t){return"translate3d("+t+"px,"+e+"px,0)"},this.primaryDimension=function(e){return e.height},this.secondaryDimension=function(e){return e.width}):(this.scrollView.options.getContentWidth=t,this.scrollValue=function(){return this.scrollView.__scrollLeft},this.scrollMaxValue=function(){return this.scrollView.__maxScrollLeft},this.scrollSize=function(){return this.scrollView.__clientWidth},this.secondaryScrollSize=function(){return this.scrollView.__clientHeight},this.transformString=function(e,t){return"translate3d("+e+"px,"+t+"px,0)"},this.primaryDimension=function(e){return e.width},this.secondaryDimension=function(e){return e.height})}return e.prototype={destroy:function(){this.renderedItems={},this.render=angular.noop,this.calculateDimensions=angular.noop,this.dimensions=[]},calculateDimensions:function(){function e(e){var r={primarySize:this.primaryDimension(e),secondarySize:Math.min(this.secondaryDimension(e),o)};return t&&(i+=t.secondarySize,t.primaryPos===n&&i+r.secondarySize>o&&(i=0,n+=t.primarySize)),r.primaryPos=n,r.secondaryPos=i,t=r,r}var t,n=0,i=0,o=this.secondaryScrollSize();this.dataSource.beforeSiblings&&this.dataSource.beforeSiblings.forEach(e,this);var r=n+(t?t.primarySize:0);n=i=0,t=null;var a=this.dataSource.dimensions.map(e,this),s=n+(t?t.primarySize:0);return{beforeSize:r,totalSize:s,dimensions:a}},resize:function(){var e=this.calculateDimensions();this.dimensions=e.dimensions,this.viewportSize=e.totalSize,this.beforeSize=e.beforeSize,this.setCurrentIndex(0),this.render(!0),this.dataSource.setup()},setCurrentIndex:function(e){var t=(this.dimensions[e]||{}).primaryPos||0;this.currentIndex=e,this.hasPrevIndex=e>0,this.hasPrevIndex&&(this.previousPos=Math.max(t-this.dimensions[e-1].primarySize,this.dimensions[e-1].primaryPos)),this.hasNextIndex=e+1<this.dataSource.getLength(),this.hasNextIndex&&(this.nextPos=Math.min(t+this.dimensions[e+1].primarySize,this.dimensions[e+1].primaryPos))},renderScroll:ionic.animationFrameThrottle(function(e,t,n,i){return this.renderIfNeeded(this.isVertical?t:e),this.scrollView.__$callback(e,t,n,i)}),renderIfNeeded:function(e){(this.hasNextIndex&&e>=this.nextPos||this.hasPrevIndex&&e<this.previousPos)&&this.render()},getIndexForScrollValue:function(e,t){var n;if(t<=this.dimensions[e].primaryPos)for(;(n=this.dimensions[e-1])&&n.primaryPos>t;)e--;else for(;(n=this.dimensions[e+1])&&n.primaryPos<t;)e++;return e},render:function(e){function t(e,t){e<i.dataSource.dataStartIndex||i.renderItem(e,t.primaryPos-i.beforeSize,t.secondaryPos)}var n,i=this,o=this.currentIndex>=this.dataSource.getLength();if(o||e){for(n in this.renderedItems)this.removeItem(n);if(o)return}for(var r,a=this.scrollValue(),s=this.scrollSize(),c=s+a,l=this.getIndexForScrollValue(this.currentIndex,a),u=Math.max(l-1,0);u>0&&(r=this.dimensions[u])&&r.primaryPos===this.dimensions[l-1].primaryPos;)u--;for(n=u;(r=this.dimensions[n])&&r.primaryPos-r.primarySize<c;)t(n,r),n++;i.dimensions[n]&&(t(n,i.dimensions[n]),n++),i.dimensions[n]&&t(n,i.dimensions[n]);var d=n;for(var f in this.renderedItems)(u>f||f>d)&&this.removeItem(f);this.setCurrentIndex(l)},renderItem:function(e,t,n){var i=this.dataSource.attachItemAtIndex(e);i&&i.element?((i.primaryPos!==t||i.secondaryPos!==n)&&(i.element.css(ionic.CSS.TRANSFORM,this.transformString(t,n)),i.primaryPos=t,i.secondaryPos=n),this.renderedItems[e]=i):delete this.renderedItems[e]},removeItem:function(e){var t=this.renderedItems[e];t&&(t.primaryPos=t.secondaryPos=null,this.dataSource.detachItem(t),delete this.renderedItems[e])}},e}]),u.factory("$ionicGesture",[function(){return{on:function(e,t,n,i){return window.ionic.onGesture(e,t,n[0],i)},off:function(e,t,n){return window.ionic.offGesture(e,t,n)}}}]),u.provider("$ionicConfig",function(){var e={prefetchTemplates:!0};this.prefetchTemplates=function(t){return arguments.length&&(e.prefetchTemplates=t),e.prefetchTemplates},this.$get=function(){return e}});var g='<div class="loading-container"><div class="loading"></div></div>',m="$ionicLoading instance.hide() has been deprecated. Use $ionicLoading.hide().",$="$ionicLoading instance.show() has been deprecated. Use $ionicLoading.show().",w="$ionicLoading instance.setContent() has been deprecated. Use $ionicLoading.show({ template: 'my content' }).";u.constant("$ionicLoadingConfig",{template:'<i class="icon ion-loading-d"></i>'}).factory("$ionicLoading",["$ionicLoadingConfig","$ionicBody","$ionicTemplateLoader","$ionicBackdrop","$timeout","$q","$log","$compile","$ionicPlatform",function(e,t,n,i,o,r,a,s,c){function u(){return p||(p=n.compile({template:g,appendTo:t.get()}).then(function(e){var a=e;return e.show=function(e){var c=e.templateUrl?n.load(e.templateUrl):r.when(e.template||e.content||"");this.isShown||(this.hasBackdrop=!e.noBackdrop&&e.showBackdrop!==!1,this.hasBackdrop&&(i.retain(),i.getElement().addClass("backdrop-loading"))),e.duration&&(o.cancel(this.durationTimeout),this.durationTimeout=o(angular.bind(this,this.hide),+e.duration)),c.then(function(e){if(e){var n=a.element.children();n.html(e),s(n.contents())(a.scope)}a.isShown&&(a.element.addClass("visible"),ionic.requestAnimationFrame(function(){a.isShown&&(a.element.addClass("active"),t.addClass("loading-active"))}))}),this.isShown=!0},e.hide=function(){this.isShown&&(this.hasBackdrop&&(i.release(),i.getElement().removeClass("backdrop-loading")),a.element.removeClass("active"),t.removeClass("loading-active"),setTimeout(function(){!a.isShown&&a.element.removeClass("visible")},200)),o.cancel(this.durationTimeout),this.isShown=!1},e})),p}function f(t){t=d(e||{},t||{});var n=t.delay||t.showDelay||0;return b&&o.cancel(b),b=o(angular.noop,n),b.then(u).then(function(e){return v(),v=c.registerBackButtonAction(angular.noop,T),e.show(t)}),{hide:l.method(m,a.error,h),show:l.method($,a.error,function(){f(t)}),setContent:l.method(w,a.error,function(e){u().then(function(t){t.show({template:e})})})}}function h(){v(),o.cancel(b),u().then(function(e){e.hide()})}var p,v=angular.noop,b=r.when();return{show:f,hide:h,_getLoader:u}}]),u.factory("$ionicModal",["$rootScope","$ionicBody","$compile","$timeout","$ionicPlatform","$ionicTemplateLoader","$q","$log",function(e,t,n,i,o,r,a,s){var c=ionic.views.Modal.inherit({initialize:function(e){ionic.views.Modal.prototype.initialize.call(this,e),this.animation=e.animation||"slide-in-up"},show:function(e){var n=this;if(n.scope.$$destroyed)return void s.error("Cannot call "+n.viewType+".show() after remove(). Please create a new "+n.viewType+" instance.");var r=v(n.modalEl);return n.el.classList.remove("hide"),i(function(){t.addClass(n.viewType+"-open")},400),n.el.parentElement||(r.addClass(n.animation),t.append(n.el)),e&&n.positionView&&n.positionView(e,r),r.addClass("ng-enter active").removeClass("ng-leave ng-leave-active"),n._isShown=!0,n._deregisterBackButton=o.registerBackButtonAction(n.hardwareBackButtonClose?angular.bind(n,n.hide):angular.noop,S),n._isOpenPromise=a.defer(),ionic.views.Modal.prototype.show.call(n),i(function(){r.addClass("ng-enter-active"),ionic.trigger("resize"),n.scope.$parent&&n.scope.$parent.$broadcast(n.viewType+".shown",n),n.el.classList.add("active")},20),i(function(){n.$el.on("click",function(e){n.backdropClickToClose&&e.target===n.el&&n.hide()})},400)},hide:function(){var e=this,n=v(e.modalEl);return e.el.classList.remove("active"),n.addClass("ng-leave"),i(function(){n.addClass("ng-leave-active").removeClass("ng-enter ng-enter-active active")},20),e.$el.off("click"),e._isShown=!1,e.scope.$parent&&e.scope.$parent.$broadcast(e.viewType+".hidden",e),e._deregisterBackButton&&e._deregisterBackButton(),ionic.views.Modal.prototype.hide.call(e),i(function(){t.removeClass(e.viewType+"-open"),e.el.classList.add("hide")},e.hideDelay||320)},remove:function(){var e=this;return e.scope.$parent&&e.scope.$parent.$broadcast(e.viewType+".removed",e),e.hide().then(function(){e.scope.$destroy(),e.$el.remove()})},isShown:function(){return!!this._isShown}}),l=function(t,i){var o=i.scope&&i.scope.$new()||e.$new(!0);i.viewType=i.viewType||"modal",d(o,{$hasHeader:!1,$hasSubheader:!1,$hasFooter:!1,$hasSubfooter:!1,$hasTabs:!1,$hasTabsTop:!1});var r=n("<ion-"+i.viewType+">"+t+"</ion-"+i.viewType+">")(o);i.$el=r,i.el=r[0],i.modalEl=i.el.querySelector("."+i.viewType);var a=new c(i);return a.scope=o,i.scope||(o[i.viewType]=a),a};return{fromTemplate:function(e,t){var n=l(e,t||{});return n},fromTemplateUrl:function(e,t,n){var i;return angular.isFunction(t)&&(i=t,t=n),r.load(e).then(function(e){var n=l(e,t||{});return i&&i(n),n})}}}]),u.service("$ionicNavBarDelegate",n(["back","align","showBackButton","showBar","setTitle","changeTitle","getTitle","getPreviousTitle"]));var b=100,y=150,S=200,C=300,k=400,T=500;u.constant("$ionicPlatformDefaults",{ios:{$ionicNavBarConfig:{transition:"nav-title-slide-ios",alignTitle:"center",backButtonIcon:"ion-ios7-arrow-back"},$ionicNavViewConfig:{transition:"slide-ios"},$ionicTabsConfig:{type:"",position:""}},android:{$ionicNavBarConfig:{transition:"nav-title-slide-full",alignTitle:"center",backButtonIcon:"ion-ios7-arrow-back"},$ionicNavViewConfig:{transition:"slide-full"},$ionicTabsConfig:{type:"tabs-striped",position:""}}}),u.config(["$ionicPlatformDefaults","$injector",function(e,t){var n=ionic.Platform.platform(),i=function(e){f(e,function(e,n){d(t.get(n),e)})};switch(n){case"ios":i(e.ios);break;case"android":i(e.android)}}]),u.provider("$ionicPlatform",function(){return{$get:["$q","$rootScope",function(e){var t={onHardwareBackButton:function(e){ionic.Platform.ready(function(){document.addEventListener("backbutton",e,!1)})},offHardwareBackButton:function(e){ionic.Platform.ready(function(){document.removeEventListener("backbutton",e)})},$backButtonActions:{},registerBackButtonAction:function(e,n,i){t._hasBackButtonHandler||(t.$backButtonActions={},t.onHardwareBackButton(t.hardwareBackButtonClick),t._hasBackButtonHandler=!0);var o={id:i?i:ionic.Utils.nextUid(),priority:n?n:0,fn:e};return t.$backButtonActions[o.id]=o,function(){delete t.$backButtonActions[o.id]}},hardwareBackButtonClick:function(e){var n,i;for(i in t.$backButtonActions)(!n||t.$backButtonActions[i].priority>=n.priority)&&(n=t.$backButtonActions[i]);return n?(n.fn(e),n):void 0},is:function(e){return ionic.Platform.is(e)},on:function(e,t){return ionic.Platform.ready(function(){document.addEventListener(e,t,!1)}),function(){ionic.Platform.ready(function(){document.removeEventListener(e,t)})}},ready:function(t){var n=e.defer();return ionic.Platform.ready(function(){n.resolve(),t&&t()}),n.promise}};return t}]}}),u.factory("$ionicPopover",["$ionicModal","$ionicPosition","$document","$window",function(e,t,n,i){function o(e,o){var a=angular.element(e.target||e),s=t.offset(a),c=o.prop("offsetWidth"),l=o.prop("offsetHeight"),u=n[0].body.clientWidth,d=i.innerHeight,f={left:s.left+s.width/2-c/2},h=v(o[0].querySelector(".popover-arrow"));f.left<r?f.left=r:f.left+c+r>u&&(f.left=u-c-r),s.top+s.height+l>d?(f.top=s.top-l,o.addClass("popover-bottom")):(f.top=s.top+s.height,o.removeClass("popover-bottom")),h.css({left:s.left+s.width/2-h.prop("offsetWidth")/2-f.left+"px"}),o.css({top:f.top+"px",left:f.left+"px",marginLeft:"0",opacity:"1"})}var r=6,a={viewType:"popover",hideDelay:1,animation:"none",positionView:o};return{fromTemplate:function(t,n){return e.fromTemplate(t,ionic.Utils.extend(n||{},a))},fromTemplateUrl:function(t,n){return e.fromTemplateUrl(t,n,ionic.Utils.extend(n||{},a))}}}]);var I='<div class="popup-container"><div class="popup"><div class="popup-head"><h3 class="popup-title" ng-bind-html="title"></h3><h5 class="popup-sub-title" ng-bind-html="subTitle" ng-if="subTitle"></h5></div><div class="popup-body"></div><div class="popup-buttons"><button ng-repeat="button in buttons" ng-click="$buttonTapped(button, $event)" class="button" ng-class="button.type || \'button-default\'" ng-bind-html="button.text"></button></div></div></div>';u.factory("$ionicPopup",["$ionicTemplateLoader","$ionicBackdrop","$q","$timeout","$rootScope","$ionicBody","$compile","$ionicPlatform",function(e,t,n,i,o,r,a,s){function c(t){t=d({scope:null,title:"",buttons:[]},t||{});var o=e.compile({template:I,scope:t.scope&&t.scope.$new(),appendTo:r.get()}),s=t.templateUrl?e.load(t.templateUrl):n.when(t.template||t.content||"");return n.all([o,s]).then(function(e){var o=e[0],r=e[1],s=n.defer();o.responseDeferred=s;var c=v(o.element[0].querySelector(".popup-body"));return r?(c.html(r),a(c.contents())(o.scope)):c.remove(),d(o.scope,{title:t.title,buttons:t.buttons,subTitle:t.subTitle,$buttonTapped:function(e,t){var n=(e.onTap||angular.noop)(t);t=t.originalEvent||t,t.defaultPrevented||s.resolve(n)}}),o.show=function(){o.isShown||(o.isShown=!0,ionic.requestAnimationFrame(function(){o.isShown&&(o.element.removeClass("popup-hidden"),o.element.addClass("popup-showing active"),f(o.element))}))},o.hide=function(e){return e=e||angular.noop,o.isShown?(o.isShown=!1,o.element.removeClass("active"),o.element.addClass("popup-hidden"),void i(e,250)):e()},o.remove=function(){o.removed||(o.hide(function(){o.element.remove(),o.scope.$destroy()}),o.removed=!0)},o})}function l(){$[0]&&$[0].responseDeferred.resolve()}function u(e){function n(e){o.then(function(t){t.removed||t.responseDeferred.resolve(e)})}var o=w._createPopup(e),a=$[0];a&&a.hide();var c=i(angular.noop,a?m.stackPushDelay:0).then(function(){return o}).then(function(e){return a||(r.addClass("popup-open"),t.retain(),w._backButtonActionDone=s.registerBackButtonAction(l,k)),$.unshift(e),e.show(),e.responseDeferred.notify({close:c.close}),e.responseDeferred.promise.then(function(n){var o=$.indexOf(e);-1!==o&&$.splice(o,1),e.remove();var a=$[0];return a?a.show():(i(function(){r.removeClass("popup-open")},400),t.release(),(w._backButtonActionDone||angular.noop)()),n})});return c.close=n,c}function f(e){var t=e[0].querySelector("[autofocus]");t&&t.focus()}function h(e){return u(d({buttons:[{text:e.okText||"OK",type:e.okType||"button-positive",onTap:function(){return!0}}]},e||{}))}function p(e){return u(d({buttons:[{text:e.cancelText||"Cancel",type:e.cancelType||"button-default",onTap:function(){return!1}},{text:e.okText||"OK",type:e.okType||"button-positive",onTap:function(){return!0}}]},e||{}))}function g(e){var t=o.$new(!0);t.data={};var n="";return e.template&&/<[a-z][\s\S]*>/i.test(e.template)===!1&&(n="<span>"+e.template+"</span>",delete e.template),u(d({template:n+'<input ng-model="data.response" type="'+(e.inputType||"text")+'" placeholder="'+(e.inputPlaceholder||"")+'">',scope:t,buttons:[{text:e.cancelText||"Cancel",type:e.cancelType||"button-default",onTap:function(){}},{text:e.okText||"OK",type:e.okType||"button-positive",onTap:function(){return t.data.response||""}}]},e||{}))}var m={stackPushDelay:75},$=[],w={show:u,alert:h,confirm:p,prompt:g,_createPopup:c,_popupStack:$};return w}]),u.factory("$ionicPosition",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function i(e){return"static"===(n(e,"position")||"static")}var o=function(t){for(var n=e[0],o=t.offsetParent||n;o&&o!==n&&i(o);)o=o.offsetParent;return o||n};return{position:function(t){var n=this.offset(t),i={top:0,left:0},r=o(t[0]);r!=e[0]&&(i=this.offset(angular.element(r)),i.top+=r.clientTop-r.scrollTop,i.left+=r.clientLeft-r.scrollLeft);var a=t[0].getBoundingClientRect();return{width:a.width||t.prop("offsetWidth"),height:a.height||t.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}}]),u.service("$ionicScrollDelegate",n(["resize","scrollTop","scrollBottom","scrollTo","scrollBy","zoomTo","zoomBy","getScrollPosition","anchorScroll","getScrollView","rememberScrollPosition","forgetScrollPosition","scrollToRememberedPosition"])),u.service("$ionicSideMenuDelegate",n(["toggleLeft","toggleRight","getOpenRatio","isOpen","isOpenLeft","isOpenRight","canDragContent","edgeDragThreshold"])),u.service("$ionicSlideBoxDelegate",n(["update","slide","enableSlide","previous","next","stop","start","currentIndex","slidesCount"])),u.service("$ionicTabsDelegate",n(["select","selectedIndex"])),function(){var e=[];u.factory("$ionicTemplateCache",["$http","$templateCache","$timeout","$ionicConfig",function(t,n,i,o){function r(e){return a.length>500?!1:"undefined"==typeof e?c():(p(e)&&(e=[e]),f(e,function(e){a.push(e)}),void(s&&c()))}var a=e,s=!1,c=function(){if(o.prefetchTemplates!==!1&&(r._runCount++,s=!0,0!==a.length)){for(var e=0;5>e&&(template=a.pop());)p(template)&&t.get(template,{cache:n}),e++;a.length&&i(function(){c()},1e3)}};return r._runCount=0,r}]).config(["$stateProvider","$ionicConfigProvider",function(t,n){var i=t.state;t.state=function(o,r){if("object"==typeof r&&n.prefetchTemplates()!==!1){var a=r.prefetchTemplate!==!1;if(a&&p(r.templateUrl)&&e.push(r.templateUrl),angular.isObject(r.views))for(var s in r.views)a=r.views[s].prefetchTemplate!==!1,a&&p(r.views[s].templateUrl)&&e.push(r.views[s].templateUrl)}return i.call(t,o,r)}}]).run(["$ionicTemplateCache",function(e){e()}])}(),u.factory("$ionicTemplateLoader",["$compile","$controller","$http","$q","$rootScope","$templateCache",function(e,t,n,i,o,r){function a(e){return n.get(e,{cache:r}).then(function(e){return e.data&&e.data.trim()})}function s(n){n=d({template:"",templateUrl:"",scope:null,controller:null,locals:{},appendTo:null},n||{});var r=n.templateUrl?this.load(n.templateUrl):i.when(n.template);return r.then(function(i){var r,a=n.scope||o.$new(),s=v("<div>").html(i).contents();return n.controller&&(r=t(n.controller,d(n.locals,{$scope:a})),s.children().data("$ngControllerController",r)),n.appendTo&&v(n.appendTo).append(s),e(s)(a),{element:s,scope:a}})}return{load:a,compile:s}}]),u.run(["$rootScope","$state","$location","$document","$animate","$ionicPlatform","$ionicViewService",function(e,t,n,i,o,r,a){function s(t){return e.$viewHistory.backView?e.$viewHistory.backView.go():ionic.Platform.exitApp(),t.preventDefault(),!1}e.$viewHistory={histories:{root:{historyId:"root",parentHistoryId:null,stack:[],cursor:-1}},views:{},backView:null,forwardView:null,currentView:null,disabledRegistrableTagNames:[]},a.disableRegisterByTagName&&(a.disableRegisterByTagName("ion-tabs"),a.disableRegisterByTagName("ion-side-menus")),e.$on("$stateChangeStart",function(){ionic.keyboard.hide()}),e.$on("viewState.changeHistory",function(i,o){if(o){var r=o.historyId?e.$viewHistory.histories[o.historyId]:null;if(r&&r.cursor>-1&&r.cursor<r.stack.length){var a=r.stack[r.cursor];return a.go(o)}!o.url&&o.uiSref&&(o.url=t.href(o.uiSref)),o.url&&(0===o.url.indexOf("#")&&(o.url=o.url.replace("#","")),o.url!==n.url()&&n.url(o.url))}}),e.$on("viewState.viewEnter",function(e,t){t&&t.title&&(i[0].title=t.title)}),r.registerBackButtonAction(s,b)}]).factory("$ionicViewService",["$rootScope","$state","$location","$window","$injector","$animate","$ionicNavViewConfig","$ionicClickBlock",function(e,t,n,i,o,r,a,s){function c(){return ionic.Utils.nextUid()}var l=function(){};return l.prototype.initialize=function(e){if(e){for(var t in e)this[t]=e[t];return this}return null},l.prototype.go=function(){return this.stateName?t.go(this.stateName,this.stateParams):this.url&&this.url!==n.url()?e.$viewHistory.backView===this?i.history.go(-1):e.$viewHistory.forwardView===this?i.history.go(1):void n.url(this.url):null},l.prototype.destroy=function(){this.scope&&(this.scope.$destroy&&this.scope.$destroy(),this.scope=null)},{register:function(t,i){var o=e.$viewHistory,r=this.getCurrentStateId(),a=this._getHistory(t),s=o.currentView,l=o.backView,u=o.forwardView,d=this.nextViewOptions(),f={viewId:null,navAction:null,navDirection:null,historyId:a.historyId};if(i&&!this.isTagNameRegistrable(i))return f.navAction="disabledByTagName",f;if(s&&s.stateId===r&&s.historyId===a.historyId)return f.navAction="noChange",f;if(o.forcedNav)ionic.Utils.extend(f,o.forcedNav),e.$viewHistory.forcedNav=null;else if(l&&l.stateId===r)f.viewId=l.viewId,f.navAction="moveBack",f.viewId=l.viewId,l.historyId===s.historyId&&(f.navDirection="back");else if(u&&u.stateId===r){f.viewId=u.viewId,f.navAction="moveForward",u.historyId===s.historyId&&(f.navDirection="forward");var h=this._getParentHistoryObj(t);u.historyId&&h.scope&&(h.scope.$historyId=u.historyId,f.historyId=u.historyId)}else if(s&&s.historyId!==a.historyId&&a.cursor>-1&&a.stack.length>0&&a.cursor<a.stack.length&&a.stack[a.cursor].stateId===r){var p=a.stack[a.cursor];f.viewId=p.viewId,f.navAction="moveBack";var v=this._getViewById(p.backViewId);
v&&p.historyId!==v.historyId&&(a.stack[a.cursor].backViewId=s.viewId)}else{if(f.viewId=c(r),s){if(s.forwardViewId=f.viewId,a.historyId===s.historyId&&(f.navDirection="forward"),f.navAction="newView",u&&s.stateId!==u.stateId&&s.historyId===u.historyId){var g=this._getHistoryById(u.historyId);if(g)for(var m=g.stack.length-1;m>=u.index;m--)g.stack[m].destroy(),g.stack.splice(m)}}else f.navAction="initialView";o.views[f.viewId]=this.createView({viewId:f.viewId,index:a.stack.length,historyId:a.historyId,backViewId:s&&s.viewId?s.viewId:null,forwardViewId:null,stateId:r,stateName:this.getCurrentStateName(),stateParams:this.getCurrentStateParams(),url:n.url()}),"moveBack"==f.navAction&&e.$emit("$viewHistory.viewBack",s.viewId,f.viewId),a.stack.push(o.views[f.viewId])}return d&&(d.disableAnimate&&(f.navDirection=null),d.disableBack&&(o.views[f.viewId].backViewId=null),this.nextViewOptions(null)),this.setNavViews(f.viewId),a.cursor=o.currentView.index,f},setNavViews:function(t){var n=e.$viewHistory;n.currentView=this._getViewById(t),n.backView=this._getBackView(n.currentView),n.forwardView=this._getForwardView(n.currentView),e.$broadcast("$viewHistory.historyChange",{showBack:n.backView&&n.backView.historyId===n.currentView.historyId})},registerHistory:function(e){e.$historyId=ionic.Utils.nextUid()},createView:function(e){var t=new l;return t.initialize(e)},getCurrentView:function(){return e.$viewHistory.currentView},getBackView:function(){return e.$viewHistory.backView},getForwardView:function(){return e.$viewHistory.forwardView},getNavDirection:function(){return e.$viewHistory.navDirection},getCurrentStateName:function(){return t&&t.current?t.current.name:null},isCurrentStateNavView:function(e){return t&&t.current&&t.current.views&&t.current.views[e]?!0:!1},getCurrentStateParams:function(){var e;if(t&&t.params)for(var n in t.params)t.params.hasOwnProperty(n)&&(e=e||{},e[n]=t.params[n]);return e},getCurrentStateId:function(){var e;if(t&&t.current&&t.current.name){if(e=t.current.name,t.params)for(var n in t.params)t.params.hasOwnProperty(n)&&t.params[n]&&(e+="_"+n+"="+t.params[n]);return e}return ionic.Utils.nextUid()},goToHistoryRoot:function(t){if(t){var n=e.$viewHistory.histories[t];if(n&&n.stack.length){if(e.$viewHistory.currentView&&e.$viewHistory.currentView.viewId===n.stack[0].viewId)return;e.$viewHistory.forcedNav={viewId:n.stack[0].viewId,navAction:"moveBack",navDirection:"back"},n.stack[0].go()}}},_getViewById:function(t){return t?e.$viewHistory.views[t]:null},_getBackView:function(e){return e?this._getViewById(e.backViewId):null},_getForwardView:function(e){return e?this._getViewById(e.forwardViewId):null},_getHistoryById:function(t){return t?e.$viewHistory.histories[t]:null},_getHistory:function(t){var n=this._getParentHistoryObj(t);return e.$viewHistory.histories[n.historyId]||(e.$viewHistory.histories[n.historyId]={historyId:n.historyId,parentHistoryId:this._getParentHistoryObj(n.scope.$parent).historyId,stack:[],cursor:-1}),e.$viewHistory.histories[n.historyId]},_getParentHistoryObj:function(t){for(var n=t;n;){if(n.hasOwnProperty("$historyId"))return{historyId:n.$historyId,scope:n};n=n.$parent}return{historyId:"root",scope:e}},nextViewOptions:function(e){return arguments.length?void(this._nextOpts=e):this._nextOpts},getRenderer:function(e,t,n){function i(e){for(var t="";!t&&e;)t=e.getAttribute("animation"),e=e.parentElement;return t?t:a.transition}function o(){d&&e[0].classList.add(d),"back"===c.navDirection?e[0].classList.add("reverse"):e[0].classList.remove("reverse")}var c,l,u=this,d=i(e[0]);return function(t){return{enter:function(n){return l&&t?(o(),n.addClass("ng-enter"),s.show(),void r.enter(n,e,null,function(){s.hide(),d&&e[0].classList.remove(d)})):(l||s.hide(),void e.append(n))},leave:function(){var n=e.contents();return l&&t?(o(),void r.leave(n,function(){n.remove()})):void n.remove()},register:function(e){return c=u.register(n,e),l=null!==d&&null!==c.navDirection,c}}}},disableRegisterByTagName:function(t){e.$viewHistory.disabledRegistrableTagNames.push(t.toUpperCase())},isTagNameRegistrable:function(t){var n,i,o=e.$viewHistory.disabledRegistrableTagNames;for(n=0;n<t.length;n++)if(1===t[n].nodeType)for(i=0;i<o.length;i++)if(t[n].tagName===o[i])return!1;return!0},clearHistory:function(){var t=e.$viewHistory.histories,n=e.$viewHistory.currentView;if(t)for(var i in t)t[i].stack&&(t[i].stack=[],t[i].cursor=-1),n&&n.historyId===i?(n.backViewId=null,n.forwardViewId=null,t[i].stack.push(n)):t[i].destroy&&t[i].destroy();for(var o in e.$viewHistory.views)o!==n.viewId&&delete e.$viewHistory.views[o];n&&this.setNavViews(n.viewId)}}}]),u.config(["$provide",function(e){function t(e,t){return e.__hash=e.hash,e.hash=function(n){return angular.isDefined(n)&&t(function(){var e=document.querySelector(".scroll-content");e&&(e.scrollTop=0)},0,!1),e.__hash(n)},e}e.decorator("$location",["$delegate","$timeout",t])}]),u.service("$ionicListDelegate",n(["showReorder","showDelete","canSwipeItems","closeOptionButtons"])).controller("$ionicList",["$scope","$attrs","$parse","$ionicListDelegate",function(e,t,n,i){var o=!0,r=!1,a=!1,s=i._registerInstance(this,t.delegateHandle);e.$on("$destroy",s),this.showReorder=function(e){return arguments.length&&(r=!!e),r},this.showDelete=function(e){return arguments.length&&(a=!!e),a},this.canSwipeItems=function(e){return arguments.length&&(o=!!e),o},this.closeOptionButtons=function(){this.listView&&this.listView.clearDragEffects()}}]),u.controller("$ionicNavBar",["$scope","$element","$attrs","$ionicViewService","$animate","$compile","$ionicNavBarDelegate",function(e,t,n,i,o,r,a){t.parent().data("$ionNavBarController",this);var s=a._registerInstance(this,n.delegateHandle);e.$on("$destroy",s),e.$on("$viewHistory.historyChange",function(e,t){backIsShown=!!t.showBack});var c=this;this.leftButtonsElement=v(t[0].querySelector(".buttons.left-buttons")),this.rightButtonsElement=v(t[0].querySelector(".buttons.right-buttons")),this.back=function(){var e=i.getBackView();return e&&e.go(),!1},this.align=function(e){this._headerBarView.align(e)},this.showBackButton=function(t){return arguments.length&&(e.backButtonShown=!!t),!(!e.hasBackButton||!e.backButtonShown)},this.showBar=function(t){return arguments.length&&(e.isInvisible=!t,e.$parent.$hasHeader=!!t),!e.isInvisible},this.setTitle=function(t){e.title!==t&&(e.oldTitle=e.title,e.title=t||"")},this.changeTitle=function(n,i){return e.title===n?("undefined"!=typeof backIsShown&&!backIsShown&&e.backButtonShown&&v(t[0].querySelector(".back-button")).addClass("ng-hide"),!1):(this.setTitle(n),e.isReverse="back"==i,e.shouldAnimate=!!i,e.shouldAnimate?this._animateTitles():this._headerBarView.align(),!0)},this.getTitle=function(){return e.title||""},this.getPreviousTitle=function(){return e.oldTitle||""},this._animateTitles=function(){var n,i,a;a=t[0].querySelectorAll(".title"),a.length&&(n=r('<h1 class="title" ng-bind-html="oldTitle"></h1>')(e),v(a[a.length-1]).replaceWith(n)),i=r('<h1 class="title invisible" ng-bind-html="title"></h1>')(e),ionic.requestAnimationFrame(function(){n&&o.leave(v(n));var r=n&&v(n)||null;o.enter(i,t,r,function(){c._headerBarView.align()}),f(a,function(e){e&&e.parentNode&&v(e).remove()}),e.$digest(),ionic.requestAnimationFrame(function(){i[0].classList.remove("invisible")})})}}]),u.factory("$$scrollValueCache",function(){return{}}).controller("$ionicScroll",["$scope","scrollViewOptions","$timeout","$window","$$scrollValueCache","$location","$rootScope","$document","$ionicScrollDelegate",function(e,t,n,i,o,r,a,s,c){var l=this;this.__timeout=n,this._scrollViewOptions=t;var u=this.element=t.el,d=this.$element=v(u),f=this.scrollView=new ionic.views.Scroll(t);(d.parent().length?d.parent():d).data("$$ionicScrollController",this);var h=c._registerInstance(this,t.delegateHandle);angular.isDefined(t.bouncing)||ionic.Platform.ready(function(){f.options.bouncing=!0,ionic.Platform.isAndroid()&&(f.options.bouncing=!1,f.options.deceleration=.95)});var p=angular.bind(f,f.resize);ionic.on("resize",p,i);var g=angular.noop,m=angular.noop,$=function(t){var n=(t.originalEvent||t).detail||{};e.$onScroll&&e.$onScroll({event:t,scrollTop:n.scrollTop||0,scrollLeft:n.scrollLeft||0})};d.on("scroll",$),e.$on("$destroy",function(){h(),f.__cleanup(),ionic.off("resize",p,i),i.removeEventListener("resize",p),m(),g(),l._rememberScrollId&&(o[l._rememberScrollId]=f.getValues()),t=null,l._scrollViewOptions=null,l.element=null,d.off("scroll",$),d=null,l.$element=null,l.scrollView=null,f=null}),m=e.$on("$viewContentLoaded",function(t,i){if(!t.defaultPrevented){t.preventDefault();var o=i&&i.viewId||e.$historyId;o&&n(function(){l.rememberScrollPosition(o),l.scrollToRememberedPosition(),g=a.$on("$viewHistory.viewBack",function(e,t){o===t&&l.forgetScrollPosition()})},0,!1)}}),n(function(){f&&f.run&&f.run()}),this._rememberScrollId=null,this.getScrollView=function(){return this.scrollView},this.getScrollPosition=function(){return this.scrollView.getValues()},this.resize=function(){return n(p).then(function(){d&&d.triggerHandler("scroll.resize")})},this.scrollTop=function(e){this.resize().then(function(){f.scrollTo(0,0,!!e)})},this.scrollBottom=function(e){this.resize().then(function(){var t=f.getScrollMax();f.scrollTo(t.left,t.top,!!e)})},this.scrollTo=function(e,t,n){this.resize().then(function(){f.scrollTo(e,t,!!n)})},this.zoomTo=function(e,t,n,i){this.resize().then(function(){f.zoomTo(e,!!t,n,i)})},this.zoomBy=function(e,t,n,i){this.resize().then(function(){f.zoomBy(e,!!t,n,i)})},this.scrollBy=function(e,t,n){this.resize().then(function(){f.scrollBy(e,t,!!n)})},this.anchorScroll=function(e){this.resize().then(function(){var t=r.hash(),n=t&&s[0].getElementById(t);if(!t||!n)return void f.scrollTo(0,0,!!e);var i=n,o=0,a=0,c=0;do null!==i&&(o+=i.offsetLeft),null!==i&&(a+=i.offsetTop),i=i.offsetParent,c++;while(i.attributes!=l.element.attributes&&i.offsetParent);f.scrollTo(o,a,!!e)})},this.rememberScrollPosition=function(e){if(!e)throw new Error("Must supply an id to remember the scroll by!");this._rememberScrollId=e},this.forgetScrollPosition=function(){delete o[this._rememberScrollId],this._rememberScrollId=null},this.scrollToRememberedPosition=function(e){var t=o[this._rememberScrollId];t&&this.resize().then(function(){f&&f.scrollTo&&f.scrollTo(+t.left,+t.top,e)})},this._setRefresher=function(e,t){var i=this.refresher=t,o=l.refresher.clientHeight||60;f.activatePullToRefresh(o,function(){i.classList.add("active"),e.$onPulling()},function(){n(function(){i.classList.remove("active"),i.classList.remove("refreshing"),i.classList.remove("refreshing-tail"),i.classList.add("invisible")},300)},function(){i.classList.add("refreshing"),e.$onRefresh()},function(){i.classList.remove("invisible")},function(){i.classList.add("invisible")},function(){i.classList.add("refreshing-tail")})}}]),u.controller("$ionicSideMenus",["$scope","$attrs","$ionicSideMenuDelegate","$ionicPlatform","$ionicBody",function(e,t,n,i,o){var r,a,s,c,l,u,d,f=this;f.$scope=e,f.initialize=function(e){f.left=e.left,f.right=e.right,f.setContent(e.content),f.dragThresholdX=e.dragThresholdX||10},f.setContent=function(e){e&&(f.content=e,f.content.onDrag=function(e){f._handleDrag(e)},f.content.endDrag=function(e){f._endDrag(e)})},f.isOpenLeft=function(){return f.getOpenAmount()>0},f.isOpenRight=function(){return f.getOpenAmount()<0},f.toggleLeft=function(e){if(!d&&f.left.isEnabled){var t=f.getOpenAmount();0===arguments.length&&(e=0>=t),f.content.enableAnimation(),f.openPercentage(e?100:0)}},f.toggleRight=function(e){if(!d&&f.right.isEnabled){var t=f.getOpenAmount();0===arguments.length&&(e=t>=0),f.content.enableAnimation(),f.openPercentage(e?-100:0)}},f.close=function(){f.openPercentage(0)},f.getOpenAmount=function(){return f.content&&f.content.getTranslateX()||0},f.getOpenRatio=function(){var e=f.getOpenAmount();return e>=0?e/f.left.width:e/f.right.width},f.isOpen=function(){return 0!==f.getOpenAmount()},f.getOpenPercentage=function(){return 100*f.getOpenRatio()},f.openPercentage=function(e){var t=e/100;if(f.left&&e>=0)f.openAmount(f.left.width*t);else if(f.right&&0>e){{f.right.width}f.openAmount(f.right.width*t)}o.enableClass(0!==e,"menu-open")},f.openAmount=function(e){var t=f.left&&f.left.width||0,n=f.right&&f.right.width||0;return(f.left&&f.left.isEnabled||!(e>0))&&(f.right&&f.right.isEnabled||!(0>e))?a&&e>t?void f.content.setTranslateX(t):r&&-n>e?void f.content.setTranslateX(-n):(f.content.setTranslateX(e),void(e>=0?(a=!0,r=!1,e>0&&(f.right&&f.right.pushDown&&f.right.pushDown(),f.left&&f.left.bringUp&&f.left.bringUp())):(r=!0,a=!1,f.right&&f.right.bringUp&&f.right.bringUp(),f.left&&f.left.pushDown&&f.left.pushDown()))):void f.content.setTranslateX(0)},f.snapToRest=function(e){f.content.enableAnimation(),s=!1;var t=f.getOpenRatio();if(0===t)return void f.openPercentage(0);var n=.3,i=e.gesture.velocityX,o=e.gesture.direction;f.openPercentage(t>0&&.5>t&&"right"==o&&n>i?0:t>.5&&"left"==o&&n>i?100:0>t&&t>-.5&&"left"==o&&n>i?0:.5>t&&"right"==o&&n>i?-100:"right"==o&&t>=0&&(t>=.5||i>n)?100:"left"==o&&0>=t&&(-.5>=t||i>n)?-100:0)},f.isAsideExposed=function(){return!!d},f.exposeAside=function(e){f.left&&f.left.isEnabled&&(f.close(),d=e,f.content.setMarginLeft(d?f.left.width:0),f.$scope.$emit("$ionicExposeAside",d))},f.activeAsideResizing=function(e){o.enableClass(e,"aside-resizing")},f._endDrag=function(e){d||(s&&f.snapToRest(e),c=null,l=null,u=null)},f._handleDrag=function(e){d||(c?l=e.gesture.touches[0].pageX:(c=e.gesture.touches[0].pageX,l=c),!s&&Math.abs(l-c)>f.dragThresholdX&&(c=l,s=!0,f.content.disableAnimation(),u=f.getOpenAmount()),s&&f.openAmount(u+(l-c)))},f.canDragContent=function(t){return arguments.length&&(e.dragContent=!!t),e.dragContent},f.edgeThreshold=25,f.edgeThresholdEnabled=!1,f.edgeDragThreshold=function(e){return arguments.length&&(angular.isNumber(e)&&e>0?(f.edgeThreshold=e,f.edgeThresholdEnabled=!0):f.edgeThresholdEnabled=!!e),f.edgeThresholdEnabled},f.isDraggableTarget=function(t){var n=f.edgeThresholdEnabled&&!f.isOpen(),i=t.gesture.startEvent&&t.gesture.startEvent.center&&t.gesture.startEvent.center.pageX,o=!n||i<=f.edgeThreshold||i>=f.content.element.offsetWidth-f.edgeThreshold;return(e.dragContent||f.isOpen())&&o&&!t.gesture.srcEvent.defaultPrevented&&!t.target.tagName.match(/input|textarea|select|object|embed/i)&&!t.target.isContentEditable&&!(t.target.dataset?t.target.dataset.preventScroll:"true"==t.target.getAttribute("data-prevent-scroll"))},e.sideMenuContentTranslateX=0;var h=angular.noop,p=angular.bind(f,f.close);e.$watch(function(){return 0!==f.getOpenAmount()},function(e){h(),e&&(h=i.registerBackButtonAction(p,y))});var v=n._registerInstance(f,t.delegateHandle);e.$on("$destroy",function(){v(),h()}),f.initialize({left:{width:275},right:{width:275}})}]),u.controller("$ionicTab",["$scope","$ionicViewService","$attrs","$location","$state",function(e,t,n,i,o){this.$scope=e,this.hrefMatchesState=function(){return n.href&&0===i.path().indexOf(n.href.replace(/^#/,"").replace(/\/$/,""))},this.srefMatchesState=function(){return n.uiSref&&o.includes(n.uiSref.split("(")[0])},this.navNameMatchesState=function(){return this.navViewName&&t.isCurrentStateNavView(this.navViewName)},this.tabMatchesState=function(){return this.hrefMatchesState()||this.srefMatchesState()||this.navNameMatchesState()}}]),u.controller("$ionicTabs",["$scope","$ionicViewService","$element",function(e,t){var n=null,i=this;i.tabs=[],i.selectedIndex=function(){return i.tabs.indexOf(n)},i.selectedTab=function(){return n},i.add=function(e){t.registerHistory(e),i.tabs.push(e),1===i.tabs.length&&i.select(e)},i.remove=function(e){var t=i.tabs.indexOf(e);if(-1!==t){if(e.$tabSelected)if(i.deselect(e),1===i.tabs.length);else{var n=t===i.tabs.length-1?t-1:t+1;i.select(i.tabs[n])}i.tabs.splice(t,1)}},i.deselect=function(e){e.$tabSelected&&(n=null,e.$tabSelected=!1,(e.onDeselect||angular.noop)())},i.select=function(o,r){var a;if(angular.isNumber(o)?(a=o,o=i.tabs[a]):a=i.tabs.indexOf(o),1===arguments.length&&(r=!(!o.navViewName&&!o.uiSref)),n&&n.$historyId==o.$historyId)r&&t.goToHistoryRoot(o.$historyId);else if(f(i.tabs,function(e){i.deselect(e)}),n=o,o.$tabSelected=!0,(o.onSelect||angular.noop)(),r){var s={type:"tab",tabIndex:a,historyId:o.$historyId,navViewName:o.navViewName,hasNavView:!!o.navViewName,title:o.title,url:o.href,uiSref:o.uiSref};e.$emit("viewState.changeHistory",s)}}}]),u.directive("ionActionSheet",["$document",function(e){return{restrict:"E",scope:!0,replace:!0,link:function(t,n){var i=function(e){27==e.which&&(t.cancel(),t.$apply())},o=function(e){e.target==n[0]&&(t.cancel(),t.$apply())};t.$on("$destroy",function(){n.remove(),e.unbind("keyup",i)}),e.bind("keyup",i),n.bind("click",o)},template:'<div class="action-sheet-backdrop"><div class="action-sheet-wrapper"><div class="action-sheet"><div class="action-sheet-group"><div class="action-sheet-title" ng-if="titleText" ng-bind-html="titleText"></div><button class="button" ng-click="buttonClicked($index)" ng-repeat="button in buttons" ng-bind-html="button.text"></button></div><div class="action-sheet-group" ng-if="destructiveText"><button class="button destructive" ng-click="destructiveButtonClicked()" ng-bind-html="destructiveText"></button></div><div class="action-sheet-group" ng-if="cancelText"><button class="button" ng-click="cancel()" ng-bind-html="cancelText"></button></div></div></div></div>'}}]),u.directive("ionCheckbox",function(){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<label class="item item-checkbox"><div class="checkbox checkbox-input-hidden disable-pointer-events"><input type="checkbox"><i class="checkbox-icon"></i></div><div class="item-content disable-pointer-events" ng-transclude></div></label>',compile:function(e,t){var n=e.find("input");f({name:t.name,"ng-value":t.ngValue,"ng-model":t.ngModel,"ng-checked":t.ngChecked,"ng-disabled":t.ngDisabled,"ng-true-value":t.ngTrueValue,"ng-false-value":t.ngFalseValue,"ng-change":t.ngChange},function(e,t){h(e)&&n.attr(t,e)})}}});var x="Cannot create a collection-repeat within a scrollView that is scrollable on both x and y axis.  Choose either x direction or y direction.",B="collection-repeat expected attribute collection-item-height to be a an expression that returns a number (in pixels) or percentage.",V="collection-repeat expected attribute collection-item-width to be a an expression that returns a number (in pixels) or percentage.",E="collection-repeat expected expression in form of '_item_ in _collection_[ track by _id_]' but got '%'";u.directive("collectionRepeat",["$collectionRepeatManager","$collectionDataSource","$parse",function(e,t,n){return{priority:1e3,transclude:"element",terminal:!0,$$tlb:!0,require:"^$ionicScroll",controller:[function(){}],link:function(i,o,r,a,s){function c(e){var t=[],n=[],i=!0;f(I.children,function(e){if(ionic.DomUtil.elementIsDescendant(o[0],e,I))i=!1;else{if(e.hasAttribute("collection-repeat-ignore"))return;var r=e.offsetWidth,a=e.offsetHeight;if(r&&a){var s=v(e);(i?t:n).push({width:e.offsetWidth,height:e.offsetHeight,element:s,scope:s.isolateScope()||s.scope(),isOutside:!0})}}}),d.resize(),k.setData(e,t,n),T.resize()}function l(){c(i.$eval(S))}var u=v('<div style="position:relative;">');o.parent()[0].insertBefore(u[0],o[0]),u.append(o);var d=a.scrollView;if(d.options.scrollingX&&d.options.scrollingY)throw new Error(x);var h=!!d.options.scrollingY;if(h&&!r.collectionItemHeight)throw new Error(B);if(!h&&!r.collectionItemWidth)throw new Error(V);var g=n(r.collectionItemHeight||'"100%"'),m=n(r.collectionItemWidth||'"100%"'),$=function(e,t){var n=g(e,t);return p(n)&&n.indexOf("%")>-1?Math.floor(parseInt(n,10)/100*d.__clientHeight):n},w=function(e,t){var n=m(e,t);return p(n)&&n.indexOf("%")>-1?Math.floor(parseInt(n,10)/100*d.__clientWidth):n},b=r.collectionRepeat.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!b)throw new Error(E.replace("%",r.collectionRepeat));var y=b[1],S=b[2],C=b[3],k=new t({scope:i,transcludeFn:s,transcludeParent:o.parent(),keyExpr:y,listExpr:S,trackByExpr:C,heightGetter:$,widthGetter:w}),T=new e({dataSource:k,element:a.$element,scrollView:a.scrollView});i.$watchCollection(S,function(e){if(e&&!angular.isArray(e))throw new Error("collection-repeat expects an array to repeat over, but instead got '"+typeof e+"'.");c(e)});var I=a.scrollView.__content;a.$element.on("scroll.resize",l),ionic.on("resize",l,window),i.$on("$destroy",function(){T.destroy(),k.destroy(),ionic.off("resize",l,window)})}}}]).directive({ngSrc:i("ngSrc","src"),ngSrcset:i("ngSrcset","srcset"),ngHref:i("ngHref","href")}),u.directive("ionContent",["$timeout","$controller","$ionicBind",function(e,t,n){return{restrict:"E",require:"^?ionNavView",scope:!0,priority:800,compile:function(e,i){function o(e,o,a){var s=e.$parent;if(e.$watch(function(){return(s.$hasHeader?" has-header":"")+(s.$hasSubheader?" has-subheader":"")+(s.$hasFooter?" has-footer":"")+(s.$hasSubfooter?" has-subfooter":"")+(s.$hasTabs?" has-tabs":"")+(s.$hasTabsTop?" has-tabs-top":"")},function(e,t){o.removeClass(t),o.addClass(e)}),e.$hasHeader=e.$hasSubheader=e.$hasFooter=e.$hasSubfooter=e.$hasTabs=e.$hasTabsTop=!1,n(e,a,{$onScroll:"&onScroll",$onScrollComplete:"&onScrollComplete",hasBouncing:"@",padding:"@",direction:"@",scrollbarX:"@",scrollbarY:"@",startX:"@",startY:"@",scrollEventInterval:"@"}),e.direction=e.direction||"y",angular.isDefined(a.padding)&&e.$watch(a.padding,function(e){(r||o).toggleClass("padding",!!e)}),"false"===a.scroll);else if("true"===i.overflowScroll)o.addClass("overflow-scroll");else{var c={el:o[0],delegateHandle:i.delegateHandle,locking:"true"===(i.locking||"true"),bouncing:e.$eval(e.hasBouncing),startX:e.$eval(e.startX)||0,startY:e.$eval(e.startY)||0,scrollbarX:e.$eval(e.scrollbarX)!==!1,scrollbarY:e.$eval(e.scrollbarY)!==!1,scrollingX:e.direction.indexOf("x")>=0,scrollingY:e.direction.indexOf("y")>=0,scrollEventInterval:parseInt(e.scrollEventInterval,10)||10,scrollingComplete:function(){e.$onScrollComplete({scrollTop:this.__scrollTop,scrollLeft:this.__scrollLeft})}};t("$ionicScroll",{$scope:e,scrollViewOptions:c}),e.$on("$destroy",function(){c.scrollingComplete=angular.noop,delete c.el,r=null,o=null,i.$$element=null})}}var r;return e.addClass("scroll-content ionic-scroll"),"false"!=i.scroll?(r=v('<div class="scroll"></div>'),r.append(e.contents()),e.append(r)):e.addClass("scroll-content-false"),{pre:o}}}}]),u.directive("exposeAsideWhen",["$window",function(e){return{restrict:"A",require:"^ionSideMenus",link:function(t,n,i,o){function r(){var t="large"==i.exposeAsideWhen?"(min-width:768px)":i.exposeAsideWhen;o.exposeAside(e.matchMedia(t).matches),o.activeAsideResizing(!1)}function a(){o.activeAsideResizing(!0),s()}var s=ionic.debounce(function(){t.$apply(function(){r()})},300,!1);r(),ionic.on("resize",a,e),t.$on("$destroy",function(){ionic.off("resize",a,e)})}}}]);var _="onHold onTap onTouch onRelease onDrag onDragUp onDragRight onDragDown onDragLeft onSwipe onSwipeUp onSwipeRight onSwipeDown onSwipeLeft".split(" ");_.forEach(function(e){u.directive(e,o(e))}),u.directive("ionNavBar",r()).directive("ionHeaderBar",r()).directive("ionHeaderBar",a(!0)).directive("ionFooterBar",a(!1)),u.directive("ionInfiniteScroll",["$timeout",function(e){function t(e,t,n){return n?t*(1-parseFloat(e,10)/100):t-parseFloat(e,10)}return{restrict:"E",require:["^$ionicScroll","ionInfiniteScroll"],template:'<i class="icon {{icon()}} icon-refreshing"></i>',scope:!0,controller:["$scope","$attrs",function(e,n){this.isLoading=!1,this.scrollView=null,this.getMaxScroll=function(){var e=(n.distance||"2.5%").trim(),i=-1!==e.indexOf("%"),o=this.scrollView.getScrollMax();return{left:this.scrollView.options.scrollingX?t(e,o.left,i):-1,top:this.scrollView.options.scrollingY?t(e,o.top,i):-1}}}],link:function(t,n,i,o){function r(){if(!s.isLoading){var e=c.getValues(),t=s.getMaxScroll();(-1!==t.left&&e.left>=t.left||-1!==t.top&&e.top>=t.top)&&l()}}var a=o[0],s=o[1],c=s.scrollView=a.scrollView;t.icon=function(){return angular.isDefined(i.icon)?i.icon:"ion-loading-d"};var l=function(){n[0].classList.add("active"),s.isLoading=!0,t.$parent&&t.$parent.$apply(i.onInfinite||"")},u=function(){n[0].classList.remove("active"),e(function(){c.resize(),d()},0,!1),s.isLoading=!1};t.$on("scroll.infiniteScrollComplete",function(){u()}),t.$on("$destroy",function(){a&&a.$element&&a.$element.off("scroll",d)});var d=ionic.animationFrameThrottle(r);setTimeout(d),a.$element.on("scroll",d)}}}]);var A='<a class="item-content" ng-href="{{$href()}}" target="{{$target()}}"></a>',P='<div class="item-content"></div>';u.directive("ionItem",["$animate","$compile",function(){return{restrict:"E",controller:["$scope","$element",function(e,t){this.$scope=e,this.$element=t}],scope:!0,compile:function(e,t){var n=angular.isDefined(t.href)||angular.isDefined(t.ngHref)||angular.isDefined(t.uiSref),i=n||/ion-(delete|option|reorder)-button/i.test(e.html());if(i){var o=v(n?A:P);o.append(e.contents()),e.append(o),e.addClass("item item-complex")}else e.addClass("item");return function(e,t,n){e.$href=function(){return n.href||n.ngHref},e.$target=function(){return n.target||"_self"}}}}}]);var D='<div class="item-left-edit item-delete enable-pointer-events"></div>';u.directive("ionDeleteButton",["$animate",function(){return{restrict:"E",require:["^ionItem","^?ionList"],priority:Number.MAX_VALUE,compile:function(e,t){return t.$set("class",(t["class"]||"")+" button icon button-icon",!0),function(e,t,n,i){var o=i[0],r=i[1],a=v(D);a.append(t),o.$element.append(a).addClass("item-left-editable"),r&&r.showDelete()&&a.addClass("visible active")}}}}]),u.directive("itemFloatingLabel",function(){return{restrict:"C",link:function(e,t){var n=t[0],i=n.querySelector("input, textarea"),o=n.querySelector(".input-label");if(i&&o){var r=function(){i.value?o.classList.add("has-input"):o.classList.remove("has-input")};i.addEventListener("input",r);var a=angular.element(i).controller("ngModel");a&&(a.$render=function(){i.value=a.$viewValue||"",r()}),e.$on("$destroy",function(){i.removeEventListener("input",r)})}}}});var H='<div class="item-options invisible"></div>';u.directive("ionOptionButton",["$compile",function(){function e(e){e.stopPropagation()}return{restrict:"E",require:"^ionItem",priority:Number.MAX_VALUE,compile:function(t,n){return n.$set("class",(n["class"]||"")+" button",!0),function(t,n,i,o){o.optionsContainer||(o.optionsContainer=v(H),o.$element.append(o.optionsContainer)),o.optionsContainer.append(n),n.on("click",e)}}}}]);var L='<div data-prevent-scroll="true" class="item-right-edit item-reorder enable-pointer-events"></div>';u.directive("ionReorderButton",["$animate","$parse",function(e,t){return{restrict:"E",require:["^ionItem","^?ionList"],priority:Number.MAX_VALUE,compile:function(e,n){return n.$set("class",(n["class"]||"")+" button icon button-icon",!0),e[0].setAttribute("data-prevent-scroll",!0),function(e,n,i,o){var r=o[0],a=o[1],s=t(i.onReorder);e.$onReorder=function(t,n){s(e,{$fromIndex:t,$toIndex:n})},i.ngClick||i.onClick||i.onclick||(n[0].onclick=function(e){return e.stopPropagation(),!1});var c=v(L);c.append(n),r.$element.append(c).addClass("item-right-editable"),a&&a.showReorder()&&c.addClass("visible active")}}}}]),u.directive("keyboardAttach",function(){return function(e,t){function n(e){if(!ionic.Platform.isAndroid()||ionic.Platform.isFullScreen){var n=e.keyboardHeight||e.detail.keyboardHeight;t.css("bottom",n+"px"),o=t.controller("$ionicScroll"),o&&(o.scrollView.__container.style.bottom=n+s(t[0])+"px")}}function i(){(!ionic.Platform.isAndroid()||ionic.Platform.isFullScreen)&&(t.css("bottom",""),o&&(o.scrollView.__container.style.bottom=""))}ionic.on("native.keyboardshow",n,window),ionic.on("native.keyboardhide",i,window),ionic.on("native.showkeyboard",n,window),ionic.on("native.hidekeyboard",i,window);var o;e.$on("$destroy",function(){ionic.off("native.keyboardshow",n,window),ionic.off("native.keyboardhide",i,window),ionic.off("native.showkeyboard",n,window),ionic.off("native.hidekeyboard",i,window)})}}),u.directive("ionList",["$animate","$timeout",function(e,t){return{restrict:"E",require:["ionList","^?$ionicScroll"],controller:"$ionicList",compile:function(e,n){var i=v('<div class="list">').append(e.contents()).addClass(n.type);return e.append(i),function(e,i,o,r){function a(){function o(e,t){t()&&e.addClass("visible")||e.removeClass("active"),ionic.requestAnimationFrame(function(){t()&&e.addClass("active")||e.removeClass("visible")})}s.listView=new ionic.views.ListView({el:i[0],listEl:i.children()[0],scrollEl:c&&c.element,scrollView:c&&c.scrollView,onReorder:function(e,n,i){var o=v(e).scope();o&&o.$onReorder&&t(function(){o.$onReorder(n,i)})},canSwipe:function(){return s.canSwipeItems()}});h(n.canSwipe)&&e.$watch("!!("+n.canSwipe+")",function(e){s.canSwipeItems(e)}),h(n.showDelete)&&e.$watch("!!("+n.showDelete+")",function(e){s.showDelete(e)}),h(n.showReorder)&&e.$watch("!!("+n.showReorder+")",function(e){s.showReorder(e)}),e.$watch(function(){return s.showDelete()},function(e,t){if(e||t){e&&s.closeOptionButtons(),s.canSwipeItems(!e),i.children().toggleClass("list-left-editing",e),i.toggleClass("disable-pointer-events",e);var n=v(i[0].getElementsByClassName("item-delete"));o(n,s.showDelete)}}),e.$watch(function(){return s.showReorder()},function(e,t){if(e||t){e&&s.closeOptionButtons(),s.canSwipeItems(!e),i.children().toggleClass("list-right-editing",e),i.toggleClass("disable-pointer-events",e);var n=v(i[0].getElementsByClassName("item-reorder"));o(n,s.showReorder)}})}var s=r[0],c=r[1];t(a)}}}}]),u.directive("menuClose",["$ionicViewService",function(){return{restrict:"AC",require:"^ionSideMenus",link:function(e,t,n,i){t.bind("click",function(){i.close()})}}}]),u.directive("menuToggle",["$ionicViewService",function(){return{restrict:"AC",require:"^ionSideMenus",link:function(e,t,n,i){var o=n.menuToggle||"left";t.bind("click",function(){"left"===o?i.toggleLeft():"right"===o&&i.toggleRight()})}}}]),u.directive("ionModal",[function(){return{restrict:"E",transclude:!0,replace:!0,controller:[function(){}],template:'<div class="modal-backdrop"><div class="modal-wrapper" ng-transclude></div></div>'}}]),u.directive("ionModalView",function(){return{restrict:"E",compile:function(e){e.addClass("modal")}}}),u.directive("ionNavBackButton",["$animate","$rootScope","$sanitize","$ionicNavBarConfig","$ionicNgClick",function(e,t,n,i,o){var r=!1;return t.$on("$viewHistory.historyChange",function(e,t){r=!!t.showBack}),{restrict:"E",require:"^ionNavBar",compile:function(t){t.addClass("button back-button ng-hide");var a=!!(t.html()||"").match(/class=.*?ion-/);return function(t,s,c,l){a||-1!==s[0].className.indexOf("ion-")||s.addClass(i.backButtonIcon),h(c.ngClick)||o(t,s,l.back),t.$watch(function(){return h(c.fromTitle)&&(s[0].innerHTML='<span class="back-button-title">'+n(t.oldTitle)+"</span>"),!(!r||!t.backButtonShown)},ionic.animationFrameThrottle(function(t){t?e.removeClass(s,"ng-hide"):e.addClass(s,"ng-hide")}))}}}}]),u.constant("$ionicNavBarConfig",{transition:"nav-title-slide-ios7",alignTitle:"center",backButtonIcon:"ion-ios7-arrow-back"}),u.directive("ionNavBar",["$ionicViewService","$rootScope","$animate","$compile","$ionicNavBarConfig",function(e,t,n,i,o){return{restrict:"E",controller:"$ionicNavBar",scope:!0,compile:function(e,t){function n(e,t,n,i){i._headerBarView=new ionic.views.HeaderBar({el:t[0],alignTitle:n.alignTitle||o.alignTitle||"center"}),e.backButtonShown=!1,e.shouldAnimate=!0,e.isReverse=!1,e.isInvisible=!0,e.$on("$destroy",function(){e.$parent.$hasHeader=!1}),e.$watch(function(){return(e.isReverse?" reverse":"")+(e.isInvisible?" invisible":"")+(e.shouldAnimate?"":" no-animation")},function(e,n){t.removeClass(n),t.addClass(e)})}return e.addClass("bar bar-header nav-bar").append('<div class="buttons left-buttons"> </div><h1 ng-bind-html="title" class="title"></h1><div class="buttons right-buttons"> </div>'),e.addClass(h(t.animation)?t.animation:o.transition),{pre:n}}}}]),u.directive("ionNavButtons",["$compile","$animate",function(e,t){return{require:"^ionNavBar",restrict:"E",compile:function(n){var i=n.contents().remove();
return function(n,o,r,a){var s="right"===r.side?a.rightButtonsElement:a.leftButtonsElement,c=v("<span>").append(i);o.append(c),e(c)(n),ionic.requestAnimationFrame(function(){n.$$destroyed||t.enter(c,s)}),n.$on("$destroy",function(){t.leave(c)}),o.css("display","none")}}}}]),u.directive("navClear",["$ionicViewService","$state","$location","$window","$rootScope",function(e,t,n,i,o){return o.$on("$stateChangeError",function(){e.nextViewOptions(null)}),{priority:100,restrict:"AC",compile:function(){function t(t,n){function o(){r=t.$on("$stateChangeStart",function(){e.nextViewOptions({disableAnimate:!0,disableBack:!0}),r()}),i.setTimeout(r,300)}var r;n.on("click",o)}return{pre:t}}}}]),u.constant("$ionicNavViewConfig",{transition:"slide-left-right-ios7"}),u.directive("ionNavView",["$ionicViewService","$state","$compile","$controller","$animate",function(e,t,n,i,o){var r=!1,a={restrict:"E",terminal:!0,priority:2e3,transclude:!0,controller:function(){},compile:function(s,c,l){return function(s,c,u){function d(r){o.enabled()===!1&&(r=!1);var a=t.$current&&t.$current.locals[p];if(a!==h){var l=e.getRenderer(c,u,s);if(f&&(f.$destroy(),f=null),!a)return h=null,w.state=null,c.append(m);var d=v("<div></div>").html(a.$template).contents(),$=l().register(d);l(r).leave(),h=a,w.state=a.$$state,l(r).enter(d);var b=n(d);if(f=s.$new(),f.$navDirection=$.navDirection,a.$$controller){a.$scope=f;var y=i(a.$$controller,a);c.children().data("$ngControllerController",y)}b(f);var S=e._getViewById($.viewId)||{};f.$broadcast("$viewContentLoaded",S),g&&f.$eval(g),d=null}}var f,h,p=u[a.name]||u.name||"",g=u.onload||"",m=l(s);c.append(m);var $=c.parent().inheritedData("$uiView");p.indexOf("@")<0&&(p=p+"@"+($&&$.state?$.state.name:""));var w={name:p,state:null};c.data("$uiView",w);var b=function(){if(!r){r=!0;try{d(!0)}catch(e){throw r=!1,e}r=!1}};s.$on("$stateChangeSuccess",b),d(!1)}}};return a}]),u.config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate",function(e){return e.shift(),e}])}]).factory("$ionicNgClick",["$parse",function(e){return function(t,n,i){var o=angular.isFunction(i)?i:e(i);n.on("click",function(e){t.$apply(function(){o(t,{$event:e})})}),n.onclick=function(){}}}]).directive("ngClick",["$ionicNgClick",function(e){return function(t,n,i){e(t,n,i.ngClick)}}]).directive("ionStopEvent",function(){return{restrict:"A",link:function(e,t,n){t.bind(n.ionStopEvent,c)}}}),u.directive("ionPane",function(){return{restrict:"E",link:function(e,t){t.addClass("pane")}}}),u.directive("ionPopover",[function(){return{restrict:"E",transclude:!0,replace:!0,controller:[function(){}],template:'<div class="popover-backdrop"><div class="popover-wrapper" ng-transclude></div></div>'}}]),u.directive("ionPopoverView",function(){return{restrict:"E",compile:function(e){e.append(angular.element('<div class="popover-arrow"></div>')),e.addClass("popover")}}}),u.directive("ionRadio",function(){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<label class="item item-radio"><input type="radio" name="radio-group"><div class="item-content disable-pointer-events" ng-transclude></div><i class="radio-icon disable-pointer-events icon ion-checkmark"></i></label>',compile:function(e,t){t.icon&&e.children().eq(2).removeClass("ion-checkmark").addClass(t.icon);var n=e.find("input");return f({name:t.name,value:t.value,disabled:t.disabled,"ng-value":t.ngValue,"ng-model":t.ngModel,"ng-disabled":t.ngDisabled,"ng-change":t.ngChange},function(e,t){h(e)&&n.attr(t,e)}),function(e,t,n){e.getValue=function(){return e.ngValue||n.value}}}}}),u.directive("ionRefresher",["$ionicBind",function(e){return{restrict:"E",replace:!0,require:"^$ionicScroll",template:'<div class="scroll-refresher" collection-repeat-ignore><div class="ionic-refresher-content" ng-class="{\'ionic-refresher-with-text\': pullingText || refreshingText}"><div class="icon-pulling" ng-class="{\'pulling-rotation-disabled\':disablePullingRotation}"><i class="icon {{pullingIcon}}"></i></div><div class="text-pulling" ng-bind-html="pullingText"></div><i class="icon {{refreshingIcon}} icon-refreshing"></i><div class="text-refreshing" ng-bind-html="refreshingText"></div></div></div>',compile:function(t,n){return angular.isUndefined(n.pullingIcon)&&n.$set("pullingIcon","ion-ios7-arrow-down"),angular.isUndefined(n.refreshingIcon)&&n.$set("refreshingIcon","ion-loading-d"),function(t,n,i,o){e(t,i,{pullingIcon:"@",pullingText:"@",refreshingIcon:"@",refreshingText:"@",disablePullingRotation:"@",$onRefresh:"&onRefresh",$onPulling:"&onPulling"}),o._setRefresher(t,n[0]),t.$on("scroll.refreshComplete",function(){t.$evalAsync(function(){o.scrollView.finishPullToRefresh()})})}}}}]),u.directive("ionScroll",["$timeout","$controller","$ionicBind",function(e,t,n){return{restrict:"E",scope:!0,controller:function(){},compile:function(e){function i(e,i,r){var a,s;n(e,r,{direction:"@",paging:"@",$onScroll:"&onScroll",scroll:"@",scrollbarX:"@",scrollbarY:"@",zooming:"@",minZoom:"@",maxZoom:"@"}),e.direction=e.direction||"y",angular.isDefined(r.padding)&&e.$watch(r.padding,function(e){o.toggleClass("padding",!!e)}),e.$eval(e.paging)===!0&&o.addClass("scroll-paging"),e.direction||(e.direction="y");var c=e.$eval(e.paging)===!0,l={el:i[0],delegateHandle:r.delegateHandle,locking:"true"===(r.locking||"true"),bouncing:e.$eval(r.hasBouncing),paging:c,scrollbarX:e.$eval(e.scrollbarX)!==!1,scrollbarY:e.$eval(e.scrollbarY)!==!1,scrollingX:e.direction.indexOf("x")>=0,scrollingY:e.direction.indexOf("y")>=0,zooming:e.$eval(e.zooming)===!0,maxZoom:e.$eval(e.maxZoom)||3,minZoom:e.$eval(e.minZoom)||.5};c&&(l.speedMultiplier=.8,l.bouncing=!1),s=t("$ionicScroll",{$scope:e,scrollViewOptions:l}),a=e.$parent.scrollView=s.scrollView}e.addClass("scroll-view ionic-scroll");var o=v('<div class="scroll"></div>');return o.append(e.contents()),e.append(o),{pre:i}}}}]),u.directive("ionSideMenu",function(){return{restrict:"E",require:"^ionSideMenus",scope:!0,compile:function(e,t){return angular.isUndefined(t.isEnabled)&&t.$set("isEnabled","true"),angular.isUndefined(t.width)&&t.$set("width","275"),e.addClass("menu menu-"+t.side),function(e,n,i,o){e.side=i.side||"left";var r=o[e.side]=new ionic.views.SideMenu({width:t.width,el:n[0],isEnabled:!0});e.$watch(i.width,function(e){var t=+e;t&&t==e&&r.setWidth(+e)}),e.$watch(i.isEnabled,function(e){r.setIsEnabled(!!e)})}}}}),u.directive("ionSideMenuContent",["$timeout","$ionicGesture","$window",function(e,t,n){return{restrict:"EA",require:"^ionSideMenus",scope:!0,compile:function(i,o){function r(r,a,s,c){function l(e){0!==c.getOpenAmount()?(c.close(),e.gesture.srcEvent.preventDefault(),v=null,g=null):v||(v=ionic.tap.pointerCoord(e.gesture.srcEvent))}function u(e){c.isDraggableTarget(e)&&"x"==p(e)&&(c._handleDrag(e),e.gesture.srcEvent.preventDefault())}function d(e){"x"==p(e)&&e.gesture.srcEvent.preventDefault()}function f(e){c._endDrag(e),v=null,g=null}function p(e){if(g)return g;if(e&&e.gesture){if(v){var t=ionic.tap.pointerCoord(e.gesture.srcEvent),n=Math.abs(t.x-v.x),i=Math.abs(t.y-v.y),o=i>n?"y":"x";return Math.max(n,i)>30&&(g=o),o}v=ionic.tap.pointerCoord(e.gesture.srcEvent)}return"x"}var v=null,g=null;a.addClass("menu-content pane"),h(o.dragContent)?r.$watch(o.dragContent,function(e){c.canDragContent(e)}):c.canDragContent(!0),h(o.edgeDragThreshold)&&r.$watch(o.edgeDragThreshold,function(e){c.edgeDragThreshold(e)});var m={element:i[0],onDrag:function(){},endDrag:function(){},getTranslateX:function(){return r.sideMenuContentTranslateX||0},setTranslateX:ionic.animationFrameThrottle(function(t){var n=m.offsetX+t;a[0].style[ionic.CSS.TRANSFORM]="translate3d("+n+"px,0,0)",e(function(){r.sideMenuContentTranslateX=t})}),setMarginLeft:ionic.animationFrameThrottle(function(e){e?(e=parseInt(e,10),a[0].style[ionic.CSS.TRANSFORM]="translate3d("+e+"px,0,0)",a[0].style.width=n.innerWidth-e+"px",m.offsetX=e):(a[0].style[ionic.CSS.TRANSFORM]="translate3d(0,0,0)",a[0].style.width="",m.offsetX=0)}),enableAnimation:function(){r.animationEnabled=!0,a[0].classList.add("menu-animated")},disableAnimation:function(){r.animationEnabled=!1,a[0].classList.remove("menu-animated")},offsetX:0};c.setContent(m);var $={stop_browser_behavior:!1},w=t.on("tap",l,a,$),b=t.on("dragright",u,a,$),y=t.on("dragleft",u,a,$),S=t.on("dragup",d,a,$),C=t.on("dragdown",d,a,$),k=t.on("release",f,a,$);r.$on("$destroy",function(){t.off(y,"dragleft",u),t.off(b,"dragright",u),t.off(S,"dragup",d),t.off(C,"dragdown",d),t.off(k,"release",f),t.off(w,"tap",l)})}return{pre:r}}}}]),u.directive("ionSideMenus",["$ionicBody",function(e){return{restrict:"ECA",controller:"$ionicSideMenus",compile:function(t,n){function i(t){t.$on("$ionicExposeAside",function(n,i){t.$exposeAside||(t.$exposeAside={}),t.$exposeAside.active=i,e.enableClass(i,"aside-open")}),t.$on("$destroy",function(){e.removeClass("menu-open","aside-open")})}return n.$set("class",(n["class"]||"")+" view"),{pre:i}}}}]),u.directive("ionSlideBox",["$timeout","$compile","$ionicSlideBoxDelegate",function(e,t,n){return{restrict:"E",replace:!0,transclude:!0,scope:{autoPlay:"=",doesContinue:"@",slideInterval:"@",showPager:"@",pagerClick:"&",disableScroll:"@",onSlideChanged:"&",activeSlide:"=?"},controller:["$scope","$element","$attrs",function(t,i,o){var r=t.$eval(t.doesContinue)===!0,a=h(o.autoPlay)?!!t.autoPlay:!1,s=a?t.$eval(t.slideInterval)||4e3:0,c=new ionic.views.Slider({el:i[0],auto:s,continuous:r,startSlide:t.activeSlide,slidesChanged:function(){t.currentSlide=c.currentIndex(),e(function(){})},callback:function(n){t.currentSlide=n,t.onSlideChanged({index:t.currentSlide,$index:t.currentSlide}),t.$parent.$broadcast("slideBox.slideChanged",n),t.activeSlide=n,e(function(){})}});c.enableSlide(t.$eval(o.disableScroll)!==!0),t.$watch("activeSlide",function(e){angular.isDefined(e)&&c.slide(e)}),t.$on("slideBox.nextSlide",function(){c.next()}),t.$on("slideBox.prevSlide",function(){c.prev()}),t.$on("slideBox.setSlide",function(e,t){c.slide(t)}),this.__slider=c;var l=n._registerInstance(c,o.delegateHandle);t.$on("$destroy",l),this.slidesCount=function(){return c.slidesCount()},this.onPagerClick=function(e){t.pagerClick({index:e})},e(function(){c.load()})}],template:'<div class="slider"><div class="slider-slides" ng-transclude></div></div>',link:function(e,n){if(e.$eval(e.showPager)!==!1){var i=e.$new(),o=v("<ion-pager></ion-pager>");n.append(o),t(o)(i)}}}}]).directive("ionSlide",function(){return{restrict:"E",require:"^ionSlideBox",compile:function(e){return e.addClass("slider-slide"),function(){}}}}).directive("ionPager",function(){return{restrict:"E",replace:!0,require:"^ionSlideBox",template:'<div class="slider-pager"><span class="slider-pager-page" ng-repeat="slide in numSlides() track by $index" ng-class="{active: $index == currentSlide}" ng-click="pagerClick($index)"><i class="icon ion-record"></i></span></div>',link:function(e,t,n,i){var o=function(e){for(var n=t[0].children,i=n.length,o=0;i>o;o++)o==e?n[o].classList.add("active"):n[o].classList.remove("active")};e.pagerClick=function(e){i.onPagerClick(e)},e.numSlides=function(){return new Array(i.slidesCount())},e.$watch("currentSlide",function(e){o(e)})}}}),u.constant("$ionicTabConfig",{type:""}),u.directive("ionTab",["$rootScope","$animate","$ionicBind","$compile",function(e,t,n,i){function o(e,t){return angular.isDefined(t)?" "+e+'="'+t+'"':""}return{restrict:"E",require:["^ionTabs","ionTab"],replace:!0,controller:"$ionicTab",scope:!0,compile:function(e,r){var a="<ion-tab-nav"+o("ng-click",r.ngClick)+o("title",r.title)+o("icon",r.icon)+o("icon-on",r.iconOn)+o("icon-off",r.iconOff)+o("badge",r.badge)+o("badge-style",r.badgeStyle)+o("hidden",r.hidden)+o("class",r["class"])+"></ion-tab-nav>",s=v('<div class="pane">').append(e.contents().remove());return function(e,o,r,c){function l(){h.tabMatchesState()&&f.select(e,!1)}var u,d,f=c[0],h=c[1],p=s[0].querySelector("ion-nav-view")||s[0].querySelector("data-ion-nav-view"),g=p&&p.getAttribute("name");n(e,r,{animate:"=",onSelect:"&",onDeselect:"&",title:"@",uiSref:"@",href:"@"}),f.add(e),e.$on("$destroy",function(){e.$tabsDestroy||f.remove(e),m.isolateScope().$destroy(),m.remove()}),o[0].removeAttribute("title"),g&&(h.navViewName=e.navViewName=g),e.$on("$stateChangeSuccess",l),l();var m=v(a);m.data("$ionTabsController",f),m.data("$ionTabController",h),f.$tabsElement.append(i(m)(e)),e.$watch("$tabSelected",function(n){u&&u.$destroy(),u=null,d&&t.leave(d),d=null,n&&(u=e.$new(),d=s.clone(),t.enter(d,f.$element),i(d)(u))})}}}}]),u.directive("ionTabNav",[function(){return{restrict:"E",replace:!0,require:["^ionTabs","^ionTab"],template:'<a ng-class="{\'tab-item-active\': isTabActive(), \'has-badge\':badge, \'tab-hidden\':isHidden()}"  class="tab-item"><span class="badge {{badgeStyle}}" ng-if="badge">{{badge}}</span><i class="icon {{getIconOn()}}" ng-if="getIconOn() && isTabActive()"></i><i class="icon {{getIconOff()}}" ng-if="getIconOff() && !isTabActive()"></i><span class="tab-title" ng-bind-html="title"></span></a>',scope:{title:"@",icon:"@",iconOn:"@",iconOff:"@",badge:"=",hidden:"@",badgeStyle:"@","class":"@"},compile:function(){return function(e,t,n,i){var o=i[0],r=i[1];t[0].removeAttribute("title"),e.selectTab=function(e){e.preventDefault(),o.select(r.$scope,!0)},n.ngClick||t.on("click",function(t){e.$apply(function(){e.selectTab(t)})}),e.isHidden=function(){return"true"===n.hidden||n.hidden===!0?!0:!1},e.getIconOn=function(){return e.iconOn||e.icon},e.getIconOff=function(){return e.iconOff||e.icon},e.isTabActive=function(){return o.selectedTab()===r.$scope}}}}}]),u.constant("$ionicTabsConfig",{position:"",type:""}),u.directive("ionTabs",["$ionicViewService","$ionicTabsDelegate","$ionicTabsConfig",function(e,t,n){return{restrict:"E",scope:!0,controller:"$ionicTabs",compile:function(e){function i(e,n,i,o){var r=t._registerInstance(o,i.delegateHandle);e.$on("$destroy",function(){e.$tabsDestroy=!0,r()}),o.$scope=e,o.$element=n,o.$tabsElement=v(n[0].querySelector(".tabs"));var a=n[0];e.$watch(function(){return a.className},function(t){var n=-1!==t.indexOf("tabs-top"),i=-1!==t.indexOf("tabs-item-hide");e.$hasTabs=!n&&!i,e.$hasTabsTop=n&&!i}),e.$on("$destroy",function(){delete e.$hasTabs,delete e.$hasTabsTop})}e.addClass("view");var o=v('<div class="tabs"></div>');return o.append(e.contents()),e.append(o),e.addClass(n.position),e.addClass(n.type),{pre:i}}}}]),u.directive("ionToggle",["$ionicGesture","$timeout",function(){return{restrict:"E",replace:!0,require:"?ngModel",transclude:!0,template:'<div class="item item-toggle"><div ng-transclude></div><label class="toggle"><input type="checkbox"><div class="track"><div class="handle"></div></div></label></div>',compile:function(e,t){var n=e.find("input");return f({name:t.name,"ng-value":t.ngValue,"ng-model":t.ngModel,"ng-checked":t.ngChecked,"ng-disabled":t.ngDisabled,"ng-true-value":t.ngTrueValue,"ng-false-value":t.ngFalseValue,"ng-change":t.ngChange},function(e,t){h(e)&&n.attr(t,e)}),t.toggleClass&&e[0].getElementsByTagName("label")[0].classList.add(t.toggleClass),function(e,t){var n,i,o,r;n=t[0].getElementsByTagName("label")[0],i=n.children[0],o=n.children[1],r=o.children[0];var a=v(i).controller("ngModel");e.toggle=new ionic.views.Toggle({el:n,track:o,checkbox:i,handle:r,onChange:function(){a.$setViewValue(i.checked?!0:!1),e.$apply()}}),e.$on("$destroy",function(){e.toggle.destroy()})}}}}]),u.directive("ionView",["$ionicViewService","$rootScope","$animate",function(){return{restrict:"EA",priority:1e3,require:["^?ionNavBar","^?ionModal"],compile:function(e){return e.addClass("pane"),e[0].removeAttribute("title"),function(e,t,n,i){var o=i[0],r=i[1];if(o&&!r){if(angular.isDefined(n.title)){var a=n.title;o.changeTitle(a,e.$navDirection),n.$observe("title",function(e){o.setTitle(e)})}var s=angular.isDefined(n.hideBackButton)?n.hideBackButton:"false";e.$watch(s,function(e){o.showBackButton(!e)});var c=angular.isDefined(n.hideNavBar)?n.hideNavBar:"false";e.$watch(c,function(e){o.showBar(!e)})}}}}}])}();
; browserify_shim__define__module__export__(typeof ionic != "undefined" ? ionic : window.ionic);

}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"/home/codio/workspace/bower_components/angular-animate/angular-animate.min.js":"/home/codio/workspace/bower_components/angular-animate/angular-animate.min.js","/home/codio/workspace/bower_components/angular-sanitize/angular-sanitize.min.js":"/home/codio/workspace/bower_components/angular-sanitize/angular-sanitize.min.js","/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js":"/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js","/home/codio/workspace/bower_components/angular/angular.min.js":"/home/codio/workspace/bower_components/angular/angular.min.js","/home/codio/workspace/bower_components/ionic/release/js/ionic.min.js":"/home/codio/workspace/bower_components/ionic/release/js/ionic.min.js"}],"/home/codio/workspace/bower_components/ionic/release/js/ionic.min.js":[function(require,module,exports){
/*!
 * Copyright 2014 Drifty Co.
 * http://drifty.com/
 *
 * Ionic, v1.0.0-beta.13
 * A powerful HTML5 mobile app framework.
 * http://ionicframework.com/
 *
 * By @maxlynch, @benjsperry, @adamdbradley <3
 *
 * Licensed under the MIT license. Please see LICENSE for more information.
 *
 */

!function(){function e(e,t,n){t!==!1?k.addEventListener(e,j[e],n):k.removeEventListener(e,j[e])}function t(e){var t=T(e.target),i=E(t);if(ionic.tap.requiresNativeClick(i)||z)return!1;var r=ionic.tap.pointerCoord(e);n("click",i,r.x,r.y),_(i)}function n(e,t,n,i){var r=document.createEvent("MouseEvents");r.initMouseEvent(e,!0,!0,window,1,0,0,n,i,!1,!1,!1,!1,0,null),r.isIonicTap=!0,t.dispatchEvent(r)}function i(e){return("submit"!=e.target.type||0!==e.detail)&&(ionic.scroll.isScrolling&&ionic.tap.containsOrIsTextInput(e.target)||!e.isIonicTap&&!ionic.tap.requiresNativeClick(e.target))?(e.stopPropagation(),ionic.tap.isLabelWithTextInput(e.target)||e.preventDefault(),!1):void 0}function r(t){if(!t.isIonicTap&&!d(t)){if(X)return t.stopPropagation(),ionic.tap.isTextInput(t.target)&&q===t.target||/^(select|option)$/i.test(t.target.tagName)||t.preventDefault(),!1;z=!1,F=ionic.tap.pointerCoord(t),e("mousemove"),ionic.activator.start(t)}}function o(n){return X?(n.stopPropagation(),n.preventDefault(),!1):d(n)||/^(select|option)$/i.test(n.target.tagName)?!1:(v(n)||t(n),e("mousemove",!1),ionic.activator.end(),void(z=!1))}function s(t){return v(t)?(e("mousemove",!1),ionic.activator.end(),z=!0,!1):void 0}function a(t){if(!d(t)&&(z=!1,h(),F=ionic.tap.pointerCoord(t),e(U),ionic.activator.start(t),ionic.Platform.isIOS()&&ionic.tap.isLabelWithTextInput(t.target))){var n=E(T(t.target));n!==Y&&t.preventDefault()}}function l(e){d(e)||(h(),v(e)||(t(e),/^(select|option)$/i.test(e.target.tagName)&&e.preventDefault()),q=e.target,u())}function c(t){return v(t)?(z=!0,e(U,!1),ionic.activator.end(),!1):void 0}function u(){e(U,!1),ionic.activator.end(),z=!1}function h(){X=!0,clearTimeout(H),H=setTimeout(function(){X=!1},2e3)}function d(e){return e.isTapHandled?!0:(e.isTapHandled=!0,ionic.scroll.isScrolling&&ionic.tap.containsOrIsTextInput(e.target)?(e.preventDefault(),!0):void 0)}function _(e){W=null;var t=!1;"SELECT"==e.tagName?(n("mousedown",e,0,0),e.focus&&e.focus(),t=!0):g()===e?t=!0:/^(input|textarea)$/i.test(e.tagName)||e.isContentEditable?(t=!0,e.focus&&e.focus(),e.value=e.value,X&&(W=e)):f(),t&&(g(e),ionic.trigger("ionic.focusin",{target:e},!0))}function f(){var e=g();e&&(/^(input|textarea|select)$/i.test(e.tagName)||e.isContentEditable)&&e.blur(),g(null)}function p(e){X&&ionic.tap.isTextInput(g())&&ionic.tap.isTextInput(W)&&W!==e.target&&(W.focus(),W=null),ionic.scroll.isScrolling=!1}function m(){g(null)}function g(e){return arguments.length&&(Y=e),Y||document.activeElement}function v(e){if(!e||1!==e.target.nodeType||!F||0===F.x&&0===F.y)return!1;var t=ionic.tap.pointerCoord(e),n=!(!e.target.classList||!e.target.classList.contains),i=n&e.target.classList.contains("button")?Z:B;return Math.abs(F.x-t.x)>i||Math.abs(F.y-t.y)>i}function T(e,t){for(var n=e,i=0;6>i&&n;i++){if("LABEL"===n.tagName)return n;n=n.parentElement}return t!==!1?e:void 0}function E(e){if(e&&"LABEL"===e.tagName){if(e.control)return e.control;if(e.querySelector){var t=e.querySelector("input,textarea,select");if(t)return t}}return e}function S(){A()?(window.addEventListener("native.keyboardshow",w),window.addEventListener("native.keyboardhide",L),window.addEventListener("native.showkeyboard",w),window.addEventListener("native.hidekeyboard",L)):document.body.addEventListener("focusout",L),document.body.addEventListener("ionic.focusin",b),document.body.addEventListener("focusin",b),document.body.addEventListener("orientationchange",G),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerDown",S):document.removeEventListener("touchstart",S)}function w(e){clearTimeout(K),ionic.keyboard.height=e.keyboardHeight}function b(e){e.target&&ionic.tap.isTextInput(e.target)&&!ionic.tap.isDateInput(e.target)&&P(e.target)&&(document.addEventListener("keydown",M,!1),document.body.scrollTop=0,document.body.querySelector(".scroll-content").scrollTop=0,$=e.target,y(e))}function y(e){clearTimeout(J),clearTimeout(K),J=setTimeout(function(){if(!(tt+350>Date.now())){tt=Date.now();var t,n=$.getBoundingClientRect(),i=0;Q=setInterval(function(){t=I(),i>10&&(clearInterval(Q),t=275),t&&(clearInterval(Q),D(e.target,n.top,n.bottom,et,t)),i++},100)}},32)}function D(e,t,n,i,r){var o={target:e,elementTop:Math.round(t),elementBottom:Math.round(n),keyboardHeight:r,viewportHeight:i};return o.hasPlugin=A(),o.contentHeight=i-r,o.isElementUnderKeyboard=o.elementBottom>o.contentHeight,ionic.keyboard.isOpen=!0,$=e,ionic.trigger("scrollChildIntoView",o,!0),ionic.requestAnimationFrame(function(){document.body.classList.add(nt)}),window.navigator.msPointerEnabled?document.addEventListener("MSPointerMove",N,!1):document.addEventListener("touchmove",N,!1),o}function L(){clearTimeout(K),K=setTimeout(ionic.keyboard.hide,350)}function x(){C()>et&&(et=C())}function M(e){ionic.scroll.isScrolling&&N(e)}function N(e){"TEXTAREA"!==e.target.tagName&&e.preventDefault()}function G(){var e=C();if(e===et)var t=0,n=setInterval(function(){t>10&&clearInterval(n),e=C(),e!==et&&(ionic.keyboard.landscape=et>e?!0:!1,et=e,clearInterval(n)),t++},50);else et=e}function I(){return ionic.keyboard.height?ionic.keyboard.height:ionic.Platform.isAndroid()?ionic.Platform.isFullScreen?275:C()<et?et-C():0:ionic.Platform.isIOS()?ionic.keyboard.landscape?206:ionic.Platform.isWebView()?260:216:275}function C(){return window.innerHeight||screen.height}function P(e){for(;e;){if(e.classList.contains(it))return!0;e=e.parentElement}return!1}function A(){return!!(window.cordova&&cordova.plugins&&cordova.plugins.Keyboard)}function O(){var e;for(e=0;e<document.head.children.length;e++)if("viewport"==document.head.children[e].name){rt=document.head.children[e];break}if(rt){var t,n=rt.content.toLowerCase().replace(/\s+/g,"").split(",");for(e=0;e<n.length;e++)n[e]&&(t=n[e].split("="),ot[t[0]]=t.length>1?t[1]:"_");R()}}function R(){var e=ot.width,t=ot.height,n=ionic.Platform,i=n.version(),r="device-width",o="device-height",s=ionic.viewport.orientation();delete ot.height,ot.width=r,n.isIPad()?i>7?delete ot.width:n.isWebView()?90==s?ot.height="0":7==i&&(ot.height=o):7>i&&(ot.height="0"):n.isIOS()&&(n.isWebView()?i>7?delete ot.width:7>i?t&&(ot.height="0"):7==i&&(ot.height=o):7>i&&t&&(ot.height="0")),(e!==ot.width||t!==ot.height)&&V()}function V(){var e,t=[];for(e in ot)ot[e]&&t.push(e+("_"==ot[e]?"":"="+ot[e]));rt.content=t.join(", ")}window.ionic=window.ionic||{},window.ionic.views={},window.ionic.version="1.0.0-beta.13",function(e,t,n){function i(){o=!0;for(var e=0;e<r.length;e++)n.requestAnimationFrame(r[e]);r=[],t.removeEventListener("DOMContentLoaded",i)}var r=[],o="complete"===t.readyState||"interactive"===t.readyState;o||t.addEventListener("DOMContentLoaded",i),e._rAF=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,16)}}();var s=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame;n.DomUtil={requestAnimationFrame:function(t){return e._rAF(t)},cancelAnimationFrame:function(e){s(e)},animationFrameThrottle:function(e){var t,i,r;return function(){t=arguments,r=this,i||(i=!0,n.requestAnimationFrame(function(){e.apply(r,t),i=!1}))}},getPositionInParent:function(e){return{left:e.offsetLeft,top:e.offsetTop}},ready:function(e){o?n.requestAnimationFrame(e):r.push(e)},getTextBounds:function(n){if(t.createRange){var i=t.createRange();if(i.selectNodeContents(n),i.getBoundingClientRect){var r=i.getBoundingClientRect();if(r){var o=e.scrollX,s=e.scrollY;return{top:r.top+s,left:r.left+o,right:r.left+o+r.width,bottom:r.top+s+r.height,width:r.width,height:r.height}}}}return null},getChildIndex:function(e,t){if(t)for(var n,i=e.parentNode.children,r=0,o=0,s=i.length;s>r;r++)if(n=i[r],n.nodeName&&n.nodeName.toLowerCase()==t){if(n==e)return o;o++}return Array.prototype.slice.call(e.parentNode.children).indexOf(e)},swapNodes:function(e,t){t.parentNode.insertBefore(e,t)},elementIsDescendant:function(e,t,n){var i=e;do{if(i===t)return!0;i=i.parentNode}while(i&&i!==n);return!1},getParentWithClass:function(e,t,n){for(n=n||10;e.parentNode&&n--;){if(e.parentNode.classList&&e.parentNode.classList.contains(t))return e.parentNode;e=e.parentNode}return null},getParentOrSelfWithClass:function(e,t,n){for(n=n||10;e&&n--;){if(e.classList&&e.classList.contains(t))return e;e=e.parentNode}return null},rectContains:function(e,t,n,i,r,o){return n>e||e>r?!1:i>t||t>o?!1:!0}},n.requestAnimationFrame=n.DomUtil.requestAnimationFrame,n.cancelAnimationFrame=n.DomUtil.cancelAnimationFrame,n.animationFrameThrottle=n.DomUtil.animationFrameThrottle}(window,document,ionic),function(e){e.CustomEvent=function(){if("function"==typeof window.CustomEvent)return CustomEvent;var e=function(e,t){var n;t=t||{bubbles:!1,cancelable:!1,detail:void 0};try{n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail)}catch(i){n=document.createEvent("Event");for(var r in t)n[r]=t[r];n.initEvent(e,t.bubbles,t.cancelable)}return n};return e.prototype=window.Event.prototype,e}(),e.EventController={VIRTUALIZED_EVENTS:["tap","swipe","swiperight","swipeleft","drag","hold","release"],trigger:function(t,n,i,r){var o=new e.CustomEvent(t,{detail:n,bubbles:!!i,cancelable:!!r});n&&n.target&&n.target.dispatchEvent&&n.target.dispatchEvent(o)||window.dispatchEvent(o)},on:function(t,n,i){for(var r=i||window,o=0,s=this.VIRTUALIZED_EVENTS.length;s>o;o++)if(t==this.VIRTUALIZED_EVENTS[o]){var a=new e.Gesture(i);return a.on(t,n),a}r.addEventListener(t,n)},off:function(e,t,n){n.removeEventListener(e,t)},onGesture:function(t,n,i,r){var o=new e.Gesture(i,r);return o.on(t,n),o},offGesture:function(e,t,n){e.off(t,n)},handlePopState:function(){}},e.on=function(){e.EventController.on.apply(e.EventController,arguments)},e.off=function(){e.EventController.off.apply(e.EventController,arguments)},e.trigger=e.EventController.trigger,e.onGesture=function(){return e.EventController.onGesture.apply(e.EventController.onGesture,arguments)},e.offGesture=function(){return e.EventController.offGesture.apply(e.EventController.offGesture,arguments)}}(window.ionic),function(e){function t(){if(!e.Gestures.READY){e.Gestures.event.determineEventTypes();for(var t in e.Gestures.gestures)e.Gestures.gestures.hasOwnProperty(t)&&e.Gestures.detection.register(e.Gestures.gestures[t]);e.Gestures.event.onTouch(e.Gestures.DOCUMENT,e.Gestures.EVENT_MOVE,e.Gestures.detection.detect),e.Gestures.event.onTouch(e.Gestures.DOCUMENT,e.Gestures.EVENT_END,e.Gestures.detection.detect),e.Gestures.READY=!0}}e.Gesture=function(t,n){return new e.Gestures.Instance(t,n||{})},e.Gestures={},e.Gestures.defaults={stop_browser_behavior:"disable-user-behavior"},e.Gestures.HAS_POINTEREVENTS=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,e.Gestures.HAS_TOUCHEVENTS="ontouchstart"in window,e.Gestures.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,e.Gestures.NO_MOUSEEVENTS=e.Gestures.HAS_TOUCHEVENTS&&window.navigator.userAgent.match(e.Gestures.MOBILE_REGEX),e.Gestures.EVENT_TYPES={},e.Gestures.DIRECTION_DOWN="down",e.Gestures.DIRECTION_LEFT="left",e.Gestures.DIRECTION_UP="up",e.Gestures.DIRECTION_RIGHT="right",e.Gestures.POINTER_MOUSE="mouse",e.Gestures.POINTER_TOUCH="touch",e.Gestures.POINTER_PEN="pen",e.Gestures.EVENT_START="start",e.Gestures.EVENT_MOVE="move",e.Gestures.EVENT_END="end",e.Gestures.DOCUMENT=window.document,e.Gestures.plugins={},e.Gestures.READY=!1,e.Gestures.Instance=function(n,i){var r=this;if(null!==n)return t(),this.element=n,this.enabled=!0,this.options=e.Gestures.utils.extend(e.Gestures.utils.extend({},e.Gestures.defaults),i||{}),this.options.stop_browser_behavior&&e.Gestures.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),e.Gestures.event.onTouch(n,e.Gestures.EVENT_START,function(t){r.enabled&&e.Gestures.detection.startDetect(r,t)}),this},e.Gestures.Instance.prototype={on:function(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)this.element.addEventListener(n[i],t,!1);return this},off:function(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)this.element.removeEventListener(n[i],t,!1);return this},trigger:function(t,n){var i=e.Gestures.DOCUMENT.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n;var r=this.element;return e.Gestures.utils.hasParent(n.target,r)&&(r=n.target),r.dispatchEvent(i),this},enable:function(e){return this.enabled=e,this}};var n=null,i=!1,r=!1;e.Gestures.event={bindDom:function(e,t,n){for(var i=t.split(" "),r=0;r<i.length;r++)e.addEventListener(i[r],n,!1)},onTouch:function(t,o,s){var a=this;this.bindDom(t,e.Gestures.EVENT_TYPES[o],function(l){var c=l.type.toLowerCase();if(!c.match(/mouse/)||!r){c.match(/touch/)||c.match(/pointerdown/)||c.match(/mouse/)&&1===l.which?i=!0:c.match(/mouse/)&&1!==l.which&&(i=!1),c.match(/touch|pointer/)&&(r=!0);var u=0;i&&(e.Gestures.HAS_POINTEREVENTS&&o!=e.Gestures.EVENT_END?u=e.Gestures.PointerEvent.updatePointer(o,l):c.match(/touch/)?u=l.touches.length:r||(u=c.match(/up/)?0:1),u>0&&o==e.Gestures.EVENT_END?o=e.Gestures.EVENT_MOVE:u||(o=e.Gestures.EVENT_END),(u||null===n)&&(n=l),s.call(e.Gestures.detection,a.collectEventData(t,o,a.getTouchList(n,o),l)),e.Gestures.HAS_POINTEREVENTS&&o==e.Gestures.EVENT_END&&(u=e.Gestures.PointerEvent.updatePointer(o,l))),u||(n=null,i=!1,r=!1,e.Gestures.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=e.Gestures.HAS_POINTEREVENTS?e.Gestures.PointerEvent.getEvents():e.Gestures.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],e.Gestures.EVENT_TYPES[e.Gestures.EVENT_START]=t[0],e.Gestures.EVENT_TYPES[e.Gestures.EVENT_MOVE]=t[1],e.Gestures.EVENT_TYPES[e.Gestures.EVENT_END]=t[2]},getTouchList:function(t){return e.Gestures.HAS_POINTEREVENTS?e.Gestures.PointerEvent.getTouchList():t.touches?t.touches:(t.identifier=1,[t])},collectEventData:function(t,n,i,r){var o=e.Gestures.POINTER_TOUCH;return(r.type.match(/mouse/)||e.Gestures.PointerEvent.matchType(e.Gestures.POINTER_MOUSE,r))&&(o=e.Gestures.POINTER_MOUSE),{center:e.Gestures.utils.getCenter(i),timeStamp:(new Date).getTime(),target:r.target,touches:i,eventType:n,pointerType:o,srcEvent:r,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return e.Gestures.detection.stopDetect()}}}},e.Gestures.PointerEvent={pointers:{},getTouchList:function(){var e=this,t=[];return Object.keys(e.pointers).sort().forEach(function(n){t.push(e.pointers[n])}),t},updatePointer:function(t,n){return t==e.Gestures.EVENT_END?this.pointers={}:(n.identifier=n.pointerId,this.pointers[n.pointerId]=n),Object.keys(this.pointers).length},matchType:function(t,n){if(!n.pointerType)return!1;var i={};return i[e.Gestures.POINTER_MOUSE]=n.pointerType==n.MSPOINTER_TYPE_MOUSE||n.pointerType==e.Gestures.POINTER_MOUSE,i[e.Gestures.POINTER_TOUCH]=n.pointerType==n.MSPOINTER_TYPE_TOUCH||n.pointerType==e.Gestures.POINTER_TOUCH,i[e.Gestures.POINTER_PEN]=n.pointerType==n.MSPOINTER_TYPE_PEN||n.pointerType==e.Gestures.POINTER_PEN,i[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},e.Gestures.utils={extend:function(e,t,n){for(var i in t)void 0!==e[i]&&n||(e[i]=t[i]);return e},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){for(var t=[],n=[],i=0,r=e.length;r>i;i++)t.push(e[i].pageX),n.push(e[i].pageY);return{pageX:(Math.min.apply(Math,t)+Math.max.apply(Math,t))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.pageY-e.pageY,i=t.pageX-e.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,n){var i=Math.abs(t.pageX-n.pageX),r=Math.abs(t.pageY-n.pageY);return i>=r?t.pageX-n.pageX>0?e.Gestures.DIRECTION_LEFT:e.Gestures.DIRECTION_RIGHT:t.pageY-n.pageY>0?e.Gestures.DIRECTION_UP:e.Gestures.DIRECTION_DOWN},getDistance:function(e,t){var n=t.pageX-e.pageX,i=t.pageY-e.pageY;return Math.sqrt(n*n+i*i)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(t){return t==e.Gestures.DIRECTION_UP||t==e.Gestures.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(e,t){e&&e.classList&&(e.classList.add(t),e.onselectstart=function(){return!1})}},e.Gestures.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,n){this.current||(this.stopped=!1,this.current={inst:t,startEvent:e.Gestures.utils.extend({},n),lastEvent:!1,name:""},this.detect(n))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);for(var n=this.current.inst.options,i=0,r=this.gestures.length;r>i;i++){var o=this.gestures[i];if(!this.stopped&&n[o.name]!==!1&&o.handler.call(o,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==e.Gestures.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=e.Gestures.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var n=this.current.startEvent;if(n&&(t.touches.length!=n.touches.length||t.touches===n.touches)){n.touches=[];for(var i=0,r=t.touches.length;r>i;i++)n.touches.push(e.Gestures.utils.extend({},t.touches[i]))}var o=t.timeStamp-n.timeStamp,s=t.center.pageX-n.center.pageX,a=t.center.pageY-n.center.pageY,l=e.Gestures.utils.getVelocity(o,s,a);return e.Gestures.utils.extend(t,{deltaTime:o,deltaX:s,deltaY:a,velocityX:l.x,velocityY:l.y,distance:e.Gestures.utils.getDistance(n.center,t.center),angle:e.Gestures.utils.getAngle(n.center,t.center),direction:e.Gestures.utils.getDirection(n.center,t.center),scale:e.Gestures.utils.getScale(n.touches,t.touches),rotation:e.Gestures.utils.getRotation(n.touches,t.touches),startEvent:n}),t},register:function(t){var n=t.defaults||{};return void 0===n[t.name]&&(n[t.name]=!0),e.Gestures.utils.extend(e.Gestures.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},e.Gestures.gestures=e.Gestures.gestures||{},e.Gestures.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,n){switch(t.eventType){case e.Gestures.EVENT_START:clearTimeout(this.timer),e.Gestures.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==e.Gestures.detection.current.name&&(e.tap.cancelClick(),n.trigger("hold",t))},n.options.hold_timeout);break;case e.Gestures.EVENT_MOVE:t.distance>n.options.hold_threshold&&clearTimeout(this.timer);break;case e.Gestures.EVENT_END:clearTimeout(this.timer)}}},e.Gestures.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,n){if(t.eventType==e.Gestures.EVENT_END&&"touchcancel"!=t.srcEvent.type){var i=e.Gestures.detection.previous,r=!1;if(t.deltaTime>n.options.tap_max_touchtime||t.distance>n.options.tap_max_distance)return;i&&"tap"==i.name&&t.timeStamp-i.lastEvent.timeStamp<n.options.doubletap_interval&&t.distance<n.options.doubletap_distance&&(n.trigger("doubletap",t),r=!0),(!r||n.options.tap_always)&&(e.Gestures.detection.current.name="tap",n.trigger("tap",t))}}},e.Gestures.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,n){if(t.eventType==e.Gestures.EVENT_END){if(n.options.swipe_max_touches>0&&t.touches.length>n.options.swipe_max_touches)return;(t.velocityX>n.options.swipe_velocity||t.velocityY>n.options.swipe_velocity)&&(n.trigger(this.name,t),n.trigger(this.name+t.direction,t))}}},e.Gestures.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!0,drag_block_vertical:!0,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,n){if(e.Gestures.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),void(this.triggered=!1);if(!(n.options.drag_max_touches>0&&t.touches.length>n.options.drag_max_touches))switch(t.eventType){case e.Gestures.EVENT_START:this.triggered=!1;break;case e.Gestures.EVENT_MOVE:if(t.distance<n.options.drag_min_distance&&e.Gestures.detection.current.name!=this.name)return;if(e.Gestures.detection.current.name!=this.name&&(e.Gestures.detection.current.name=this.name,n.options.correct_for_drag_min_distance)){var i=Math.abs(n.options.drag_min_distance/t.distance);e.Gestures.detection.current.startEvent.center.pageX+=t.deltaX*i,e.Gestures.detection.current.startEvent.center.pageY+=t.deltaY*i,t=e.Gestures.detection.extendEventData(t)}(e.Gestures.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var r=e.Gestures.detection.current.lastEvent.direction;t.drag_locked_to_axis&&r!==t.direction&&(t.direction=e.Gestures.utils.isVertical(r)?t.deltaY<0?e.Gestures.DIRECTION_UP:e.Gestures.DIRECTION_DOWN:t.deltaX<0?e.Gestures.DIRECTION_LEFT:e.Gestures.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),n.trigger(this.name+t.direction,t),(n.options.drag_block_vertical&&e.Gestures.utils.isVertical(t.direction)||n.options.drag_block_horizontal&&!e.Gestures.utils.isVertical(t.direction))&&t.preventDefault();break;case e.Gestures.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},e.Gestures.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,n){if(e.Gestures.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),void(this.triggered=!1);if(!(t.touches.length<2))switch(n.options.transform_always_block&&t.preventDefault(),t.eventType){case e.Gestures.EVENT_START:this.triggered=!1;break;case e.Gestures.EVENT_MOVE:var i=Math.abs(1-t.scale),r=Math.abs(t.rotation);if(i<n.options.transform_min_scale&&r<n.options.transform_min_rotation)return;e.Gestures.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),r>n.options.transform_min_rotation&&n.trigger("rotate",t),i>n.options.transform_min_scale&&(n.trigger("pinch",t),n.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case e.Gestures.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},e.Gestures.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,n){return n.options.prevent_mouseevents&&t.pointerType==e.Gestures.POINTER_MOUSE?void t.stopDetect():(n.options.prevent_default&&t.preventDefault(),void(t.eventType==e.Gestures.EVENT_START&&n.trigger(this.name,t)))}},e.Gestures.gestures.Release={name:"release",index:1/0,handler:function(t,n){t.eventType==e.Gestures.EVENT_END&&n.trigger(this.name,t)}}}(window.ionic),function(e,t,n){function i(){n.Platform.isWebView()?t.addEventListener("deviceready",r,!1):r(),l&&e.removeEventListener("load",i,!1)}function r(){n.Platform.isReady=!0,n.Platform.detect();for(var e=0;e<h.length;e++)h[e]();h=[],n.trigger("platformready",{target:t}),n.requestAnimationFrame(function(){t.body.classList.add("platform-ready")})}var o="ios",s="android",a="windowsphone";n.Platform={navigator:e.navigator,isReady:!1,isFullScreen:!1,platforms:null,grade:null,ua:navigator.userAgent,ready:function(e){this.isReady?e():h.push(e)},detect:function(){n.Platform._checkPlatforms(),n.requestAnimationFrame(function(){for(var e=0;e<n.Platform.platforms.length;e++)t.body.classList.add("platform-"+n.Platform.platforms[e])})},setGrade:function(e){var i=this.grade;this.grade=e,n.requestAnimationFrame(function(){i&&t.body.classList.remove("grade-"+i),t.body.classList.add("grade-"+e)})},device:function(){return e.device||{}},_checkPlatforms:function(){this.platforms=[];var e="a";this.isWebView()?(this.platforms.push("webview"),this.platforms.push("cordova")):this.platforms.push("browser"),this.isIPad()&&this.platforms.push("ipad");var t=this.platform();if(t){this.platforms.push(t);var n=this.version();if(n){var i=n.toString();i.indexOf(".")>0?i=i.replace(".","_"):i+="_0",this.platforms.push(t+i.split("_")[0]),this.platforms.push(t+i),this.isAndroid()&&4.4>n?e=4>n?"c":"b":this.isWindowsPhone()&&(e="b")}}this.setGrade(e)},isWebView:function(){return!(!e.cordova&&!e.PhoneGap&&!e.phonegap)},isIPad:function(){return/iPad/i.test(n.Platform.navigator.platform)?!0:/iPad/i.test(this.ua)},isIOS:function(){return this.is(o)},isAndroid:function(){return this.is(s)},isWindowsPhone:function(){return this.is(a)},platform:function(){return null===c&&this.setPlatform(this.device().platform),c},setPlatform:function(e){c="undefined"!=typeof e&&null!==e&&e.length?e.toLowerCase():this.ua.indexOf("Android")>0?s:this.ua.indexOf("iPhone")>-1||this.ua.indexOf("iPad")>-1||this.ua.indexOf("iPod")>-1?o:this.ua.indexOf("Windows Phone")>-1?a:n.Platform.navigator.platform&&navigator.platform.toLowerCase().split(" ")[0]||""},version:function(){return null===u&&this.setVersion(this.device().version),u},setVersion:function(e){if("undefined"!=typeof e&&null!==e&&(e=e.split("."),e=parseFloat(e[0]+"."+(e.length>1?e[1]:0)),!isNaN(e)))return void(u=e);u=0;var t=this.platform(),n={android:/Android (\d+).(\d+)?/,ios:/OS (\d+)_(\d+)?/,windowsphone:/Windows Phone (\d+).(\d+)?/};n[t]&&(e=this.ua.match(n[t]),e&&e.length>2&&(u=parseFloat(e[1]+"."+e[2])))},is:function(e){if(e=e.toLowerCase(),this.platforms)for(var t=0;t<this.platforms.length;t++)if(this.platforms[t]===e)return!0;var n=this.platform();return n?n===e.toLowerCase():this.ua.toLowerCase().indexOf(e)>=0},exitApp:function(){this.ready(function(){navigator.app&&navigator.app.exitApp&&navigator.app.exitApp()})},showStatusBar:function(i){this._showStatusBar=i,this.ready(function(){n.requestAnimationFrame(function(){n.Platform._showStatusBar?(e.StatusBar&&e.StatusBar.show(),t.body.classList.remove("status-bar-hide")):(e.StatusBar&&e.StatusBar.hide(),t.body.classList.add("status-bar-hide"))})})},fullScreen:function(e,i){this.isFullScreen=e!==!1,n.DomUtil.ready(function(){n.requestAnimationFrame(function(){panes=t.getElementsByClassName("pane");for(var e=0;e<panes.length;e++)panes[e].style.height=panes[e].offsetHeight+"px";n.Platform.isFullScreen?t.body.classList.add("fullscreen"):t.body.classList.remove("fullscreen")}),n.Platform.showStatusBar(i===!0)})}};var l,c=null,u=null,h=[];"complete"===t.readyState?i():(l=!0,e.addEventListener("load",i,!1)),e.addEventListener("load",i,!1)}(this,document,ionic),function(e,t){"use strict";t.CSS={},function(){var n,i=["webkitTransform","transform","-webkit-transform","webkit-transform","-moz-transform","moz-transform","MozTransform","mozTransform","msTransform"];for(n=0;n<i.length;n++)if(void 0!==e.documentElement.style[i[n]]){t.CSS.TRANSFORM=i[n];break}for(i=["webkitTransition","mozTransition","msTransition","transition"],n=0;n<i.length;n++)if(void 0!==e.documentElement.style[i[n]]){t.CSS.TRANSITION=i[n];break}}(),"classList"in e.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){function e(e){return function(){var n,i=t.className.split(/\s+/);for(n=0;n<arguments.length;n++)e(i,i.indexOf(arguments[n]),arguments[n]);t.className=i.join(" ")}}var t=this;return{add:e(function(e,t,n){~t||e.push(n)}),remove:e(function(e,t){~t&&e.splice(t,1)}),toggle:e(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:function(e){return!!~t.className.split(/\s+/).indexOf(e)},item:function(e){return t.className.split(/\s+/)[e]||null}}}})}(document,ionic);var k,Y,X,H,z,F,W,q,U="touchmove",B=6,Z=50,j={click:i,mousedown:r,mouseup:o,mousemove:s,touchstart:a,touchend:l,touchcancel:u,touchmove:c,pointerdown:a,pointerup:l,pointercancel:u,pointermove:c,MSPointerDown:a,MSPointerUp:l,MSPointerCancel:u,MSPointerMove:c,focusin:p,focusout:m};ionic.tap={register:function(t){return k=t,e("click",!0,!0),e("mouseup"),e("mousedown"),window.navigator.pointerEnabled?(e("pointerdown"),e("pointerup"),e("pointcancel"),U="pointermove"):window.navigator.msPointerEnabled?(e("MSPointerDown"),e("MSPointerUp"),e("MSPointerCancel"),U="MSPointerMove"):(e("touchstart"),e("touchend"),e("touchcancel")),e("focusin"),e("focusout"),function(){for(var t in j)e(t,!1);k=null,Y=null,X=!1,z=!1,F=null}},ignoreScrollStart:function(e){return e.defaultPrevented||/^(file|range)$/i.test(e.target.type)||"true"==(e.target.dataset?e.target.dataset.preventScroll:e.target.getAttribute("data-prevent-scroll"))||!!/^(object|embed)$/i.test(e.target.tagName)||ionic.tap.isElementTapDisabled(e.target)},isTextInput:function(e){return!!e&&("TEXTAREA"==e.tagName||"true"===e.contentEditable||"INPUT"==e.tagName&&!/^(radio|checkbox|range|file|submit|reset)$/i.test(e.type))},isDateInput:function(e){return!!e&&"INPUT"==e.tagName&&/^(date|time|datetime-local|month|week)$/i.test(e.type)},isLabelWithTextInput:function(e){var t=T(e,!1);return!!t&&ionic.tap.isTextInput(E(t))},containsOrIsTextInput:function(e){return ionic.tap.isTextInput(e)||ionic.tap.isLabelWithTextInput(e)},cloneFocusedInput:function(e){ionic.tap.hasCheckedClone||(ionic.tap.hasCheckedClone=!0,ionic.requestAnimationFrame(function(){var t=e.querySelector(":focus");if(ionic.tap.isTextInput(t)){var n=t.parentElement.querySelector(".cloned-text-input");n||(n=document.createElement(t.tagName),n.placeholder=t.placeholder,n.type=t.type,n.value=t.value,n.style=t.style,n.className=t.className,n.classList.add("cloned-text-input"),n.readOnly=!0,t.isContentEditable&&(n.contentEditable=t.contentEditable,n.innerHTML=t.innerHTML),t.parentElement.insertBefore(n,t),t.style.top=t.offsetTop,t.classList.add("previous-input-focus"))}}))},hasCheckedClone:!1,removeClonedInputs:function(e){ionic.tap.hasCheckedClone=!1,ionic.requestAnimationFrame(function(){var t,n=e.querySelectorAll(".cloned-text-input"),i=e.querySelectorAll(".previous-input-focus");for(t=0;t<n.length;t++)n[t].parentElement.removeChild(n[t]);for(t=0;t<i.length;t++)i[t].classList.remove("previous-input-focus"),i[t].style.top="",i[t].focus()})},requiresNativeClick:function(e){return!e||e.disabled||/^(file|range)$/i.test(e.type)||/^(object|video)$/i.test(e.tagName)||ionic.tap.isLabelContainingFileInput(e)?!0:ionic.tap.isElementTapDisabled(e)},isLabelContainingFileInput:function(e){var t=T(e);if("LABEL"!==t.tagName)return!1;var n=t.querySelector("input[type=file]");return n&&n.disabled===!1?!0:!1},isElementTapDisabled:function(e){if(e&&1===e.nodeType)for(var t=e;t;){if("true"==(t.dataset?t.dataset.tapDisabled:t.getAttribute("data-tap-disabled")))return!0;t=t.parentElement}return!1},setTolerance:function(e,t){B=e,Z=t},cancelClick:function(){z=!0},pointerCoord:function(e){var t={x:0,y:0};if(e){var n=e.touches&&e.touches.length?e.touches:[e],i=e.changedTouches&&e.changedTouches[0]||n[0];i&&(t.x=i.clientX||i.pageX||0,t.y=i.clientY||i.pageY||0)}return t}},ionic.DomUtil.ready(function(){var e="undefined"!=typeof angular?angular:null;(!e||e&&!e.scenario)&&ionic.tap.register(document)}),function(e,t){"use strict";function n(){o={},t.requestAnimationFrame(r)}function i(){for(var e in o)o[e]&&(o[e].classList.add(l),s[e]=o[e]);o={}}function r(){for(var e in s)s[e]&&(s[e].classList.remove(l),delete s[e])}var o={},s={},a=0,l="activated";t.activator={start:function(e){var n=this;t.requestAnimationFrame(function(){if(!t.tap.requiresNativeClick(e.target)){for(var r,s=e.target,l=0;6>l&&(s&&1===s.nodeType);l++){if(r&&s.classList.contains("item")){r=s;break}if("A"==s.tagName||"BUTTON"==s.tagName||s.hasAttribute("ng-click")){r=s;
break}if(s.classList.contains("button")){r=s;break}if(s.classList.contains("pane")||"BODY"==s.tagName||"ION-CONTENT"==s.tagName)break;s=s.parentElement}r&&(o[a]=r,"touchstart"===e.type?n._activateTimeout=setTimeout(i,80):t.requestAnimationFrame(i),a=a>19?0:a+1)}})},end:function(){clearTimeout(this._activateTimeout),setTimeout(n,200)}}}(document,ionic),function(e){var t=["0","0","0"];e.Utils={arrayMove:function(e,t,n){if(n>=e.length)for(var i=n-e.length;i--+1;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e},proxy:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))}},debounce:function(e,t,n){var i,r,o,s,a;return function(){o=this,r=arguments,s=new Date;var l=function(){var c=new Date-s;t>c?i=setTimeout(l,t-c):(i=null,n||(a=e.apply(o,r)))},c=n&&!i;return i||(i=setTimeout(l,t)),c&&(a=e.apply(o,r)),a}},throttle:function(e,t,n){var i,r,o,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:Date.now(),s=null,o=e.apply(i,r)};return function(){var c=Date.now();a||n.leading!==!1||(a=c);var u=t-(c-a);return i=this,r=arguments,0>=u?(clearTimeout(s),s=null,a=c,o=e.apply(i,r)):s||n.trailing===!1||(s=setTimeout(l,u)),o}},inherit:function(t,n){var i,r=this;i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return r.apply(this,arguments)},e.extend(i,r,n);var o=function(){this.constructor=i};return o.prototype=r.prototype,i.prototype=new o,t&&e.extend(i.prototype,t),i.__super__=r.prototype,i},extend:function(e){for(var t=Array.prototype.slice.call(arguments,1),n=0;n<t.length;n++){var i=t[n];if(i)for(var r in i)e[r]=i[r]}return e},nextUid:function(){for(var e,n=t.length;n;){if(n--,e=t[n].charCodeAt(0),57==e)return t[n]="A",t.join("");if(90!=e)return t[n]=String.fromCharCode(e+1),t.join("");t[n]="0"}return t.unshift("0"),t.join("")}},e.inherit=e.Utils.inherit,e.extend=e.Utils.extend,e.throttle=e.Utils.throttle,e.proxy=e.Utils.proxy,e.debounce=e.Utils.debounce}(window.ionic);var $,K,J,Q,et=C(),tt=0,nt="keyboard-open",it="scroll";ionic.keyboard={isOpen:!1,height:null,landscape:!1,hide:function(){clearTimeout(J),clearTimeout(K),clearTimeout(Q),ionic.keyboard.isOpen=!1,ionic.trigger("resetScrollView",{target:$},!0),ionic.requestAnimationFrame(function(){document.body.classList.remove(nt)}),window.navigator.msPointerEnabled?document.removeEventListener("MSPointerMove",N):document.removeEventListener("touchmove",N),document.removeEventListener("keydown",M),A()&&cordova.plugins.Keyboard.close()},show:function(){A()&&cordova.plugins.Keyboard.show()}},ionic.Platform.ready(function(){x(),setTimeout(x,999),window.navigator.msPointerEnabled?document.addEventListener("MSPointerDown",S,!1):document.addEventListener("touchstart",S,!1)});var rt,ot={};ionic.viewport={orientation:function(){return window.innerWidth>window.innerHeight?90:0}},ionic.Platform.ready(function(){O(),window.addEventListener("orientationchange",function(){setTimeout(R,1e3)},!1)}),function(e){"use strict";e.views.View=function(){this.initialize.apply(this,arguments)},e.views.View.inherit=e.inherit,e.extend(e.views.View.prototype,{initialize:function(){}})}(window.ionic);var st={effect:{}};!function(e){var t=Date.now||function(){return+new Date},n=60,i=1e3,r={},o=1;st.effect.Animate={requestAnimationFrame:function(){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame,n=!!t;if(t&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString())&&(n=!1),n)return function(e,n){t(e,n)};var i=60,r={},o=0,s=1,a=null,l=+new Date;return function(e){var t=s++;return r[t]=e,o++,null===a&&(a=setInterval(function(){var e=+new Date,t=r;r={},o=0;for(var n in t)t.hasOwnProperty(n)&&(t[n](e),l=e);e-l>2500&&(clearInterval(a),a=null)},1e3/i)),t}}(),stop:function(e){var t=null!=r[e];return t&&(r[e]=null),t},isRunning:function(e){return null!=r[e]},start:function(e,s,a,l,c,u){var h=t(),d=h,_=0,f=0,p=o++;if(u||(u=document.body),p%20===0){var m={};for(var g in r)m[g]=!0;r=m}var v=function(o){var m=o!==!0,g=t();if(!r[p]||s&&!s(p))return r[p]=null,void(a&&a(n-f/((g-h)/i),p,!1));if(m)for(var T=Math.round((g-d)/(i/n))-1,E=0;E<Math.min(T,4);E++)v(!0),f++;l&&(_=(g-h)/l,_>1&&(_=1));var S=c?c(_):_;e(S,g,m)!==!1&&1!==_||!m?m&&(d=g,st.effect.Animate.requestAnimationFrame(v,u)):(r[p]=null,a&&a(n-f/((g-h)/i),p,1===_||null==l))};return r[p]=!0,st.effect.Animate.requestAnimationFrame(v,u),p}}}(this);!function(e){var t=function(){},n=function(e){return Math.pow(e-1,3)+1},i=function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)};e.views.Scroll=e.views.View.inherit({initialize:function(n){var i=this;this.__container=n.el,this.__content=n.el.firstElementChild,setTimeout(function(){i.__container&&i.__content&&(i.__container.scrollTop=0,i.__content.scrollTop=0)}),this.options={scrollingX:!1,scrollbarX:!0,scrollingY:!0,scrollbarY:!0,startX:0,startY:0,wheelDampen:6,minScrollbarSizeX:5,minScrollbarSizeY:5,scrollbarsFade:!0,scrollbarFadeDelay:300,scrollbarResizeFadeDelay:1e3,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,deceleration:.97,scrollingComplete:t,penetrationDeceleration:.03,penetrationAcceleration:.08,scrollEventInterval:10,getContentWidth:function(){return Math.max(i.__content.scrollWidth,i.__content.offsetWidth)},getContentHeight:function(){return Math.max(i.__content.scrollHeight,i.__content.offsetHeight+2*i.__content.offsetTop)}};for(var r in n)this.options[r]=n[r];this.hintResize=e.debounce(function(){i.resize()},1e3,!0),this.onScroll=function(){e.scroll.isScrolling?(clearTimeout(i.scrollTimer),i.scrollTimer=setTimeout(i.setScrollStop,80)):setTimeout(i.setScrollStart,50)},this.setScrollStart=function(){e.scroll.isScrolling=Math.abs(e.scroll.lastTop-i.__scrollTop)>1,clearTimeout(i.scrollTimer),i.scrollTimer=setTimeout(i.setScrollStop,80)},this.setScrollStop=function(){e.scroll.isScrolling=!1,e.scroll.lastTop=i.__scrollTop},this.triggerScrollEvent=e.throttle(function(){i.onScroll(),e.trigger("scroll",{scrollTop:i.__scrollTop,scrollLeft:i.__scrollLeft,target:i.__container})},this.options.scrollEventInterval),this.triggerScrollEndEvent=function(){e.trigger("scrollend",{scrollTop:i.__scrollTop,scrollLeft:i.__scrollLeft,target:i.__container})},this.__scrollLeft=this.options.startX,this.__scrollTop=this.options.startY,this.__callback=this.getRenderFn(),this.__initEventHandlers(),this.__createScrollbars()},run:function(){this.resize(),this.__fadeScrollbars("out",this.options.scrollbarResizeFadeDelay)},__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,__transformProperty:null,__perspectiveProperty:null,__indicatorX:null,__indicatorY:null,__scrollbarFadeTimeout:null,__didWaitForSize:null,__sizerTimeout:null,__initEventHandlers:function(){function t(e){return e.touches&&e.touches.length?e.touches:[{pageX:e.pageX,pageY:e.pageY}]}var n=this,i=this.__container;if(n.scrollChildIntoView=function(t){var r;if(!n.isScrolledIntoView){if(e.Platform.isIOS()||e.Platform.isFullScreen){r=i.getBoundingClientRect().bottom;var o=t.detail.viewportHeight-r,s=Math.max(0,t.detail.keyboardHeight-o);i.style.height=i.clientHeight-s+"px",i.style.overflow="visible",n.resize()}n.isScrolledIntoView=!0}if(t.detail.isElementUnderKeyboard){var a;a=e.Platform.isAndroid()&&!e.Platform.isFullScreen?e.Platform.version()<4.4?500:350:80,e.scroll.isScrolling=!0,setTimeout(function(){var o=.5*i.clientHeight;r=i.getBoundingClientRect().bottom;var s=t.detail.elementTop-r,a=s+o;a>0&&(e.tap.cloneFocusedInput(i,n),n.scrollBy(0,a,!0),n.onScroll())},a)}t.stopPropagation()},n.resetScrollView=function(){n.isScrolledIntoView&&(n.isScrolledIntoView=!1,i.style.height="",i.style.overflow="",n.resize(),e.scroll.isScrolling=!1)},i.addEventListener("scrollChildIntoView",n.scrollChildIntoView),i.addEventListener("resetScrollView",n.resetScrollView),n.touchStart=function(i){if(n.startCoordinates=e.tap.pointerCoord(i),!e.tap.ignoreScrollStart(i)){if(n.__isDown=!0,e.tap.containsOrIsTextInput(i.target)||"SELECT"===i.target.tagName)return void(n.__hasStarted=!1);n.__isSelectable=!0,n.__enableScrollY=!0,n.__hasStarted=!0,n.doTouchStart(t(i),i.timeStamp),i.preventDefault()}},n.touchMove=function(r){if(!(!n.__isDown||r.defaultPrevented||"TEXTAREA"===r.target.tagName&&r.target.parentElement.querySelector(":focus"))){if(!n.__hasStarted&&(e.tap.containsOrIsTextInput(r.target)||"SELECT"===r.target.tagName))return n.__hasStarted=!0,n.doTouchStart(t(r),r.timeStamp),void r.preventDefault();if(n.startCoordinates){var o=e.tap.pointerCoord(r);n.__isSelectable&&e.tap.isTextInput(r.target)&&Math.abs(n.startCoordinates.x-o.x)>20&&(n.__enableScrollY=!1,n.__isSelectable=!0),n.__enableScrollY&&Math.abs(n.startCoordinates.y-o.y)>10&&(n.__isSelectable=!1,e.tap.cloneFocusedInput(i,n))}n.doTouchMove(t(r),r.timeStamp,r.scale),n.__isDown=!0}},n.touchEnd=function(t){n.__isDown&&(n.doTouchEnd(t.timeStamp),n.__isDown=!1,n.__hasStarted=!1,n.__isSelectable=!0,n.__enableScrollY=!0,n.__isDragging||n.__isDecelerating||n.__isAnimating||e.tap.removeClonedInputs(i,n))},"ontouchstart"in window)i.addEventListener("touchstart",n.touchStart,!1),document.addEventListener("touchmove",n.touchMove,!1),document.addEventListener("touchend",n.touchEnd,!1),document.addEventListener("touchcancel",n.touchEnd,!1);else if(window.navigator.pointerEnabled)i.addEventListener("pointerdown",n.touchStart,!1),document.addEventListener("pointermove",n.touchMove,!1),document.addEventListener("pointerup",n.touchEnd,!1),document.addEventListener("pointercancel",n.touchEnd,!1);else if(window.navigator.msPointerEnabled)i.addEventListener("MSPointerDown",n.touchStart,!1),document.addEventListener("MSPointerMove",n.touchMove,!1),document.addEventListener("MSPointerUp",n.touchEnd,!1),document.addEventListener("MSPointerCancel",n.touchEnd,!1);else{var r=!1;n.mouseDown=function(i){e.tap.ignoreScrollStart(i)||"SELECT"===i.target.tagName||(n.doTouchStart(t(i),i.timeStamp),e.tap.isTextInput(i.target)||i.preventDefault(),r=!0)},n.mouseMove=function(e){r&&!e.defaultPrevented&&(n.doTouchMove(t(e),e.timeStamp),r=!0)},n.mouseUp=function(e){r&&(n.doTouchEnd(e.timeStamp),r=!1)},n.mouseWheel=e.animationFrameThrottle(function(t){var i=e.DomUtil.getParentOrSelfWithClass(t.target,"ionic-scroll");i===n.__container&&(n.hintResize(),n.scrollBy(t.wheelDeltaX/n.options.wheelDampen,-t.wheelDeltaY/n.options.wheelDampen),n.__fadeScrollbars("in"),clearTimeout(n.__wheelHideBarTimeout),n.__wheelHideBarTimeout=setTimeout(function(){n.__fadeScrollbars("out")},100))}),i.addEventListener("mousedown",n.mouseDown,!1),document.addEventListener("mousemove",n.mouseMove,!1),document.addEventListener("mouseup",n.mouseUp,!1),document.addEventListener("mousewheel",n.mouseWheel,!1)}},__cleanup:function(){var t=this.__container,n=this;t.removeEventListener("touchstart",n.touchStart),document.removeEventListener("touchmove",n.touchMove),document.removeEventListener("touchend",n.touchEnd),document.removeEventListener("touchcancel",n.touchCancel),t.removeEventListener("pointerdown",n.touchStart),document.removeEventListener("pointermove",n.touchMove),document.removeEventListener("pointerup",n.touchEnd),document.removeEventListener("pointercancel",n.touchEnd),t.removeEventListener("MSPointerDown",n.touchStart),document.removeEventListener("MSPointerMove",n.touchMove),document.removeEventListener("MSPointerUp",n.touchEnd),document.removeEventListener("MSPointerCancel",n.touchEnd),t.removeEventListener("mousedown",n.mouseDown),document.removeEventListener("mousemove",n.mouseMove),document.removeEventListener("mouseup",n.mouseUp),document.removeEventListener("mousewheel",n.mouseWheel),t.removeEventListener("scrollChildIntoView",n.scrollChildIntoView),t.removeEventListener("resetScrollView",n.resetScrollView),e.tap.removeClonedInputs(t,n),delete this.__container,delete this.__content,delete this.__indicatorX,delete this.__indicatorY,delete this.options.el,this.__callback=this.scrollChildIntoView=this.resetScrollView=angular.noop,this.mouseMove=this.mouseDown=this.mouseUp=this.mouseWheel=this.touchStart=this.touchMove=this.touchEnd=this.touchCancel=angular.noop,this.resize=this.scrollTo=this.zoomTo=this.__scrollingComplete=angular.noop,t=null},__createScrollbar:function(e){var t=document.createElement("div"),n=document.createElement("div");return n.className="scroll-bar-indicator scroll-bar-fade-out",t.className="h"==e?"scroll-bar scroll-bar-h":"scroll-bar scroll-bar-v",t.appendChild(n),t},__createScrollbars:function(){var e,t;this.options.scrollingX&&(e={el:this.__createScrollbar("h"),sizeRatio:1},e.indicator=e.el.children[0],this.options.scrollbarX&&this.__container.appendChild(e.el),this.__indicatorX=e),this.options.scrollingY&&(t={el:this.__createScrollbar("v"),sizeRatio:1},t.indicator=t.el.children[0],this.options.scrollbarY&&this.__container.appendChild(t.el),this.__indicatorY=t)},__resizeScrollbars:function(){var e=this;if(e.__indicatorX){var t=Math.max(Math.round(e.__clientWidth*e.__clientWidth/e.__contentWidth),20);t>e.__contentWidth&&(t=0),e.__indicatorX.size=t,e.__indicatorX.minScale=this.options.minScrollbarSizeX/t,e.__indicatorX.indicator.style.width=t+"px",e.__indicatorX.maxPos=e.__clientWidth-t,e.__indicatorX.sizeRatio=e.__maxScrollLeft?e.__indicatorX.maxPos/e.__maxScrollLeft:1}if(e.__indicatorY){var n=Math.max(Math.round(e.__clientHeight*e.__clientHeight/e.__contentHeight),20);n>e.__contentHeight&&(n=0),e.__indicatorY.size=n,e.__indicatorY.minScale=this.options.minScrollbarSizeY/n,e.__indicatorY.maxPos=e.__clientHeight-n,e.__indicatorY.indicator.style.height=n+"px",e.__indicatorY.sizeRatio=e.__maxScrollTop?e.__indicatorY.maxPos/e.__maxScrollTop:1}},__repositionScrollbars:function(){var e,t,n,i,r,o=this,s=0,a=0;o.__indicatorX&&(o.__indicatorY&&(s=10),i=Math.round(o.__indicatorX.sizeRatio*o.__scrollLeft)||0,t=o.__scrollLeft-(o.__maxScrollLeft-s),o.__scrollLeft<0?(widthScale=Math.max(o.__indicatorX.minScale,(o.__indicatorX.size-Math.abs(o.__scrollLeft))/o.__indicatorX.size),i=0,o.__indicatorX.indicator.style[o.__transformOriginProperty]="left center"):t>0?(widthScale=Math.max(o.__indicatorX.minScale,(o.__indicatorX.size-t)/o.__indicatorX.size),i=o.__indicatorX.maxPos-s,o.__indicatorX.indicator.style[o.__transformOriginProperty]="right center"):(i=Math.min(o.__maxScrollLeft,Math.max(0,i)),widthScale=1),o.__indicatorX.indicator.style[o.__transformProperty]="translate3d("+i+"px, 0, 0) scaleX("+widthScale+")"),o.__indicatorY&&(r=Math.round(o.__indicatorY.sizeRatio*o.__scrollTop)||0,o.__indicatorX&&(a=10),n=o.__scrollTop-(o.__maxScrollTop-a),o.__scrollTop<0?(e=Math.max(o.__indicatorY.minScale,(o.__indicatorY.size-Math.abs(o.__scrollTop))/o.__indicatorY.size),r=0,o.__indicatorY.indicator.style[o.__transformOriginProperty]="center top"):n>0?(e=Math.max(o.__indicatorY.minScale,(o.__indicatorY.size-n)/o.__indicatorY.size),r=o.__indicatorY.maxPos-a,o.__indicatorY.indicator.style[o.__transformOriginProperty]="center bottom"):(r=Math.min(o.__maxScrollTop,Math.max(0,r)),e=1),o.__indicatorY.indicator.style[o.__transformProperty]="translate3d(0,"+r+"px, 0) scaleY("+e+")")},__fadeScrollbars:function(e,t){var n=this;if(this.options.scrollbarsFade){var i="scroll-bar-fade-out";n.options.scrollbarsFade===!0&&(clearTimeout(n.__scrollbarFadeTimeout),"in"==e?(n.__indicatorX&&n.__indicatorX.indicator.classList.remove(i),n.__indicatorY&&n.__indicatorY.indicator.classList.remove(i)):n.__scrollbarFadeTimeout=setTimeout(function(){n.__indicatorX&&n.__indicatorX.indicator.classList.add(i),n.__indicatorY&&n.__indicatorY.indicator.classList.add(i)},t||n.options.scrollbarFadeDelay))}},__scrollingComplete:function(){var t=this;t.options.scrollingComplete(),e.tap.removeClonedInputs(t.__container,t),t.__fadeScrollbars("out")},resize:function(){this.__container&&this.options&&this.setDimensions(this.__container.clientWidth,this.__container.clientHeight,this.options.getContentWidth(),this.options.getContentHeight())},getRenderFn:function(){var e,t=this,n=this.__content,i=document.documentElement.style;"MozAppearance"in i?e="gecko":"WebkitAppearance"in i?e="webkit":"string"==typeof navigator.cpuClass&&(e="trident");var r,o={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[e],s=document.createElement("div"),a=o+"Perspective",l=o+"Transform",c=o+"TransformOrigin";return t.__perspectiveProperty=l,t.__transformProperty=l,t.__transformOriginProperty=c,s.style[a]!==r?function(e,i,r,o){n.style[l]="translate3d("+-e+"px,"+-i+"px,0) scale("+r+")",t.__repositionScrollbars(),o||t.triggerScrollEvent()}:s.style[l]!==r?function(e,i,r,o){n.style[l]="translate("+-e+"px,"+-i+"px) scale("+r+")",t.__repositionScrollbars(),o||t.triggerScrollEvent()}:function(e,i,r,o){n.style.marginLeft=e?-e/r+"px":"",n.style.marginTop=i?-i/r+"px":"",n.style.zoom=r||"",t.__repositionScrollbars(),o||t.triggerScrollEvent()}},setDimensions:function(e,t,n,i){var r=this;e===+e&&(r.__clientWidth=e),t===+t&&(r.__clientHeight=t),n===+n&&(r.__contentWidth=n),i===+i&&(r.__contentHeight=i),r.__computeScrollMax(),r.__resizeScrollbars(),r.scrollTo(r.__scrollLeft,r.__scrollTop,!0,null,!0)},setPosition:function(e,t){var n=this;n.__clientLeft=e||0,n.__clientTop=t||0},setSnapSize:function(e,t){var n=this;n.__snapWidth=e,n.__snapHeight=t},activatePullToRefresh:function(t,n,i,r,o,s,a){var l=this;l.__refreshHeight=t,l.__refreshActivate=function(){e.requestAnimationFrame(n)},l.__refreshDeactivate=function(){e.requestAnimationFrame(i)},l.__refreshStart=function(){e.requestAnimationFrame(r)},l.__refreshShow=function(){e.requestAnimationFrame(o)},l.__refreshHide=function(){e.requestAnimationFrame(s)},l.__refreshTail=function(){e.requestAnimationFrame(a)},l.__refreshTailTime=100,l.__minSpinTime=600},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0);var e=new Date;self.refreshStartTime=e.getTime(),this.__refreshStart&&this.__refreshStart()},finishPullToRefresh:function(){var e=this,t=new Date,n=0;e.refreshStartTime+e.__minSpinTime>t.getTime()&&(n=e.refreshStartTime+e.__minSpinTime-t.getTime()),setTimeout(function(){e.__refreshTail&&e.__refreshTail(),setTimeout(function(){e.__refreshActive=!1,e.__refreshDeactivate&&e.__refreshDeactivate(),e.scrollTo(e.__scrollLeft,e.__scrollTop,!0)},e.__refreshTailTime)},n)},getValues:function(){var e=this;return{left:e.__scrollLeft,top:e.__scrollTop,zoom:e.__zoomLevel}},getScrollMax:function(){var e=this;return{left:e.__maxScrollLeft,top:e.__maxScrollTop}},zoomTo:function(e,t,n,i){var r=this;if(!r.options.zooming)throw new Error("Zooming is not enabled!");r.__isDecelerating&&(st.effect.Animate.stop(r.__isDecelerating),r.__isDecelerating=!1);var o=r.__zoomLevel;null==n&&(n=r.__clientWidth/2),null==i&&(i=r.__clientHeight/2),e=Math.max(Math.min(e,r.options.maxZoom),r.options.minZoom),r.__computeScrollMax(e);var s=(n+r.__scrollLeft)*e/o-n,a=(i+r.__scrollTop)*e/o-i;s>r.__maxScrollLeft?s=r.__maxScrollLeft:0>s&&(s=0),a>r.__maxScrollTop?a=r.__maxScrollTop:0>a&&(a=0),r.__publish(s,a,e,t)},zoomBy:function(e,t,n,i){var r=this;r.zoomTo(r.__zoomLevel*e,t,n,i)},scrollTo:function(e,t,n,i,r){var o=this;if(o.__isDecelerating&&(st.effect.Animate.stop(o.__isDecelerating),o.__isDecelerating=!1),null!=i&&i!==o.__zoomLevel){if(!o.options.zooming)throw new Error("Zooming is not enabled!");e*=i,t*=i,o.__computeScrollMax(i)}else i=o.__zoomLevel;o.options.scrollingX?o.options.paging?e=Math.round(e/o.__clientWidth)*o.__clientWidth:o.options.snapping&&(e=Math.round(e/o.__snapWidth)*o.__snapWidth):e=o.__scrollLeft,o.options.scrollingY?o.options.paging?t=Math.round(t/o.__clientHeight)*o.__clientHeight:o.options.snapping&&(t=Math.round(t/o.__snapHeight)*o.__snapHeight):t=o.__scrollTop,e=Math.max(Math.min(o.__maxScrollLeft,e),0),t=Math.max(Math.min(o.__maxScrollTop,t),0),e===o.__scrollLeft&&t===o.__scrollTop&&(n=!1),o.__publish(e,t,i,n,r)},scrollBy:function(e,t,n){var i=this,r=i.__isAnimating?i.__scheduledLeft:i.__scrollLeft,o=i.__isAnimating?i.__scheduledTop:i.__scrollTop;i.scrollTo(r+(e||0),o+(t||0),n)},doMouseZoom:function(e,t,n,i){var r=this,o=e>0?.97:1.03;return r.zoomTo(r.__zoomLevel*o,!1,n-r.__clientLeft,i-r.__clientTop)},doTouchStart:function(e,t){this.hintResize(),t instanceof Date&&(t=t.valueOf()),"number"!=typeof t&&(t=Date.now());var n=this;n.__interruptedAnimation=!0,n.__isDecelerating&&(st.effect.Animate.stop(n.__isDecelerating),n.__isDecelerating=!1,n.__interruptedAnimation=!0),n.__isAnimating&&(st.effect.Animate.stop(n.__isAnimating),n.__isAnimating=!1,n.__interruptedAnimation=!0);var i,r,o=1===e.length;o?(i=e[0].pageX,r=e[0].pageY):(i=Math.abs(e[0].pageX+e[1].pageX)/2,r=Math.abs(e[0].pageY+e[1].pageY)/2),n.__initialTouchLeft=i,n.__initialTouchTop=r,n.__initialTouches=e,n.__zoomLevelStart=n.__zoomLevel,n.__lastTouchLeft=i,n.__lastTouchTop=r,n.__lastTouchMove=t,n.__lastScale=1,n.__enableScrollX=!o&&n.options.scrollingX,n.__enableScrollY=!o&&n.options.scrollingY,n.__isTracking=!0,n.__didDecelerationComplete=!1,n.__isDragging=!o,n.__isSingleTouch=o,n.__positions=[]},doTouchMove:function(e,t,n){t instanceof Date&&(t=t.valueOf()),"number"!=typeof t&&(t=Date.now());var i=this;if(i.__isTracking){var r,o;2===e.length?(r=Math.abs(e[0].pageX+e[1].pageX)/2,o=Math.abs(e[0].pageY+e[1].pageY)/2,!n&&i.options.zooming&&(n=i.__getScale(i.__initialTouches,e))):(r=e[0].pageX,o=e[0].pageY);var s=i.__positions;if(i.__isDragging){var a=r-i.__lastTouchLeft,l=o-i.__lastTouchTop,c=i.__scrollLeft,u=i.__scrollTop,h=i.__zoomLevel;if(null!=n&&i.options.zooming){var d=h;if(h=h/i.__lastScale*n,h=Math.max(Math.min(h,i.options.maxZoom),i.options.minZoom),d!==h){var _=r-i.__clientLeft,f=o-i.__clientTop;c=(_+c)*h/d-_,u=(f+u)*h/d-f,i.__computeScrollMax(h)}}if(i.__enableScrollX){c-=a*this.options.speedMultiplier;var p=i.__maxScrollLeft;(c>p||0>c)&&(i.options.bouncing?c+=a/2*this.options.speedMultiplier:c=c>p?p:0)}if(i.__enableScrollY){u-=l*this.options.speedMultiplier;var m=i.__maxScrollTop;u>m||0>u?i.options.bouncing||i.__refreshHeight&&0>u?(u+=l/2*this.options.speedMultiplier,i.__enableScrollX||null==i.__refreshHeight||(0>u?(i.__refreshHidden=!1,i.__refreshShow()):(i.__refreshHide(),i.__refreshHidden=!0),!i.__refreshActive&&u<=-i.__refreshHeight?(i.__refreshActive=!0,i.__refreshActivate&&i.__refreshActivate()):i.__refreshActive&&u>-i.__refreshHeight&&(i.__refreshActive=!1,i.__refreshDeactivate&&i.__refreshDeactivate()))):u=u>m?m:0:i.__refreshHeight&&!i.__refreshHidden&&(i.__refreshHide(),i.__refreshHidden=!0)}s.length>60&&s.splice(0,30),s.push(c,u,t),i.__publish(c,u,h)}else{var g=i.options.locking?3:0,v=5,T=Math.abs(r-i.__initialTouchLeft),E=Math.abs(o-i.__initialTouchTop);i.__enableScrollX=i.options.scrollingX&&T>=g,i.__enableScrollY=i.options.scrollingY&&E>=g,s.push(i.__scrollLeft,i.__scrollTop,t),i.__isDragging=(i.__enableScrollX||i.__enableScrollY)&&(T>=v||E>=v),i.__isDragging&&(i.__interruptedAnimation=!1,i.__fadeScrollbars("in"))}i.__lastTouchLeft=r,i.__lastTouchTop=o,i.__lastTouchMove=t,i.__lastScale=n}},doTouchEnd:function(t){t instanceof Date&&(t=t.valueOf()),"number"!=typeof t&&(t=Date.now());var n=this;if(n.__isTracking){if(n.__isTracking=!1,n.__isDragging)if(n.__isDragging=!1,n.__isSingleTouch&&n.options.animating&&t-n.__lastTouchMove<=100){for(var i=n.__positions,r=i.length-1,o=r,s=r;s>0&&i[s]>n.__lastTouchMove-100;s-=3)o=s;if(o!==r){var a=i[r]-i[o],l=n.__scrollLeft-i[o-2],c=n.__scrollTop-i[o-1];n.__decelerationVelocityX=l/a*(1e3/60),n.__decelerationVelocityY=c/a*(1e3/60);var u=n.options.paging||n.options.snapping?4:1;(Math.abs(n.__decelerationVelocityX)>u||Math.abs(n.__decelerationVelocityY)>u)&&(n.__refreshActive||n.__startDeceleration(t))}else n.__scrollingComplete()}else t-n.__lastTouchMove>100&&n.__scrollingComplete();if(!n.__isDecelerating)if(n.__refreshActive&&n.__refreshStart){n.__publish(n.__scrollLeft,-n.__refreshHeight,n.__zoomLevel,!0);var h=new Date;n.refreshStartTime=h.getTime(),n.__refreshStart&&n.__refreshStart(),e.Platform.isAndroid()||n.__startDeceleration()}else(n.__interruptedAnimation||n.__isDragging)&&n.__scrollingComplete(),n.scrollTo(n.__scrollLeft,n.__scrollTop,!0,n.__zoomLevel),n.__refreshActive&&(n.__refreshActive=!1,n.__refreshDeactivate&&n.__refreshDeactivate());n.__positions.length=0}},__publish:function(e,t,r,o,s){var a=this,l=a.__isAnimating;if(l&&(st.effect.Animate.stop(l),a.__isAnimating=!1),o&&a.options.animating){a.__scheduledLeft=e,a.__scheduledTop=t,a.__scheduledZoom=r;var c=a.__scrollLeft,u=a.__scrollTop,h=a.__zoomLevel,d=e-c,_=t-u,f=r-h,p=function(e,t,n){n&&(a.__scrollLeft=c+d*e,a.__scrollTop=u+_*e,a.__zoomLevel=h+f*e,a.__callback&&a.__callback(a.__scrollLeft,a.__scrollTop,a.__zoomLevel,s))},m=function(e){return a.__isAnimating===e},g=function(e,t,n){t===a.__isAnimating&&(a.__isAnimating=!1),(a.__didDecelerationComplete||n)&&a.__scrollingComplete(),a.options.zooming&&a.__computeScrollMax()};a.__isAnimating=st.effect.Animate.start(p,m,g,a.options.animationDuration,l?n:i)}else a.__scheduledLeft=a.__scrollLeft=e,a.__scheduledTop=a.__scrollTop=t,a.__scheduledZoom=a.__zoomLevel=r,a.__callback&&a.__callback(e,t,r,s),a.options.zooming&&a.__computeScrollMax()},__computeScrollMax:function(e){var t=this;null==e&&(e=t.__zoomLevel),t.__maxScrollLeft=Math.max(t.__contentWidth*e-t.__clientWidth,0),t.__maxScrollTop=Math.max(t.__contentHeight*e-t.__clientHeight,0),t.__didWaitForSize||t.__maxScrollLeft||t.__maxScrollTop||(t.__didWaitForSize=!0,t.__waitForSize())},__waitForSize:function(){var e=this;clearTimeout(e.__sizerTimeout);var t=function(){e.resize(),e.options.scrollingX&&!e.__maxScrollLeft||e.options.scrollingY&&!e.__maxScrollTop};t(),e.__sizerTimeout=setTimeout(t,1e3)},__startDeceleration:function(){var e=this;if(e.options.paging){var t=Math.max(Math.min(e.__scrollLeft,e.__maxScrollLeft),0),n=Math.max(Math.min(e.__scrollTop,e.__maxScrollTop),0),i=e.__clientWidth,r=e.__clientHeight;e.__minDecelerationScrollLeft=Math.floor(t/i)*i,e.__minDecelerationScrollTop=Math.floor(n/r)*r,e.__maxDecelerationScrollLeft=Math.ceil(t/i)*i,e.__maxDecelerationScrollTop=Math.ceil(n/r)*r}else e.__minDecelerationScrollLeft=0,e.__minDecelerationScrollTop=0,e.__maxDecelerationScrollLeft=e.__maxScrollLeft,e.__maxDecelerationScrollTop=e.__maxScrollTop,e.__refreshActive&&(e.__minDecelerationScrollTop=-1*e.__refreshHeight);var o=function(t,n,i){e.__stepThroughDeceleration(i)};e.__minVelocityToKeepDecelerating=e.options.snapping?4:.1;var s=function(){var t=Math.abs(e.__decelerationVelocityX)>=e.__minVelocityToKeepDecelerating||Math.abs(e.__decelerationVelocityY)>=e.__minVelocityToKeepDecelerating;return t||(e.__didDecelerationComplete=!0,e.options.bouncing&&!e.__refreshActive&&e.scrollTo(Math.min(Math.max(e.__scrollLeft,0),e.__maxScrollLeft),Math.min(Math.max(e.__scrollTop,0),e.__maxScrollTop),e.__refreshActive)),t},a=function(){e.__isDecelerating=!1,e.__didDecelerationComplete&&e.__scrollingComplete(),e.options.paging&&e.scrollTo(e.__scrollLeft,e.__scrollTop,e.options.snapping)};e.__isDecelerating=st.effect.Animate.start(o,s,a)},__stepThroughDeceleration:function(e){var t=this,n=t.__scrollLeft+t.__decelerationVelocityX,i=t.__scrollTop+t.__decelerationVelocityY;if(!t.options.bouncing){var r=Math.max(Math.min(t.__maxDecelerationScrollLeft,n),t.__minDecelerationScrollLeft);r!==n&&(n=r,t.__decelerationVelocityX=0);var o=Math.max(Math.min(t.__maxDecelerationScrollTop,i),t.__minDecelerationScrollTop);o!==i&&(i=o,t.__decelerationVelocityY=0)}if(e?t.__publish(n,i,t.__zoomLevel):(t.__scrollLeft=n,t.__scrollTop=i),!t.options.paging){var s=t.options.deceleration;t.__decelerationVelocityX*=s,t.__decelerationVelocityY*=s}if(t.options.bouncing){var a=0,l=0,c=t.options.penetrationDeceleration,u=t.options.penetrationAcceleration;if(n<t.__minDecelerationScrollLeft?a=t.__minDecelerationScrollLeft-n:n>t.__maxDecelerationScrollLeft&&(a=t.__maxDecelerationScrollLeft-n),i<t.__minDecelerationScrollTop?l=t.__minDecelerationScrollTop-i:i>t.__maxDecelerationScrollTop&&(l=t.__maxDecelerationScrollTop-i),0!==a){var h=a*t.__decelerationVelocityX<=t.__minDecelerationScrollLeft;h&&(t.__decelerationVelocityX+=a*c);var d=Math.abs(t.__decelerationVelocityX)<=t.__minVelocityToKeepDecelerating;(!h||d)&&(t.__decelerationVelocityX=a*u)}if(0!==l){var _=l*t.__decelerationVelocityY<=t.__minDecelerationScrollTop;_&&(t.__decelerationVelocityY+=l*c);var f=Math.abs(t.__decelerationVelocityY)<=t.__minVelocityToKeepDecelerating;(!_||f)&&(t.__decelerationVelocityY=l*u)}}},__getDistance:function(e,t){var n=t.pageX-e.pageX,i=t.pageY-e.pageY;return Math.sqrt(n*n+i*i)},__getScale:function(e,t){var n=this;return e.length>=2&&t.length>=2?n.__getDistance(t[0],t[1])/n.__getDistance(e[0],e[1]):1}}),e.scroll={isScrolling:!1,lastTop:0}}(ionic),function(e){"use strict";e.views.HeaderBar=e.views.View.inherit({initialize:function(t){this.el=t.el,e.extend(this,{alignTitle:"center"},t),this.align()},align:function(t){t||(t=this.alignTitle);var n=this.el.querySelector(".title");if(n){var i=this;e.requestAnimationFrame(function(){var r,o,s,a=i.el.childNodes,l=0,c=0,u=!1;for(r=0;r<a.length;r++)if(o=a[r],o.tagName&&"h1"==o.tagName.toLowerCase())u=!0;else{if(s=null,3==o.nodeType){var h=e.DomUtil.getTextBounds(o);h&&(s=h.width)}else 1==o.nodeType&&(s=o.offsetWidth);s&&(u?c+=s:l+=s)}var d=Math.max(l,c)+10;n.style.left=n.style.right="","center"==t?(d>10&&(n.style.left=d+"px",n.style.right=d+"px"),n.offsetWidth<n.scrollWidth&&c>0&&(n.style.right=c+5+"px")):"left"==t?(n.classList.add("title-left"),l>0&&(n.style.left=l+15+"px")):"right"==t&&(n.classList.add("title-right"),c>0&&(n.style.right=c+15+"px"))})}}})}(ionic),function(e){"use strict";var t="item",n="item-content",i="item-sliding",r="item-options",o="item-placeholder",s="item-reordering",a="item-reorder",l=function(){};l.prototype={start:function(){},drag:function(){},end:function(){},isSameItem:function(){return!1}};var c=function(e){this.dragThresholdX=e.dragThresholdX||10,this.el=e.el,this.canSwipe=e.canSwipe};c.prototype=new l,c.prototype.start=function(o){var s,a,l,c;this.canSwipe()&&(s=o.target.classList.contains(n)?o.target:o.target.classList.contains(t)?o.target.querySelector("."+n):e.DomUtil.getParentWithClass(o.target,n),s&&(s.classList.remove(i),l=parseFloat(s.style[e.CSS.TRANSFORM].replace("translate3d(","").split(",")[0])||0,a=s.parentNode.querySelector("."+r),a&&(a.classList.remove("invisible"),c=a.offsetWidth,this._currentDrag={buttons:a,buttonsWidth:c,content:s,startOffsetX:l})))},c.prototype.isSameItem=function(e){return e._lastDrag&&this._currentDrag?this._currentDrag.content==e._lastDrag.content:!1},c.prototype.clean=function(){var t=this._lastDrag;t&&(t.content.style[e.CSS.TRANSITION]="",t.content.style[e.CSS.TRANSFORM]="",e.requestAnimationFrame(function(){setTimeout(function(){t.buttons&&t.buttons.classList.add("invisible")},250)}))},c.prototype.drag=e.animationFrameThrottle(function(t){var n;if(this._currentDrag&&(!this._isDragging&&(Math.abs(t.gesture.deltaX)>this.dragThresholdX||Math.abs(this._currentDrag.startOffsetX)>0)&&(this._isDragging=!0),this._isDragging)){n=this._currentDrag.buttonsWidth;var i=Math.min(0,this._currentDrag.startOffsetX+t.gesture.deltaX);-n>i&&(i=Math.min(-n,-n+.4*(t.gesture.deltaX+n))),this._currentDrag.content.style[e.CSS.TRANSFORM]="translate3d("+i+"px, 0, 0)",this._currentDrag.content.style[e.CSS.TRANSITION]="none"
}}),c.prototype.end=function(t,n){var i=this;if(!this._currentDrag)return void(n&&n());var r=-this._currentDrag.buttonsWidth;t.gesture.deltaX>-(this._currentDrag.buttonsWidth/2)&&("left"==t.gesture.direction&&Math.abs(t.gesture.velocityX)<.3?r=0:"right"==t.gesture.direction&&(r=0)),e.requestAnimationFrame(function(){if(0===r){i._currentDrag.content.style[e.CSS.TRANSFORM]="";var t=i._currentDrag.buttons;setTimeout(function(){t&&t.classList.add("invisible")},250)}else i._currentDrag.content.style[e.CSS.TRANSFORM]="translate3d("+r+"px, 0, 0)";i._currentDrag.content.style[e.CSS.TRANSITION]="",i._lastDrag=i._currentDrag,i._currentDrag=null,n&&n()})};var u=function(e){if(this.dragThresholdY=e.dragThresholdY||0,this.onReorder=e.onReorder,this.listEl=e.listEl,this.el=e.el,this.scrollEl=e.scrollEl,this.scrollView=e.scrollView,this.listElTrueTop=0,this.listEl.offsetParent){var t=this.listEl;do this.listElTrueTop+=t.offsetTop,t=t.offsetParent;while(t)}};u.prototype=new l,u.prototype._moveElement=function(t){var n=t.gesture.center.pageY+this.scrollView.getValues().top-this._currentDrag.elementHeight/2-this.listElTrueTop;this.el.style[e.CSS.TRANSFORM]="translate3d(0, "+n+"px, 0)"},u.prototype.start=function(t){var n=e.DomUtil.getChildIndex(this.el,this.el.nodeName.toLowerCase()),i=this.el.scrollHeight,r=this.el.cloneNode(!0);r.classList.add(o),this.el.parentNode.insertBefore(r,this.el),this.el.classList.add(s),this._currentDrag={elementHeight:i,startIndex:n,placeholder:r,scrollHeight:scroll,list:r.parentNode},this._moveElement(t)},u.prototype.drag=e.animationFrameThrottle(function(t){var n=this;if(this._currentDrag){var i=0,r=t.gesture.center.pageY,o=this.listElTrueTop;if(this.scrollView){var s=this.scrollView.__container;i=this.scrollView.getValues().top;var a=s.offsetTop,l=a-r+this._currentDrag.elementHeight/2,c=r+this._currentDrag.elementHeight/2-a-s.offsetHeight;t.gesture.deltaY<0&&l>0&&i>0&&(this.scrollView.scrollBy(null,-l),e.requestAnimationFrame(function(){n.drag(t)})),t.gesture.deltaY>0&&c>0&&i<this.scrollView.getScrollMax().top&&(this.scrollView.scrollBy(null,c),e.requestAnimationFrame(function(){n.drag(t)}))}!this._isDragging&&Math.abs(t.gesture.deltaY)>this.dragThresholdY&&(this._isDragging=!0),this._isDragging&&(this._moveElement(t),this._currentDrag.currentY=i+r-o)}}),u.prototype._getReorderIndex=function(){for(var e,t=this,n=(this._currentDrag.placeholder,Array.prototype.slice.call(this._currentDrag.placeholder.parentNode.children).filter(function(e){return e.nodeName===t.el.nodeName&&e!==t.el})),i=this._currentDrag.currentY,r=0,o=n.length;o>r;r++)if(e=n[r],r===o-1){if(i>e.offsetTop)return r}else if(0===r){if(i<e.offsetTop+e.offsetHeight)return r}else if(i>e.offsetTop-e.offsetHeight/2&&i<e.offsetTop+e.offsetHeight)return r;return this._currentDrag.startIndex},u.prototype.end=function(t,n){if(!this._currentDrag)return void(n&&n());var i=this._currentDrag.placeholder,r=this._getReorderIndex();this.el.classList.remove(s),this.el.style[e.CSS.TRANSFORM]="",i.parentNode.insertBefore(this.el,i),i.parentNode.removeChild(i),this.onReorder&&this.onReorder(this.el,this._currentDrag.startIndex,r),this._currentDrag=null,n&&n()},e.views.ListView=e.views.View.inherit({initialize:function(t){var n=this;t=e.extend({onReorder:function(){},virtualRemoveThreshold:-200,virtualAddThreshold:200,canSwipe:function(){return!0}},t),e.extend(this,t),!this.itemHeight&&this.listEl&&(this.itemHeight=this.listEl.children[0]&&parseInt(this.listEl.children[0].style.height,10)),this.onRefresh=t.onRefresh||function(){},this.onRefreshOpening=t.onRefreshOpening||function(){},this.onRefreshHolding=t.onRefreshHolding||function(){},window.ionic.onGesture("release",function(e){n._handleEndDrag(e)},this.el),window.ionic.onGesture("drag",function(e){n._handleDrag(e)},this.el),this._initDrag()},stopRefreshing:function(){var e=this.el.querySelector(".list-refresher");e.style.height="0px"},didScroll:function(e){if(this.isVirtual){var t=this.itemHeight,n=(this.listEl.children.length,e.target.scrollHeight),i=this.el.parentNode.offsetHeight,r=(e.scrollTop,Math.max(0,e.scrollTop+this.virtualRemoveThreshold)),o=Math.min(n,Math.abs(e.scrollTop)+i+this.virtualAddThreshold),s=Math.floor((o-r)/t),a=parseInt(Math.abs(r/t),10),l=parseInt(Math.abs(o/t),10);this._virtualItemsToRemove=Array.prototype.slice.call(this.listEl.children,0,a);{Array.prototype.slice.call(this.listEl.children,a,a+s)}this.renderViewport&&this.renderViewport(r,o,a,l)}},didStopScrolling:function(){if(this.isVirtual)for(var e=0;e<this._virtualItemsToRemove.length;e++){{this._virtualItemsToRemove[e]}this.didHideItem&&this.didHideItem(e)}},clearDragEffects:function(){this._lastDragOp&&(this._lastDragOp.clean&&this._lastDragOp.clean(),this._lastDragOp=null)},_initDrag:function(){this._lastDragOp=this._dragOp,this._dragOp=null},_getItem:function(e){for(;e;){if(e.classList&&e.classList.contains(t))return e;e=e.parentNode}return null},_startDrag:function(t){var n=this;this._isDragging=!1;var i,r=this._lastDragOp;!e.DomUtil.getParentOrSelfWithClass(t.target,a)||"up"!=t.gesture.direction&&"down"!=t.gesture.direction?!this._didDragUpOrDown&&("left"==t.gesture.direction||"right"==t.gesture.direction)&&Math.abs(t.gesture.deltaX)>5&&(i=this._getItem(t.target),i&&i.querySelector(".item-options")&&(this._dragOp=new c({el:this.el,canSwipe:this.canSwipe}),this._dragOp.start(t),t.preventDefault())):(i=this._getItem(t.target),i&&(this._dragOp=new u({listEl:this.el,el:i,scrollEl:this.scrollEl,scrollView:this.scrollView,onReorder:function(e,t,i){n.onReorder&&n.onReorder(e,t,i)}}),this._dragOp.start(t),t.preventDefault())),r&&this._dragOp&&!this._dragOp.isSameItem(r)&&t.defaultPrevented&&r.clean&&r.clean()},_handleEndDrag:function(e){var t=this;this._didDragUpOrDown=!1,this._dragOp&&this._dragOp.end(e,function(){t._initDrag()})},_handleDrag:function(e){Math.abs(e.gesture.deltaY)>5&&(this._didDragUpOrDown=!0),this.isDragging||this._dragOp||this._startDrag(e),this._dragOp&&(e.gesture.srcEvent.preventDefault(),this._dragOp.drag(e))}})}(ionic),function(e){"use strict";e.views.Modal=e.views.View.inherit({initialize:function(t){t=e.extend({focusFirstInput:!1,unfocusOnHide:!0,focusFirstDelay:600,backdropClickToClose:!0,hardwareBackButtonClose:!0},t),e.extend(this,t),this.el=t.el},show:function(){var e=this;e.focusFirstInput&&window.setTimeout(function(){var t=e.el.querySelector("input, textarea");t&&t.focus&&t.focus()},e.focusFirstDelay)},hide:function(){if(this.unfocusOnHide){var e=this.el.querySelectorAll("input, textarea");window.setTimeout(function(){for(var t=0;t<e.length;t++)e[t].blur&&e[t].blur()})}}})}(ionic),function(e){"use strict";e.views.SideMenu=e.views.View.inherit({initialize:function(e){this.el=e.el,this.isEnabled="undefined"==typeof e.isEnabled?!0:e.isEnabled,this.setWidth(e.width)},getFullWidth:function(){return this.width},setWidth:function(e){this.width=e,this.el.style.width=e+"px"},setIsEnabled:function(e){this.isEnabled=e},bringUp:function(){"0"!==this.el.style.zIndex&&(this.el.style.zIndex="0")},pushDown:function(){"-1"!==this.el.style.zIndex&&(this.el.style.zIndex="-1")}}),e.views.SideMenuContent=e.views.View.inherit({initialize:function(t){e.extend(this,{animationClass:"menu-animated",onDrag:function(){},onEndDrag:function(){}},t),e.onGesture("drag",e.proxy(this._onDrag,this),this.el),e.onGesture("release",e.proxy(this._onEndDrag,this),this.el)},_onDrag:function(e){this.onDrag&&this.onDrag(e)},_onEndDrag:function(e){this.onEndDrag&&this.onEndDrag(e)},disableAnimation:function(){this.el.classList.remove(this.animationClass)},enableAnimation:function(){this.el.classList.add(this.animationClass)},getTranslateX:function(){return parseFloat(this.el.style[e.CSS.TRANSFORM].replace("translate3d(","").split(",")[0])},setTranslateX:e.animationFrameThrottle(function(t){this.el.style[e.CSS.TRANSFORM]="translate3d("+t+"px, 0, 0)"})})}(ionic),function(e){"use strict";e.views.Slider=e.views.View.inherit({initialize:function(e){function t(){m=E.children,T=m.length,m.length<2&&(e.continuous=!1),f.transitions&&e.continuous&&m.length<3&&(E.appendChild(m[0].cloneNode(!0)),E.appendChild(E.children[1].cloneNode(!0)),m=E.children),g=new Array(m.length),v=p.offsetWidth||p.getBoundingClientRect().width,E.style.width=m.length*v+"px";for(var t=m.length;t--;){var n=m[t];n.style.width=v+"px",n.setAttribute("data-index",t),f.transitions&&(n.style.left=t*-v+"px",s(t,S>t?-v:t>S?v:0,0))}e.continuous&&f.transitions&&(s(r(S-1),-v,0),s(r(S+1),v,0)),f.transitions||(E.style.left=S*-v+"px"),p.style.visibility="visible",e.slidesChanged&&e.slidesChanged()}function n(){e.continuous?o(S-1):S&&o(S-1)}function i(){e.continuous?o(S+1):S<m.length-1&&o(S+1)}function r(e){return(m.length+e%m.length)%m.length}function o(t,n){if(S!=t){if(f.transitions){var i=Math.abs(S-t)/(S-t);if(e.continuous){var o=i;i=-g[r(t)]/v,i!==o&&(t=-i*m.length+t)}for(var a=Math.abs(S-t)-1;a--;)s(r((t>S?t:S)-a-1),v*i,0);t=r(t),s(S,v*i,n||w),s(t,0,n||w),e.continuous&&s(r(t-i),-(v*i),0)}else t=r(t),l(S*-v,t*-v,n||w);S=t,_(e.callback&&e.callback(S,m[S]))}}function s(e,t,n){a(e,t,n),g[e]=t}function a(e,t,n){var i=m[e],r=i&&i.style;r&&(r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=n+"ms",r.webkitTransform="translate("+t+"px,0)translateZ(0)",r.msTransform=r.MozTransform=r.OTransform="translateX("+t+"px)")}function l(t,n,i){if(!i)return void(E.style.left=n+"px");var r=+new Date,o=setInterval(function(){var s=+new Date-r;return s>i?(E.style.left=n+"px",D&&c(),e.transitionEnd&&e.transitionEnd.call(event,S,m[S]),void clearInterval(o)):void(E.style.left=(n-t)*(Math.floor(s/i*100)/100)+t+"px")},4)}function c(){b=setTimeout(i,D)}function u(){D=e.auto||0,clearTimeout(b)}var h=this,d=function(){},_=function(e){setTimeout(e||d,0)},f={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(e){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in t)if(void 0!==e.style[t[n]])return!0;return!1}(document.createElement("swipe"))},p=e.el;if(p){var m,g,v,T,E=p.children[0];e=e||{};var S=parseInt(e.startSlide,10)||0,w=e.speed||300;e.continuous=void 0!==e.continuous?e.continuous:!0;var b,y,D=e.auto||0,L={},x={},M={handleEvent:function(n){switch(("mousedown"==n.type||"mouseup"==n.type||"mousemove"==n.type)&&(n.touches=[{pageX:n.pageX,pageY:n.pageY}]),n.type){case"mousedown":this.start(n);break;case"touchstart":this.start(n);break;case"touchmove":this.touchmove(n);break;case"mousemove":this.touchmove(n);break;case"touchend":_(this.end(n));break;case"mouseup":_(this.end(n));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":_(this.transitionEnd(n));break;case"resize":_(t)}e.stopPropagation&&n.stopPropagation()},start:function(e){var t=e.touches[0];L={x:t.pageX,y:t.pageY,time:+new Date},y=void 0,x={},f.touch?(E.addEventListener("touchmove",this,!1),E.addEventListener("touchend",this,!1)):(E.addEventListener("mousemove",this,!1),E.addEventListener("mouseup",this,!1),document.addEventListener("mouseup",this,!1))},touchmove:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale||h.slideIsDisabled)){e.disableScroll&&t.preventDefault();var n=t.touches[0];x={x:n.pageX-L.x,y:n.pageY-L.y},"undefined"==typeof y&&(y=!!(y||Math.abs(x.x)<Math.abs(x.y))),y||(t.preventDefault(),u(),e.continuous?(a(r(S-1),x.x+g[r(S-1)],0),a(S,x.x+g[S],0),a(r(S+1),x.x+g[r(S+1)],0)):(x.x=x.x/(!S&&x.x>0||S==m.length-1&&x.x<0?Math.abs(x.x)/v+1:1),a(S-1,x.x+g[S-1],0),a(S,x.x+g[S],0),a(S+1,x.x+g[S+1],0)))}},end:function(){var t=+new Date-L.time,n=Number(t)<250&&Math.abs(x.x)>20||Math.abs(x.x)>v/2,i=!S&&x.x>0||S==m.length-1&&x.x<0;e.continuous&&(i=!1);var o=x.x<0;y||(n&&!i?(o?(e.continuous?(s(r(S-1),-v,0),s(r(S+2),v,0)):s(S-1,-v,0),s(S,g[S]-v,w),s(r(S+1),g[r(S+1)]-v,w),S=r(S+1)):(e.continuous?(s(r(S+1),v,0),s(r(S-2),-v,0)):s(S+1,v,0),s(S,g[S]+v,w),s(r(S-1),g[r(S-1)]+v,w),S=r(S-1)),e.callback&&e.callback(S,m[S])):e.continuous?(s(r(S-1),-v,w),s(S,0,w),s(r(S+1),v,w)):(s(S-1,-v,w),s(S,0,w),s(S+1,v,w))),f.touch?(E.removeEventListener("touchmove",M,!1),E.removeEventListener("touchend",M,!1)):(E.removeEventListener("mousemove",M,!1),E.removeEventListener("mouseup",M,!1),document.removeEventListener("mouseup",M,!1))},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==S&&(D&&c(),e.transitionEnd&&e.transitionEnd.call(t,S,m[S]))}};this.update=function(){setTimeout(t)},this.setup=function(){t()},this.enableSlide=function(e){return arguments.length&&(this.slideIsDisabled=!e),!this.slideIsDisabled},this.slide=function(e,t){u(),o(e,t)},this.prev=this.previous=function(){u(),n()},this.next=function(){u(),i()},this.stop=function(){u()},this.start=function(){c()},this.currentIndex=function(){return S},this.slidesCount=function(){return T},this.kill=function(){u(),E.style.width="",E.style.left="";for(var e=m.length;e--;){var t=m[e];t.style.width="",t.style.left="",f.transitions&&a(e,0,0)}f.addEventListener?(E.removeEventListener("touchstart",M,!1),E.removeEventListener("webkitTransitionEnd",M,!1),E.removeEventListener("msTransitionEnd",M,!1),E.removeEventListener("oTransitionEnd",M,!1),E.removeEventListener("otransitionend",M,!1),E.removeEventListener("transitionend",M,!1),window.removeEventListener("resize",M,!1)):window.onresize=null},this.load=function(){t(),D&&c(),f.addEventListener?(f.touch?E.addEventListener("touchstart",M,!1):E.addEventListener("mousedown",M,!1),f.transitions&&(E.addEventListener("webkitTransitionEnd",M,!1),E.addEventListener("msTransitionEnd",M,!1),E.addEventListener("oTransitionEnd",M,!1),E.addEventListener("otransitionend",M,!1),E.addEventListener("transitionend",M,!1)),window.addEventListener("resize",M,!1)):window.onresize=function(){t()}}}}})}(ionic),function(e){"use strict";e.views.Toggle=e.views.View.inherit({initialize:function(t){var n=this;this.el=t.el,this.checkbox=t.checkbox,this.track=t.track,this.handle=t.handle,this.openPercent=-1,this.onChange=t.onChange||function(){},this.triggerThreshold=t.triggerThreshold||20,this.dragStartHandler=function(e){n.dragStart(e)},this.dragHandler=function(e){n.drag(e)},this.holdHandler=function(e){n.hold(e)},this.releaseHandler=function(e){n.release(e)},this.dragStartGesture=e.onGesture("dragstart",this.dragStartHandler,this.el),this.dragGesture=e.onGesture("drag",this.dragHandler,this.el),this.dragHoldGesture=e.onGesture("hold",this.holdHandler,this.el),this.dragReleaseGesture=e.onGesture("release",this.releaseHandler,this.el)},destroy:function(){e.offGesture(this.dragStartGesture,"dragstart",this.dragStartGesture),e.offGesture(this.dragGesture,"drag",this.dragGesture),e.offGesture(this.dragHoldGesture,"hold",this.holdHandler),e.offGesture(this.dragReleaseGesture,"release",this.releaseHandler)},tap:function(){"disabled"!==this.el.getAttribute("disabled")&&this.val(!this.checkbox.checked)},dragStart:function(e){this.checkbox.disabled||(this._dragInfo={width:this.el.offsetWidth,left:this.el.offsetLeft,right:this.el.offsetLeft+this.el.offsetWidth,triggerX:this.el.offsetWidth/2,initialState:this.checkbox.checked},e.gesture.srcEvent.preventDefault(),this.hold(e))},drag:function(t){var n=this;this._dragInfo&&(t.gesture.srcEvent.preventDefault(),e.requestAnimationFrame(function(){if(n._dragInfo){var e=(n.track.offsetLeft+n.handle.offsetWidth/2,n.track.offsetLeft+n.track.offsetWidth-n.handle.offsetWidth/2,t.gesture.deltaX,t.gesture.touches[0].pageX-n._dragInfo.left),i=n._dragInfo.width-n.triggerThreshold;n._dragInfo.initialState?e<n.triggerThreshold?n.setOpenPercent(0):e>n._dragInfo.triggerX&&n.setOpenPercent(100):e<n._dragInfo.triggerX?n.setOpenPercent(0):e>i&&n.setOpenPercent(100)}}))},endDrag:function(){this._dragInfo=null},hold:function(){this.el.classList.add("dragging")},release:function(e){this.el.classList.remove("dragging"),this.endDrag(e)},setOpenPercent:function(t){if(this.openPercent<0||t<this.openPercent-3||t>this.openPercent+3)if(this.openPercent=t,0===t)this.val(!1);else if(100===t)this.val(!0);else{var n=Math.round(t/100*this.track.offsetWidth-this.handle.offsetWidth);n=1>n?0:n,this.handle.style[e.CSS.TRANSFORM]="translate3d("+n+"px,0,0)"}},val:function(t){return(t===!0||t===!1)&&(""!==this.handle.style[e.CSS.TRANSFORM]&&(this.handle.style[e.CSS.TRANSFORM]=""),this.checkbox.checked=t,this.openPercent=t?100:0,this.onChange&&this.onChange()),this.checkbox.checked}})}(ionic)}();
},{}],"/home/codio/workspace/client/scripts/common/controllers/index.js":[function(require,module,exports){
'use strict';

module.exports = function(app) {
    // inject:start
    require('./login')(app);
    require('./newsfeed')(app);
    // inject:end
};
},{"./login":"/home/codio/workspace/client/scripts/common/controllers/login.js","./newsfeed":"/home/codio/workspace/client/scripts/common/controllers/newsfeed.js"}],"/home/codio/workspace/client/scripts/common/controllers/login.js":[function(require,module,exports){
'use strict';
var controllername = 'login';

module.exports = function(app) {
    /*jshint validthis: true */

    var deps = ['facebook'];

    function controller(facebook) {
        var vm = this;
        vm.login = function() {
            facebook.login();
        };
    }

    controller.$inject = deps;
    app.controller(app.name + '.' + controllername, controller);
};
},{}],"/home/codio/workspace/client/scripts/common/controllers/newsfeed.js":[function(require,module,exports){
'use strict';
var controllername = 'newsfeed';
var _ = require('lodash');
module.exports = function(app) {
    /*jshint validthis: true */

    var deps = ['$q', '$rootScope', '$ionicLoading', '$state', 'facebook'];

    function controller($q, $rootScope, $ionicLoading, $state, facebook) {
        var vm = this;
        var activate = function() {
            var deferred = $q.defer();
            $ionicLoading.show({
                template: '<i class="icon ion-loading-c" style="font-size:40px;"></i>',
                animation: 'fade-in',
                showBackdrop: true
            });
            if($rootScope.items) {
                vm.items = $rootScope.items;
                vm.friends = $rootScope.friends;
                $ionicLoading.hide();
                deferred.resolve(vm.items);
            } else {
                vm.items = [];
                vm.friends = [];
                var fields = {
                    'fields': 'full_picture,likes,description,comments,from,story,message,name,created_time'
                };
                facebook.get('/me/home', fields).then(function(res) {
                    vm.items = res.data.data;
                    $rootScope.items = res.data.data;

                    vm.friends = _.chain(vm.items)
                        .map(function(item) {
                            return item.from;
                        })
                        .uniq(function(item) {
                            return item.id;
                        })
                        .value();
                    $rootScope.friends = vm.friends;

                    $ionicLoading.hide();
                    deferred.resolve(vm.items);
                    //$ionicBackdrop.release();
                });
            }
            return deferred.promise;
        };

        activate();

        vm.logout = function() {
            facebook.logout();
            $state.go('login');
        };

        vm.doRefresh = function() {
            delete $rootScope.items;

            activate().
            finally(function() {
                $rootScope.$broadcast('scroll.refreshComplete');
            });
        };
    }

    controller.$inject = deps;
    app.controller(app.name + '.' + controllername, controller);
};
},{"lodash":"/home/codio/workspace/node_modules/lodash/dist/lodash.js"}],"/home/codio/workspace/client/scripts/common/index.js":[function(require,module,exports){
'use strict';
require('angular-ui-router');
require('angular-ionic');

var modulename = 'common';

module.exports = function(namespace) {

    var fullname = namespace + '.' + modulename;

    var angular = require('angular');
    var ngFacebook = require('../ngFacebook')(namespace);
    var app = angular.module(fullname, ['ui.router', 'ionic', ngFacebook.name]);
    // inject:folders start
    require('./controllers')(app);

    // inject:folders end
    app.config(['$stateProvider', '$urlRouterProvider',
        function($stateProvider, $urlRouterProvider) {
            $stateProvider
                .state('login', {
                    url: '/login',
                    template: require('./views/login.html'),
                    controller: fullname + '.login as vm'
                })
                .state('tabs', {
                    url: '/tabs',
                    abstract: true,
                    template: require('./views/tabs.html')
                })
                .state('tabs.newsfeed', {
                    url: '/newsfeed',
                    views: {
                        'tab-newsfeed': {
                            template: require('./views/newsfeed.html'),
                            controller: fullname + '.newsfeed as vm'
                        }
                    }
                })
                .state('tabs.requests', {
                    url: '/requests',
                    views: {
                        'tab-requests': {
                            template: require('./views/requests.html'),
                            controller: fullname + '.newsfeed as vm'
                        }
                    }
                })
                .state('tabs.messages', {
                    url: '/messages',
                    views: {
                        'tab-messages': {
                            template: require('./views/messages.html')
                        }
                    }
                })
                .state('tabs.notifications', {
                    url: '/notifications',
                    views: {
                        'tab-notifications': {
                            template: require('./views/notifications.html')
                        }
                    }
                })
                .state('tabs.more', {
                    url: '/more',
                    views: {
                        'tab-more': {
                            template: require('./views/more.html')
                        }
                    }
                });
            $urlRouterProvider.otherwise('/login');
        }
    ]);
    return app;
};
},{"../ngFacebook":"/home/codio/workspace/client/scripts/ngFacebook/index.js","./controllers":"/home/codio/workspace/client/scripts/common/controllers/index.js","./views/login.html":"/home/codio/workspace/client/scripts/common/views/login.html","./views/messages.html":"/home/codio/workspace/client/scripts/common/views/messages.html","./views/more.html":"/home/codio/workspace/client/scripts/common/views/more.html","./views/newsfeed.html":"/home/codio/workspace/client/scripts/common/views/newsfeed.html","./views/notifications.html":"/home/codio/workspace/client/scripts/common/views/notifications.html","./views/requests.html":"/home/codio/workspace/client/scripts/common/views/requests.html","./views/tabs.html":"/home/codio/workspace/client/scripts/common/views/tabs.html","angular":"/home/codio/workspace/bower_components/angular/angular.min.js","angular-ionic":"/home/codio/workspace/bower_components/ionic/release/js/ionic-angular.min.js","angular-ui-router":"/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js"}],"/home/codio/workspace/client/scripts/common/views/login.html":[function(require,module,exports){
module.exports = '<ion-view>\n' +
    '    <ion-content class="fblogin">\n' +
    '        <div class="content padding has-header">\n' +
    '            <div class="button-block" style="text-align:center">\n' +
    '                <img src="images/facebook-title.png" width="60%">\n' +
    '            </div>\n' +
    '            <button class="button button-block button-positive fb-button-login" ng-click="vm.login()">Login</button>\n' +
    '        </div>\n' +
    '    </ion-content>\n' +
    '</ion-view>';
},{}],"/home/codio/workspace/client/scripts/common/views/messages.html":[function(require,module,exports){
module.exports = '<ion-view>\n' +
    '    <ion-header-bar class="bar-positive bar-fb-blue">\n' +
    '        <h1 class="title">Messages</h1>\n' +
    '    </ion-header-bar>\n' +
    '    <ion-content></ion-content>\n' +
    '</ion-view>';
},{}],"/home/codio/workspace/client/scripts/common/views/more.html":[function(require,module,exports){
module.exports = '<ion-view>\n' +
    '    <ion-header-bar class="bar-positive bar-fb-blue">\n' +
    '        <div class="item-input-wrapper fbsearch"> <i class="icon ion-ios7-search placeholder-icon"></i>\n' +
    '            <input type="search" class="" placeholder="Search">\n' +
    '        </div>\n' +
    '        <button class="button button-clear"> <i class="icon ion-navicon"></i>\n' +
    '        </button>\n' +
    '    </ion-header-bar>\n' +
    '\n' +
    '    <ion-content>\n' +
    '\n' +
    '        <div class="list">\n' +
    '            <a class="item item-icon-left" href="">\n' +
    '                <i class="icon ion-email energized"></i>\n' +
    '                Avi Haiat\n' +
    '            </a>\n' +
    '\n' +
    '            <a class="item item-icon-left item-icon-right" href="">\n' +
    '                <i class="icon ion-chatbubble-working assertive"></i>\n' +
    '                Update Info\n' +
    '                <span class="badge badge-positive">18</span>\n' +
    '            </a>\n' +
    '\n' +
    '            <div class="item item-divider">\n' +
    '                APPS\n' +
    '            </div>\n' +
    '\n' +
    '            <a class="item item-icon-left" href="">\n' +
    '                <i class="icon ion-mic-a dark"></i>\n' +
    '                Record album\n' +
    '                <span class="item-note">Grammy</span>\n' +
    '            </a>\n' +
    '\n' +
    '            <a class="item item-icon-left" href="">\n' +
    '                <i class="icon ion-person-stalker positive"></i>\n' +
    '                Find Friends\n' +
    '                <span class="badge badge-positive">20+</span>\n' +
    '            </a>\n' +
    '\n' +
    '        </div>\n' +
    '\n' +
    '    </ion-content>\n' +
    '</ion-view>';
},{}],"/home/codio/workspace/client/scripts/common/views/newsfeed.html":[function(require,module,exports){
module.exports = '<ion-view class="gray-background">\n' +
    '\n' +
    '    <!--     HEADER (SEARCH) -->\n' +
    '    <ion-header-bar class="bar-positive bar-fb-blue">\n' +
    '        <div class="item-input-wrapper fbsearch">\n' +
    '            <i class="icon ion-ios7-search placeholder-icon"></i>\n' +
    '            <input type="search" placeholder="Search">\n' +
    '        </div>\n' +
    '        <button class="button button-clear" ng-click="vm.logout()">\n' +
    '            <i class="icon ion-navicon"></i>\n' +
    '        </button>\n' +
    '    </ion-header-bar>\n' +
    '\n' +
    '    <!--     SUB HEADER  -->\n' +
    '    <ion-header-bar class="bar-subheader bar-stable">\n' +
    '        <div class="button-bar">\n' +
    '            <button class="button button-clear small-font">\n' +
    '                <i class="icon ion-compose"></i>\n' +
    '                Status\n' +
    '            </button>\n' +
    '            <button class="button button-clear small-font">\n' +
    '                <i class="icon ion-camera"></i>\n' +
    '                Photo\n' +
    '            </button>\n' +
    '            <button class="button button-clear small-font">\n' +
    '                <i class="icon ion-location"></i>\n' +
    '                Check in\n' +
    '            </button>\n' +
    '        </div>\n' +
    '    </ion-header-bar>\n' +
    '\n' +
    '    <!--     CONTENT -->\n' +
    '    <ion-content>\n' +
    '\n' +
    '        <ion-refresher  on-refresh="vm.doRefresh()" refreshing-icon="">\n' +
    '        </ion-refresher>\n' +
    '        <div class="list card fbcard" ng-repeat="item in vm.items">\n' +
    '\n' +
    '            <div class="item item-avatar">\n' +
    '                <img ng-src="https://graph.facebook.com/{{ item.from.id }}/picture" />\n' +
    '                <h2>{{item.from.name}}</h2>\n' +
    '                <p>{{item.created_time | date:\'MMM d, y h:mma\'}}</p>\n' +
    '            </div>\n' +
    '            <div class="item item-body">\n' +
    '                <p ng-if="item.story">{{item.story}}</p>\n' +
    '                <p>{{item.message}}</p>\n' +
    '                <p ng-if="item.name">{{item.name}}</p>\n' +
    '                <p ng-if="item.description">{{item.description}}</p>\n' +
    '                <img ng-if="item.full_picture" ng-src="{{ item.full_picture }}" style="width:100%; box-shadow:5px 5px 5px grey" />\n' +
    '            </div>\n' +
    '            <a class="item" ng-if="item.likes || item.comments">\n' +
    '\n' +
    '                <h4>\n' +
    '                    <span ng-if="item.likes" class="padding">{{item.likes.data.length}} Likes</span>\n' +
    '                    <span ng-if="item.comments" class="padding">{{item.comments.data.length}} Comments</span>\n' +
    '                </h4>\n' +
    '            </a>\n' +
    '\n' +
    '            <div class="item positive" style="padding:0;background-color:#F7F7F7">\n' +
    '                <div class="button-bar bar-positive positive">\n' +
    '                    <button class="button button-light button-clear small-font">\n' +
    '                        <i class="icon ion-thumbsup"></i>\n' +
    '                        Like\n' +
    '                    </button>\n' +
    '                    <button class="button button-light button-clear small-font">\n' +
    '                        <i class="icon ion-chatbox"></i>\n' +
    '                        Comment\n' +
    '                    </button>\n' +
    '                    <button class="button button-light button-clear small-font">\n' +
    '                        <i class="icon ion-share"></i>\n' +
    '                        Share\n' +
    '                    </button>\n' +
    '                </div>\n' +
    '            </div>\n' +
    '        </div>\n' +
    '\n' +
    '    </ion-content>\n' +
    '</ion-view>';
},{}],"/home/codio/workspace/client/scripts/common/views/notifications.html":[function(require,module,exports){
module.exports = '<ion-view>\n' +
    '    <ion-header-bar class="bar-positive bar-fb-blue">\n' +
    '        <h1 class="title">Notifications</h1>\n' +
    '    </ion-header-bar>\n' +
    '    <ion-content></ion-content>\n' +
    '</ion-view>';
},{}],"/home/codio/workspace/client/scripts/common/views/requests.html":[function(require,module,exports){
module.exports = '<ion-view>\n' +
    '    <ion-header-bar class="bar bar-positive bar-fb-blue">\n' +
    '        <h1 class="title">Friends Requests</h1>\n' +
    '    </ion-header-bar>\n' +
    '    <ion-content>\n' +
    '\n' +
    '        <ion-list ng-repeat="item in vm.friends">\n' +
    '            <ion-item class="item-thumbnail-left">\n' +
    '                <img ng-src="https://graph.facebook.com/{{ item.id }}/picture?width=120&height=120" class="rounded-image"/>\n' +
    '                <h2>{{item.name}}</h2>\n' +
    '                <p>1 mutual friend</p>\n' +
    '                <div class="button-bar">\n' +
    '                    <button class="button button-positive button-small" >Confirm</button>\n' +
    '                    <button class="button button-light button-small " style="margin-left:10px">Not Now</button>\n' +
    '                </div>\n' +
    '\n' +
    '            </ion-item>\n' +
    '        </ion-list>\n' +
    '\n' +
    '    </ion-content>\n' +
    '</ion-view>';
},{}],"/home/codio/workspace/client/scripts/common/views/tabs.html":[function(require,module,exports){
module.exports = '<ion-tabs class="tabs-icon-top tabs-light fbnews xfade-in-not-out">\n' +
    '\n' +
    '  <ion-tab title="News Feed" icon="icon ion-document-text"  ui-sref="tabs.newsfeed">\n' +
    '    <ion-nav-view name="tab-newsfeed"></ion-nav-view>\n' +
    '  </ion-tab>\n' +
    '\n' +
    '  <ion-tab title="Requests" icon="icon ion-person-stalker" ui-sref="tabs.requests">\n' +
    '    <ion-nav-view name="tab-requests"></ion-nav-view>\n' +
    '  </ion-tab>\n' +
    '\n' +
    '  <ion-tab title="Messages" icon="icon ion-chatbox" ui-sref="tabs.messages">\n' +
    '    <ion-nav-view name="tab-messages"></ion-nav-view>\n' +
    '  </ion-tab>\n' +
    '\n' +
    '  <ion-tab title="Notifications" icon="icon ion-android-earth" ui-sref="tabs.notifications">\n' +
    '    <ion-nav-view name="tab-notifications"></ion-nav-view>\n' +
    '  </ion-tab>\n' +
    '\n' +
    '  <ion-tab title="More" icon="icon ion-navicon" ui-sref="tabs.more">\n' +
    '    <ion-nav-view name="tab-more"></ion-nav-view>\n' +
    '  </ion-tab>\n' +
    '\n' +
    '</ion-tabs>';
},{}],"/home/codio/workspace/client/scripts/ngFacebook/index.js":[function(require,module,exports){
'use strict';
require('angular-ui-router');
require('angular-ionic');

var modulename = 'ngFacebook';

module.exports = function(namespace) {

    var fullname = namespace + '.' + modulename;

    var angular = require('angular');
    var app = angular.module(fullname, ['ui.router', 'ionic']);
    // inject:folders start
    require('./services')(app);

    // inject:folders end

    return app;
};
},{"./services":"/home/codio/workspace/client/scripts/ngFacebook/services/index.js","angular":"/home/codio/workspace/bower_components/angular/angular.min.js","angular-ionic":"/home/codio/workspace/bower_components/ionic/release/js/ionic-angular.min.js","angular-ui-router":"/home/codio/workspace/bower_components/angular-ui-router/release/angular-ui-router.min.js"}],"/home/codio/workspace/client/scripts/ngFacebook/services/facebook.js":[function(require,module,exports){
'use strict';
var servicename = 'facebook';

module.exports = function(app) {

    var dependencies = ['$window', '$rootScope', '$q', '$http'];

    function service($window, $rootScope, $q, $http) {
        var FB_LOGIN_URL = 'https://www.facebook.com/dialog/oauth';
        // By default we store fbtoken in sessionStorage. This can be overriden in init()
        var tokenStore = $window.localStorage;
        var fbAppId;
        var oauthRedirectURL;
        // Indicates if the app is running inside Cordova
        var runningInCordova;

        document.addEventListener('deviceready', function() {
            runningInCordova = true;
        }, false);

        /**
         * Initialize the ngFacebook module. You must use this function and initialize the module with an appId before you can
         * use any other function.
         * @param {String} appId - The id of the Facebook app
         * @param {String} redirectURL - The OAuth redirect URL. Optional. If not provided, we use sensible defaults.
         * @param {Object} store - The store used to save the Facebook token. Optional. If not provided, we use sessionStorage.
         */
        var init = function(appId, redirectURL, store) {
            fbAppId = appId;
            if(redirectURL) {
                oauthRedirectURL = redirectURL;
            }
            if(store) {
                tokenStore = store;
            }
        };

        /**
         * Application-level logout: we simply discard the token.
         */
        var logout = function() {
            tokenStore.fbtoken = undefined;
        };

        /**
         * Login to Facebook using OAuth. The app will redirect to the facebook page and back the application page.
         * @param {String} fbScope - The set of Facebook permissions requested
         */
        var login = function(fbScope) {
            if(!fbAppId) {
                throw new Error('Facebook App Id is not set');
            }
            fbScope = fbScope || ''; //email,user_friends,public_profile,user_about_me,user_actions.news,user_actions.video,user_activities,user_events';
            logout();
            oauthRedirectURL = oauthRedirectURL || document.location.origin;
            if(!runningInCordova) {
                window.location = FB_LOGIN_URL + '?client_id=' + fbAppId + '&redirect_uri=' + oauthRedirectURL + '&response_type=token&display=popup&scope=' + fbScope;
            } else {
                window.location = FB_LOGIN_URL + '?client_id=' + fbAppId + '&redirect_uri=' + oauthRedirectURL + '&response_type=token&display=popup&scope=' + fbScope;
            }

        };

        /**
         * @private
         * @param {String} queryString - The query string
         * @returns {Object} - The parsed query string available as an object
         */
        var parseQueryString = function(queryString) {
            var qs = decodeURIComponent(queryString);
            var obj = {};
            var params = qs.split('&');
            params.forEach(function(param) {
                var splitter = param.split('=');
                obj[splitter[0]] = splitter[1];
            });
            return obj;
        };

        /**
         * Checks the response url callback from facebook and store the access_token
         * @param {String} url - The url we are getting back from facebook
         * @returns {Boolean} - true if successfull, false otherwise
         */
        var oauthCallback = function(url) {
            // Parse the OAuth data received from Facebook
            var queryString;
            var obj;

            if(url.indexOf('access_token=') >= 0) {
                queryString = url.substr(url.indexOf('#') + 2);
                obj = parseQueryString(queryString);
                tokenStore.fbtoken = obj.access_token;
                return true;
            } else if(url.indexOf('error=') >= 0) {
                queryString = url.substring(url.indexOf('?') + 2, url.indexOf('#'));
                obj = parseQueryString(queryString);
                return false;
            } else {
                return false;
            }
        };

        /**
         * Lets you make any Facebook Graph API request.
         * @param {Object} obj - Request configuration object. Can include:
         *  method:  HTTP method: GET, POST, etc. Optional - Default is 'GET'
         *  path:    path in the Facebook graph: /me, /me.friends, etc. - Required
         *  params:  queryString parameters as a map - Optional
         * @returns {Promise} - returns a promise
         */
        var api = function(obj) {

            var method = obj.method || 'GET';
            var params = obj.params || {};

            params.access_token = tokenStore.fbtoken;

            return $http({
                method: method,
                url: 'https://graph.facebook.com' + obj.path,
                params: params
            })
                .error(function(data, status, headers, config) {
                    if(data.error && data.error.type === 'OAuthException') {
                        $rootScope.$emit('OAuthException');
                    }
                });
        };

        /**
         * Helper function to de-authorize the app
         * @returns {Promise} - returns a promise
         */
        var revokePermissions = function() {
            return api({
                method: 'DELETE',
                path: '/me/permissions'
            });
        };

        /**
         * Helper function for a POST call into the Graph API
         * @param {String} path - The path of the http post
         * @param {Object} params - The params
         * @returns {Promise} - returns a promise
         */
        var post = function(path, params) {
            return api({
                method: 'POST',
                path: path,
                params: params
            });
        };

        /**
         * Helper function for a GET call into the Graph API
         * @param {String} path - The path of the http get
         * @param {Object} params - The params
         * @returns {Promise} - returns a promise
         */
        var get = function(path, params) {
            return api({
                method: 'GET',
                path: path,
                params: params
            });
        };

        return {
            init: init,
            login: login,
            logout: logout,
            revokePermissions: revokePermissions,
            api: api,
            post: post,
            get: get,
            oauthCallback: oauthCallback
        };

    }
    service.$inject = dependencies;
    app.factory(servicename, service);
};
},{}],"/home/codio/workspace/client/scripts/ngFacebook/services/index.js":[function(require,module,exports){
'use strict';

module.exports = function(app) {
    // inject:start
    require('./facebook')(app);
    // inject:end
};
},{"./facebook":"/home/codio/workspace/client/scripts/ngFacebook/services/facebook.js"}],"/home/codio/workspace/node_modules/lodash/dist/lodash.js":[function(require,module,exports){
(function (global){
/**
 * @license
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modern -o ./dist/lodash.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
;(function() {

  /** Used as a safe reference for `undefined` in pre ES5 environments */
  var undefined;

  /** Used to pool arrays and objects used internally */
  var arrayPool = [],
      objectPool = [];

  /** Used to generate unique IDs */
  var idCounter = 0;

  /** Used to prefix keys to avoid issues with `__proto__` and properties on `Object.prototype` */
  var keyPrefix = +new Date + '';

  /** Used as the size when optimizations are enabled for large arrays */
  var largeArraySize = 75;

  /** Used as the max size of the `arrayPool` and `objectPool` */
  var maxPoolSize = 40;

  /** Used to detect and test whitespace */
  var whitespace = (
    // whitespace
    ' \t\x0B\f\xA0\ufeff' +

    // line terminators
    '\n\r\u2028\u2029' +

    // unicode category "Zs" space separators
    '\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000'
  );

  /** Used to match empty string literals in compiled template source */
  var reEmptyStringLeading = /\b__p \+= '';/g,
      reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
      reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;

  /**
   * Used to match ES6 template delimiters
   * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-literals-string-literals
   */
  var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;

  /** Used to match regexp flags from their coerced string values */
  var reFlags = /\w*$/;

  /** Used to detected named functions */
  var reFuncName = /^\s*function[ \n\r\t]+\w/;

  /** Used to match "interpolate" template delimiters */
  var reInterpolate = /<%=([\s\S]+?)%>/g;

  /** Used to match leading whitespace and zeros to be removed */
  var reLeadingSpacesAndZeros = RegExp('^[' + whitespace + ']*0+(?=.$)');

  /** Used to ensure capturing order of template delimiters */
  var reNoMatch = /($^)/;

  /** Used to detect functions containing a `this` reference */
  var reThis = /\bthis\b/;

  /** Used to match unescaped characters in compiled string literals */
  var reUnescapedString = /['\n\r\t\u2028\u2029\\]/g;

  /** Used to assign default `context` object properties */
  var contextProps = [
    'Array', 'Boolean', 'Date', 'Function', 'Math', 'Number', 'Object',
    'RegExp', 'String', '_', 'attachEvent', 'clearTimeout', 'isFinite', 'isNaN',
    'parseInt', 'setTimeout'
  ];

  /** Used to make template sourceURLs easier to identify */
  var templateCounter = 0;

  /** `Object#toString` result shortcuts */
  var argsClass = '[object Arguments]',
      arrayClass = '[object Array]',
      boolClass = '[object Boolean]',
      dateClass = '[object Date]',
      funcClass = '[object Function]',
      numberClass = '[object Number]',
      objectClass = '[object Object]',
      regexpClass = '[object RegExp]',
      stringClass = '[object String]';

  /** Used to identify object classifications that `_.clone` supports */
  var cloneableClasses = {};
  cloneableClasses[funcClass] = false;
  cloneableClasses[argsClass] = cloneableClasses[arrayClass] =
  cloneableClasses[boolClass] = cloneableClasses[dateClass] =
  cloneableClasses[numberClass] = cloneableClasses[objectClass] =
  cloneableClasses[regexpClass] = cloneableClasses[stringClass] = true;

  /** Used as an internal `_.debounce` options object */
  var debounceOptions = {
    'leading': false,
    'maxWait': 0,
    'trailing': false
  };

  /** Used as the property descriptor for `__bindData__` */
  var descriptor = {
    'configurable': false,
    'enumerable': false,
    'value': null,
    'writable': false
  };

  /** Used to determine if values are of the language type Object */
  var objectTypes = {
    'boolean': false,
    'function': true,
    'object': true,
    'number': false,
    'string': false,
    'undefined': false
  };

  /** Used to escape characters for inclusion in compiled string literals */
  var stringEscapes = {
    '\\': '\\',
    "'": "'",
    '\n': 'n',
    '\r': 'r',
    '\t': 't',
    '\u2028': 'u2028',
    '\u2029': 'u2029'
  };

  /** Used as a reference to the global object */
  var root = (objectTypes[typeof window] && window) || this;

  /** Detect free variable `exports` */
  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;

  /** Detect free variable `module` */
  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;

  /** Detect the popular CommonJS extension `module.exports` */
  var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;

  /** Detect free variable `global` from Node.js or Browserified code and use it as `root` */
  var freeGlobal = objectTypes[typeof global] && global;
  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal)) {
    root = freeGlobal;
  }

  /*--------------------------------------------------------------------------*/

  /**
   * The base implementation of `_.indexOf` without support for binary searches
   * or `fromIndex` constraints.
   *
   * @private
   * @param {Array} array The array to search.
   * @param {*} value The value to search for.
   * @param {number} [fromIndex=0] The index to search from.
   * @returns {number} Returns the index of the matched value or `-1`.
   */
  function baseIndexOf(array, value, fromIndex) {
    var index = (fromIndex || 0) - 1,
        length = array ? array.length : 0;

    while (++index < length) {
      if (array[index] === value) {
        return index;
      }
    }
    return -1;
  }

  /**
   * An implementation of `_.contains` for cache objects that mimics the return
   * signature of `_.indexOf` by returning `0` if the value is found, else `-1`.
   *
   * @private
   * @param {Object} cache The cache object to inspect.
   * @param {*} value The value to search for.
   * @returns {number} Returns `0` if `value` is found, else `-1`.
   */
  function cacheIndexOf(cache, value) {
    var type = typeof value;
    cache = cache.cache;

    if (type == 'boolean' || value == null) {
      return cache[value] ? 0 : -1;
    }
    if (type != 'number' && type != 'string') {
      type = 'object';
    }
    var key = type == 'number' ? value : keyPrefix + value;
    cache = (cache = cache[type]) && cache[key];

    return type == 'object'
      ? (cache && baseIndexOf(cache, value) > -1 ? 0 : -1)
      : (cache ? 0 : -1);
  }

  /**
   * Adds a given value to the corresponding cache object.
   *
   * @private
   * @param {*} value The value to add to the cache.
   */
  function cachePush(value) {
    var cache = this.cache,
        type = typeof value;

    if (type == 'boolean' || value == null) {
      cache[value] = true;
    } else {
      if (type != 'number' && type != 'string') {
        type = 'object';
      }
      var key = type == 'number' ? value : keyPrefix + value,
          typeCache = cache[type] || (cache[type] = {});

      if (type == 'object') {
        (typeCache[key] || (typeCache[key] = [])).push(value);
      } else {
        typeCache[key] = true;
      }
    }
  }

  /**
   * Used by `_.max` and `_.min` as the default callback when a given
   * collection is a string value.
   *
   * @private
   * @param {string} value The character to inspect.
   * @returns {number} Returns the code unit of given character.
   */
  function charAtCallback(value) {
    return value.charCodeAt(0);
  }

  /**
   * Used by `sortBy` to compare transformed `collection` elements, stable sorting
   * them in ascending order.
   *
   * @private
   * @param {Object} a The object to compare to `b`.
   * @param {Object} b The object to compare to `a`.
   * @returns {number} Returns the sort order indicator of `1` or `-1`.
   */
  function compareAscending(a, b) {
    var ac = a.criteria,
        bc = b.criteria,
        index = -1,
        length = ac.length;

    while (++index < length) {
      var value = ac[index],
          other = bc[index];

      if (value !== other) {
        if (value > other || typeof value == 'undefined') {
          return 1;
        }
        if (value < other || typeof other == 'undefined') {
          return -1;
        }
      }
    }
    // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications
    // that causes it, under certain circumstances, to return the same value for
    // `a` and `b`. See https://github.com/jashkenas/underscore/pull/1247
    //
    // This also ensures a stable sort in V8 and other engines.
    // See http://code.google.com/p/v8/issues/detail?id=90
    return a.index - b.index;
  }

  /**
   * Creates a cache object to optimize linear searches of large arrays.
   *
   * @private
   * @param {Array} [array=[]] The array to search.
   * @returns {null|Object} Returns the cache object or `null` if caching should not be used.
   */
  function createCache(array) {
    var index = -1,
        length = array.length,
        first = array[0],
        mid = array[(length / 2) | 0],
        last = array[length - 1];

    if (first && typeof first == 'object' &&
        mid && typeof mid == 'object' && last && typeof last == 'object') {
      return false;
    }
    var cache = getObject();
    cache['false'] = cache['null'] = cache['true'] = cache['undefined'] = false;

    var result = getObject();
    result.array = array;
    result.cache = cache;
    result.push = cachePush;

    while (++index < length) {
      result.push(array[index]);
    }
    return result;
  }

  /**
   * Used by `template` to escape characters for inclusion in compiled
   * string literals.
   *
   * @private
   * @param {string} match The matched character to escape.
   * @returns {string} Returns the escaped character.
   */
  function escapeStringChar(match) {
    return '\\' + stringEscapes[match];
  }

  /**
   * Gets an array from the array pool or creates a new one if the pool is empty.
   *
   * @private
   * @returns {Array} The array from the pool.
   */
  function getArray() {
    return arrayPool.pop() || [];
  }

  /**
   * Gets an object from the object pool or creates a new one if the pool is empty.
   *
   * @private
   * @returns {Object} The object from the pool.
   */
  function getObject() {
    return objectPool.pop() || {
      'array': null,
      'cache': null,
      'criteria': null,
      'false': false,
      'index': 0,
      'null': false,
      'number': null,
      'object': null,
      'push': null,
      'string': null,
      'true': false,
      'undefined': false,
      'value': null
    };
  }

  /**
   * Releases the given array back to the array pool.
   *
   * @private
   * @param {Array} [array] The array to release.
   */
  function releaseArray(array) {
    array.length = 0;
    if (arrayPool.length < maxPoolSize) {
      arrayPool.push(array);
    }
  }

  /**
   * Releases the given object back to the object pool.
   *
   * @private
   * @param {Object} [object] The object to release.
   */
  function releaseObject(object) {
    var cache = object.cache;
    if (cache) {
      releaseObject(cache);
    }
    object.array = object.cache = object.criteria = object.object = object.number = object.string = object.value = null;
    if (objectPool.length < maxPoolSize) {
      objectPool.push(object);
    }
  }

  /**
   * Slices the `collection` from the `start` index up to, but not including,
   * the `end` index.
   *
   * Note: This function is used instead of `Array#slice` to support node lists
   * in IE < 9 and to ensure dense arrays are returned.
   *
   * @private
   * @param {Array|Object|string} collection The collection to slice.
   * @param {number} start The start index.
   * @param {number} end The end index.
   * @returns {Array} Returns the new array.
   */
  function slice(array, start, end) {
    start || (start = 0);
    if (typeof end == 'undefined') {
      end = array ? array.length : 0;
    }
    var index = -1,
        length = end - start || 0,
        result = Array(length < 0 ? 0 : length);

    while (++index < length) {
      result[index] = array[start + index];
    }
    return result;
  }

  /*--------------------------------------------------------------------------*/

  /**
   * Create a new `lodash` function using the given context object.
   *
   * @static
   * @memberOf _
   * @category Utilities
   * @param {Object} [context=root] The context object.
   * @returns {Function} Returns the `lodash` function.
   */
  function runInContext(context) {
    // Avoid issues with some ES3 environments that attempt to use values, named
    // after built-in constructors like `Object`, for the creation of literals.
    // ES5 clears this up by stating that literals must use built-in constructors.
    // See http://es5.github.io/#x11.1.5.
    context = context ? _.defaults(root.Object(), context, _.pick(root, contextProps)) : root;

    /** Native constructor references */
    var Array = context.Array,
        Boolean = context.Boolean,
        Date = context.Date,
        Function = context.Function,
        Math = context.Math,
        Number = context.Number,
        Object = context.Object,
        RegExp = context.RegExp,
        String = context.String,
        TypeError = context.TypeError;

    /**
     * Used for `Array` method references.
     *
     * Normally `Array.prototype` would suffice, however, using an array literal
     * avoids issues in Narwhal.
     */
    var arrayRef = [];

    /** Used for native method references */
    var objectProto = Object.prototype;

    /** Used to restore the original `_` reference in `noConflict` */
    var oldDash = context._;

    /** Used to resolve the internal [[Class]] of values */
    var toString = objectProto.toString;

    /** Used to detect if a method is native */
    var reNative = RegExp('^' +
      String(toString)
        .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
        .replace(/toString| for [^\]]+/g, '.*?') + '$'
    );

    /** Native method shortcuts */
    var ceil = Math.ceil,
        clearTimeout = context.clearTimeout,
        floor = Math.floor,
        fnToString = Function.prototype.toString,
        getPrototypeOf = isNative(getPrototypeOf = Object.getPrototypeOf) && getPrototypeOf,
        hasOwnProperty = objectProto.hasOwnProperty,
        push = arrayRef.push,
        setTimeout = context.setTimeout,
        splice = arrayRef.splice,
        unshift = arrayRef.unshift;

    /** Used to set meta data on functions */
    var defineProperty = (function() {
      // IE 8 only accepts DOM elements
      try {
        var o = {},
            func = isNative(func = Object.defineProperty) && func,
            result = func(o, o, o) && func;
      } catch(e) { }
      return result;
    }());

    /* Native method shortcuts for methods with the same name as other `lodash` methods */
    var nativeCreate = isNative(nativeCreate = Object.create) && nativeCreate,
        nativeIsArray = isNative(nativeIsArray = Array.isArray) && nativeIsArray,
        nativeIsFinite = context.isFinite,
        nativeIsNaN = context.isNaN,
        nativeKeys = isNative(nativeKeys = Object.keys) && nativeKeys,
        nativeMax = Math.max,
        nativeMin = Math.min,
        nativeParseInt = context.parseInt,
        nativeRandom = Math.random;

    /** Used to lookup a built-in constructor by [[Class]] */
    var ctorByClass = {};
    ctorByClass[arrayClass] = Array;
    ctorByClass[boolClass] = Boolean;
    ctorByClass[dateClass] = Date;
    ctorByClass[funcClass] = Function;
    ctorByClass[objectClass] = Object;
    ctorByClass[numberClass] = Number;
    ctorByClass[regexpClass] = RegExp;
    ctorByClass[stringClass] = String;

    /*--------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` object which wraps the given value to enable intuitive
     * method chaining.
     *
     * In addition to Lo-Dash methods, wrappers also have the following `Array` methods:
     * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`, `splice`,
     * and `unshift`
     *
     * Chaining is supported in custom builds as long as the `value` method is
     * implicitly or explicitly included in the build.
     *
     * The chainable wrapper functions are:
     * `after`, `assign`, `bind`, `bindAll`, `bindKey`, `chain`, `compact`,
     * `compose`, `concat`, `countBy`, `create`, `createCallback`, `curry`,
     * `debounce`, `defaults`, `defer`, `delay`, `difference`, `filter`, `flatten`,
     * `forEach`, `forEachRight`, `forIn`, `forInRight`, `forOwn`, `forOwnRight`,
     * `functions`, `groupBy`, `indexBy`, `initial`, `intersection`, `invert`,
     * `invoke`, `keys`, `map`, `max`, `memoize`, `merge`, `min`, `object`, `omit`,
     * `once`, `pairs`, `partial`, `partialRight`, `pick`, `pluck`, `pull`, `push`,
     * `range`, `reject`, `remove`, `rest`, `reverse`, `shuffle`, `slice`, `sort`,
     * `sortBy`, `splice`, `tap`, `throttle`, `times`, `toArray`, `transform`,
     * `union`, `uniq`, `unshift`, `unzip`, `values`, `where`, `without`, `wrap`,
     * and `zip`
     *
     * The non-chainable wrapper functions are:
     * `clone`, `cloneDeep`, `contains`, `escape`, `every`, `find`, `findIndex`,
     * `findKey`, `findLast`, `findLastIndex`, `findLastKey`, `has`, `identity`,
     * `indexOf`, `isArguments`, `isArray`, `isBoolean`, `isDate`, `isElement`,
     * `isEmpty`, `isEqual`, `isFinite`, `isFunction`, `isNaN`, `isNull`, `isNumber`,
     * `isObject`, `isPlainObject`, `isRegExp`, `isString`, `isUndefined`, `join`,
     * `lastIndexOf`, `mixin`, `noConflict`, `parseInt`, `pop`, `random`, `reduce`,
     * `reduceRight`, `result`, `shift`, `size`, `some`, `sortedIndex`, `runInContext`,
     * `template`, `unescape`, `uniqueId`, and `value`
     *
     * The wrapper functions `first` and `last` return wrapped values when `n` is
     * provided, otherwise they return unwrapped values.
     *
     * Explicit chaining can be enabled by using the `_.chain` method.
     *
     * @name _
     * @constructor
     * @category Chaining
     * @param {*} value The value to wrap in a `lodash` instance.
     * @returns {Object} Returns a `lodash` instance.
     * @example
     *
     * var wrapped = _([1, 2, 3]);
     *
     * // returns an unwrapped value
     * wrapped.reduce(function(sum, num) {
     *   return sum + num;
     * });
     * // => 6
     *
     * // returns a wrapped value
     * var squares = wrapped.map(function(num) {
     *   return num * num;
     * });
     *
     * _.isArray(squares);
     * // => false
     *
     * _.isArray(squares.value());
     * // => true
     */
    function lodash(value) {
      // don't wrap if already wrapped, even if wrapped by a different `lodash` constructor
      return (value && typeof value == 'object' && !isArray(value) && hasOwnProperty.call(value, '__wrapped__'))
       ? value
       : new lodashWrapper(value);
    }

    /**
     * A fast path for creating `lodash` wrapper objects.
     *
     * @private
     * @param {*} value The value to wrap in a `lodash` instance.
     * @param {boolean} chainAll A flag to enable chaining for all methods
     * @returns {Object} Returns a `lodash` instance.
     */
    function lodashWrapper(value, chainAll) {
      this.__chain__ = !!chainAll;
      this.__wrapped__ = value;
    }
    // ensure `new lodashWrapper` is an instance of `lodash`
    lodashWrapper.prototype = lodash.prototype;

    /**
     * An object used to flag environments features.
     *
     * @static
     * @memberOf _
     * @type Object
     */
    var support = lodash.support = {};

    /**
     * Detect if functions can be decompiled by `Function#toString`
     * (all but PS3 and older Opera mobile browsers & avoided in Windows 8 apps).
     *
     * @memberOf _.support
     * @type boolean
     */
    support.funcDecomp = !isNative(context.WinRTError) && reThis.test(runInContext);

    /**
     * Detect if `Function#name` is supported (all but IE).
     *
     * @memberOf _.support
     * @type boolean
     */
    support.funcNames = typeof Function.name == 'string';

    /**
     * By default, the template delimiters used by Lo-Dash are similar to those in
     * embedded Ruby (ERB). Change the following template settings to use alternative
     * delimiters.
     *
     * @static
     * @memberOf _
     * @type Object
     */
    lodash.templateSettings = {

      /**
       * Used to detect `data` property values to be HTML-escaped.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'escape': /<%-([\s\S]+?)%>/g,

      /**
       * Used to detect code to be evaluated.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'evaluate': /<%([\s\S]+?)%>/g,

      /**
       * Used to detect `data` property values to inject.
       *
       * @memberOf _.templateSettings
       * @type RegExp
       */
      'interpolate': reInterpolate,

      /**
       * Used to reference the data object in the template text.
       *
       * @memberOf _.templateSettings
       * @type string
       */
      'variable': '',

      /**
       * Used to import variables into the compiled template.
       *
       * @memberOf _.templateSettings
       * @type Object
       */
      'imports': {

        /**
         * A reference to the `lodash` function.
         *
         * @memberOf _.templateSettings.imports
         * @type Function
         */
        '_': lodash
      }
    };

    /*--------------------------------------------------------------------------*/

    /**
     * The base implementation of `_.bind` that creates the bound function and
     * sets its meta data.
     *
     * @private
     * @param {Array} bindData The bind data array.
     * @returns {Function} Returns the new bound function.
     */
    function baseBind(bindData) {
      var func = bindData[0],
          partialArgs = bindData[2],
          thisArg = bindData[4];

      function bound() {
        // `Function#bind` spec
        // http://es5.github.io/#x15.3.4.5
        if (partialArgs) {
          // avoid `arguments` object deoptimizations by using `slice` instead
          // of `Array.prototype.slice.call` and not assigning `arguments` to a
          // variable as a ternary expression
          var args = slice(partialArgs);
          push.apply(args, arguments);
        }
        // mimic the constructor's `return` behavior
        // http://es5.github.io/#x13.2.2
        if (this instanceof bound) {
          // ensure `new bound` is an instance of `func`
          var thisBinding = baseCreate(func.prototype),
              result = func.apply(thisBinding, args || arguments);
          return isObject(result) ? result : thisBinding;
        }
        return func.apply(thisArg, args || arguments);
      }
      setBindData(bound, bindData);
      return bound;
    }

    /**
     * The base implementation of `_.clone` without argument juggling or support
     * for `thisArg` binding.
     *
     * @private
     * @param {*} value The value to clone.
     * @param {boolean} [isDeep=false] Specify a deep clone.
     * @param {Function} [callback] The function to customize cloning values.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates clones with source counterparts.
     * @returns {*} Returns the cloned value.
     */
    function baseClone(value, isDeep, callback, stackA, stackB) {
      if (callback) {
        var result = callback(value);
        if (typeof result != 'undefined') {
          return result;
        }
      }
      // inspect [[Class]]
      var isObj = isObject(value);
      if (isObj) {
        var className = toString.call(value);
        if (!cloneableClasses[className]) {
          return value;
        }
        var ctor = ctorByClass[className];
        switch (className) {
          case boolClass:
          case dateClass:
            return new ctor(+value);

          case numberClass:
          case stringClass:
            return new ctor(value);

          case regexpClass:
            result = ctor(value.source, reFlags.exec(value));
            result.lastIndex = value.lastIndex;
            return result;
        }
      } else {
        return value;
      }
      var isArr = isArray(value);
      if (isDeep) {
        // check for circular references and return corresponding clone
        var initedStack = !stackA;
        stackA || (stackA = getArray());
        stackB || (stackB = getArray());

        var length = stackA.length;
        while (length--) {
          if (stackA[length] == value) {
            return stackB[length];
          }
        }
        result = isArr ? ctor(value.length) : {};
      }
      else {
        result = isArr ? slice(value) : assign({}, value);
      }
      // add array properties assigned by `RegExp#exec`
      if (isArr) {
        if (hasOwnProperty.call(value, 'index')) {
          result.index = value.index;
        }
        if (hasOwnProperty.call(value, 'input')) {
          result.input = value.input;
        }
      }
      // exit for shallow clone
      if (!isDeep) {
        return result;
      }
      // add the source value to the stack of traversed objects
      // and associate it with its clone
      stackA.push(value);
      stackB.push(result);

      // recursively populate clone (susceptible to call stack limits)
      (isArr ? forEach : forOwn)(value, function(objValue, key) {
        result[key] = baseClone(objValue, isDeep, callback, stackA, stackB);
      });

      if (initedStack) {
        releaseArray(stackA);
        releaseArray(stackB);
      }
      return result;
    }

    /**
     * The base implementation of `_.create` without support for assigning
     * properties to the created object.
     *
     * @private
     * @param {Object} prototype The object to inherit from.
     * @returns {Object} Returns the new object.
     */
    function baseCreate(prototype, properties) {
      return isObject(prototype) ? nativeCreate(prototype) : {};
    }
    // fallback for browsers without `Object.create`
    if (!nativeCreate) {
      baseCreate = (function() {
        function Object() {}
        return function(prototype) {
          if (isObject(prototype)) {
            Object.prototype = prototype;
            var result = new Object;
            Object.prototype = null;
          }
          return result || context.Object();
        };
      }());
    }

    /**
     * The base implementation of `_.createCallback` without support for creating
     * "_.pluck" or "_.where" style callbacks.
     *
     * @private
     * @param {*} [func=identity] The value to convert to a callback.
     * @param {*} [thisArg] The `this` binding of the created callback.
     * @param {number} [argCount] The number of arguments the callback accepts.
     * @returns {Function} Returns a callback function.
     */
    function baseCreateCallback(func, thisArg, argCount) {
      if (typeof func != 'function') {
        return identity;
      }
      // exit early for no `thisArg` or already bound by `Function#bind`
      if (typeof thisArg == 'undefined' || !('prototype' in func)) {
        return func;
      }
      var bindData = func.__bindData__;
      if (typeof bindData == 'undefined') {
        if (support.funcNames) {
          bindData = !func.name;
        }
        bindData = bindData || !support.funcDecomp;
        if (!bindData) {
          var source = fnToString.call(func);
          if (!support.funcNames) {
            bindData = !reFuncName.test(source);
          }
          if (!bindData) {
            // checks if `func` references the `this` keyword and stores the result
            bindData = reThis.test(source);
            setBindData(func, bindData);
          }
        }
      }
      // exit early if there are no `this` references or `func` is bound
      if (bindData === false || (bindData !== true && bindData[1] & 1)) {
        return func;
      }
      switch (argCount) {
        case 1: return function(value) {
          return func.call(thisArg, value);
        };
        case 2: return function(a, b) {
          return func.call(thisArg, a, b);
        };
        case 3: return function(value, index, collection) {
          return func.call(thisArg, value, index, collection);
        };
        case 4: return function(accumulator, value, index, collection) {
          return func.call(thisArg, accumulator, value, index, collection);
        };
      }
      return bind(func, thisArg);
    }

    /**
     * The base implementation of `createWrapper` that creates the wrapper and
     * sets its meta data.
     *
     * @private
     * @param {Array} bindData The bind data array.
     * @returns {Function} Returns the new function.
     */
    function baseCreateWrapper(bindData) {
      var func = bindData[0],
          bitmask = bindData[1],
          partialArgs = bindData[2],
          partialRightArgs = bindData[3],
          thisArg = bindData[4],
          arity = bindData[5];

      var isBind = bitmask & 1,
          isBindKey = bitmask & 2,
          isCurry = bitmask & 4,
          isCurryBound = bitmask & 8,
          key = func;

      function bound() {
        var thisBinding = isBind ? thisArg : this;
        if (partialArgs) {
          var args = slice(partialArgs);
          push.apply(args, arguments);
        }
        if (partialRightArgs || isCurry) {
          args || (args = slice(arguments));
          if (partialRightArgs) {
            push.apply(args, partialRightArgs);
          }
          if (isCurry && args.length < arity) {
            bitmask |= 16 & ~32;
            return baseCreateWrapper([func, (isCurryBound ? bitmask : bitmask & ~3), args, null, thisArg, arity]);
          }
        }
        args || (args = arguments);
        if (isBindKey) {
          func = thisBinding[key];
        }
        if (this instanceof bound) {
          thisBinding = baseCreate(func.prototype);
          var result = func.apply(thisBinding, args);
          return isObject(result) ? result : thisBinding;
        }
        return func.apply(thisBinding, args);
      }
      setBindData(bound, bindData);
      return bound;
    }

    /**
     * The base implementation of `_.difference` that accepts a single array
     * of values to exclude.
     *
     * @private
     * @param {Array} array The array to process.
     * @param {Array} [values] The array of values to exclude.
     * @returns {Array} Returns a new array of filtered values.
     */
    function baseDifference(array, values) {
      var index = -1,
          indexOf = getIndexOf(),
          length = array ? array.length : 0,
          isLarge = length >= largeArraySize && indexOf === baseIndexOf,
          result = [];

      if (isLarge) {
        var cache = createCache(values);
        if (cache) {
          indexOf = cacheIndexOf;
          values = cache;
        } else {
          isLarge = false;
        }
      }
      while (++index < length) {
        var value = array[index];
        if (indexOf(values, value) < 0) {
          result.push(value);
        }
      }
      if (isLarge) {
        releaseObject(values);
      }
      return result;
    }

    /**
     * The base implementation of `_.flatten` without support for callback
     * shorthands or `thisArg` binding.
     *
     * @private
     * @param {Array} array The array to flatten.
     * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.
     * @param {boolean} [isStrict=false] A flag to restrict flattening to arrays and `arguments` objects.
     * @param {number} [fromIndex=0] The index to start from.
     * @returns {Array} Returns a new flattened array.
     */
    function baseFlatten(array, isShallow, isStrict, fromIndex) {
      var index = (fromIndex || 0) - 1,
          length = array ? array.length : 0,
          result = [];

      while (++index < length) {
        var value = array[index];

        if (value && typeof value == 'object' && typeof value.length == 'number'
            && (isArray(value) || isArguments(value))) {
          // recursively flatten arrays (susceptible to call stack limits)
          if (!isShallow) {
            value = baseFlatten(value, isShallow, isStrict);
          }
          var valIndex = -1,
              valLength = value.length,
              resIndex = result.length;

          result.length += valLength;
          while (++valIndex < valLength) {
            result[resIndex++] = value[valIndex];
          }
        } else if (!isStrict) {
          result.push(value);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.isEqual`, without support for `thisArg` binding,
     * that allows partial "_.where" style comparisons.
     *
     * @private
     * @param {*} a The value to compare.
     * @param {*} b The other value to compare.
     * @param {Function} [callback] The function to customize comparing values.
     * @param {Function} [isWhere=false] A flag to indicate performing partial comparisons.
     * @param {Array} [stackA=[]] Tracks traversed `a` objects.
     * @param {Array} [stackB=[]] Tracks traversed `b` objects.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     */
    function baseIsEqual(a, b, callback, isWhere, stackA, stackB) {
      // used to indicate that when comparing objects, `a` has at least the properties of `b`
      if (callback) {
        var result = callback(a, b);
        if (typeof result != 'undefined') {
          return !!result;
        }
      }
      // exit early for identical values
      if (a === b) {
        // treat `+0` vs. `-0` as not equal
        return a !== 0 || (1 / a == 1 / b);
      }
      var type = typeof a,
          otherType = typeof b;

      // exit early for unlike primitive values
      if (a === a &&
          !(a && objectTypes[type]) &&
          !(b && objectTypes[otherType])) {
        return false;
      }
      // exit early for `null` and `undefined` avoiding ES3's Function#call behavior
      // http://es5.github.io/#x15.3.4.4
      if (a == null || b == null) {
        return a === b;
      }
      // compare [[Class]] names
      var className = toString.call(a),
          otherClass = toString.call(b);

      if (className == argsClass) {
        className = objectClass;
      }
      if (otherClass == argsClass) {
        otherClass = objectClass;
      }
      if (className != otherClass) {
        return false;
      }
      switch (className) {
        case boolClass:
        case dateClass:
          // coerce dates and booleans to numbers, dates to milliseconds and booleans
          // to `1` or `0` treating invalid dates coerced to `NaN` as not equal
          return +a == +b;

        case numberClass:
          // treat `NaN` vs. `NaN` as equal
          return (a != +a)
            ? b != +b
            // but treat `+0` vs. `-0` as not equal
            : (a == 0 ? (1 / a == 1 / b) : a == +b);

        case regexpClass:
        case stringClass:
          // coerce regexes to strings (http://es5.github.io/#x15.10.6.4)
          // treat string primitives and their corresponding object instances as equal
          return a == String(b);
      }
      var isArr = className == arrayClass;
      if (!isArr) {
        // unwrap any `lodash` wrapped values
        var aWrapped = hasOwnProperty.call(a, '__wrapped__'),
            bWrapped = hasOwnProperty.call(b, '__wrapped__');

        if (aWrapped || bWrapped) {
          return baseIsEqual(aWrapped ? a.__wrapped__ : a, bWrapped ? b.__wrapped__ : b, callback, isWhere, stackA, stackB);
        }
        // exit for functions and DOM nodes
        if (className != objectClass) {
          return false;
        }
        // in older versions of Opera, `arguments` objects have `Array` constructors
        var ctorA = a.constructor,
            ctorB = b.constructor;

        // non `Object` object instances with different constructors are not equal
        if (ctorA != ctorB &&
              !(isFunction(ctorA) && ctorA instanceof ctorA && isFunction(ctorB) && ctorB instanceof ctorB) &&
              ('constructor' in a && 'constructor' in b)
            ) {
          return false;
        }
      }
      // assume cyclic structures are equal
      // the algorithm for detecting cyclic structures is adapted from ES 5.1
      // section 15.12.3, abstract operation `JO` (http://es5.github.io/#x15.12.3)
      var initedStack = !stackA;
      stackA || (stackA = getArray());
      stackB || (stackB = getArray());

      var length = stackA.length;
      while (length--) {
        if (stackA[length] == a) {
          return stackB[length] == b;
        }
      }
      var size = 0;
      result = true;

      // add `a` and `b` to the stack of traversed objects
      stackA.push(a);
      stackB.push(b);

      // recursively compare objects and arrays (susceptible to call stack limits)
      if (isArr) {
        // compare lengths to determine if a deep comparison is necessary
        length = a.length;
        size = b.length;
        result = size == length;

        if (result || isWhere) {
          // deep compare the contents, ignoring non-numeric properties
          while (size--) {
            var index = length,
                value = b[size];

            if (isWhere) {
              while (index--) {
                if ((result = baseIsEqual(a[index], value, callback, isWhere, stackA, stackB))) {
                  break;
                }
              }
            } else if (!(result = baseIsEqual(a[size], value, callback, isWhere, stackA, stackB))) {
              break;
            }
          }
        }
      }
      else {
        // deep compare objects using `forIn`, instead of `forOwn`, to avoid `Object.keys`
        // which, in this case, is more costly
        forIn(b, function(value, key, b) {
          if (hasOwnProperty.call(b, key)) {
            // count the number of properties.
            size++;
            // deep compare each property value.
            return (result = hasOwnProperty.call(a, key) && baseIsEqual(a[key], value, callback, isWhere, stackA, stackB));
          }
        });

        if (result && !isWhere) {
          // ensure both objects have the same number of properties
          forIn(a, function(value, key, a) {
            if (hasOwnProperty.call(a, key)) {
              // `size` will be `-1` if `a` has more properties than `b`
              return (result = --size > -1);
            }
          });
        }
      }
      stackA.pop();
      stackB.pop();

      if (initedStack) {
        releaseArray(stackA);
        releaseArray(stackB);
      }
      return result;
    }

    /**
     * The base implementation of `_.merge` without argument juggling or support
     * for `thisArg` binding.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {Function} [callback] The function to customize merging properties.
     * @param {Array} [stackA=[]] Tracks traversed source objects.
     * @param {Array} [stackB=[]] Associates values with source counterparts.
     */
    function baseMerge(object, source, callback, stackA, stackB) {
      (isArray(source) ? forEach : forOwn)(source, function(source, key) {
        var found,
            isArr,
            result = source,
            value = object[key];

        if (source && ((isArr = isArray(source)) || isPlainObject(source))) {
          // avoid merging previously merged cyclic sources
          var stackLength = stackA.length;
          while (stackLength--) {
            if ((found = stackA[stackLength] == source)) {
              value = stackB[stackLength];
              break;
            }
          }
          if (!found) {
            var isShallow;
            if (callback) {
              result = callback(value, source);
              if ((isShallow = typeof result != 'undefined')) {
                value = result;
              }
            }
            if (!isShallow) {
              value = isArr
                ? (isArray(value) ? value : [])
                : (isPlainObject(value) ? value : {});
            }
            // add `source` and associated `value` to the stack of traversed objects
            stackA.push(source);
            stackB.push(value);

            // recursively merge objects and arrays (susceptible to call stack limits)
            if (!isShallow) {
              baseMerge(value, source, callback, stackA, stackB);
            }
          }
        }
        else {
          if (callback) {
            result = callback(value, source);
            if (typeof result == 'undefined') {
              result = source;
            }
          }
          if (typeof result != 'undefined') {
            value = result;
          }
        }
        object[key] = value;
      });
    }

    /**
     * The base implementation of `_.random` without argument juggling or support
     * for returning floating-point numbers.
     *
     * @private
     * @param {number} min The minimum possible value.
     * @param {number} max The maximum possible value.
     * @returns {number} Returns a random number.
     */
    function baseRandom(min, max) {
      return min + floor(nativeRandom() * (max - min + 1));
    }

    /**
     * The base implementation of `_.uniq` without support for callback shorthands
     * or `thisArg` binding.
     *
     * @private
     * @param {Array} array The array to process.
     * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.
     * @param {Function} [callback] The function called per iteration.
     * @returns {Array} Returns a duplicate-value-free array.
     */
    function baseUniq(array, isSorted, callback) {
      var index = -1,
          indexOf = getIndexOf(),
          length = array ? array.length : 0,
          result = [];

      var isLarge = !isSorted && length >= largeArraySize && indexOf === baseIndexOf,
          seen = (callback || isLarge) ? getArray() : result;

      if (isLarge) {
        var cache = createCache(seen);
        indexOf = cacheIndexOf;
        seen = cache;
      }
      while (++index < length) {
        var value = array[index],
            computed = callback ? callback(value, index, array) : value;

        if (isSorted
              ? !index || seen[seen.length - 1] !== computed
              : indexOf(seen, computed) < 0
            ) {
          if (callback || isLarge) {
            seen.push(computed);
          }
          result.push(value);
        }
      }
      if (isLarge) {
        releaseArray(seen.array);
        releaseObject(seen);
      } else if (callback) {
        releaseArray(seen);
      }
      return result;
    }

    /**
     * Creates a function that aggregates a collection, creating an object composed
     * of keys generated from the results of running each element of the collection
     * through a callback. The given `setter` function sets the keys and values
     * of the composed object.
     *
     * @private
     * @param {Function} setter The setter function.
     * @returns {Function} Returns the new aggregator function.
     */
    function createAggregator(setter) {
      return function(collection, callback, thisArg) {
        var result = {};
        callback = lodash.createCallback(callback, thisArg, 3);

        var index = -1,
            length = collection ? collection.length : 0;

        if (typeof length == 'number') {
          while (++index < length) {
            var value = collection[index];
            setter(result, value, callback(value, index, collection), collection);
          }
        } else {
          forOwn(collection, function(value, key, collection) {
            setter(result, value, callback(value, key, collection), collection);
          });
        }
        return result;
      };
    }

    /**
     * Creates a function that, when called, either curries or invokes `func`
     * with an optional `this` binding and partially applied arguments.
     *
     * @private
     * @param {Function|string} func The function or method name to reference.
     * @param {number} bitmask The bitmask of method flags to compose.
     *  The bitmask may be composed of the following flags:
     *  1 - `_.bind`
     *  2 - `_.bindKey`
     *  4 - `_.curry`
     *  8 - `_.curry` (bound)
     *  16 - `_.partial`
     *  32 - `_.partialRight`
     * @param {Array} [partialArgs] An array of arguments to prepend to those
     *  provided to the new function.
     * @param {Array} [partialRightArgs] An array of arguments to append to those
     *  provided to the new function.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new function.
     */
    function createWrapper(func, bitmask, partialArgs, partialRightArgs, thisArg, arity) {
      var isBind = bitmask & 1,
          isBindKey = bitmask & 2,
          isCurry = bitmask & 4,
          isCurryBound = bitmask & 8,
          isPartial = bitmask & 16,
          isPartialRight = bitmask & 32;

      if (!isBindKey && !isFunction(func)) {
        throw new TypeError;
      }
      if (isPartial && !partialArgs.length) {
        bitmask &= ~16;
        isPartial = partialArgs = false;
      }
      if (isPartialRight && !partialRightArgs.length) {
        bitmask &= ~32;
        isPartialRight = partialRightArgs = false;
      }
      var bindData = func && func.__bindData__;
      if (bindData && bindData !== true) {
        // clone `bindData`
        bindData = slice(bindData);
        if (bindData[2]) {
          bindData[2] = slice(bindData[2]);
        }
        if (bindData[3]) {
          bindData[3] = slice(bindData[3]);
        }
        // set `thisBinding` is not previously bound
        if (isBind && !(bindData[1] & 1)) {
          bindData[4] = thisArg;
        }
        // set if previously bound but not currently (subsequent curried functions)
        if (!isBind && bindData[1] & 1) {
          bitmask |= 8;
        }
        // set curried arity if not yet set
        if (isCurry && !(bindData[1] & 4)) {
          bindData[5] = arity;
        }
        // append partial left arguments
        if (isPartial) {
          push.apply(bindData[2] || (bindData[2] = []), partialArgs);
        }
        // append partial right arguments
        if (isPartialRight) {
          unshift.apply(bindData[3] || (bindData[3] = []), partialRightArgs);
        }
        // merge flags
        bindData[1] |= bitmask;
        return createWrapper.apply(null, bindData);
      }
      // fast path for `_.bind`
      var creater = (bitmask == 1 || bitmask === 17) ? baseBind : baseCreateWrapper;
      return creater([func, bitmask, partialArgs, partialRightArgs, thisArg, arity]);
    }

    /**
     * Used by `escape` to convert characters to HTML entities.
     *
     * @private
     * @param {string} match The matched character to escape.
     * @returns {string} Returns the escaped character.
     */
    function escapeHtmlChar(match) {
      return htmlEscapes[match];
    }

    /**
     * Gets the appropriate "indexOf" function. If the `_.indexOf` method is
     * customized, this method returns the custom method, otherwise it returns
     * the `baseIndexOf` function.
     *
     * @private
     * @returns {Function} Returns the "indexOf" function.
     */
    function getIndexOf() {
      var result = (result = lodash.indexOf) === indexOf ? baseIndexOf : result;
      return result;
    }

    /**
     * Checks if `value` is a native function.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a native function, else `false`.
     */
    function isNative(value) {
      return typeof value == 'function' && reNative.test(value);
    }

    /**
     * Sets `this` binding data on a given function.
     *
     * @private
     * @param {Function} func The function to set data on.
     * @param {Array} value The data array to set.
     */
    var setBindData = !defineProperty ? noop : function(func, value) {
      descriptor.value = value;
      defineProperty(func, '__bindData__', descriptor);
    };

    /**
     * A fallback implementation of `isPlainObject` which checks if a given value
     * is an object created by the `Object` constructor, assuming objects created
     * by the `Object` constructor have no inherited enumerable properties and that
     * there are no `Object.prototype` extensions.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
     */
    function shimIsPlainObject(value) {
      var ctor,
          result;

      // avoid non Object objects, `arguments` objects, and DOM elements
      if (!(value && toString.call(value) == objectClass) ||
          (ctor = value.constructor, isFunction(ctor) && !(ctor instanceof ctor))) {
        return false;
      }
      // In most environments an object's own properties are iterated before
      // its inherited properties. If the last iterated property is an object's
      // own property then there are no inherited enumerable properties.
      forIn(value, function(value, key) {
        result = key;
      });
      return typeof result == 'undefined' || hasOwnProperty.call(value, result);
    }

    /**
     * Used by `unescape` to convert HTML entities to characters.
     *
     * @private
     * @param {string} match The matched character to unescape.
     * @returns {string} Returns the unescaped character.
     */
    function unescapeHtmlChar(match) {
      return htmlUnescapes[match];
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Checks if `value` is an `arguments` object.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is an `arguments` object, else `false`.
     * @example
     *
     * (function() { return _.isArguments(arguments); })(1, 2, 3);
     * // => true
     *
     * _.isArguments([1, 2, 3]);
     * // => false
     */
    function isArguments(value) {
      return value && typeof value == 'object' && typeof value.length == 'number' &&
        toString.call(value) == argsClass || false;
    }

    /**
     * Checks if `value` is an array.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is an array, else `false`.
     * @example
     *
     * (function() { return _.isArray(arguments); })();
     * // => false
     *
     * _.isArray([1, 2, 3]);
     * // => true
     */
    var isArray = nativeIsArray || function(value) {
      return value && typeof value == 'object' && typeof value.length == 'number' &&
        toString.call(value) == arrayClass || false;
    };

    /**
     * A fallback implementation of `Object.keys` which produces an array of the
     * given object's own enumerable property names.
     *
     * @private
     * @type Function
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns an array of property names.
     */
    var shimKeys = function(object) {
      var index, iterable = object, result = [];
      if (!iterable) return result;
      if (!(objectTypes[typeof object])) return result;
        for (index in iterable) {
          if (hasOwnProperty.call(iterable, index)) {
            result.push(index);
          }
        }
      return result
    };

    /**
     * Creates an array composed of the own enumerable property names of an object.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns an array of property names.
     * @example
     *
     * _.keys({ 'one': 1, 'two': 2, 'three': 3 });
     * // => ['one', 'two', 'three'] (property order is not guaranteed across environments)
     */
    var keys = !nativeKeys ? shimKeys : function(object) {
      if (!isObject(object)) {
        return [];
      }
      return nativeKeys(object);
    };

    /**
     * Used to convert characters to HTML entities:
     *
     * Though the `>` character is escaped for symmetry, characters like `>` and `/`
     * don't require escaping in HTML and have no special meaning unless they're part
     * of a tag or an unquoted attribute value.
     * http://mathiasbynens.be/notes/ambiguous-ampersands (under "semi-related fun fact")
     */
    var htmlEscapes = {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#39;'
    };

    /** Used to convert HTML entities to characters */
    var htmlUnescapes = invert(htmlEscapes);

    /** Used to match HTML entities and HTML characters */
    var reEscapedHtml = RegExp('(' + keys(htmlUnescapes).join('|') + ')', 'g'),
        reUnescapedHtml = RegExp('[' + keys(htmlEscapes).join('') + ']', 'g');

    /*--------------------------------------------------------------------------*/

    /**
     * Assigns own enumerable properties of source object(s) to the destination
     * object. Subsequent sources will overwrite property assignments of previous
     * sources. If a callback is provided it will be executed to produce the
     * assigned values. The callback is bound to `thisArg` and invoked with two
     * arguments; (objectValue, sourceValue).
     *
     * @static
     * @memberOf _
     * @type Function
     * @alias extend
     * @category Objects
     * @param {Object} object The destination object.
     * @param {...Object} [source] The source objects.
     * @param {Function} [callback] The function to customize assigning values.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the destination object.
     * @example
     *
     * _.assign({ 'name': 'fred' }, { 'employer': 'slate' });
     * // => { 'name': 'fred', 'employer': 'slate' }
     *
     * var defaults = _.partialRight(_.assign, function(a, b) {
     *   return typeof a == 'undefined' ? b : a;
     * });
     *
     * var object = { 'name': 'barney' };
     * defaults(object, { 'name': 'fred', 'employer': 'slate' });
     * // => { 'name': 'barney', 'employer': 'slate' }
     */
    var assign = function(object, source, guard) {
      var index, iterable = object, result = iterable;
      if (!iterable) return result;
      var args = arguments,
          argsIndex = 0,
          argsLength = typeof guard == 'number' ? 2 : args.length;
      if (argsLength > 3 && typeof args[argsLength - 2] == 'function') {
        var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);
      } else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {
        callback = args[--argsLength];
      }
      while (++argsIndex < argsLength) {
        iterable = args[argsIndex];
        if (iterable && objectTypes[typeof iterable]) {
        var ownIndex = -1,
            ownProps = objectTypes[typeof iterable] && keys(iterable),
            length = ownProps ? ownProps.length : 0;

        while (++ownIndex < length) {
          index = ownProps[ownIndex];
          result[index] = callback ? callback(result[index], iterable[index]) : iterable[index];
        }
        }
      }
      return result
    };

    /**
     * Creates a clone of `value`. If `isDeep` is `true` nested objects will also
     * be cloned, otherwise they will be assigned by reference. If a callback
     * is provided it will be executed to produce the cloned values. If the
     * callback returns `undefined` cloning will be handled by the method instead.
     * The callback is bound to `thisArg` and invoked with one argument; (value).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to clone.
     * @param {boolean} [isDeep=false] Specify a deep clone.
     * @param {Function} [callback] The function to customize cloning values.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the cloned value.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * var shallow = _.clone(characters);
     * shallow[0] === characters[0];
     * // => true
     *
     * var deep = _.clone(characters, true);
     * deep[0] === characters[0];
     * // => false
     *
     * _.mixin({
     *   'clone': _.partialRight(_.clone, function(value) {
     *     return _.isElement(value) ? value.cloneNode(false) : undefined;
     *   })
     * });
     *
     * var clone = _.clone(document.body);
     * clone.childNodes.length;
     * // => 0
     */
    function clone(value, isDeep, callback, thisArg) {
      // allows working with "Collections" methods without using their `index`
      // and `collection` arguments for `isDeep` and `callback`
      if (typeof isDeep != 'boolean' && isDeep != null) {
        thisArg = callback;
        callback = isDeep;
        isDeep = false;
      }
      return baseClone(value, isDeep, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 1));
    }

    /**
     * Creates a deep clone of `value`. If a callback is provided it will be
     * executed to produce the cloned values. If the callback returns `undefined`
     * cloning will be handled by the method instead. The callback is bound to
     * `thisArg` and invoked with one argument; (value).
     *
     * Note: This method is loosely based on the structured clone algorithm. Functions
     * and DOM nodes are **not** cloned. The enumerable properties of `arguments` objects and
     * objects created by constructors other than `Object` are cloned to plain `Object` objects.
     * See http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to deep clone.
     * @param {Function} [callback] The function to customize cloning values.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the deep cloned value.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * var deep = _.cloneDeep(characters);
     * deep[0] === characters[0];
     * // => false
     *
     * var view = {
     *   'label': 'docs',
     *   'node': element
     * };
     *
     * var clone = _.cloneDeep(view, function(value) {
     *   return _.isElement(value) ? value.cloneNode(true) : undefined;
     * });
     *
     * clone.node == view.node;
     * // => false
     */
    function cloneDeep(value, callback, thisArg) {
      return baseClone(value, true, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 1));
    }

    /**
     * Creates an object that inherits from the given `prototype` object. If a
     * `properties` object is provided its own enumerable properties are assigned
     * to the created object.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} prototype The object to inherit from.
     * @param {Object} [properties] The properties to assign to the object.
     * @returns {Object} Returns the new object.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * function Circle() {
     *   Shape.call(this);
     * }
     *
     * Circle.prototype = _.create(Shape.prototype, { 'constructor': Circle });
     *
     * var circle = new Circle;
     * circle instanceof Circle;
     * // => true
     *
     * circle instanceof Shape;
     * // => true
     */
    function create(prototype, properties) {
      var result = baseCreate(prototype);
      return properties ? assign(result, properties) : result;
    }

    /**
     * Assigns own enumerable properties of source object(s) to the destination
     * object for all destination properties that resolve to `undefined`. Once a
     * property is set, additional defaults of the same property will be ignored.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Objects
     * @param {Object} object The destination object.
     * @param {...Object} [source] The source objects.
     * @param- {Object} [guard] Allows working with `_.reduce` without using its
     *  `key` and `object` arguments as sources.
     * @returns {Object} Returns the destination object.
     * @example
     *
     * var object = { 'name': 'barney' };
     * _.defaults(object, { 'name': 'fred', 'employer': 'slate' });
     * // => { 'name': 'barney', 'employer': 'slate' }
     */
    var defaults = function(object, source, guard) {
      var index, iterable = object, result = iterable;
      if (!iterable) return result;
      var args = arguments,
          argsIndex = 0,
          argsLength = typeof guard == 'number' ? 2 : args.length;
      while (++argsIndex < argsLength) {
        iterable = args[argsIndex];
        if (iterable && objectTypes[typeof iterable]) {
        var ownIndex = -1,
            ownProps = objectTypes[typeof iterable] && keys(iterable),
            length = ownProps ? ownProps.length : 0;

        while (++ownIndex < length) {
          index = ownProps[ownIndex];
          if (typeof result[index] == 'undefined') result[index] = iterable[index];
        }
        }
      }
      return result
    };

    /**
     * This method is like `_.findIndex` except that it returns the key of the
     * first element that passes the callback check, instead of the element itself.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to search.
     * @param {Function|Object|string} [callback=identity] The function called per
     *  iteration. If a property name or object is provided it will be used to
     *  create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {string|undefined} Returns the key of the found element, else `undefined`.
     * @example
     *
     * var characters = {
     *   'barney': {  'age': 36, 'blocked': false },
     *   'fred': {    'age': 40, 'blocked': true },
     *   'pebbles': { 'age': 1,  'blocked': false }
     * };
     *
     * _.findKey(characters, function(chr) {
     *   return chr.age < 40;
     * });
     * // => 'barney' (property order is not guaranteed across environments)
     *
     * // using "_.where" callback shorthand
     * _.findKey(characters, { 'age': 1 });
     * // => 'pebbles'
     *
     * // using "_.pluck" callback shorthand
     * _.findKey(characters, 'blocked');
     * // => 'fred'
     */
    function findKey(object, callback, thisArg) {
      var result;
      callback = lodash.createCallback(callback, thisArg, 3);
      forOwn(object, function(value, key, object) {
        if (callback(value, key, object)) {
          result = key;
          return false;
        }
      });
      return result;
    }

    /**
     * This method is like `_.findKey` except that it iterates over elements
     * of a `collection` in the opposite order.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to search.
     * @param {Function|Object|string} [callback=identity] The function called per
     *  iteration. If a property name or object is provided it will be used to
     *  create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {string|undefined} Returns the key of the found element, else `undefined`.
     * @example
     *
     * var characters = {
     *   'barney': {  'age': 36, 'blocked': true },
     *   'fred': {    'age': 40, 'blocked': false },
     *   'pebbles': { 'age': 1,  'blocked': true }
     * };
     *
     * _.findLastKey(characters, function(chr) {
     *   return chr.age < 40;
     * });
     * // => returns `pebbles`, assuming `_.findKey` returns `barney`
     *
     * // using "_.where" callback shorthand
     * _.findLastKey(characters, { 'age': 40 });
     * // => 'fred'
     *
     * // using "_.pluck" callback shorthand
     * _.findLastKey(characters, 'blocked');
     * // => 'pebbles'
     */
    function findLastKey(object, callback, thisArg) {
      var result;
      callback = lodash.createCallback(callback, thisArg, 3);
      forOwnRight(object, function(value, key, object) {
        if (callback(value, key, object)) {
          result = key;
          return false;
        }
      });
      return result;
    }

    /**
     * Iterates over own and inherited enumerable properties of an object,
     * executing the callback for each property. The callback is bound to `thisArg`
     * and invoked with three arguments; (value, key, object). Callbacks may exit
     * iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * Shape.prototype.move = function(x, y) {
     *   this.x += x;
     *   this.y += y;
     * };
     *
     * _.forIn(new Shape, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'x', 'y', and 'move' (property order is not guaranteed across environments)
     */
    var forIn = function(collection, callback, thisArg) {
      var index, iterable = collection, result = iterable;
      if (!iterable) return result;
      if (!objectTypes[typeof iterable]) return result;
      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
        for (index in iterable) {
          if (callback(iterable[index], index, collection) === false) return result;
        }
      return result
    };

    /**
     * This method is like `_.forIn` except that it iterates over elements
     * of a `collection` in the opposite order.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * Shape.prototype.move = function(x, y) {
     *   this.x += x;
     *   this.y += y;
     * };
     *
     * _.forInRight(new Shape, function(value, key) {
     *   console.log(key);
     * });
     * // => logs 'move', 'y', and 'x' assuming `_.forIn ` logs 'x', 'y', and 'move'
     */
    function forInRight(object, callback, thisArg) {
      var pairs = [];

      forIn(object, function(value, key) {
        pairs.push(key, value);
      });

      var length = pairs.length;
      callback = baseCreateCallback(callback, thisArg, 3);
      while (length--) {
        if (callback(pairs[length--], pairs[length], object) === false) {
          break;
        }
      }
      return object;
    }

    /**
     * Iterates over own enumerable properties of an object, executing the callback
     * for each property. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, key, object). Callbacks may exit iteration early by
     * explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.forOwn({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {
     *   console.log(key);
     * });
     * // => logs '0', '1', and 'length' (property order is not guaranteed across environments)
     */
    var forOwn = function(collection, callback, thisArg) {
      var index, iterable = collection, result = iterable;
      if (!iterable) return result;
      if (!objectTypes[typeof iterable]) return result;
      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
        var ownIndex = -1,
            ownProps = objectTypes[typeof iterable] && keys(iterable),
            length = ownProps ? ownProps.length : 0;

        while (++ownIndex < length) {
          index = ownProps[ownIndex];
          if (callback(iterable[index], index, collection) === false) return result;
        }
      return result
    };

    /**
     * This method is like `_.forOwn` except that it iterates over elements
     * of a `collection` in the opposite order.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns `object`.
     * @example
     *
     * _.forOwnRight({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {
     *   console.log(key);
     * });
     * // => logs 'length', '1', and '0' assuming `_.forOwn` logs '0', '1', and 'length'
     */
    function forOwnRight(object, callback, thisArg) {
      var props = keys(object),
          length = props.length;

      callback = baseCreateCallback(callback, thisArg, 3);
      while (length--) {
        var key = props[length];
        if (callback(object[key], key, object) === false) {
          break;
        }
      }
      return object;
    }

    /**
     * Creates a sorted array of property names of all enumerable properties,
     * own and inherited, of `object` that have function values.
     *
     * @static
     * @memberOf _
     * @alias methods
     * @category Objects
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns an array of property names that have function values.
     * @example
     *
     * _.functions(_);
     * // => ['all', 'any', 'bind', 'bindAll', 'clone', 'compact', 'compose', ...]
     */
    function functions(object) {
      var result = [];
      forIn(object, function(value, key) {
        if (isFunction(value)) {
          result.push(key);
        }
      });
      return result.sort();
    }

    /**
     * Checks if the specified property name exists as a direct property of `object`,
     * instead of an inherited property.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to inspect.
     * @param {string} key The name of the property to check.
     * @returns {boolean} Returns `true` if key is a direct property, else `false`.
     * @example
     *
     * _.has({ 'a': 1, 'b': 2, 'c': 3 }, 'b');
     * // => true
     */
    function has(object, key) {
      return object ? hasOwnProperty.call(object, key) : false;
    }

    /**
     * Creates an object composed of the inverted keys and values of the given object.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to invert.
     * @returns {Object} Returns the created inverted object.
     * @example
     *
     * _.invert({ 'first': 'fred', 'second': 'barney' });
     * // => { 'fred': 'first', 'barney': 'second' }
     */
    function invert(object) {
      var index = -1,
          props = keys(object),
          length = props.length,
          result = {};

      while (++index < length) {
        var key = props[index];
        result[object[key]] = key;
      }
      return result;
    }

    /**
     * Checks if `value` is a boolean value.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a boolean value, else `false`.
     * @example
     *
     * _.isBoolean(null);
     * // => false
     */
    function isBoolean(value) {
      return value === true || value === false ||
        value && typeof value == 'object' && toString.call(value) == boolClass || false;
    }

    /**
     * Checks if `value` is a date.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a date, else `false`.
     * @example
     *
     * _.isDate(new Date);
     * // => true
     */
    function isDate(value) {
      return value && typeof value == 'object' && toString.call(value) == dateClass || false;
    }

    /**
     * Checks if `value` is a DOM element.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a DOM element, else `false`.
     * @example
     *
     * _.isElement(document.body);
     * // => true
     */
    function isElement(value) {
      return value && value.nodeType === 1 || false;
    }

    /**
     * Checks if `value` is empty. Arrays, strings, or `arguments` objects with a
     * length of `0` and objects with no own enumerable properties are considered
     * "empty".
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Array|Object|string} value The value to inspect.
     * @returns {boolean} Returns `true` if the `value` is empty, else `false`.
     * @example
     *
     * _.isEmpty([1, 2, 3]);
     * // => false
     *
     * _.isEmpty({});
     * // => true
     *
     * _.isEmpty('');
     * // => true
     */
    function isEmpty(value) {
      var result = true;
      if (!value) {
        return result;
      }
      var className = toString.call(value),
          length = value.length;

      if ((className == arrayClass || className == stringClass || className == argsClass ) ||
          (className == objectClass && typeof length == 'number' && isFunction(value.splice))) {
        return !length;
      }
      forOwn(value, function() {
        return (result = false);
      });
      return result;
    }

    /**
     * Performs a deep comparison between two values to determine if they are
     * equivalent to each other. If a callback is provided it will be executed
     * to compare values. If the callback returns `undefined` comparisons will
     * be handled by the method instead. The callback is bound to `thisArg` and
     * invoked with two arguments; (a, b).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} a The value to compare.
     * @param {*} b The other value to compare.
     * @param {Function} [callback] The function to customize comparing values.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     * @example
     *
     * var object = { 'name': 'fred' };
     * var copy = { 'name': 'fred' };
     *
     * object == copy;
     * // => false
     *
     * _.isEqual(object, copy);
     * // => true
     *
     * var words = ['hello', 'goodbye'];
     * var otherWords = ['hi', 'goodbye'];
     *
     * _.isEqual(words, otherWords, function(a, b) {
     *   var reGreet = /^(?:hello|hi)$/i,
     *       aGreet = _.isString(a) && reGreet.test(a),
     *       bGreet = _.isString(b) && reGreet.test(b);
     *
     *   return (aGreet || bGreet) ? (aGreet == bGreet) : undefined;
     * });
     * // => true
     */
    function isEqual(a, b, callback, thisArg) {
      return baseIsEqual(a, b, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 2));
    }

    /**
     * Checks if `value` is, or can be coerced to, a finite number.
     *
     * Note: This is not the same as native `isFinite` which will return true for
     * booleans and empty strings. See http://es5.github.io/#x15.1.2.5.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is finite, else `false`.
     * @example
     *
     * _.isFinite(-101);
     * // => true
     *
     * _.isFinite('10');
     * // => true
     *
     * _.isFinite(true);
     * // => false
     *
     * _.isFinite('');
     * // => false
     *
     * _.isFinite(Infinity);
     * // => false
     */
    function isFinite(value) {
      return nativeIsFinite(value) && !nativeIsNaN(parseFloat(value));
    }

    /**
     * Checks if `value` is a function.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a function, else `false`.
     * @example
     *
     * _.isFunction(_);
     * // => true
     */
    function isFunction(value) {
      return typeof value == 'function';
    }

    /**
     * Checks if `value` is the language type of Object.
     * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is an object, else `false`.
     * @example
     *
     * _.isObject({});
     * // => true
     *
     * _.isObject([1, 2, 3]);
     * // => true
     *
     * _.isObject(1);
     * // => false
     */
    function isObject(value) {
      // check if the value is the ECMAScript language type of Object
      // http://es5.github.io/#x8
      // and avoid a V8 bug
      // http://code.google.com/p/v8/issues/detail?id=2291
      return !!(value && objectTypes[typeof value]);
    }

    /**
     * Checks if `value` is `NaN`.
     *
     * Note: This is not the same as native `isNaN` which will return `true` for
     * `undefined` and other non-numeric values. See http://es5.github.io/#x15.1.2.4.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is `NaN`, else `false`.
     * @example
     *
     * _.isNaN(NaN);
     * // => true
     *
     * _.isNaN(new Number(NaN));
     * // => true
     *
     * isNaN(undefined);
     * // => true
     *
     * _.isNaN(undefined);
     * // => false
     */
    function isNaN(value) {
      // `NaN` as a primitive is the only value that is not equal to itself
      // (perform the [[Class]] check first to avoid errors with some host objects in IE)
      return isNumber(value) && value != +value;
    }

    /**
     * Checks if `value` is `null`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is `null`, else `false`.
     * @example
     *
     * _.isNull(null);
     * // => true
     *
     * _.isNull(undefined);
     * // => false
     */
    function isNull(value) {
      return value === null;
    }

    /**
     * Checks if `value` is a number.
     *
     * Note: `NaN` is considered a number. See http://es5.github.io/#x8.5.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a number, else `false`.
     * @example
     *
     * _.isNumber(8.4 * 5);
     * // => true
     */
    function isNumber(value) {
      return typeof value == 'number' ||
        value && typeof value == 'object' && toString.call(value) == numberClass || false;
    }

    /**
     * Checks if `value` is an object created by the `Object` constructor.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * _.isPlainObject(new Shape);
     * // => false
     *
     * _.isPlainObject([1, 2, 3]);
     * // => false
     *
     * _.isPlainObject({ 'x': 0, 'y': 0 });
     * // => true
     */
    var isPlainObject = !getPrototypeOf ? shimIsPlainObject : function(value) {
      if (!(value && toString.call(value) == objectClass)) {
        return false;
      }
      var valueOf = value.valueOf,
          objProto = isNative(valueOf) && (objProto = getPrototypeOf(valueOf)) && getPrototypeOf(objProto);

      return objProto
        ? (value == objProto || getPrototypeOf(value) == objProto)
        : shimIsPlainObject(value);
    };

    /**
     * Checks if `value` is a regular expression.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a regular expression, else `false`.
     * @example
     *
     * _.isRegExp(/fred/);
     * // => true
     */
    function isRegExp(value) {
      return value && typeof value == 'object' && toString.call(value) == regexpClass || false;
    }

    /**
     * Checks if `value` is a string.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is a string, else `false`.
     * @example
     *
     * _.isString('fred');
     * // => true
     */
    function isString(value) {
      return typeof value == 'string' ||
        value && typeof value == 'object' && toString.call(value) == stringClass || false;
    }

    /**
     * Checks if `value` is `undefined`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if the `value` is `undefined`, else `false`.
     * @example
     *
     * _.isUndefined(void 0);
     * // => true
     */
    function isUndefined(value) {
      return typeof value == 'undefined';
    }

    /**
     * Creates an object with the same keys as `object` and values generated by
     * running each own enumerable property of `object` through the callback.
     * The callback is bound to `thisArg` and invoked with three arguments;
     * (value, key, object).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new object with values of the results of each `callback` execution.
     * @example
     *
     * _.mapValues({ 'a': 1, 'b': 2, 'c': 3} , function(num) { return num * 3; });
     * // => { 'a': 3, 'b': 6, 'c': 9 }
     *
     * var characters = {
     *   'fred': { 'name': 'fred', 'age': 40 },
     *   'pebbles': { 'name': 'pebbles', 'age': 1 }
     * };
     *
     * // using "_.pluck" callback shorthand
     * _.mapValues(characters, 'age');
     * // => { 'fred': 40, 'pebbles': 1 }
     */
    function mapValues(object, callback, thisArg) {
      var result = {};
      callback = lodash.createCallback(callback, thisArg, 3);

      forOwn(object, function(value, key, object) {
        result[key] = callback(value, key, object);
      });
      return result;
    }

    /**
     * Recursively merges own enumerable properties of the source object(s), that
     * don't resolve to `undefined` into the destination object. Subsequent sources
     * will overwrite property assignments of previous sources. If a callback is
     * provided it will be executed to produce the merged values of the destination
     * and source properties. If the callback returns `undefined` merging will
     * be handled by the method instead. The callback is bound to `thisArg` and
     * invoked with two arguments; (objectValue, sourceValue).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The destination object.
     * @param {...Object} [source] The source objects.
     * @param {Function} [callback] The function to customize merging properties.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the destination object.
     * @example
     *
     * var names = {
     *   'characters': [
     *     { 'name': 'barney' },
     *     { 'name': 'fred' }
     *   ]
     * };
     *
     * var ages = {
     *   'characters': [
     *     { 'age': 36 },
     *     { 'age': 40 }
     *   ]
     * };
     *
     * _.merge(names, ages);
     * // => { 'characters': [{ 'name': 'barney', 'age': 36 }, { 'name': 'fred', 'age': 40 }] }
     *
     * var food = {
     *   'fruits': ['apple'],
     *   'vegetables': ['beet']
     * };
     *
     * var otherFood = {
     *   'fruits': ['banana'],
     *   'vegetables': ['carrot']
     * };
     *
     * _.merge(food, otherFood, function(a, b) {
     *   return _.isArray(a) ? a.concat(b) : undefined;
     * });
     * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot] }
     */
    function merge(object) {
      var args = arguments,
          length = 2;

      if (!isObject(object)) {
        return object;
      }
      // allows working with `_.reduce` and `_.reduceRight` without using
      // their `index` and `collection` arguments
      if (typeof args[2] != 'number') {
        length = args.length;
      }
      if (length > 3 && typeof args[length - 2] == 'function') {
        var callback = baseCreateCallback(args[--length - 1], args[length--], 2);
      } else if (length > 2 && typeof args[length - 1] == 'function') {
        callback = args[--length];
      }
      var sources = slice(arguments, 1, length),
          index = -1,
          stackA = getArray(),
          stackB = getArray();

      while (++index < length) {
        baseMerge(object, sources[index], callback, stackA, stackB);
      }
      releaseArray(stackA);
      releaseArray(stackB);
      return object;
    }

    /**
     * Creates a shallow clone of `object` excluding the specified properties.
     * Property names may be specified as individual arguments or as arrays of
     * property names. If a callback is provided it will be executed for each
     * property of `object` omitting the properties the callback returns truey
     * for. The callback is bound to `thisArg` and invoked with three arguments;
     * (value, key, object).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The source object.
     * @param {Function|...string|string[]} [callback] The properties to omit or the
     *  function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns an object without the omitted properties.
     * @example
     *
     * _.omit({ 'name': 'fred', 'age': 40 }, 'age');
     * // => { 'name': 'fred' }
     *
     * _.omit({ 'name': 'fred', 'age': 40 }, function(value) {
     *   return typeof value == 'number';
     * });
     * // => { 'name': 'fred' }
     */
    function omit(object, callback, thisArg) {
      var result = {};
      if (typeof callback != 'function') {
        var props = [];
        forIn(object, function(value, key) {
          props.push(key);
        });
        props = baseDifference(props, baseFlatten(arguments, true, false, 1));

        var index = -1,
            length = props.length;

        while (++index < length) {
          var key = props[index];
          result[key] = object[key];
        }
      } else {
        callback = lodash.createCallback(callback, thisArg, 3);
        forIn(object, function(value, key, object) {
          if (!callback(value, key, object)) {
            result[key] = value;
          }
        });
      }
      return result;
    }

    /**
     * Creates a two dimensional array of an object's key-value pairs,
     * i.e. `[[key1, value1], [key2, value2]]`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns new array of key-value pairs.
     * @example
     *
     * _.pairs({ 'barney': 36, 'fred': 40 });
     * // => [['barney', 36], ['fred', 40]] (property order is not guaranteed across environments)
     */
    function pairs(object) {
      var index = -1,
          props = keys(object),
          length = props.length,
          result = Array(length);

      while (++index < length) {
        var key = props[index];
        result[index] = [key, object[key]];
      }
      return result;
    }

    /**
     * Creates a shallow clone of `object` composed of the specified properties.
     * Property names may be specified as individual arguments or as arrays of
     * property names. If a callback is provided it will be executed for each
     * property of `object` picking the properties the callback returns truey
     * for. The callback is bound to `thisArg` and invoked with three arguments;
     * (value, key, object).
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The source object.
     * @param {Function|...string|string[]} [callback] The function called per
     *  iteration or property names to pick, specified as individual property
     *  names or arrays of property names.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns an object composed of the picked properties.
     * @example
     *
     * _.pick({ 'name': 'fred', '_userid': 'fred1' }, 'name');
     * // => { 'name': 'fred' }
     *
     * _.pick({ 'name': 'fred', '_userid': 'fred1' }, function(value, key) {
     *   return key.charAt(0) != '_';
     * });
     * // => { 'name': 'fred' }
     */
    function pick(object, callback, thisArg) {
      var result = {};
      if (typeof callback != 'function') {
        var index = -1,
            props = baseFlatten(arguments, true, false, 1),
            length = isObject(object) ? props.length : 0;

        while (++index < length) {
          var key = props[index];
          if (key in object) {
            result[key] = object[key];
          }
        }
      } else {
        callback = lodash.createCallback(callback, thisArg, 3);
        forIn(object, function(value, key, object) {
          if (callback(value, key, object)) {
            result[key] = value;
          }
        });
      }
      return result;
    }

    /**
     * An alternative to `_.reduce` this method transforms `object` to a new
     * `accumulator` object which is the result of running each of its own
     * enumerable properties through a callback, with each callback execution
     * potentially mutating the `accumulator` object. The callback is bound to
     * `thisArg` and invoked with four arguments; (accumulator, value, key, object).
     * Callbacks may exit iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Array|Object} object The object to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [accumulator] The custom accumulator value.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * var squares = _.transform([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], function(result, num) {
     *   num *= num;
     *   if (num % 2) {
     *     return result.push(num) < 3;
     *   }
     * });
     * // => [1, 9, 25]
     *
     * var mapped = _.transform({ 'a': 1, 'b': 2, 'c': 3 }, function(result, num, key) {
     *   result[key] = num * 3;
     * });
     * // => { 'a': 3, 'b': 6, 'c': 9 }
     */
    function transform(object, callback, accumulator, thisArg) {
      var isArr = isArray(object);
      if (accumulator == null) {
        if (isArr) {
          accumulator = [];
        } else {
          var ctor = object && object.constructor,
              proto = ctor && ctor.prototype;

          accumulator = baseCreate(proto);
        }
      }
      if (callback) {
        callback = lodash.createCallback(callback, thisArg, 4);
        (isArr ? forEach : forOwn)(object, function(value, index, object) {
          return callback(accumulator, value, index, object);
        });
      }
      return accumulator;
    }

    /**
     * Creates an array composed of the own enumerable property values of `object`.
     *
     * @static
     * @memberOf _
     * @category Objects
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns an array of property values.
     * @example
     *
     * _.values({ 'one': 1, 'two': 2, 'three': 3 });
     * // => [1, 2, 3] (property order is not guaranteed across environments)
     */
    function values(object) {
      var index = -1,
          props = keys(object),
          length = props.length,
          result = Array(length);

      while (++index < length) {
        result[index] = object[props[index]];
      }
      return result;
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Creates an array of elements from the specified indexes, or keys, of the
     * `collection`. Indexes may be specified as individual arguments or as arrays
     * of indexes.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {...(number|number[]|string|string[])} [index] The indexes of `collection`
     *   to retrieve, specified as individual indexes or arrays of indexes.
     * @returns {Array} Returns a new array of elements corresponding to the
     *  provided indexes.
     * @example
     *
     * _.at(['a', 'b', 'c', 'd', 'e'], [0, 2, 4]);
     * // => ['a', 'c', 'e']
     *
     * _.at(['fred', 'barney', 'pebbles'], 0, 2);
     * // => ['fred', 'pebbles']
     */
    function at(collection) {
      var args = arguments,
          index = -1,
          props = baseFlatten(args, true, false, 1),
          length = (args[2] && args[2][args[1]] === collection) ? 1 : props.length,
          result = Array(length);

      while(++index < length) {
        result[index] = collection[props[index]];
      }
      return result;
    }

    /**
     * Checks if a given value is present in a collection using strict equality
     * for comparisons, i.e. `===`. If `fromIndex` is negative, it is used as the
     * offset from the end of the collection.
     *
     * @static
     * @memberOf _
     * @alias include
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {*} target The value to check for.
     * @param {number} [fromIndex=0] The index to search from.
     * @returns {boolean} Returns `true` if the `target` element is found, else `false`.
     * @example
     *
     * _.contains([1, 2, 3], 1);
     * // => true
     *
     * _.contains([1, 2, 3], 1, 2);
     * // => false
     *
     * _.contains({ 'name': 'fred', 'age': 40 }, 'fred');
     * // => true
     *
     * _.contains('pebbles', 'eb');
     * // => true
     */
    function contains(collection, target, fromIndex) {
      var index = -1,
          indexOf = getIndexOf(),
          length = collection ? collection.length : 0,
          result = false;

      fromIndex = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex) || 0;
      if (isArray(collection)) {
        result = indexOf(collection, target, fromIndex) > -1;
      } else if (typeof length == 'number') {
        result = (isString(collection) ? collection.indexOf(target, fromIndex) : indexOf(collection, target, fromIndex)) > -1;
      } else {
        forOwn(collection, function(value) {
          if (++index >= fromIndex) {
            return !(result = value === target);
          }
        });
      }
      return result;
    }

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` through the callback. The corresponding value
     * of each key is the number of times the key was returned by the callback.
     * The callback is bound to `thisArg` and invoked with three arguments;
     * (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.countBy([4.3, 6.1, 6.4], function(num) { return Math.floor(num); });
     * // => { '4': 1, '6': 2 }
     *
     * _.countBy([4.3, 6.1, 6.4], function(num) { return this.floor(num); }, Math);
     * // => { '4': 1, '6': 2 }
     *
     * _.countBy(['one', 'two', 'three'], 'length');
     * // => { '3': 2, '5': 1 }
     */
    var countBy = createAggregator(function(result, value, key) {
      (hasOwnProperty.call(result, key) ? result[key]++ : result[key] = 1);
    });

    /**
     * Checks if the given callback returns truey value for **all** elements of
     * a collection. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias all
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {boolean} Returns `true` if all elements passed the callback check,
     *  else `false`.
     * @example
     *
     * _.every([true, 1, null, 'yes']);
     * // => false
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.every(characters, 'age');
     * // => true
     *
     * // using "_.where" callback shorthand
     * _.every(characters, { 'age': 36 });
     * // => false
     */
    function every(collection, callback, thisArg) {
      var result = true;
      callback = lodash.createCallback(callback, thisArg, 3);

      var index = -1,
          length = collection ? collection.length : 0;

      if (typeof length == 'number') {
        while (++index < length) {
          if (!(result = !!callback(collection[index], index, collection))) {
            break;
          }
        }
      } else {
        forOwn(collection, function(value, index, collection) {
          return (result = !!callback(value, index, collection));
        });
      }
      return result;
    }

    /**
     * Iterates over elements of a collection, returning an array of all elements
     * the callback returns truey for. The callback is bound to `thisArg` and
     * invoked with three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias select
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of elements that passed the callback check.
     * @example
     *
     * var evens = _.filter([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });
     * // => [2, 4, 6]
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36, 'blocked': false },
     *   { 'name': 'fred',   'age': 40, 'blocked': true }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.filter(characters, 'blocked');
     * // => [{ 'name': 'fred', 'age': 40, 'blocked': true }]
     *
     * // using "_.where" callback shorthand
     * _.filter(characters, { 'age': 36 });
     * // => [{ 'name': 'barney', 'age': 36, 'blocked': false }]
     */
    function filter(collection, callback, thisArg) {
      var result = [];
      callback = lodash.createCallback(callback, thisArg, 3);

      var index = -1,
          length = collection ? collection.length : 0;

      if (typeof length == 'number') {
        while (++index < length) {
          var value = collection[index];
          if (callback(value, index, collection)) {
            result.push(value);
          }
        }
      } else {
        forOwn(collection, function(value, index, collection) {
          if (callback(value, index, collection)) {
            result.push(value);
          }
        });
      }
      return result;
    }

    /**
     * Iterates over elements of a collection, returning the first element that
     * the callback returns truey for. The callback is bound to `thisArg` and
     * invoked with three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias detect, findWhere
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the found element, else `undefined`.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36, 'blocked': false },
     *   { 'name': 'fred',    'age': 40, 'blocked': true },
     *   { 'name': 'pebbles', 'age': 1,  'blocked': false }
     * ];
     *
     * _.find(characters, function(chr) {
     *   return chr.age < 40;
     * });
     * // => { 'name': 'barney', 'age': 36, 'blocked': false }
     *
     * // using "_.where" callback shorthand
     * _.find(characters, { 'age': 1 });
     * // =>  { 'name': 'pebbles', 'age': 1, 'blocked': false }
     *
     * // using "_.pluck" callback shorthand
     * _.find(characters, 'blocked');
     * // => { 'name': 'fred', 'age': 40, 'blocked': true }
     */
    function find(collection, callback, thisArg) {
      callback = lodash.createCallback(callback, thisArg, 3);

      var index = -1,
          length = collection ? collection.length : 0;

      if (typeof length == 'number') {
        while (++index < length) {
          var value = collection[index];
          if (callback(value, index, collection)) {
            return value;
          }
        }
      } else {
        var result;
        forOwn(collection, function(value, index, collection) {
          if (callback(value, index, collection)) {
            result = value;
            return false;
          }
        });
        return result;
      }
    }

    /**
     * This method is like `_.find` except that it iterates over elements
     * of a `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the found element, else `undefined`.
     * @example
     *
     * _.findLast([1, 2, 3, 4], function(num) {
     *   return num % 2 == 1;
     * });
     * // => 3
     */
    function findLast(collection, callback, thisArg) {
      var result;
      callback = lodash.createCallback(callback, thisArg, 3);
      forEachRight(collection, function(value, index, collection) {
        if (callback(value, index, collection)) {
          result = value;
          return false;
        }
      });
      return result;
    }

    /**
     * Iterates over elements of a collection, executing the callback for each
     * element. The callback is bound to `thisArg` and invoked with three arguments;
     * (value, index|key, collection). Callbacks may exit iteration early by
     * explicitly returning `false`.
     *
     * Note: As with other "Collections" methods, objects with a `length` property
     * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`
     * may be used for object iteration.
     *
     * @static
     * @memberOf _
     * @alias each
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array|Object|string} Returns `collection`.
     * @example
     *
     * _([1, 2, 3]).forEach(function(num) { console.log(num); }).join(',');
     * // => logs each number and returns '1,2,3'
     *
     * _.forEach({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { console.log(num); });
     * // => logs each number and returns the object (property order is not guaranteed across environments)
     */
    function forEach(collection, callback, thisArg) {
      var index = -1,
          length = collection ? collection.length : 0;

      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
      if (typeof length == 'number') {
        while (++index < length) {
          if (callback(collection[index], index, collection) === false) {
            break;
          }
        }
      } else {
        forOwn(collection, callback);
      }
      return collection;
    }

    /**
     * This method is like `_.forEach` except that it iterates over elements
     * of a `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @alias eachRight
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array|Object|string} Returns `collection`.
     * @example
     *
     * _([1, 2, 3]).forEachRight(function(num) { console.log(num); }).join(',');
     * // => logs each number from right to left and returns '3,2,1'
     */
    function forEachRight(collection, callback, thisArg) {
      var length = collection ? collection.length : 0;
      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);
      if (typeof length == 'number') {
        while (length--) {
          if (callback(collection[length], length, collection) === false) {
            break;
          }
        }
      } else {
        var props = keys(collection);
        length = props.length;
        forOwn(collection, function(value, key, collection) {
          key = props ? props[--length] : --length;
          return callback(collection[key], key, collection);
        });
      }
      return collection;
    }

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of a collection through the callback. The corresponding value
     * of each key is an array of the elements responsible for generating the key.
     * The callback is bound to `thisArg` and invoked with three arguments;
     * (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.groupBy([4.2, 6.1, 6.4], function(num) { return Math.floor(num); });
     * // => { '4': [4.2], '6': [6.1, 6.4] }
     *
     * _.groupBy([4.2, 6.1, 6.4], function(num) { return this.floor(num); }, Math);
     * // => { '4': [4.2], '6': [6.1, 6.4] }
     *
     * // using "_.pluck" callback shorthand
     * _.groupBy(['one', 'two', 'three'], 'length');
     * // => { '3': ['one', 'two'], '5': ['three'] }
     */
    var groupBy = createAggregator(function(result, value, key) {
      (hasOwnProperty.call(result, key) ? result[key] : result[key] = []).push(value);
    });

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of the collection through the given callback. The corresponding
     * value of each key is the last element responsible for generating the key.
     * The callback is bound to `thisArg` and invoked with three arguments;
     * (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * var keys = [
     *   { 'dir': 'left', 'code': 97 },
     *   { 'dir': 'right', 'code': 100 }
     * ];
     *
     * _.indexBy(keys, 'dir');
     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }
     *
     * _.indexBy(keys, function(key) { return String.fromCharCode(key.code); });
     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
     *
     * _.indexBy(characters, function(key) { this.fromCharCode(key.code); }, String);
     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
     */
    var indexBy = createAggregator(function(result, value, key) {
      result[key] = value;
    });

    /**
     * Invokes the method named by `methodName` on each element in the `collection`
     * returning an array of the results of each invoked method. Additional arguments
     * will be provided to each invoked method. If `methodName` is a function it
     * will be invoked for, and `this` bound to, each element in the `collection`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|string} methodName The name of the method to invoke or
     *  the function invoked per iteration.
     * @param {...*} [arg] Arguments to invoke the method with.
     * @returns {Array} Returns a new array of the results of each invoked method.
     * @example
     *
     * _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');
     * // => [[1, 5, 7], [1, 2, 3]]
     *
     * _.invoke([123, 456], String.prototype.split, '');
     * // => [['1', '2', '3'], ['4', '5', '6']]
     */
    function invoke(collection, methodName) {
      var args = slice(arguments, 2),
          index = -1,
          isFunc = typeof methodName == 'function',
          length = collection ? collection.length : 0,
          result = Array(typeof length == 'number' ? length : 0);

      forEach(collection, function(value) {
        result[++index] = (isFunc ? methodName : value[methodName]).apply(value, args);
      });
      return result;
    }

    /**
     * Creates an array of values by running each element in the collection
     * through the callback. The callback is bound to `thisArg` and invoked with
     * three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias collect
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of the results of each `callback` execution.
     * @example
     *
     * _.map([1, 2, 3], function(num) { return num * 3; });
     * // => [3, 6, 9]
     *
     * _.map({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { return num * 3; });
     * // => [3, 6, 9] (property order is not guaranteed across environments)
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.map(characters, 'name');
     * // => ['barney', 'fred']
     */
    function map(collection, callback, thisArg) {
      var index = -1,
          length = collection ? collection.length : 0;

      callback = lodash.createCallback(callback, thisArg, 3);
      if (typeof length == 'number') {
        var result = Array(length);
        while (++index < length) {
          result[index] = callback(collection[index], index, collection);
        }
      } else {
        result = [];
        forOwn(collection, function(value, key, collection) {
          result[++index] = callback(value, key, collection);
        });
      }
      return result;
    }

    /**
     * Retrieves the maximum value of a collection. If the collection is empty or
     * falsey `-Infinity` is returned. If a callback is provided it will be executed
     * for each value in the collection to generate the criterion by which the value
     * is ranked. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the maximum value.
     * @example
     *
     * _.max([4, 2, 8, 6]);
     * // => 8
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * _.max(characters, function(chr) { return chr.age; });
     * // => { 'name': 'fred', 'age': 40 };
     *
     * // using "_.pluck" callback shorthand
     * _.max(characters, 'age');
     * // => { 'name': 'fred', 'age': 40 };
     */
    function max(collection, callback, thisArg) {
      var computed = -Infinity,
          result = computed;

      // allows working with functions like `_.map` without using
      // their `index` argument as a callback
      if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {
        callback = null;
      }
      if (callback == null && isArray(collection)) {
        var index = -1,
            length = collection.length;

        while (++index < length) {
          var value = collection[index];
          if (value > result) {
            result = value;
          }
        }
      } else {
        callback = (callback == null && isString(collection))
          ? charAtCallback
          : lodash.createCallback(callback, thisArg, 3);

        forEach(collection, function(value, index, collection) {
          var current = callback(value, index, collection);
          if (current > computed) {
            computed = current;
            result = value;
          }
        });
      }
      return result;
    }

    /**
     * Retrieves the minimum value of a collection. If the collection is empty or
     * falsey `Infinity` is returned. If a callback is provided it will be executed
     * for each value in the collection to generate the criterion by which the value
     * is ranked. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the minimum value.
     * @example
     *
     * _.min([4, 2, 8, 6]);
     * // => 2
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * _.min(characters, function(chr) { return chr.age; });
     * // => { 'name': 'barney', 'age': 36 };
     *
     * // using "_.pluck" callback shorthand
     * _.min(characters, 'age');
     * // => { 'name': 'barney', 'age': 36 };
     */
    function min(collection, callback, thisArg) {
      var computed = Infinity,
          result = computed;

      // allows working with functions like `_.map` without using
      // their `index` argument as a callback
      if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {
        callback = null;
      }
      if (callback == null && isArray(collection)) {
        var index = -1,
            length = collection.length;

        while (++index < length) {
          var value = collection[index];
          if (value < result) {
            result = value;
          }
        }
      } else {
        callback = (callback == null && isString(collection))
          ? charAtCallback
          : lodash.createCallback(callback, thisArg, 3);

        forEach(collection, function(value, index, collection) {
          var current = callback(value, index, collection);
          if (current < computed) {
            computed = current;
            result = value;
          }
        });
      }
      return result;
    }

    /**
     * Retrieves the value of a specified property from all elements in the collection.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {string} property The name of the property to pluck.
     * @returns {Array} Returns a new array of property values.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * _.pluck(characters, 'name');
     * // => ['barney', 'fred']
     */
    var pluck = map;

    /**
     * Reduces a collection to a value which is the accumulated result of running
     * each element in the collection through the callback, where each successive
     * callback execution consumes the return value of the previous execution. If
     * `accumulator` is not provided the first element of the collection will be
     * used as the initial `accumulator` value. The callback is bound to `thisArg`
     * and invoked with four arguments; (accumulator, value, index|key, collection).
     *
     * @static
     * @memberOf _
     * @alias foldl, inject
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [accumulator] Initial value of the accumulator.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * var sum = _.reduce([1, 2, 3], function(sum, num) {
     *   return sum + num;
     * });
     * // => 6
     *
     * var mapped = _.reduce({ 'a': 1, 'b': 2, 'c': 3 }, function(result, num, key) {
     *   result[key] = num * 3;
     *   return result;
     * }, {});
     * // => { 'a': 3, 'b': 6, 'c': 9 }
     */
    function reduce(collection, callback, accumulator, thisArg) {
      if (!collection) return accumulator;
      var noaccum = arguments.length < 3;
      callback = lodash.createCallback(callback, thisArg, 4);

      var index = -1,
          length = collection.length;

      if (typeof length == 'number') {
        if (noaccum) {
          accumulator = collection[++index];
        }
        while (++index < length) {
          accumulator = callback(accumulator, collection[index], index, collection);
        }
      } else {
        forOwn(collection, function(value, index, collection) {
          accumulator = noaccum
            ? (noaccum = false, value)
            : callback(accumulator, value, index, collection)
        });
      }
      return accumulator;
    }

    /**
     * This method is like `_.reduce` except that it iterates over elements
     * of a `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @alias foldr
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function} [callback=identity] The function called per iteration.
     * @param {*} [accumulator] Initial value of the accumulator.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * var list = [[0, 1], [2, 3], [4, 5]];
     * var flat = _.reduceRight(list, function(a, b) { return a.concat(b); }, []);
     * // => [4, 5, 2, 3, 0, 1]
     */
    function reduceRight(collection, callback, accumulator, thisArg) {
      var noaccum = arguments.length < 3;
      callback = lodash.createCallback(callback, thisArg, 4);
      forEachRight(collection, function(value, index, collection) {
        accumulator = noaccum
          ? (noaccum = false, value)
          : callback(accumulator, value, index, collection);
      });
      return accumulator;
    }

    /**
     * The opposite of `_.filter` this method returns the elements of a
     * collection that the callback does **not** return truey for.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of elements that failed the callback check.
     * @example
     *
     * var odds = _.reject([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });
     * // => [1, 3, 5]
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36, 'blocked': false },
     *   { 'name': 'fred',   'age': 40, 'blocked': true }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.reject(characters, 'blocked');
     * // => [{ 'name': 'barney', 'age': 36, 'blocked': false }]
     *
     * // using "_.where" callback shorthand
     * _.reject(characters, { 'age': 36 });
     * // => [{ 'name': 'fred', 'age': 40, 'blocked': true }]
     */
    function reject(collection, callback, thisArg) {
      callback = lodash.createCallback(callback, thisArg, 3);
      return filter(collection, function(value, index, collection) {
        return !callback(value, index, collection);
      });
    }

    /**
     * Retrieves a random element or `n` random elements from a collection.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to sample.
     * @param {number} [n] The number of elements to sample.
     * @param- {Object} [guard] Allows working with functions like `_.map`
     *  without using their `index` arguments as `n`.
     * @returns {Array} Returns the random sample(s) of `collection`.
     * @example
     *
     * _.sample([1, 2, 3, 4]);
     * // => 2
     *
     * _.sample([1, 2, 3, 4], 2);
     * // => [3, 1]
     */
    function sample(collection, n, guard) {
      if (collection && typeof collection.length != 'number') {
        collection = values(collection);
      }
      if (n == null || guard) {
        return collection ? collection[baseRandom(0, collection.length - 1)] : undefined;
      }
      var result = shuffle(collection);
      result.length = nativeMin(nativeMax(0, n), result.length);
      return result;
    }

    /**
     * Creates an array of shuffled values, using a version of the Fisher-Yates
     * shuffle. See http://en.wikipedia.org/wiki/Fisher-Yates_shuffle.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to shuffle.
     * @returns {Array} Returns a new shuffled collection.
     * @example
     *
     * _.shuffle([1, 2, 3, 4, 5, 6]);
     * // => [4, 1, 6, 3, 5, 2]
     */
    function shuffle(collection) {
      var index = -1,
          length = collection ? collection.length : 0,
          result = Array(typeof length == 'number' ? length : 0);

      forEach(collection, function(value) {
        var rand = baseRandom(0, ++index);
        result[index] = result[rand];
        result[rand] = value;
      });
      return result;
    }

    /**
     * Gets the size of the `collection` by returning `collection.length` for arrays
     * and array-like objects or the number of own enumerable properties for objects.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to inspect.
     * @returns {number} Returns `collection.length` or number of own enumerable properties.
     * @example
     *
     * _.size([1, 2]);
     * // => 2
     *
     * _.size({ 'one': 1, 'two': 2, 'three': 3 });
     * // => 3
     *
     * _.size('pebbles');
     * // => 7
     */
    function size(collection) {
      var length = collection ? collection.length : 0;
      return typeof length == 'number' ? length : keys(collection).length;
    }

    /**
     * Checks if the callback returns a truey value for **any** element of a
     * collection. The function returns as soon as it finds a passing value and
     * does not iterate over the entire collection. The callback is bound to
     * `thisArg` and invoked with three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias any
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {boolean} Returns `true` if any element passed the callback check,
     *  else `false`.
     * @example
     *
     * _.some([null, 0, 'yes', false], Boolean);
     * // => true
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36, 'blocked': false },
     *   { 'name': 'fred',   'age': 40, 'blocked': true }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.some(characters, 'blocked');
     * // => true
     *
     * // using "_.where" callback shorthand
     * _.some(characters, { 'age': 1 });
     * // => false
     */
    function some(collection, callback, thisArg) {
      var result;
      callback = lodash.createCallback(callback, thisArg, 3);

      var index = -1,
          length = collection ? collection.length : 0;

      if (typeof length == 'number') {
        while (++index < length) {
          if ((result = callback(collection[index], index, collection))) {
            break;
          }
        }
      } else {
        forOwn(collection, function(value, index, collection) {
          return !(result = callback(value, index, collection));
        });
      }
      return !!result;
    }

    /**
     * Creates an array of elements, sorted in ascending order by the results of
     * running each element in a collection through the callback. This method
     * performs a stable sort, that is, it will preserve the original sort order
     * of equal elements. The callback is bound to `thisArg` and invoked with
     * three arguments; (value, index|key, collection).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an array of property names is provided for `callback` the collection
     * will be sorted by each property value.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Array|Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of sorted elements.
     * @example
     *
     * _.sortBy([1, 2, 3], function(num) { return Math.sin(num); });
     * // => [3, 1, 2]
     *
     * _.sortBy([1, 2, 3], function(num) { return this.sin(num); }, Math);
     * // => [3, 1, 2]
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36 },
     *   { 'name': 'fred',    'age': 40 },
     *   { 'name': 'barney',  'age': 26 },
     *   { 'name': 'fred',    'age': 30 }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.map(_.sortBy(characters, 'age'), _.values);
     * // => [['barney', 26], ['fred', 30], ['barney', 36], ['fred', 40]]
     *
     * // sorting by multiple properties
     * _.map(_.sortBy(characters, ['name', 'age']), _.values);
     * // = > [['barney', 26], ['barney', 36], ['fred', 30], ['fred', 40]]
     */
    function sortBy(collection, callback, thisArg) {
      var index = -1,
          isArr = isArray(callback),
          length = collection ? collection.length : 0,
          result = Array(typeof length == 'number' ? length : 0);

      if (!isArr) {
        callback = lodash.createCallback(callback, thisArg, 3);
      }
      forEach(collection, function(value, key, collection) {
        var object = result[++index] = getObject();
        if (isArr) {
          object.criteria = map(callback, function(key) { return value[key]; });
        } else {
          (object.criteria = getArray())[0] = callback(value, key, collection);
        }
        object.index = index;
        object.value = value;
      });

      length = result.length;
      result.sort(compareAscending);
      while (length--) {
        var object = result[length];
        result[length] = object.value;
        if (!isArr) {
          releaseArray(object.criteria);
        }
        releaseObject(object);
      }
      return result;
    }

    /**
     * Converts the `collection` to an array.
     *
     * @static
     * @memberOf _
     * @category Collections
     * @param {Array|Object|string} collection The collection to convert.
     * @returns {Array} Returns the new converted array.
     * @example
     *
     * (function() { return _.toArray(arguments).slice(1); })(1, 2, 3, 4);
     * // => [2, 3, 4]
     */
    function toArray(collection) {
      if (collection && typeof collection.length == 'number') {
        return slice(collection);
      }
      return values(collection);
    }

    /**
     * Performs a deep comparison of each element in a `collection` to the given
     * `properties` object, returning an array of all elements that have equivalent
     * property values.
     *
     * @static
     * @memberOf _
     * @type Function
     * @category Collections
     * @param {Array|Object|string} collection The collection to iterate over.
     * @param {Object} props The object of property values to filter by.
     * @returns {Array} Returns a new array of elements that have the given properties.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36, 'pets': ['hoppy'] },
     *   { 'name': 'fred',   'age': 40, 'pets': ['baby puss', 'dino'] }
     * ];
     *
     * _.where(characters, { 'age': 36 });
     * // => [{ 'name': 'barney', 'age': 36, 'pets': ['hoppy'] }]
     *
     * _.where(characters, { 'pets': ['dino'] });
     * // => [{ 'name': 'fred', 'age': 40, 'pets': ['baby puss', 'dino'] }]
     */
    var where = filter;

    /*--------------------------------------------------------------------------*/

    /**
     * Creates an array with all falsey values removed. The values `false`, `null`,
     * `0`, `""`, `undefined`, and `NaN` are all falsey.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to compact.
     * @returns {Array} Returns a new array of filtered values.
     * @example
     *
     * _.compact([0, 1, false, 2, '', 3]);
     * // => [1, 2, 3]
     */
    function compact(array) {
      var index = -1,
          length = array ? array.length : 0,
          result = [];

      while (++index < length) {
        var value = array[index];
        if (value) {
          result.push(value);
        }
      }
      return result;
    }

    /**
     * Creates an array excluding all values of the provided arrays using strict
     * equality for comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to process.
     * @param {...Array} [values] The arrays of values to exclude.
     * @returns {Array} Returns a new array of filtered values.
     * @example
     *
     * _.difference([1, 2, 3, 4, 5], [5, 2, 10]);
     * // => [1, 3, 4]
     */
    function difference(array) {
      return baseDifference(array, baseFlatten(arguments, true, true, 1));
    }

    /**
     * This method is like `_.find` except that it returns the index of the first
     * element that passes the callback check, instead of the element itself.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to search.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36, 'blocked': false },
     *   { 'name': 'fred',    'age': 40, 'blocked': true },
     *   { 'name': 'pebbles', 'age': 1,  'blocked': false }
     * ];
     *
     * _.findIndex(characters, function(chr) {
     *   return chr.age < 20;
     * });
     * // => 2
     *
     * // using "_.where" callback shorthand
     * _.findIndex(characters, { 'age': 36 });
     * // => 0
     *
     * // using "_.pluck" callback shorthand
     * _.findIndex(characters, 'blocked');
     * // => 1
     */
    function findIndex(array, callback, thisArg) {
      var index = -1,
          length = array ? array.length : 0;

      callback = lodash.createCallback(callback, thisArg, 3);
      while (++index < length) {
        if (callback(array[index], index, array)) {
          return index;
        }
      }
      return -1;
    }

    /**
     * This method is like `_.findIndex` except that it iterates over elements
     * of a `collection` from right to left.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to search.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36, 'blocked': true },
     *   { 'name': 'fred',    'age': 40, 'blocked': false },
     *   { 'name': 'pebbles', 'age': 1,  'blocked': true }
     * ];
     *
     * _.findLastIndex(characters, function(chr) {
     *   return chr.age > 30;
     * });
     * // => 1
     *
     * // using "_.where" callback shorthand
     * _.findLastIndex(characters, { 'age': 36 });
     * // => 0
     *
     * // using "_.pluck" callback shorthand
     * _.findLastIndex(characters, 'blocked');
     * // => 2
     */
    function findLastIndex(array, callback, thisArg) {
      var length = array ? array.length : 0;
      callback = lodash.createCallback(callback, thisArg, 3);
      while (length--) {
        if (callback(array[length], length, array)) {
          return length;
        }
      }
      return -1;
    }

    /**
     * Gets the first element or first `n` elements of an array. If a callback
     * is provided elements at the beginning of the array are returned as long
     * as the callback returns truey. The callback is bound to `thisArg` and
     * invoked with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias head, take
     * @category Arrays
     * @param {Array} array The array to query.
     * @param {Function|Object|number|string} [callback] The function called
     *  per element or the number of elements to return. If a property name or
     *  object is provided it will be used to create a "_.pluck" or "_.where"
     *  style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the first element(s) of `array`.
     * @example
     *
     * _.first([1, 2, 3]);
     * // => 1
     *
     * _.first([1, 2, 3], 2);
     * // => [1, 2]
     *
     * _.first([1, 2, 3], function(num) {
     *   return num < 3;
     * });
     * // => [1, 2]
     *
     * var characters = [
     *   { 'name': 'barney',  'blocked': true,  'employer': 'slate' },
     *   { 'name': 'fred',    'blocked': false, 'employer': 'slate' },
     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.first(characters, 'blocked');
     * // => [{ 'name': 'barney', 'blocked': true, 'employer': 'slate' }]
     *
     * // using "_.where" callback shorthand
     * _.pluck(_.first(characters, { 'employer': 'slate' }), 'name');
     * // => ['barney', 'fred']
     */
    function first(array, callback, thisArg) {
      var n = 0,
          length = array ? array.length : 0;

      if (typeof callback != 'number' && callback != null) {
        var index = -1;
        callback = lodash.createCallback(callback, thisArg, 3);
        while (++index < length && callback(array[index], index, array)) {
          n++;
        }
      } else {
        n = callback;
        if (n == null || thisArg) {
          return array ? array[0] : undefined;
        }
      }
      return slice(array, 0, nativeMin(nativeMax(0, n), length));
    }

    /**
     * Flattens a nested array (the nesting can be to any depth). If `isShallow`
     * is truey, the array will only be flattened a single level. If a callback
     * is provided each element of the array is passed through the callback before
     * flattening. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to flatten.
     * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new flattened array.
     * @example
     *
     * _.flatten([1, [2], [3, [[4]]]]);
     * // => [1, 2, 3, 4];
     *
     * _.flatten([1, [2], [3, [[4]]]], true);
     * // => [1, 2, 3, [[4]]];
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 30, 'pets': ['hoppy'] },
     *   { 'name': 'fred',   'age': 40, 'pets': ['baby puss', 'dino'] }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.flatten(characters, 'pets');
     * // => ['hoppy', 'baby puss', 'dino']
     */
    function flatten(array, isShallow, callback, thisArg) {
      // juggle arguments
      if (typeof isShallow != 'boolean' && isShallow != null) {
        thisArg = callback;
        callback = (typeof isShallow != 'function' && thisArg && thisArg[isShallow] === array) ? null : isShallow;
        isShallow = false;
      }
      if (callback != null) {
        array = map(array, callback, thisArg);
      }
      return baseFlatten(array, isShallow);
    }

    /**
     * Gets the index at which the first occurrence of `value` is found using
     * strict equality for comparisons, i.e. `===`. If the array is already sorted
     * providing `true` for `fromIndex` will run a faster binary search.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to search.
     * @param {*} value The value to search for.
     * @param {boolean|number} [fromIndex=0] The index to search from or `true`
     *  to perform a binary search on a sorted array.
     * @returns {number} Returns the index of the matched value or `-1`.
     * @example
     *
     * _.indexOf([1, 2, 3, 1, 2, 3], 2);
     * // => 1
     *
     * _.indexOf([1, 2, 3, 1, 2, 3], 2, 3);
     * // => 4
     *
     * _.indexOf([1, 1, 2, 2, 3, 3], 2, true);
     * // => 2
     */
    function indexOf(array, value, fromIndex) {
      if (typeof fromIndex == 'number') {
        var length = array ? array.length : 0;
        fromIndex = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex || 0);
      } else if (fromIndex) {
        var index = sortedIndex(array, value);
        return array[index] === value ? index : -1;
      }
      return baseIndexOf(array, value, fromIndex);
    }

    /**
     * Gets all but the last element or last `n` elements of an array. If a
     * callback is provided elements at the end of the array are excluded from
     * the result as long as the callback returns truey. The callback is bound
     * to `thisArg` and invoked with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to query.
     * @param {Function|Object|number|string} [callback=1] The function called
     *  per element or the number of elements to exclude. If a property name or
     *  object is provided it will be used to create a "_.pluck" or "_.where"
     *  style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a slice of `array`.
     * @example
     *
     * _.initial([1, 2, 3]);
     * // => [1, 2]
     *
     * _.initial([1, 2, 3], 2);
     * // => [1]
     *
     * _.initial([1, 2, 3], function(num) {
     *   return num > 1;
     * });
     * // => [1]
     *
     * var characters = [
     *   { 'name': 'barney',  'blocked': false, 'employer': 'slate' },
     *   { 'name': 'fred',    'blocked': true,  'employer': 'slate' },
     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.initial(characters, 'blocked');
     * // => [{ 'name': 'barney',  'blocked': false, 'employer': 'slate' }]
     *
     * // using "_.where" callback shorthand
     * _.pluck(_.initial(characters, { 'employer': 'na' }), 'name');
     * // => ['barney', 'fred']
     */
    function initial(array, callback, thisArg) {
      var n = 0,
          length = array ? array.length : 0;

      if (typeof callback != 'number' && callback != null) {
        var index = length;
        callback = lodash.createCallback(callback, thisArg, 3);
        while (index-- && callback(array[index], index, array)) {
          n++;
        }
      } else {
        n = (callback == null || thisArg) ? 1 : callback || n;
      }
      return slice(array, 0, nativeMin(nativeMax(0, length - n), length));
    }

    /**
     * Creates an array of unique values present in all provided arrays using
     * strict equality for comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {...Array} [array] The arrays to inspect.
     * @returns {Array} Returns an array of shared values.
     * @example
     *
     * _.intersection([1, 2, 3], [5, 2, 1, 4], [2, 1]);
     * // => [1, 2]
     */
    function intersection() {
      var args = [],
          argsIndex = -1,
          argsLength = arguments.length,
          caches = getArray(),
          indexOf = getIndexOf(),
          trustIndexOf = indexOf === baseIndexOf,
          seen = getArray();

      while (++argsIndex < argsLength) {
        var value = arguments[argsIndex];
        if (isArray(value) || isArguments(value)) {
          args.push(value);
          caches.push(trustIndexOf && value.length >= largeArraySize &&
            createCache(argsIndex ? args[argsIndex] : seen));
        }
      }
      var array = args[0],
          index = -1,
          length = array ? array.length : 0,
          result = [];

      outer:
      while (++index < length) {
        var cache = caches[0];
        value = array[index];

        if ((cache ? cacheIndexOf(cache, value) : indexOf(seen, value)) < 0) {
          argsIndex = argsLength;
          (cache || seen).push(value);
          while (--argsIndex) {
            cache = caches[argsIndex];
            if ((cache ? cacheIndexOf(cache, value) : indexOf(args[argsIndex], value)) < 0) {
              continue outer;
            }
          }
          result.push(value);
        }
      }
      while (argsLength--) {
        cache = caches[argsLength];
        if (cache) {
          releaseObject(cache);
        }
      }
      releaseArray(caches);
      releaseArray(seen);
      return result;
    }

    /**
     * Gets the last element or last `n` elements of an array. If a callback is
     * provided elements at the end of the array are returned as long as the
     * callback returns truey. The callback is bound to `thisArg` and invoked
     * with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to query.
     * @param {Function|Object|number|string} [callback] The function called
     *  per element or the number of elements to return. If a property name or
     *  object is provided it will be used to create a "_.pluck" or "_.where"
     *  style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {*} Returns the last element(s) of `array`.
     * @example
     *
     * _.last([1, 2, 3]);
     * // => 3
     *
     * _.last([1, 2, 3], 2);
     * // => [2, 3]
     *
     * _.last([1, 2, 3], function(num) {
     *   return num > 1;
     * });
     * // => [2, 3]
     *
     * var characters = [
     *   { 'name': 'barney',  'blocked': false, 'employer': 'slate' },
     *   { 'name': 'fred',    'blocked': true,  'employer': 'slate' },
     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.pluck(_.last(characters, 'blocked'), 'name');
     * // => ['fred', 'pebbles']
     *
     * // using "_.where" callback shorthand
     * _.last(characters, { 'employer': 'na' });
     * // => [{ 'name': 'pebbles', 'blocked': true, 'employer': 'na' }]
     */
    function last(array, callback, thisArg) {
      var n = 0,
          length = array ? array.length : 0;

      if (typeof callback != 'number' && callback != null) {
        var index = length;
        callback = lodash.createCallback(callback, thisArg, 3);
        while (index-- && callback(array[index], index, array)) {
          n++;
        }
      } else {
        n = callback;
        if (n == null || thisArg) {
          return array ? array[length - 1] : undefined;
        }
      }
      return slice(array, nativeMax(0, length - n));
    }

    /**
     * Gets the index at which the last occurrence of `value` is found using strict
     * equality for comparisons, i.e. `===`. If `fromIndex` is negative, it is used
     * as the offset from the end of the collection.
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to search.
     * @param {*} value The value to search for.
     * @param {number} [fromIndex=array.length-1] The index to search from.
     * @returns {number} Returns the index of the matched value or `-1`.
     * @example
     *
     * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2);
     * // => 4
     *
     * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2, 3);
     * // => 1
     */
    function lastIndexOf(array, value, fromIndex) {
      var index = array ? array.length : 0;
      if (typeof fromIndex == 'number') {
        index = (fromIndex < 0 ? nativeMax(0, index + fromIndex) : nativeMin(fromIndex, index - 1)) + 1;
      }
      while (index--) {
        if (array[index] === value) {
          return index;
        }
      }
      return -1;
    }

    /**
     * Removes all provided values from the given array using strict equality for
     * comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to modify.
     * @param {...*} [value] The values to remove.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [1, 2, 3, 1, 2, 3];
     * _.pull(array, 2, 3);
     * console.log(array);
     * // => [1, 1]
     */
    function pull(array) {
      var args = arguments,
          argsIndex = 0,
          argsLength = args.length,
          length = array ? array.length : 0;

      while (++argsIndex < argsLength) {
        var index = -1,
            value = args[argsIndex];
        while (++index < length) {
          if (array[index] === value) {
            splice.call(array, index--, 1);
            length--;
          }
        }
      }
      return array;
    }

    /**
     * Creates an array of numbers (positive and/or negative) progressing from
     * `start` up to but not including `end`. If `start` is less than `stop` a
     * zero-length range is created unless a negative `step` is specified.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @param {number} [step=1] The value to increment or decrement by.
     * @returns {Array} Returns a new range array.
     * @example
     *
     * _.range(4);
     * // => [0, 1, 2, 3]
     *
     * _.range(1, 5);
     * // => [1, 2, 3, 4]
     *
     * _.range(0, 20, 5);
     * // => [0, 5, 10, 15]
     *
     * _.range(0, -4, -1);
     * // => [0, -1, -2, -3]
     *
     * _.range(1, 4, 0);
     * // => [1, 1, 1]
     *
     * _.range(0);
     * // => []
     */
    function range(start, end, step) {
      start = +start || 0;
      step = typeof step == 'number' ? step : (+step || 1);

      if (end == null) {
        end = start;
        start = 0;
      }
      // use `Array(length)` so engines like Chakra and V8 avoid slower modes
      // http://youtu.be/XAqIpGU8ZZk#t=17m25s
      var index = -1,
          length = nativeMax(0, ceil((end - start) / (step || 1))),
          result = Array(length);

      while (++index < length) {
        result[index] = start;
        start += step;
      }
      return result;
    }

    /**
     * Removes all elements from an array that the callback returns truey for
     * and returns an array of removed elements. The callback is bound to `thisArg`
     * and invoked with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to modify.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a new array of removed elements.
     * @example
     *
     * var array = [1, 2, 3, 4, 5, 6];
     * var evens = _.remove(array, function(num) { return num % 2 == 0; });
     *
     * console.log(array);
     * // => [1, 3, 5]
     *
     * console.log(evens);
     * // => [2, 4, 6]
     */
    function remove(array, callback, thisArg) {
      var index = -1,
          length = array ? array.length : 0,
          result = [];

      callback = lodash.createCallback(callback, thisArg, 3);
      while (++index < length) {
        var value = array[index];
        if (callback(value, index, array)) {
          result.push(value);
          splice.call(array, index--, 1);
          length--;
        }
      }
      return result;
    }

    /**
     * The opposite of `_.initial` this method gets all but the first element or
     * first `n` elements of an array. If a callback function is provided elements
     * at the beginning of the array are excluded from the result as long as the
     * callback returns truey. The callback is bound to `thisArg` and invoked
     * with three arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias drop, tail
     * @category Arrays
     * @param {Array} array The array to query.
     * @param {Function|Object|number|string} [callback=1] The function called
     *  per element or the number of elements to exclude. If a property name or
     *  object is provided it will be used to create a "_.pluck" or "_.where"
     *  style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a slice of `array`.
     * @example
     *
     * _.rest([1, 2, 3]);
     * // => [2, 3]
     *
     * _.rest([1, 2, 3], 2);
     * // => [3]
     *
     * _.rest([1, 2, 3], function(num) {
     *   return num < 3;
     * });
     * // => [3]
     *
     * var characters = [
     *   { 'name': 'barney',  'blocked': true,  'employer': 'slate' },
     *   { 'name': 'fred',    'blocked': false,  'employer': 'slate' },
     *   { 'name': 'pebbles', 'blocked': true, 'employer': 'na' }
     * ];
     *
     * // using "_.pluck" callback shorthand
     * _.pluck(_.rest(characters, 'blocked'), 'name');
     * // => ['fred', 'pebbles']
     *
     * // using "_.where" callback shorthand
     * _.rest(characters, { 'employer': 'slate' });
     * // => [{ 'name': 'pebbles', 'blocked': true, 'employer': 'na' }]
     */
    function rest(array, callback, thisArg) {
      if (typeof callback != 'number' && callback != null) {
        var n = 0,
            index = -1,
            length = array ? array.length : 0;

        callback = lodash.createCallback(callback, thisArg, 3);
        while (++index < length && callback(array[index], index, array)) {
          n++;
        }
      } else {
        n = (callback == null || thisArg) ? 1 : nativeMax(0, callback);
      }
      return slice(array, n);
    }

    /**
     * Uses a binary search to determine the smallest index at which a value
     * should be inserted into a given sorted array in order to maintain the sort
     * order of the array. If a callback is provided it will be executed for
     * `value` and each element of `array` to compute their sort ranking. The
     * callback is bound to `thisArg` and invoked with one argument; (value).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * _.sortedIndex([20, 30, 50], 40);
     * // => 2
     *
     * // using "_.pluck" callback shorthand
     * _.sortedIndex([{ 'x': 20 }, { 'x': 30 }, { 'x': 50 }], { 'x': 40 }, 'x');
     * // => 2
     *
     * var dict = {
     *   'wordToNumber': { 'twenty': 20, 'thirty': 30, 'fourty': 40, 'fifty': 50 }
     * };
     *
     * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {
     *   return dict.wordToNumber[word];
     * });
     * // => 2
     *
     * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {
     *   return this.wordToNumber[word];
     * }, dict);
     * // => 2
     */
    function sortedIndex(array, value, callback, thisArg) {
      var low = 0,
          high = array ? array.length : low;

      // explicitly reference `identity` for better inlining in Firefox
      callback = callback ? lodash.createCallback(callback, thisArg, 1) : identity;
      value = callback(value);

      while (low < high) {
        var mid = (low + high) >>> 1;
        (callback(array[mid]) < value)
          ? low = mid + 1
          : high = mid;
      }
      return low;
    }

    /**
     * Creates an array of unique values, in order, of the provided arrays using
     * strict equality for comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {...Array} [array] The arrays to inspect.
     * @returns {Array} Returns an array of combined values.
     * @example
     *
     * _.union([1, 2, 3], [5, 2, 1, 4], [2, 1]);
     * // => [1, 2, 3, 5, 4]
     */
    function union() {
      return baseUniq(baseFlatten(arguments, true, true));
    }

    /**
     * Creates a duplicate-value-free version of an array using strict equality
     * for comparisons, i.e. `===`. If the array is sorted, providing
     * `true` for `isSorted` will use a faster algorithm. If a callback is provided
     * each element of `array` is passed through the callback before uniqueness
     * is computed. The callback is bound to `thisArg` and invoked with three
     * arguments; (value, index, array).
     *
     * If a property name is provided for `callback` the created "_.pluck" style
     * callback will return the property value of the given element.
     *
     * If an object is provided for `callback` the created "_.where" style callback
     * will return `true` for elements that have the properties of the given object,
     * else `false`.
     *
     * @static
     * @memberOf _
     * @alias unique
     * @category Arrays
     * @param {Array} array The array to process.
     * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.
     * @param {Function|Object|string} [callback=identity] The function called
     *  per iteration. If a property name or object is provided it will be used
     *  to create a "_.pluck" or "_.where" style callback, respectively.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns a duplicate-value-free array.
     * @example
     *
     * _.uniq([1, 2, 1, 3, 1]);
     * // => [1, 2, 3]
     *
     * _.uniq([1, 1, 2, 2, 3], true);
     * // => [1, 2, 3]
     *
     * _.uniq(['A', 'b', 'C', 'a', 'B', 'c'], function(letter) { return letter.toLowerCase(); });
     * // => ['A', 'b', 'C']
     *
     * _.uniq([1, 2.5, 3, 1.5, 2, 3.5], function(num) { return this.floor(num); }, Math);
     * // => [1, 2.5, 3]
     *
     * // using "_.pluck" callback shorthand
     * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');
     * // => [{ 'x': 1 }, { 'x': 2 }]
     */
    function uniq(array, isSorted, callback, thisArg) {
      // juggle arguments
      if (typeof isSorted != 'boolean' && isSorted != null) {
        thisArg = callback;
        callback = (typeof isSorted != 'function' && thisArg && thisArg[isSorted] === array) ? null : isSorted;
        isSorted = false;
      }
      if (callback != null) {
        callback = lodash.createCallback(callback, thisArg, 3);
      }
      return baseUniq(array, isSorted, callback);
    }

    /**
     * Creates an array excluding all provided values using strict equality for
     * comparisons, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {Array} array The array to filter.
     * @param {...*} [value] The values to exclude.
     * @returns {Array} Returns a new array of filtered values.
     * @example
     *
     * _.without([1, 2, 1, 0, 3, 1, 4], 0, 1);
     * // => [2, 3, 4]
     */
    function without(array) {
      return baseDifference(array, slice(arguments, 1));
    }

    /**
     * Creates an array that is the symmetric difference of the provided arrays.
     * See http://en.wikipedia.org/wiki/Symmetric_difference.
     *
     * @static
     * @memberOf _
     * @category Arrays
     * @param {...Array} [array] The arrays to inspect.
     * @returns {Array} Returns an array of values.
     * @example
     *
     * _.xor([1, 2, 3], [5, 2, 1, 4]);
     * // => [3, 5, 4]
     *
     * _.xor([1, 2, 5], [2, 3, 5], [3, 4, 5]);
     * // => [1, 4, 5]
     */
    function xor() {
      var index = -1,
          length = arguments.length;

      while (++index < length) {
        var array = arguments[index];
        if (isArray(array) || isArguments(array)) {
          var result = result
            ? baseUniq(baseDifference(result, array).concat(baseDifference(array, result)))
            : array;
        }
      }
      return result || [];
    }

    /**
     * Creates an array of grouped elements, the first of which contains the first
     * elements of the given arrays, the second of which contains the second
     * elements of the given arrays, and so on.
     *
     * @static
     * @memberOf _
     * @alias unzip
     * @category Arrays
     * @param {...Array} [array] Arrays to process.
     * @returns {Array} Returns a new array of grouped elements.
     * @example
     *
     * _.zip(['fred', 'barney'], [30, 40], [true, false]);
     * // => [['fred', 30, true], ['barney', 40, false]]
     */
    function zip() {
      var array = arguments.length > 1 ? arguments : arguments[0],
          index = -1,
          length = array ? max(pluck(array, 'length')) : 0,
          result = Array(length < 0 ? 0 : length);

      while (++index < length) {
        result[index] = pluck(array, index);
      }
      return result;
    }

    /**
     * Creates an object composed from arrays of `keys` and `values`. Provide
     * either a single two dimensional array, i.e. `[[key1, value1], [key2, value2]]`
     * or two arrays, one of `keys` and one of corresponding `values`.
     *
     * @static
     * @memberOf _
     * @alias object
     * @category Arrays
     * @param {Array} keys The array of keys.
     * @param {Array} [values=[]] The array of values.
     * @returns {Object} Returns an object composed of the given keys and
     *  corresponding values.
     * @example
     *
     * _.zipObject(['fred', 'barney'], [30, 40]);
     * // => { 'fred': 30, 'barney': 40 }
     */
    function zipObject(keys, values) {
      var index = -1,
          length = keys ? keys.length : 0,
          result = {};

      if (!values && length && !isArray(keys[0])) {
        values = [];
      }
      while (++index < length) {
        var key = keys[index];
        if (values) {
          result[key] = values[index];
        } else if (key) {
          result[key[0]] = key[1];
        }
      }
      return result;
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Creates a function that executes `func`, with  the `this` binding and
     * arguments of the created function, only after being called `n` times.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {number} n The number of times the function must be called before
     *  `func` is executed.
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var saves = ['profile', 'settings'];
     *
     * var done = _.after(saves.length, function() {
     *   console.log('Done saving!');
     * });
     *
     * _.forEach(saves, function(type) {
     *   asyncSave({ 'type': type, 'complete': done });
     * });
     * // => logs 'Done saving!', after all saves have completed
     */
    function after(n, func) {
      if (!isFunction(func)) {
        throw new TypeError;
      }
      return function() {
        if (--n < 1) {
          return func.apply(this, arguments);
        }
      };
    }

    /**
     * Creates a function that, when called, invokes `func` with the `this`
     * binding of `thisArg` and prepends any additional `bind` arguments to those
     * provided to the bound function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to bind.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {...*} [arg] Arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * var func = function(greeting) {
     *   return greeting + ' ' + this.name;
     * };
     *
     * func = _.bind(func, { 'name': 'fred' }, 'hi');
     * func();
     * // => 'hi fred'
     */
    function bind(func, thisArg) {
      return arguments.length > 2
        ? createWrapper(func, 17, slice(arguments, 2), null, thisArg)
        : createWrapper(func, 1, null, null, thisArg);
    }

    /**
     * Binds methods of an object to the object itself, overwriting the existing
     * method. Method names may be specified as individual arguments or as arrays
     * of method names. If no method names are provided all the function properties
     * of `object` will be bound.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Object} object The object to bind and assign the bound methods to.
     * @param {...string} [methodName] The object method names to
     *  bind, specified as individual method names or arrays of method names.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var view = {
     *   'label': 'docs',
     *   'onClick': function() { console.log('clicked ' + this.label); }
     * };
     *
     * _.bindAll(view);
     * jQuery('#docs').on('click', view.onClick);
     * // => logs 'clicked docs', when the button is clicked
     */
    function bindAll(object) {
      var funcs = arguments.length > 1 ? baseFlatten(arguments, true, false, 1) : functions(object),
          index = -1,
          length = funcs.length;

      while (++index < length) {
        var key = funcs[index];
        object[key] = createWrapper(object[key], 1, null, null, object);
      }
      return object;
    }

    /**
     * Creates a function that, when called, invokes the method at `object[key]`
     * and prepends any additional `bindKey` arguments to those provided to the bound
     * function. This method differs from `_.bind` by allowing bound functions to
     * reference methods that will be redefined or don't yet exist.
     * See http://michaux.ca/articles/lazy-function-definition-pattern.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Object} object The object the method belongs to.
     * @param {string} key The key of the method.
     * @param {...*} [arg] Arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * var object = {
     *   'name': 'fred',
     *   'greet': function(greeting) {
     *     return greeting + ' ' + this.name;
     *   }
     * };
     *
     * var func = _.bindKey(object, 'greet', 'hi');
     * func();
     * // => 'hi fred'
     *
     * object.greet = function(greeting) {
     *   return greeting + 'ya ' + this.name + '!';
     * };
     *
     * func();
     * // => 'hiya fred!'
     */
    function bindKey(object, key) {
      return arguments.length > 2
        ? createWrapper(key, 19, slice(arguments, 2), null, object)
        : createWrapper(key, 3, null, null, object);
    }

    /**
     * Creates a function that is the composition of the provided functions,
     * where each function consumes the return value of the function that follows.
     * For example, composing the functions `f()`, `g()`, and `h()` produces `f(g(h()))`.
     * Each function is executed with the `this` binding of the composed function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {...Function} [func] Functions to compose.
     * @returns {Function} Returns the new composed function.
     * @example
     *
     * var realNameMap = {
     *   'pebbles': 'penelope'
     * };
     *
     * var format = function(name) {
     *   name = realNameMap[name.toLowerCase()] || name;
     *   return name.charAt(0).toUpperCase() + name.slice(1).toLowerCase();
     * };
     *
     * var greet = function(formatted) {
     *   return 'Hiya ' + formatted + '!';
     * };
     *
     * var welcome = _.compose(greet, format);
     * welcome('pebbles');
     * // => 'Hiya Penelope!'
     */
    function compose() {
      var funcs = arguments,
          length = funcs.length;

      while (length--) {
        if (!isFunction(funcs[length])) {
          throw new TypeError;
        }
      }
      return function() {
        var args = arguments,
            length = funcs.length;

        while (length--) {
          args = [funcs[length].apply(this, args)];
        }
        return args[0];
      };
    }

    /**
     * Creates a function which accepts one or more arguments of `func` that when
     * invoked either executes `func` returning its result, if all `func` arguments
     * have been provided, or returns a function that accepts one or more of the
     * remaining `func` arguments, and so on. The arity of `func` can be specified
     * if `func.length` is not sufficient.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to curry.
     * @param {number} [arity=func.length] The arity of `func`.
     * @returns {Function} Returns the new curried function.
     * @example
     *
     * var curried = _.curry(function(a, b, c) {
     *   console.log(a + b + c);
     * });
     *
     * curried(1)(2)(3);
     * // => 6
     *
     * curried(1, 2)(3);
     * // => 6
     *
     * curried(1, 2, 3);
     * // => 6
     */
    function curry(func, arity) {
      arity = typeof arity == 'number' ? arity : (+arity || func.length);
      return createWrapper(func, 4, null, null, null, arity);
    }

    /**
     * Creates a function that will delay the execution of `func` until after
     * `wait` milliseconds have elapsed since the last time it was invoked.
     * Provide an options object to indicate that `func` should be invoked on
     * the leading and/or trailing edge of the `wait` timeout. Subsequent calls
     * to the debounced function will return the result of the last `func` call.
     *
     * Note: If `leading` and `trailing` options are `true` `func` will be called
     * on the trailing edge of the timeout only if the the debounced function is
     * invoked more than once during the `wait` timeout.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to debounce.
     * @param {number} wait The number of milliseconds to delay.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.leading=false] Specify execution on the leading edge of the timeout.
     * @param {number} [options.maxWait] The maximum time `func` is allowed to be delayed before it's called.
     * @param {boolean} [options.trailing=true] Specify execution on the trailing edge of the timeout.
     * @returns {Function} Returns the new debounced function.
     * @example
     *
     * // avoid costly calculations while the window size is in flux
     * var lazyLayout = _.debounce(calculateLayout, 150);
     * jQuery(window).on('resize', lazyLayout);
     *
     * // execute `sendMail` when the click event is fired, debouncing subsequent calls
     * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {
     *   'leading': true,
     *   'trailing': false
     * });
     *
     * // ensure `batchLog` is executed once after 1 second of debounced calls
     * var source = new EventSource('/stream');
     * source.addEventListener('message', _.debounce(batchLog, 250, {
     *   'maxWait': 1000
     * }, false);
     */
    function debounce(func, wait, options) {
      var args,
          maxTimeoutId,
          result,
          stamp,
          thisArg,
          timeoutId,
          trailingCall,
          lastCalled = 0,
          maxWait = false,
          trailing = true;

      if (!isFunction(func)) {
        throw new TypeError;
      }
      wait = nativeMax(0, wait) || 0;
      if (options === true) {
        var leading = true;
        trailing = false;
      } else if (isObject(options)) {
        leading = options.leading;
        maxWait = 'maxWait' in options && (nativeMax(wait, options.maxWait) || 0);
        trailing = 'trailing' in options ? options.trailing : trailing;
      }
      var delayed = function() {
        var remaining = wait - (now() - stamp);
        if (remaining <= 0) {
          if (maxTimeoutId) {
            clearTimeout(maxTimeoutId);
          }
          var isCalled = trailingCall;
          maxTimeoutId = timeoutId = trailingCall = undefined;
          if (isCalled) {
            lastCalled = now();
            result = func.apply(thisArg, args);
            if (!timeoutId && !maxTimeoutId) {
              args = thisArg = null;
            }
          }
        } else {
          timeoutId = setTimeout(delayed, remaining);
        }
      };

      var maxDelayed = function() {
        if (timeoutId) {
          clearTimeout(timeoutId);
        }
        maxTimeoutId = timeoutId = trailingCall = undefined;
        if (trailing || (maxWait !== wait)) {
          lastCalled = now();
          result = func.apply(thisArg, args);
          if (!timeoutId && !maxTimeoutId) {
            args = thisArg = null;
          }
        }
      };

      return function() {
        args = arguments;
        stamp = now();
        thisArg = this;
        trailingCall = trailing && (timeoutId || !leading);

        if (maxWait === false) {
          var leadingCall = leading && !timeoutId;
        } else {
          if (!maxTimeoutId && !leading) {
            lastCalled = stamp;
          }
          var remaining = maxWait - (stamp - lastCalled),
              isCalled = remaining <= 0;

          if (isCalled) {
            if (maxTimeoutId) {
              maxTimeoutId = clearTimeout(maxTimeoutId);
            }
            lastCalled = stamp;
            result = func.apply(thisArg, args);
          }
          else if (!maxTimeoutId) {
            maxTimeoutId = setTimeout(maxDelayed, remaining);
          }
        }
        if (isCalled && timeoutId) {
          timeoutId = clearTimeout(timeoutId);
        }
        else if (!timeoutId && wait !== maxWait) {
          timeoutId = setTimeout(delayed, wait);
        }
        if (leadingCall) {
          isCalled = true;
          result = func.apply(thisArg, args);
        }
        if (isCalled && !timeoutId && !maxTimeoutId) {
          args = thisArg = null;
        }
        return result;
      };
    }

    /**
     * Defers executing the `func` function until the current call stack has cleared.
     * Additional arguments will be provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to defer.
     * @param {...*} [arg] Arguments to invoke the function with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.defer(function(text) { console.log(text); }, 'deferred');
     * // logs 'deferred' after one or more milliseconds
     */
    function defer(func) {
      if (!isFunction(func)) {
        throw new TypeError;
      }
      var args = slice(arguments, 1);
      return setTimeout(function() { func.apply(undefined, args); }, 1);
    }

    /**
     * Executes the `func` function after `wait` milliseconds. Additional arguments
     * will be provided to `func` when it is invoked.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to delay.
     * @param {number} wait The number of milliseconds to delay execution.
     * @param {...*} [arg] Arguments to invoke the function with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.delay(function(text) { console.log(text); }, 1000, 'later');
     * // => logs 'later' after one second
     */
    function delay(func, wait) {
      if (!isFunction(func)) {
        throw new TypeError;
      }
      var args = slice(arguments, 2);
      return setTimeout(function() { func.apply(undefined, args); }, wait);
    }

    /**
     * Creates a function that memoizes the result of `func`. If `resolver` is
     * provided it will be used to determine the cache key for storing the result
     * based on the arguments provided to the memoized function. By default, the
     * first argument provided to the memoized function is used as the cache key.
     * The `func` is executed with the `this` binding of the memoized function.
     * The result cache is exposed as the `cache` property on the memoized function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to have its output memoized.
     * @param {Function} [resolver] A function used to resolve the cache key.
     * @returns {Function} Returns the new memoizing function.
     * @example
     *
     * var fibonacci = _.memoize(function(n) {
     *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
     * });
     *
     * fibonacci(9)
     * // => 34
     *
     * var data = {
     *   'fred': { 'name': 'fred', 'age': 40 },
     *   'pebbles': { 'name': 'pebbles', 'age': 1 }
     * };
     *
     * // modifying the result cache
     * var get = _.memoize(function(name) { return data[name]; }, _.identity);
     * get('pebbles');
     * // => { 'name': 'pebbles', 'age': 1 }
     *
     * get.cache.pebbles.name = 'penelope';
     * get('pebbles');
     * // => { 'name': 'penelope', 'age': 1 }
     */
    function memoize(func, resolver) {
      if (!isFunction(func)) {
        throw new TypeError;
      }
      var memoized = function() {
        var cache = memoized.cache,
            key = resolver ? resolver.apply(this, arguments) : keyPrefix + arguments[0];

        return hasOwnProperty.call(cache, key)
          ? cache[key]
          : (cache[key] = func.apply(this, arguments));
      }
      memoized.cache = {};
      return memoized;
    }

    /**
     * Creates a function that is restricted to execute `func` once. Repeat calls to
     * the function will return the value of the first call. The `func` is executed
     * with the `this` binding of the created function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var initialize = _.once(createApplication);
     * initialize();
     * initialize();
     * // `initialize` executes `createApplication` once
     */
    function once(func) {
      var ran,
          result;

      if (!isFunction(func)) {
        throw new TypeError;
      }
      return function() {
        if (ran) {
          return result;
        }
        ran = true;
        result = func.apply(this, arguments);

        // clear the `func` variable so the function may be garbage collected
        func = null;
        return result;
      };
    }

    /**
     * Creates a function that, when called, invokes `func` with any additional
     * `partial` arguments prepended to those provided to the new function. This
     * method is similar to `_.bind` except it does **not** alter the `this` binding.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [arg] Arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * var greet = function(greeting, name) { return greeting + ' ' + name; };
     * var hi = _.partial(greet, 'hi');
     * hi('fred');
     * // => 'hi fred'
     */
    function partial(func) {
      return createWrapper(func, 16, slice(arguments, 1));
    }

    /**
     * This method is like `_.partial` except that `partial` arguments are
     * appended to those provided to the new function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [arg] Arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * var defaultsDeep = _.partialRight(_.merge, _.defaults);
     *
     * var options = {
     *   'variable': 'data',
     *   'imports': { 'jq': $ }
     * };
     *
     * defaultsDeep(options, _.templateSettings);
     *
     * options.variable
     * // => 'data'
     *
     * options.imports
     * // => { '_': _, 'jq': $ }
     */
    function partialRight(func) {
      return createWrapper(func, 32, null, slice(arguments, 1));
    }

    /**
     * Creates a function that, when executed, will only call the `func` function
     * at most once per every `wait` milliseconds. Provide an options object to
     * indicate that `func` should be invoked on the leading and/or trailing edge
     * of the `wait` timeout. Subsequent calls to the throttled function will
     * return the result of the last `func` call.
     *
     * Note: If `leading` and `trailing` options are `true` `func` will be called
     * on the trailing edge of the timeout only if the the throttled function is
     * invoked more than once during the `wait` timeout.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {Function} func The function to throttle.
     * @param {number} wait The number of milliseconds to throttle executions to.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.leading=true] Specify execution on the leading edge of the timeout.
     * @param {boolean} [options.trailing=true] Specify execution on the trailing edge of the timeout.
     * @returns {Function} Returns the new throttled function.
     * @example
     *
     * // avoid excessively updating the position while scrolling
     * var throttled = _.throttle(updatePosition, 100);
     * jQuery(window).on('scroll', throttled);
     *
     * // execute `renewToken` when the click event is fired, but not more than once every 5 minutes
     * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {
     *   'trailing': false
     * }));
     */
    function throttle(func, wait, options) {
      var leading = true,
          trailing = true;

      if (!isFunction(func)) {
        throw new TypeError;
      }
      if (options === false) {
        leading = false;
      } else if (isObject(options)) {
        leading = 'leading' in options ? options.leading : leading;
        trailing = 'trailing' in options ? options.trailing : trailing;
      }
      debounceOptions.leading = leading;
      debounceOptions.maxWait = wait;
      debounceOptions.trailing = trailing;

      return debounce(func, wait, debounceOptions);
    }

    /**
     * Creates a function that provides `value` to the wrapper function as its
     * first argument. Additional arguments provided to the function are appended
     * to those provided to the wrapper function. The wrapper is executed with
     * the `this` binding of the created function.
     *
     * @static
     * @memberOf _
     * @category Functions
     * @param {*} value The value to wrap.
     * @param {Function} wrapper The wrapper function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var p = _.wrap(_.escape, function(func, text) {
     *   return '<p>' + func(text) + '</p>';
     * });
     *
     * p('Fred, Wilma, & Pebbles');
     * // => '<p>Fred, Wilma, &amp; Pebbles</p>'
     */
    function wrap(value, wrapper) {
      return createWrapper(wrapper, 16, [value]);
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Creates a function that returns `value`.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {*} value The value to return from the new function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var object = { 'name': 'fred' };
     * var getter = _.constant(object);
     * getter() === object;
     * // => true
     */
    function constant(value) {
      return function() {
        return value;
      };
    }

    /**
     * Produces a callback bound to an optional `thisArg`. If `func` is a property
     * name the created callback will return the property value for a given element.
     * If `func` is an object the created callback will return `true` for elements
     * that contain the equivalent object properties, otherwise it will return `false`.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {*} [func=identity] The value to convert to a callback.
     * @param {*} [thisArg] The `this` binding of the created callback.
     * @param {number} [argCount] The number of arguments the callback accepts.
     * @returns {Function} Returns a callback function.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * // wrap to create custom callback shorthands
     * _.createCallback = _.wrap(_.createCallback, function(func, callback, thisArg) {
     *   var match = /^(.+?)__([gl]t)(.+)$/.exec(callback);
     *   return !match ? func(callback, thisArg) : function(object) {
     *     return match[2] == 'gt' ? object[match[1]] > match[3] : object[match[1]] < match[3];
     *   };
     * });
     *
     * _.filter(characters, 'age__gt38');
     * // => [{ 'name': 'fred', 'age': 40 }]
     */
    function createCallback(func, thisArg, argCount) {
      var type = typeof func;
      if (func == null || type == 'function') {
        return baseCreateCallback(func, thisArg, argCount);
      }
      // handle "_.pluck" style callback shorthands
      if (type != 'object') {
        return property(func);
      }
      var props = keys(func),
          key = props[0],
          a = func[key];

      // handle "_.where" style callback shorthands
      if (props.length == 1 && a === a && !isObject(a)) {
        // fast path the common case of providing an object with a single
        // property containing a primitive value
        return function(object) {
          var b = object[key];
          return a === b && (a !== 0 || (1 / a == 1 / b));
        };
      }
      return function(object) {
        var length = props.length,
            result = false;

        while (length--) {
          if (!(result = baseIsEqual(object[props[length]], func[props[length]], null, true))) {
            break;
          }
        }
        return result;
      };
    }

    /**
     * Converts the characters `&`, `<`, `>`, `"`, and `'` in `string` to their
     * corresponding HTML entities.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} string The string to escape.
     * @returns {string} Returns the escaped string.
     * @example
     *
     * _.escape('Fred, Wilma, & Pebbles');
     * // => 'Fred, Wilma, &amp; Pebbles'
     */
    function escape(string) {
      return string == null ? '' : String(string).replace(reUnescapedHtml, escapeHtmlChar);
    }

    /**
     * This method returns the first argument provided to it.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {*} value Any value.
     * @returns {*} Returns `value`.
     * @example
     *
     * var object = { 'name': 'fred' };
     * _.identity(object) === object;
     * // => true
     */
    function identity(value) {
      return value;
    }

    /**
     * Adds function properties of a source object to the destination object.
     * If `object` is a function methods will be added to its prototype as well.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {Function|Object} [object=lodash] object The destination object.
     * @param {Object} source The object of functions to add.
     * @param {Object} [options] The options object.
     * @param {boolean} [options.chain=true] Specify whether the functions added are chainable.
     * @example
     *
     * function capitalize(string) {
     *   return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();
     * }
     *
     * _.mixin({ 'capitalize': capitalize });
     * _.capitalize('fred');
     * // => 'Fred'
     *
     * _('fred').capitalize().value();
     * // => 'Fred'
     *
     * _.mixin({ 'capitalize': capitalize }, { 'chain': false });
     * _('fred').capitalize();
     * // => 'Fred'
     */
    function mixin(object, source, options) {
      var chain = true,
          methodNames = source && functions(source);

      if (!source || (!options && !methodNames.length)) {
        if (options == null) {
          options = source;
        }
        ctor = lodashWrapper;
        source = object;
        object = lodash;
        methodNames = functions(source);
      }
      if (options === false) {
        chain = false;
      } else if (isObject(options) && 'chain' in options) {
        chain = options.chain;
      }
      var ctor = object,
          isFunc = isFunction(ctor);

      forEach(methodNames, function(methodName) {
        var func = object[methodName] = source[methodName];
        if (isFunc) {
          ctor.prototype[methodName] = function() {
            var chainAll = this.__chain__,
                value = this.__wrapped__,
                args = [value];

            push.apply(args, arguments);
            var result = func.apply(object, args);
            if (chain || chainAll) {
              if (value === result && isObject(result)) {
                return this;
              }
              result = new ctor(result);
              result.__chain__ = chainAll;
            }
            return result;
          };
        }
      });
    }

    /**
     * Reverts the '_' variable to its previous value and returns a reference to
     * the `lodash` function.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @returns {Function} Returns the `lodash` function.
     * @example
     *
     * var lodash = _.noConflict();
     */
    function noConflict() {
      context._ = oldDash;
      return this;
    }

    /**
     * A no-operation function.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @example
     *
     * var object = { 'name': 'fred' };
     * _.noop(object) === undefined;
     * // => true
     */
    function noop() {
      // no operation performed
    }

    /**
     * Gets the number of milliseconds that have elapsed since the Unix epoch
     * (1 January 1970 00:00:00 UTC).
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @example
     *
     * var stamp = _.now();
     * _.defer(function() { console.log(_.now() - stamp); });
     * // => logs the number of milliseconds it took for the deferred function to be called
     */
    var now = isNative(now = Date.now) && now || function() {
      return new Date().getTime();
    };

    /**
     * Converts the given value into an integer of the specified radix.
     * If `radix` is `undefined` or `0` a `radix` of `10` is used unless the
     * `value` is a hexadecimal, in which case a `radix` of `16` is used.
     *
     * Note: This method avoids differences in native ES3 and ES5 `parseInt`
     * implementations. See http://es5.github.io/#E.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} value The value to parse.
     * @param {number} [radix] The radix used to interpret the value to parse.
     * @returns {number} Returns the new integer value.
     * @example
     *
     * _.parseInt('08');
     * // => 8
     */
    var parseInt = nativeParseInt(whitespace + '08') == 8 ? nativeParseInt : function(value, radix) {
      // Firefox < 21 and Opera < 15 follow the ES3 specified implementation of `parseInt`
      return nativeParseInt(isString(value) ? value.replace(reLeadingSpacesAndZeros, '') : value, radix || 0);
    };

    /**
     * Creates a "_.pluck" style function, which returns the `key` value of a
     * given object.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} key The name of the property to retrieve.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var characters = [
     *   { 'name': 'fred',   'age': 40 },
     *   { 'name': 'barney', 'age': 36 }
     * ];
     *
     * var getName = _.property('name');
     *
     * _.map(characters, getName);
     * // => ['barney', 'fred']
     *
     * _.sortBy(characters, getName);
     * // => [{ 'name': 'barney', 'age': 36 }, { 'name': 'fred',   'age': 40 }]
     */
    function property(key) {
      return function(object) {
        return object[key];
      };
    }

    /**
     * Produces a random number between `min` and `max` (inclusive). If only one
     * argument is provided a number between `0` and the given number will be
     * returned. If `floating` is truey or either `min` or `max` are floats a
     * floating-point number will be returned instead of an integer.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {number} [min=0] The minimum possible value.
     * @param {number} [max=1] The maximum possible value.
     * @param {boolean} [floating=false] Specify returning a floating-point number.
     * @returns {number} Returns a random number.
     * @example
     *
     * _.random(0, 5);
     * // => an integer between 0 and 5
     *
     * _.random(5);
     * // => also an integer between 0 and 5
     *
     * _.random(5, true);
     * // => a floating-point number between 0 and 5
     *
     * _.random(1.2, 5.2);
     * // => a floating-point number between 1.2 and 5.2
     */
    function random(min, max, floating) {
      var noMin = min == null,
          noMax = max == null;

      if (floating == null) {
        if (typeof min == 'boolean' && noMax) {
          floating = min;
          min = 1;
        }
        else if (!noMax && typeof max == 'boolean') {
          floating = max;
          noMax = true;
        }
      }
      if (noMin && noMax) {
        max = 1;
      }
      min = +min || 0;
      if (noMax) {
        max = min;
        min = 0;
      } else {
        max = +max || 0;
      }
      if (floating || min % 1 || max % 1) {
        var rand = nativeRandom();
        return nativeMin(min + (rand * (max - min + parseFloat('1e-' + ((rand +'').length - 1)))), max);
      }
      return baseRandom(min, max);
    }

    /**
     * Resolves the value of property `key` on `object`. If `key` is a function
     * it will be invoked with the `this` binding of `object` and its result returned,
     * else the property value is returned. If `object` is falsey then `undefined`
     * is returned.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {Object} object The object to inspect.
     * @param {string} key The name of the property to resolve.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * var object = {
     *   'cheese': 'crumpets',
     *   'stuff': function() {
     *     return 'nonsense';
     *   }
     * };
     *
     * _.result(object, 'cheese');
     * // => 'crumpets'
     *
     * _.result(object, 'stuff');
     * // => 'nonsense'
     */
    function result(object, key) {
      if (object) {
        var value = object[key];
        return isFunction(value) ? object[key]() : value;
      }
    }

    /**
     * A micro-templating method that handles arbitrary delimiters, preserves
     * whitespace, and correctly escapes quotes within interpolated code.
     *
     * Note: In the development build, `_.template` utilizes sourceURLs for easier
     * debugging. See http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl
     *
     * For more information on precompiling templates see:
     * http://lodash.com/custom-builds
     *
     * For more information on Chrome extension sandboxes see:
     * http://developer.chrome.com/stable/extensions/sandboxingEval.html
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} text The template text.
     * @param {Object} data The data object used to populate the text.
     * @param {Object} [options] The options object.
     * @param {RegExp} [options.escape] The "escape" delimiter.
     * @param {RegExp} [options.evaluate] The "evaluate" delimiter.
     * @param {Object} [options.imports] An object to import into the template as local variables.
     * @param {RegExp} [options.interpolate] The "interpolate" delimiter.
     * @param {string} [sourceURL] The sourceURL of the template's compiled source.
     * @param {string} [variable] The data object variable name.
     * @returns {Function|string} Returns a compiled function when no `data` object
     *  is given, else it returns the interpolated text.
     * @example
     *
     * // using the "interpolate" delimiter to create a compiled template
     * var compiled = _.template('hello <%= name %>');
     * compiled({ 'name': 'fred' });
     * // => 'hello fred'
     *
     * // using the "escape" delimiter to escape HTML in data property values
     * _.template('<b><%- value %></b>', { 'value': '<script>' });
     * // => '<b>&lt;script&gt;</b>'
     *
     * // using the "evaluate" delimiter to generate HTML
     * var list = '<% _.forEach(people, function(name) { %><li><%- name %></li><% }); %>';
     * _.template(list, { 'people': ['fred', 'barney'] });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // using the ES6 delimiter as an alternative to the default "interpolate" delimiter
     * _.template('hello ${ name }', { 'name': 'pebbles' });
     * // => 'hello pebbles'
     *
     * // using the internal `print` function in "evaluate" delimiters
     * _.template('<% print("hello " + name); %>!', { 'name': 'barney' });
     * // => 'hello barney!'
     *
     * // using a custom template delimiters
     * _.templateSettings = {
     *   'interpolate': /{{([\s\S]+?)}}/g
     * };
     *
     * _.template('hello {{ name }}!', { 'name': 'mustache' });
     * // => 'hello mustache!'
     *
     * // using the `imports` option to import jQuery
     * var list = '<% jq.each(people, function(name) { %><li><%- name %></li><% }); %>';
     * _.template(list, { 'people': ['fred', 'barney'] }, { 'imports': { 'jq': jQuery } });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // using the `sourceURL` option to specify a custom sourceURL for the template
     * var compiled = _.template('hello <%= name %>', null, { 'sourceURL': '/basic/greeting.jst' });
     * compiled(data);
     * // => find the source of "greeting.jst" under the Sources tab or Resources panel of the web inspector
     *
     * // using the `variable` option to ensure a with-statement isn't used in the compiled template
     * var compiled = _.template('hi <%= data.name %>!', null, { 'variable': 'data' });
     * compiled.source;
     * // => function(data) {
     *   var __t, __p = '', __e = _.escape;
     *   __p += 'hi ' + ((__t = ( data.name )) == null ? '' : __t) + '!';
     *   return __p;
     * }
     *
     * // using the `source` property to inline compiled templates for meaningful
     * // line numbers in error messages and a stack trace
     * fs.writeFileSync(path.join(cwd, 'jst.js'), '\
     *   var JST = {\
     *     "main": ' + _.template(mainText).source + '\
     *   };\
     * ');
     */
    function template(text, data, options) {
      // based on John Resig's `tmpl` implementation
      // http://ejohn.org/blog/javascript-micro-templating/
      // and Laura Doktorova's doT.js
      // https://github.com/olado/doT
      var settings = lodash.templateSettings;
      text = String(text || '');

      // avoid missing dependencies when `iteratorTemplate` is not defined
      options = defaults({}, options, settings);

      var imports = defaults({}, options.imports, settings.imports),
          importsKeys = keys(imports),
          importsValues = values(imports);

      var isEvaluating,
          index = 0,
          interpolate = options.interpolate || reNoMatch,
          source = "__p += '";

      // compile the regexp to match each delimiter
      var reDelimiters = RegExp(
        (options.escape || reNoMatch).source + '|' +
        interpolate.source + '|' +
        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +
        (options.evaluate || reNoMatch).source + '|$'
      , 'g');

      text.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
        interpolateValue || (interpolateValue = esTemplateValue);

        // escape characters that cannot be included in string literals
        source += text.slice(index, offset).replace(reUnescapedString, escapeStringChar);

        // replace delimiters with snippets
        if (escapeValue) {
          source += "' +\n__e(" + escapeValue + ") +\n'";
        }
        if (evaluateValue) {
          isEvaluating = true;
          source += "';\n" + evaluateValue + ";\n__p += '";
        }
        if (interpolateValue) {
          source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
        }
        index = offset + match.length;

        // the JS engine embedded in Adobe products requires returning the `match`
        // string in order to produce the correct `offset` value
        return match;
      });

      source += "';\n";

      // if `variable` is not specified, wrap a with-statement around the generated
      // code to add the data object to the top of the scope chain
      var variable = options.variable,
          hasVariable = variable;

      if (!hasVariable) {
        variable = 'obj';
        source = 'with (' + variable + ') {\n' + source + '\n}\n';
      }
      // cleanup code by stripping empty strings
      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
        .replace(reEmptyStringMiddle, '$1')
        .replace(reEmptyStringTrailing, '$1;');

      // frame code as the function body
      source = 'function(' + variable + ') {\n' +
        (hasVariable ? '' : variable + ' || (' + variable + ' = {});\n') +
        "var __t, __p = '', __e = _.escape" +
        (isEvaluating
          ? ', __j = Array.prototype.join;\n' +
            "function print() { __p += __j.call(arguments, '') }\n"
          : ';\n'
        ) +
        source +
        'return __p\n}';

      // Use a sourceURL for easier debugging.
      // http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl
      var sourceURL = '\n/*\n//# sourceURL=' + (options.sourceURL || '/lodash/template/source[' + (templateCounter++) + ']') + '\n*/';

      try {
        var result = Function(importsKeys, 'return ' + source + sourceURL).apply(undefined, importsValues);
      } catch(e) {
        e.source = source;
        throw e;
      }
      if (data) {
        return result(data);
      }
      // provide the compiled function's source by its `toString` method, in
      // supported environments, or the `source` property as a convenience for
      // inlining compiled templates during the build process
      result.source = source;
      return result;
    }

    /**
     * Executes the callback `n` times, returning an array of the results
     * of each callback execution. The callback is bound to `thisArg` and invoked
     * with one argument; (index).
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {number} n The number of times to execute the callback.
     * @param {Function} callback The function called per iteration.
     * @param {*} [thisArg] The `this` binding of `callback`.
     * @returns {Array} Returns an array of the results of each `callback` execution.
     * @example
     *
     * var diceRolls = _.times(3, _.partial(_.random, 1, 6));
     * // => [3, 6, 4]
     *
     * _.times(3, function(n) { mage.castSpell(n); });
     * // => calls `mage.castSpell(n)` three times, passing `n` of `0`, `1`, and `2` respectively
     *
     * _.times(3, function(n) { this.cast(n); }, mage);
     * // => also calls `mage.castSpell(n)` three times
     */
    function times(n, callback, thisArg) {
      n = (n = +n) > -1 ? n : 0;
      var index = -1,
          result = Array(n);

      callback = baseCreateCallback(callback, thisArg, 1);
      while (++index < n) {
        result[index] = callback(index);
      }
      return result;
    }

    /**
     * The inverse of `_.escape` this method converts the HTML entities
     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to their
     * corresponding characters.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} string The string to unescape.
     * @returns {string} Returns the unescaped string.
     * @example
     *
     * _.unescape('Fred, Barney &amp; Pebbles');
     * // => 'Fred, Barney & Pebbles'
     */
    function unescape(string) {
      return string == null ? '' : String(string).replace(reEscapedHtml, unescapeHtmlChar);
    }

    /**
     * Generates a unique ID. If `prefix` is provided the ID will be appended to it.
     *
     * @static
     * @memberOf _
     * @category Utilities
     * @param {string} [prefix] The value to prefix the ID with.
     * @returns {string} Returns the unique ID.
     * @example
     *
     * _.uniqueId('contact_');
     * // => 'contact_104'
     *
     * _.uniqueId();
     * // => '105'
     */
    function uniqueId(prefix) {
      var id = ++idCounter;
      return String(prefix == null ? '' : prefix) + id;
    }

    /*--------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` object that wraps the given value with explicit
     * method chaining enabled.
     *
     * @static
     * @memberOf _
     * @category Chaining
     * @param {*} value The value to wrap.
     * @returns {Object} Returns the wrapper object.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney',  'age': 36 },
     *   { 'name': 'fred',    'age': 40 },
     *   { 'name': 'pebbles', 'age': 1 }
     * ];
     *
     * var youngest = _.chain(characters)
     *     .sortBy('age')
     *     .map(function(chr) { return chr.name + ' is ' + chr.age; })
     *     .first()
     *     .value();
     * // => 'pebbles is 1'
     */
    function chain(value) {
      value = new lodashWrapper(value);
      value.__chain__ = true;
      return value;
    }

    /**
     * Invokes `interceptor` with the `value` as the first argument and then
     * returns `value`. The purpose of this method is to "tap into" a method
     * chain in order to perform operations on intermediate results within
     * the chain.
     *
     * @static
     * @memberOf _
     * @category Chaining
     * @param {*} value The value to provide to `interceptor`.
     * @param {Function} interceptor The function to invoke.
     * @returns {*} Returns `value`.
     * @example
     *
     * _([1, 2, 3, 4])
     *  .tap(function(array) { array.pop(); })
     *  .reverse()
     *  .value();
     * // => [3, 2, 1]
     */
    function tap(value, interceptor) {
      interceptor(value);
      return value;
    }

    /**
     * Enables explicit method chaining on the wrapper object.
     *
     * @name chain
     * @memberOf _
     * @category Chaining
     * @returns {*} Returns the wrapper object.
     * @example
     *
     * var characters = [
     *   { 'name': 'barney', 'age': 36 },
     *   { 'name': 'fred',   'age': 40 }
     * ];
     *
     * // without explicit chaining
     * _(characters).first();
     * // => { 'name': 'barney', 'age': 36 }
     *
     * // with explicit chaining
     * _(characters).chain()
     *   .first()
     *   .pick('age')
     *   .value();
     * // => { 'age': 36 }
     */
    function wrapperChain() {
      this.__chain__ = true;
      return this;
    }

    /**
     * Produces the `toString` result of the wrapped value.
     *
     * @name toString
     * @memberOf _
     * @category Chaining
     * @returns {string} Returns the string result.
     * @example
     *
     * _([1, 2, 3]).toString();
     * // => '1,2,3'
     */
    function wrapperToString() {
      return String(this.__wrapped__);
    }

    /**
     * Extracts the wrapped value.
     *
     * @name valueOf
     * @memberOf _
     * @alias value
     * @category Chaining
     * @returns {*} Returns the wrapped value.
     * @example
     *
     * _([1, 2, 3]).valueOf();
     * // => [1, 2, 3]
     */
    function wrapperValueOf() {
      return this.__wrapped__;
    }

    /*--------------------------------------------------------------------------*/

    // add functions that return wrapped values when chaining
    lodash.after = after;
    lodash.assign = assign;
    lodash.at = at;
    lodash.bind = bind;
    lodash.bindAll = bindAll;
    lodash.bindKey = bindKey;
    lodash.chain = chain;
    lodash.compact = compact;
    lodash.compose = compose;
    lodash.constant = constant;
    lodash.countBy = countBy;
    lodash.create = create;
    lodash.createCallback = createCallback;
    lodash.curry = curry;
    lodash.debounce = debounce;
    lodash.defaults = defaults;
    lodash.defer = defer;
    lodash.delay = delay;
    lodash.difference = difference;
    lodash.filter = filter;
    lodash.flatten = flatten;
    lodash.forEach = forEach;
    lodash.forEachRight = forEachRight;
    lodash.forIn = forIn;
    lodash.forInRight = forInRight;
    lodash.forOwn = forOwn;
    lodash.forOwnRight = forOwnRight;
    lodash.functions = functions;
    lodash.groupBy = groupBy;
    lodash.indexBy = indexBy;
    lodash.initial = initial;
    lodash.intersection = intersection;
    lodash.invert = invert;
    lodash.invoke = invoke;
    lodash.keys = keys;
    lodash.map = map;
    lodash.mapValues = mapValues;
    lodash.max = max;
    lodash.memoize = memoize;
    lodash.merge = merge;
    lodash.min = min;
    lodash.omit = omit;
    lodash.once = once;
    lodash.pairs = pairs;
    lodash.partial = partial;
    lodash.partialRight = partialRight;
    lodash.pick = pick;
    lodash.pluck = pluck;
    lodash.property = property;
    lodash.pull = pull;
    lodash.range = range;
    lodash.reject = reject;
    lodash.remove = remove;
    lodash.rest = rest;
    lodash.shuffle = shuffle;
    lodash.sortBy = sortBy;
    lodash.tap = tap;
    lodash.throttle = throttle;
    lodash.times = times;
    lodash.toArray = toArray;
    lodash.transform = transform;
    lodash.union = union;
    lodash.uniq = uniq;
    lodash.values = values;
    lodash.where = where;
    lodash.without = without;
    lodash.wrap = wrap;
    lodash.xor = xor;
    lodash.zip = zip;
    lodash.zipObject = zipObject;

    // add aliases
    lodash.collect = map;
    lodash.drop = rest;
    lodash.each = forEach;
    lodash.eachRight = forEachRight;
    lodash.extend = assign;
    lodash.methods = functions;
    lodash.object = zipObject;
    lodash.select = filter;
    lodash.tail = rest;
    lodash.unique = uniq;
    lodash.unzip = zip;

    // add functions to `lodash.prototype`
    mixin(lodash);

    /*--------------------------------------------------------------------------*/

    // add functions that return unwrapped values when chaining
    lodash.clone = clone;
    lodash.cloneDeep = cloneDeep;
    lodash.contains = contains;
    lodash.escape = escape;
    lodash.every = every;
    lodash.find = find;
    lodash.findIndex = findIndex;
    lodash.findKey = findKey;
    lodash.findLast = findLast;
    lodash.findLastIndex = findLastIndex;
    lodash.findLastKey = findLastKey;
    lodash.has = has;
    lodash.identity = identity;
    lodash.indexOf = indexOf;
    lodash.isArguments = isArguments;
    lodash.isArray = isArray;
    lodash.isBoolean = isBoolean;
    lodash.isDate = isDate;
    lodash.isElement = isElement;
    lodash.isEmpty = isEmpty;
    lodash.isEqual = isEqual;
    lodash.isFinite = isFinite;
    lodash.isFunction = isFunction;
    lodash.isNaN = isNaN;
    lodash.isNull = isNull;
    lodash.isNumber = isNumber;
    lodash.isObject = isObject;
    lodash.isPlainObject = isPlainObject;
    lodash.isRegExp = isRegExp;
    lodash.isString = isString;
    lodash.isUndefined = isUndefined;
    lodash.lastIndexOf = lastIndexOf;
    lodash.mixin = mixin;
    lodash.noConflict = noConflict;
    lodash.noop = noop;
    lodash.now = now;
    lodash.parseInt = parseInt;
    lodash.random = random;
    lodash.reduce = reduce;
    lodash.reduceRight = reduceRight;
    lodash.result = result;
    lodash.runInContext = runInContext;
    lodash.size = size;
    lodash.some = some;
    lodash.sortedIndex = sortedIndex;
    lodash.template = template;
    lodash.unescape = unescape;
    lodash.uniqueId = uniqueId;

    // add aliases
    lodash.all = every;
    lodash.any = some;
    lodash.detect = find;
    lodash.findWhere = find;
    lodash.foldl = reduce;
    lodash.foldr = reduceRight;
    lodash.include = contains;
    lodash.inject = reduce;

    mixin(function() {
      var source = {}
      forOwn(lodash, function(func, methodName) {
        if (!lodash.prototype[methodName]) {
          source[methodName] = func;
        }
      });
      return source;
    }(), false);

    /*--------------------------------------------------------------------------*/

    // add functions capable of returning wrapped and unwrapped values when chaining
    lodash.first = first;
    lodash.last = last;
    lodash.sample = sample;

    // add aliases
    lodash.take = first;
    lodash.head = first;

    forOwn(lodash, function(func, methodName) {
      var callbackable = methodName !== 'sample';
      if (!lodash.prototype[methodName]) {
        lodash.prototype[methodName]= function(n, guard) {
          var chainAll = this.__chain__,
              result = func(this.__wrapped__, n, guard);

          return !chainAll && (n == null || (guard && !(callbackable && typeof n == 'function')))
            ? result
            : new lodashWrapper(result, chainAll);
        };
      }
    });

    /*--------------------------------------------------------------------------*/

    /**
     * The semantic version number.
     *
     * @static
     * @memberOf _
     * @type string
     */
    lodash.VERSION = '2.4.1';

    // add "Chaining" functions to the wrapper
    lodash.prototype.chain = wrapperChain;
    lodash.prototype.toString = wrapperToString;
    lodash.prototype.value = wrapperValueOf;
    lodash.prototype.valueOf = wrapperValueOf;

    // add `Array` functions that return unwrapped values
    forEach(['join', 'pop', 'shift'], function(methodName) {
      var func = arrayRef[methodName];
      lodash.prototype[methodName] = function() {
        var chainAll = this.__chain__,
            result = func.apply(this.__wrapped__, arguments);

        return chainAll
          ? new lodashWrapper(result, chainAll)
          : result;
      };
    });

    // add `Array` functions that return the existing wrapped value
    forEach(['push', 'reverse', 'sort', 'unshift'], function(methodName) {
      var func = arrayRef[methodName];
      lodash.prototype[methodName] = function() {
        func.apply(this.__wrapped__, arguments);
        return this;
      };
    });

    // add `Array` functions that return new wrapped values
    forEach(['concat', 'slice', 'splice'], function(methodName) {
      var func = arrayRef[methodName];
      lodash.prototype[methodName] = function() {
        return new lodashWrapper(func.apply(this.__wrapped__, arguments), this.__chain__);
      };
    });

    return lodash;
  }

  /*--------------------------------------------------------------------------*/

  // expose Lo-Dash
  var _ = runInContext();

  // some AMD build optimizers like r.js check for condition patterns like the following:
  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
    // Expose Lo-Dash to the global object even when an AMD loader is present in
    // case Lo-Dash is loaded with a RequireJS shim config.
    // See http://requirejs.org/docs/api.html#config-shim
    root._ = _;

    // define as an anonymous module so, through path mapping, it can be
    // referenced as the "underscore" module
    define(function() {
      return _;
    });
  }
  // check for `exports` after `define` in case a build optimizer adds an `exports` object
  else if (freeExports && freeModule) {
    // in Node.js or RingoJS
    if (moduleExports) {
      (freeModule.exports = _)._ = _;
    }
    // in Narwhal or Rhino -require
    else {
      freeExports._ = _;
    }
  }
  else {
    // in a browser or Rhino
    root._ = _;
  }
}.call(this));

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},["./client/scripts/main.js"])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjbGllbnQvc2NyaXB0cy9tYWluLmpzIiwiYm93ZXJfY29tcG9uZW50cy9hbmd1bGFyLWFuaW1hdGUvYW5ndWxhci1hbmltYXRlLm1pbi5qcyIsImJvd2VyX2NvbXBvbmVudHMvYW5ndWxhci1zYW5pdGl6ZS9hbmd1bGFyLXNhbml0aXplLm1pbi5qcyIsImJvd2VyX2NvbXBvbmVudHMvYW5ndWxhci11aS1yb3V0ZXIvcmVsZWFzZS9hbmd1bGFyLXVpLXJvdXRlci5taW4uanMiLCJib3dlcl9jb21wb25lbnRzL2FuZ3VsYXIvYW5ndWxhci5taW4uanMiLCJib3dlcl9jb21wb25lbnRzL2lvbmljL3JlbGVhc2UvanMvaW9uaWMtYW5ndWxhci5taW4uanMiLCJib3dlcl9jb21wb25lbnRzL2lvbmljL3JlbGVhc2UvanMvaW9uaWMubWluLmpzIiwiY2xpZW50L3NjcmlwdHMvY29tbW9uL2NvbnRyb2xsZXJzL2luZGV4LmpzIiwiY2xpZW50L3NjcmlwdHMvY29tbW9uL2NvbnRyb2xsZXJzL2xvZ2luLmpzIiwiY2xpZW50L3NjcmlwdHMvY29tbW9uL2NvbnRyb2xsZXJzL25ld3NmZWVkLmpzIiwiY2xpZW50L3NjcmlwdHMvY29tbW9uL2luZGV4LmpzIiwiY2xpZW50L3NjcmlwdHMvY29tbW9uL3ZpZXdzL2xvZ2luLmh0bWwiLCJjbGllbnQvc2NyaXB0cy9jb21tb24vdmlld3MvbWVzc2FnZXMuaHRtbCIsImNsaWVudC9zY3JpcHRzL2NvbW1vbi92aWV3cy9tb3JlLmh0bWwiLCJjbGllbnQvc2NyaXB0cy9jb21tb24vdmlld3MvbmV3c2ZlZWQuaHRtbCIsImNsaWVudC9zY3JpcHRzL2NvbW1vbi92aWV3cy9ub3RpZmljYXRpb25zLmh0bWwiLCJjbGllbnQvc2NyaXB0cy9jb21tb24vdmlld3MvcmVxdWVzdHMuaHRtbCIsImNsaWVudC9zY3JpcHRzL2NvbW1vbi92aWV3cy90YWJzLmh0bWwiLCJjbGllbnQvc2NyaXB0cy9uZ0ZhY2Vib29rL2luZGV4LmpzIiwiY2xpZW50L3NjcmlwdHMvbmdGYWNlYm9vay9zZXJ2aWNlcy9mYWNlYm9vay5qcyIsImNsaWVudC9zY3JpcHRzL25nRmFjZWJvb2svc2VydmljZXMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2Rpc3QvbG9kYXNoLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9OQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCc7XG5cbnZhciBuYW1lc3BhY2UgPSAnbWFpbic7XG5cbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUobmFtZXNwYWNlLCBbXG4gICAgJ3VpLnJvdXRlcicsICdpb25pYycsXG4gICAgLy8gaW5qZWN0Om1vZHVsZXMgc3RhcnRcbiAgICByZXF1aXJlKCcuL2NvbW1vbicpKG5hbWVzcGFjZSkubmFtZSxcbiAgICByZXF1aXJlKCcuL25nRmFjZWJvb2snKShuYW1lc3BhY2UpLm5hbWVcbiAgICAvLyBpbmplY3Q6bW9kdWxlcyBlbmRcbl0pO1xuXG5hcHAucnVuKGZ1bmN0aW9uKGZhY2Vib29rLCAkd2luZG93LCAkc3RhdGUpIHtcbiAgICBmYWNlYm9vay5pbml0KCdFTlRFUiBZT1VSIEFQUCBJRCBIRVJFJyk7XG5cbiAgICBpZihmYWNlYm9vay5vYXV0aENhbGxiYWNrKCR3aW5kb3cubG9jYXRpb24uaHJlZikpIHtcbiAgICAgICAgJHN0YXRlLmdvKCd0YWJzLm5ld3NmZWVkJyk7XG4gICAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXBwOyIsIi8qXG4gQW5ndWxhckpTIHYxLjIuMjZcbiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuIExpY2Vuc2U6IE1JVFxuKi9cbihmdW5jdGlvbihGLGUsTyl7J3VzZSBzdHJpY3QnO2UubW9kdWxlKFwibmdBbmltYXRlXCIsW1wibmdcIl0pLmRpcmVjdGl2ZShcIm5nQW5pbWF0ZUNoaWxkcmVuXCIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oRyxzLGcpe2c9Zy5uZ0FuaW1hdGVDaGlsZHJlbjtlLmlzU3RyaW5nKGcpJiYwPT09Zy5sZW5ndGg/cy5kYXRhKFwiJCRuZ0FuaW1hdGVDaGlsZHJlblwiLCEwKTpHLiR3YXRjaChnLGZ1bmN0aW9uKGUpe3MuZGF0YShcIiQkbmdBbmltYXRlQ2hpbGRyZW5cIiwhIWUpfSl9fSkuZmFjdG9yeShcIiQkYW5pbWF0ZVJlZmxvd1wiLFtcIiQkckFGXCIsXCIkZG9jdW1lbnRcIixmdW5jdGlvbihlLHMpe3JldHVybiBmdW5jdGlvbihnKXtyZXR1cm4gZShmdW5jdGlvbigpe2coKX0pfX1dKS5jb25maWcoW1wiJHByb3ZpZGVcIixcIiRhbmltYXRlUHJvdmlkZXJcIixmdW5jdGlvbihHLHMpe2Z1bmN0aW9uIGcoZSl7Zm9yKHZhciBnPTA7ZzxlLmxlbmd0aDtnKyspe3ZhciBsPWVbZ107aWYobC5ub2RlVHlwZT09YWEpcmV0dXJuIGx9fVxuZnVuY3Rpb24gQihsKXtyZXR1cm4gZS5lbGVtZW50KGcobCkpfXZhciBtPWUubm9vcCx1PWUuZm9yRWFjaCxQPXMuJCRzZWxlY3RvcnMsYWE9MSxsPVwiJCRuZ0FuaW1hdGVTdGF0ZVwiLFY9XCIkJG5nQW5pbWF0ZUNoaWxkcmVuXCIsSj1cIm5nLWFuaW1hdGVcIixuPXtydW5uaW5nOiEwfTtHLmRlY29yYXRvcihcIiRhbmltYXRlXCIsW1wiJGRlbGVnYXRlXCIsXCIkaW5qZWN0b3JcIixcIiRzbmlmZmVyXCIsXCIkcm9vdEVsZW1lbnRcIixcIiQkYXN5bmNDYWxsYmFja1wiLFwiJHJvb3RTY29wZVwiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oeixGLCQsUixFLEgsTyl7ZnVuY3Rpb24gSyhhKXt2YXIgYj1hLmRhdGEobCl8fHt9O2IucnVubmluZz0hMDthLmRhdGEobCxiKX1mdW5jdGlvbiBMKGEpe2lmKGEpe3ZhciBiPVtdLGM9e307YT1hLnN1YnN0cigxKS5zcGxpdChcIi5cIik7KCQudHJhbnNpdGlvbnN8fCQuYW5pbWF0aW9ucykmJmIucHVzaChGLmdldChQW1wiXCJdKSk7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDtkKyspe3ZhciBmPVxuYVtkXSxlPVBbZl07ZSYmIWNbZl0mJihiLnB1c2goRi5nZXQoZSkpLGNbZl09ITApfXJldHVybiBifX1mdW5jdGlvbiBHKGEsYixjKXtmdW5jdGlvbiBkKGEsYil7dmFyIGM9YVtiXSxkPWFbXCJiZWZvcmVcIitiLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Iuc3Vic3RyKDEpXTtpZihjfHxkKXJldHVyblwibGVhdmVcIj09YiYmKGQ9YyxjPW51bGwpLG4ucHVzaCh7ZXZlbnQ6YixmbjpjfSksaC5wdXNoKHtldmVudDpiLGZuOmR9KSwhMH1mdW5jdGlvbiBmKGIsZCxlKXt2YXIgZj1bXTt1KGIsZnVuY3Rpb24oYSl7YS5mbiYmZi5wdXNoKGEpfSk7dmFyIGc9MDt1KGYsZnVuY3Rpb24oYixsKXt2YXIgQz1mdW5jdGlvbigpe2E6e2lmKGQpeyhkW2xdfHxtKSgpO2lmKCsrZzxmLmxlbmd0aClicmVhayBhO2Q9bnVsbH1lKCl9fTtzd2l0Y2goYi5ldmVudCl7Y2FzZSBcInNldENsYXNzXCI6ZC5wdXNoKGIuZm4oYSxBLGssQykpO2JyZWFrO2Nhc2UgXCJhZGRDbGFzc1wiOmQucHVzaChiLmZuKGEsQXx8YyxcbkMpKTticmVhaztjYXNlIFwicmVtb3ZlQ2xhc3NcIjpkLnB1c2goYi5mbihhLGt8fGMsQykpO2JyZWFrO2RlZmF1bHQ6ZC5wdXNoKGIuZm4oYSxDKSl9fSk7ZCYmMD09PWQubGVuZ3RoJiZlKCl9dmFyIGc9YVswXTtpZihnKXt2YXIgbD1cInNldENsYXNzXCI9PWIscD1sfHxcImFkZENsYXNzXCI9PWJ8fFwicmVtb3ZlQ2xhc3NcIj09YixBLGs7ZS5pc0FycmF5KGMpJiYoQT1jWzBdLGs9Y1sxXSxjPUErXCIgXCIrayk7dmFyIHg9YS5hdHRyKFwiY2xhc3NcIikrXCIgXCIrYztpZihNKHgpKXt2YXIgdD1tLHc9W10saD1bXSxxPW0seT1bXSxuPVtdLHg9KFwiIFwiK3gpLnJlcGxhY2UoL1xccysvZyxcIi5cIik7dShMKHgpLGZ1bmN0aW9uKGEpeyFkKGEsYikmJmwmJihkKGEsXCJhZGRDbGFzc1wiKSxkKGEsXCJyZW1vdmVDbGFzc1wiKSl9KTtyZXR1cm57bm9kZTpnLGV2ZW50OmIsY2xhc3NOYW1lOmMsaXNDbGFzc0Jhc2VkOnAsaXNTZXRDbGFzc09wZXJhdGlvbjpsLGJlZm9yZTpmdW5jdGlvbihhKXt0PWE7ZihoLHcsZnVuY3Rpb24oKXt0PVxubTthKCl9KX0sYWZ0ZXI6ZnVuY3Rpb24oYSl7cT1hO2Yobix5LGZ1bmN0aW9uKCl7cT1tO2EoKX0pfSxjYW5jZWw6ZnVuY3Rpb24oKXt3JiYodSh3LGZ1bmN0aW9uKGEpeyhhfHxtKSghMCl9KSx0KCEwKSk7eSYmKHUoeSxmdW5jdGlvbihhKXsoYXx8bSkoITApfSkscSghMCkpfX19fX1mdW5jdGlvbiByKGEsYixjLGQsZixnLG4pe2Z1bmN0aW9uIHAoZCl7dmFyIGU9XCIkYW5pbWF0ZTpcIitkO3EmJihxW2VdJiYwPHFbZV0ubGVuZ3RoKSYmRShmdW5jdGlvbigpe2MudHJpZ2dlckhhbmRsZXIoZSx7ZXZlbnQ6YSxjbGFzc05hbWU6Yn0pfSl9ZnVuY3Rpb24gQSgpe3AoXCJiZWZvcmVcIil9ZnVuY3Rpb24gbSgpe3AoXCJhZnRlclwiKX1mdW5jdGlvbiB4KCl7cChcImNsb3NlXCIpO24mJkUoZnVuY3Rpb24oKXtuKCl9KX1mdW5jdGlvbiB0KCl7dC5oYXNCZWVuUnVufHwodC5oYXNCZWVuUnVuPSEwLGcoKSl9ZnVuY3Rpb24gdygpe2lmKCF3Lmhhc0JlZW5SdW4pe3cuaGFzQmVlblJ1bj0hMDt2YXIgZD1cbmMuZGF0YShsKTtkJiYoaCYmaC5pc0NsYXNzQmFzZWQ/ayhjLGIpOihFKGZ1bmN0aW9uKCl7dmFyIGQ9Yy5kYXRhKGwpfHx7fTtyPT1kLmluZGV4JiZrKGMsYixhKX0pLGMuZGF0YShsLGQpKSk7eCgpfX12YXIgaD1HKGMsYSxiKTtpZihoKXtiPWguY2xhc3NOYW1lO3ZhciBxPWUuZWxlbWVudC5fZGF0YShoLm5vZGUpLHE9cSYmcS5ldmVudHM7ZHx8KGQ9Zj9mLnBhcmVudCgpOmMucGFyZW50KCkpO3ZhciB5PWMuZGF0YShsKXx8e307Zj15LmFjdGl2ZXx8e307dmFyIHo9eS50b3RhbEFjdGl2ZXx8MCxDPXkubGFzdCxEO2guaXNDbGFzc0Jhc2VkJiYoRD15LnJ1bm5pbmd8fHkuZGlzYWJsZWR8fEMmJiFDLmlzQ2xhc3NCYXNlZCk7aWYoRHx8TihjLGQpKXQoKSxBKCksbSgpLHcoKTtlbHNle2Q9ITE7aWYoMDx6KXtEPVtdO2lmKGguaXNDbGFzc0Jhc2VkKVwic2V0Q2xhc3NcIj09Qy5ldmVudD8oRC5wdXNoKEMpLGsoYyxiKSk6ZltiXSYmKHY9ZltiXSx2LmV2ZW50PT1hP2Q9ITA6KEQucHVzaCh2KSxcbmsoYyxiKSkpO2Vsc2UgaWYoXCJsZWF2ZVwiPT1hJiZmW1wibmctbGVhdmVcIl0pZD0hMDtlbHNle2Zvcih2YXIgdiBpbiBmKUQucHVzaChmW3ZdKSxrKGMsdik7Zj17fTt6PTB9MDxELmxlbmd0aCYmdShELGZ1bmN0aW9uKGEpe2EuY2FuY2VsKCl9KX0haC5pc0NsYXNzQmFzZWR8fChoLmlzU2V0Q2xhc3NPcGVyYXRpb258fGQpfHwoZD1cImFkZENsYXNzXCI9PWE9PWMuaGFzQ2xhc3MoYikpO2lmKGQpdCgpLEEoKSxtKCkseCgpO2Vsc2V7aWYoXCJsZWF2ZVwiPT1hKWMub25lKFwiJGRlc3Ryb3lcIixmdW5jdGlvbihhKXthPWUuZWxlbWVudCh0aGlzKTt2YXIgYj1hLmRhdGEobCk7YiYmKGI9Yi5hY3RpdmVbXCJuZy1sZWF2ZVwiXSkmJihiLmNhbmNlbCgpLGsoYSxcIm5nLWxlYXZlXCIpKX0pO2MuYWRkQ2xhc3MoSik7dmFyIHI9WSsrO3orKztmW2JdPWg7Yy5kYXRhKGwse2xhc3Q6aCxhY3RpdmU6ZixpbmRleDpyLHRvdGFsQWN0aXZlOnp9KTtBKCk7aC5iZWZvcmUoZnVuY3Rpb24oZCl7dmFyIGU9Yy5kYXRhKGwpO1xuZD1kfHwhZXx8IWUuYWN0aXZlW2JdfHxoLmlzQ2xhc3NCYXNlZCYmZS5hY3RpdmVbYl0uZXZlbnQhPWE7dCgpOyEwPT09ZD93KCk6KG0oKSxoLmFmdGVyKHcpKX0pfX19ZWxzZSB0KCksQSgpLG0oKSx3KCl9ZnVuY3Rpb24gVChhKXtpZihhPWcoYSkpYT1lLmlzRnVuY3Rpb24oYS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKT9hLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoSik6YS5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiK0opLHUoYSxmdW5jdGlvbihhKXthPWUuZWxlbWVudChhKTsoYT1hLmRhdGEobCkpJiZhLmFjdGl2ZSYmdShhLmFjdGl2ZSxmdW5jdGlvbihhKXthLmNhbmNlbCgpfSl9KX1mdW5jdGlvbiBrKGEsYil7aWYoZyhhKT09ZyhSKSluLmRpc2FibGVkfHwobi5ydW5uaW5nPSExLG4uc3RydWN0dXJhbD0hMSk7ZWxzZSBpZihiKXt2YXIgYz1hLmRhdGEobCl8fHt9LGQ9ITA9PT1iOyFkJiYoYy5hY3RpdmUmJmMuYWN0aXZlW2JdKSYmKGMudG90YWxBY3RpdmUtLSxkZWxldGUgYy5hY3RpdmVbYl0pO1xuaWYoZHx8IWMudG90YWxBY3RpdmUpYS5yZW1vdmVDbGFzcyhKKSxhLnJlbW92ZURhdGEobCl9fWZ1bmN0aW9uIE4oYSxiKXtpZihuLmRpc2FibGVkKXJldHVybiEwO2lmKGcoYSk9PWcoUikpcmV0dXJuIG4ucnVubmluZzt2YXIgYyxkLGY7ZG97aWYoMD09PWIubGVuZ3RoKWJyZWFrO3ZhciBtPWcoYik9PWcoUiksaz1tP246Yi5kYXRhKGwpfHx7fTtpZihrLmRpc2FibGVkKXJldHVybiEwO20mJihmPSEwKTshMSE9PWMmJihtPWIuZGF0YShWKSxlLmlzRGVmaW5lZChtKSYmKGM9bSkpO2Q9ZHx8ay5ydW5uaW5nfHxrLmxhc3QmJiFrLmxhc3QuaXNDbGFzc0Jhc2VkfXdoaWxlKGI9Yi5wYXJlbnQoKSk7cmV0dXJuIWZ8fCFjJiZkfXZhciBZPTA7Ui5kYXRhKGwsbik7SC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtILiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe24ucnVubmluZz0hMX0pfSk7dmFyIFE9cy5jbGFzc05hbWVGaWx0ZXIoKSxNPVE/ZnVuY3Rpb24oYSl7cmV0dXJuIFEudGVzdChhKX06XG5mdW5jdGlvbigpe3JldHVybiEwfTtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oYSxiLGMsZCl7YT1lLmVsZW1lbnQoYSk7Yj1iJiZlLmVsZW1lbnQoYik7Yz1jJiZlLmVsZW1lbnQoYyk7SyhhKTt6LmVudGVyKGEsYixjKTtILiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe2E9QihhKTtyKFwiZW50ZXJcIixcIm5nLWVudGVyXCIsYSxiLGMsbSxkKX0pfSxsZWF2ZTpmdW5jdGlvbihhLGIpe2E9ZS5lbGVtZW50KGEpO1QoYSk7SyhhKTtILiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe3IoXCJsZWF2ZVwiLFwibmctbGVhdmVcIixCKGEpLG51bGwsbnVsbCxmdW5jdGlvbigpe3oubGVhdmUoYSl9LGIpfSl9LG1vdmU6ZnVuY3Rpb24oYSxiLGMsZCl7YT1lLmVsZW1lbnQoYSk7Yj1iJiZlLmVsZW1lbnQoYik7Yz1jJiZlLmVsZW1lbnQoYyk7VChhKTtLKGEpO3oubW92ZShhLGIsYyk7SC4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXthPUIoYSk7cihcIm1vdmVcIixcIm5nLW1vdmVcIixhLGIsYyxtLGQpfSl9LGFkZENsYXNzOmZ1bmN0aW9uKGEsXG5iLGMpe2E9ZS5lbGVtZW50KGEpO2E9QihhKTtyKFwiYWRkQ2xhc3NcIixiLGEsbnVsbCxudWxsLGZ1bmN0aW9uKCl7ei5hZGRDbGFzcyhhLGIpfSxjKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSxiLGMpe2E9ZS5lbGVtZW50KGEpO2E9QihhKTtyKFwicmVtb3ZlQ2xhc3NcIixiLGEsbnVsbCxudWxsLGZ1bmN0aW9uKCl7ei5yZW1vdmVDbGFzcyhhLGIpfSxjKX0sc2V0Q2xhc3M6ZnVuY3Rpb24oYSxiLGMsZCl7YT1lLmVsZW1lbnQoYSk7YT1CKGEpO3IoXCJzZXRDbGFzc1wiLFtiLGNdLGEsbnVsbCxudWxsLGZ1bmN0aW9uKCl7ei5zZXRDbGFzcyhhLGIsYyl9LGQpfSxlbmFibGVkOmZ1bmN0aW9uKGEsYil7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMjppZihhKWsoYik7ZWxzZXt2YXIgYz1iLmRhdGEobCl8fHt9O2MuZGlzYWJsZWQ9ITA7Yi5kYXRhKGwsYyl9YnJlYWs7Y2FzZSAxOm4uZGlzYWJsZWQ9IWE7YnJlYWs7ZGVmYXVsdDphPSFuLmRpc2FibGVkfXJldHVybiEhYX19fV0pO3MucmVnaXN0ZXIoXCJcIixcbltcIiR3aW5kb3dcIixcIiRzbmlmZmVyXCIsXCIkdGltZW91dFwiLFwiJCRhbmltYXRlUmVmbG93XCIsZnVuY3Rpb24obCxuLHMsQil7ZnVuY3Rpb24gRShhLFUpe1MmJlMoKTtXLnB1c2goVSk7Uz1CKGZ1bmN0aW9uKCl7dShXLGZ1bmN0aW9uKGEpe2EoKX0pO1c9W107Uz1udWxsO3Y9e319KX1mdW5jdGlvbiBIKGEsVSl7dmFyIGI9ZyhhKTthPWUuZWxlbWVudChiKTtaLnB1c2goYSk7Yj1EYXRlLm5vdygpK1U7Yjw9ZGF8fChzLmNhbmNlbChjYSksZGE9YixjYT1zKGZ1bmN0aW9uKCl7RyhaKTtaPVtdfSxVLCExKSl9ZnVuY3Rpb24gRyhhKXt1KGEsZnVuY3Rpb24oYSl7KGE9YS5kYXRhKHEpKSYmKGEuY2xvc2VBbmltYXRpb25Gbnx8bSkoKX0pfWZ1bmN0aW9uIEsoYSxiKXt2YXIgYz1iP3ZbYl06bnVsbDtpZighYyl7dmFyIGQ9MCxlPTAsZj0wLGc9MCxtLGssaCxxO3UoYSxmdW5jdGlvbihhKXtpZihhLm5vZGVUeXBlPT1hYSl7YT1sLmdldENvbXB1dGVkU3R5bGUoYSl8fHt9O2g9YVtJK1BdO2Q9XG5NYXRoLm1heChMKGgpLGQpO3E9YVtJK3hdO209YVtJK3RdO2U9TWF0aC5tYXgoTChtKSxlKTtrPWFbcCt0XTtnPU1hdGgubWF4KEwoayksZyk7dmFyIGI9TChhW3ArUF0pOzA8YiYmKGIqPXBhcnNlSW50KGFbcCt3XSwxMCl8fDEpO2Y9TWF0aC5tYXgoYixmKX19KTtjPXt0b3RhbDowLHRyYW5zaXRpb25Qcm9wZXJ0eVN0eWxlOnEsdHJhbnNpdGlvbkR1cmF0aW9uU3R5bGU6aCx0cmFuc2l0aW9uRGVsYXlTdHlsZTptLHRyYW5zaXRpb25EZWxheTplLHRyYW5zaXRpb25EdXJhdGlvbjpkLGFuaW1hdGlvbkRlbGF5U3R5bGU6ayxhbmltYXRpb25EZWxheTpnLGFuaW1hdGlvbkR1cmF0aW9uOmZ9O2ImJih2W2JdPWMpfXJldHVybiBjfWZ1bmN0aW9uIEwoYSl7dmFyIGI9MDthPWUuaXNTdHJpbmcoYSk/YS5zcGxpdCgvXFxzKixcXHMqLyk6W107dShhLGZ1bmN0aW9uKGEpe2I9TWF0aC5tYXgocGFyc2VGbG9hdChhKXx8MCxiKX0pO3JldHVybiBifWZ1bmN0aW9uIEooYSl7dmFyIGI9YS5wYXJlbnQoKSxcbmM9Yi5kYXRhKGgpO2N8fChiLmRhdGEoaCwrK2JhKSxjPWJhKTtyZXR1cm4gYytcIi1cIitnKGEpLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfWZ1bmN0aW9uIHIoYSxiLGMsZCl7dmFyIGU9SihiKSxmPWUrXCIgXCIrYyxsPXZbZl0/Kyt2W2ZdLnRvdGFsOjAsaz17fTtpZigwPGwpe3ZhciBoPWMrXCItc3RhZ2dlclwiLGs9ZStcIiBcIitoOyhlPSF2W2tdKSYmYi5hZGRDbGFzcyhoKTtrPUsoYixrKTtlJiZiLnJlbW92ZUNsYXNzKGgpfWQ9ZHx8ZnVuY3Rpb24oYSl7cmV0dXJuIGEoKX07Yi5hZGRDbGFzcyhjKTt2YXIgaD1iLmRhdGEocSl8fHt9LG49ZChmdW5jdGlvbigpe3JldHVybiBLKGIsZil9KTtkPW4udHJhbnNpdGlvbkR1cmF0aW9uO2U9bi5hbmltYXRpb25EdXJhdGlvbjtpZigwPT09ZCYmMD09PWUpcmV0dXJuIGIucmVtb3ZlQ2xhc3MoYyksITE7Yi5kYXRhKHEse3J1bm5pbmc6aC5ydW5uaW5nfHwwLGl0ZW1JbmRleDpsLHN0YWdnZXI6ayx0aW1pbmdzOm4sY2xvc2VBbmltYXRpb25GbjptfSk7XG5hPTA8aC5ydW5uaW5nfHxcInNldENsYXNzXCI9PWE7MDxkJiZUKGIsYyxhKTswPGUmJigwPGsuYW5pbWF0aW9uRGVsYXkmJjA9PT1rLmFuaW1hdGlvbkR1cmF0aW9uKSYmKGcoYikuc3R5bGVbcF09XCJub25lIDBzXCIpO3JldHVybiEwfWZ1bmN0aW9uIFQoYSxiLGMpe1wibmctZW50ZXJcIiE9YiYmKFwibmctbW92ZVwiIT1iJiZcIm5nLWxlYXZlXCIhPWIpJiZjP2EuYWRkQ2xhc3MoeSk6ZyhhKS5zdHlsZVtJK3hdPVwibm9uZVwifWZ1bmN0aW9uIGsoYSxiKXt2YXIgYz1JK3gsZD1nKGEpO2Quc3R5bGVbY10mJjA8ZC5zdHlsZVtjXS5sZW5ndGgmJihkLnN0eWxlW2NdPVwiXCIpO2EucmVtb3ZlQ2xhc3MoeSl9ZnVuY3Rpb24gTihhKXt2YXIgYj1wO2E9ZyhhKTthLnN0eWxlW2JdJiYwPGEuc3R5bGVbYl0ubGVuZ3RoJiYoYS5zdHlsZVtiXT1cIlwiKX1mdW5jdGlvbiBZKGEsYixkLGUpe2Z1bmN0aW9uIGsoYSl7Yi5vZmYoeCxsKTtiLnJlbW92ZUNsYXNzKG0pO2MoYixkKTthPWcoYik7Zm9yKHZhciBlIGluIHMpYS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShzW2VdKX1cbmZ1bmN0aW9uIGwoYSl7YS5zdG9wUHJvcGFnYXRpb24oKTt2YXIgYj1hLm9yaWdpbmFsRXZlbnR8fGE7YT1iLiRtYW51YWxUaW1lU3RhbXB8fGIudGltZVN0YW1wfHxEYXRlLm5vdygpO2I9cGFyc2VGbG9hdChiLmVsYXBzZWRUaW1lLnRvRml4ZWQoVikpO01hdGgubWF4KGEteiwwKT49eSYmYj49diYmZSgpfXZhciBoPWcoYik7YT1iLmRhdGEocSk7aWYoLTEhPWguZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikuaW5kZXhPZihkKSYmYSl7dmFyIG09XCJcIjt1KGQuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7bSs9KDA8Yj9cIiBcIjpcIlwiKSthK1wiLWFjdGl2ZVwifSk7dmFyIG49YS5zdGFnZ2VyLHA9YS50aW1pbmdzLHQ9YS5pdGVtSW5kZXgsdj1NYXRoLm1heChwLnRyYW5zaXRpb25EdXJhdGlvbixwLmFuaW1hdGlvbkR1cmF0aW9uKSx3PU1hdGgubWF4KHAudHJhbnNpdGlvbkRlbGF5LHAuYW5pbWF0aW9uRGVsYXkpLHk9dypELHo9RGF0ZS5ub3coKSx4PUErXCIgXCIrWCxyPVwiXCIscz1bXTtpZigwPHAudHJhbnNpdGlvbkR1cmF0aW9uKXt2YXIgQj1cbnAudHJhbnNpdGlvblByb3BlcnR5U3R5bGU7LTE9PUIuaW5kZXhPZihcImFsbFwiKSYmKHIrPWYrXCJ0cmFuc2l0aW9uLXByb3BlcnR5OiBcIitCK1wiO1wiLHIrPWYrXCJ0cmFuc2l0aW9uLWR1cmF0aW9uOiBcIitwLnRyYW5zaXRpb25EdXJhdGlvblN0eWxlK1wiO1wiLHMucHVzaChmK1widHJhbnNpdGlvbi1wcm9wZXJ0eVwiKSxzLnB1c2goZitcInRyYW5zaXRpb24tZHVyYXRpb25cIikpfTA8dCYmKDA8bi50cmFuc2l0aW9uRGVsYXkmJjA9PT1uLnRyYW5zaXRpb25EdXJhdGlvbiYmKHIrPWYrXCJ0cmFuc2l0aW9uLWRlbGF5OiBcIitRKHAudHJhbnNpdGlvbkRlbGF5U3R5bGUsbi50cmFuc2l0aW9uRGVsYXksdCkrXCI7IFwiLHMucHVzaChmK1widHJhbnNpdGlvbi1kZWxheVwiKSksMDxuLmFuaW1hdGlvbkRlbGF5JiYwPT09bi5hbmltYXRpb25EdXJhdGlvbiYmKHIrPWYrXCJhbmltYXRpb24tZGVsYXk6IFwiK1EocC5hbmltYXRpb25EZWxheVN0eWxlLG4uYW5pbWF0aW9uRGVsYXksdCkrXCI7IFwiLHMucHVzaChmK1wiYW5pbWF0aW9uLWRlbGF5XCIpKSk7XG4wPHMubGVuZ3RoJiYocD1oLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpfHxcIlwiLGguc2V0QXR0cmlidXRlKFwic3R5bGVcIixwK1wiOyBcIityKSk7Yi5vbih4LGwpO2IuYWRkQ2xhc3MobSk7YS5jbG9zZUFuaW1hdGlvbkZuPWZ1bmN0aW9uKCl7aygpO2UoKX07aD0odCooTWF0aC5tYXgobi5hbmltYXRpb25EZWxheSxuLnRyYW5zaXRpb25EZWxheSl8fDApKyh3K3YpKkMpKkQ7YS5ydW5uaW5nKys7SChiLGgpO3JldHVybiBrfWUoKX1mdW5jdGlvbiBRKGEsYixjKXt2YXIgZD1cIlwiO3UoYS5zcGxpdChcIixcIiksZnVuY3Rpb24oYSxlKXtkKz0oMDxlP1wiLFwiOlwiXCIpKyhjKmIrcGFyc2VJbnQoYSwxMCkpK1wic1wifSk7cmV0dXJuIGR9ZnVuY3Rpb24gTShhLGIsZCxlKXtpZihyKGEsYixkLGUpKXJldHVybiBmdW5jdGlvbihhKXthJiZjKGIsZCl9fWZ1bmN0aW9uIGEoYSxiLGQsZSl7aWYoYi5kYXRhKHEpKXJldHVybiBZKGEsYixkLGUpO2MoYixkKTtlKCl9ZnVuY3Rpb24gYihiLGMsZCxlKXt2YXIgZj1NKGIsXG5jLGQpO2lmKGYpe3ZhciBnPWY7RShjLGZ1bmN0aW9uKCl7ayhjLGQpO04oYyk7Zz1hKGIsYyxkLGUpfSk7cmV0dXJuIGZ1bmN0aW9uKGEpeyhnfHxtKShhKX19ZSgpfWZ1bmN0aW9uIGMoYSxiKXthLnJlbW92ZUNsYXNzKGIpO3ZhciBjPWEuZGF0YShxKTtjJiYoYy5ydW5uaW5nJiZjLnJ1bm5pbmctLSxjLnJ1bm5pbmcmJjAhPT1jLnJ1bm5pbmd8fGEucmVtb3ZlRGF0YShxKSl9ZnVuY3Rpb24gZChhLGIpe3ZhciBjPVwiXCI7YT1lLmlzQXJyYXkoYSk/YTphLnNwbGl0KC9cXHMrLyk7dShhLGZ1bmN0aW9uKGEsZCl7YSYmMDxhLmxlbmd0aCYmKGMrPSgwPGQ/XCIgXCI6XCJcIikrYStiKX0pO3JldHVybiBjfXZhciBmPVwiXCIsSSxYLHAsQTtGLm9udHJhbnNpdGlvbmVuZD09PU8mJkYub253ZWJraXR0cmFuc2l0aW9uZW5kIT09Tz8oZj1cIi13ZWJraXQtXCIsST1cIldlYmtpdFRyYW5zaXRpb25cIixYPVwid2Via2l0VHJhbnNpdGlvbkVuZCB0cmFuc2l0aW9uZW5kXCIpOihJPVwidHJhbnNpdGlvblwiLFg9XCJ0cmFuc2l0aW9uZW5kXCIpO1xuRi5vbmFuaW1hdGlvbmVuZD09PU8mJkYub253ZWJraXRhbmltYXRpb25lbmQhPT1PPyhmPVwiLXdlYmtpdC1cIixwPVwiV2Via2l0QW5pbWF0aW9uXCIsQT1cIndlYmtpdEFuaW1hdGlvbkVuZCBhbmltYXRpb25lbmRcIik6KHA9XCJhbmltYXRpb25cIixBPVwiYW5pbWF0aW9uZW5kXCIpO3ZhciBQPVwiRHVyYXRpb25cIix4PVwiUHJvcGVydHlcIix0PVwiRGVsYXlcIix3PVwiSXRlcmF0aW9uQ291bnRcIixoPVwiJCRuZ0FuaW1hdGVLZXlcIixxPVwiJCRuZ0FuaW1hdGVDU1MzRGF0YVwiLHk9XCJuZy1hbmltYXRlLWJsb2NrLXRyYW5zaXRpb25zXCIsVj0zLEM9MS41LEQ9MUUzLHY9e30sYmE9MCxXPVtdLFMsY2E9bnVsbCxkYT0wLFo9W107cmV0dXJue2VudGVyOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGIoXCJlbnRlclwiLGEsXCJuZy1lbnRlclwiLGMpfSxsZWF2ZTpmdW5jdGlvbihhLGMpe3JldHVybiBiKFwibGVhdmVcIixhLFwibmctbGVhdmVcIixjKX0sbW92ZTpmdW5jdGlvbihhLGMpe3JldHVybiBiKFwibW92ZVwiLGEsXCJuZy1tb3ZlXCIsXG5jKX0sYmVmb3JlU2V0Q2xhc3M6ZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGY9ZChjLFwiLXJlbW92ZVwiKStcIiBcIitkKGIsXCItYWRkXCIpLGc9TShcInNldENsYXNzXCIsYSxmLGZ1bmN0aW9uKGQpe3ZhciBlPWEuYXR0cihcImNsYXNzXCIpO2EucmVtb3ZlQ2xhc3MoYyk7YS5hZGRDbGFzcyhiKTtkPWQoKTthLmF0dHIoXCJjbGFzc1wiLGUpO3JldHVybiBkfSk7aWYoZylyZXR1cm4gRShhLGZ1bmN0aW9uKCl7ayhhLGYpO04oYSk7ZSgpfSksZztlKCl9LGJlZm9yZUFkZENsYXNzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZT1NKFwiYWRkQ2xhc3NcIixhLGQoYixcIi1hZGRcIiksZnVuY3Rpb24oYyl7YS5hZGRDbGFzcyhiKTtjPWMoKTthLnJlbW92ZUNsYXNzKGIpO3JldHVybiBjfSk7aWYoZSlyZXR1cm4gRShhLGZ1bmN0aW9uKCl7ayhhLGIpO04oYSk7YygpfSksZTtjKCl9LHNldENsYXNzOmZ1bmN0aW9uKGIsYyxlLGYpe2U9ZChlLFwiLXJlbW92ZVwiKTtjPWQoYyxcIi1hZGRcIik7cmV0dXJuIGEoXCJzZXRDbGFzc1wiLGIsXG5lK1wiIFwiK2MsZil9LGFkZENsYXNzOmZ1bmN0aW9uKGIsYyxlKXtyZXR1cm4gYShcImFkZENsYXNzXCIsYixkKGMsXCItYWRkXCIpLGUpfSxiZWZvcmVSZW1vdmVDbGFzczpmdW5jdGlvbihhLGIsYyl7dmFyIGU9TShcInJlbW92ZUNsYXNzXCIsYSxkKGIsXCItcmVtb3ZlXCIpLGZ1bmN0aW9uKGMpe3ZhciBkPWEuYXR0cihcImNsYXNzXCIpO2EucmVtb3ZlQ2xhc3MoYik7Yz1jKCk7YS5hdHRyKFwiY2xhc3NcIixkKTtyZXR1cm4gY30pO2lmKGUpcmV0dXJuIEUoYSxmdW5jdGlvbigpe2soYSxiKTtOKGEpO2MoKX0pLGU7YygpfSxyZW1vdmVDbGFzczpmdW5jdGlvbihiLGMsZSl7cmV0dXJuIGEoXCJyZW1vdmVDbGFzc1wiLGIsZChjLFwiLXJlbW92ZVwiKSxlKX19fV0pfV0pfSkod2luZG93LHdpbmRvdy5hbmd1bGFyKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItYW5pbWF0ZS5taW4uanMubWFwXG4iLCIvKlxuIEFuZ3VsYXJKUyB2MS4yLjI2XG4gKGMpIDIwMTAtMjAxNCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcbiBMaWNlbnNlOiBNSVRcbiovXG4oZnVuY3Rpb24ocSxnLHIpeyd1c2Ugc3RyaWN0JztmdW5jdGlvbiBGKGEpe3ZhciBkPVtdO3QoZCxnLm5vb3ApLmNoYXJzKGEpO3JldHVybiBkLmpvaW4oXCJcIil9ZnVuY3Rpb24gbShhKXt2YXIgZD17fTthPWEuc3BsaXQoXCIsXCIpO3ZhciBjO2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspZFthW2NdXT0hMDtyZXR1cm4gZH1mdW5jdGlvbiBHKGEsZCl7ZnVuY3Rpb24gYyhhLGIsYyxoKXtiPWcubG93ZXJjYXNlKGIpO2lmKHVbYl0pZm9yKDtmLmxhc3QoKSYmdltmLmxhc3QoKV07KWUoXCJcIixmLmxhc3QoKSk7d1tiXSYmZi5sYXN0KCk9PWImJmUoXCJcIixiKTsoaD14W2JdfHwhIWgpfHxmLnB1c2goYik7dmFyIG49e307Yy5yZXBsYWNlKEgsZnVuY3Rpb24oYSxiLGQsYyxlKXtuW2JdPXMoZHx8Y3x8ZXx8XCJcIil9KTtkLnN0YXJ0JiZkLnN0YXJ0KGIsbixoKX1mdW5jdGlvbiBlKGEsYil7dmFyIGM9MCxlO2lmKGI9Zy5sb3dlcmNhc2UoYikpZm9yKGM9Zi5sZW5ndGgtMTswPD1jJiZmW2NdIT1iO2MtLSk7XG5pZigwPD1jKXtmb3IoZT1mLmxlbmd0aC0xO2U+PWM7ZS0tKWQuZW5kJiZkLmVuZChmW2VdKTtmLmxlbmd0aD1jfX1cInN0cmluZ1wiIT09dHlwZW9mIGEmJihhPW51bGw9PT1hfHxcInVuZGVmaW5lZFwiPT09dHlwZW9mIGE/XCJcIjpcIlwiK2EpO3ZhciBiLGwsZj1bXSxuPWEsaDtmb3IoZi5sYXN0PWZ1bmN0aW9uKCl7cmV0dXJuIGZbZi5sZW5ndGgtMV19O2E7KXtoPVwiXCI7bD0hMDtpZihmLmxhc3QoKSYmeVtmLmxhc3QoKV0pYT1hLnJlcGxhY2UoUmVnRXhwKFwiKC4qKTxcXFxccypcXFxcL1xcXFxzKlwiK2YubGFzdCgpK1wiW14+XSo+XCIsXCJpXCIpLGZ1bmN0aW9uKGEsYil7Yj1iLnJlcGxhY2UoSSxcIiQxXCIpLnJlcGxhY2UoSixcIiQxXCIpO2QuY2hhcnMmJmQuY2hhcnMocyhiKSk7cmV0dXJuXCJcIn0pLGUoXCJcIixmLmxhc3QoKSk7ZWxzZXtpZigwPT09YS5pbmRleE9mKFwiXFx4M2MhLS1cIikpYj1hLmluZGV4T2YoXCItLVwiLDQpLDA8PWImJmEubGFzdEluZGV4T2YoXCItLVxceDNlXCIsYik9PT1iJiYoZC5jb21tZW50JiZkLmNvbW1lbnQoYS5zdWJzdHJpbmcoNCxcbmIpKSxhPWEuc3Vic3RyaW5nKGIrMyksbD0hMSk7ZWxzZSBpZih6LnRlc3QoYSkpe2lmKGI9YS5tYXRjaCh6KSlhPWEucmVwbGFjZShiWzBdLFwiXCIpLGw9ITF9ZWxzZSBpZihLLnRlc3QoYSkpe2lmKGI9YS5tYXRjaChBKSlhPWEuc3Vic3RyaW5nKGJbMF0ubGVuZ3RoKSxiWzBdLnJlcGxhY2UoQSxlKSxsPSExfWVsc2UgTC50ZXN0KGEpJiYoKGI9YS5tYXRjaChCKSk/KGJbNF0mJihhPWEuc3Vic3RyaW5nKGJbMF0ubGVuZ3RoKSxiWzBdLnJlcGxhY2UoQixjKSksbD0hMSk6KGgrPVwiPFwiLGE9YS5zdWJzdHJpbmcoMSkpKTtsJiYoYj1hLmluZGV4T2YoXCI8XCIpLGgrPTA+Yj9hOmEuc3Vic3RyaW5nKDAsYiksYT0wPmI/XCJcIjphLnN1YnN0cmluZyhiKSxkLmNoYXJzJiZkLmNoYXJzKHMoaCkpKX1pZihhPT1uKXRocm93IE0oXCJiYWRwYXJzZVwiLGEpO249YX1lKCl9ZnVuY3Rpb24gcyhhKXtpZighYSlyZXR1cm5cIlwiO3ZhciBkPU4uZXhlYyhhKTthPWRbMV07dmFyIGM9ZFszXTtpZihkPWRbMl0pcC5pbm5lckhUTUw9XG5kLnJlcGxhY2UoLzwvZyxcIiZsdDtcIiksZD1cInRleHRDb250ZW50XCJpbiBwP3AudGV4dENvbnRlbnQ6cC5pbm5lclRleHQ7cmV0dXJuIGErZCtjfWZ1bmN0aW9uIEMoYSl7cmV0dXJuIGEucmVwbGFjZSgvJi9nLFwiJmFtcDtcIikucmVwbGFjZShPLGZ1bmN0aW9uKGEpe3ZhciBjPWEuY2hhckNvZGVBdCgwKTthPWEuY2hhckNvZGVBdCgxKTtyZXR1cm5cIiYjXCIrKDEwMjQqKGMtNTUyOTYpKyhhLTU2MzIwKSs2NTUzNikrXCI7XCJ9KS5yZXBsYWNlKFAsZnVuY3Rpb24oYSl7cmV0dXJuXCImI1wiK2EuY2hhckNvZGVBdCgwKStcIjtcIn0pLnJlcGxhY2UoLzwvZyxcIiZsdDtcIikucmVwbGFjZSgvPi9nLFwiJmd0O1wiKX1mdW5jdGlvbiB0KGEsZCl7dmFyIGM9ITEsZT1nLmJpbmQoYSxhLnB1c2gpO3JldHVybntzdGFydDpmdW5jdGlvbihhLGwsZil7YT1nLmxvd2VyY2FzZShhKTshYyYmeVthXSYmKGM9YSk7Y3x8ITAhPT1EW2FdfHwoZShcIjxcIiksZShhKSxnLmZvckVhY2gobCxmdW5jdGlvbihjLGYpe3ZhciBrPVxuZy5sb3dlcmNhc2UoZiksbD1cImltZ1wiPT09YSYmXCJzcmNcIj09PWt8fFwiYmFja2dyb3VuZFwiPT09azshMCE9PVFba118fCEwPT09RVtrXSYmIWQoYyxsKXx8KGUoXCIgXCIpLGUoZiksZSgnPVwiJyksZShDKGMpKSxlKCdcIicpKX0pLGUoZj9cIi8+XCI6XCI+XCIpKX0sZW5kOmZ1bmN0aW9uKGEpe2E9Zy5sb3dlcmNhc2UoYSk7Y3x8ITAhPT1EW2FdfHwoZShcIjwvXCIpLGUoYSksZShcIj5cIikpO2E9PWMmJihjPSExKX0sY2hhcnM6ZnVuY3Rpb24oYSl7Y3x8ZShDKGEpKX19fXZhciBNPWcuJCRtaW5FcnIoXCIkc2FuaXRpemVcIiksQj0vXjwoKD86W2EtekEtWl0pW1xcdzotXSopKCg/OlxccytbXFx3Oi1dKyg/Olxccyo9XFxzKig/Oig/OlwiW15cIl0qXCIpfCg/OidbXiddKicpfFtePlxcc10rKSk/KSopXFxzKihcXC8/KVxccyooPj8pLyxBPS9ePFxcL1xccyooW1xcdzotXSspW14+XSo+LyxIPS8oW1xcdzotXSspKD86XFxzKj1cXHMqKD86KD86XCIoKD86W15cIl0pKilcIil8KD86JygoPzpbXiddKSopJyl8KFtePlxcc10rKSkpPy9nLEw9L148Lyxcbks9L148XFwvLyxJPS9cXHgzYyEtLSguKj8pLS1cXHgzZS9nLHo9LzwhRE9DVFlQRShbXj5dKj8pPi9pLEo9LzwhXFxbQ0RBVEFcXFsoLio/KV1dXFx4M2UvZyxPPS9bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZdL2csUD0vKFteXFwjLX58IHwhXSkvZyx4PW0oXCJhcmVhLGJyLGNvbCxocixpbWcsd2JyXCIpO3E9bShcImNvbGdyb3VwLGRkLGR0LGxpLHAsdGJvZHksdGQsdGZvb3QsdGgsdGhlYWQsdHJcIik7cj1tKFwicnAscnRcIik7dmFyIHc9Zy5leHRlbmQoe30scixxKSx1PWcuZXh0ZW5kKHt9LHEsbShcImFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxibG9ja3F1b3RlLGNhcHRpb24sY2VudGVyLGRlbCxkaXIsZGl2LGRsLGZpZ3VyZSxmaWdjYXB0aW9uLGZvb3RlcixoMSxoMixoMyxoNCxoNSxoNixoZWFkZXIsaGdyb3VwLGhyLGlucyxtYXAsbWVudSxuYXYsb2wscHJlLHNjcmlwdCxzZWN0aW9uLHRhYmxlLHVsXCIpKSx2PWcuZXh0ZW5kKHt9LHIsbShcImEsYWJicixhY3JvbnltLGIsYmRpLGJkbyxiaWcsYnIsY2l0ZSxjb2RlLGRlbCxkZm4sZW0sZm9udCxpLGltZyxpbnMsa2JkLGxhYmVsLG1hcCxtYXJrLHEscnVieSxycCxydCxzLHNhbXAsc21hbGwsc3BhbixzdHJpa2Usc3Ryb25nLHN1YixzdXAsdGltZSx0dCx1LHZhclwiKSksXG55PW0oXCJzY3JpcHQsc3R5bGVcIiksRD1nLmV4dGVuZCh7fSx4LHUsdix3KSxFPW0oXCJiYWNrZ3JvdW5kLGNpdGUsaHJlZixsb25nZGVzYyxzcmMsdXNlbWFwXCIpLFE9Zy5leHRlbmQoe30sRSxtKFwiYWJicixhbGlnbixhbHQsYXhpcyxiZ2NvbG9yLGJvcmRlcixjZWxscGFkZGluZyxjZWxsc3BhY2luZyxjbGFzcyxjbGVhcixjb2xvcixjb2xzLGNvbHNwYW4sY29tcGFjdCxjb29yZHMsZGlyLGZhY2UsaGVhZGVycyxoZWlnaHQsaHJlZmxhbmcsaHNwYWNlLGlzbWFwLGxhbmcsbGFuZ3VhZ2Usbm9ocmVmLG5vd3JhcCxyZWwscmV2LHJvd3Mscm93c3BhbixydWxlcyxzY29wZSxzY3JvbGxpbmcsc2hhcGUsc2l6ZSxzcGFuLHN0YXJ0LHN1bW1hcnksdGFyZ2V0LHRpdGxlLHR5cGUsdmFsaWduLHZhbHVlLHZzcGFjZSx3aWR0aFwiKSkscD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpLE49L14oXFxzKikoW1xcc1xcU10qPykoXFxzKikkLztnLm1vZHVsZShcIm5nU2FuaXRpemVcIixbXSkucHJvdmlkZXIoXCIkc2FuaXRpemVcIixcbmZ1bmN0aW9uKCl7dGhpcy4kZ2V0PVtcIiQkc2FuaXRpemVVcmlcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGM9W107RyhkLHQoYyxmdW5jdGlvbihjLGIpe3JldHVybiEvXnVuc2FmZS8udGVzdChhKGMsYikpfSkpO3JldHVybiBjLmpvaW4oXCJcIil9fV19KTtnLm1vZHVsZShcIm5nU2FuaXRpemVcIikuZmlsdGVyKFwibGlua3lcIixbXCIkc2FuaXRpemVcIixmdW5jdGlvbihhKXt2YXIgZD0vKChmdHB8aHR0cHM/KTpcXC9cXC98KG1haWx0bzopP1tBLVphLXowLTkuXyUrLV0rQClcXFMqW15cXHMuOywoKXt9PD5cIl0vLGM9L15tYWlsdG86LztyZXR1cm4gZnVuY3Rpb24oZSxiKXtmdW5jdGlvbiBsKGEpe2EmJmsucHVzaChGKGEpKX1mdW5jdGlvbiBmKGEsYyl7ay5wdXNoKFwiPGEgXCIpO2cuaXNEZWZpbmVkKGIpJiYoay5wdXNoKCd0YXJnZXQ9XCInKSxrLnB1c2goYiksay5wdXNoKCdcIiAnKSk7ay5wdXNoKCdocmVmPVwiJyk7ay5wdXNoKGEpO2sucHVzaCgnXCI+Jyk7bChjKTtrLnB1c2goXCI8L2E+XCIpfVxuaWYoIWUpcmV0dXJuIGU7Zm9yKHZhciBuLGg9ZSxrPVtdLG0scDtuPWgubWF0Y2goZCk7KW09blswXSxuWzJdPT1uWzNdJiYobT1cIm1haWx0bzpcIittKSxwPW4uaW5kZXgsbChoLnN1YnN0cigwLHApKSxmKG0sblswXS5yZXBsYWNlKGMsXCJcIikpLGg9aC5zdWJzdHJpbmcocCtuWzBdLmxlbmd0aCk7bChoKTtyZXR1cm4gYShrLmpvaW4oXCJcIikpfX1dKX0pKHdpbmRvdyx3aW5kb3cuYW5ndWxhcik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLXNhbml0aXplLm1pbi5qcy5tYXBcbiIsIihmdW5jdGlvbiAoZ2xvYmFsKXtcblxuOyByZXF1aXJlKFwiL2hvbWUvY29kaW8vd29ya3NwYWNlL2Jvd2VyX2NvbXBvbmVudHMvYW5ndWxhci9hbmd1bGFyLm1pbi5qc1wiKTtcbjtfX2Jyb3dzZXJpZnlfc2hpbV9yZXF1aXJlX189cmVxdWlyZTsoZnVuY3Rpb24gYnJvd3NlcmlmeVNoaW0obW9kdWxlLCBkZWZpbmUsIHJlcXVpcmUpIHtcbi8qKlxuICogU3RhdGUtYmFzZWQgcm91dGluZyBmb3IgQW5ndWxhckpTXG4gKiBAdmVyc2lvbiB2MC4yLjEwXG4gKiBAbGluayBodHRwOi8vYW5ndWxhci11aS5naXRodWIuY29tL1xuICogQGxpY2Vuc2UgTUlUIExpY2Vuc2UsIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cblwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBleHBvcnRzJiZtb2R1bGUuZXhwb3J0cz09PWV4cG9ydHMmJihtb2R1bGUuZXhwb3J0cz1cInVpLnJvdXRlclwiKSxmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIpe3JldHVybiBJKG5ldyhJKGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOmF9KSksYil9ZnVuY3Rpb24gZShhKXtyZXR1cm4gSChhcmd1bWVudHMsZnVuY3Rpb24oYil7YiE9PWEmJkgoYixmdW5jdGlvbihiLGMpe2EuaGFzT3duUHJvcGVydHkoYyl8fChhW2NdPWIpfSl9KSxhfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz1bXTtmb3IodmFyIGQgaW4gYS5wYXRoKXtpZihhLnBhdGhbZF0hPT1iLnBhdGhbZF0pYnJlYWs7Yy5wdXNoKGEucGF0aFtkXSl9cmV0dXJuIGN9ZnVuY3Rpb24gZyhhLGIpe2lmKEFycmF5LnByb3RvdHlwZS5pbmRleE9mKXJldHVybiBhLmluZGV4T2YoYixOdW1iZXIoYXJndW1lbnRzWzJdKXx8MCk7dmFyIGM9YS5sZW5ndGg+Pj4wLGQ9TnVtYmVyKGFyZ3VtZW50c1syXSl8fDA7Zm9yKGQ9MD5kP01hdGguY2VpbChkKTpNYXRoLmZsb29yKGQpLDA+ZCYmKGQrPWMpO2M+ZDtkKyspaWYoZCBpbiBhJiZhW2RdPT09YilyZXR1cm4gZDtyZXR1cm4tMX1mdW5jdGlvbiBoKGEsYixjLGQpe3ZhciBlLGg9ZihjLGQpLGk9e30saj1bXTtmb3IodmFyIGsgaW4gaClpZihoW2tdLnBhcmFtcyYmaFtrXS5wYXJhbXMubGVuZ3RoKXtlPWhba10ucGFyYW1zO2Zvcih2YXIgbCBpbiBlKWcoaixlW2xdKT49MHx8KGoucHVzaChlW2xdKSxpW2VbbF1dPWFbZVtsXV0pfXJldHVybiBJKHt9LGksYil9ZnVuY3Rpb24gaShhLGIpe3ZhciBjPXt9O3JldHVybiBIKGEsZnVuY3Rpb24oYSl7dmFyIGQ9YlthXTtjW2FdPW51bGwhPWQ/U3RyaW5nKGQpOm51bGx9KSxjfWZ1bmN0aW9uIGooYSxiLGMpe2lmKCFjKXtjPVtdO2Zvcih2YXIgZCBpbiBhKWMucHVzaChkKX1mb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9Y1tlXTtpZihhW2ZdIT1iW2ZdKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIGsoYSxiKXt2YXIgYz17fTtyZXR1cm4gSChhLGZ1bmN0aW9uKGEpe2NbYV09YlthXX0pLGN9ZnVuY3Rpb24gbChhLGIpe3ZhciBkPTEsZj0yLGc9e30saD1bXSxpPWcsaj1JKGEud2hlbihnKSx7JCRwcm9taXNlczpnLCQkdmFsdWVzOmd9KTt0aGlzLnN0dWR5PWZ1bmN0aW9uKGcpe2Z1bmN0aW9uIGsoYSxjKXtpZihvW2NdIT09Zil7aWYobi5wdXNoKGMpLG9bY109PT1kKXRocm93IG4uc3BsaWNlKDAsbi5pbmRleE9mKGMpKSxuZXcgRXJyb3IoXCJDeWNsaWMgZGVwZW5kZW5jeTogXCIrbi5qb2luKFwiIC0+IFwiKSk7aWYob1tjXT1kLEUoYSkpbS5wdXNoKGMsW2Z1bmN0aW9uKCl7cmV0dXJuIGIuZ2V0KGEpfV0saCk7ZWxzZXt2YXIgZT1iLmFubm90YXRlKGEpO0goZSxmdW5jdGlvbihhKXthIT09YyYmZy5oYXNPd25Qcm9wZXJ0eShhKSYmayhnW2FdLGEpfSksbS5wdXNoKGMsYSxlKX1uLnBvcCgpLG9bY109Zn19ZnVuY3Rpb24gbChhKXtyZXR1cm4gRihhKSYmYS50aGVuJiZhLiQkcHJvbWlzZXN9aWYoIUYoZykpdGhyb3cgbmV3IEVycm9yKFwiJ2ludm9jYWJsZXMnIG11c3QgYmUgYW4gb2JqZWN0XCIpO3ZhciBtPVtdLG49W10sbz17fTtyZXR1cm4gSChnLGspLGc9bj1vPW51bGwsZnVuY3Rpb24oZCxmLGcpe2Z1bmN0aW9uIGgoKXstLXN8fCh0fHxlKHIsZi4kJHZhbHVlcykscC4kJHZhbHVlcz1yLHAuJCRwcm9taXNlcz0hMCxvLnJlc29sdmUocikpfWZ1bmN0aW9uIGsoYSl7cC4kJGZhaWx1cmU9YSxvLnJlamVjdChhKX1mdW5jdGlvbiBuKGMsZSxmKXtmdW5jdGlvbiBpKGEpe2wucmVqZWN0KGEpLGsoYSl9ZnVuY3Rpb24gaigpe2lmKCFDKHAuJCRmYWlsdXJlKSl0cnl7bC5yZXNvbHZlKGIuaW52b2tlKGUsZyxyKSksbC5wcm9taXNlLnRoZW4oZnVuY3Rpb24oYSl7cltjXT1hLGgoKX0saSl9Y2F0Y2goYSl7aShhKX19dmFyIGw9YS5kZWZlcigpLG09MDtIKGYsZnVuY3Rpb24oYSl7cS5oYXNPd25Qcm9wZXJ0eShhKSYmIWQuaGFzT3duUHJvcGVydHkoYSkmJihtKysscVthXS50aGVuKGZ1bmN0aW9uKGIpe3JbYV09YiwtLW18fGooKX0saSkpfSksbXx8aigpLHFbY109bC5wcm9taXNlfWlmKGwoZCkmJmc9PT1jJiYoZz1mLGY9ZCxkPW51bGwpLGQpe2lmKCFGKGQpKXRocm93IG5ldyBFcnJvcihcIidsb2NhbHMnIG11c3QgYmUgYW4gb2JqZWN0XCIpfWVsc2UgZD1pO2lmKGYpe2lmKCFsKGYpKXRocm93IG5ldyBFcnJvcihcIidwYXJlbnQnIG11c3QgYmUgYSBwcm9taXNlIHJldHVybmVkIGJ5ICRyZXNvbHZlLnJlc29sdmUoKVwiKX1lbHNlIGY9ajt2YXIgbz1hLmRlZmVyKCkscD1vLnByb21pc2UscT1wLiQkcHJvbWlzZXM9e30scj1JKHt9LGQpLHM9MSttLmxlbmd0aC8zLHQ9ITE7aWYoQyhmLiQkZmFpbHVyZSkpcmV0dXJuIGsoZi4kJGZhaWx1cmUpLHA7Zi4kJHZhbHVlcz8odD1lKHIsZi4kJHZhbHVlcyksaCgpKTooSShxLGYuJCRwcm9taXNlcyksZi50aGVuKGgsaykpO2Zvcih2YXIgdT0wLHY9bS5sZW5ndGg7dj51O3UrPTMpZC5oYXNPd25Qcm9wZXJ0eShtW3VdKT9oKCk6bihtW3VdLG1bdSsxXSxtW3UrMl0pO3JldHVybiBwfX0sdGhpcy5yZXNvbHZlPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLnN0dWR5KGEpKGIsYyxkKX19ZnVuY3Rpb24gbShhLGIsYyl7dGhpcy5mcm9tQ29uZmlnPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gQyhhLnRlbXBsYXRlKT90aGlzLmZyb21TdHJpbmcoYS50ZW1wbGF0ZSxiKTpDKGEudGVtcGxhdGVVcmwpP3RoaXMuZnJvbVVybChhLnRlbXBsYXRlVXJsLGIpOkMoYS50ZW1wbGF0ZVByb3ZpZGVyKT90aGlzLmZyb21Qcm92aWRlcihhLnRlbXBsYXRlUHJvdmlkZXIsYixjKTpudWxsfSx0aGlzLmZyb21TdHJpbmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRChhKT9hKGIpOmF9LHRoaXMuZnJvbVVybD1mdW5jdGlvbihjLGQpe3JldHVybiBEKGMpJiYoYz1jKGQpKSxudWxsPT1jP251bGw6YS5nZXQoYyx7Y2FjaGU6Yn0pLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGF0YX0pfSx0aGlzLmZyb21Qcm92aWRlcj1mdW5jdGlvbihhLGIsZCl7cmV0dXJuIGMuaW52b2tlKGEsbnVsbCxkfHx7cGFyYW1zOmJ9KX19ZnVuY3Rpb24gbihhKXtmdW5jdGlvbiBiKGIpe2lmKCEvXlxcdysoLStcXHcrKSokLy50ZXN0KGIpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyYW1ldGVyIG5hbWUgJ1wiK2IrXCInIGluIHBhdHRlcm4gJ1wiK2ErXCInXCIpO2lmKGZbYl0pdGhyb3cgbmV3IEVycm9yKFwiRHVwbGljYXRlIHBhcmFtZXRlciBuYW1lICdcIitiK1wiJyBpbiBwYXR0ZXJuICdcIithK1wiJ1wiKTtmW2JdPSEwLGoucHVzaChiKX1mdW5jdGlvbiBjKGEpe3JldHVybiBhLnJlcGxhY2UoL1tcXFxcXFxbXFxdXFxeJCorPy4oKXx7fV0vZyxcIlxcXFwkJlwiKX12YXIgZCxlPS8oWzoqXSkoXFx3Kyl8XFx7KFxcdyspKD86XFw6KCg/Oltee31cXFxcXSt8XFxcXC58XFx7KD86W157fVxcXFxdK3xcXFxcLikqXFx9KSspKT9cXH0vZyxmPXt9LGc9XCJeXCIsaD0wLGk9dGhpcy5zZWdtZW50cz1bXSxqPXRoaXMucGFyYW1zPVtdO3RoaXMuc291cmNlPWE7Zm9yKHZhciBrLGwsbTsoZD1lLmV4ZWMoYSkpJiYoaz1kWzJdfHxkWzNdLGw9ZFs0XXx8KFwiKlwiPT1kWzFdP1wiLipcIjpcIlteL10qXCIpLG09YS5zdWJzdHJpbmcoaCxkLmluZGV4KSwhKG0uaW5kZXhPZihcIj9cIik+PTApKTspZys9YyhtKStcIihcIitsK1wiKVwiLGIoayksaS5wdXNoKG0pLGg9ZS5sYXN0SW5kZXg7bT1hLnN1YnN0cmluZyhoKTt2YXIgbj1tLmluZGV4T2YoXCI/XCIpO2lmKG4+PTApe3ZhciBvPXRoaXMuc291cmNlU2VhcmNoPW0uc3Vic3RyaW5nKG4pO209bS5zdWJzdHJpbmcoMCxuKSx0aGlzLnNvdXJjZVBhdGg9YS5zdWJzdHJpbmcoMCxoK24pLEgoby5zdWJzdHJpbmcoMSkuc3BsaXQoL1smP10vKSxiKX1lbHNlIHRoaXMuc291cmNlUGF0aD1hLHRoaXMuc291cmNlU2VhcmNoPVwiXCI7Zys9YyhtKStcIiRcIixpLnB1c2gobSksdGhpcy5yZWdleHA9bmV3IFJlZ0V4cChnKSx0aGlzLnByZWZpeD1pWzBdfWZ1bmN0aW9uIG8oKXt0aGlzLmNvbXBpbGU9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBuKGEpfSx0aGlzLmlzTWF0Y2hlcj1mdW5jdGlvbihhKXtyZXR1cm4gRihhKSYmRChhLmV4ZWMpJiZEKGEuZm9ybWF0KSYmRChhLmNvbmNhdCl9LHRoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzfX1mdW5jdGlvbiBwKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9L15cXF4oKD86XFxcXFteYS16QS1aMC05XXxbXlxcXFxcXFtcXF1cXF4kKis/LigpfHt9XSspKikvLmV4ZWMoYS5zb3VyY2UpO3JldHVybiBudWxsIT1iP2JbMV0ucmVwbGFjZSgvXFxcXCguKS9nLFwiJDFcIik6XCJcIn1mdW5jdGlvbiBjKGEsYil7cmV0dXJuIGEucmVwbGFjZSgvXFwkKFxcJHxcXGR7MSwyfSkvLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGJbXCIkXCI9PT1jPzA6TnVtYmVyKGMpXX0pfWZ1bmN0aW9uIGQoYSxiLGMpe2lmKCFjKXJldHVybiExO3ZhciBkPWEuaW52b2tlKGIsYix7JG1hdGNoOmN9KTtyZXR1cm4gQyhkKT9kOiEwfXZhciBlPVtdLGY9bnVsbDt0aGlzLnJ1bGU9ZnVuY3Rpb24oYSl7aWYoIUQoYSkpdGhyb3cgbmV3IEVycm9yKFwiJ3J1bGUnIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gZS5wdXNoKGEpLHRoaXN9LHRoaXMub3RoZXJ3aXNlPWZ1bmN0aW9uKGEpe2lmKEUoYSkpe3ZhciBiPWE7YT1mdW5jdGlvbigpe3JldHVybiBifX1lbHNlIGlmKCFEKGEpKXRocm93IG5ldyBFcnJvcihcIidydWxlJyBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGY9YSx0aGlzfSx0aGlzLndoZW49ZnVuY3Rpb24oZSxmKXt2YXIgZyxoPUUoZik7aWYoRShlKSYmKGU9YS5jb21waWxlKGUpKSwhaCYmIUQoZikmJiFHKGYpKXRocm93IG5ldyBFcnJvcihcImludmFsaWQgJ2hhbmRsZXInIGluIHdoZW4oKVwiKTt2YXIgaT17bWF0Y2hlcjpmdW5jdGlvbihiLGMpe3JldHVybiBoJiYoZz1hLmNvbXBpbGUoYyksYz1bXCIkbWF0Y2hcIixmdW5jdGlvbihhKXtyZXR1cm4gZy5mb3JtYXQoYSl9XSksSShmdW5jdGlvbihhLGUpe3JldHVybiBkKGEsYyxiLmV4ZWMoZS5wYXRoKCksZS5zZWFyY2goKSkpfSx7cHJlZml4OkUoYi5wcmVmaXgpP2IucHJlZml4OlwiXCJ9KX0scmVnZXg6ZnVuY3Rpb24oYSxlKXtpZihhLmdsb2JhbHx8YS5zdGlja3kpdGhyb3cgbmV3IEVycm9yKFwid2hlbigpIFJlZ0V4cCBtdXN0IG5vdCBiZSBnbG9iYWwgb3Igc3RpY2t5XCIpO3JldHVybiBoJiYoZz1lLGU9W1wiJG1hdGNoXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGMoZyxhKX1dKSxJKGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGQoYixlLGEuZXhlYyhjLnBhdGgoKSkpfSx7cHJlZml4OmIoYSl9KX19LGo9e21hdGNoZXI6YS5pc01hdGNoZXIoZSkscmVnZXg6ZSBpbnN0YW5jZW9mIFJlZ0V4cH07Zm9yKHZhciBrIGluIGopaWYoaltrXSlyZXR1cm4gdGhpcy5ydWxlKGlba10oZSxmKSk7dGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCAnd2hhdCcgaW4gd2hlbigpXCIpfSx0aGlzLiRnZXQ9W1wiJGxvY2F0aW9uXCIsXCIkcm9vdFNjb3BlXCIsXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChiKXtmdW5jdGlvbiBkKGIpe3ZhciBkPWIoYyxhKTtyZXR1cm4gZD8oRShkKSYmYS5yZXBsYWNlKCkudXJsKGQpLCEwKTohMX1pZighYnx8IWIuZGVmYXVsdFByZXZlbnRlZCl7dmFyIGcsaD1lLmxlbmd0aDtmb3IoZz0wO2g+ZztnKyspaWYoZChlW2ddKSlyZXR1cm47ZiYmZChmKX19cmV0dXJuIGIuJG9uKFwiJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc1wiLGQpLHtzeW5jOmZ1bmN0aW9uKCl7ZCgpfX19XX1mdW5jdGlvbiBxKGEsZSxmKXtmdW5jdGlvbiBnKGEpe3JldHVybiAwPT09YS5pbmRleE9mKFwiLlwiKXx8MD09PWEuaW5kZXhPZihcIl5cIil9ZnVuY3Rpb24gbChhLGIpe3ZhciBkPUUoYSksZT1kP2E6YS5uYW1lLGY9ZyhlKTtpZihmKXtpZighYil0aHJvdyBuZXcgRXJyb3IoXCJObyByZWZlcmVuY2UgcG9pbnQgZ2l2ZW4gZm9yIHBhdGggJ1wiK2UrXCInXCIpO2Zvcih2YXIgaD1lLnNwbGl0KFwiLlwiKSxpPTAsaj1oLmxlbmd0aCxrPWI7aj5pO2krKylpZihcIlwiIT09aFtpXXx8MCE9PWkpe2lmKFwiXlwiIT09aFtpXSlicmVhaztpZighay5wYXJlbnQpdGhyb3cgbmV3IEVycm9yKFwiUGF0aCAnXCIrZStcIicgbm90IHZhbGlkIGZvciBzdGF0ZSAnXCIrYi5uYW1lK1wiJ1wiKTtrPWsucGFyZW50fWVsc2Ugaz1iO2g9aC5zbGljZShpKS5qb2luKFwiLlwiKSxlPWsubmFtZSsoay5uYW1lJiZoP1wiLlwiOlwiXCIpK2h9dmFyIGw9d1tlXTtyZXR1cm4hbHx8IWQmJihkfHxsIT09YSYmbC5zZWxmIT09YSk/YzpsfWZ1bmN0aW9uIG0oYSxiKXt4W2FdfHwoeFthXT1bXSkseFthXS5wdXNoKGIpfWZ1bmN0aW9uIG4oYil7Yj1kKGIse3NlbGY6YixyZXNvbHZlOmIucmVzb2x2ZXx8e30sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lfX0pO3ZhciBjPWIubmFtZTtpZighRShjKXx8Yy5pbmRleE9mKFwiQFwiKT49MCl0aHJvdyBuZXcgRXJyb3IoXCJTdGF0ZSBtdXN0IGhhdmUgYSB2YWxpZCBuYW1lXCIpO2lmKHcuaGFzT3duUHJvcGVydHkoYykpdGhyb3cgbmV3IEVycm9yKFwiU3RhdGUgJ1wiK2MrXCInJyBpcyBhbHJlYWR5IGRlZmluZWRcIik7dmFyIGU9LTEhPT1jLmluZGV4T2YoXCIuXCIpP2Muc3Vic3RyaW5nKDAsYy5sYXN0SW5kZXhPZihcIi5cIikpOkUoYi5wYXJlbnQpP2IucGFyZW50OlwiXCI7aWYoZSYmIXdbZV0pcmV0dXJuIG0oZSxiLnNlbGYpO2Zvcih2YXIgZiBpbiB6KUQoeltmXSkmJihiW2ZdPXpbZl0oYix6LiRkZWxlZ2F0ZXNbZl0pKTtpZih3W2NdPWIsIWJbeV0mJmIudXJsJiZhLndoZW4oYi51cmwsW1wiJG1hdGNoXCIsXCIkc3RhdGVQYXJhbXNcIixmdW5jdGlvbihhLGMpe3YuJGN1cnJlbnQubmF2aWdhYmxlPT1iJiZqKGEsYyl8fHYudHJhbnNpdGlvblRvKGIsYSx7bG9jYXRpb246ITF9KX1dKSx4W2NdKWZvcih2YXIgZz0wO2c8eFtjXS5sZW5ndGg7ZysrKW4oeFtjXVtnXSk7cmV0dXJuIGJ9ZnVuY3Rpb24gbyhhKXtyZXR1cm4gYS5pbmRleE9mKFwiKlwiKT4tMX1mdW5jdGlvbiBwKGEpe3ZhciBiPWEuc3BsaXQoXCIuXCIpLGM9di4kY3VycmVudC5uYW1lLnNwbGl0KFwiLlwiKTtpZihcIioqXCI9PT1iWzBdJiYoYz1jLnNsaWNlKGMuaW5kZXhPZihiWzFdKSksYy51bnNoaWZ0KFwiKipcIikpLFwiKipcIj09PWJbYi5sZW5ndGgtMV0mJihjLnNwbGljZShjLmluZGV4T2YoYltiLmxlbmd0aC0yXSkrMSxOdW1iZXIuTUFYX1ZBTFVFKSxjLnB1c2goXCIqKlwiKSksYi5sZW5ndGghPWMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylcIipcIj09PWJbZF0mJihjW2RdPVwiKlwiKTtyZXR1cm4gYy5qb2luKFwiXCIpPT09Yi5qb2luKFwiXCIpfWZ1bmN0aW9uIHEoYSxiKXtyZXR1cm4gRShhKSYmIUMoYik/elthXTpEKGIpJiZFKGEpPyh6W2FdJiYhei4kZGVsZWdhdGVzW2FdJiYoei4kZGVsZWdhdGVzW2FdPXpbYV0pLHpbYV09Yix0aGlzKTp0aGlzfWZ1bmN0aW9uIHIoYSxiKXtyZXR1cm4gRihhKT9iPWE6Yi5uYW1lPWEsbihiKSx0aGlzfWZ1bmN0aW9uIHMoYSxlLGcsbSxuLHEscixzLHgpe2Z1bmN0aW9uIHooKXtyLnVybCgpIT09TSYmKHIudXJsKE0pLHIucmVwbGFjZSgpKX1mdW5jdGlvbiBBKGEsYyxkLGYsaCl7dmFyIGk9ZD9jOmsoYS5wYXJhbXMsYyksaj17JHN0YXRlUGFyYW1zOml9O2gucmVzb2x2ZT1uLnJlc29sdmUoYS5yZXNvbHZlLGosaC5yZXNvbHZlLGEpO3ZhciBsPVtoLnJlc29sdmUudGhlbihmdW5jdGlvbihhKXtoLmdsb2JhbHM9YX0pXTtyZXR1cm4gZiYmbC5wdXNoKGYpLEgoYS52aWV3cyxmdW5jdGlvbihjLGQpe3ZhciBlPWMucmVzb2x2ZSYmYy5yZXNvbHZlIT09YS5yZXNvbHZlP2MucmVzb2x2ZTp7fTtlLiR0ZW1wbGF0ZT1bZnVuY3Rpb24oKXtyZXR1cm4gZy5sb2FkKGQse3ZpZXc6Yyxsb2NhbHM6aixwYXJhbXM6aSxub3RpZnk6ITF9KXx8XCJcIn1dLGwucHVzaChuLnJlc29sdmUoZSxqLGgucmVzb2x2ZSxhKS50aGVuKGZ1bmN0aW9uKGYpe2lmKEQoYy5jb250cm9sbGVyUHJvdmlkZXIpfHxHKGMuY29udHJvbGxlclByb3ZpZGVyKSl7dmFyIGc9Yi5leHRlbmQoe30sZSxqKTtmLiQkY29udHJvbGxlcj1tLmludm9rZShjLmNvbnRyb2xsZXJQcm92aWRlcixudWxsLGcpfWVsc2UgZi4kJGNvbnRyb2xsZXI9Yy5jb250cm9sbGVyO2YuJCRzdGF0ZT1hLGYuJCRjb250cm9sbGVyQXM9Yy5jb250cm9sbGVyQXMsaFtkXT1mfSkpfSksZS5hbGwobCkudGhlbihmdW5jdGlvbigpe3JldHVybiBofSl9dmFyIEI9ZS5yZWplY3QobmV3IEVycm9yKFwidHJhbnNpdGlvbiBzdXBlcnNlZGVkXCIpKSxGPWUucmVqZWN0KG5ldyBFcnJvcihcInRyYW5zaXRpb24gcHJldmVudGVkXCIpKSxLPWUucmVqZWN0KG5ldyBFcnJvcihcInRyYW5zaXRpb24gYWJvcnRlZFwiKSksTD1lLnJlamVjdChuZXcgRXJyb3IoXCJ0cmFuc2l0aW9uIGZhaWxlZFwiKSksTT1yLnVybCgpLE49eC5iYXNlSHJlZigpO3JldHVybiB1LmxvY2Fscz17cmVzb2x2ZTpudWxsLGdsb2JhbHM6eyRzdGF0ZVBhcmFtczp7fX19LHY9e3BhcmFtczp7fSxjdXJyZW50OnUuc2VsZiwkY3VycmVudDp1LHRyYW5zaXRpb246bnVsbH0sdi5yZWxvYWQ9ZnVuY3Rpb24oKXt2LnRyYW5zaXRpb25Ubyh2LmN1cnJlbnQscSx7cmVsb2FkOiEwLGluaGVyaXQ6ITEsbm90aWZ5OiExfSl9LHYuZ289ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLnRyYW5zaXRpb25UbyhhLGIsSSh7aW5oZXJpdDohMCxyZWxhdGl2ZTp2LiRjdXJyZW50fSxjKSl9LHYudHJhbnNpdGlvblRvPWZ1bmN0aW9uKGIsYyxmKXtjPWN8fHt9LGY9SSh7bG9jYXRpb246ITAsaW5oZXJpdDohMSxyZWxhdGl2ZTpudWxsLG5vdGlmeTohMCxyZWxvYWQ6ITEsJHJldHJ5OiExfSxmfHx7fSk7dmFyIGcsaz12LiRjdXJyZW50LG49di5wYXJhbXMsbz1rLnBhdGgscD1sKGIsZi5yZWxhdGl2ZSk7aWYoIUMocCkpe3ZhciBzPXt0bzpiLHRvUGFyYW1zOmMsb3B0aW9uczpmfTtpZihnPWEuJGJyb2FkY2FzdChcIiRzdGF0ZU5vdEZvdW5kXCIscyxrLnNlbGYsbiksZy5kZWZhdWx0UHJldmVudGVkKXJldHVybiB6KCksSztpZihnLnJldHJ5KXtpZihmLiRyZXRyeSlyZXR1cm4geigpLEw7dmFyIHc9di50cmFuc2l0aW9uPWUud2hlbihnLnJldHJ5KTtyZXR1cm4gdy50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHchPT12LnRyYW5zaXRpb24/Qjoocy5vcHRpb25zLiRyZXRyeT0hMCx2LnRyYW5zaXRpb25UbyhzLnRvLHMudG9QYXJhbXMscy5vcHRpb25zKSl9LGZ1bmN0aW9uKCl7cmV0dXJuIEt9KSx6KCksd31pZihiPXMudG8sYz1zLnRvUGFyYW1zLGY9cy5vcHRpb25zLHA9bChiLGYucmVsYXRpdmUpLCFDKHApKXtpZihmLnJlbGF0aXZlKXRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCByZXNvbHZlICdcIitiK1wiJyBmcm9tIHN0YXRlICdcIitmLnJlbGF0aXZlK1wiJ1wiKTt0aHJvdyBuZXcgRXJyb3IoXCJObyBzdWNoIHN0YXRlICdcIitiK1wiJ1wiKX19aWYocFt5XSl0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgdHJhbnNpdGlvbiB0byBhYnN0cmFjdCBzdGF0ZSAnXCIrYitcIidcIik7Zi5pbmhlcml0JiYoYz1oKHEsY3x8e30sdi4kY3VycmVudCxwKSksYj1wO3ZhciB4LEQsRT1iLnBhdGgsRz11LmxvY2FscyxIPVtdO2Zvcih4PTAsRD1FW3hdO0QmJkQ9PT1vW3hdJiZqKGMsbixELm93blBhcmFtcykmJiFmLnJlbG9hZDt4KyssRD1FW3hdKUc9SFt4XT1ELmxvY2FscztpZih0KGIsayxHLGYpKXJldHVybiBiLnNlbGYucmVsb2FkT25TZWFyY2ghPT0hMSYmeigpLHYudHJhbnNpdGlvbj1udWxsLGUud2hlbih2LmN1cnJlbnQpO2lmKGM9aShiLnBhcmFtcyxjfHx7fSksZi5ub3RpZnkmJihnPWEuJGJyb2FkY2FzdChcIiRzdGF0ZUNoYW5nZVN0YXJ0XCIsYi5zZWxmLGMsay5zZWxmLG4pLGcuZGVmYXVsdFByZXZlbnRlZCkpcmV0dXJuIHooKSxGO2Zvcih2YXIgTj1lLndoZW4oRyksTz14O088RS5sZW5ndGg7TysrLEQ9RVtPXSlHPUhbT109ZChHKSxOPUEoRCxjLEQ9PT1iLE4sRyk7dmFyIFA9di50cmFuc2l0aW9uPU4udGhlbihmdW5jdGlvbigpe3ZhciBkLGUsZztpZih2LnRyYW5zaXRpb24hPT1QKXJldHVybiBCO2ZvcihkPW8ubGVuZ3RoLTE7ZD49eDtkLS0pZz1vW2RdLGcuc2VsZi5vbkV4aXQmJm0uaW52b2tlKGcuc2VsZi5vbkV4aXQsZy5zZWxmLGcubG9jYWxzLmdsb2JhbHMpLGcubG9jYWxzPW51bGw7Zm9yKGQ9eDtkPEUubGVuZ3RoO2QrKyllPUVbZF0sZS5sb2NhbHM9SFtkXSxlLnNlbGYub25FbnRlciYmbS5pbnZva2UoZS5zZWxmLm9uRW50ZXIsZS5zZWxmLGUubG9jYWxzLmdsb2JhbHMpO2lmKHYudHJhbnNpdGlvbiE9PVApcmV0dXJuIEI7di4kY3VycmVudD1iLHYuY3VycmVudD1iLnNlbGYsdi5wYXJhbXM9YyxKKHYucGFyYW1zLHEpLHYudHJhbnNpdGlvbj1udWxsO3ZhciBoPWIubmF2aWdhYmxlO3JldHVybiBmLmxvY2F0aW9uJiZoJiYoci51cmwoaC51cmwuZm9ybWF0KGgubG9jYWxzLmdsb2JhbHMuJHN0YXRlUGFyYW1zKSksXCJyZXBsYWNlXCI9PT1mLmxvY2F0aW9uJiZyLnJlcGxhY2UoKSksZi5ub3RpZnkmJmEuJGJyb2FkY2FzdChcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIixiLnNlbGYsYyxrLnNlbGYsbiksTT1yLnVybCgpLHYuY3VycmVudH0sZnVuY3Rpb24oZCl7cmV0dXJuIHYudHJhbnNpdGlvbiE9PVA/Qjoodi50cmFuc2l0aW9uPW51bGwsYS4kYnJvYWRjYXN0KFwiJHN0YXRlQ2hhbmdlRXJyb3JcIixiLnNlbGYsYyxrLnNlbGYsbixkKSx6KCksZS5yZWplY3QoZCkpfSk7cmV0dXJuIFB9LHYuaXM9ZnVuY3Rpb24oYSxkKXt2YXIgZT1sKGEpO3JldHVybiBDKGUpP3YuJGN1cnJlbnQhPT1lPyExOkMoZCkmJm51bGwhPT1kP2IuZXF1YWxzKHEsZCk6ITA6Y30sdi5pbmNsdWRlcz1mdW5jdGlvbihhLGQpe2lmKEUoYSkmJm8oYSkpe2lmKCFwKGEpKXJldHVybiExO2E9di4kY3VycmVudC5uYW1lfXZhciBlPWwoYSk7aWYoIUMoZSkpcmV0dXJuIGM7aWYoIUModi4kY3VycmVudC5pbmNsdWRlc1tlLm5hbWVdKSlyZXR1cm4hMTt2YXIgZj0hMDtyZXR1cm4gYi5mb3JFYWNoKGQsZnVuY3Rpb24oYSxiKXtDKHFbYl0pJiZxW2JdPT09YXx8KGY9ITEpfSksZn0sdi5ocmVmPWZ1bmN0aW9uKGEsYixjKXtjPUkoe2xvc3N5OiEwLGluaGVyaXQ6ITEsYWJzb2x1dGU6ITEscmVsYXRpdmU6di4kY3VycmVudH0sY3x8e30pO3ZhciBkPWwoYSxjLnJlbGF0aXZlKTtpZighQyhkKSlyZXR1cm4gbnVsbDtiPWgocSxifHx7fSx2LiRjdXJyZW50LGQpO3ZhciBlPWQmJmMubG9zc3k/ZC5uYXZpZ2FibGU6ZCxnPWUmJmUudXJsP2UudXJsLmZvcm1hdChpKGQucGFyYW1zLGJ8fHt9KSk6bnVsbDtyZXR1cm4hZi5odG1sNU1vZGUoKSYmZyYmKGc9XCIjXCIrZi5oYXNoUHJlZml4KCkrZyksXCIvXCIhPT1OJiYoZi5odG1sNU1vZGUoKT9nPU4uc2xpY2UoMCwtMSkrZzpjLmFic29sdXRlJiYoZz1OLnNsaWNlKDEpK2cpKSxjLmFic29sdXRlJiZnJiYoZz1yLnByb3RvY29sKCkrXCI6Ly9cIityLmhvc3QoKSsoODA9PXIucG9ydCgpfHw0NDM9PXIucG9ydCgpP1wiXCI6XCI6XCIrci5wb3J0KCkpKyghZi5odG1sNU1vZGUoKSYmZz9cIi9cIjpcIlwiKStnKSxnfSx2LmdldD1mdW5jdGlvbihhLGIpe2lmKCFDKGEpKXt2YXIgYz1bXTtyZXR1cm4gSCh3LGZ1bmN0aW9uKGEpe2MucHVzaChhLnNlbGYpfSksY312YXIgZD1sKGEsYik7cmV0dXJuIGQmJmQuc2VsZj9kLnNlbGY6bnVsbH0sdn1mdW5jdGlvbiB0KGEsYixjLGQpe3JldHVybiBhIT09Ynx8KGMhPT1iLmxvY2Fsc3x8ZC5yZWxvYWQpJiZhLnNlbGYucmVsb2FkT25TZWFyY2ghPT0hMT92b2lkIDA6ITB9dmFyIHUsdix3PXt9LHg9e30seT1cImFic3RyYWN0XCIsej17cGFyZW50OmZ1bmN0aW9uKGEpe2lmKEMoYS5wYXJlbnQpJiZhLnBhcmVudClyZXR1cm4gbChhLnBhcmVudCk7dmFyIGI9L14oLispXFwuW14uXSskLy5leGVjKGEubmFtZSk7cmV0dXJuIGI/bChiWzFdKTp1fSxkYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudCYmYS5wYXJlbnQuZGF0YSYmKGEuZGF0YT1hLnNlbGYuZGF0YT1JKHt9LGEucGFyZW50LmRhdGEsYS5kYXRhKSksYS5kYXRhfSx1cmw6ZnVuY3Rpb24oYSl7dmFyIGI9YS51cmw7aWYoRShiKSlyZXR1cm5cIl5cIj09Yi5jaGFyQXQoMCk/ZS5jb21waWxlKGIuc3Vic3RyaW5nKDEpKTooYS5wYXJlbnQubmF2aWdhYmxlfHx1KS51cmwuY29uY2F0KGIpO2lmKGUuaXNNYXRjaGVyKGIpfHxudWxsPT1iKXJldHVybiBiO3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgdXJsICdcIitiK1wiJyBpbiBzdGF0ZSAnXCIrYStcIidcIil9LG5hdmlnYWJsZTpmdW5jdGlvbihhKXtyZXR1cm4gYS51cmw/YTphLnBhcmVudD9hLnBhcmVudC5uYXZpZ2FibGU6bnVsbH0scGFyYW1zOmZ1bmN0aW9uKGEpe2lmKCFhLnBhcmFtcylyZXR1cm4gYS51cmw/YS51cmwucGFyYW1ldGVycygpOmEucGFyZW50LnBhcmFtcztpZighRyhhLnBhcmFtcykpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXJhbXMgaW4gc3RhdGUgJ1wiK2ErXCInXCIpO2lmKGEudXJsKXRocm93IG5ldyBFcnJvcihcIkJvdGggcGFyYW1zIGFuZCB1cmwgc3BlY2ljaWZpZWQgaW4gc3RhdGUgJ1wiK2ErXCInXCIpO3JldHVybiBhLnBhcmFtc30sdmlld3M6ZnVuY3Rpb24oYSl7dmFyIGI9e307cmV0dXJuIEgoQyhhLnZpZXdzKT9hLnZpZXdzOntcIlwiOmF9LGZ1bmN0aW9uKGMsZCl7ZC5pbmRleE9mKFwiQFwiKTwwJiYoZCs9XCJAXCIrYS5wYXJlbnQubmFtZSksYltkXT1jfSksYn0sb3duUGFyYW1zOmZ1bmN0aW9uKGEpe2lmKCFhLnBhcmVudClyZXR1cm4gYS5wYXJhbXM7dmFyIGI9e307SChhLnBhcmFtcyxmdW5jdGlvbihhKXtiW2FdPSEwfSksSChhLnBhcmVudC5wYXJhbXMsZnVuY3Rpb24oYyl7aWYoIWJbY10pdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyByZXF1aXJlZCBwYXJhbWV0ZXIgJ1wiK2MrXCInIGluIHN0YXRlICdcIithLm5hbWUrXCInXCIpO2JbY109ITF9KTt2YXIgYz1bXTtyZXR1cm4gSChiLGZ1bmN0aW9uKGEsYil7YSYmYy5wdXNoKGIpfSksY30scGF0aDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnQ/YS5wYXJlbnQucGF0aC5jb25jYXQoYSk6W119LGluY2x1ZGVzOmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50P0koe30sYS5wYXJlbnQuaW5jbHVkZXMpOnt9O3JldHVybiBiW2EubmFtZV09ITAsYn0sJGRlbGVnYXRlczp7fX07dT1uKHtuYW1lOlwiXCIsdXJsOlwiXlwiLHZpZXdzOm51bGwsXCJhYnN0cmFjdFwiOiEwfSksdS5uYXZpZ2FibGU9bnVsbCx0aGlzLmRlY29yYXRvcj1xLHRoaXMuc3RhdGU9cix0aGlzLiRnZXQ9cyxzLiRpbmplY3Q9W1wiJHJvb3RTY29wZVwiLFwiJHFcIixcIiR2aWV3XCIsXCIkaW5qZWN0b3JcIixcIiRyZXNvbHZlXCIsXCIkc3RhdGVQYXJhbXNcIixcIiRsb2NhdGlvblwiLFwiJHVybFJvdXRlclwiLFwiJGJyb3dzZXJcIl19ZnVuY3Rpb24gcigpe2Z1bmN0aW9uIGEoYSxiKXtyZXR1cm57bG9hZDpmdW5jdGlvbihjLGQpe3ZhciBlLGY9e3RlbXBsYXRlOm51bGwsY29udHJvbGxlcjpudWxsLHZpZXc6bnVsbCxsb2NhbHM6bnVsbCxub3RpZnk6ITAsYXN5bmM6ITAscGFyYW1zOnt9fTtyZXR1cm4gZD1JKGYsZCksZC52aWV3JiYoZT1iLmZyb21Db25maWcoZC52aWV3LGQucGFyYW1zLGQubG9jYWxzKSksZSYmZC5ub3RpZnkmJmEuJGJyb2FkY2FzdChcIiR2aWV3Q29udGVudExvYWRpbmdcIixkKSxlfX19dGhpcy4kZ2V0PWEsYS4kaW5qZWN0PVtcIiRyb290U2NvcGVcIixcIiR0ZW1wbGF0ZUZhY3RvcnlcIl19ZnVuY3Rpb24gcygpe3ZhciBhPSExO3RoaXMudXNlQW5jaG9yU2Nyb2xsPWZ1bmN0aW9uKCl7YT0hMH0sdGhpcy4kZ2V0PVtcIiRhbmNob3JTY3JvbGxcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYixjKXtyZXR1cm4gYT9iOmZ1bmN0aW9uKGEpe2MoZnVuY3Rpb24oKXthWzBdLnNjcm9sbEludG9WaWV3KCl9LDAsITEpfX1dfWZ1bmN0aW9uIHQoYSxjLGQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gYy5oYXM/ZnVuY3Rpb24oYSl7cmV0dXJuIGMuaGFzKGEpP2MuZ2V0KGEpOm51bGx9OmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gYy5nZXQoYSl9Y2F0Y2goYil7cmV0dXJuIG51bGx9fX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oYSxiLGMpe2IuYWZ0ZXIoYSksYygpfSxsZWF2ZTpmdW5jdGlvbihhLGIpe2EucmVtb3ZlKCksYigpfX19O2lmKGkpcmV0dXJue2VudGVyOmZ1bmN0aW9uKGEsYixjKXtpLmVudGVyKGEsbnVsbCxiLGMpfSxsZWF2ZTpmdW5jdGlvbihhLGIpe2kubGVhdmUoYSxiKX19O2lmKGgpe3ZhciBkPWgmJmgoYixhKTtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oYSxiLGMpe2QuZW50ZXIoYSxudWxsLGIpLGMoKX0sbGVhdmU6ZnVuY3Rpb24oYSxiKXtkLmxlYXZlKGEpLGIoKX19fXJldHVybiBjKCl9dmFyIGc9ZSgpLGg9ZyhcIiRhbmltYXRvclwiKSxpPWcoXCIkYW5pbWF0ZVwiKSxqPXtyZXN0cmljdDpcIkVDQVwiLHRlcm1pbmFsOiEwLHByaW9yaXR5OjQwMCx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLGNvbXBpbGU6ZnVuY3Rpb24oYyxlLGcpe3JldHVybiBmdW5jdGlvbihjLGUsaCl7ZnVuY3Rpb24gaSgpe2smJihrLnJlbW92ZSgpLGs9bnVsbCksbSYmKG0uJGRlc3Ryb3koKSxtPW51bGwpLGwmJihxLmxlYXZlKGwsZnVuY3Rpb24oKXtrPW51bGx9KSxrPWwsbD1udWxsKX1mdW5jdGlvbiBqKGYpe3ZhciBoPWMuJG5ldygpLGo9bCYmbC5kYXRhKFwiJHVpVmlld05hbWVcIiksaz1qJiZhLiRjdXJyZW50JiZhLiRjdXJyZW50LmxvY2Fsc1tqXTtpZihmfHxrIT09bil7dmFyIHI9ZyhoLGZ1bmN0aW9uKGEpe3EuZW50ZXIoYSxlLGZ1bmN0aW9uKCl7KGIuaXNEZWZpbmVkKHApJiYhcHx8Yy4kZXZhbChwKSkmJmQoYSl9KSxpKCl9KTtuPWEuJGN1cnJlbnQubG9jYWxzW3IuZGF0YShcIiR1aVZpZXdOYW1lXCIpXSxsPXIsbT1oLG0uJGVtaXQoXCIkdmlld0NvbnRlbnRMb2FkZWRcIiksbS4kZXZhbChvKX19dmFyIGssbCxtLG4sbz1oLm9ubG9hZHx8XCJcIixwPWguYXV0b3Njcm9sbCxxPWYoaCxjKTtjLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIixmdW5jdGlvbigpe2ooITEpfSksYy4kb24oXCIkdmlld0NvbnRlbnRMb2FkaW5nXCIsZnVuY3Rpb24oKXtqKCExKX0pLGooITApfX19O3JldHVybiBqfWZ1bmN0aW9uIHUoYSxiLGMpe3JldHVybntyZXN0cmljdDpcIkVDQVwiLHByaW9yaXR5Oi00MDAsY29tcGlsZTpmdW5jdGlvbihkKXt2YXIgZT1kLmh0bWwoKTtyZXR1cm4gZnVuY3Rpb24oZCxmLGcpe3ZhciBoPWcudWlWaWV3fHxnLm5hbWV8fFwiXCIsaT1mLmluaGVyaXRlZERhdGEoXCIkdWlWaWV3XCIpO2guaW5kZXhPZihcIkBcIik8MCYmKGg9aCtcIkBcIisoaT9pLnN0YXRlLm5hbWU6XCJcIikpLGYuZGF0YShcIiR1aVZpZXdOYW1lXCIsaCk7dmFyIGo9Yy4kY3VycmVudCxrPWomJmoubG9jYWxzW2hdO2lmKGspe2YuZGF0YShcIiR1aVZpZXdcIix7bmFtZTpoLHN0YXRlOmsuJCRzdGF0ZX0pLGYuaHRtbChrLiR0ZW1wbGF0ZT9rLiR0ZW1wbGF0ZTplKTt2YXIgbD1hKGYuY29udGVudHMoKSk7aWYoay4kJGNvbnRyb2xsZXIpe2suJHNjb3BlPWQ7dmFyIG09YihrLiQkY29udHJvbGxlcixrKTtrLiQkY29udHJvbGxlckFzJiYoZFtrLiQkY29udHJvbGxlckFzXT1tKSxmLmRhdGEoXCIkbmdDb250cm9sbGVyQ29udHJvbGxlclwiLG0pLGYuY2hpbGRyZW4oKS5kYXRhKFwiJG5nQ29udHJvbGxlckNvbnRyb2xsZXJcIixtKX1sKGQpfX19fX1mdW5jdGlvbiB2KGEpe3ZhciBiPWEucmVwbGFjZSgvXFxuL2csXCIgXCIpLm1hdGNoKC9eKFteKF0rPylcXHMqKFxcKCguKilcXCkpPyQvKTtpZighYnx8NCE9PWIubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RhdGUgcmVmICdcIithK1wiJ1wiKTtyZXR1cm57c3RhdGU6YlsxXSxwYXJhbUV4cHI6YlszXXx8bnVsbH19ZnVuY3Rpb24gdyhhKXt2YXIgYj1hLnBhcmVudCgpLmluaGVyaXRlZERhdGEoXCIkdWlWaWV3XCIpO3JldHVybiBiJiZiLnN0YXRlJiZiLnN0YXRlLm5hbWU/Yi5zdGF0ZTp2b2lkIDB9ZnVuY3Rpb24geChhLGMpe3ZhciBkPVtcImxvY2F0aW9uXCIsXCJpbmhlcml0XCIsXCJyZWxvYWRcIl07cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCI/XnVpU3JlZkFjdGl2ZVwiLGxpbms6ZnVuY3Rpb24oZSxmLGcsaCl7dmFyIGk9dihnLnVpU3JlZiksaj1udWxsLGs9dyhmKXx8YS4kY3VycmVudCxsPVwiRk9STVwiPT09ZlswXS5ub2RlTmFtZSxtPWw/XCJhY3Rpb25cIjpcImhyZWZcIixuPSEwLG89e3JlbGF0aXZlOmt9LHA9ZS4kZXZhbChnLnVpU3JlZk9wdHMpfHx7fTtiLmZvckVhY2goZCxmdW5jdGlvbihhKXthIGluIHAmJihvW2FdPXBbYV0pfSk7dmFyIHE9ZnVuY3Rpb24oYil7aWYoYiYmKGo9Yiksbil7dmFyIGM9YS5ocmVmKGkuc3RhdGUsaixvKTtyZXR1cm4gaCYmaC4kJHNldFN0YXRlSW5mbyhpLnN0YXRlLGopLGM/dm9pZChmWzBdW21dPWMpOihuPSExLCExKX19O2kucGFyYW1FeHByJiYoZS4kd2F0Y2goaS5wYXJhbUV4cHIsZnVuY3Rpb24oYSl7YSE9PWomJnEoYSl9LCEwKSxqPWUuJGV2YWwoaS5wYXJhbUV4cHIpKSxxKCksbHx8Zi5iaW5kKFwiY2xpY2tcIixmdW5jdGlvbihiKXt2YXIgZD1iLndoaWNofHxiLmJ1dHRvbjtkPjF8fGIuY3RybEtleXx8Yi5tZXRhS2V5fHxiLnNoaWZ0S2V5fHxmLmF0dHIoXCJ0YXJnZXRcIil8fChjKGZ1bmN0aW9uKCl7YS5nbyhpLnN0YXRlLGosbyl9KSxiLnByZXZlbnREZWZhdWx0KCkpfSl9fX1mdW5jdGlvbiB5KGEsYixjKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsY29udHJvbGxlcjpbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixmdW5jdGlvbihkLGUsZil7ZnVuY3Rpb24gZygpe2EuJGN1cnJlbnQuc2VsZj09PWkmJmgoKT9lLmFkZENsYXNzKGwpOmUucmVtb3ZlQ2xhc3MobCl9ZnVuY3Rpb24gaCgpe3JldHVybiFrfHxqKGssYil9dmFyIGksayxsO2w9YyhmLnVpU3JlZkFjdGl2ZXx8XCJcIiwhMSkoZCksdGhpcy4kJHNldFN0YXRlSW5mbz1mdW5jdGlvbihiLGMpe2k9YS5nZXQoYix3KGUpKSxrPWMsZygpfSxkLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIixnKX1dfX1mdW5jdGlvbiB6KGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5pcyhiKX19ZnVuY3Rpb24gQShhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuaW5jbHVkZXMoYil9fWZ1bmN0aW9uIEIoYSxiKXtmdW5jdGlvbiBlKGEpe3RoaXMubG9jYWxzPWEubG9jYWxzLmdsb2JhbHMsdGhpcy5wYXJhbXM9dGhpcy5sb2NhbHMuJHN0YXRlUGFyYW1zfWZ1bmN0aW9uIGYoKXt0aGlzLmxvY2Fscz1udWxsLHRoaXMucGFyYW1zPW51bGx9ZnVuY3Rpb24gZyhjLGcpe2lmKG51bGwhPWcucmVkaXJlY3RUbyl7dmFyIGgsaj1nLnJlZGlyZWN0VG87aWYoRShqKSloPWo7ZWxzZXtpZighRChqKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdyZWRpcmVjdFRvJyBpbiB3aGVuKClcIik7aD1mdW5jdGlvbihhLGIpe3JldHVybiBqKGEsYi5wYXRoKCksYi5zZWFyY2goKSl9fWIud2hlbihjLGgpfWVsc2UgYS5zdGF0ZShkKGcse3BhcmVudDpudWxsLG5hbWU6XCJyb3V0ZTpcIitlbmNvZGVVUklDb21wb25lbnQoYyksdXJsOmMsb25FbnRlcjplLG9uRXhpdDpmfSkpO3JldHVybiBpLnB1c2goZyksdGhpc31mdW5jdGlvbiBoKGEsYixkKXtmdW5jdGlvbiBlKGEpe3JldHVyblwiXCIhPT1hLm5hbWU/YTpjfXZhciBmPXtyb3V0ZXM6aSxwYXJhbXM6ZCxjdXJyZW50OmN9O3JldHVybiBiLiRvbihcIiRzdGF0ZUNoYW5nZVN0YXJ0XCIsZnVuY3Rpb24oYSxjLGQsZil7Yi4kYnJvYWRjYXN0KFwiJHJvdXRlQ2hhbmdlU3RhcnRcIixlKGMpLGUoZikpfSksYi4kb24oXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsZnVuY3Rpb24oYSxjLGQsZyl7Zi5jdXJyZW50PWUoYyksYi4kYnJvYWRjYXN0KFwiJHJvdXRlQ2hhbmdlU3VjY2Vzc1wiLGUoYyksZShnKSksSihkLGYucGFyYW1zKX0pLGIuJG9uKFwiJHN0YXRlQ2hhbmdlRXJyb3JcIixmdW5jdGlvbihhLGMsZCxmLGcsaCl7Yi4kYnJvYWRjYXN0KFwiJHJvdXRlQ2hhbmdlRXJyb3JcIixlKGMpLGUoZiksaCl9KSxmfXZhciBpPVtdO2UuJGluamVjdD1bXCIkJHN0YXRlXCJdLHRoaXMud2hlbj1nLHRoaXMuJGdldD1oLGguJGluamVjdD1bXCIkc3RhdGVcIixcIiRyb290U2NvcGVcIixcIiRyb3V0ZVBhcmFtc1wiXX12YXIgQz1iLmlzRGVmaW5lZCxEPWIuaXNGdW5jdGlvbixFPWIuaXNTdHJpbmcsRj1iLmlzT2JqZWN0LEc9Yi5pc0FycmF5LEg9Yi5mb3JFYWNoLEk9Yi5leHRlbmQsSj1iLmNvcHk7Yi5tb2R1bGUoXCJ1aS5yb3V0ZXIudXRpbFwiLFtcIm5nXCJdKSxiLm1vZHVsZShcInVpLnJvdXRlci5yb3V0ZXJcIixbXCJ1aS5yb3V0ZXIudXRpbFwiXSksYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIixbXCJ1aS5yb3V0ZXIucm91dGVyXCIsXCJ1aS5yb3V0ZXIudXRpbFwiXSksYi5tb2R1bGUoXCJ1aS5yb3V0ZXJcIixbXCJ1aS5yb3V0ZXIuc3RhdGVcIl0pLGIubW9kdWxlKFwidWkucm91dGVyLmNvbXBhdFwiLFtcInVpLnJvdXRlclwiXSksbC4kaW5qZWN0PVtcIiRxXCIsXCIkaW5qZWN0b3JcIl0sYi5tb2R1bGUoXCJ1aS5yb3V0ZXIudXRpbFwiKS5zZXJ2aWNlKFwiJHJlc29sdmVcIixsKSxtLiRpbmplY3Q9W1wiJGh0dHBcIixcIiR0ZW1wbGF0ZUNhY2hlXCIsXCIkaW5qZWN0b3JcIl0sYi5tb2R1bGUoXCJ1aS5yb3V0ZXIudXRpbFwiKS5zZXJ2aWNlKFwiJHRlbXBsYXRlRmFjdG9yeVwiLG0pLG4ucHJvdG90eXBlLmNvbmNhdD1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IG4odGhpcy5zb3VyY2VQYXRoK2ErdGhpcy5zb3VyY2VTZWFyY2gpfSxuLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZX0sbi5wcm90b3R5cGUuZXhlYz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucmVnZXhwLmV4ZWMoYSk7aWYoIWMpcmV0dXJuIG51bGw7dmFyIGQsZT10aGlzLnBhcmFtcyxmPWUubGVuZ3RoLGc9dGhpcy5zZWdtZW50cy5sZW5ndGgtMSxoPXt9O2lmKGchPT1jLmxlbmd0aC0xKXRocm93IG5ldyBFcnJvcihcIlVuYmFsYW5jZWQgY2FwdHVyZSBncm91cCBpbiByb3V0ZSAnXCIrdGhpcy5zb3VyY2UrXCInXCIpO2ZvcihkPTA7Zz5kO2QrKyloW2VbZF1dPWNbZCsxXTtmb3IoO2Y+ZDtkKyspaFtlW2RdXT1iW2VbZF1dO3JldHVybiBofSxuLnByb3RvdHlwZS5wYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyYW1zfSxuLnByb3RvdHlwZS5mb3JtYXQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zZWdtZW50cyxjPXRoaXMucGFyYW1zO2lmKCFhKXJldHVybiBiLmpvaW4oXCJcIik7dmFyIGQsZSxmLGc9Yi5sZW5ndGgtMSxoPWMubGVuZ3RoLGk9YlswXTtmb3IoZD0wO2c+ZDtkKyspZj1hW2NbZF1dLG51bGwhPWYmJihpKz1lbmNvZGVVUklDb21wb25lbnQoZikpLGkrPWJbZCsxXTtmb3IoO2g+ZDtkKyspZj1hW2NbZF1dLG51bGwhPWYmJihpKz0oZT9cIiZcIjpcIj9cIikrY1tkXStcIj1cIitlbmNvZGVVUklDb21wb25lbnQoZiksZT0hMCk7cmV0dXJuIGl9LGIubW9kdWxlKFwidWkucm91dGVyLnV0aWxcIikucHJvdmlkZXIoXCIkdXJsTWF0Y2hlckZhY3RvcnlcIixvKSxwLiRpbmplY3Q9W1wiJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXJcIl0sYi5tb2R1bGUoXCJ1aS5yb3V0ZXIucm91dGVyXCIpLnByb3ZpZGVyKFwiJHVybFJvdXRlclwiLHApLHEuJGluamVjdD1bXCIkdXJsUm91dGVyUHJvdmlkZXJcIixcIiR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyXCIsXCIkbG9jYXRpb25Qcm92aWRlclwiXSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS52YWx1ZShcIiRzdGF0ZVBhcmFtc1wiLHt9KS5wcm92aWRlcihcIiRzdGF0ZVwiLHEpLHIuJGluamVjdD1bXSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5wcm92aWRlcihcIiR2aWV3XCIsciksYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikucHJvdmlkZXIoXCIkdWlWaWV3U2Nyb2xsXCIscyksdC4kaW5qZWN0PVtcIiRzdGF0ZVwiLFwiJGluamVjdG9yXCIsXCIkdWlWaWV3U2Nyb2xsXCJdLHUuJGluamVjdD1bXCIkY29tcGlsZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRzdGF0ZVwiXSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5kaXJlY3RpdmUoXCJ1aVZpZXdcIix0KSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5kaXJlY3RpdmUoXCJ1aVZpZXdcIix1KSx4LiRpbmplY3Q9W1wiJHN0YXRlXCIsXCIkdGltZW91dFwiXSx5LiRpbmplY3Q9W1wiJHN0YXRlXCIsXCIkc3RhdGVQYXJhbXNcIixcIiRpbnRlcnBvbGF0ZVwiXSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5kaXJlY3RpdmUoXCJ1aVNyZWZcIix4KS5kaXJlY3RpdmUoXCJ1aVNyZWZBY3RpdmVcIix5KSx6LiRpbmplY3Q9W1wiJHN0YXRlXCJdLEEuJGluamVjdD1bXCIkc3RhdGVcIl0sYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikuZmlsdGVyKFwiaXNTdGF0ZVwiLHopLmZpbHRlcihcImluY2x1ZGVkQnlTdGF0ZVwiLEEpLEIuJGluamVjdD1bXCIkc3RhdGVQcm92aWRlclwiLFwiJHVybFJvdXRlclByb3ZpZGVyXCJdLGIubW9kdWxlKFwidWkucm91dGVyLmNvbXBhdFwiKS5wcm92aWRlcihcIiRyb3V0ZVwiLEIpLmRpcmVjdGl2ZShcIm5nVmlld1wiLHQpfSh3aW5kb3csd2luZG93LmFuZ3VsYXIpO1xufSkuY2FsbChnbG9iYWwsIG1vZHVsZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSkiLCIoZnVuY3Rpb24gKGdsb2JhbCl7XG47X19icm93c2VyaWZ5X3NoaW1fcmVxdWlyZV9fPXJlcXVpcmU7KGZ1bmN0aW9uIGJyb3dzZXJpZnlTaGltKG1vZHVsZSwgZXhwb3J0cywgcmVxdWlyZSwgZGVmaW5lLCBicm93c2VyaWZ5X3NoaW1fX2RlZmluZV9fbW9kdWxlX19leHBvcnRfXykge1xuLypcbiBBbmd1bGFySlMgdjEuMi4yNlxuIChjKSAyMDEwLTIwMTQgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gTGljZW5zZTogTUlUXG4qL1xuKGZ1bmN0aW9uKFcsWCx0KXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gQyhiKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF0sYyxhPVwiW1wiKyhiP2IrXCI6XCI6XCJcIikrYStcIl0gaHR0cDovL2Vycm9ycy5hbmd1bGFyanMub3JnLzEuMi4yNi9cIisoYj9iK1wiL1wiOlwiXCIpK2E7Zm9yKGM9MTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKWE9YSsoMT09Yz9cIj9cIjpcIiZcIikrXCJwXCIrKGMtMSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1tjXT9hcmd1bWVudHNbY10udG9TdHJpbmcoKS5yZXBsYWNlKC8gXFx7W1xcc1xcU10qJC8sXCJcIik6XCJ1bmRlZmluZWRcIj09dHlwZW9mIGFyZ3VtZW50c1tjXT9cInVuZGVmaW5lZFwiOlwic3RyaW5nXCIhPXR5cGVvZiBhcmd1bWVudHNbY10/SlNPTi5zdHJpbmdpZnkoYXJndW1lbnRzW2NdKTphcmd1bWVudHNbY10pO3JldHVybiBFcnJvcihhKX19ZnVuY3Rpb24gUGEoYil7aWYobnVsbD09Ynx8R2EoYikpcmV0dXJuITE7XG52YXIgYT1iLmxlbmd0aDtyZXR1cm4gMT09PWIubm9kZVR5cGUmJmE/ITA6dihiKXx8SihiKXx8MD09PWF8fFwibnVtYmVyXCI9PT10eXBlb2YgYSYmMDxhJiZhLTEgaW4gYn1mdW5jdGlvbiByKGIsYSxjKXt2YXIgZDtpZihiKWlmKFAoYikpZm9yKGQgaW4gYilcInByb3RvdHlwZVwiPT1kfHwoXCJsZW5ndGhcIj09ZHx8XCJuYW1lXCI9PWR8fGIuaGFzT3duUHJvcGVydHkmJiFiLmhhc093blByb3BlcnR5KGQpKXx8YS5jYWxsKGMsYltkXSxkKTtlbHNlIGlmKEooYil8fFBhKGIpKWZvcihkPTA7ZDxiLmxlbmd0aDtkKyspYS5jYWxsKGMsYltkXSxkKTtlbHNlIGlmKGIuZm9yRWFjaCYmYi5mb3JFYWNoIT09ciliLmZvckVhY2goYSxjKTtlbHNlIGZvcihkIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShkKSYmYS5jYWxsKGMsYltkXSxkKTtyZXR1cm4gYn1mdW5jdGlvbiBaYihiKXt2YXIgYT1bXSxjO2ZvcihjIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShjKSYmYS5wdXNoKGMpO3JldHVybiBhLnNvcnQoKX1mdW5jdGlvbiBUYyhiLFxuYSxjKXtmb3IodmFyIGQ9WmIoYiksZT0wO2U8ZC5sZW5ndGg7ZSsrKWEuY2FsbChjLGJbZFtlXV0sZFtlXSk7cmV0dXJuIGR9ZnVuY3Rpb24gJGIoYil7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7YihjLGEpfX1mdW5jdGlvbiBoYigpe2Zvcih2YXIgYj1tYS5sZW5ndGgsYTtiOyl7Yi0tO2E9bWFbYl0uY2hhckNvZGVBdCgwKTtpZig1Nz09YSlyZXR1cm4gbWFbYl09XCJBXCIsbWEuam9pbihcIlwiKTtpZig5MD09YSltYVtiXT1cIjBcIjtlbHNlIHJldHVybiBtYVtiXT1TdHJpbmcuZnJvbUNoYXJDb2RlKGErMSksbWEuam9pbihcIlwiKX1tYS51bnNoaWZ0KFwiMFwiKTtyZXR1cm4gbWEuam9pbihcIlwiKX1mdW5jdGlvbiBhYyhiLGEpe2E/Yi4kJGhhc2hLZXk9YTpkZWxldGUgYi4kJGhhc2hLZXl9ZnVuY3Rpb24gRChiKXt2YXIgYT1iLiQkaGFzaEtleTtyKGFyZ3VtZW50cyxmdW5jdGlvbihhKXthIT09YiYmcihhLGZ1bmN0aW9uKGEsYyl7YltjXT1hfSl9KTthYyhiLGEpO3JldHVybiBifWZ1bmN0aW9uIFUoYil7cmV0dXJuIHBhcnNlSW50KGIsXG4xMCl9ZnVuY3Rpb24gYmMoYixhKXtyZXR1cm4gRChuZXcgKEQoZnVuY3Rpb24oKXt9LHtwcm90b3R5cGU6Yn0pKSxhKX1mdW5jdGlvbiBFKCl7fWZ1bmN0aW9uIFFhKGIpe3JldHVybiBifWZ1bmN0aW9uIGJhKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBifX1mdW5jdGlvbiB4KGIpe3JldHVyblwidW5kZWZpbmVkXCI9PT10eXBlb2YgYn1mdW5jdGlvbiB5KGIpe3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2YgYn1mdW5jdGlvbiBUKGIpe3JldHVybiBudWxsIT1iJiZcIm9iamVjdFwiPT09dHlwZW9mIGJ9ZnVuY3Rpb24gdihiKXtyZXR1cm5cInN0cmluZ1wiPT09dHlwZW9mIGJ9ZnVuY3Rpb24gaWIoYil7cmV0dXJuXCJudW1iZXJcIj09PXR5cGVvZiBifWZ1bmN0aW9uIHRhKGIpe3JldHVyblwiW29iamVjdCBEYXRlXVwiPT09emEuY2FsbChiKX1mdW5jdGlvbiBQKGIpe3JldHVyblwiZnVuY3Rpb25cIj09PXR5cGVvZiBifWZ1bmN0aW9uIGpiKGIpe3JldHVyblwiW29iamVjdCBSZWdFeHBdXCI9PT16YS5jYWxsKGIpfVxuZnVuY3Rpb24gR2EoYil7cmV0dXJuIGImJmIuZG9jdW1lbnQmJmIubG9jYXRpb24mJmIuYWxlcnQmJmIuc2V0SW50ZXJ2YWx9ZnVuY3Rpb24gVWMoYil7cmV0dXJuISghYnx8IShiLm5vZGVOYW1lfHxiLnByb3AmJmIuYXR0ciYmYi5maW5kKSl9ZnVuY3Rpb24gVmMoYixhLGMpe3ZhciBkPVtdO3IoYixmdW5jdGlvbihiLGYsZyl7ZC5wdXNoKGEuY2FsbChjLGIsZixnKSl9KTtyZXR1cm4gZH1mdW5jdGlvbiBSYShiLGEpe2lmKGIuaW5kZXhPZilyZXR1cm4gYi5pbmRleE9mKGEpO2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGE9PT1iW2NdKXJldHVybiBjO3JldHVybi0xfWZ1bmN0aW9uIFNhKGIsYSl7dmFyIGM9UmEoYixhKTswPD1jJiZiLnNwbGljZShjLDEpO3JldHVybiBhfWZ1bmN0aW9uIEhhKGIsYSxjLGQpe2lmKEdhKGIpfHxiJiZiLiRldmFsQXN5bmMmJmIuJHdhdGNoKXRocm93IFRhKFwiY3B3c1wiKTtpZihhKXtpZihiPT09YSl0aHJvdyBUYShcImNwaVwiKTtjPWN8fFtdO1xuZD1kfHxbXTtpZihUKGIpKXt2YXIgZT1SYShjLGIpO2lmKC0xIT09ZSlyZXR1cm4gZFtlXTtjLnB1c2goYik7ZC5wdXNoKGEpfWlmKEooYikpZm9yKHZhciBmPWEubGVuZ3RoPTA7ZjxiLmxlbmd0aDtmKyspZT1IYShiW2ZdLG51bGwsYyxkKSxUKGJbZl0pJiYoYy5wdXNoKGJbZl0pLGQucHVzaChlKSksYS5wdXNoKGUpO2Vsc2V7dmFyIGc9YS4kJGhhc2hLZXk7SihhKT9hLmxlbmd0aD0wOnIoYSxmdW5jdGlvbihiLGMpe2RlbGV0ZSBhW2NdfSk7Zm9yKGYgaW4gYillPUhhKGJbZl0sbnVsbCxjLGQpLFQoYltmXSkmJihjLnB1c2goYltmXSksZC5wdXNoKGUpKSxhW2ZdPWU7YWMoYSxnKX19ZWxzZSBpZihhPWIpSihiKT9hPUhhKGIsW10sYyxkKTp0YShiKT9hPW5ldyBEYXRlKGIuZ2V0VGltZSgpKTpqYihiKT8oYT1SZWdFeHAoYi5zb3VyY2UsYi50b1N0cmluZygpLm1hdGNoKC9bXlxcL10qJC8pWzBdKSxhLmxhc3RJbmRleD1iLmxhc3RJbmRleCk6VChiKSYmKGE9SGEoYix7fSxjLGQpKTtcbnJldHVybiBhfWZ1bmN0aW9uIGhhKGIsYSl7aWYoSihiKSl7YT1hfHxbXTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylhW2NdPWJbY119ZWxzZSBpZihUKGIpKWZvcihjIGluIGE9YXx8e30sYikha2IuY2FsbChiLGMpfHxcIiRcIj09PWMuY2hhckF0KDApJiZcIiRcIj09PWMuY2hhckF0KDEpfHwoYVtjXT1iW2NdKTtyZXR1cm4gYXx8Yn1mdW5jdGlvbiBBYShiLGEpe2lmKGI9PT1hKXJldHVybiEwO2lmKG51bGw9PT1ifHxudWxsPT09YSlyZXR1cm4hMTtpZihiIT09YiYmYSE9PWEpcmV0dXJuITA7dmFyIGM9dHlwZW9mIGIsZDtpZihjPT10eXBlb2YgYSYmXCJvYmplY3RcIj09YylpZihKKGIpKXtpZighSihhKSlyZXR1cm4hMTtpZigoYz1iLmxlbmd0aCk9PWEubGVuZ3RoKXtmb3IoZD0wO2Q8YztkKyspaWYoIUFhKGJbZF0sYVtkXSkpcmV0dXJuITE7cmV0dXJuITB9fWVsc2V7aWYodGEoYikpcmV0dXJuIHRhKGEpP2lzTmFOKGIuZ2V0VGltZSgpKSYmaXNOYU4oYS5nZXRUaW1lKCkpfHxiLmdldFRpbWUoKT09PVxuYS5nZXRUaW1lKCk6ITE7aWYoamIoYikmJmpiKGEpKXJldHVybiBiLnRvU3RyaW5nKCk9PWEudG9TdHJpbmcoKTtpZihiJiZiLiRldmFsQXN5bmMmJmIuJHdhdGNofHxhJiZhLiRldmFsQXN5bmMmJmEuJHdhdGNofHxHYShiKXx8R2EoYSl8fEooYSkpcmV0dXJuITE7Yz17fTtmb3IoZCBpbiBiKWlmKFwiJFwiIT09ZC5jaGFyQXQoMCkmJiFQKGJbZF0pKXtpZighQWEoYltkXSxhW2RdKSlyZXR1cm4hMTtjW2RdPSEwfWZvcihkIGluIGEpaWYoIWMuaGFzT3duUHJvcGVydHkoZCkmJlwiJFwiIT09ZC5jaGFyQXQoMCkmJmFbZF0hPT10JiYhUChhW2RdKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBCYihiLGEpe3ZhciBjPTI8YXJndW1lbnRzLmxlbmd0aD9CYS5jYWxsKGFyZ3VtZW50cywyKTpbXTtyZXR1cm4hUChhKXx8YSBpbnN0YW5jZW9mIFJlZ0V4cD9hOmMubGVuZ3RoP2Z1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/YS5hcHBseShiLGMuY29uY2F0KEJhLmNhbGwoYXJndW1lbnRzLFxuMCkpKTphLmFwcGx5KGIsYyl9OmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/YS5hcHBseShiLGFyZ3VtZW50cyk6YS5jYWxsKGIpfX1mdW5jdGlvbiBXYyhiLGEpe3ZhciBjPWE7XCJzdHJpbmdcIj09PXR5cGVvZiBiJiZcIiRcIj09PWIuY2hhckF0KDApP2M9dDpHYShhKT9jPVwiJFdJTkRPV1wiOmEmJlg9PT1hP2M9XCIkRE9DVU1FTlRcIjphJiYoYS4kZXZhbEFzeW5jJiZhLiR3YXRjaCkmJihjPVwiJFNDT1BFXCIpO3JldHVybiBjfWZ1bmN0aW9uIG5hKGIsYSl7cmV0dXJuXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBiP3Q6SlNPTi5zdHJpbmdpZnkoYixXYyxhP1wiICBcIjpudWxsKX1mdW5jdGlvbiBjYyhiKXtyZXR1cm4gdihiKT9KU09OLnBhcnNlKGIpOmJ9ZnVuY3Rpb24gVWEoYil7XCJmdW5jdGlvblwiPT09dHlwZW9mIGI/Yj0hMDpiJiYwIT09Yi5sZW5ndGg/KGI9SyhcIlwiK2IpLGI9IShcImZcIj09Ynx8XCIwXCI9PWJ8fFwiZmFsc2VcIj09Ynx8XCJub1wiPT1ifHxcIm5cIj09Ynx8XCJbXVwiPT1iKSk6Yj0hMTtcbnJldHVybiBifWZ1bmN0aW9uIGlhKGIpe2I9dyhiKS5jbG9uZSgpO3RyeXtiLmVtcHR5KCl9Y2F0Y2goYSl7fXZhciBjPXcoXCI8ZGl2PlwiKS5hcHBlbmQoYikuaHRtbCgpO3RyeXtyZXR1cm4gMz09PWJbMF0ubm9kZVR5cGU/SyhjKTpjLm1hdGNoKC9eKDxbXj5dKz4pLylbMV0ucmVwbGFjZSgvXjwoW1xcd1xcLV0rKS8sZnVuY3Rpb24oYSxiKXtyZXR1cm5cIjxcIitLKGIpfSl9Y2F0Y2goZCl7cmV0dXJuIEsoYyl9fWZ1bmN0aW9uIGRjKGIpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGIpfWNhdGNoKGEpe319ZnVuY3Rpb24gZWMoYil7dmFyIGE9e30sYyxkO3IoKGJ8fFwiXCIpLnNwbGl0KFwiJlwiKSxmdW5jdGlvbihiKXtiJiYoYz1iLnJlcGxhY2UoL1xcKy9nLFwiJTIwXCIpLnNwbGl0KFwiPVwiKSxkPWRjKGNbMF0pLHkoZCkmJihiPXkoY1sxXSk/ZGMoY1sxXSk6ITAsa2IuY2FsbChhLGQpP0ooYVtkXSk/YVtkXS5wdXNoKGIpOmFbZF09W2FbZF0sYl06YVtkXT1iKSl9KTtyZXR1cm4gYX1mdW5jdGlvbiBDYihiKXt2YXIgYT1cbltdO3IoYixmdW5jdGlvbihiLGQpe0ooYik/cihiLGZ1bmN0aW9uKGIpe2EucHVzaChDYShkLCEwKSsoITA9PT1iP1wiXCI6XCI9XCIrQ2EoYiwhMCkpKX0pOmEucHVzaChDYShkLCEwKSsoITA9PT1iP1wiXCI6XCI9XCIrQ2EoYiwhMCkpKX0pO3JldHVybiBhLmxlbmd0aD9hLmpvaW4oXCImXCIpOlwiXCJ9ZnVuY3Rpb24gbGIoYil7cmV0dXJuIENhKGIsITApLnJlcGxhY2UoLyUyNi9naSxcIiZcIikucmVwbGFjZSgvJTNEL2dpLFwiPVwiKS5yZXBsYWNlKC8lMkIvZ2ksXCIrXCIpfWZ1bmN0aW9uIENhKGIsYSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChiKS5yZXBsYWNlKC8lNDAvZ2ksXCJAXCIpLnJlcGxhY2UoLyUzQS9naSxcIjpcIikucmVwbGFjZSgvJTI0L2csXCIkXCIpLnJlcGxhY2UoLyUyQy9naSxcIixcIikucmVwbGFjZSgvJTIwL2csYT9cIiUyMFwiOlwiK1wiKX1mdW5jdGlvbiBYYyhiLGEpe2Z1bmN0aW9uIGMoYSl7YSYmZC5wdXNoKGEpfXZhciBkPVtiXSxlLGYsZz1bXCJuZzphcHBcIixcIm5nLWFwcFwiLFwieC1uZy1hcHBcIixcblwiZGF0YS1uZy1hcHBcIl0saz0vXFxzbmdbOlxcLV1hcHAoOlxccyooW1xcd1xcZF9dKyk7Pyk/XFxzLztyKGcsZnVuY3Rpb24oYSl7Z1thXT0hMDtjKFguZ2V0RWxlbWVudEJ5SWQoYSkpO2E9YS5yZXBsYWNlKFwiOlwiLFwiXFxcXDpcIik7Yi5xdWVyeVNlbGVjdG9yQWxsJiYocihiLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIrYSksYykscihiLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIrYStcIlxcXFw6XCIpLGMpLHIoYi5xdWVyeVNlbGVjdG9yQWxsKFwiW1wiK2ErXCJdXCIpLGMpKX0pO3IoZCxmdW5jdGlvbihhKXtpZighZSl7dmFyIGI9ay5leGVjKFwiIFwiK2EuY2xhc3NOYW1lK1wiIFwiKTtiPyhlPWEsZj0oYlsyXXx8XCJcIikucmVwbGFjZSgvXFxzKy9nLFwiLFwiKSk6cihhLmF0dHJpYnV0ZXMsZnVuY3Rpb24oYil7IWUmJmdbYi5uYW1lXSYmKGU9YSxmPWIudmFsdWUpfSl9fSk7ZSYmYShlLGY/W2ZdOltdKX1mdW5jdGlvbiBmYyhiLGEpe3ZhciBjPWZ1bmN0aW9uKCl7Yj13KGIpO2lmKGIuaW5qZWN0b3IoKSl7dmFyIGM9YlswXT09PVg/XG5cImRvY3VtZW50XCI6aWEoYik7dGhyb3cgVGEoXCJidHN0cnBkXCIsYy5yZXBsYWNlKC88LyxcIiZsdDtcIikucmVwbGFjZSgvPi8sXCImZ3Q7XCIpKTt9YT1hfHxbXTthLnVuc2hpZnQoW1wiJHByb3ZpZGVcIixmdW5jdGlvbihhKXthLnZhbHVlKFwiJHJvb3RFbGVtZW50XCIsYil9XSk7YS51bnNoaWZ0KFwibmdcIik7Yz1nYyhhKTtjLmludm9rZShbXCIkcm9vdFNjb3BlXCIsXCIkcm9vdEVsZW1lbnRcIixcIiRjb21waWxlXCIsXCIkaW5qZWN0b3JcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxiLGMsZCxlKXthLiRhcHBseShmdW5jdGlvbigpe2IuZGF0YShcIiRpbmplY3RvclwiLGQpO2MoYikoYSl9KX1dKTtyZXR1cm4gY30sZD0vXk5HX0RFRkVSX0JPT1RTVFJBUCEvO2lmKFcmJiFkLnRlc3QoVy5uYW1lKSlyZXR1cm4gYygpO1cubmFtZT1XLm5hbWUucmVwbGFjZShkLFwiXCIpO1ZhLnJlc3VtZUJvb3RzdHJhcD1mdW5jdGlvbihiKXtyKGIsZnVuY3Rpb24oYil7YS5wdXNoKGIpfSk7YygpfX1mdW5jdGlvbiBtYihiLGEpe2E9XG5hfHxcIl9cIjtyZXR1cm4gYi5yZXBsYWNlKFljLGZ1bmN0aW9uKGIsZCl7cmV0dXJuKGQ/YTpcIlwiKStiLnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBEYihiLGEsYyl7aWYoIWIpdGhyb3cgVGEoXCJhcmVxXCIsYXx8XCI/XCIsY3x8XCJyZXF1aXJlZFwiKTtyZXR1cm4gYn1mdW5jdGlvbiBXYShiLGEsYyl7YyYmSihiKSYmKGI9YltiLmxlbmd0aC0xXSk7RGIoUChiKSxhLFwibm90IGEgZnVuY3Rpb24sIGdvdCBcIisoYiYmXCJvYmplY3RcIj09PXR5cGVvZiBiP2IuY29uc3RydWN0b3IubmFtZXx8XCJPYmplY3RcIjp0eXBlb2YgYikpO3JldHVybiBifWZ1bmN0aW9uIERhKGIsYSl7aWYoXCJoYXNPd25Qcm9wZXJ0eVwiPT09Yil0aHJvdyBUYShcImJhZG5hbWVcIixhKTt9ZnVuY3Rpb24gaGMoYixhLGMpe2lmKCFhKXJldHVybiBiO2E9YS5zcGxpdChcIi5cIik7Zm9yKHZhciBkLGU9YixmPWEubGVuZ3RoLGc9MDtnPGY7ZysrKWQ9YVtnXSxiJiYoYj0oZT1iKVtkXSk7cmV0dXJuIWMmJlAoYik/QmIoZSxiKTpifWZ1bmN0aW9uIEViKGIpe3ZhciBhPVxuYlswXTtiPWJbYi5sZW5ndGgtMV07aWYoYT09PWIpcmV0dXJuIHcoYSk7dmFyIGM9W2FdO2Rve2E9YS5uZXh0U2libGluZztpZighYSlicmVhaztjLnB1c2goYSl9d2hpbGUoYSE9PWIpO3JldHVybiB3KGMpfWZ1bmN0aW9uIFpjKGIpe3ZhciBhPUMoXCIkaW5qZWN0b3JcIiksYz1DKFwibmdcIik7Yj1iLmFuZ3VsYXJ8fChiLmFuZ3VsYXI9e30pO2IuJCRtaW5FcnI9Yi4kJG1pbkVycnx8QztyZXR1cm4gYi5tb2R1bGV8fChiLm1vZHVsZT1mdW5jdGlvbigpe3ZhciBiPXt9O3JldHVybiBmdW5jdGlvbihlLGYsZyl7aWYoXCJoYXNPd25Qcm9wZXJ0eVwiPT09ZSl0aHJvdyBjKFwiYmFkbmFtZVwiLFwibW9kdWxlXCIpO2YmJmIuaGFzT3duUHJvcGVydHkoZSkmJihiW2VdPW51bGwpO3JldHVybiBiW2VdfHwoYltlXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGIoYSxkLGUpe3JldHVybiBmdW5jdGlvbigpe2NbZXx8XCJwdXNoXCJdKFthLGQsYXJndW1lbnRzXSk7cmV0dXJuIG59fWlmKCFmKXRocm93IGEoXCJub21vZFwiLFxuZSk7dmFyIGM9W10sZD1bXSxsPWIoXCIkaW5qZWN0b3JcIixcImludm9rZVwiKSxuPXtfaW52b2tlUXVldWU6YyxfcnVuQmxvY2tzOmQscmVxdWlyZXM6ZixuYW1lOmUscHJvdmlkZXI6YihcIiRwcm92aWRlXCIsXCJwcm92aWRlclwiKSxmYWN0b3J5OmIoXCIkcHJvdmlkZVwiLFwiZmFjdG9yeVwiKSxzZXJ2aWNlOmIoXCIkcHJvdmlkZVwiLFwic2VydmljZVwiKSx2YWx1ZTpiKFwiJHByb3ZpZGVcIixcInZhbHVlXCIpLGNvbnN0YW50OmIoXCIkcHJvdmlkZVwiLFwiY29uc3RhbnRcIixcInVuc2hpZnRcIiksYW5pbWF0aW9uOmIoXCIkYW5pbWF0ZVByb3ZpZGVyXCIsXCJyZWdpc3RlclwiKSxmaWx0ZXI6YihcIiRmaWx0ZXJQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksY29udHJvbGxlcjpiKFwiJGNvbnRyb2xsZXJQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksZGlyZWN0aXZlOmIoXCIkY29tcGlsZVByb3ZpZGVyXCIsXCJkaXJlY3RpdmVcIiksY29uZmlnOmwscnVuOmZ1bmN0aW9uKGEpe2QucHVzaChhKTtyZXR1cm4gdGhpc319O2cmJmwoZyk7cmV0dXJuIG59KCkpfX0oKSl9XG5mdW5jdGlvbiAkYyhiKXtEKGIse2Jvb3RzdHJhcDpmYyxjb3B5OkhhLGV4dGVuZDpELGVxdWFsczpBYSxlbGVtZW50OncsZm9yRWFjaDpyLGluamVjdG9yOmdjLG5vb3A6RSxiaW5kOkJiLHRvSnNvbjpuYSxmcm9tSnNvbjpjYyxpZGVudGl0eTpRYSxpc1VuZGVmaW5lZDp4LGlzRGVmaW5lZDp5LGlzU3RyaW5nOnYsaXNGdW5jdGlvbjpQLGlzT2JqZWN0OlQsaXNOdW1iZXI6aWIsaXNFbGVtZW50OlVjLGlzQXJyYXk6Six2ZXJzaW9uOmFkLGlzRGF0ZTp0YSxsb3dlcmNhc2U6Syx1cHBlcmNhc2U6SWEsY2FsbGJhY2tzOntjb3VudGVyOjB9LCQkbWluRXJyOkMsJCRjc3A6WGF9KTtZYT1aYyhXKTt0cnl7WWEoXCJuZ0xvY2FsZVwiKX1jYXRjaChhKXtZYShcIm5nTG9jYWxlXCIsW10pLnByb3ZpZGVyKFwiJGxvY2FsZVwiLGJkKX1ZYShcIm5nXCIsW1wibmdMb2NhbGVcIl0sW1wiJHByb3ZpZGVcIixmdW5jdGlvbihhKXthLnByb3ZpZGVyKHskJHNhbml0aXplVXJpOmNkfSk7YS5wcm92aWRlcihcIiRjb21waWxlXCIsXG5pYykuZGlyZWN0aXZlKHthOmRkLGlucHV0OmpjLHRleHRhcmVhOmpjLGZvcm06ZWQsc2NyaXB0OmZkLHNlbGVjdDpnZCxzdHlsZTpoZCxvcHRpb246aWQsbmdCaW5kOmpkLG5nQmluZEh0bWw6a2QsbmdCaW5kVGVtcGxhdGU6bGQsbmdDbGFzczptZCxuZ0NsYXNzRXZlbjpuZCxuZ0NsYXNzT2RkOm9kLG5nQ2xvYWs6cGQsbmdDb250cm9sbGVyOnFkLG5nRm9ybTpyZCxuZ0hpZGU6c2QsbmdJZjp0ZCxuZ0luY2x1ZGU6dWQsbmdJbml0OnZkLG5nTm9uQmluZGFibGU6d2QsbmdQbHVyYWxpemU6eGQsbmdSZXBlYXQ6eWQsbmdTaG93OnpkLG5nU3R5bGU6QWQsbmdTd2l0Y2g6QmQsbmdTd2l0Y2hXaGVuOkNkLG5nU3dpdGNoRGVmYXVsdDpEZCxuZ09wdGlvbnM6RWQsbmdUcmFuc2NsdWRlOkZkLG5nTW9kZWw6R2QsbmdMaXN0OkhkLG5nQ2hhbmdlOklkLHJlcXVpcmVkOmtjLG5nUmVxdWlyZWQ6a2MsbmdWYWx1ZTpKZH0pLmRpcmVjdGl2ZSh7bmdJbmNsdWRlOktkfSkuZGlyZWN0aXZlKEZiKS5kaXJlY3RpdmUobGMpO1xuYS5wcm92aWRlcih7JGFuY2hvclNjcm9sbDpMZCwkYW5pbWF0ZTpNZCwkYnJvd3NlcjpOZCwkY2FjaGVGYWN0b3J5Ok9kLCRjb250cm9sbGVyOlBkLCRkb2N1bWVudDpRZCwkZXhjZXB0aW9uSGFuZGxlcjpSZCwkZmlsdGVyOm1jLCRpbnRlcnBvbGF0ZTpTZCwkaW50ZXJ2YWw6VGQsJGh0dHA6VWQsJGh0dHBCYWNrZW5kOlZkLCRsb2NhdGlvbjpXZCwkbG9nOlhkLCRwYXJzZTpZZCwkcm9vdFNjb3BlOlpkLCRxOiRkLCRzY2U6YWUsJHNjZURlbGVnYXRlOmJlLCRzbmlmZmVyOmNlLCR0ZW1wbGF0ZUNhY2hlOmRlLCR0aW1lb3V0OmVlLCR3aW5kb3c6ZmUsJCRyQUY6Z2UsJCRhc3luY0NhbGxiYWNrOmhlfSl9XSl9ZnVuY3Rpb24gWmEoYil7cmV0dXJuIGIucmVwbGFjZShpZSxmdW5jdGlvbihhLGIsZCxlKXtyZXR1cm4gZT9kLnRvVXBwZXJDYXNlKCk6ZH0pLnJlcGxhY2UoamUsXCJNb3okMVwiKX1mdW5jdGlvbiBHYihiLGEsYyxkKXtmdW5jdGlvbiBlKGIpe3ZhciBlPWMmJmI/W3RoaXMuZmlsdGVyKGIpXTpcblt0aGlzXSxtPWEsaCxsLG4scCxxLHM7aWYoIWR8fG51bGwhPWIpZm9yKDtlLmxlbmd0aDspZm9yKGg9ZS5zaGlmdCgpLGw9MCxuPWgubGVuZ3RoO2w8bjtsKyspZm9yKHA9dyhoW2xdKSxtP3AudHJpZ2dlckhhbmRsZXIoXCIkZGVzdHJveVwiKTptPSFtLHE9MCxwPShzPXAuY2hpbGRyZW4oKSkubGVuZ3RoO3E8cDtxKyspZS5wdXNoKEVhKHNbcV0pKTtyZXR1cm4gZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dmFyIGY9RWEuZm5bYl0sZj1mLiRvcmlnaW5hbHx8ZjtlLiRvcmlnaW5hbD1mO0VhLmZuW2JdPWV9ZnVuY3Rpb24gUyhiKXtpZihiIGluc3RhbmNlb2YgUylyZXR1cm4gYjt2KGIpJiYoYj1hYShiKSk7aWYoISh0aGlzIGluc3RhbmNlb2YgUykpe2lmKHYoYikmJlwiPFwiIT1iLmNoYXJBdCgwKSl0aHJvdyBIYihcIm5vc2VsXCIpO3JldHVybiBuZXcgUyhiKX1pZih2KGIpKXt2YXIgYT1iO2I9WDt2YXIgYztpZihjPWtlLmV4ZWMoYSkpYj1bYi5jcmVhdGVFbGVtZW50KGNbMV0pXTtlbHNle3ZhciBkPVxuYixlO2I9ZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Yz1bXTtpZihJYi50ZXN0KGEpKXtkPWIuYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtlPShsZS5leGVjKGEpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKTtlPWVhW2VdfHxlYS5fZGVmYXVsdDtkLmlubmVySFRNTD1cIjxkaXY+JiMxNjA7PC9kaXY+XCIrZVsxXSthLnJlcGxhY2UobWUsXCI8JDE+PC8kMj5cIikrZVsyXTtkLnJlbW92ZUNoaWxkKGQuZmlyc3RDaGlsZCk7Zm9yKGE9ZVswXTthLS07KWQ9ZC5sYXN0Q2hpbGQ7YT0wO2ZvcihlPWQuY2hpbGROb2Rlcy5sZW5ndGg7YTxlOysrYSljLnB1c2goZC5jaGlsZE5vZGVzW2FdKTtkPWIuZmlyc3RDaGlsZDtkLnRleHRDb250ZW50PVwiXCJ9ZWxzZSBjLnB1c2goZC5jcmVhdGVUZXh0Tm9kZShhKSk7Yi50ZXh0Q29udGVudD1cIlwiO2IuaW5uZXJIVE1MPVwiXCI7Yj1jfUpiKHRoaXMsYik7dyhYLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSkuYXBwZW5kKHRoaXMpfWVsc2UgSmIodGhpcyxcbmIpfWZ1bmN0aW9uIEtiKGIpe3JldHVybiBiLmNsb25lTm9kZSghMCl9ZnVuY3Rpb24gSmEoYil7TGIoYik7dmFyIGE9MDtmb3IoYj1iLmNoaWxkTm9kZXN8fFtdO2E8Yi5sZW5ndGg7YSsrKUphKGJbYV0pfWZ1bmN0aW9uIG5jKGIsYSxjLGQpe2lmKHkoZCkpdGhyb3cgSGIoXCJvZmZhcmdzXCIpO3ZhciBlPW9hKGIsXCJldmVudHNcIik7b2EoYixcImhhbmRsZVwiKSYmKHgoYSk/cihlLGZ1bmN0aW9uKGEsYyl7JGEoYixjLGEpO2RlbGV0ZSBlW2NdfSk6cihhLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhKXt4KGMpPygkYShiLGEsZVthXSksZGVsZXRlIGVbYV0pOlNhKGVbYV18fFtdLGMpfSkpfWZ1bmN0aW9uIExiKGIsYSl7dmFyIGM9Yi5uZzMzOSxkPWFiW2NdO2QmJihhP2RlbGV0ZSBhYltjXS5kYXRhW2FdOihkLmhhbmRsZSYmKGQuZXZlbnRzLiRkZXN0cm95JiZkLmhhbmRsZSh7fSxcIiRkZXN0cm95XCIpLG5jKGIpKSxkZWxldGUgYWJbY10sYi5uZzMzOT10KSl9ZnVuY3Rpb24gb2EoYixhLGMpe3ZhciBkPVxuYi5uZzMzOSxkPWFiW2R8fC0xXTtpZih5KGMpKWR8fChiLm5nMzM5PWQ9KytuZSxkPWFiW2RdPXt9KSxkW2FdPWM7ZWxzZSByZXR1cm4gZCYmZFthXX1mdW5jdGlvbiBNYihiLGEsYyl7dmFyIGQ9b2EoYixcImRhdGFcIiksZT15KGMpLGY9IWUmJnkoYSksZz1mJiYhVChhKTtkfHxnfHxvYShiLFwiZGF0YVwiLGQ9e30pO2lmKGUpZFthXT1jO2Vsc2UgaWYoZil7aWYoZylyZXR1cm4gZCYmZFthXTtEKGQsYSl9ZWxzZSByZXR1cm4gZH1mdW5jdGlvbiBOYihiLGEpe3JldHVybiBiLmdldEF0dHJpYnV0ZT8tMTwoXCIgXCIrKGIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKS5pbmRleE9mKFwiIFwiK2ErXCIgXCIpOiExfWZ1bmN0aW9uIG5iKGIsYSl7YSYmYi5zZXRBdHRyaWJ1dGUmJnIoYS5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7Yi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGFhKChcIiBcIisoYi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIikrXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csXG5cIiBcIikucmVwbGFjZShcIiBcIithYShhKStcIiBcIixcIiBcIikpKX0pfWZ1bmN0aW9uIG9iKGIsYSl7aWYoYSYmYi5zZXRBdHRyaWJ1dGUpe3ZhciBjPShcIiBcIisoYi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIikrXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csXCIgXCIpO3IoYS5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7YT1hYShhKTstMT09PWMuaW5kZXhPZihcIiBcIithK1wiIFwiKSYmKGMrPWErXCIgXCIpfSk7Yi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGFhKGMpKX19ZnVuY3Rpb24gSmIoYixhKXtpZihhKXthPWEubm9kZU5hbWV8fCF5KGEubGVuZ3RoKXx8R2EoYSk/W2FdOmE7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspYi5wdXNoKGFbY10pfX1mdW5jdGlvbiBvYyhiLGEpe3JldHVybiBwYihiLFwiJFwiKyhhfHxcIm5nQ29udHJvbGxlclwiKStcIkNvbnRyb2xsZXJcIil9ZnVuY3Rpb24gcGIoYixhLGMpezk9PWIubm9kZVR5cGUmJihiPWIuZG9jdW1lbnRFbGVtZW50KTtmb3IoYT1KKGEpP2E6W2FdO2I7KXtmb3IodmFyIGQ9XG4wLGU9YS5sZW5ndGg7ZDxlO2QrKylpZigoYz13LmRhdGEoYixhW2RdKSkhPT10KXJldHVybiBjO2I9Yi5wYXJlbnROb2RlfHwxMT09PWIubm9kZVR5cGUmJmIuaG9zdH19ZnVuY3Rpb24gcGMoYil7Zm9yKHZhciBhPTAsYz1iLmNoaWxkTm9kZXM7YTxjLmxlbmd0aDthKyspSmEoY1thXSk7Zm9yKDtiLmZpcnN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5maXJzdENoaWxkKX1mdW5jdGlvbiBxYyhiLGEpe3ZhciBjPXFiW2EudG9Mb3dlckNhc2UoKV07cmV0dXJuIGMmJnJjW2Iubm9kZU5hbWVdJiZjfWZ1bmN0aW9uIG9lKGIsYSl7dmFyIGM9ZnVuY3Rpb24oYyxlKXtjLnByZXZlbnREZWZhdWx0fHwoYy5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2MucmV0dXJuVmFsdWU9ITF9KTtjLnN0b3BQcm9wYWdhdGlvbnx8KGMuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7Yy5jYW5jZWxCdWJibGU9ITB9KTtjLnRhcmdldHx8KGMudGFyZ2V0PWMuc3JjRWxlbWVudHx8WCk7aWYoeChjLmRlZmF1bHRQcmV2ZW50ZWQpKXt2YXIgZj1cbmMucHJldmVudERlZmF1bHQ7Yy5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2MuZGVmYXVsdFByZXZlbnRlZD0hMDtmLmNhbGwoYyl9O2MuZGVmYXVsdFByZXZlbnRlZD0hMX1jLmlzRGVmYXVsdFByZXZlbnRlZD1mdW5jdGlvbigpe3JldHVybiBjLmRlZmF1bHRQcmV2ZW50ZWR8fCExPT09Yy5yZXR1cm5WYWx1ZX07dmFyIGc9aGEoYVtlfHxjLnR5cGVdfHxbXSk7cihnLGZ1bmN0aW9uKGEpe2EuY2FsbChiLGMpfSk7OD49UT8oYy5wcmV2ZW50RGVmYXVsdD1udWxsLGMuc3RvcFByb3BhZ2F0aW9uPW51bGwsYy5pc0RlZmF1bHRQcmV2ZW50ZWQ9bnVsbCk6KGRlbGV0ZSBjLnByZXZlbnREZWZhdWx0LGRlbGV0ZSBjLnN0b3BQcm9wYWdhdGlvbixkZWxldGUgYy5pc0RlZmF1bHRQcmV2ZW50ZWQpfTtjLmVsZW09YjtyZXR1cm4gY31mdW5jdGlvbiBLYShiLGEpe3ZhciBjPXR5cGVvZiBiLGQ7XCJmdW5jdGlvblwiPT1jfHxcIm9iamVjdFwiPT1jJiZudWxsIT09Yj9cImZ1bmN0aW9uXCI9PXR5cGVvZihkPVxuYi4kJGhhc2hLZXkpP2Q9Yi4kJGhhc2hLZXkoKTpkPT09dCYmKGQ9Yi4kJGhhc2hLZXk9KGF8fGhiKSgpKTpkPWI7cmV0dXJuIGMrXCI6XCIrZH1mdW5jdGlvbiBiYihiLGEpe2lmKGEpe3ZhciBjPTA7dGhpcy5uZXh0VWlkPWZ1bmN0aW9uKCl7cmV0dXJuKytjfX1yKGIsdGhpcy5wdXQsdGhpcyl9ZnVuY3Rpb24gc2MoYil7dmFyIGEsYztcImZ1bmN0aW9uXCI9PT10eXBlb2YgYj8oYT1iLiRpbmplY3QpfHwoYT1bXSxiLmxlbmd0aCYmKGM9Yi50b1N0cmluZygpLnJlcGxhY2UocGUsXCJcIiksYz1jLm1hdGNoKHFlKSxyKGNbMV0uc3BsaXQocmUpLGZ1bmN0aW9uKGIpe2IucmVwbGFjZShzZSxmdW5jdGlvbihiLGMsZCl7YS5wdXNoKGQpfSl9KSksYi4kaW5qZWN0PWEpOkooYik/KGM9Yi5sZW5ndGgtMSxXYShiW2NdLFwiZm5cIiksYT1iLnNsaWNlKDAsYykpOldhKGIsXCJmblwiLCEwKTtyZXR1cm4gYX1mdW5jdGlvbiBnYyhiKXtmdW5jdGlvbiBhKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2lmKFQoYikpcihiLFxuJGIoYSkpO2Vsc2UgcmV0dXJuIGEoYixjKX19ZnVuY3Rpb24gYyhhLGIpe0RhKGEsXCJzZXJ2aWNlXCIpO2lmKFAoYil8fEooYikpYj1uLmluc3RhbnRpYXRlKGIpO2lmKCFiLiRnZXQpdGhyb3cgY2IoXCJwZ2V0XCIsYSk7cmV0dXJuIGxbYStrXT1ifWZ1bmN0aW9uIGQoYSxiKXtyZXR1cm4gYyhhLHskZ2V0OmJ9KX1mdW5jdGlvbiBlKGEpe3ZhciBiPVtdLGMsZCxmLGs7cihhLGZ1bmN0aW9uKGEpe2lmKCFoLmdldChhKSl7aC5wdXQoYSwhMCk7dHJ5e2lmKHYoYSkpZm9yKGM9WWEoYSksYj1iLmNvbmNhdChlKGMucmVxdWlyZXMpKS5jb25jYXQoYy5fcnVuQmxvY2tzKSxkPWMuX2ludm9rZVF1ZXVlLGY9MCxrPWQubGVuZ3RoO2Y8aztmKyspe3ZhciBnPWRbZl0sbT1uLmdldChnWzBdKTttW2dbMV1dLmFwcGx5KG0sZ1syXSl9ZWxzZSBQKGEpP2IucHVzaChuLmludm9rZShhKSk6SihhKT9iLnB1c2gobi5pbnZva2UoYSkpOldhKGEsXCJtb2R1bGVcIil9Y2F0Y2gobCl7dGhyb3cgSihhKSYmKGE9XG5hW2EubGVuZ3RoLTFdKSxsLm1lc3NhZ2UmJihsLnN0YWNrJiYtMT09bC5zdGFjay5pbmRleE9mKGwubWVzc2FnZSkpJiYobD1sLm1lc3NhZ2UrXCJcXG5cIitsLnN0YWNrKSxjYihcIm1vZHVsZXJyXCIsYSxsLnN0YWNrfHxsLm1lc3NhZ2V8fGwpO319fSk7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhLGIpe2Z1bmN0aW9uIGMoZCl7aWYoYS5oYXNPd25Qcm9wZXJ0eShkKSl7aWYoYVtkXT09PWcpdGhyb3cgY2IoXCJjZGVwXCIsZCtcIiA8LSBcIittLmpvaW4oXCIgPC0gXCIpKTtyZXR1cm4gYVtkXX10cnl7cmV0dXJuIG0udW5zaGlmdChkKSxhW2RdPWcsYVtkXT1iKGQpfWNhdGNoKGUpe3Rocm93IGFbZF09PT1nJiZkZWxldGUgYVtkXSxlO31maW5hbGx5e20uc2hpZnQoKX19ZnVuY3Rpb24gZChhLGIsZSl7dmFyIGY9W10saz1zYyhhKSxnLG0saDttPTA7Zm9yKGc9ay5sZW5ndGg7bTxnO20rKyl7aD1rW21dO2lmKFwic3RyaW5nXCIhPT10eXBlb2YgaCl0aHJvdyBjYihcIml0a25cIixoKTtmLnB1c2goZSYmZS5oYXNPd25Qcm9wZXJ0eShoKT9cbmVbaF06YyhoKSl9SihhKSYmKGE9YVtnXSk7cmV0dXJuIGEuYXBwbHkoYixmKX1yZXR1cm57aW52b2tlOmQsaW5zdGFudGlhdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbigpe30sZTtjLnByb3RvdHlwZT0oSihhKT9hW2EubGVuZ3RoLTFdOmEpLnByb3RvdHlwZTtjPW5ldyBjO2U9ZChhLGMsYik7cmV0dXJuIFQoZSl8fFAoZSk/ZTpjfSxnZXQ6Yyxhbm5vdGF0ZTpzYyxoYXM6ZnVuY3Rpb24oYil7cmV0dXJuIGwuaGFzT3duUHJvcGVydHkoYitrKXx8YS5oYXNPd25Qcm9wZXJ0eShiKX19fXZhciBnPXt9LGs9XCJQcm92aWRlclwiLG09W10saD1uZXcgYmIoW10sITApLGw9eyRwcm92aWRlOntwcm92aWRlcjphKGMpLGZhY3Rvcnk6YShkKSxzZXJ2aWNlOmEoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZChhLFtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLmluc3RhbnRpYXRlKGIpfV0pfSksdmFsdWU6YShmdW5jdGlvbihhLGIpe3JldHVybiBkKGEsYmEoYikpfSksY29uc3RhbnQ6YShmdW5jdGlvbihhLFxuYil7RGEoYSxcImNvbnN0YW50XCIpO2xbYV09YjtwW2FdPWJ9KSxkZWNvcmF0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uLmdldChhK2spLGQ9Yy4kZ2V0O2MuJGdldD1mdW5jdGlvbigpe3ZhciBhPXEuaW52b2tlKGQsYyk7cmV0dXJuIHEuaW52b2tlKGIsbnVsbCx7JGRlbGVnYXRlOmF9KX19fX0sbj1sLiRpbmplY3Rvcj1mKGwsZnVuY3Rpb24oKXt0aHJvdyBjYihcInVucHJcIixtLmpvaW4oXCIgPC0gXCIpKTt9KSxwPXt9LHE9cC4kaW5qZWN0b3I9ZihwLGZ1bmN0aW9uKGEpe2E9bi5nZXQoYStrKTtyZXR1cm4gcS5pbnZva2UoYS4kZ2V0LGEpfSk7cihlKGIpLGZ1bmN0aW9uKGEpe3EuaW52b2tlKGF8fEUpfSk7cmV0dXJuIHF9ZnVuY3Rpb24gTGQoKXt2YXIgYj0hMDt0aGlzLmRpc2FibGVBdXRvU2Nyb2xsaW5nPWZ1bmN0aW9uKCl7Yj0hMX07dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiRsb2NhdGlvblwiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGEsYyxkKXtmdW5jdGlvbiBlKGEpe3ZhciBiPW51bGw7XG5yKGEsZnVuY3Rpb24oYSl7Ynx8XCJhXCIhPT1LKGEubm9kZU5hbWUpfHwoYj1hKX0pO3JldHVybiBifWZ1bmN0aW9uIGYoKXt2YXIgYj1jLmhhc2goKSxkO2I/KGQ9Zy5nZXRFbGVtZW50QnlJZChiKSk/ZC5zY3JvbGxJbnRvVmlldygpOihkPWUoZy5nZXRFbGVtZW50c0J5TmFtZShiKSkpP2Quc2Nyb2xsSW50b1ZpZXcoKTpcInRvcFwiPT09YiYmYS5zY3JvbGxUbygwLDApOmEuc2Nyb2xsVG8oMCwwKX12YXIgZz1hLmRvY3VtZW50O2ImJmQuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGMuaGFzaCgpfSxmdW5jdGlvbigpe2QuJGV2YWxBc3luYyhmKX0pO3JldHVybiBmfV19ZnVuY3Rpb24gaGUoKXt0aGlzLiRnZXQ9W1wiJCRyQUZcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYixhKXtyZXR1cm4gYi5zdXBwb3J0ZWQ/ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl9OmZ1bmN0aW9uKGIpe3JldHVybiBhKGIsMCwhMSl9fV19ZnVuY3Rpb24gdGUoYixhLGMsZCl7ZnVuY3Rpb24gZShhKXt0cnl7YS5hcHBseShudWxsLFxuQmEuY2FsbChhcmd1bWVudHMsMSkpfWZpbmFsbHl7aWYocy0tLDA9PT1zKWZvcig7Ri5sZW5ndGg7KXRyeXtGLnBvcCgpKCl9Y2F0Y2goYil7Yy5lcnJvcihiKX19fWZ1bmN0aW9uIGYoYSxiKXsoZnVuY3Rpb24gZmEoKXtyKHUsZnVuY3Rpb24oYSl7YSgpfSk7QT1iKGZhLGEpfSkoKX1mdW5jdGlvbiBnKCl7ej1udWxsO04hPWsudXJsKCkmJihOPWsudXJsKCkscihjYSxmdW5jdGlvbihhKXthKGsudXJsKCkpfSkpfXZhciBrPXRoaXMsbT1hWzBdLGg9Yi5sb2NhdGlvbixsPWIuaGlzdG9yeSxuPWIuc2V0VGltZW91dCxwPWIuY2xlYXJUaW1lb3V0LHE9e307ay5pc01vY2s9ITE7dmFyIHM9MCxGPVtdO2suJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdD1lO2suJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudD1mdW5jdGlvbigpe3MrK307ay5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzPWZ1bmN0aW9uKGEpe3IodSxmdW5jdGlvbihhKXthKCl9KTswPT09cz9hKCk6Ri5wdXNoKGEpfTtcbnZhciB1PVtdLEE7ay5hZGRQb2xsRm49ZnVuY3Rpb24oYSl7eChBKSYmZigxMDAsbik7dS5wdXNoKGEpO3JldHVybiBhfTt2YXIgTj1oLmhyZWYsUj1hLmZpbmQoXCJiYXNlXCIpLHo9bnVsbDtrLnVybD1mdW5jdGlvbihhLGMpe2ghPT1iLmxvY2F0aW9uJiYoaD1iLmxvY2F0aW9uKTtsIT09Yi5oaXN0b3J5JiYobD1iLmhpc3RvcnkpO2lmKGEpe2lmKE4hPWEpcmV0dXJuIE49YSxkLmhpc3Rvcnk/Yz9sLnJlcGxhY2VTdGF0ZShudWxsLFwiXCIsYSk6KGwucHVzaFN0YXRlKG51bGwsXCJcIixhKSxSLmF0dHIoXCJocmVmXCIsUi5hdHRyKFwiaHJlZlwiKSkpOih6PWEsYz9oLnJlcGxhY2UoYSk6aC5ocmVmPWEpLGt9ZWxzZSByZXR1cm4genx8aC5ocmVmLnJlcGxhY2UoLyUyNy9nLFwiJ1wiKX07dmFyIGNhPVtdLEw9ITE7ay5vblVybENoYW5nZT1mdW5jdGlvbihhKXtpZighTCl7aWYoZC5oaXN0b3J5KXcoYikub24oXCJwb3BzdGF0ZVwiLGcpO2lmKGQuaGFzaGNoYW5nZSl3KGIpLm9uKFwiaGFzaGNoYW5nZVwiLGcpO1xuZWxzZSBrLmFkZFBvbGxGbihnKTtMPSEwfWNhLnB1c2goYSk7cmV0dXJuIGF9O2suJCRjaGVja1VybENoYW5nZT1nO2suYmFzZUhyZWY9ZnVuY3Rpb24oKXt2YXIgYT1SLmF0dHIoXCJocmVmXCIpO3JldHVybiBhP2EucmVwbGFjZSgvXihodHRwcz9cXDopP1xcL1xcL1teXFwvXSovLFwiXCIpOlwiXCJ9O3ZhciBPPXt9LGRhPVwiXCIsQj1rLmJhc2VIcmVmKCk7ay5jb29raWVzPWZ1bmN0aW9uKGEsYil7dmFyIGQsZSxmLGs7aWYoYSliPT09dD9tLmNvb2tpZT1lc2NhcGUoYSkrXCI9O3BhdGg9XCIrQitcIjtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UXCI6dihiKSYmKGQ9KG0uY29va2llPWVzY2FwZShhKStcIj1cIitlc2NhcGUoYikrXCI7cGF0aD1cIitCKS5sZW5ndGgrMSw0MDk2PGQmJmMud2FybihcIkNvb2tpZSAnXCIrYStcIicgcG9zc2libHkgbm90IHNldCBvciBvdmVyZmxvd2VkIGJlY2F1c2UgaXQgd2FzIHRvbyBsYXJnZSAoXCIrZCtcIiA+IDQwOTYgYnl0ZXMpIVwiKSk7ZWxzZXtpZihtLmNvb2tpZSE9PVxuZGEpZm9yKGRhPW0uY29va2llLGQ9ZGEuc3BsaXQoXCI7IFwiKSxPPXt9LGY9MDtmPGQubGVuZ3RoO2YrKyllPWRbZl0saz1lLmluZGV4T2YoXCI9XCIpLDA8ayYmKGE9dW5lc2NhcGUoZS5zdWJzdHJpbmcoMCxrKSksT1thXT09PXQmJihPW2FdPXVuZXNjYXBlKGUuc3Vic3RyaW5nKGsrMSkpKSk7cmV0dXJuIE99fTtrLmRlZmVyPWZ1bmN0aW9uKGEsYil7dmFyIGM7cysrO2M9bihmdW5jdGlvbigpe2RlbGV0ZSBxW2NdO2UoYSl9LGJ8fDApO3FbY109ITA7cmV0dXJuIGN9O2suZGVmZXIuY2FuY2VsPWZ1bmN0aW9uKGEpe3JldHVybiBxW2FdPyhkZWxldGUgcVthXSxwKGEpLGUoRSksITApOiExfX1mdW5jdGlvbiBOZCgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkbG9nXCIsXCIkc25pZmZlclwiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYixhLGMsZCl7cmV0dXJuIG5ldyB0ZShiLGQsYSxjKX1dfWZ1bmN0aW9uIE9kKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYihiLGQpe2Z1bmN0aW9uIGUoYSl7YSE9XG5uJiYocD9wPT1hJiYocD1hLm4pOnA9YSxmKGEubixhLnApLGYoYSxuKSxuPWEsbi5uPW51bGwpfWZ1bmN0aW9uIGYoYSxiKXthIT1iJiYoYSYmKGEucD1iKSxiJiYoYi5uPWEpKX1pZihiIGluIGEpdGhyb3cgQyhcIiRjYWNoZUZhY3RvcnlcIikoXCJpaWRcIixiKTt2YXIgZz0wLGs9RCh7fSxkLHtpZDpifSksbT17fSxoPWQmJmQuY2FwYWNpdHl8fE51bWJlci5NQVhfVkFMVUUsbD17fSxuPW51bGwscD1udWxsO3JldHVybiBhW2JdPXtwdXQ6ZnVuY3Rpb24oYSxiKXtpZihoPE51bWJlci5NQVhfVkFMVUUpe3ZhciBjPWxbYV18fChsW2FdPXtrZXk6YX0pO2UoYyl9aWYoIXgoYikpcmV0dXJuIGEgaW4gbXx8ZysrLG1bYV09YixnPmgmJnRoaXMucmVtb3ZlKHAua2V5KSxifSxnZXQ6ZnVuY3Rpb24oYSl7aWYoaDxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYj1sW2FdO2lmKCFiKXJldHVybjtlKGIpfXJldHVybiBtW2FdfSxyZW1vdmU6ZnVuY3Rpb24oYSl7aWYoaDxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYj1cbmxbYV07aWYoIWIpcmV0dXJuO2I9PW4mJihuPWIucCk7Yj09cCYmKHA9Yi5uKTtmKGIubixiLnApO2RlbGV0ZSBsW2FdfWRlbGV0ZSBtW2FdO2ctLX0scmVtb3ZlQWxsOmZ1bmN0aW9uKCl7bT17fTtnPTA7bD17fTtuPXA9bnVsbH0sZGVzdHJveTpmdW5jdGlvbigpe2w9az1tPW51bGw7ZGVsZXRlIGFbYl19LGluZm86ZnVuY3Rpb24oKXtyZXR1cm4gRCh7fSxrLHtzaXplOmd9KX19fXZhciBhPXt9O2IuaW5mbz1mdW5jdGlvbigpe3ZhciBiPXt9O3IoYSxmdW5jdGlvbihhLGUpe2JbZV09YS5pbmZvKCl9KTtyZXR1cm4gYn07Yi5nZXQ9ZnVuY3Rpb24oYil7cmV0dXJuIGFbYl19O3JldHVybiBifX1mdW5jdGlvbiBkZSgpe3RoaXMuJGdldD1bXCIkY2FjaGVGYWN0b3J5XCIsZnVuY3Rpb24oYil7cmV0dXJuIGIoXCJ0ZW1wbGF0ZXNcIil9XX1mdW5jdGlvbiBpYyhiLGEpe3ZhciBjPXt9LGQ9XCJEaXJlY3RpdmVcIixlPS9eXFxzKmRpcmVjdGl2ZVxcOlxccyooW1xcZFxcd19cXC1dKylcXHMrKC4qKSQvLGY9LygoW1xcZFxcd19cXC1dKykoPzpcXDooW147XSspKT87PykvLFxuZz0vXihvblthLXpdK3xmb3JtYWN0aW9uKSQvO3RoaXMuZGlyZWN0aXZlPWZ1bmN0aW9uIG0oYSxlKXtEYShhLFwiZGlyZWN0aXZlXCIpO3YoYSk/KERiKGUsXCJkaXJlY3RpdmVGYWN0b3J5XCIpLGMuaGFzT3duUHJvcGVydHkoYSl8fChjW2FdPVtdLGIuZmFjdG9yeShhK2QsW1wiJGluamVjdG9yXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGIsZCl7dmFyIGU9W107cihjW2FdLGZ1bmN0aW9uKGMsZil7dHJ5e3ZhciBnPWIuaW52b2tlKGMpO1AoZyk/Zz17Y29tcGlsZTpiYShnKX06IWcuY29tcGlsZSYmZy5saW5rJiYoZy5jb21waWxlPWJhKGcubGluaykpO2cucHJpb3JpdHk9Zy5wcmlvcml0eXx8MDtnLmluZGV4PWY7Zy5uYW1lPWcubmFtZXx8YTtnLnJlcXVpcmU9Zy5yZXF1aXJlfHxnLmNvbnRyb2xsZXImJmcubmFtZTtnLnJlc3RyaWN0PWcucmVzdHJpY3R8fFwiQVwiO2UucHVzaChnKX1jYXRjaChtKXtkKG0pfX0pO3JldHVybiBlfV0pKSxjW2FdLnB1c2goZSkpOnIoYSwkYihtKSk7XG5yZXR1cm4gdGhpc307dGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihiKXtyZXR1cm4geShiKT8oYS5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdChiKSx0aGlzKTphLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KCl9O3RoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGIpe3JldHVybiB5KGIpPyhhLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdChiKSx0aGlzKTphLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCgpfTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkaW50ZXJwb2xhdGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkaHR0cFwiLFwiJHRlbXBsYXRlQ2FjaGVcIixcIiRwYXJzZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRyb290U2NvcGVcIixcIiRkb2N1bWVudFwiLFwiJHNjZVwiLFwiJGFuaW1hdGVcIixcIiQkc2FuaXRpemVVcmlcIixmdW5jdGlvbihhLGIsbCxuLHAscSxzLEYsdSxBLE4sUil7ZnVuY3Rpb24geihhLGIsYyxkLGUpe2EgaW5zdGFuY2VvZlxud3x8KGE9dyhhKSk7cihhLGZ1bmN0aW9uKGIsYyl7Mz09Yi5ub2RlVHlwZSYmYi5ub2RlVmFsdWUubWF0Y2goL1xcUysvKSYmKGFbY109dyhiKS53cmFwKFwiPHNwYW4+PC9zcGFuPlwiKS5wYXJlbnQoKVswXSl9KTt2YXIgZj1MKGEsYixhLGMsZCxlKTtjYShhLFwibmctc2NvcGVcIik7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkLGUpe0RiKGIsXCJzY29wZVwiKTt2YXIgZz1jP0xhLmNsb25lLmNhbGwoYSk6YTtyKGQsZnVuY3Rpb24oYSxiKXtnLmRhdGEoXCIkXCIrYitcIkNvbnRyb2xsZXJcIixhKX0pO2Q9MDtmb3IodmFyIG09Zy5sZW5ndGg7ZDxtO2QrKyl7dmFyIGg9Z1tkXS5ub2RlVHlwZTsxIT09aCYmOSE9PWh8fGcuZXEoZCkuZGF0YShcIiRzY29wZVwiLGIpfWMmJmMoZyxiKTtmJiZmKGIsZyxnLGUpO3JldHVybiBnfX1mdW5jdGlvbiBjYShhLGIpe3RyeXthLmFkZENsYXNzKGIpfWNhdGNoKGMpe319ZnVuY3Rpb24gTChhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhhLGMsZCxlKXt2YXIgZixoLGwscSxuLFxucCxzO2Y9Yy5sZW5ndGg7dmFyIE09QXJyYXkoZik7Zm9yKHE9MDtxPGY7cSsrKU1bcV09Y1txXTtwPXE9MDtmb3Iobj1tLmxlbmd0aDtxPG47cCsrKWg9TVtwXSxjPW1bcSsrXSxmPW1bcSsrXSxjPyhjLnNjb3BlPyhsPWEuJG5ldygpLHcuZGF0YShoLFwiJHNjb3BlXCIsbCkpOmw9YSxzPWMudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ/TyhhLGMudHJhbnNjbHVkZSxlKTohYy50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQmJmU/ZTohZSYmYj9PKGEsYik6bnVsbCxjKGYsbCxoLGQscykpOmYmJmYoYSxoLmNoaWxkTm9kZXMsdCxlKX1mb3IodmFyIG09W10saCxsLHEsbixwPTA7cDxhLmxlbmd0aDtwKyspaD1uZXcgT2IsbD1kYShhW3BdLFtdLGgsMD09PXA/ZDp0LGUpLChmPWwubGVuZ3RoP0gobCxhW3BdLGgsYixjLG51bGwsW10sW10sZik6bnVsbCkmJmYuc2NvcGUmJmNhKGguJCRlbGVtZW50LFwibmctc2NvcGVcIiksaD1mJiZmLnRlcm1pbmFsfHwhKHE9YVtwXS5jaGlsZE5vZGVzKXx8IXEubGVuZ3RoP1xubnVsbDpMKHEsZj8oZi50cmFuc2NsdWRlT25UaGlzRWxlbWVudHx8IWYudGVtcGxhdGVPblRoaXNFbGVtZW50KSYmZi50cmFuc2NsdWRlOmIpLG0ucHVzaChmLGgpLG49bnx8Znx8aCxmPW51bGw7cmV0dXJuIG4/ZzpudWxsfWZ1bmN0aW9uIE8oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkLGUsZil7dmFyIGc9ITE7ZHx8KGQ9YS4kbmV3KCksZz1kLiQkdHJhbnNjbHVkZWQ9ITApO2U9YihkLGUsZixjKTtpZihnKWUub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZC4kZGVzdHJveSgpfSk7cmV0dXJuIGV9fWZ1bmN0aW9uIGRhKGEsYixjLGQsZyl7dmFyIG09Yy4kYXR0cixoO3N3aXRjaChhLm5vZGVUeXBlKXtjYXNlIDE6ZmEoYixwYShNYShhKS50b0xvd2VyQ2FzZSgpKSxcIkVcIixkLGcpO2Zvcih2YXIgbCxxLG4scD1hLmF0dHJpYnV0ZXMscz0wLEY9cCYmcC5sZW5ndGg7czxGO3MrKyl7dmFyIEE9ITEsTj0hMTtsPXBbc107aWYoIVF8fDg8PVF8fGwuc3BlY2lmaWVkKXtoPWwubmFtZTtxPVxuYWEobC52YWx1ZSk7bD1wYShoKTtpZihuPVUudGVzdChsKSloPW1iKGwuc3Vic3RyKDYpLFwiLVwiKTt2YXIgdT1sLnJlcGxhY2UoLyhTdGFydHxFbmQpJC8sXCJcIik7bD09PXUrXCJTdGFydFwiJiYoQT1oLE49aC5zdWJzdHIoMCxoLmxlbmd0aC01KStcImVuZFwiLGg9aC5zdWJzdHIoMCxoLmxlbmd0aC02KSk7bD1wYShoLnRvTG93ZXJDYXNlKCkpO21bbF09aDtpZihufHwhYy5oYXNPd25Qcm9wZXJ0eShsKSljW2xdPXEscWMoYSxsKSYmKGNbbF09ITApO1MoYSxiLHEsbCk7ZmEoYixsLFwiQVwiLGQsZyxBLE4pfX1hPWEuY2xhc3NOYW1lO2lmKHYoYSkmJlwiXCIhPT1hKWZvcig7aD1mLmV4ZWMoYSk7KWw9cGEoaFsyXSksZmEoYixsLFwiQ1wiLGQsZykmJihjW2xdPWFhKGhbM10pKSxhPWEuc3Vic3RyKGguaW5kZXgraFswXS5sZW5ndGgpO2JyZWFrO2Nhc2UgMzpLKGIsYS5ub2RlVmFsdWUpO2JyZWFrO2Nhc2UgODp0cnl7aWYoaD1lLmV4ZWMoYS5ub2RlVmFsdWUpKWw9cGEoaFsxXSksZmEoYixsLFwiTVwiLFxuZCxnKSYmKGNbbF09YWEoaFsyXSkpfWNhdGNoKHope319Yi5zb3J0KHgpO3JldHVybiBifWZ1bmN0aW9uIEIoYSxiLGMpe3ZhciBkPVtdLGU9MDtpZihiJiZhLmhhc0F0dHJpYnV0ZSYmYS5oYXNBdHRyaWJ1dGUoYikpe2Rve2lmKCFhKXRocm93IGphKFwidXRlcmRpclwiLGIsYyk7MT09YS5ub2RlVHlwZSYmKGEuaGFzQXR0cmlidXRlKGIpJiZlKyssYS5oYXNBdHRyaWJ1dGUoYykmJmUtLSk7ZC5wdXNoKGEpO2E9YS5uZXh0U2libGluZ313aGlsZSgwPGUpfWVsc2UgZC5wdXNoKGEpO3JldHVybiB3KGQpfWZ1bmN0aW9uIEkoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkLGUsZixnLGgpe2U9QihlWzBdLGIsYyk7cmV0dXJuIGEoZCxlLGYsZyxoKX19ZnVuY3Rpb24gSChhLGMsZCxlLGYsZyxtLG4scCl7ZnVuY3Rpb24gRihhLGIsYyxkKXtpZihhKXtjJiYoYT1JKGEsYyxkKSk7YS5yZXF1aXJlPUcucmVxdWlyZTthLmRpcmVjdGl2ZU5hbWU9QztpZihMPT09R3x8Ry4kJGlzb2xhdGVTY29wZSlhPVxudGMoYSx7aXNvbGF0ZVNjb3BlOiEwfSk7bS5wdXNoKGEpfWlmKGIpe2MmJihiPUkoYixjLGQpKTtiLnJlcXVpcmU9Ry5yZXF1aXJlO2IuZGlyZWN0aXZlTmFtZT1DO2lmKEw9PT1HfHxHLiQkaXNvbGF0ZVNjb3BlKWI9dGMoYix7aXNvbGF0ZVNjb3BlOiEwfSk7bi5wdXNoKGIpfX1mdW5jdGlvbiBBKGEsYixjLGQpe3ZhciBlLGY9XCJkYXRhXCIsZz0hMTtpZih2KGIpKXtmb3IoO1wiXlwiPT0oZT1iLmNoYXJBdCgwKSl8fFwiP1wiPT1lOyliPWIuc3Vic3RyKDEpLFwiXlwiPT1lJiYoZj1cImluaGVyaXRlZERhdGFcIiksZz1nfHxcIj9cIj09ZTtlPW51bGw7ZCYmXCJkYXRhXCI9PT1mJiYoZT1kW2JdKTtlPWV8fGNbZl0oXCIkXCIrYitcIkNvbnRyb2xsZXJcIik7aWYoIWUmJiFnKXRocm93IGphKFwiY3RyZXFcIixiLGEpO31lbHNlIEooYikmJihlPVtdLHIoYixmdW5jdGlvbihiKXtlLnB1c2goQShhLGIsYyxkKSl9KSk7cmV0dXJuIGV9ZnVuY3Rpb24gTihhLGUsZixnLHApe2Z1bmN0aW9uIEYoYSxiKXt2YXIgYzsyPmFyZ3VtZW50cy5sZW5ndGgmJlxuKGI9YSxhPXQpO0smJihjPWRhKTtyZXR1cm4gcChhLGIsYyl9dmFyIHUsTSx6LE8sSSxCLGRhPXt9LHJiO3U9Yz09PWY/ZDpoYShkLG5ldyBPYih3KGYpLGQuJGF0dHIpKTtNPXUuJCRlbGVtZW50O2lmKEwpe3ZhciBOYT0vXlxccyooW0A9Jl0pKFxcPz8pXFxzKihcXHcqKVxccyokLztCPWUuJG5ldyghMCk7IUh8fEghPT1MJiZIIT09TC4kJG9yaWdpbmFsRGlyZWN0aXZlP00uZGF0YShcIiRpc29sYXRlU2NvcGVOb1RlbXBsYXRlXCIsQik6TS5kYXRhKFwiJGlzb2xhdGVTY29wZVwiLEIpO2NhKE0sXCJuZy1pc29sYXRlLXNjb3BlXCIpO3IoTC5zY29wZSxmdW5jdGlvbihhLGMpe3ZhciBkPWEubWF0Y2goTmEpfHxbXSxmPWRbM118fGMsZz1cIj9cIj09ZFsyXSxkPWRbMV0sbSxsLG4scDtCLiQkaXNvbGF0ZUJpbmRpbmdzW2NdPWQrZjtzd2l0Y2goZCl7Y2FzZSBcIkBcIjp1LiRvYnNlcnZlKGYsZnVuY3Rpb24oYSl7QltjXT1hfSk7dS4kJG9ic2VydmVyc1tmXS4kJHNjb3BlPWU7dVtmXSYmKEJbY109Yih1W2ZdKShlKSk7XG5icmVhaztjYXNlIFwiPVwiOmlmKGcmJiF1W2ZdKWJyZWFrO2w9cSh1W2ZdKTtwPWwubGl0ZXJhbD9BYTpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09Ynx8YSE9PWEmJmIhPT1ifTtuPWwuYXNzaWdufHxmdW5jdGlvbigpe209QltjXT1sKGUpO3Rocm93IGphKFwibm9uYXNzaWduXCIsdVtmXSxMLm5hbWUpO307bT1CW2NdPWwoZSk7Qi4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgYT1sKGUpO3AoYSxCW2NdKXx8KHAoYSxtKT9uKGUsYT1CW2NdKTpCW2NdPWEpO3JldHVybiBtPWF9LG51bGwsbC5saXRlcmFsKTticmVhaztjYXNlIFwiJlwiOmw9cSh1W2ZdKTtCW2NdPWZ1bmN0aW9uKGEpe3JldHVybiBsKGUsYSl9O2JyZWFrO2RlZmF1bHQ6dGhyb3cgamEoXCJpc2NwXCIsTC5uYW1lLGMsYSk7fX0pfXJiPXAmJkY7UiYmcihSLGZ1bmN0aW9uKGEpe3ZhciBiPXskc2NvcGU6YT09PUx8fGEuJCRpc29sYXRlU2NvcGU/QjplLCRlbGVtZW50Ok0sJGF0dHJzOnUsJHRyYW5zY2x1ZGU6cmJ9LGM7ST1hLmNvbnRyb2xsZXI7XG5cIkBcIj09SSYmKEk9dVthLm5hbWVdKTtjPXMoSSxiKTtkYVthLm5hbWVdPWM7S3x8TS5kYXRhKFwiJFwiK2EubmFtZStcIkNvbnRyb2xsZXJcIixjKTthLmNvbnRyb2xsZXJBcyYmKGIuJHNjb3BlW2EuY29udHJvbGxlckFzXT1jKX0pO2c9MDtmb3Ioej1tLmxlbmd0aDtnPHo7ZysrKXRyeXtPPW1bZ10sTyhPLmlzb2xhdGVTY29wZT9COmUsTSx1LE8ucmVxdWlyZSYmQShPLmRpcmVjdGl2ZU5hbWUsTy5yZXF1aXJlLE0sZGEpLHJiKX1jYXRjaChHKXtsKEcsaWEoTSkpfWc9ZTtMJiYoTC50ZW1wbGF0ZXx8bnVsbD09PUwudGVtcGxhdGVVcmwpJiYoZz1CKTthJiZhKGcsZi5jaGlsZE5vZGVzLHQscCk7Zm9yKGc9bi5sZW5ndGgtMTswPD1nO2ctLSl0cnl7Tz1uW2ddLE8oTy5pc29sYXRlU2NvcGU/QjplLE0sdSxPLnJlcXVpcmUmJkEoTy5kaXJlY3RpdmVOYW1lLE8ucmVxdWlyZSxNLGRhKSxyYil9Y2F0Y2goeSl7bCh5LGlhKE0pKX19cD1wfHx7fTtmb3IodmFyIHU9LU51bWJlci5NQVhfVkFMVUUsXG5PLFI9cC5jb250cm9sbGVyRGlyZWN0aXZlcyxMPXAubmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLEg9cC50ZW1wbGF0ZURpcmVjdGl2ZSxmYT1wLm5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUseD0hMSxEPSExLEs9cC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSxaPWQuJCRlbGVtZW50PXcoYyksRyxDLFYsUz1lLFEsRmE9MCxxYT1hLmxlbmd0aDtGYTxxYTtGYSsrKXtHPWFbRmFdO3ZhciBVPUcuJCRzdGFydCxZPUcuJCRlbmQ7VSYmKFo9QihjLFUsWSkpO1Y9dDtpZih1PkcucHJpb3JpdHkpYnJlYWs7aWYoVj1HLnNjb3BlKU89T3x8RyxHLnRlbXBsYXRlVXJsfHwoZGIoXCJuZXcvaXNvbGF0ZWQgc2NvcGVcIixMLEcsWiksVChWKSYmKEw9RykpO0M9Ry5uYW1lOyFHLnRlbXBsYXRlVXJsJiZHLmNvbnRyb2xsZXImJihWPUcuY29udHJvbGxlcixSPVJ8fHt9LGRiKFwiJ1wiK0MrXCInIGNvbnRyb2xsZXJcIixSW0NdLEcsWiksUltDXT1HKTtpZihWPUcudHJhbnNjbHVkZSl4PSEwLEcuJCR0bGJ8fFxuKGRiKFwidHJhbnNjbHVzaW9uXCIsZmEsRyxaKSxmYT1HKSxcImVsZW1lbnRcIj09Vj8oSz0hMCx1PUcucHJpb3JpdHksVj1aLFo9ZC4kJGVsZW1lbnQ9dyhYLmNyZWF0ZUNvbW1lbnQoXCIgXCIrQytcIjogXCIrZFtDXStcIiBcIikpLGM9WlswXSxOYShmLEJhLmNhbGwoViwwKSxjKSxTPXooVixlLHUsZyYmZy5uYW1lLHtub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOmZhfSkpOihWPXcoS2IoYykpLmNvbnRlbnRzKCksWi5lbXB0eSgpLFM9eihWLGUpKTtpZihHLnRlbXBsYXRlKWlmKEQ9ITAsZGIoXCJ0ZW1wbGF0ZVwiLEgsRyxaKSxIPUcsVj1QKEcudGVtcGxhdGUpP0cudGVtcGxhdGUoWixkKTpHLnRlbXBsYXRlLFY9VyhWKSxHLnJlcGxhY2Upe2c9RztWPUliLnRlc3QoVik/dyhhYShWKSk6W107Yz1WWzBdO2lmKDEhPVYubGVuZ3RofHwxIT09Yy5ub2RlVHlwZSl0aHJvdyBqYShcInRwbHJ0XCIsQyxcIlwiKTtOYShmLFosYyk7cWE9eyRhdHRyOnt9fTtWPWRhKGMsW10scWEpO3ZhciAkPWEuc3BsaWNlKEZhK1xuMSxhLmxlbmd0aC0oRmErMSkpO0wmJnkoVik7YT1hLmNvbmNhdChWKS5jb25jYXQoJCk7RShkLHFhKTtxYT1hLmxlbmd0aH1lbHNlIFouaHRtbChWKTtpZihHLnRlbXBsYXRlVXJsKUQ9ITAsZGIoXCJ0ZW1wbGF0ZVwiLEgsRyxaKSxIPUcsRy5yZXBsYWNlJiYoZz1HKSxOPXVlKGEuc3BsaWNlKEZhLGEubGVuZ3RoLUZhKSxaLGQsZix4JiZTLG0sbix7Y29udHJvbGxlckRpcmVjdGl2ZXM6UixuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmU6TCx0ZW1wbGF0ZURpcmVjdGl2ZTpILG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6ZmF9KSxxYT1hLmxlbmd0aDtlbHNlIGlmKEcuY29tcGlsZSl0cnl7UT1HLmNvbXBpbGUoWixkLFMpLFAoUSk/RihudWxsLFEsVSxZKTpRJiZGKFEucHJlLFEucG9zdCxVLFkpfWNhdGNoKHZlKXtsKHZlLGlhKFopKX1HLnRlcm1pbmFsJiYoTi50ZXJtaW5hbD0hMCx1PU1hdGgubWF4KHUsRy5wcmlvcml0eSkpfU4uc2NvcGU9TyYmITA9PT1PLnNjb3BlO04udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ9XG54O04udGVtcGxhdGVPblRoaXNFbGVtZW50PUQ7Ti50cmFuc2NsdWRlPVM7cC5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZT1LO3JldHVybiBOfWZ1bmN0aW9uIHkoYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKWFbYl09YmMoYVtiXSx7JCRpc29sYXRlU2NvcGU6ITB9KX1mdW5jdGlvbiBmYShiLGUsZixnLGgscSxuKXtpZihlPT09aClyZXR1cm4gbnVsbDtoPW51bGw7aWYoYy5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHA7ZT1hLmdldChlK2QpO2Zvcih2YXIgcz0wLHU9ZS5sZW5ndGg7czx1O3MrKyl0cnl7cD1lW3NdLChnPT09dHx8Zz5wLnByaW9yaXR5KSYmLTEhPXAucmVzdHJpY3QuaW5kZXhPZihmKSYmKHEmJihwPWJjKHAseyQkc3RhcnQ6cSwkJGVuZDpufSkpLGIucHVzaChwKSxoPXApfWNhdGNoKEYpe2woRil9fXJldHVybiBofWZ1bmN0aW9uIEUoYSxiKXt2YXIgYz1iLiRhdHRyLGQ9YS4kYXR0cixlPWEuJCRlbGVtZW50O3IoYSxmdW5jdGlvbihkLGUpe1wiJFwiIT1cbmUuY2hhckF0KDApJiYoYltlXSYmYltlXSE9PWQmJihkKz0oXCJzdHlsZVwiPT09ZT9cIjtcIjpcIiBcIikrYltlXSksYS4kc2V0KGUsZCwhMCxjW2VdKSl9KTtyKGIsZnVuY3Rpb24oYixmKXtcImNsYXNzXCI9PWY/KGNhKGUsYiksYVtcImNsYXNzXCJdPShhW1wiY2xhc3NcIl0/YVtcImNsYXNzXCJdK1wiIFwiOlwiXCIpK2IpOlwic3R5bGVcIj09Zj8oZS5hdHRyKFwic3R5bGVcIixlLmF0dHIoXCJzdHlsZVwiKStcIjtcIitiKSxhLnN0eWxlPShhLnN0eWxlP2Euc3R5bGUrXCI7XCI6XCJcIikrYik6XCIkXCI9PWYuY2hhckF0KDApfHxhLmhhc093blByb3BlcnR5KGYpfHwoYVtmXT1iLGRbZl09Y1tmXSl9KX1mdW5jdGlvbiB1ZShhLGIsYyxkLGUsZixnLGgpe3ZhciBtPVtdLGwscSxzPWJbMF0sdT1hLnNoaWZ0KCksRj1EKHt9LHUse3RlbXBsYXRlVXJsOm51bGwsdHJhbnNjbHVkZTpudWxsLHJlcGxhY2U6bnVsbCwkJG9yaWdpbmFsRGlyZWN0aXZlOnV9KSxOPVAodS50ZW1wbGF0ZVVybCk/dS50ZW1wbGF0ZVVybChiLGMpOnUudGVtcGxhdGVVcmw7XG5iLmVtcHR5KCk7bi5nZXQoQS5nZXRUcnVzdGVkUmVzb3VyY2VVcmwoTikse2NhY2hlOnB9KS5zdWNjZXNzKGZ1bmN0aW9uKG4pe3ZhciBwLEE7bj1XKG4pO2lmKHUucmVwbGFjZSl7bj1JYi50ZXN0KG4pP3coYWEobikpOltdO3A9blswXTtpZigxIT1uLmxlbmd0aHx8MSE9PXAubm9kZVR5cGUpdGhyb3cgamEoXCJ0cGxydFwiLHUubmFtZSxOKTtuPXskYXR0cjp7fX07TmEoZCxiLHApO3ZhciB6PWRhKHAsW10sbik7VCh1LnNjb3BlKSYmeSh6KTthPXouY29uY2F0KGEpO0UoYyxuKX1lbHNlIHA9cyxiLmh0bWwobik7YS51bnNoaWZ0KEYpO2w9SChhLHAsYyxlLGIsdSxmLGcsaCk7cihkLGZ1bmN0aW9uKGEsYyl7YT09cCYmKGRbY109YlswXSl9KTtmb3IocT1MKGJbMF0uY2hpbGROb2RlcyxlKTttLmxlbmd0aDspe249bS5zaGlmdCgpO0E9bS5zaGlmdCgpO3ZhciBSPW0uc2hpZnQoKSxJPW0uc2hpZnQoKSx6PWJbMF07aWYoQSE9PXMpe3ZhciBCPUEuY2xhc3NOYW1lO2guaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUmJlxudS5yZXBsYWNlfHwoej1LYihwKSk7TmEoUix3KEEpLHopO2NhKHcoeiksQil9QT1sLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50P08obixsLnRyYW5zY2x1ZGUsSSk6STtsKHEsbix6LGQsQSl9bT1udWxsfSkuZXJyb3IoZnVuY3Rpb24oYSxiLGMsZCl7dGhyb3cgamEoXCJ0cGxvYWRcIixkLnVybCk7fSk7cmV0dXJuIGZ1bmN0aW9uKGEsYixjLGQsZSl7YT1lO20/KG0ucHVzaChiKSxtLnB1c2goYyksbS5wdXNoKGQpLG0ucHVzaChhKSk6KGwudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQmJihhPU8oYixsLnRyYW5zY2x1ZGUsZSkpLGwocSxiLGMsZCxhKSl9fWZ1bmN0aW9uIHgoYSxiKXt2YXIgYz1iLnByaW9yaXR5LWEucHJpb3JpdHk7cmV0dXJuIDAhPT1jP2M6YS5uYW1lIT09Yi5uYW1lP2EubmFtZTxiLm5hbWU/LTE6MTphLmluZGV4LWIuaW5kZXh9ZnVuY3Rpb24gZGIoYSxiLGMsZCl7aWYoYil0aHJvdyBqYShcIm11bHRpZGlyXCIsYi5uYW1lLGMubmFtZSxhLGlhKGQpKTt9ZnVuY3Rpb24gSyhhLFxuYyl7dmFyIGQ9YihjLCEwKTtkJiZhLnB1c2goe3ByaW9yaXR5OjAsY29tcGlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudCgpLmxlbmd0aDtiJiZjYShhLnBhcmVudCgpLFwibmctYmluZGluZ1wiKTtyZXR1cm4gZnVuY3Rpb24oYSxjKXt2YXIgZT1jLnBhcmVudCgpLGY9ZS5kYXRhKFwiJGJpbmRpbmdcIil8fFtdO2YucHVzaChkKTtlLmRhdGEoXCIkYmluZGluZ1wiLGYpO2J8fGNhKGUsXCJuZy1iaW5kaW5nXCIpO2EuJHdhdGNoKGQsZnVuY3Rpb24oYSl7Y1swXS5ub2RlVmFsdWU9YX0pfX19KX1mdW5jdGlvbiBDKGEsYil7aWYoXCJzcmNkb2NcIj09YilyZXR1cm4gQS5IVE1MO3ZhciBjPU1hKGEpO2lmKFwieGxpbmtIcmVmXCI9PWJ8fFwiRk9STVwiPT1jJiZcImFjdGlvblwiPT1ifHxcIklNR1wiIT1jJiYoXCJzcmNcIj09Ynx8XCJuZ1NyY1wiPT1iKSlyZXR1cm4gQS5SRVNPVVJDRV9VUkx9ZnVuY3Rpb24gUyhhLGMsZCxlKXt2YXIgZj1iKGQsITApO2lmKGYpe2lmKFwibXVsdGlwbGVcIj09PWUmJlwiU0VMRUNUXCI9PT1cbk1hKGEpKXRocm93IGphKFwic2VsbXVsdGlcIixpYShhKSk7Yy5wdXNoKHtwcmlvcml0eToxMDAsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYyxkLG0pe2Q9bS4kJG9ic2VydmVyc3x8KG0uJCRvYnNlcnZlcnM9e30pO2lmKGcudGVzdChlKSl0aHJvdyBqYShcIm5vZG9tZXZlbnRzXCIpO2lmKGY9YihtW2VdLCEwLEMoYSxlKSkpbVtlXT1mKGMpLChkW2VdfHwoZFtlXT1bXSkpLiQkaW50ZXI9ITAsKG0uJCRvYnNlcnZlcnMmJm0uJCRvYnNlcnZlcnNbZV0uJCRzY29wZXx8YykuJHdhdGNoKGYsZnVuY3Rpb24oYSxiKXtcImNsYXNzXCI9PT1lJiZhIT1iP20uJHVwZGF0ZUNsYXNzKGEsYik6bS4kc2V0KGUsYSl9KX19fX0pfX1mdW5jdGlvbiBOYShhLGIsYyl7dmFyIGQ9YlswXSxlPWIubGVuZ3RoLGY9ZC5wYXJlbnROb2RlLGcsbTtpZihhKWZvcihnPTAsbT1hLmxlbmd0aDtnPG07ZysrKWlmKGFbZ109PWQpe2FbZysrXT1jO209ZytlLTE7Zm9yKHZhciBoPWEubGVuZ3RoO2c8XG5oO2crKyxtKyspbTxoP2FbZ109YVttXTpkZWxldGUgYVtnXTthLmxlbmd0aC09ZS0xO2JyZWFrfWYmJmYucmVwbGFjZUNoaWxkKGMsZCk7YT1YLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTthLmFwcGVuZENoaWxkKGQpO2Nbdy5leHBhbmRvXT1kW3cuZXhwYW5kb107ZD0xO2ZvcihlPWIubGVuZ3RoO2Q8ZTtkKyspZj1iW2RdLHcoZikucmVtb3ZlKCksYS5hcHBlbmRDaGlsZChmKSxkZWxldGUgYltkXTtiWzBdPWM7Yi5sZW5ndGg9MX1mdW5jdGlvbiB0YyhhLGIpe3JldHVybiBEKGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhLGIpfXZhciBPYj1mdW5jdGlvbihhLGIpe3RoaXMuJCRlbGVtZW50PWE7dGhpcy4kYXR0cj1ifHx7fX07T2IucHJvdG90eXBlPXskbm9ybWFsaXplOnBhLCRhZGRDbGFzczpmdW5jdGlvbihhKXthJiYwPGEubGVuZ3RoJiZOLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LGEpfSwkcmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7YSYmMDxcbmEubGVuZ3RoJiZOLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LGEpfSwkdXBkYXRlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz11YyhhLGIpLGQ9dWMoYixhKTswPT09Yy5sZW5ndGg/Ti5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxkKTowPT09ZC5sZW5ndGg/Ti5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCxjKTpOLnNldENsYXNzKHRoaXMuJCRlbGVtZW50LGMsZCl9LCRzZXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9cWModGhpcy4kJGVsZW1lbnRbMF0sYSk7ZSYmKHRoaXMuJCRlbGVtZW50LnByb3AoYSxiKSxkPWUpO3RoaXNbYV09YjtkP3RoaXMuJGF0dHJbYV09ZDooZD10aGlzLiRhdHRyW2FdKXx8KHRoaXMuJGF0dHJbYV09ZD1tYihhLFwiLVwiKSk7ZT1NYSh0aGlzLiQkZWxlbWVudCk7aWYoXCJBXCI9PT1lJiZcImhyZWZcIj09PWF8fFwiSU1HXCI9PT1lJiZcInNyY1wiPT09YSl0aGlzW2FdPWI9UihiLFwic3JjXCI9PT1hKTshMSE9PWMmJihudWxsPT09Ynx8Yj09PXQ/dGhpcy4kJGVsZW1lbnQucmVtb3ZlQXR0cihkKTpcbnRoaXMuJCRlbGVtZW50LmF0dHIoZCxiKSk7KGM9dGhpcy4kJG9ic2VydmVycykmJnIoY1thXSxmdW5jdGlvbihhKXt0cnl7YShiKX1jYXRjaChjKXtsKGMpfX0pfSwkb2JzZXJ2ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLiQkb2JzZXJ2ZXJzfHwoYy4kJG9ic2VydmVycz17fSksZT1kW2FdfHwoZFthXT1bXSk7ZS5wdXNoKGIpO0YuJGV2YWxBc3luYyhmdW5jdGlvbigpe2UuJCRpbnRlcnx8YihjW2FdKX0pO3JldHVybiBifX07dmFyIHFhPWIuc3RhcnRTeW1ib2woKSxaPWIuZW5kU3ltYm9sKCksVz1cInt7XCI9PXFhfHxcIn19XCI9PVo/UWE6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvXFx7XFx7L2cscWEpLnJlcGxhY2UoL319L2csWil9LFU9L15uZ0F0dHJbQS1aXS87cmV0dXJuIHp9XX1mdW5jdGlvbiBwYShiKXtyZXR1cm4gWmEoYi5yZXBsYWNlKHdlLFwiXCIpKX1mdW5jdGlvbiB1YyhiLGEpe3ZhciBjPVwiXCIsZD1iLnNwbGl0KC9cXHMrLyksZT1hLnNwbGl0KC9cXHMrLyksZj1cbjA7YTpmb3IoO2Y8ZC5sZW5ndGg7ZisrKXtmb3IodmFyIGc9ZFtmXSxrPTA7azxlLmxlbmd0aDtrKyspaWYoZz09ZVtrXSljb250aW51ZSBhO2MrPSgwPGMubGVuZ3RoP1wiIFwiOlwiXCIpK2d9cmV0dXJuIGN9ZnVuY3Rpb24gUGQoKXt2YXIgYj17fSxhPS9eKFxcUyspKFxccythc1xccysoXFx3KykpPyQvO3RoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oYSxkKXtEYShhLFwiY29udHJvbGxlclwiKTtUKGEpP0QoYixhKTpiW2FdPWR9O3RoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixcIiR3aW5kb3dcIixmdW5jdGlvbihjLGQpe3JldHVybiBmdW5jdGlvbihlLGYpe3ZhciBnLGssbTt2KGUpJiYoZz1lLm1hdGNoKGEpLGs9Z1sxXSxtPWdbM10sZT1iLmhhc093blByb3BlcnR5KGspP2Jba106aGMoZi4kc2NvcGUsaywhMCl8fGhjKGQsaywhMCksV2EoZSxrLCEwKSk7Zz1jLmluc3RhbnRpYXRlKGUsZik7aWYobSl7aWYoIWZ8fFwib2JqZWN0XCIhPT10eXBlb2YgZi4kc2NvcGUpdGhyb3cgQyhcIiRjb250cm9sbGVyXCIpKFwibm9zY3BcIixcbmt8fGUubmFtZSxtKTtmLiRzY29wZVttXT1nfXJldHVybiBnfX1dfWZ1bmN0aW9uIFFkKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixmdW5jdGlvbihiKXtyZXR1cm4gdyhiLmRvY3VtZW50KX1dfWZ1bmN0aW9uIFJkKCl7dGhpcy4kZ2V0PVtcIiRsb2dcIixmdW5jdGlvbihiKXtyZXR1cm4gZnVuY3Rpb24oYSxjKXtiLmVycm9yLmFwcGx5KGIsYXJndW1lbnRzKX19XX1mdW5jdGlvbiB2YyhiKXt2YXIgYT17fSxjLGQsZTtpZighYilyZXR1cm4gYTtyKGIuc3BsaXQoXCJcXG5cIiksZnVuY3Rpb24oYil7ZT1iLmluZGV4T2YoXCI6XCIpO2M9SyhhYShiLnN1YnN0cigwLGUpKSk7ZD1hYShiLnN1YnN0cihlKzEpKTtjJiYoYVtjXT1hW2NdP2FbY10rXCIsIFwiK2Q6ZCl9KTtyZXR1cm4gYX1mdW5jdGlvbiB3YyhiKXt2YXIgYT1UKGIpP2I6dDtyZXR1cm4gZnVuY3Rpb24oYyl7YXx8KGE9dmMoYikpO3JldHVybiBjP2FbSyhjKV18fG51bGw6YX19ZnVuY3Rpb24geGMoYixhLGMpe2lmKFAoYykpcmV0dXJuIGMoYixcbmEpO3IoYyxmdW5jdGlvbihjKXtiPWMoYixhKX0pO3JldHVybiBifWZ1bmN0aW9uIFVkKCl7dmFyIGI9L15cXHMqKFxcW3xcXHtbXlxce10pLyxhPS9bXFx9XFxdXVxccyokLyxjPS9eXFwpXFxdXFx9Jyw/XFxuLyxkPXtcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04XCJ9LGU9dGhpcy5kZWZhdWx0cz17dHJhbnNmb3JtUmVzcG9uc2U6W2Z1bmN0aW9uKGQpe3YoZCkmJihkPWQucmVwbGFjZShjLFwiXCIpLGIudGVzdChkKSYmYS50ZXN0KGQpJiYoZD1jYyhkKSkpO3JldHVybiBkfV0sdHJhbnNmb3JtUmVxdWVzdDpbZnVuY3Rpb24oYSl7cmV0dXJuIFQoYSkmJlwiW29iamVjdCBGaWxlXVwiIT09emEuY2FsbChhKSYmXCJbb2JqZWN0IEJsb2JdXCIhPT16YS5jYWxsKGEpP25hKGEpOmF9XSxoZWFkZXJzOntjb21tb246e0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKlwifSxwb3N0OmhhKGQpLHB1dDpoYShkKSxwYXRjaDpoYShkKX0seHNyZkNvb2tpZU5hbWU6XCJYU1JGLVRPS0VOXCIsXG54c3JmSGVhZGVyTmFtZTpcIlgtWFNSRi1UT0tFTlwifSxmPXRoaXMuaW50ZXJjZXB0b3JzPVtdLGc9dGhpcy5yZXNwb25zZUludGVyY2VwdG9ycz1bXTt0aGlzLiRnZXQ9W1wiJGh0dHBCYWNrZW5kXCIsXCIkYnJvd3NlclwiLFwiJGNhY2hlRmFjdG9yeVwiLFwiJHJvb3RTY29wZVwiLFwiJHFcIixcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGEsYixjLGQsbixwKXtmdW5jdGlvbiBxKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGQ9RCh7fSxhLHtkYXRhOnhjKGEuZGF0YSxhLmhlYWRlcnMsYy50cmFuc2Zvcm1SZXNwb25zZSl9KTtyZXR1cm4gMjAwPD1hLnN0YXR1cyYmMzAwPmEuc3RhdHVzP2Q6bi5yZWplY3QoZCl9dmFyIGM9e21ldGhvZDpcImdldFwiLHRyYW5zZm9ybVJlcXVlc3Q6ZS50cmFuc2Zvcm1SZXF1ZXN0LHRyYW5zZm9ybVJlc3BvbnNlOmUudHJhbnNmb3JtUmVzcG9uc2V9LGQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZS5oZWFkZXJzLGM9RCh7fSxhLmhlYWRlcnMpLGQsZixiPUQoe30sYi5jb21tb24sYltLKGEubWV0aG9kKV0pO1xuYTpmb3IoZCBpbiBiKXthPUsoZCk7Zm9yKGYgaW4gYylpZihLKGYpPT09YSljb250aW51ZSBhO2NbZF09YltkXX0oZnVuY3Rpb24oYSl7dmFyIGI7cihhLGZ1bmN0aW9uKGMsZCl7UChjKSYmKGI9YygpLG51bGwhPWI/YVtkXT1iOmRlbGV0ZSBhW2RdKX0pfSkoYyk7cmV0dXJuIGN9KGEpO0QoYyxhKTtjLmhlYWRlcnM9ZDtjLm1ldGhvZD1JYShjLm1ldGhvZCk7dmFyIGY9W2Z1bmN0aW9uKGEpe2Q9YS5oZWFkZXJzO3ZhciBjPXhjKGEuZGF0YSx3YyhkKSxhLnRyYW5zZm9ybVJlcXVlc3QpO3goYykmJnIoZCxmdW5jdGlvbihhLGIpe1wiY29udGVudC10eXBlXCI9PT1LKGIpJiZkZWxldGUgZFtiXX0pO3goYS53aXRoQ3JlZGVudGlhbHMpJiYheChlLndpdGhDcmVkZW50aWFscykmJihhLndpdGhDcmVkZW50aWFscz1lLndpdGhDcmVkZW50aWFscyk7cmV0dXJuIHMoYSxjLGQpLnRoZW4oYixiKX0sdF0sZz1uLndoZW4oYyk7Zm9yKHIoQSxmdW5jdGlvbihhKXsoYS5yZXF1ZXN0fHxhLnJlcXVlc3RFcnJvcikmJlxuZi51bnNoaWZ0KGEucmVxdWVzdCxhLnJlcXVlc3RFcnJvcik7KGEucmVzcG9uc2V8fGEucmVzcG9uc2VFcnJvcikmJmYucHVzaChhLnJlc3BvbnNlLGEucmVzcG9uc2VFcnJvcil9KTtmLmxlbmd0aDspe2E9Zi5zaGlmdCgpO3ZhciBtPWYuc2hpZnQoKSxnPWcudGhlbihhLG0pfWcuc3VjY2Vzcz1mdW5jdGlvbihhKXtnLnRoZW4oZnVuY3Rpb24oYil7YShiLmRhdGEsYi5zdGF0dXMsYi5oZWFkZXJzLGMpfSk7cmV0dXJuIGd9O2cuZXJyb3I9ZnVuY3Rpb24oYSl7Zy50aGVuKG51bGwsZnVuY3Rpb24oYil7YShiLmRhdGEsYi5zdGF0dXMsYi5oZWFkZXJzLGMpfSk7cmV0dXJuIGd9O3JldHVybiBnfWZ1bmN0aW9uIHMoYyxmLGcpe2Z1bmN0aW9uIGgoYSxiLGMsZSl7SSYmKDIwMDw9YSYmMzAwPmE/SS5wdXQodyxbYSxiLHZjKGMpLGVdKTpJLnJlbW92ZSh3KSk7cChiLGEsYyxlKTtkLiQkcGhhc2V8fGQuJGFwcGx5KCl9ZnVuY3Rpb24gcChhLGIsZCxlKXtiPU1hdGgubWF4KGIsMCk7KDIwMDw9XG5iJiYzMDA+Yj9BLnJlc29sdmU6QS5yZWplY3QpKHtkYXRhOmEsc3RhdHVzOmIsaGVhZGVyczp3YyhkKSxjb25maWc6YyxzdGF0dXNUZXh0OmV9KX1mdW5jdGlvbiBzKCl7dmFyIGE9UmEocS5wZW5kaW5nUmVxdWVzdHMsYyk7LTEhPT1hJiZxLnBlbmRpbmdSZXF1ZXN0cy5zcGxpY2UoYSwxKX12YXIgQT1uLmRlZmVyKCkscj1BLnByb21pc2UsSSxILHc9RihjLnVybCxjLnBhcmFtcyk7cS5wZW5kaW5nUmVxdWVzdHMucHVzaChjKTtyLnRoZW4ocyxzKTshYy5jYWNoZSYmIWUuY2FjaGV8fCghMT09PWMuY2FjaGV8fFwiR0VUXCIhPT1jLm1ldGhvZCYmXCJKU09OUFwiIT09Yy5tZXRob2QpfHwoST1UKGMuY2FjaGUpP2MuY2FjaGU6VChlLmNhY2hlKT9lLmNhY2hlOnUpO2lmKEkpaWYoSD1JLmdldCh3KSx5KEgpKXtpZihIJiZQKEgudGhlbikpcmV0dXJuIEgudGhlbihzLHMpLEg7SihIKT9wKEhbMV0sSFswXSxoYShIWzJdKSxIWzNdKTpwKEgsMjAwLHt9LFwiT0tcIil9ZWxzZSBJLnB1dCh3LHIpO3goSCkmJlxuKChIPVBiKGMudXJsKT9iLmNvb2tpZXMoKVtjLnhzcmZDb29raWVOYW1lfHxlLnhzcmZDb29raWVOYW1lXTp0KSYmKGdbYy54c3JmSGVhZGVyTmFtZXx8ZS54c3JmSGVhZGVyTmFtZV09SCksYShjLm1ldGhvZCx3LGYsaCxnLGMudGltZW91dCxjLndpdGhDcmVkZW50aWFscyxjLnJlc3BvbnNlVHlwZSkpO3JldHVybiByfWZ1bmN0aW9uIEYoYSxiKXtpZighYilyZXR1cm4gYTt2YXIgYz1bXTtUYyhiLGZ1bmN0aW9uKGEsYil7bnVsbD09PWF8fHgoYSl8fChKKGEpfHwoYT1bYV0pLHIoYSxmdW5jdGlvbihhKXtUKGEpJiYoYT10YShhKT9hLnRvSVNPU3RyaW5nKCk6bmEoYSkpO2MucHVzaChDYShiKStcIj1cIitDYShhKSl9KSl9KTswPGMubGVuZ3RoJiYoYSs9KC0xPT1hLmluZGV4T2YoXCI/XCIpP1wiP1wiOlwiJlwiKStjLmpvaW4oXCImXCIpKTtyZXR1cm4gYX12YXIgdT1jKFwiJGh0dHBcIiksQT1bXTtyKGYsZnVuY3Rpb24oYSl7QS51bnNoaWZ0KHYoYSk/cC5nZXQoYSk6cC5pbnZva2UoYSkpfSk7cihnLFxuZnVuY3Rpb24oYSxiKXt2YXIgYz12KGEpP3AuZ2V0KGEpOnAuaW52b2tlKGEpO0Euc3BsaWNlKGIsMCx7cmVzcG9uc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGMobi53aGVuKGEpKX0scmVzcG9uc2VFcnJvcjpmdW5jdGlvbihhKXtyZXR1cm4gYyhuLnJlamVjdChhKSl9fSl9KTtxLnBlbmRpbmdSZXF1ZXN0cz1bXTsoZnVuY3Rpb24oYSl7cihhcmd1bWVudHMsZnVuY3Rpb24oYSl7cVthXT1mdW5jdGlvbihiLGMpe3JldHVybiBxKEQoY3x8e30se21ldGhvZDphLHVybDpifSkpfX0pfSkoXCJnZXRcIixcImRlbGV0ZVwiLFwiaGVhZFwiLFwianNvbnBcIik7KGZ1bmN0aW9uKGEpe3IoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3FbYV09ZnVuY3Rpb24oYixjLGQpe3JldHVybiBxKEQoZHx8e30se21ldGhvZDphLHVybDpiLGRhdGE6Y30pKX19KX0pKFwicG9zdFwiLFwicHV0XCIpO3EuZGVmYXVsdHM9ZTtyZXR1cm4gcX1dfWZ1bmN0aW9uIHhlKGIpe2lmKDg+PVEmJighYi5tYXRjaCgvXihnZXR8cG9zdHxoZWFkfHB1dHxkZWxldGV8b3B0aW9ucykkL2kpfHxcbiFXLlhNTEh0dHBSZXF1ZXN0KSlyZXR1cm4gbmV3IFcuQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpO2lmKFcuWE1MSHR0cFJlcXVlc3QpcmV0dXJuIG5ldyBXLlhNTEh0dHBSZXF1ZXN0O3Rocm93IEMoXCIkaHR0cEJhY2tlbmRcIikoXCJub3hoclwiKTt9ZnVuY3Rpb24gVmQoKXt0aGlzLiRnZXQ9W1wiJGJyb3dzZXJcIixcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGIsYSxjKXtyZXR1cm4geWUoYix4ZSxiLmRlZmVyLGEuYW5ndWxhci5jYWxsYmFja3MsY1swXSl9XX1mdW5jdGlvbiB5ZShiLGEsYyxkLGUpe2Z1bmN0aW9uIGYoYSxiLGMpe3ZhciBmPWUuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxnPW51bGw7Zi50eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI7Zi5zcmM9YTtmLmFzeW5jPSEwO2c9ZnVuY3Rpb24oYSl7JGEoZixcImxvYWRcIixnKTskYShmLFwiZXJyb3JcIixnKTtlLmJvZHkucmVtb3ZlQ2hpbGQoZik7Zj1udWxsO3ZhciBrPS0xLHM9XCJ1bmtub3duXCI7YSYmKFwibG9hZFwiIT09XG5hLnR5cGV8fGRbYl0uY2FsbGVkfHwoYT17dHlwZTpcImVycm9yXCJ9KSxzPWEudHlwZSxrPVwiZXJyb3JcIj09PWEudHlwZT80MDQ6MjAwKTtjJiZjKGsscyl9O3NiKGYsXCJsb2FkXCIsZyk7c2IoZixcImVycm9yXCIsZyk7OD49USYmKGYub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dihmLnJlYWR5U3RhdGUpJiYvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KGYucmVhZHlTdGF0ZSkmJihmLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGcoe3R5cGU6XCJsb2FkXCJ9KSl9KTtlLmJvZHkuYXBwZW5kQ2hpbGQoZik7cmV0dXJuIGd9dmFyIGc9LTE7cmV0dXJuIGZ1bmN0aW9uKGUsbSxoLGwsbixwLHEscyl7ZnVuY3Rpb24gRigpe0E9ZztSJiZSKCk7eiYmei5hYm9ydCgpfWZ1bmN0aW9uIHUoYSxkLGUsZixnKXtMJiZjLmNhbmNlbChMKTtSPXo9bnVsbDswPT09ZCYmKGQ9ZT8yMDA6XCJmaWxlXCI9PXVhKG0pLnByb3RvY29sPzQwNDowKTthKDEyMjM9PT1kPzIwNDpkLGUsZixnfHxcIlwiKTtiLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QoRSl9XG52YXIgQTtiLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQoKTttPW18fGIudXJsKCk7aWYoXCJqc29ucFwiPT1LKGUpKXt2YXIgTj1cIl9cIisoZC5jb3VudGVyKyspLnRvU3RyaW5nKDM2KTtkW05dPWZ1bmN0aW9uKGEpe2RbTl0uZGF0YT1hO2RbTl0uY2FsbGVkPSEwfTt2YXIgUj1mKG0ucmVwbGFjZShcIkpTT05fQ0FMTEJBQ0tcIixcImFuZ3VsYXIuY2FsbGJhY2tzLlwiK04pLE4sZnVuY3Rpb24oYSxiKXt1KGwsYSxkW05dLmRhdGEsXCJcIixiKTtkW05dPUV9KX1lbHNle3ZhciB6PWEoZSk7ei5vcGVuKGUsbSwhMCk7cihuLGZ1bmN0aW9uKGEsYil7eShhKSYmei5zZXRSZXF1ZXN0SGVhZGVyKGIsYSl9KTt6Lm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKHomJjQ9PXoucmVhZHlTdGF0ZSl7dmFyIGE9bnVsbCxiPW51bGwsYz1cIlwiO0EhPT1nJiYoYT16LmdldEFsbFJlc3BvbnNlSGVhZGVycygpLGI9XCJyZXNwb25zZVwiaW4gej96LnJlc3BvbnNlOnoucmVzcG9uc2VUZXh0KTtBPT09ZyYmXG4xMD5RfHwoYz16LnN0YXR1c1RleHQpO3UobCxBfHx6LnN0YXR1cyxiLGEsYyl9fTtxJiYoei53aXRoQ3JlZGVudGlhbHM9ITApO2lmKHMpdHJ5e3oucmVzcG9uc2VUeXBlPXN9Y2F0Y2goY2Epe2lmKFwianNvblwiIT09cyl0aHJvdyBjYTt9ei5zZW5kKGh8fG51bGwpfWlmKDA8cCl2YXIgTD1jKEYscCk7ZWxzZSBwJiZQKHAudGhlbikmJnAudGhlbihGKX19ZnVuY3Rpb24gU2QoKXt2YXIgYj1cInt7XCIsYT1cIn19XCI7dGhpcy5zdGFydFN5bWJvbD1mdW5jdGlvbihhKXtyZXR1cm4gYT8oYj1hLHRoaXMpOmJ9O3RoaXMuZW5kU3ltYm9sPWZ1bmN0aW9uKGIpe3JldHVybiBiPyhhPWIsdGhpcyk6YX07dGhpcy4kZ2V0PVtcIiRwYXJzZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiRzY2VcIixmdW5jdGlvbihjLGQsZSl7ZnVuY3Rpb24gZihmLGgsbCl7Zm9yKHZhciBuLHAscT0wLHM9W10sRj1mLmxlbmd0aCx1PSExLEE9W107cTxGOyktMSE9KG49Zi5pbmRleE9mKGIscSkpJiYtMSE9KHA9Zi5pbmRleE9mKGEsXG5uK2cpKT8ocSE9biYmcy5wdXNoKGYuc3Vic3RyaW5nKHEsbikpLHMucHVzaChxPWModT1mLnN1YnN0cmluZyhuK2cscCkpKSxxLmV4cD11LHE9cCtrLHU9ITApOihxIT1GJiZzLnB1c2goZi5zdWJzdHJpbmcocSkpLHE9Rik7KEY9cy5sZW5ndGgpfHwocy5wdXNoKFwiXCIpLEY9MSk7aWYobCYmMTxzLmxlbmd0aCl0aHJvdyB5YyhcIm5vY29uY2F0XCIsZik7aWYoIWh8fHUpcmV0dXJuIEEubGVuZ3RoPUYscT1mdW5jdGlvbihhKXt0cnl7Zm9yKHZhciBiPTAsYz1GLGc7YjxjO2IrKyl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YoZz1zW2JdKSlpZihnPWcoYSksZz1sP2UuZ2V0VHJ1c3RlZChsLGcpOmUudmFsdWVPZihnKSxudWxsPT1nKWc9XCJcIjtlbHNlIHN3aXRjaCh0eXBlb2YgZyl7Y2FzZSBcInN0cmluZ1wiOmJyZWFrO2Nhc2UgXCJudW1iZXJcIjpnPVwiXCIrZzticmVhaztkZWZhdWx0Omc9bmEoZyl9QVtiXT1nfXJldHVybiBBLmpvaW4oXCJcIil9Y2F0Y2goayl7YT15YyhcImludGVyclwiLGYsay50b1N0cmluZygpKSxcbmQoYSl9fSxxLmV4cD1mLHEucGFydHM9cyxxfXZhciBnPWIubGVuZ3RoLGs9YS5sZW5ndGg7Zi5zdGFydFN5bWJvbD1mdW5jdGlvbigpe3JldHVybiBifTtmLmVuZFN5bWJvbD1mdW5jdGlvbigpe3JldHVybiBhfTtyZXR1cm4gZn1dfWZ1bmN0aW9uIFRkKCl7dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiR3aW5kb3dcIixcIiRxXCIsZnVuY3Rpb24oYixhLGMpe2Z1bmN0aW9uIGQoZCxnLGssbSl7dmFyIGg9YS5zZXRJbnRlcnZhbCxsPWEuY2xlYXJJbnRlcnZhbCxuPWMuZGVmZXIoKSxwPW4ucHJvbWlzZSxxPTAscz15KG0pJiYhbTtrPXkoayk/azowO3AudGhlbihudWxsLG51bGwsZCk7cC4kJGludGVydmFsSWQ9aChmdW5jdGlvbigpe24ubm90aWZ5KHErKyk7MDxrJiZxPj1rJiYobi5yZXNvbHZlKHEpLGwocC4kJGludGVydmFsSWQpLGRlbGV0ZSBlW3AuJCRpbnRlcnZhbElkXSk7c3x8Yi4kYXBwbHkoKX0sZyk7ZVtwLiQkaW50ZXJ2YWxJZF09bjtyZXR1cm4gcH12YXIgZT17fTtkLmNhbmNlbD1cbmZ1bmN0aW9uKGIpe3JldHVybiBiJiZiLiQkaW50ZXJ2YWxJZCBpbiBlPyhlW2IuJCRpbnRlcnZhbElkXS5yZWplY3QoXCJjYW5jZWxlZFwiKSxhLmNsZWFySW50ZXJ2YWwoYi4kJGludGVydmFsSWQpLGRlbGV0ZSBlW2IuJCRpbnRlcnZhbElkXSwhMCk6ITF9O3JldHVybiBkfV19ZnVuY3Rpb24gYmQoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm57aWQ6XCJlbi11c1wiLE5VTUJFUl9GT1JNQVRTOntERUNJTUFMX1NFUDpcIi5cIixHUk9VUF9TRVA6XCIsXCIsUEFUVEVSTlM6W3ttaW5JbnQ6MSxtaW5GcmFjOjAsbWF4RnJhYzozLHBvc1ByZTpcIlwiLHBvc1N1ZjpcIlwiLG5lZ1ByZTpcIi1cIixuZWdTdWY6XCJcIixnU2l6ZTozLGxnU2l6ZTozfSx7bWluSW50OjEsbWluRnJhYzoyLG1heEZyYWM6Mixwb3NQcmU6XCJcXHUwMGE0XCIscG9zU3VmOlwiXCIsbmVnUHJlOlwiKFxcdTAwYTRcIixuZWdTdWY6XCIpXCIsZ1NpemU6MyxsZ1NpemU6M31dLENVUlJFTkNZX1NZTTpcIiRcIn0sREFURVRJTUVfRk9STUFUUzp7TU9OVEg6XCJKYW51YXJ5IEZlYnJ1YXJ5IE1hcmNoIEFwcmlsIE1heSBKdW5lIEp1bHkgQXVndXN0IFNlcHRlbWJlciBPY3RvYmVyIE5vdmVtYmVyIERlY2VtYmVyXCIuc3BsaXQoXCIgXCIpLFxuU0hPUlRNT05USDpcIkphbiBGZWIgTWFyIEFwciBNYXkgSnVuIEp1bCBBdWcgU2VwIE9jdCBOb3YgRGVjXCIuc3BsaXQoXCIgXCIpLERBWTpcIlN1bmRheSBNb25kYXkgVHVlc2RheSBXZWRuZXNkYXkgVGh1cnNkYXkgRnJpZGF5IFNhdHVyZGF5XCIuc3BsaXQoXCIgXCIpLFNIT1JUREFZOlwiU3VuIE1vbiBUdWUgV2VkIFRodSBGcmkgU2F0XCIuc3BsaXQoXCIgXCIpLEFNUE1TOltcIkFNXCIsXCJQTVwiXSxtZWRpdW06XCJNTU0gZCwgeSBoOm1tOnNzIGFcIixcInNob3J0XCI6XCJNL2QveXkgaDptbSBhXCIsZnVsbERhdGU6XCJFRUVFLCBNTU1NIGQsIHlcIixsb25nRGF0ZTpcIk1NTU0gZCwgeVwiLG1lZGl1bURhdGU6XCJNTU0gZCwgeVwiLHNob3J0RGF0ZTpcIk0vZC95eVwiLG1lZGl1bVRpbWU6XCJoOm1tOnNzIGFcIixzaG9ydFRpbWU6XCJoOm1tIGFcIn0scGx1cmFsQ2F0OmZ1bmN0aW9uKGIpe3JldHVybiAxPT09Yj9cIm9uZVwiOlwib3RoZXJcIn19fX1mdW5jdGlvbiBRYihiKXtiPWIuc3BsaXQoXCIvXCIpO2Zvcih2YXIgYT1iLmxlbmd0aDthLS07KWJbYV09XG5sYihiW2FdKTtyZXR1cm4gYi5qb2luKFwiL1wiKX1mdW5jdGlvbiB6YyhiLGEsYyl7Yj11YShiLGMpO2EuJCRwcm90b2NvbD1iLnByb3RvY29sO2EuJCRob3N0PWIuaG9zdG5hbWU7YS4kJHBvcnQ9VShiLnBvcnQpfHx6ZVtiLnByb3RvY29sXXx8bnVsbH1mdW5jdGlvbiBBYyhiLGEsYyl7dmFyIGQ9XCIvXCIhPT1iLmNoYXJBdCgwKTtkJiYoYj1cIi9cIitiKTtiPXVhKGIsYyk7YS4kJHBhdGg9ZGVjb2RlVVJJQ29tcG9uZW50KGQmJlwiL1wiPT09Yi5wYXRobmFtZS5jaGFyQXQoMCk/Yi5wYXRobmFtZS5zdWJzdHJpbmcoMSk6Yi5wYXRobmFtZSk7YS4kJHNlYXJjaD1lYyhiLnNlYXJjaCk7YS4kJGhhc2g9ZGVjb2RlVVJJQ29tcG9uZW50KGIuaGFzaCk7YS4kJHBhdGgmJlwiL1wiIT1hLiQkcGF0aC5jaGFyQXQoMCkmJihhLiQkcGF0aD1cIi9cIithLiQkcGF0aCl9ZnVuY3Rpb24gcmEoYixhKXtpZigwPT09YS5pbmRleE9mKGIpKXJldHVybiBhLnN1YnN0cihiLmxlbmd0aCl9ZnVuY3Rpb24gZWIoYil7dmFyIGE9XG5iLmluZGV4T2YoXCIjXCIpO3JldHVybi0xPT1hP2I6Yi5zdWJzdHIoMCxhKX1mdW5jdGlvbiBSYihiKXtyZXR1cm4gYi5zdWJzdHIoMCxlYihiKS5sYXN0SW5kZXhPZihcIi9cIikrMSl9ZnVuY3Rpb24gQmMoYixhKXt0aGlzLiQkaHRtbDU9ITA7YT1hfHxcIlwiO3ZhciBjPVJiKGIpO3pjKGIsdGhpcyxiKTt0aGlzLiQkcGFyc2U9ZnVuY3Rpb24oYSl7dmFyIGU9cmEoYyxhKTtpZighdihlKSl0aHJvdyBTYihcImlwdGhwcmZ4XCIsYSxjKTtBYyhlLHRoaXMsYik7dGhpcy4kJHBhdGh8fCh0aGlzLiQkcGF0aD1cIi9cIik7dGhpcy4kJGNvbXBvc2UoKX07dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYT1DYih0aGlzLiQkc2VhcmNoKSxiPXRoaXMuJCRoYXNoP1wiI1wiK2xiKHRoaXMuJCRoYXNoKTpcIlwiO3RoaXMuJCR1cmw9UWIodGhpcy4kJHBhdGgpKyhhP1wiP1wiK2E6XCJcIikrYjt0aGlzLiQkYWJzVXJsPWMrdGhpcy4kJHVybC5zdWJzdHIoMSl9O3RoaXMuJCRyZXdyaXRlPWZ1bmN0aW9uKGQpe3ZhciBlO1xuaWYoKGU9cmEoYixkKSkhPT10KXJldHVybiBkPWUsKGU9cmEoYSxlKSkhPT10P2MrKHJhKFwiL1wiLGUpfHxlKTpiK2Q7aWYoKGU9cmEoYyxkKSkhPT10KXJldHVybiBjK2U7aWYoYz09ZCtcIi9cIilyZXR1cm4gY319ZnVuY3Rpb24gVGIoYixhKXt2YXIgYz1SYihiKTt6YyhiLHRoaXMsYik7dGhpcy4kJHBhcnNlPWZ1bmN0aW9uKGQpe3ZhciBlPXJhKGIsZCl8fHJhKGMsZCksZT1cIiNcIj09ZS5jaGFyQXQoMCk/cmEoYSxlKTp0aGlzLiQkaHRtbDU/ZTpcIlwiO2lmKCF2KGUpKXRocm93IFNiKFwiaWhzaHByZnhcIixkLGEpO0FjKGUsdGhpcyxiKTtkPXRoaXMuJCRwYXRoO3ZhciBmPS9eXFwvW0EtWl06KFxcLy4qKS87MD09PWUuaW5kZXhPZihiKSYmKGU9ZS5yZXBsYWNlKGIsXCJcIikpO2YuZXhlYyhlKXx8KGQ9KGU9Zi5leGVjKGQpKT9lWzFdOmQpO3RoaXMuJCRwYXRoPWQ7dGhpcy4kJGNvbXBvc2UoKX07dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYz1DYih0aGlzLiQkc2VhcmNoKSxlPXRoaXMuJCRoYXNoP1xuXCIjXCIrbGIodGhpcy4kJGhhc2gpOlwiXCI7dGhpcy4kJHVybD1RYih0aGlzLiQkcGF0aCkrKGM/XCI/XCIrYzpcIlwiKStlO3RoaXMuJCRhYnNVcmw9YisodGhpcy4kJHVybD9hK3RoaXMuJCR1cmw6XCJcIil9O3RoaXMuJCRyZXdyaXRlPWZ1bmN0aW9uKGEpe2lmKGViKGIpPT1lYihhKSlyZXR1cm4gYX19ZnVuY3Rpb24gVWIoYixhKXt0aGlzLiQkaHRtbDU9ITA7VGIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBjPVJiKGIpO3RoaXMuJCRyZXdyaXRlPWZ1bmN0aW9uKGQpe3ZhciBlO2lmKGI9PWViKGQpKXJldHVybiBkO2lmKGU9cmEoYyxkKSlyZXR1cm4gYithK2U7aWYoYz09PWQrXCIvXCIpcmV0dXJuIGN9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGM9Q2IodGhpcy4kJHNlYXJjaCksZT10aGlzLiQkaGFzaD9cIiNcIitsYih0aGlzLiQkaGFzaCk6XCJcIjt0aGlzLiQkdXJsPVFiKHRoaXMuJCRwYXRoKSsoYz9cIj9cIitjOlwiXCIpK2U7dGhpcy4kJGFic1VybD1iK2ErdGhpcy4kJHVybH19ZnVuY3Rpb24gdGIoYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbYl19fVxuZnVuY3Rpb24gQ2MoYixhKXtyZXR1cm4gZnVuY3Rpb24oYyl7aWYoeChjKSlyZXR1cm4gdGhpc1tiXTt0aGlzW2JdPWEoYyk7dGhpcy4kJGNvbXBvc2UoKTtyZXR1cm4gdGhpc319ZnVuY3Rpb24gV2QoKXt2YXIgYj1cIlwiLGE9ITE7dGhpcy5oYXNoUHJlZml4PWZ1bmN0aW9uKGEpe3JldHVybiB5KGEpPyhiPWEsdGhpcyk6Yn07dGhpcy5odG1sNU1vZGU9ZnVuY3Rpb24oYil7cmV0dXJuIHkoYik/KGE9Yix0aGlzKTphfTt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJGJyb3dzZXJcIixcIiRzbmlmZmVyXCIsXCIkcm9vdEVsZW1lbnRcIixmdW5jdGlvbihjLGQsZSxmKXtmdW5jdGlvbiBnKGEpe2MuJGJyb2FkY2FzdChcIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcIixrLmFic1VybCgpLGEpfXZhciBrLG0saD1kLmJhc2VIcmVmKCksbD1kLnVybCgpLG47YT8obj1sLnN1YnN0cmluZygwLGwuaW5kZXhPZihcIi9cIixsLmluZGV4T2YoXCIvL1wiKSsyKSkrKGh8fFwiL1wiKSxtPWUuaGlzdG9yeT9CYzpVYik6KG49XG5lYihsKSxtPVRiKTtrPW5ldyBtKG4sXCIjXCIrYik7ay4kJHBhcnNlKGsuJCRyZXdyaXRlKGwpKTt2YXIgcD0vXlxccyooamF2YXNjcmlwdHxtYWlsdG8pOi9pO2Yub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2lmKCFhLmN0cmxLZXkmJiFhLm1ldGFLZXkmJjIhPWEud2hpY2gpe2Zvcih2YXIgZT13KGEudGFyZ2V0KTtcImFcIiE9PUsoZVswXS5ub2RlTmFtZSk7KWlmKGVbMF09PT1mWzBdfHwhKGU9ZS5wYXJlbnQoKSlbMF0pcmV0dXJuO3ZhciBnPWUucHJvcChcImhyZWZcIik7VChnKSYmXCJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXVwiPT09Zy50b1N0cmluZygpJiYoZz11YShnLmFuaW1WYWwpLmhyZWYpO2lmKCFwLnRlc3QoZykpe2lmKG09PT1VYil7dmFyIGg9ZS5hdHRyKFwiaHJlZlwiKXx8ZS5hdHRyKFwieGxpbms6aHJlZlwiKTtpZihoJiYwPmguaW5kZXhPZihcIjovL1wiKSlpZihnPVwiI1wiK2IsXCIvXCI9PWhbMF0pZz1uK2craDtlbHNlIGlmKFwiI1wiPT1oWzBdKWc9bitnKyhrLnBhdGgoKXx8XCIvXCIpK2g7XG5lbHNle3ZhciBsPWsucGF0aCgpLnNwbGl0KFwiL1wiKSxoPWguc3BsaXQoXCIvXCIpOzIhPT1sLmxlbmd0aHx8bFsxXXx8KGwubGVuZ3RoPTEpO2Zvcih2YXIgcT0wO3E8aC5sZW5ndGg7cSsrKVwiLlwiIT1oW3FdJiYoXCIuLlwiPT1oW3FdP2wucG9wKCk6aFtxXS5sZW5ndGgmJmwucHVzaChoW3FdKSk7Zz1uK2crbC5qb2luKFwiL1wiKX19bD1rLiQkcmV3cml0ZShnKTtnJiYoIWUuYXR0cihcInRhcmdldFwiKSYmbCYmIWEuaXNEZWZhdWx0UHJldmVudGVkKCkpJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGwhPWQudXJsKCkmJihrLiQkcGFyc2UobCksYy4kYXBwbHkoKSxXLmFuZ3VsYXJbXCJmZi02ODQyMDgtcHJldmVudERlZmF1bHRcIl09ITApKX19fSk7ay5hYnNVcmwoKSE9bCYmZC51cmwoay5hYnNVcmwoKSwhMCk7ZC5vblVybENoYW5nZShmdW5jdGlvbihhKXtrLmFic1VybCgpIT1hJiYoYy4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7dmFyIGI9ay5hYnNVcmwoKTtrLiQkcGFyc2UoYSk7Yy4kYnJvYWRjYXN0KFwiJGxvY2F0aW9uQ2hhbmdlU3RhcnRcIixcbmEsYikuZGVmYXVsdFByZXZlbnRlZD8oay4kJHBhcnNlKGIpLGQudXJsKGIpKTpnKGIpfSksYy4kJHBoYXNlfHxjLiRkaWdlc3QoKSl9KTt2YXIgcT0wO2MuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGE9ZC51cmwoKSxiPWsuJCRyZXBsYWNlO3EmJmE9PWsuYWJzVXJsKCl8fChxKyssYy4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7Yy4kYnJvYWRjYXN0KFwiJGxvY2F0aW9uQ2hhbmdlU3RhcnRcIixrLmFic1VybCgpLGEpLmRlZmF1bHRQcmV2ZW50ZWQ/ay4kJHBhcnNlKGEpOihkLnVybChrLmFic1VybCgpLGIpLGcoYSkpfSkpO2suJCRyZXBsYWNlPSExO3JldHVybiBxfSk7cmV0dXJuIGt9XX1mdW5jdGlvbiBYZCgpe3ZhciBiPSEwLGE9dGhpczt0aGlzLmRlYnVnRW5hYmxlZD1mdW5jdGlvbihhKXtyZXR1cm4geShhKT8oYj1hLHRoaXMpOmJ9O3RoaXMuJGdldD1bXCIkd2luZG93XCIsZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZChhKXthIGluc3RhbmNlb2YgRXJyb3ImJihhLnN0YWNrP2E9YS5tZXNzYWdlJiZcbi0xPT09YS5zdGFjay5pbmRleE9mKGEubWVzc2FnZSk/XCJFcnJvcjogXCIrYS5tZXNzYWdlK1wiXFxuXCIrYS5zdGFjazphLnN0YWNrOmEuc291cmNlVVJMJiYoYT1hLm1lc3NhZ2UrXCJcXG5cIithLnNvdXJjZVVSTCtcIjpcIithLmxpbmUpKTtyZXR1cm4gYX1mdW5jdGlvbiBlKGEpe3ZhciBiPWMuY29uc29sZXx8e30sZT1iW2FdfHxiLmxvZ3x8RTthPSExO3RyeXthPSEhZS5hcHBseX1jYXRjaChtKXt9cmV0dXJuIGE/ZnVuY3Rpb24oKXt2YXIgYT1bXTtyKGFyZ3VtZW50cyxmdW5jdGlvbihiKXthLnB1c2goZChiKSl9KTtyZXR1cm4gZS5hcHBseShiLGEpfTpmdW5jdGlvbihhLGIpe2UoYSxudWxsPT1iP1wiXCI6Yil9fXJldHVybntsb2c6ZShcImxvZ1wiKSxpbmZvOmUoXCJpbmZvXCIpLHdhcm46ZShcIndhcm5cIiksZXJyb3I6ZShcImVycm9yXCIpLGRlYnVnOmZ1bmN0aW9uKCl7dmFyIGM9ZShcImRlYnVnXCIpO3JldHVybiBmdW5jdGlvbigpe2ImJmMuYXBwbHkoYSxhcmd1bWVudHMpfX0oKX19XX1mdW5jdGlvbiBrYShiLFxuYSl7aWYoXCJfX2RlZmluZUdldHRlcl9fXCI9PT1ifHxcIl9fZGVmaW5lU2V0dGVyX19cIj09PWJ8fFwiX19sb29rdXBHZXR0ZXJfX1wiPT09Ynx8XCJfX2xvb2t1cFNldHRlcl9fXCI9PT1ifHxcIl9fcHJvdG9fX1wiPT09Yil0aHJvdyBsYShcImlzZWNmbGRcIixhKTtyZXR1cm4gYn1mdW5jdGlvbiB2YShiLGEpe2lmKGIpe2lmKGIuY29uc3RydWN0b3I9PT1iKXRocm93IGxhKFwiaXNlY2ZuXCIsYSk7aWYoYi5kb2N1bWVudCYmYi5sb2NhdGlvbiYmYi5hbGVydCYmYi5zZXRJbnRlcnZhbCl0aHJvdyBsYShcImlzZWN3aW5kb3dcIixhKTtpZihiLmNoaWxkcmVuJiYoYi5ub2RlTmFtZXx8Yi5wcm9wJiZiLmF0dHImJmIuZmluZCkpdGhyb3cgbGEoXCJpc2VjZG9tXCIsYSk7aWYoYj09PU9iamVjdCl0aHJvdyBsYShcImlzZWNvYmpcIixhKTt9cmV0dXJuIGJ9ZnVuY3Rpb24gdWIoYixhLGMsZCxlKXt2YShiLGQpO2U9ZXx8e307YT1hLnNwbGl0KFwiLlwiKTtmb3IodmFyIGYsZz0wOzE8YS5sZW5ndGg7ZysrKXtmPWthKGEuc2hpZnQoKSxcbmQpO3ZhciBrPXZhKGJbZl0sZCk7a3x8KGs9e30sYltmXT1rKTtiPWs7Yi50aGVuJiZlLnVud3JhcFByb21pc2VzJiYod2EoZCksXCIkJHZcImluIGJ8fGZ1bmN0aW9uKGEpe2EudGhlbihmdW5jdGlvbihiKXthLiQkdj1ifSl9KGIpLGIuJCR2PT09dCYmKGIuJCR2PXt9KSxiPWIuJCR2KX1mPWthKGEuc2hpZnQoKSxkKTt2YShiW2ZdLGQpO3JldHVybiBiW2ZdPWN9ZnVuY3Rpb24gRGMoYixhLGMsZCxlLGYsZyl7a2EoYixmKTtrYShhLGYpO2thKGMsZik7a2EoZCxmKTtrYShlLGYpO3JldHVybiBnLnVud3JhcFByb21pc2VzP2Z1bmN0aW9uKGcsbSl7dmFyIGg9bSYmbS5oYXNPd25Qcm9wZXJ0eShiKT9tOmcsbDtpZihudWxsPT1oKXJldHVybiBoOyhoPWhbYl0pJiZoLnRoZW4mJih3YShmKSxcIiQkdlwiaW4gaHx8KGw9aCxsLiQkdj10LGwudGhlbihmdW5jdGlvbihhKXtsLiQkdj1hfSkpLGg9aC4kJHYpO2lmKCFhKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7KGg9aFthXSkmJmgudGhlbiYmXG4od2EoZiksXCIkJHZcImluIGh8fChsPWgsbC4kJHY9dCxsLnRoZW4oZnVuY3Rpb24oYSl7bC4kJHY9YX0pKSxoPWguJCR2KTtpZighYylyZXR1cm4gaDtpZihudWxsPT1oKXJldHVybiB0OyhoPWhbY10pJiZoLnRoZW4mJih3YShmKSxcIiQkdlwiaW4gaHx8KGw9aCxsLiQkdj10LGwudGhlbihmdW5jdGlvbihhKXtsLiQkdj1hfSkpLGg9aC4kJHYpO2lmKCFkKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7KGg9aFtkXSkmJmgudGhlbiYmKHdhKGYpLFwiJCR2XCJpbiBofHwobD1oLGwuJCR2PXQsbC50aGVuKGZ1bmN0aW9uKGEpe2wuJCR2PWF9KSksaD1oLiQkdik7aWYoIWUpcmV0dXJuIGg7aWYobnVsbD09aClyZXR1cm4gdDsoaD1oW2VdKSYmaC50aGVuJiYod2EoZiksXCIkJHZcImluIGh8fChsPWgsbC4kJHY9dCxsLnRoZW4oZnVuY3Rpb24oYSl7bC4kJHY9YX0pKSxoPWguJCR2KTtyZXR1cm4gaH06ZnVuY3Rpb24oZixnKXt2YXIgaD1nJiZnLmhhc093blByb3BlcnR5KGIpP2c6ZjtpZihudWxsPT1cbmgpcmV0dXJuIGg7aD1oW2JdO2lmKCFhKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7aD1oW2FdO2lmKCFjKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7aD1oW2NdO2lmKCFkKXJldHVybiBoO2lmKG51bGw9PWgpcmV0dXJuIHQ7aD1oW2RdO3JldHVybiBlP251bGw9PWg/dDpoPWhbZV06aH19ZnVuY3Rpb24gRWMoYixhLGMpe2lmKFZiLmhhc093blByb3BlcnR5KGIpKXJldHVybiBWYltiXTt2YXIgZD1iLnNwbGl0KFwiLlwiKSxlPWQubGVuZ3RoLGY7aWYoYS5jc3ApZj02PmU/RGMoZFswXSxkWzFdLGRbMl0sZFszXSxkWzRdLGMsYSk6ZnVuY3Rpb24oYixmKXt2YXIgZz0wLGs7ZG8gaz1EYyhkW2crK10sZFtnKytdLGRbZysrXSxkW2crK10sZFtnKytdLGMsYSkoYixmKSxmPXQsYj1rO3doaWxlKGc8ZSk7cmV0dXJuIGt9O2Vsc2V7dmFyIGc9XCJ2YXIgcDtcXG5cIjtyKGQsZnVuY3Rpb24oYixkKXtrYShiLGMpO2crPVwiaWYocyA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xcbnM9XCIrXG4oZD9cInNcIjonKChrJiZrLmhhc093blByb3BlcnR5KFwiJytiKydcIikpP2s6cyknKSsnW1wiJytiKydcIl07XFxuJysoYS51bndyYXBQcm9taXNlcz8naWYgKHMgJiYgcy50aGVuKSB7XFxuIHB3KFwiJytjLnJlcGxhY2UoLyhbXCJcXHJcXG5dKS9nLFwiXFxcXCQxXCIpKydcIik7XFxuIGlmICghKFwiJCR2XCIgaW4gcykpIHtcXG4gcD1zO1xcbiBwLiQkdiA9IHVuZGVmaW5lZDtcXG4gcC50aGVuKGZ1bmN0aW9uKHYpIHtwLiQkdj12O30pO1xcbn1cXG4gcz1zLiQkdlxcbn1cXG4nOlwiXCIpfSk7dmFyIGc9ZytcInJldHVybiBzO1wiLGs9bmV3IEZ1bmN0aW9uKFwic1wiLFwia1wiLFwicHdcIixnKTtrLnRvU3RyaW5nPWJhKGcpO2Y9YS51bndyYXBQcm9taXNlcz9mdW5jdGlvbihhLGIpe3JldHVybiBrKGEsYix3YSl9Omt9XCJoYXNPd25Qcm9wZXJ0eVwiIT09YiYmKFZiW2JdPWYpO3JldHVybiBmfWZ1bmN0aW9uIFlkKCl7dmFyIGI9e30sYT17Y3NwOiExLHVud3JhcFByb21pc2VzOiExLGxvZ1Byb21pc2VXYXJuaW5nczohMH07dGhpcy51bndyYXBQcm9taXNlcz1cbmZ1bmN0aW9uKGIpe3JldHVybiB5KGIpPyhhLnVud3JhcFByb21pc2VzPSEhYix0aGlzKTphLnVud3JhcFByb21pc2VzfTt0aGlzLmxvZ1Byb21pc2VXYXJuaW5ncz1mdW5jdGlvbihiKXtyZXR1cm4geShiKT8oYS5sb2dQcm9taXNlV2FybmluZ3M9Yix0aGlzKTphLmxvZ1Byb21pc2VXYXJuaW5nc307dGhpcy4kZ2V0PVtcIiRmaWx0ZXJcIixcIiRzbmlmZmVyXCIsXCIkbG9nXCIsZnVuY3Rpb24oYyxkLGUpe2EuY3NwPWQuY3NwO3dhPWZ1bmN0aW9uKGIpe2EubG9nUHJvbWlzZVdhcm5pbmdzJiYhRmMuaGFzT3duUHJvcGVydHkoYikmJihGY1tiXT0hMCxlLndhcm4oXCJbJHBhcnNlXSBQcm9taXNlIGZvdW5kIGluIHRoZSBleHByZXNzaW9uIGBcIitiK1wiYC4gQXV0b21hdGljIHVud3JhcHBpbmcgb2YgcHJvbWlzZXMgaW4gQW5ndWxhciBleHByZXNzaW9ucyBpcyBkZXByZWNhdGVkLlwiKSl9O3JldHVybiBmdW5jdGlvbihkKXt2YXIgZTtzd2l0Y2godHlwZW9mIGQpe2Nhc2UgXCJzdHJpbmdcIjppZihiLmhhc093blByb3BlcnR5KGQpKXJldHVybiBiW2RdO1xuZT1uZXcgV2IoYSk7ZT0obmV3IGZiKGUsYyxhKSkucGFyc2UoZCk7XCJoYXNPd25Qcm9wZXJ0eVwiIT09ZCYmKGJbZF09ZSk7cmV0dXJuIGU7Y2FzZSBcImZ1bmN0aW9uXCI6cmV0dXJuIGQ7ZGVmYXVsdDpyZXR1cm4gRX19fV19ZnVuY3Rpb24gJGQoKXt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihiLGEpe3JldHVybiBBZShmdW5jdGlvbihhKXtiLiRldmFsQXN5bmMoYSl9LGEpfV19ZnVuY3Rpb24gQWUoYixhKXtmdW5jdGlvbiBjKGEpe3JldHVybiBhfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGcoYSl9dmFyIGU9ZnVuY3Rpb24oKXt2YXIgZz1bXSxoLGw7cmV0dXJuIGw9e3Jlc29sdmU6ZnVuY3Rpb24oYSl7aWYoZyl7dmFyIGM9ZztnPXQ7aD1mKGEpO2MubGVuZ3RoJiZiKGZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MCxkPWMubGVuZ3RoO2I8ZDtiKyspYT1jW2JdLGgudGhlbihhWzBdLGFbMV0sYVsyXSl9KX19LHJlamVjdDpmdW5jdGlvbihhKXtsLnJlc29sdmUoayhhKSl9LFxubm90aWZ5OmZ1bmN0aW9uKGEpe2lmKGcpe3ZhciBjPWc7Zy5sZW5ndGgmJmIoZnVuY3Rpb24oKXtmb3IodmFyIGIsZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyliPWNbZF0sYlsyXShhKX0pfX0scHJvbWlzZTp7dGhlbjpmdW5jdGlvbihiLGYsayl7dmFyIGw9ZSgpLEY9ZnVuY3Rpb24oZCl7dHJ5e2wucmVzb2x2ZSgoUChiKT9iOmMpKGQpKX1jYXRjaChlKXtsLnJlamVjdChlKSxhKGUpfX0sdT1mdW5jdGlvbihiKXt0cnl7bC5yZXNvbHZlKChQKGYpP2Y6ZCkoYikpfWNhdGNoKGMpe2wucmVqZWN0KGMpLGEoYyl9fSxBPWZ1bmN0aW9uKGIpe3RyeXtsLm5vdGlmeSgoUChrKT9rOmMpKGIpKX1jYXRjaChkKXthKGQpfX07Zz9nLnB1c2goW0YsdSxBXSk6aC50aGVuKEYsdSxBKTtyZXR1cm4gbC5wcm9taXNlfSxcImNhdGNoXCI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudGhlbihudWxsLGEpfSxcImZpbmFsbHlcIjpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyl7dmFyIGQ9ZSgpO2M/ZC5yZXNvbHZlKGEpOlxuZC5yZWplY3QoYSk7cmV0dXJuIGQucHJvbWlzZX1mdW5jdGlvbiBkKGUsZil7dmFyIGc9bnVsbDt0cnl7Zz0oYXx8YykoKX1jYXRjaChrKXtyZXR1cm4gYihrLCExKX1yZXR1cm4gZyYmUChnLnRoZW4pP2cudGhlbihmdW5jdGlvbigpe3JldHVybiBiKGUsZil9LGZ1bmN0aW9uKGEpe3JldHVybiBiKGEsITEpfSk6YihlLGYpfXJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSwhMCl9LGZ1bmN0aW9uKGEpe3JldHVybiBkKGEsITEpfSl9fX19LGY9ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJlAoYS50aGVuKT9hOnt0aGVuOmZ1bmN0aW9uKGMpe3ZhciBkPWUoKTtiKGZ1bmN0aW9uKCl7ZC5yZXNvbHZlKGMoYSkpfSk7cmV0dXJuIGQucHJvbWlzZX19fSxnPWZ1bmN0aW9uKGEpe3ZhciBiPWUoKTtiLnJlamVjdChhKTtyZXR1cm4gYi5wcm9taXNlfSxrPWZ1bmN0aW9uKGMpe3JldHVybnt0aGVuOmZ1bmN0aW9uKGYsZyl7dmFyIGs9ZSgpO2IoZnVuY3Rpb24oKXt0cnl7ay5yZXNvbHZlKChQKGcpP1xuZzpkKShjKSl9Y2F0Y2goYil7ay5yZWplY3QoYiksYShiKX19KTtyZXR1cm4gay5wcm9taXNlfX19O3JldHVybntkZWZlcjplLHJlamVjdDpnLHdoZW46ZnVuY3Rpb24oayxoLGwsbil7dmFyIHA9ZSgpLHEscz1mdW5jdGlvbihiKXt0cnl7cmV0dXJuKFAoaCk/aDpjKShiKX1jYXRjaChkKXtyZXR1cm4gYShkKSxnKGQpfX0sRj1mdW5jdGlvbihiKXt0cnl7cmV0dXJuKFAobCk/bDpkKShiKX1jYXRjaChjKXtyZXR1cm4gYShjKSxnKGMpfX0sdT1mdW5jdGlvbihiKXt0cnl7cmV0dXJuKFAobik/bjpjKShiKX1jYXRjaChkKXthKGQpfX07YihmdW5jdGlvbigpe2YoaykudGhlbihmdW5jdGlvbihhKXtxfHwocT0hMCxwLnJlc29sdmUoZihhKS50aGVuKHMsRix1KSkpfSxmdW5jdGlvbihhKXtxfHwocT0hMCxwLnJlc29sdmUoRihhKSkpfSxmdW5jdGlvbihhKXtxfHxwLm5vdGlmeSh1KGEpKX0pfSk7cmV0dXJuIHAucHJvbWlzZX0sYWxsOmZ1bmN0aW9uKGEpe3ZhciBiPWUoKSxjPTAsZD1KKGEpP1xuW106e307cihhLGZ1bmN0aW9uKGEsZSl7YysrO2YoYSkudGhlbihmdW5jdGlvbihhKXtkLmhhc093blByb3BlcnR5KGUpfHwoZFtlXT1hLC0tY3x8Yi5yZXNvbHZlKGQpKX0sZnVuY3Rpb24oYSl7ZC5oYXNPd25Qcm9wZXJ0eShlKXx8Yi5yZWplY3QoYSl9KX0pOzA9PT1jJiZiLnJlc29sdmUoZCk7cmV0dXJuIGIucHJvbWlzZX19fWZ1bmN0aW9uIGdlKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYixhKXt2YXIgYz1iLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8Yi53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGIubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lLGQ9Yi5jYW5jZWxBbmltYXRpb25GcmFtZXx8Yi53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8Yi5tb3pDYW5jZWxBbmltYXRpb25GcmFtZXx8Yi53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUsZT0hIWMsZj1lP2Z1bmN0aW9uKGEpe3ZhciBiPWMoYSk7cmV0dXJuIGZ1bmN0aW9uKCl7ZChiKX19OlxuZnVuY3Rpb24oYil7dmFyIGM9YShiLDE2LjY2LCExKTtyZXR1cm4gZnVuY3Rpb24oKXthLmNhbmNlbChjKX19O2Yuc3VwcG9ydGVkPWU7cmV0dXJuIGZ9XX1mdW5jdGlvbiBaZCgpe3ZhciBiPTEwLGE9QyhcIiRyb290U2NvcGVcIiksYz1udWxsO3RoaXMuZGlnZXN0VHRsPWZ1bmN0aW9uKGEpe2FyZ3VtZW50cy5sZW5ndGgmJihiPWEpO3JldHVybiBifTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJHBhcnNlXCIsXCIkYnJvd3NlclwiLGZ1bmN0aW9uKGQsZSxmLGcpe2Z1bmN0aW9uIGsoKXt0aGlzLiRpZD1oYigpO3RoaXMuJCRwaGFzZT10aGlzLiRwYXJlbnQ9dGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpc1tcInRoaXNcIl09dGhpcy4kcm9vdD10aGlzO3RoaXMuJCRkZXN0cm95ZWQ9ITE7dGhpcy4kJGFzeW5jUXVldWU9W107dGhpcy4kJHBvc3REaWdlc3RRdWV1ZT1cbltdO3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kJGlzb2xhdGVCaW5kaW5ncz17fX1mdW5jdGlvbiBtKGIpe2lmKHAuJCRwaGFzZSl0aHJvdyBhKFwiaW5wcm9nXCIscC4kJHBoYXNlKTtwLiQkcGhhc2U9Yn1mdW5jdGlvbiBoKGEsYil7dmFyIGM9ZihhKTtXYShjLGIpO3JldHVybiBjfWZ1bmN0aW9uIGwoYSxiLGMpe2RvIGEuJCRsaXN0ZW5lckNvdW50W2NdLT1iLDA9PT1hLiQkbGlzdGVuZXJDb3VudFtjXSYmZGVsZXRlIGEuJCRsaXN0ZW5lckNvdW50W2NdO3doaWxlKGE9YS4kcGFyZW50KX1mdW5jdGlvbiBuKCl7fWsucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjprLCRuZXc6ZnVuY3Rpb24oYSl7YT8oYT1uZXcgayxhLiRyb290PXRoaXMuJHJvb3QsYS4kJGFzeW5jUXVldWU9dGhpcy4kJGFzeW5jUXVldWUsYS4kJHBvc3REaWdlc3RRdWV1ZT10aGlzLiQkcG9zdERpZ2VzdFF1ZXVlKToodGhpcy4kJGNoaWxkU2NvcGVDbGFzc3x8KHRoaXMuJCRjaGlsZFNjb3BlQ2xhc3M9XG5mdW5jdGlvbigpe3RoaXMuJCR3YXRjaGVycz10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpcy4kJGxpc3RlbmVycz17fTt0aGlzLiQkbGlzdGVuZXJDb3VudD17fTt0aGlzLiRpZD1oYigpO3RoaXMuJCRjaGlsZFNjb3BlQ2xhc3M9bnVsbH0sdGhpcy4kJGNoaWxkU2NvcGVDbGFzcy5wcm90b3R5cGU9dGhpcyksYT1uZXcgdGhpcy4kJGNoaWxkU2NvcGVDbGFzcyk7YVtcInRoaXNcIl09YTthLiRwYXJlbnQ9dGhpczthLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkVGFpbDt0aGlzLiQkY2hpbGRIZWFkP3RoaXMuJCRjaGlsZFRhaWw9dGhpcy4kJGNoaWxkVGFpbC4kJG5leHRTaWJsaW5nPWE6dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPWE7cmV0dXJuIGF9LCR3YXRjaDpmdW5jdGlvbihhLGIsZCl7dmFyIGU9aChhLFwid2F0Y2hcIiksZj10aGlzLiQkd2F0Y2hlcnMsZz17Zm46YixsYXN0Om4sZ2V0OmUsZXhwOmEsXG5lcTohIWR9O2M9bnVsbDtpZighUChiKSl7dmFyIGs9aChifHxFLFwibGlzdGVuZXJcIik7Zy5mbj1mdW5jdGlvbihhLGIsYyl7ayhjKX19aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJmUuY29uc3RhbnQpe3ZhciBsPWcuZm47Zy5mbj1mdW5jdGlvbihhLGIsYyl7bC5jYWxsKHRoaXMsYSxiLGMpO1NhKGYsZyl9fWZ8fChmPXRoaXMuJCR3YXRjaGVycz1bXSk7Zi51bnNoaWZ0KGcpO3JldHVybiBmdW5jdGlvbigpe1NhKGYsZyk7Yz1udWxsfX0sJHdhdGNoQ29sbGVjdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZCxlLGcsaz0xPGIubGVuZ3RoLGg9MCxsPWYoYSksbT1bXSxwPXt9LG49ITAscj0wO3JldHVybiB0aGlzLiR3YXRjaChmdW5jdGlvbigpe2Q9bChjKTt2YXIgYSxiLGY7aWYoVChkKSlpZihQYShkKSlmb3IoZSE9PW0mJihlPW0scj1lLmxlbmd0aD0wLGgrKyksYT1kLmxlbmd0aCxyIT09YSYmKGgrKyxlLmxlbmd0aD1yPWEpLGI9MDtiPGE7YisrKWY9ZVtiXSE9PWVbYl0mJmRbYl0hPT1cbmRbYl0sZnx8ZVtiXT09PWRbYl18fChoKyssZVtiXT1kW2JdKTtlbHNle2UhPT1wJiYoZT1wPXt9LHI9MCxoKyspO2E9MDtmb3IoYiBpbiBkKWQuaGFzT3duUHJvcGVydHkoYikmJihhKyssZS5oYXNPd25Qcm9wZXJ0eShiKT8oZj1lW2JdIT09ZVtiXSYmZFtiXSE9PWRbYl0sZnx8ZVtiXT09PWRbYl18fChoKyssZVtiXT1kW2JdKSk6KHIrKyxlW2JdPWRbYl0saCsrKSk7aWYocj5hKWZvcihiIGluIGgrKyxlKWUuaGFzT3duUHJvcGVydHkoYikmJiFkLmhhc093blByb3BlcnR5KGIpJiYoci0tLGRlbGV0ZSBlW2JdKX1lbHNlIGUhPT1kJiYoZT1kLGgrKyk7cmV0dXJuIGh9LGZ1bmN0aW9uKCl7bj8obj0hMSxiKGQsZCxjKSk6YihkLGcsYyk7aWYoaylpZihUKGQpKWlmKFBhKGQpKXtnPUFycmF5KGQubGVuZ3RoKTtmb3IodmFyIGE9MDthPGQubGVuZ3RoO2ErKylnW2FdPWRbYV19ZWxzZSBmb3IoYSBpbiBnPXt9LGQpa2IuY2FsbChkLGEpJiYoZ1thXT1kW2FdKTtlbHNlIGc9ZH0pfSwkZGlnZXN0OmZ1bmN0aW9uKCl7dmFyIGQsXG5mLGssaCxsPXRoaXMuJCRhc3luY1F1ZXVlLHI9dGhpcy4kJHBvc3REaWdlc3RRdWV1ZSxSLHosdD1iLEwsTz1bXSx3LEIsSTttKFwiJGRpZ2VzdFwiKTtnLiQkY2hlY2tVcmxDaGFuZ2UoKTtjPW51bGw7ZG97ej0hMTtmb3IoTD10aGlzO2wubGVuZ3RoOyl7dHJ5e0k9bC5zaGlmdCgpLEkuc2NvcGUuJGV2YWwoSS5leHByZXNzaW9uKX1jYXRjaChIKXtwLiQkcGhhc2U9bnVsbCxlKEgpfWM9bnVsbH1hOmRve2lmKGg9TC4kJHdhdGNoZXJzKWZvcihSPWgubGVuZ3RoO1ItLTspdHJ5e2lmKGQ9aFtSXSlpZigoZj1kLmdldChMKSkhPT0oaz1kLmxhc3QpJiYhKGQuZXE/QWEoZixrKTpcIm51bWJlclwiPT09dHlwZW9mIGYmJlwibnVtYmVyXCI9PT10eXBlb2YgayYmaXNOYU4oZikmJmlzTmFOKGspKSl6PSEwLGM9ZCxkLmxhc3Q9ZC5lcT9IYShmLG51bGwpOmYsZC5mbihmLGs9PT1uP2Y6ayxMKSw1PnQmJih3PTQtdCxPW3ddfHwoT1t3XT1bXSksQj1QKGQuZXhwKT9cImZuOiBcIisoZC5leHAubmFtZXx8ZC5leHAudG9TdHJpbmcoKSk6XG5kLmV4cCxCKz1cIjsgbmV3VmFsOiBcIituYShmKStcIjsgb2xkVmFsOiBcIituYShrKSxPW3ddLnB1c2goQikpO2Vsc2UgaWYoZD09PWMpe3o9ITE7YnJlYWsgYX19Y2F0Y2goeSl7cC4kJHBoYXNlPW51bGwsZSh5KX1pZighKGg9TC4kJGNoaWxkSGVhZHx8TCE9PXRoaXMmJkwuJCRuZXh0U2libGluZykpZm9yKDtMIT09dGhpcyYmIShoPUwuJCRuZXh0U2libGluZyk7KUw9TC4kcGFyZW50fXdoaWxlKEw9aCk7aWYoKHp8fGwubGVuZ3RoKSYmIXQtLSl0aHJvdyBwLiQkcGhhc2U9bnVsbCxhKFwiaW5mZGlnXCIsYixuYShPKSk7fXdoaWxlKHp8fGwubGVuZ3RoKTtmb3IocC4kJHBoYXNlPW51bGw7ci5sZW5ndGg7KXRyeXtyLnNoaWZ0KCkoKX1jYXRjaCh2KXtlKHYpfX0sJGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZighdGhpcy4kJGRlc3Ryb3llZCl7dmFyIGE9dGhpcy4kcGFyZW50O3RoaXMuJGJyb2FkY2FzdChcIiRkZXN0cm95XCIpO3RoaXMuJCRkZXN0cm95ZWQ9ITA7dGhpcyE9PXAmJihyKHRoaXMuJCRsaXN0ZW5lckNvdW50LFxuQmIobnVsbCxsLHRoaXMpKSxhLiQkY2hpbGRIZWFkPT10aGlzJiYoYS4kJGNoaWxkSGVhZD10aGlzLiQkbmV4dFNpYmxpbmcpLGEuJCRjaGlsZFRhaWw9PXRoaXMmJihhLiQkY2hpbGRUYWlsPXRoaXMuJCRwcmV2U2libGluZyksdGhpcy4kJHByZXZTaWJsaW5nJiYodGhpcy4kJHByZXZTaWJsaW5nLiQkbmV4dFNpYmxpbmc9dGhpcy4kJG5leHRTaWJsaW5nKSx0aGlzLiQkbmV4dFNpYmxpbmcmJih0aGlzLiQkbmV4dFNpYmxpbmcuJCRwcmV2U2libGluZz10aGlzLiQkcHJldlNpYmxpbmcpLHRoaXMuJHBhcmVudD10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD10aGlzLiRyb290PW51bGwsdGhpcy4kJGxpc3RlbmVycz17fSx0aGlzLiQkd2F0Y2hlcnM9dGhpcy4kJGFzeW5jUXVldWU9dGhpcy4kJHBvc3REaWdlc3RRdWV1ZT1bXSx0aGlzLiRkZXN0cm95PXRoaXMuJGRpZ2VzdD10aGlzLiRhcHBseT1FLHRoaXMuJG9uPVxudGhpcy4kd2F0Y2g9ZnVuY3Rpb24oKXtyZXR1cm4gRX0pfX0sJGV2YWw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihhKSh0aGlzLGIpfSwkZXZhbEFzeW5jOmZ1bmN0aW9uKGEpe3AuJCRwaGFzZXx8cC4kJGFzeW5jUXVldWUubGVuZ3RofHxnLmRlZmVyKGZ1bmN0aW9uKCl7cC4kJGFzeW5jUXVldWUubGVuZ3RoJiZwLiRkaWdlc3QoKX0pO3RoaXMuJCRhc3luY1F1ZXVlLnB1c2goe3Njb3BlOnRoaXMsZXhwcmVzc2lvbjphfSl9LCQkcG9zdERpZ2VzdDpmdW5jdGlvbihhKXt0aGlzLiQkcG9zdERpZ2VzdFF1ZXVlLnB1c2goYSl9LCRhcHBseTpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIG0oXCIkYXBwbHlcIiksdGhpcy4kZXZhbChhKX1jYXRjaChiKXtlKGIpfWZpbmFsbHl7cC4kJHBoYXNlPW51bGw7dHJ5e3AuJGRpZ2VzdCgpfWNhdGNoKGMpe3Rocm93IGUoYyksYzt9fX0sJG9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy4kJGxpc3RlbmVyc1thXTtjfHwodGhpcy4kJGxpc3RlbmVyc1thXT1cbmM9W10pO2MucHVzaChiKTt2YXIgZD10aGlzO2RvIGQuJCRsaXN0ZW5lckNvdW50W2FdfHwoZC4kJGxpc3RlbmVyQ291bnRbYV09MCksZC4kJGxpc3RlbmVyQ291bnRbYV0rKzt3aGlsZShkPWQuJHBhcmVudCk7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtjW1JhKGMsYildPW51bGw7bChlLDEsYSl9fSwkZW1pdDpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQsZj10aGlzLGc9ITEsaz17bmFtZTphLHRhcmdldFNjb3BlOmYsc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7Zz0hMH0scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtrLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9LGRlZmF1bHRQcmV2ZW50ZWQ6ITF9LGg9W2tdLmNvbmNhdChCYS5jYWxsKGFyZ3VtZW50cywxKSksbCxtO2Rve2Q9Zi4kJGxpc3RlbmVyc1thXXx8YztrLmN1cnJlbnRTY29wZT1mO2w9MDtmb3IobT1kLmxlbmd0aDtsPG07bCsrKWlmKGRbbF0pdHJ5e2RbbF0uYXBwbHkobnVsbCxoKX1jYXRjaChwKXtlKHApfWVsc2UgZC5zcGxpY2UobCxcbjEpLGwtLSxtLS07aWYoZylicmVhaztmPWYuJHBhcmVudH13aGlsZShmKTtyZXR1cm4ga30sJGJyb2FkY2FzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLGQ9dGhpcyxmPXtuYW1lOmEsdGFyZ2V0U2NvcGU6dGhpcyxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2YuZGVmYXVsdFByZXZlbnRlZD0hMH0sZGVmYXVsdFByZXZlbnRlZDohMX0sZz1bZl0uY29uY2F0KEJhLmNhbGwoYXJndW1lbnRzLDEpKSxrLGg7Yz1kOyl7Zi5jdXJyZW50U2NvcGU9YztkPWMuJCRsaXN0ZW5lcnNbYV18fFtdO2s9MDtmb3IoaD1kLmxlbmd0aDtrPGg7aysrKWlmKGRba10pdHJ5e2Rba10uYXBwbHkobnVsbCxnKX1jYXRjaChsKXtlKGwpfWVsc2UgZC5zcGxpY2UoaywxKSxrLS0saC0tO2lmKCEoZD1jLiQkbGlzdGVuZXJDb3VudFthXSYmYy4kJGNoaWxkSGVhZHx8YyE9PXRoaXMmJmMuJCRuZXh0U2libGluZykpZm9yKDtjIT09dGhpcyYmIShkPWMuJCRuZXh0U2libGluZyk7KWM9Yy4kcGFyZW50fXJldHVybiBmfX07XG52YXIgcD1uZXcgaztyZXR1cm4gcH1dfWZ1bmN0aW9uIGNkKCl7dmFyIGI9L15cXHMqKGh0dHBzP3xmdHB8bWFpbHRvfHRlbHxmaWxlKTovLGE9L15cXHMqKChodHRwcz98ZnRwfGZpbGUpOnxkYXRhOmltYWdlXFwvKS87dGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihhKXtyZXR1cm4geShhKT8oYj1hLHRoaXMpOmJ9O3RoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGIpe3JldHVybiB5KGIpPyhhPWIsdGhpcyk6YX07dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGU9ZD9hOmIsZjtpZighUXx8ODw9USlpZihmPXVhKGMpLmhyZWYsXCJcIiE9PWYmJiFmLm1hdGNoKGUpKXJldHVyblwidW5zYWZlOlwiK2Y7cmV0dXJuIGN9fX1mdW5jdGlvbiBCZShiKXtpZihcInNlbGZcIj09PWIpcmV0dXJuIGI7aWYodihiKSl7aWYoLTE8Yi5pbmRleE9mKFwiKioqXCIpKXRocm93IHhhKFwiaXdjYXJkXCIsYik7Yj1iLnJlcGxhY2UoLyhbLSgpXFxbXFxde30rPyouJFxcXnwsOiM8IVxcXFxdKS9nLFxuXCJcXFxcJDFcIikucmVwbGFjZSgvXFx4MDgvZyxcIlxcXFx4MDhcIikucmVwbGFjZShcIlxcXFwqXFxcXCpcIixcIi4qXCIpLnJlcGxhY2UoXCJcXFxcKlwiLFwiW146Ly4/JjtdKlwiKTtyZXR1cm4gUmVnRXhwKFwiXlwiK2IrXCIkXCIpfWlmKGpiKGIpKXJldHVybiBSZWdFeHAoXCJeXCIrYi5zb3VyY2UrXCIkXCIpO3Rocm93IHhhKFwiaW1hdGNoZXJcIik7fWZ1bmN0aW9uIEdjKGIpe3ZhciBhPVtdO3koYikmJnIoYixmdW5jdGlvbihiKXthLnB1c2goQmUoYikpfSk7cmV0dXJuIGF9ZnVuY3Rpb24gYmUoKXt0aGlzLlNDRV9DT05URVhUUz1nYTt2YXIgYj1bXCJzZWxmXCJdLGE9W107dGhpcy5yZXNvdXJjZVVybFdoaXRlbGlzdD1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj1HYyhhKSk7cmV0dXJuIGJ9O3RoaXMucmVzb3VyY2VVcmxCbGFja2xpc3Q9ZnVuY3Rpb24oYil7YXJndW1lbnRzLmxlbmd0aCYmKGE9R2MoYikpO3JldHVybiBhfTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZChhKXt2YXIgYj1cbmZ1bmN0aW9uKGEpe3RoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gYX19O2EmJihiLnByb3RvdHlwZT1uZXcgYSk7Yi5wcm90b3R5cGUudmFsdWVPZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCl9O2IucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKS50b1N0cmluZygpfTtyZXR1cm4gYn12YXIgZT1mdW5jdGlvbihhKXt0aHJvdyB4YShcInVuc2FmZVwiKTt9O2MuaGFzKFwiJHNhbml0aXplXCIpJiYoZT1jLmdldChcIiRzYW5pdGl6ZVwiKSk7dmFyIGY9ZCgpLGc9e307Z1tnYS5IVE1MXT1kKGYpO2dbZ2EuQ1NTXT1kKGYpO2dbZ2EuVVJMXT1kKGYpO2dbZ2EuSlNdPWQoZik7Z1tnYS5SRVNPVVJDRV9VUkxdPWQoZ1tnYS5VUkxdKTtyZXR1cm57dHJ1c3RBczpmdW5jdGlvbihhLGIpe3ZhciBjPWcuaGFzT3duUHJvcGVydHkoYSk/Z1thXTpudWxsO2lmKCFjKXRocm93IHhhKFwiaWNvbnRleHRcIixcbmEsYik7aWYobnVsbD09PWJ8fGI9PT10fHxcIlwiPT09YilyZXR1cm4gYjtpZihcInN0cmluZ1wiIT09dHlwZW9mIGIpdGhyb3cgeGEoXCJpdHlwZVwiLGEpO3JldHVybiBuZXcgYyhiKX0sZ2V0VHJ1c3RlZDpmdW5jdGlvbihjLGQpe2lmKG51bGw9PT1kfHxkPT09dHx8XCJcIj09PWQpcmV0dXJuIGQ7dmFyIGY9Zy5oYXNPd25Qcm9wZXJ0eShjKT9nW2NdOm51bGw7aWYoZiYmZCBpbnN0YW5jZW9mIGYpcmV0dXJuIGQuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTtpZihjPT09Z2EuUkVTT1VSQ0VfVVJMKXt2YXIgZj11YShkLnRvU3RyaW5nKCkpLGwsbixwPSExO2w9MDtmb3Iobj1iLmxlbmd0aDtsPG47bCsrKWlmKFwic2VsZlwiPT09YltsXT9QYihmKTpiW2xdLmV4ZWMoZi5ocmVmKSl7cD0hMDticmVha31pZihwKWZvcihsPTAsbj1hLmxlbmd0aDtsPG47bCsrKWlmKFwic2VsZlwiPT09YVtsXT9QYihmKTphW2xdLmV4ZWMoZi5ocmVmKSl7cD0hMTticmVha31pZihwKXJldHVybiBkO3Rocm93IHhhKFwiaW5zZWN1cmxcIixcbmQudG9TdHJpbmcoKSk7fWlmKGM9PT1nYS5IVE1MKXJldHVybiBlKGQpO3Rocm93IHhhKFwidW5zYWZlXCIpO30sdmFsdWVPZjpmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGY/YS4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpOmF9fX1dfWZ1bmN0aW9uIGFlKCl7dmFyIGI9ITA7dGhpcy5lbmFibGVkPWZ1bmN0aW9uKGEpe2FyZ3VtZW50cy5sZW5ndGgmJihiPSEhYSk7cmV0dXJuIGJ9O3RoaXMuJGdldD1bXCIkcGFyc2VcIixcIiRzbmlmZmVyXCIsXCIkc2NlRGVsZWdhdGVcIixmdW5jdGlvbihhLGMsZCl7aWYoYiYmYy5tc2llJiY4PmMubXNpZURvY3VtZW50TW9kZSl0aHJvdyB4YShcImllcXVpcmtzXCIpO3ZhciBlPWhhKGdhKTtlLmlzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiBifTtlLnRydXN0QXM9ZC50cnVzdEFzO2UuZ2V0VHJ1c3RlZD1kLmdldFRydXN0ZWQ7ZS52YWx1ZU9mPWQudmFsdWVPZjtifHwoZS50cnVzdEFzPWUuZ2V0VHJ1c3RlZD1mdW5jdGlvbihhLGIpe3JldHVybiBifSxcbmUudmFsdWVPZj1RYSk7ZS5wYXJzZUFzPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YShjKTtyZXR1cm4gZC5saXRlcmFsJiZkLmNvbnN0YW50P2Q6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gZS5nZXRUcnVzdGVkKGIsZChhLGMpKX19O3ZhciBmPWUucGFyc2VBcyxnPWUuZ2V0VHJ1c3RlZCxrPWUudHJ1c3RBcztyKGdhLGZ1bmN0aW9uKGEsYil7dmFyIGM9SyhiKTtlW1phKFwicGFyc2VfYXNfXCIrYyldPWZ1bmN0aW9uKGIpe3JldHVybiBmKGEsYil9O2VbWmEoXCJnZXRfdHJ1c3RlZF9cIitjKV09ZnVuY3Rpb24oYil7cmV0dXJuIGcoYSxiKX07ZVtaYShcInRydXN0X2FzX1wiK2MpXT1mdW5jdGlvbihiKXtyZXR1cm4gayhhLGIpfX0pO3JldHVybiBlfV19ZnVuY3Rpb24gY2UoKXt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYixhKXt2YXIgYz17fSxkPVUoKC9hbmRyb2lkIChcXGQrKS8uZXhlYyhLKChiLm5hdmlnYXRvcnx8e30pLnVzZXJBZ2VudCkpfHxbXSlbMV0pLGU9L0JveGVlL2kudGVzdCgoYi5uYXZpZ2F0b3J8fFxue30pLnVzZXJBZ2VudCksZj1hWzBdfHx7fSxnPWYuZG9jdW1lbnRNb2RlLGssbT0vXihNb3p8d2Via2l0fE98bXMpKD89W0EtWl0pLyxoPWYuYm9keSYmZi5ib2R5LnN0eWxlLGw9ITEsbj0hMTtpZihoKXtmb3IodmFyIHAgaW4gaClpZihsPW0uZXhlYyhwKSl7az1sWzBdO2s9ay5zdWJzdHIoMCwxKS50b1VwcGVyQ2FzZSgpK2suc3Vic3RyKDEpO2JyZWFrfWt8fChrPVwiV2Via2l0T3BhY2l0eVwiaW4gaCYmXCJ3ZWJraXRcIik7bD0hIShcInRyYW5zaXRpb25cImluIGh8fGsrXCJUcmFuc2l0aW9uXCJpbiBoKTtuPSEhKFwiYW5pbWF0aW9uXCJpbiBofHxrK1wiQW5pbWF0aW9uXCJpbiBoKTshZHx8bCYmbnx8KGw9dihmLmJvZHkuc3R5bGUud2Via2l0VHJhbnNpdGlvbiksbj12KGYuYm9keS5zdHlsZS53ZWJraXRBbmltYXRpb24pKX1yZXR1cm57aGlzdG9yeTohKCFiLmhpc3Rvcnl8fCFiLmhpc3RvcnkucHVzaFN0YXRlfHw0PmR8fGUpLGhhc2hjaGFuZ2U6XCJvbmhhc2hjaGFuZ2VcImluIGImJighZ3x8NzxcbmcpLGhhc0V2ZW50OmZ1bmN0aW9uKGEpe2lmKFwiaW5wdXRcIj09YSYmOT09USlyZXR1cm4hMTtpZih4KGNbYV0pKXt2YXIgYj1mLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Y1thXT1cIm9uXCIrYSBpbiBifXJldHVybiBjW2FdfSxjc3A6WGEoKSx2ZW5kb3JQcmVmaXg6ayx0cmFuc2l0aW9uczpsLGFuaW1hdGlvbnM6bixhbmRyb2lkOmQsbXNpZTpRLG1zaWVEb2N1bWVudE1vZGU6Z319XX1mdW5jdGlvbiBlZSgpe3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLFwiJHFcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsZnVuY3Rpb24oYixhLGMsZCl7ZnVuY3Rpb24gZShlLGssbSl7dmFyIGg9Yy5kZWZlcigpLGw9aC5wcm9taXNlLG49eShtKSYmIW07az1hLmRlZmVyKGZ1bmN0aW9uKCl7dHJ5e2gucmVzb2x2ZShlKCkpfWNhdGNoKGEpe2gucmVqZWN0KGEpLGQoYSl9ZmluYWxseXtkZWxldGUgZltsLiQkdGltZW91dElkXX1ufHxiLiRhcHBseSgpfSxrKTtsLiQkdGltZW91dElkPWs7ZltrXT1oO1xucmV0dXJuIGx9dmFyIGY9e307ZS5jYW5jZWw9ZnVuY3Rpb24oYil7cmV0dXJuIGImJmIuJCR0aW1lb3V0SWQgaW4gZj8oZltiLiQkdGltZW91dElkXS5yZWplY3QoXCJjYW5jZWxlZFwiKSxkZWxldGUgZltiLiQkdGltZW91dElkXSxhLmRlZmVyLmNhbmNlbChiLiQkdGltZW91dElkKSk6ITF9O3JldHVybiBlfV19ZnVuY3Rpb24gdWEoYixhKXt2YXIgYz1iO1EmJihZLnNldEF0dHJpYnV0ZShcImhyZWZcIixjKSxjPVkuaHJlZik7WS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsYyk7cmV0dXJue2hyZWY6WS5ocmVmLHByb3RvY29sOlkucHJvdG9jb2w/WS5wcm90b2NvbC5yZXBsYWNlKC86JC8sXCJcIik6XCJcIixob3N0OlkuaG9zdCxzZWFyY2g6WS5zZWFyY2g/WS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sXCJcIik6XCJcIixoYXNoOlkuaGFzaD9ZLmhhc2gucmVwbGFjZSgvXiMvLFwiXCIpOlwiXCIsaG9zdG5hbWU6WS5ob3N0bmFtZSxwb3J0OlkucG9ydCxwYXRobmFtZTpcIi9cIj09PVkucGF0aG5hbWUuY2hhckF0KDApP1kucGF0aG5hbWU6XG5cIi9cIitZLnBhdGhuYW1lfX1mdW5jdGlvbiBQYihiKXtiPXYoYik/dWEoYik6YjtyZXR1cm4gYi5wcm90b2NvbD09PUhjLnByb3RvY29sJiZiLmhvc3Q9PT1IYy5ob3N0fWZ1bmN0aW9uIGZlKCl7dGhpcy4kZ2V0PWJhKFcpfWZ1bmN0aW9uIG1jKGIpe2Z1bmN0aW9uIGEoZCxlKXtpZihUKGQpKXt2YXIgZj17fTtyKGQsZnVuY3Rpb24oYixjKXtmW2NdPWEoYyxiKX0pO3JldHVybiBmfXJldHVybiBiLmZhY3RvcnkoZCtjLGUpfXZhciBjPVwiRmlsdGVyXCI7dGhpcy5yZWdpc3Rlcj1hO3RoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuZ2V0KGIrYyl9fV07YShcImN1cnJlbmN5XCIsSWMpO2EoXCJkYXRlXCIsSmMpO2EoXCJmaWx0ZXJcIixDZSk7YShcImpzb25cIixEZSk7YShcImxpbWl0VG9cIixFZSk7YShcImxvd2VyY2FzZVwiLEZlKTthKFwibnVtYmVyXCIsS2MpO2EoXCJvcmRlckJ5XCIsTGMpO2EoXCJ1cHBlcmNhc2VcIixHZSl9ZnVuY3Rpb24gQ2UoKXtyZXR1cm4gZnVuY3Rpb24oYixcbmEsYyl7aWYoIUooYikpcmV0dXJuIGI7dmFyIGQ9dHlwZW9mIGMsZT1bXTtlLmNoZWNrPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8ZS5sZW5ndGg7YisrKWlmKCFlW2JdKGEpKXJldHVybiExO3JldHVybiEwfTtcImZ1bmN0aW9uXCIhPT1kJiYoYz1cImJvb2xlYW5cIj09PWQmJmM/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVmEuZXF1YWxzKGEsYil9OmZ1bmN0aW9uKGEsYil7aWYoYSYmYiYmXCJvYmplY3RcIj09PXR5cGVvZiBhJiZcIm9iamVjdFwiPT09dHlwZW9mIGIpe2Zvcih2YXIgZCBpbiBhKWlmKFwiJFwiIT09ZC5jaGFyQXQoMCkmJmtiLmNhbGwoYSxkKSYmYyhhW2RdLGJbZF0pKXJldHVybiEwO3JldHVybiExfWI9KFwiXCIrYikudG9Mb3dlckNhc2UoKTtyZXR1cm4tMTwoXCJcIithKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoYil9KTt2YXIgZj1mdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiJiZcIiFcIj09PWIuY2hhckF0KDApKXJldHVybiFmKGEsYi5zdWJzdHIoMSkpO3N3aXRjaCh0eXBlb2YgYSl7Y2FzZSBcImJvb2xlYW5cIjpjYXNlIFwibnVtYmVyXCI6Y2FzZSBcInN0cmluZ1wiOnJldHVybiBjKGEsXG5iKTtjYXNlIFwib2JqZWN0XCI6c3dpdGNoKHR5cGVvZiBiKXtjYXNlIFwib2JqZWN0XCI6cmV0dXJuIGMoYSxiKTtkZWZhdWx0OmZvcih2YXIgZCBpbiBhKWlmKFwiJFwiIT09ZC5jaGFyQXQoMCkmJmYoYVtkXSxiKSlyZXR1cm4hMH1yZXR1cm4hMTtjYXNlIFwiYXJyYXlcIjpmb3IoZD0wO2Q8YS5sZW5ndGg7ZCsrKWlmKGYoYVtkXSxiKSlyZXR1cm4hMDtyZXR1cm4hMTtkZWZhdWx0OnJldHVybiExfX07c3dpdGNoKHR5cGVvZiBhKXtjYXNlIFwiYm9vbGVhblwiOmNhc2UgXCJudW1iZXJcIjpjYXNlIFwic3RyaW5nXCI6YT17JDphfTtjYXNlIFwib2JqZWN0XCI6Zm9yKHZhciBnIGluIGEpKGZ1bmN0aW9uKGIpe1widW5kZWZpbmVkXCIhPT10eXBlb2YgYVtiXSYmZS5wdXNoKGZ1bmN0aW9uKGMpe3JldHVybiBmKFwiJFwiPT1iP2M6YyYmY1tiXSxhW2JdKX0pfSkoZyk7YnJlYWs7Y2FzZSBcImZ1bmN0aW9uXCI6ZS5wdXNoKGEpO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIGJ9ZD1bXTtmb3IoZz0wO2c8Yi5sZW5ndGg7ZysrKXt2YXIgaz1cbmJbZ107ZS5jaGVjayhrKSYmZC5wdXNoKGspfXJldHVybiBkfX1mdW5jdGlvbiBJYyhiKXt2YXIgYT1iLk5VTUJFUl9GT1JNQVRTO3JldHVybiBmdW5jdGlvbihiLGQpe3goZCkmJihkPWEuQ1VSUkVOQ1lfU1lNKTtyZXR1cm4gTWMoYixhLlBBVFRFUk5TWzFdLGEuR1JPVVBfU0VQLGEuREVDSU1BTF9TRVAsMikucmVwbGFjZSgvXFx1MDBBNC9nLGQpfX1mdW5jdGlvbiBLYyhiKXt2YXIgYT1iLk5VTUJFUl9GT1JNQVRTO3JldHVybiBmdW5jdGlvbihiLGQpe3JldHVybiBNYyhiLGEuUEFUVEVSTlNbMF0sYS5HUk9VUF9TRVAsYS5ERUNJTUFMX1NFUCxkKX19ZnVuY3Rpb24gTWMoYixhLGMsZCxlKXtpZihudWxsPT1ifHwhaXNGaW5pdGUoYil8fFQoYikpcmV0dXJuXCJcIjt2YXIgZj0wPmI7Yj1NYXRoLmFicyhiKTt2YXIgZz1iK1wiXCIsaz1cIlwiLG09W10saD0hMTtpZigtMSE9PWcuaW5kZXhPZihcImVcIikpe3ZhciBsPWcubWF0Y2goLyhbXFxkXFwuXSspZSgtPykoXFxkKykvKTtsJiZcIi1cIj09bFsyXSYmXG5sWzNdPmUrMT8oZz1cIjBcIixiPTApOihrPWcsaD0hMCl9aWYoaCkwPGUmJigtMTxiJiYxPmIpJiYoaz1iLnRvRml4ZWQoZSkpO2Vsc2V7Zz0oZy5zcGxpdChOYylbMV18fFwiXCIpLmxlbmd0aDt4KGUpJiYoZT1NYXRoLm1pbihNYXRoLm1heChhLm1pbkZyYWMsZyksYS5tYXhGcmFjKSk7Yj0rKE1hdGgucm91bmQoKyhiLnRvU3RyaW5nKCkrXCJlXCIrZSkpLnRvU3RyaW5nKCkrXCJlXCIrLWUpOzA9PT1iJiYoZj0hMSk7Yj0oXCJcIitiKS5zcGxpdChOYyk7Zz1iWzBdO2I9YlsxXXx8XCJcIjt2YXIgbD0wLG49YS5sZ1NpemUscD1hLmdTaXplO2lmKGcubGVuZ3RoPj1uK3ApZm9yKGw9Zy5sZW5ndGgtbixoPTA7aDxsO2grKykwPT09KGwtaCklcCYmMCE9PWgmJihrKz1jKSxrKz1nLmNoYXJBdChoKTtmb3IoaD1sO2g8Zy5sZW5ndGg7aCsrKTA9PT0oZy5sZW5ndGgtaCklbiYmMCE9PWgmJihrKz1jKSxrKz1nLmNoYXJBdChoKTtmb3IoO2IubGVuZ3RoPGU7KWIrPVwiMFwiO2UmJlwiMFwiIT09ZSYmKGsrPWQrYi5zdWJzdHIoMCxcbmUpKX1tLnB1c2goZj9hLm5lZ1ByZTphLnBvc1ByZSk7bS5wdXNoKGspO20ucHVzaChmP2EubmVnU3VmOmEucG9zU3VmKTtyZXR1cm4gbS5qb2luKFwiXCIpfWZ1bmN0aW9uIFhiKGIsYSxjKXt2YXIgZD1cIlwiOzA+YiYmKGQ9XCItXCIsYj0tYik7Zm9yKGI9XCJcIitiO2IubGVuZ3RoPGE7KWI9XCIwXCIrYjtjJiYoYj1iLnN1YnN0cihiLmxlbmd0aC1hKSk7cmV0dXJuIGQrYn1mdW5jdGlvbiAkKGIsYSxjLGQpe2M9Y3x8MDtyZXR1cm4gZnVuY3Rpb24oZSl7ZT1lW1wiZ2V0XCIrYl0oKTtpZigwPGN8fGU+LWMpZSs9YzswPT09ZSYmLTEyPT1jJiYoZT0xMik7cmV0dXJuIFhiKGUsYSxkKX19ZnVuY3Rpb24gdmIoYixhKXtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2YXIgZT1jW1wiZ2V0XCIrYl0oKSxmPUlhKGE/XCJTSE9SVFwiK2I6Yik7cmV0dXJuIGRbZl1bZV19fWZ1bmN0aW9uIEpjKGIpe2Z1bmN0aW9uIGEoYSl7dmFyIGI7aWYoYj1hLm1hdGNoKGMpKXthPW5ldyBEYXRlKDApO3ZhciBmPTAsZz0wLGs9Yls4XT9cbmEuc2V0VVRDRnVsbFllYXI6YS5zZXRGdWxsWWVhcixtPWJbOF0/YS5zZXRVVENIb3VyczphLnNldEhvdXJzO2JbOV0mJihmPVUoYls5XStiWzEwXSksZz1VKGJbOV0rYlsxMV0pKTtrLmNhbGwoYSxVKGJbMV0pLFUoYlsyXSktMSxVKGJbM10pKTtmPVUoYls0XXx8MCktZjtnPVUoYls1XXx8MCktZztrPVUoYls2XXx8MCk7Yj1NYXRoLnJvdW5kKDFFMypwYXJzZUZsb2F0KFwiMC5cIisoYls3XXx8MCkpKTttLmNhbGwoYSxmLGcsayxiKX1yZXR1cm4gYX12YXIgYz0vXihcXGR7NH0pLT8oXFxkXFxkKS0/KFxcZFxcZCkoPzpUKFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86Oj8oXFxkXFxkKSg/OlxcLihcXGQrKSk/KT8pPyhafChbKy1dKShcXGRcXGQpOj8oXFxkXFxkKSk/KT8kLztyZXR1cm4gZnVuY3Rpb24oYyxlKXt2YXIgZj1cIlwiLGc9W10sayxtO2U9ZXx8XCJtZWRpdW1EYXRlXCI7ZT1iLkRBVEVUSU1FX0ZPUk1BVFNbZV18fGU7dihjKSYmKGM9SGUudGVzdChjKT9VKGMpOmEoYykpO2liKGMpJiYoYz1uZXcgRGF0ZShjKSk7XG5pZighdGEoYykpcmV0dXJuIGM7Zm9yKDtlOykobT1JZS5leGVjKGUpKT8oZz1nLmNvbmNhdChCYS5jYWxsKG0sMSkpLGU9Zy5wb3AoKSk6KGcucHVzaChlKSxlPW51bGwpO3IoZyxmdW5jdGlvbihhKXtrPUplW2FdO2YrPWs/ayhjLGIuREFURVRJTUVfRk9STUFUUyk6YS5yZXBsYWNlKC8oXid8JyQpL2csXCJcIikucmVwbGFjZSgvJycvZyxcIidcIil9KTtyZXR1cm4gZn19ZnVuY3Rpb24gRGUoKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIG5hKGIsITApfX1mdW5jdGlvbiBFZSgpe3JldHVybiBmdW5jdGlvbihiLGEpe2lmKCFKKGIpJiYhdihiKSlyZXR1cm4gYjthPUluZmluaXR5PT09TWF0aC5hYnMoTnVtYmVyKGEpKT9OdW1iZXIoYSk6VShhKTtpZih2KGIpKXJldHVybiBhPzA8PWE/Yi5zbGljZSgwLGEpOmIuc2xpY2UoYSxiLmxlbmd0aCk6XCJcIjt2YXIgYz1bXSxkLGU7YT5iLmxlbmd0aD9hPWIubGVuZ3RoOmE8LWIubGVuZ3RoJiYoYT0tYi5sZW5ndGgpOzA8YT8oZD0wLGU9YSk6KGQ9XG5iLmxlbmd0aCthLGU9Yi5sZW5ndGgpO2Zvcig7ZDxlO2QrKyljLnB1c2goYltkXSk7cmV0dXJuIGN9fWZ1bmN0aW9uIExjKGIpe3JldHVybiBmdW5jdGlvbihhLGMsZCl7ZnVuY3Rpb24gZShhLGIpe3JldHVybiBVYShiKT9mdW5jdGlvbihiLGMpe3JldHVybiBhKGMsYil9OmF9ZnVuY3Rpb24gZihhLGIpe3ZhciBjPXR5cGVvZiBhLGQ9dHlwZW9mIGI7cmV0dXJuIGM9PWQ/KHRhKGEpJiZ0YShiKSYmKGE9YS52YWx1ZU9mKCksYj1iLnZhbHVlT2YoKSksXCJzdHJpbmdcIj09YyYmKGE9YS50b0xvd2VyQ2FzZSgpLGI9Yi50b0xvd2VyQ2FzZSgpKSxhPT09Yj8wOmE8Yj8tMToxKTpjPGQ/LTE6MX1pZighUGEoYSl8fCFjKXJldHVybiBhO2M9SihjKT9jOltjXTtjPVZjKGMsZnVuY3Rpb24oYSl7dmFyIGM9ITEsZD1hfHxRYTtpZih2KGEpKXtpZihcIitcIj09YS5jaGFyQXQoMCl8fFwiLVwiPT1hLmNoYXJBdCgwKSljPVwiLVwiPT1hLmNoYXJBdCgwKSxhPWEuc3Vic3RyaW5nKDEpO2Q9YihhKTtpZihkLmNvbnN0YW50KXt2YXIgZz1cbmQoKTtyZXR1cm4gZShmdW5jdGlvbihhLGIpe3JldHVybiBmKGFbZ10sYltnXSl9LGMpfX1yZXR1cm4gZShmdW5jdGlvbihhLGIpe3JldHVybiBmKGQoYSksZChiKSl9LGMpfSk7Zm9yKHZhciBnPVtdLGs9MDtrPGEubGVuZ3RoO2srKylnLnB1c2goYVtrXSk7cmV0dXJuIGcuc29ydChlKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF0oYSxiKTtpZigwIT09ZSlyZXR1cm4gZX1yZXR1cm4gMH0sZCkpfX1mdW5jdGlvbiB5YShiKXtQKGIpJiYoYj17bGluazpifSk7Yi5yZXN0cmljdD1iLnJlc3RyaWN0fHxcIkFDXCI7cmV0dXJuIGJhKGIpfWZ1bmN0aW9uIE9jKGIsYSxjLGQpe2Z1bmN0aW9uIGUoYSxjKXtjPWM/XCItXCIrbWIoYyxcIi1cIik6XCJcIjtkLnNldENsYXNzKGIsKGE/d2I6eGIpK2MsKGE/eGI6d2IpK2MpfXZhciBmPXRoaXMsZz1iLnBhcmVudCgpLmNvbnRyb2xsZXIoXCJmb3JtXCIpfHx5YixrPTAsbT1mLiRlcnJvcj17fSxoPVtdO2YuJG5hbWU9XG5hLm5hbWV8fGEubmdGb3JtO2YuJGRpcnR5PSExO2YuJHByaXN0aW5lPSEwO2YuJHZhbGlkPSEwO2YuJGludmFsaWQ9ITE7Zy4kYWRkQ29udHJvbChmKTtiLmFkZENsYXNzKE9hKTtlKCEwKTtmLiRhZGRDb250cm9sPWZ1bmN0aW9uKGEpe0RhKGEuJG5hbWUsXCJpbnB1dFwiKTtoLnB1c2goYSk7YS4kbmFtZSYmKGZbYS4kbmFtZV09YSl9O2YuJHJlbW92ZUNvbnRyb2w9ZnVuY3Rpb24oYSl7YS4kbmFtZSYmZlthLiRuYW1lXT09PWEmJmRlbGV0ZSBmW2EuJG5hbWVdO3IobSxmdW5jdGlvbihiLGMpe2YuJHNldFZhbGlkaXR5KGMsITAsYSl9KTtTYShoLGEpfTtmLiRzZXRWYWxpZGl0eT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9bVthXTtpZihiKWQmJihTYShkLGMpLGQubGVuZ3RofHwoay0tLGt8fChlKGIpLGYuJHZhbGlkPSEwLGYuJGludmFsaWQ9ITEpLG1bYV09ITEsZSghMCxhKSxnLiRzZXRWYWxpZGl0eShhLCEwLGYpKSk7ZWxzZXtrfHxlKGIpO2lmKGQpe2lmKC0xIT1SYShkLGMpKXJldHVybn1lbHNlIG1bYV09XG5kPVtdLGsrKyxlKCExLGEpLGcuJHNldFZhbGlkaXR5KGEsITEsZik7ZC5wdXNoKGMpO2YuJHZhbGlkPSExO2YuJGludmFsaWQ9ITB9fTtmLiRzZXREaXJ0eT1mdW5jdGlvbigpe2QucmVtb3ZlQ2xhc3MoYixPYSk7ZC5hZGRDbGFzcyhiLHpiKTtmLiRkaXJ0eT0hMDtmLiRwcmlzdGluZT0hMTtnLiRzZXREaXJ0eSgpfTtmLiRzZXRQcmlzdGluZT1mdW5jdGlvbigpe2QucmVtb3ZlQ2xhc3MoYix6Yik7ZC5hZGRDbGFzcyhiLE9hKTtmLiRkaXJ0eT0hMTtmLiRwcmlzdGluZT0hMDtyKGgsZnVuY3Rpb24oYSl7YS4kc2V0UHJpc3RpbmUoKX0pfX1mdW5jdGlvbiBzYShiLGEsYyxkKXtiLiRzZXRWYWxpZGl0eShhLGMpO3JldHVybiBjP2Q6dH1mdW5jdGlvbiBQYyhiLGEpe3ZhciBjLGQ7aWYoYSlmb3IoYz0wO2M8YS5sZW5ndGg7KytjKWlmKGQ9YVtjXSxiW2RdKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEtlKGIsYSxjLGQsZSl7VChlKSYmKGIuJCRoYXNOYXRpdmVWYWxpZGF0b3JzPSEwLFxuYi4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGYpe2lmKGIuJGVycm9yW2FdfHxQYyhlLGQpfHwhUGMoZSxjKSlyZXR1cm4gZjtiLiRzZXRWYWxpZGl0eShhLCExKX0pKX1mdW5jdGlvbiBBYihiLGEsYyxkLGUsZil7dmFyIGc9YS5wcm9wKExlKSxrPWFbMF0ucGxhY2Vob2xkZXIsbT17fSxoPUsoYVswXS50eXBlKTtkLiQkdmFsaWRpdHlTdGF0ZT1nO2lmKCFlLmFuZHJvaWQpe3ZhciBsPSExO2Eub24oXCJjb21wb3NpdGlvbnN0YXJ0XCIsZnVuY3Rpb24oYSl7bD0hMH0pO2Eub24oXCJjb21wb3NpdGlvbmVuZFwiLGZ1bmN0aW9uKCl7bD0hMTtuKCl9KX12YXIgbj1mdW5jdGlvbihlKXtpZighbCl7dmFyIGY9YS52YWwoKTtpZihRJiZcImlucHV0XCI9PT0oZXx8bSkudHlwZSYmYVswXS5wbGFjZWhvbGRlciE9PWspaz1hWzBdLnBsYWNlaG9sZGVyO2Vsc2UgaWYoXCJwYXNzd29yZFwiIT09aCYmVWEoYy5uZ1RyaW18fFwiVFwiKSYmKGY9YWEoZikpLGU9ZyYmZC4kJGhhc05hdGl2ZVZhbGlkYXRvcnMsZC4kdmlld1ZhbHVlIT09XG5mfHxcIlwiPT09ZiYmZSliLiRyb290LiQkcGhhc2U/ZC4kc2V0Vmlld1ZhbHVlKGYpOmIuJGFwcGx5KGZ1bmN0aW9uKCl7ZC4kc2V0Vmlld1ZhbHVlKGYpfSl9fTtpZihlLmhhc0V2ZW50KFwiaW5wdXRcIikpYS5vbihcImlucHV0XCIsbik7ZWxzZXt2YXIgcCxxPWZ1bmN0aW9uKCl7cHx8KHA9Zi5kZWZlcihmdW5jdGlvbigpe24oKTtwPW51bGx9KSl9O2Eub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7YT1hLmtleUNvZGU7OTE9PT1hfHwoMTU8YSYmMTk+YXx8Mzc8PWEmJjQwPj1hKXx8cSgpfSk7aWYoZS5oYXNFdmVudChcInBhc3RlXCIpKWEub24oXCJwYXN0ZSBjdXRcIixxKX1hLm9uKFwiY2hhbmdlXCIsbik7ZC4kcmVuZGVyPWZ1bmN0aW9uKCl7YS52YWwoZC4kaXNFbXB0eShkLiR2aWV3VmFsdWUpP1wiXCI6ZC4kdmlld1ZhbHVlKX07dmFyIHM9Yy5uZ1BhdHRlcm47cyYmKChlPXMubWF0Y2goL15cXC8oLiopXFwvKFtnaW1dKikkLykpPyhzPVJlZ0V4cChlWzFdLGVbMl0pLGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHNhKGQsXG5cInBhdHRlcm5cIixkLiRpc0VtcHR5KGEpfHxzLnRlc3QoYSksYSl9KTplPWZ1bmN0aW9uKGMpe3ZhciBlPWIuJGV2YWwocyk7aWYoIWV8fCFlLnRlc3QpdGhyb3cgQyhcIm5nUGF0dGVyblwiKShcIm5vcmVnZXhwXCIscyxlLGlhKGEpKTtyZXR1cm4gc2EoZCxcInBhdHRlcm5cIixkLiRpc0VtcHR5KGMpfHxlLnRlc3QoYyksYyl9LGQuJGZvcm1hdHRlcnMucHVzaChlKSxkLiRwYXJzZXJzLnB1c2goZSkpO2lmKGMubmdNaW5sZW5ndGgpe3ZhciByPVUoYy5uZ01pbmxlbmd0aCk7ZT1mdW5jdGlvbihhKXtyZXR1cm4gc2EoZCxcIm1pbmxlbmd0aFwiLGQuJGlzRW1wdHkoYSl8fGEubGVuZ3RoPj1yLGEpfTtkLiRwYXJzZXJzLnB1c2goZSk7ZC4kZm9ybWF0dGVycy5wdXNoKGUpfWlmKGMubmdNYXhsZW5ndGgpe3ZhciB1PVUoYy5uZ01heGxlbmd0aCk7ZT1mdW5jdGlvbihhKXtyZXR1cm4gc2EoZCxcIm1heGxlbmd0aFwiLGQuJGlzRW1wdHkoYSl8fGEubGVuZ3RoPD11LGEpfTtkLiRwYXJzZXJzLnB1c2goZSk7XG5kLiRmb3JtYXR0ZXJzLnB1c2goZSl9fWZ1bmN0aW9uIFliKGIsYSl7Yj1cIm5nQ2xhc3NcIitiO3JldHVybltcIiRhbmltYXRlXCIsZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZChhLGIpe3ZhciBjPVtdLGQ9MDthOmZvcig7ZDxhLmxlbmd0aDtkKyspe2Zvcih2YXIgZT1hW2RdLGw9MDtsPGIubGVuZ3RoO2wrKylpZihlPT1iW2xdKWNvbnRpbnVlIGE7Yy5wdXNoKGUpfXJldHVybiBjfWZ1bmN0aW9uIGUoYSl7aWYoIUooYSkpe2lmKHYoYSkpcmV0dXJuIGEuc3BsaXQoXCIgXCIpO2lmKFQoYSkpe3ZhciBiPVtdO3IoYSxmdW5jdGlvbihhLGMpe2EmJihiPWIuY29uY2F0KGMuc3BsaXQoXCIgXCIpKSl9KTtyZXR1cm4gYn19cmV0dXJuIGF9cmV0dXJue3Jlc3RyaWN0OlwiQUNcIixsaW5rOmZ1bmN0aW9uKGYsZyxrKXtmdW5jdGlvbiBtKGEsYil7dmFyIGM9Zy5kYXRhKFwiJGNsYXNzQ291bnRzXCIpfHx7fSxkPVtdO3IoYSxmdW5jdGlvbihhKXtpZigwPGJ8fGNbYV0pY1thXT0oY1thXXx8MCkrYixjW2FdPT09KygwPFxuYikmJmQucHVzaChhKX0pO2cuZGF0YShcIiRjbGFzc0NvdW50c1wiLGMpO3JldHVybiBkLmpvaW4oXCIgXCIpfWZ1bmN0aW9uIGgoYil7aWYoITA9PT1hfHxmLiRpbmRleCUyPT09YSl7dmFyIGg9ZShifHxbXSk7aWYoIWwpe3ZhciBxPW0oaCwxKTtrLiRhZGRDbGFzcyhxKX1lbHNlIGlmKCFBYShiLGwpKXt2YXIgcz1lKGwpLHE9ZChoLHMpLGg9ZChzLGgpLGg9bShoLC0xKSxxPW0ocSwxKTswPT09cS5sZW5ndGg/Yy5yZW1vdmVDbGFzcyhnLGgpOjA9PT1oLmxlbmd0aD9jLmFkZENsYXNzKGcscSk6Yy5zZXRDbGFzcyhnLHEsaCl9fWw9aGEoYil9dmFyIGw7Zi4kd2F0Y2goa1tiXSxoLCEwKTtrLiRvYnNlcnZlKFwiY2xhc3NcIixmdW5jdGlvbihhKXtoKGYuJGV2YWwoa1tiXSkpfSk7XCJuZ0NsYXNzXCIhPT1iJiZmLiR3YXRjaChcIiRpbmRleFwiLGZ1bmN0aW9uKGMsZCl7dmFyIGc9YyYxO2lmKGchPT0oZCYxKSl7dmFyIGg9ZShmLiRldmFsKGtbYl0pKTtnPT09YT8oZz1tKGgsMSksay4kYWRkQ2xhc3MoZykpOlxuKGc9bShoLC0xKSxrLiRyZW1vdmVDbGFzcyhnKSl9fSl9fX1dfXZhciBMZT1cInZhbGlkaXR5XCIsSz1mdW5jdGlvbihiKXtyZXR1cm4gdihiKT9iLnRvTG93ZXJDYXNlKCk6Yn0sa2I9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxJYT1mdW5jdGlvbihiKXtyZXR1cm4gdihiKT9iLnRvVXBwZXJDYXNlKCk6Yn0sUSx3LEVhLEJhPVtdLnNsaWNlLE1lPVtdLnB1c2gsemE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxUYT1DKFwibmdcIiksVmE9Vy5hbmd1bGFyfHwoVy5hbmd1bGFyPXt9KSxZYSxNYSxtYT1bXCIwXCIsXCIwXCIsXCIwXCJdO1E9VSgoL21zaWUgKFxcZCspLy5leGVjKEsobmF2aWdhdG9yLnVzZXJBZ2VudCkpfHxbXSlbMV0pO2lzTmFOKFEpJiYoUT1VKCgvdHJpZGVudFxcLy4qOyBydjooXFxkKykvLmV4ZWMoSyhuYXZpZ2F0b3IudXNlckFnZW50KSl8fFtdKVsxXSkpO0UuJGluamVjdD1bXTtRYS4kaW5qZWN0PVtdO3ZhciBKPWZ1bmN0aW9uKCl7cmV0dXJuIFAoQXJyYXkuaXNBcnJheSk/XG5BcnJheS5pc0FycmF5OmZ1bmN0aW9uKGIpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PXphLmNhbGwoYil9fSgpLGFhPWZ1bmN0aW9uKCl7cmV0dXJuIFN0cmluZy5wcm90b3R5cGUudHJpbT9mdW5jdGlvbihiKXtyZXR1cm4gdihiKT9iLnRyaW0oKTpifTpmdW5jdGlvbihiKXtyZXR1cm4gdihiKT9iLnJlcGxhY2UoL15cXHNcXHMqLyxcIlwiKS5yZXBsYWNlKC9cXHNcXHMqJC8sXCJcIik6Yn19KCk7TWE9OT5RP2Z1bmN0aW9uKGIpe2I9Yi5ub2RlTmFtZT9iOmJbMF07cmV0dXJuIGIuc2NvcGVOYW1lJiZcIkhUTUxcIiE9Yi5zY29wZU5hbWU/SWEoYi5zY29wZU5hbWUrXCI6XCIrYi5ub2RlTmFtZSk6Yi5ub2RlTmFtZX06ZnVuY3Rpb24oYil7cmV0dXJuIGIubm9kZU5hbWU/Yi5ub2RlTmFtZTpiWzBdLm5vZGVOYW1lfTt2YXIgWGE9ZnVuY3Rpb24oKXtpZih5KFhhLmlzQWN0aXZlXykpcmV0dXJuIFhhLmlzQWN0aXZlXzt2YXIgYj0hKCFYLnF1ZXJ5U2VsZWN0b3IoXCJbbmctY3NwXVwiKSYmIVgucXVlcnlTZWxlY3RvcihcIltkYXRhLW5nLWNzcF1cIikpO1xuaWYoIWIpdHJ5e25ldyBGdW5jdGlvbihcIlwiKX1jYXRjaChhKXtiPSEwfXJldHVybiBYYS5pc0FjdGl2ZV89Yn0sWWM9L1tBLVpdL2csYWQ9e2Z1bGw6XCIxLjIuMjZcIixtYWpvcjoxLG1pbm9yOjIsZG90OjI2LGNvZGVOYW1lOlwiY2FwdGl2YXRpbmctZGlzaW50ZXJlc3RcIn07Uy5leHBhbmRvPVwibmczMzlcIjt2YXIgYWI9Uy5jYWNoZT17fSxuZT0xLHNiPVcuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcj9mdW5jdGlvbihiLGEsYyl7Yi5hZGRFdmVudExpc3RlbmVyKGEsYywhMSl9OmZ1bmN0aW9uKGIsYSxjKXtiLmF0dGFjaEV2ZW50KFwib25cIithLGMpfSwkYT1XLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYixhLGMpe2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITEpfTpmdW5jdGlvbihiLGEsYyl7Yi5kZXRhY2hFdmVudChcIm9uXCIrYSxjKX07Uy5fZGF0YT1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5jYWNoZVtiW3RoaXMuZXhwYW5kb11dfHx7fX07dmFyIGllPS8oW1xcOlxcLVxcX10rKC4pKS9nLFxuamU9L15tb3ooW0EtWl0pLyxIYj1DKFwianFMaXRlXCIpLGtlPS9ePChcXHcrKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLyxJYj0vPHwmIz9cXHcrOy8sbGU9LzwoW1xcdzpdKykvLG1lPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naSxlYT17b3B0aW9uOlsxLCc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLFwiPC9zZWxlY3Q+XCJdLHRoZWFkOlsxLFwiPHRhYmxlPlwiLFwiPC90YWJsZT5cIl0sY29sOlsyLFwiPHRhYmxlPjxjb2xncm91cD5cIixcIjwvY29sZ3JvdXA+PC90YWJsZT5cIl0sdHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OlswLFwiXCIsXCJcIl19O2VhLm9wdGdyb3VwPWVhLm9wdGlvbjtlYS50Ym9keT1lYS50Zm9vdD1lYS5jb2xncm91cD1lYS5jYXB0aW9uPWVhLnRoZWFkO2VhLnRoPVxuZWEudGQ7dmFyIExhPVMucHJvdG90eXBlPXtyZWFkeTpmdW5jdGlvbihiKXtmdW5jdGlvbiBhKCl7Y3x8KGM9ITAsYigpKX12YXIgYz0hMTtcImNvbXBsZXRlXCI9PT1YLnJlYWR5U3RhdGU/c2V0VGltZW91dChhKToodGhpcy5vbihcIkRPTUNvbnRlbnRMb2FkZWRcIixhKSxTKFcpLm9uKFwibG9hZFwiLGEpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgYj1bXTtyKHRoaXMsZnVuY3Rpb24oYSl7Yi5wdXNoKFwiXCIrYSl9KTtyZXR1cm5cIltcIitiLmpvaW4oXCIsIFwiKStcIl1cIn0sZXE6ZnVuY3Rpb24oYil7cmV0dXJuIDA8PWI/dyh0aGlzW2JdKTp3KHRoaXNbdGhpcy5sZW5ndGgrYl0pfSxsZW5ndGg6MCxwdXNoOk1lLHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlfSxxYj17fTtyKFwibXVsdGlwbGUgc2VsZWN0ZWQgY2hlY2tlZCBkaXNhYmxlZCByZWFkT25seSByZXF1aXJlZCBvcGVuXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGIpe3FiW0soYildPWJ9KTt2YXIgcmM9e307cihcImlucHV0IHNlbGVjdCBvcHRpb24gdGV4dGFyZWEgYnV0dG9uIGZvcm0gZGV0YWlsc1wiLnNwbGl0KFwiIFwiKSxcbmZ1bmN0aW9uKGIpe3JjW0lhKGIpXT0hMH0pO3Ioe2RhdGE6TWIscmVtb3ZlRGF0YTpMYn0sZnVuY3Rpb24oYixhKXtTW2FdPWJ9KTtyKHtkYXRhOk1iLGluaGVyaXRlZERhdGE6cGIsc2NvcGU6ZnVuY3Rpb24oYil7cmV0dXJuIHcuZGF0YShiLFwiJHNjb3BlXCIpfHxwYihiLnBhcmVudE5vZGV8fGIsW1wiJGlzb2xhdGVTY29wZVwiLFwiJHNjb3BlXCJdKX0saXNvbGF0ZVNjb3BlOmZ1bmN0aW9uKGIpe3JldHVybiB3LmRhdGEoYixcIiRpc29sYXRlU2NvcGVcIil8fHcuZGF0YShiLFwiJGlzb2xhdGVTY29wZU5vVGVtcGxhdGVcIil9LGNvbnRyb2xsZXI6b2MsaW5qZWN0b3I6ZnVuY3Rpb24oYil7cmV0dXJuIHBiKGIsXCIkaW5qZWN0b3JcIil9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYixhKXtiLnJlbW92ZUF0dHJpYnV0ZShhKX0saGFzQ2xhc3M6TmIsY3NzOmZ1bmN0aW9uKGIsYSxjKXthPVphKGEpO2lmKHkoYykpYi5zdHlsZVthXT1jO2Vsc2V7dmFyIGQ7OD49USYmKGQ9Yi5jdXJyZW50U3R5bGUmJmIuY3VycmVudFN0eWxlW2FdLFxuXCJcIj09PWQmJihkPVwiYXV0b1wiKSk7ZD1kfHxiLnN0eWxlW2FdOzg+PVEmJihkPVwiXCI9PT1kP3Q6ZCk7cmV0dXJuIGR9fSxhdHRyOmZ1bmN0aW9uKGIsYSxjKXt2YXIgZD1LKGEpO2lmKHFiW2RdKWlmKHkoYykpYz8oYlthXT0hMCxiLnNldEF0dHJpYnV0ZShhLGQpKTooYlthXT0hMSxiLnJlbW92ZUF0dHJpYnV0ZShkKSk7ZWxzZSByZXR1cm4gYlthXXx8KGIuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oYSl8fEUpLnNwZWNpZmllZD9kOnQ7ZWxzZSBpZih5KGMpKWIuc2V0QXR0cmlidXRlKGEsYyk7ZWxzZSBpZihiLmdldEF0dHJpYnV0ZSlyZXR1cm4gYj1iLmdldEF0dHJpYnV0ZShhLDIpLG51bGw9PT1iP3Q6Yn0scHJvcDpmdW5jdGlvbihiLGEsYyl7aWYoeShjKSliW2FdPWM7ZWxzZSByZXR1cm4gYlthXX0sdGV4dDpmdW5jdGlvbigpe2Z1bmN0aW9uIGIoYixkKXt2YXIgZT1hW2Iubm9kZVR5cGVdO2lmKHgoZCkpcmV0dXJuIGU/YltlXTpcIlwiO2JbZV09ZH12YXIgYT1bXTs5PlE/KGFbMV09XG5cImlubmVyVGV4dFwiLGFbM109XCJub2RlVmFsdWVcIik6YVsxXT1hWzNdPVwidGV4dENvbnRlbnRcIjtiLiRkdj1cIlwiO3JldHVybiBifSgpLHZhbDpmdW5jdGlvbihiLGEpe2lmKHgoYSkpe2lmKFwiU0VMRUNUXCI9PT1NYShiKSYmYi5tdWx0aXBsZSl7dmFyIGM9W107cihiLm9wdGlvbnMsZnVuY3Rpb24oYSl7YS5zZWxlY3RlZCYmYy5wdXNoKGEudmFsdWV8fGEudGV4dCl9KTtyZXR1cm4gMD09PWMubGVuZ3RoP251bGw6Y31yZXR1cm4gYi52YWx1ZX1iLnZhbHVlPWF9LGh0bWw6ZnVuY3Rpb24oYixhKXtpZih4KGEpKXJldHVybiBiLmlubmVySFRNTDtmb3IodmFyIGM9MCxkPWIuY2hpbGROb2RlcztjPGQubGVuZ3RoO2MrKylKYShkW2NdKTtiLmlubmVySFRNTD1hfSxlbXB0eTpwY30sZnVuY3Rpb24oYixhKXtTLnByb3RvdHlwZVthXT1mdW5jdGlvbihhLGQpe3ZhciBlLGYsZz10aGlzLmxlbmd0aDtpZihiIT09cGMmJigyPT1iLmxlbmd0aCYmYiE9PU5iJiZiIT09b2M/YTpkKT09PXQpe2lmKFQoYSkpe2ZvcihlPVxuMDtlPGc7ZSsrKWlmKGI9PT1NYiliKHRoaXNbZV0sYSk7ZWxzZSBmb3IoZiBpbiBhKWIodGhpc1tlXSxmLGFbZl0pO3JldHVybiB0aGlzfWU9Yi4kZHY7Zz1lPT09dD9NYXRoLm1pbihnLDEpOmc7Zm9yKGY9MDtmPGc7ZisrKXt2YXIgaz1iKHRoaXNbZl0sYSxkKTtlPWU/ZStrOmt9cmV0dXJuIGV9Zm9yKGU9MDtlPGc7ZSsrKWIodGhpc1tlXSxhLGQpO3JldHVybiB0aGlzfX0pO3Ioe3JlbW92ZURhdGE6TGIsZGVhbG9jOkphLG9uOmZ1bmN0aW9uIGEoYyxkLGUsZil7aWYoeShmKSl0aHJvdyBIYihcIm9uYXJnc1wiKTt2YXIgZz1vYShjLFwiZXZlbnRzXCIpLGs9b2EoYyxcImhhbmRsZVwiKTtnfHxvYShjLFwiZXZlbnRzXCIsZz17fSk7a3x8b2EoYyxcImhhbmRsZVwiLGs9b2UoYyxnKSk7cihkLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihkKXt2YXIgZj1nW2RdO2lmKCFmKXtpZihcIm1vdXNlZW50ZXJcIj09ZHx8XCJtb3VzZWxlYXZlXCI9PWQpe3ZhciBsPVguYm9keS5jb250YWluc3x8WC5ib2R5LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP1xuZnVuY3Rpb24oYSxjKXt2YXIgZD05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGU9YyYmYy5wYXJlbnROb2RlO3JldHVybiBhPT09ZXx8ISEoZSYmMT09PWUubm9kZVR5cGUmJihkLmNvbnRhaW5zP2QuY29udGFpbnMoZSk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKSYxNikpfTpmdW5jdGlvbihhLGMpe2lmKGMpZm9yKDtjPWMucGFyZW50Tm9kZTspaWYoYz09PWEpcmV0dXJuITA7cmV0dXJuITF9O2dbZF09W107YShjLHttb3VzZWxlYXZlOlwibW91c2VvdXRcIixtb3VzZWVudGVyOlwibW91c2VvdmVyXCJ9W2RdLGZ1bmN0aW9uKGEpe3ZhciBjPWEucmVsYXRlZFRhcmdldDtjJiYoYz09PXRoaXN8fGwodGhpcyxjKSl8fGsoYSxkKX0pfWVsc2Ugc2IoYyxkLGspLGdbZF09W107Zj1nW2RdfWYucHVzaChlKX0pfSxvZmY6bmMsb25lOmZ1bmN0aW9uKGEsYyxkKXthPXcoYSk7YS5vbihjLGZ1bmN0aW9uIGYoKXthLm9mZihjLFxuZCk7YS5vZmYoYyxmKX0pO2Eub24oYyxkKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oYSxjKXt2YXIgZCxlPWEucGFyZW50Tm9kZTtKYShhKTtyKG5ldyBTKGMpLGZ1bmN0aW9uKGMpe2Q/ZS5pbnNlcnRCZWZvcmUoYyxkLm5leHRTaWJsaW5nKTplLnJlcGxhY2VDaGlsZChjLGEpO2Q9Y30pfSxjaGlsZHJlbjpmdW5jdGlvbihhKXt2YXIgYz1bXTtyKGEuY2hpbGROb2RlcyxmdW5jdGlvbihhKXsxPT09YS5ub2RlVHlwZSYmYy5wdXNoKGEpfSk7cmV0dXJuIGN9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8YS5jaGlsZE5vZGVzfHxbXX0sYXBwZW5kOmZ1bmN0aW9uKGEsYyl7cihuZXcgUyhjKSxmdW5jdGlvbihjKXsxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxhLmFwcGVuZENoaWxkKGMpfSl9LHByZXBlbmQ6ZnVuY3Rpb24oYSxjKXtpZigxPT09YS5ub2RlVHlwZSl7dmFyIGQ9YS5maXJzdENoaWxkO3IobmV3IFMoYyksZnVuY3Rpb24oYyl7YS5pbnNlcnRCZWZvcmUoYyxcbmQpfSl9fSx3cmFwOmZ1bmN0aW9uKGEsYyl7Yz13KGMpWzBdO3ZhciBkPWEucGFyZW50Tm9kZTtkJiZkLnJlcGxhY2VDaGlsZChjLGEpO2MuYXBwZW5kQ2hpbGQoYSl9LHJlbW92ZTpmdW5jdGlvbihhKXtKYShhKTt2YXIgYz1hLnBhcmVudE5vZGU7YyYmYy5yZW1vdmVDaGlsZChhKX0sYWZ0ZXI6ZnVuY3Rpb24oYSxjKXt2YXIgZD1hLGU9YS5wYXJlbnROb2RlO3IobmV3IFMoYyksZnVuY3Rpb24oYSl7ZS5pbnNlcnRCZWZvcmUoYSxkLm5leHRTaWJsaW5nKTtkPWF9KX0sYWRkQ2xhc3M6b2IscmVtb3ZlQ2xhc3M6bmIsdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxjLGQpe2MmJnIoYy5zcGxpdChcIiBcIiksZnVuY3Rpb24oYyl7dmFyIGY9ZDt4KGYpJiYoZj0hTmIoYSxjKSk7KGY/b2I6bmIpKGEsYyl9KX0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybihhPWEucGFyZW50Tm9kZSkmJjExIT09YS5ub2RlVHlwZT9hOm51bGx9LG5leHQ6ZnVuY3Rpb24oYSl7aWYoYS5uZXh0RWxlbWVudFNpYmxpbmcpcmV0dXJuIGEubmV4dEVsZW1lbnRTaWJsaW5nO1xuZm9yKGE9YS5uZXh0U2libGluZztudWxsIT1hJiYxIT09YS5ub2RlVHlwZTspYT1hLm5leHRTaWJsaW5nO3JldHVybiBhfSxmaW5kOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShjKTpbXX0sY2xvbmU6S2IsdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlLGY7ZT1jLnR5cGV8fGM7dmFyIGc9KG9hKGEsXCJldmVudHNcIil8fHt9KVtlXTtnJiYoZT17cHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9LGlzRGVmYXVsdFByZXZlbnRlZDpmdW5jdGlvbigpe3JldHVybiEwPT09dGhpcy5kZWZhdWx0UHJldmVudGVkfSxzdG9wUHJvcGFnYXRpb246RSx0eXBlOmUsdGFyZ2V0OmF9LGMudHlwZSYmKGU9RChlLGMpKSxjPWhhKGcpLGY9ZD9bZV0uY29uY2F0KGQpOltlXSxyKGMsZnVuY3Rpb24oYyl7Yy5hcHBseShhLGYpfSkpfX0sZnVuY3Rpb24oYSxjKXtTLnByb3RvdHlwZVtjXT1cbmZ1bmN0aW9uKGMsZSxmKXtmb3IodmFyIGcsaz0wO2s8dGhpcy5sZW5ndGg7aysrKXgoZyk/KGc9YSh0aGlzW2tdLGMsZSxmKSx5KGcpJiYoZz13KGcpKSk6SmIoZyxhKHRoaXNba10sYyxlLGYpKTtyZXR1cm4geShnKT9nOnRoaXN9O1MucHJvdG90eXBlLmJpbmQ9Uy5wcm90b3R5cGUub247Uy5wcm90b3R5cGUudW5iaW5kPVMucHJvdG90eXBlLm9mZn0pO2JiLnByb3RvdHlwZT17cHV0OmZ1bmN0aW9uKGEsYyl7dGhpc1tLYShhLHRoaXMubmV4dFVpZCldPWN9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1tLYShhLHRoaXMubmV4dFVpZCldfSxyZW1vdmU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpc1thPUthKGEsdGhpcy5uZXh0VWlkKV07ZGVsZXRlIHRoaXNbYV07cmV0dXJuIGN9fTt2YXIgcWU9L15mdW5jdGlvblxccypbXlxcKF0qXFwoXFxzKihbXlxcKV0qKVxcKS9tLHJlPS8sLyxzZT0vXlxccyooXz8pKFxcUys/KVxcMVxccyokLyxwZT0vKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvbWcsXG5jYj1DKFwiJGluamVjdG9yXCIpLE5lPUMoXCIkYW5pbWF0ZVwiKSxNZD1bXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGEpe3RoaXMuJCRzZWxlY3RvcnM9e307dGhpcy5yZWdpc3Rlcj1mdW5jdGlvbihjLGQpe3ZhciBlPWMrXCItYW5pbWF0aW9uXCI7aWYoYyYmXCIuXCIhPWMuY2hhckF0KDApKXRocm93IE5lKFwibm90Y3NlbFwiLGMpO3RoaXMuJCRzZWxlY3RvcnNbYy5zdWJzdHIoMSldPWU7YS5mYWN0b3J5KGUsZCl9O3RoaXMuY2xhc3NOYW1lRmlsdGVyPWZ1bmN0aW9uKGEpezE9PT1hcmd1bWVudHMubGVuZ3RoJiYodGhpcy4kJGNsYXNzTmFtZUZpbHRlcj1hIGluc3RhbmNlb2YgUmVnRXhwP2E6bnVsbCk7cmV0dXJuIHRoaXMuJCRjbGFzc05hbWVGaWx0ZXJ9O3RoaXMuJGdldD1bXCIkdGltZW91dFwiLFwiJCRhc3luY0NhbGxiYWNrXCIsZnVuY3Rpb24oYSxkKXtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oYSxjLGcsayl7Zz9nLmFmdGVyKGEpOihjJiZjWzBdfHwoYz1nLnBhcmVudCgpKSxjLmFwcGVuZChhKSk7ayYmXG5kKGspfSxsZWF2ZTpmdW5jdGlvbihhLGMpe2EucmVtb3ZlKCk7YyYmZChjKX0sbW92ZTpmdW5jdGlvbihhLGMsZCxrKXt0aGlzLmVudGVyKGEsYyxkLGspfSxhZGRDbGFzczpmdW5jdGlvbihhLGMsZyl7Yz12KGMpP2M6SihjKT9jLmpvaW4oXCIgXCIpOlwiXCI7cihhLGZ1bmN0aW9uKGEpe29iKGEsYyl9KTtnJiZkKGcpfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhLGMsZyl7Yz12KGMpP2M6SihjKT9jLmpvaW4oXCIgXCIpOlwiXCI7cihhLGZ1bmN0aW9uKGEpe25iKGEsYyl9KTtnJiZkKGcpfSxzZXRDbGFzczpmdW5jdGlvbihhLGMsZyxrKXtyKGEsZnVuY3Rpb24oYSl7b2IoYSxjKTtuYihhLGcpfSk7ayYmZChrKX0sZW5hYmxlZDpFfX1dfV0samE9QyhcIiRjb21waWxlXCIpO2ljLiRpbmplY3Q9W1wiJHByb3ZpZGVcIixcIiQkc2FuaXRpemVVcmlQcm92aWRlclwiXTt2YXIgd2U9L14oeFtcXDpcXC1fXXxkYXRhW1xcOlxcLV9dKS9pLHljPUMoXCIkaW50ZXJwb2xhdGVcIiksT2U9L14oW15cXD8jXSopKFxcPyhbXiNdKikpPygjKC4qKSk/JC8sXG56ZT17aHR0cDo4MCxodHRwczo0NDMsZnRwOjIxfSxTYj1DKFwiJGxvY2F0aW9uXCIpO1ViLnByb3RvdHlwZT1UYi5wcm90b3R5cGU9QmMucHJvdG90eXBlPXskJGh0bWw1OiExLCQkcmVwbGFjZTohMSxhYnNVcmw6dGIoXCIkJGFic1VybFwiKSx1cmw6ZnVuY3Rpb24oYSl7aWYoeChhKSlyZXR1cm4gdGhpcy4kJHVybDthPU9lLmV4ZWMoYSk7YVsxXSYmdGhpcy5wYXRoKGRlY29kZVVSSUNvbXBvbmVudChhWzFdKSk7KGFbMl18fGFbMV0pJiZ0aGlzLnNlYXJjaChhWzNdfHxcIlwiKTt0aGlzLmhhc2goYVs1XXx8XCJcIik7cmV0dXJuIHRoaXN9LHByb3RvY29sOnRiKFwiJCRwcm90b2NvbFwiKSxob3N0OnRiKFwiJCRob3N0XCIpLHBvcnQ6dGIoXCIkJHBvcnRcIikscGF0aDpDYyhcIiQkcGF0aFwiLGZ1bmN0aW9uKGEpe2E9YT9hLnRvU3RyaW5nKCk6XCJcIjtyZXR1cm5cIi9cIj09YS5jaGFyQXQoMCk/YTpcIi9cIithfSksc2VhcmNoOmZ1bmN0aW9uKGEsYyl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gdGhpcy4kJHNlYXJjaDtcbmNhc2UgMTppZih2KGEpfHxpYihhKSlhPWEudG9TdHJpbmcoKSx0aGlzLiQkc2VhcmNoPWVjKGEpO2Vsc2UgaWYoVChhKSlyKGEsZnVuY3Rpb24oYyxlKXtudWxsPT1jJiZkZWxldGUgYVtlXX0pLHRoaXMuJCRzZWFyY2g9YTtlbHNlIHRocm93IFNiKFwiaXNyY2hhcmdcIik7YnJlYWs7ZGVmYXVsdDp4KGMpfHxudWxsPT09Yz9kZWxldGUgdGhpcy4kJHNlYXJjaFthXTp0aGlzLiQkc2VhcmNoW2FdPWN9dGhpcy4kJGNvbXBvc2UoKTtyZXR1cm4gdGhpc30saGFzaDpDYyhcIiQkaGFzaFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhP2EudG9TdHJpbmcoKTpcIlwifSkscmVwbGFjZTpmdW5jdGlvbigpe3RoaXMuJCRyZXBsYWNlPSEwO3JldHVybiB0aGlzfX07dmFyIGxhPUMoXCIkcGFyc2VcIiksRmM9e30sd2EsUGU9RnVuY3Rpb24ucHJvdG90eXBlLmNhbGwsUWU9RnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LFFjPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLGdiPXtcIm51bGxcIjpmdW5jdGlvbigpe3JldHVybiBudWxsfSxcblwidHJ1ZVwiOmZ1bmN0aW9uKCl7cmV0dXJuITB9LFwiZmFsc2VcIjpmdW5jdGlvbigpe3JldHVybiExfSx1bmRlZmluZWQ6RSxcIitcIjpmdW5jdGlvbihhLGMsZCxlKXtkPWQoYSxjKTtlPWUoYSxjKTtyZXR1cm4geShkKT95KGUpP2QrZTpkOnkoZSk/ZTp0fSxcIi1cIjpmdW5jdGlvbihhLGMsZCxlKXtkPWQoYSxjKTtlPWUoYSxjKTtyZXR1cm4oeShkKT9kOjApLSh5KGUpP2U6MCl9LFwiKlwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykqZShhLGMpfSxcIi9cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpL2UoYSxjKX0sXCIlXCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSVlKGEsYyl9LFwiXlwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyleZShhLGMpfSxcIj1cIjpFLFwiPT09XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKT09PWUoYSxjKX0sXCIhPT1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpIT09ZShhLGMpfSxcIj09XCI6ZnVuY3Rpb24oYSxcbmMsZCxlKXtyZXR1cm4gZChhLGMpPT1lKGEsYyl9LFwiIT1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpIT1lKGEsYyl9LFwiPFwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk8ZShhLGMpfSxcIj5cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPmUoYSxjKX0sXCI8PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk8PWUoYSxjKX0sXCI+PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk+PWUoYSxjKX0sXCImJlwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykmJmUoYSxjKX0sXCJ8fFwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyl8fGUoYSxjKX0sXCImXCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSZlKGEsYyl9LFwifFwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBlKGEsYykoYSxjLGQoYSxjKSl9LFwiIVwiOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4hZChhLGMpfX0sUmU9e246XCJcXG5cIixmOlwiXFxmXCIscjpcIlxcclwiLFxudDpcIlxcdFwiLHY6XCJcXHZcIixcIidcIjpcIidcIiwnXCInOidcIid9LFdiPWZ1bmN0aW9uKGEpe3RoaXMub3B0aW9ucz1hfTtXYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOldiLGxleDpmdW5jdGlvbihhKXt0aGlzLnRleHQ9YTt0aGlzLmluZGV4PTA7dGhpcy5jaD10O3RoaXMubGFzdENoPVwiOlwiO2Zvcih0aGlzLnRva2Vucz1bXTt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXt0aGlzLmNoPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7aWYodGhpcy5pcyhcIlxcXCInXCIpKXRoaXMucmVhZFN0cmluZyh0aGlzLmNoKTtlbHNlIGlmKHRoaXMuaXNOdW1iZXIodGhpcy5jaCl8fHRoaXMuaXMoXCIuXCIpJiZ0aGlzLmlzTnVtYmVyKHRoaXMucGVlaygpKSl0aGlzLnJlYWROdW1iZXIoKTtlbHNlIGlmKHRoaXMuaXNJZGVudCh0aGlzLmNoKSl0aGlzLnJlYWRJZGVudCgpO2Vsc2UgaWYodGhpcy5pcyhcIigpe31bXS4sOzo/XCIpKXRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDp0aGlzLmNofSksXG50aGlzLmluZGV4Kys7ZWxzZSBpZih0aGlzLmlzV2hpdGVzcGFjZSh0aGlzLmNoKSl7dGhpcy5pbmRleCsrO2NvbnRpbnVlfWVsc2V7YT10aGlzLmNoK3RoaXMucGVlaygpO3ZhciBjPWErdGhpcy5wZWVrKDIpLGQ9Z2JbdGhpcy5jaF0sZT1nYlthXSxmPWdiW2NdO2Y/KHRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDpjLGZuOmZ9KSx0aGlzLmluZGV4Kz0zKTplPyh0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6YSxmbjplfSksdGhpcy5pbmRleCs9Mik6ZD8odGhpcy50b2tlbnMucHVzaCh7aW5kZXg6dGhpcy5pbmRleCx0ZXh0OnRoaXMuY2gsZm46ZH0pLHRoaXMuaW5kZXgrPTEpOnRoaXMudGhyb3dFcnJvcihcIlVuZXhwZWN0ZWQgbmV4dCBjaGFyYWN0ZXIgXCIsdGhpcy5pbmRleCx0aGlzLmluZGV4KzEpfXRoaXMubGFzdENoPXRoaXMuY2h9cmV0dXJuIHRoaXMudG9rZW5zfSxpczpmdW5jdGlvbihhKXtyZXR1cm4tMSE9PWEuaW5kZXhPZih0aGlzLmNoKX0sXG53YXM6ZnVuY3Rpb24oYSl7cmV0dXJuLTEhPT1hLmluZGV4T2YodGhpcy5sYXN0Q2gpfSxwZWVrOmZ1bmN0aW9uKGEpe2E9YXx8MTtyZXR1cm4gdGhpcy5pbmRleCthPHRoaXMudGV4dC5sZW5ndGg/dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4K2EpOiExfSxpc051bWJlcjpmdW5jdGlvbihhKXtyZXR1cm5cIjBcIjw9YSYmXCI5XCI+PWF9LGlzV2hpdGVzcGFjZTpmdW5jdGlvbihhKXtyZXR1cm5cIiBcIj09PWF8fFwiXFxyXCI9PT1hfHxcIlxcdFwiPT09YXx8XCJcXG5cIj09PWF8fFwiXFx2XCI9PT1hfHxcIlxcdTAwYTBcIj09PWF9LGlzSWRlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuXCJhXCI8PWEmJlwielwiPj1hfHxcIkFcIjw9YSYmXCJaXCI+PWF8fFwiX1wiPT09YXx8XCIkXCI9PT1hfSxpc0V4cE9wZXJhdG9yOmZ1bmN0aW9uKGEpe3JldHVyblwiLVwiPT09YXx8XCIrXCI9PT1hfHx0aGlzLmlzTnVtYmVyKGEpfSx0aHJvd0Vycm9yOmZ1bmN0aW9uKGEsYyxkKXtkPWR8fHRoaXMuaW5kZXg7Yz15KGMpP1wicyBcIitjK1wiLVwiK3RoaXMuaW5kZXgrXCIgW1wiK1xudGhpcy50ZXh0LnN1YnN0cmluZyhjLGQpK1wiXVwiOlwiIFwiK2Q7dGhyb3cgbGEoXCJsZXhlcnJcIixhLGMsdGhpcy50ZXh0KTt9LHJlYWROdW1iZXI6ZnVuY3Rpb24oKXtmb3IodmFyIGE9XCJcIixjPXRoaXMuaW5kZXg7dGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoOyl7dmFyIGQ9Syh0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpKTtpZihcIi5cIj09ZHx8dGhpcy5pc051bWJlcihkKSlhKz1kO2Vsc2V7dmFyIGU9dGhpcy5wZWVrKCk7aWYoXCJlXCI9PWQmJnRoaXMuaXNFeHBPcGVyYXRvcihlKSlhKz1kO2Vsc2UgaWYodGhpcy5pc0V4cE9wZXJhdG9yKGQpJiZlJiZ0aGlzLmlzTnVtYmVyKGUpJiZcImVcIj09YS5jaGFyQXQoYS5sZW5ndGgtMSkpYSs9ZDtlbHNlIGlmKCF0aGlzLmlzRXhwT3BlcmF0b3IoZCl8fGUmJnRoaXMuaXNOdW1iZXIoZSl8fFwiZVwiIT1hLmNoYXJBdChhLmxlbmd0aC0xKSlicmVhaztlbHNlIHRoaXMudGhyb3dFcnJvcihcIkludmFsaWQgZXhwb25lbnRcIil9dGhpcy5pbmRleCsrfWEqPVxuMTt0aGlzLnRva2Vucy5wdXNoKHtpbmRleDpjLHRleHQ6YSxsaXRlcmFsOiEwLGNvbnN0YW50OiEwLGZuOmZ1bmN0aW9uKCl7cmV0dXJuIGF9fSl9LHJlYWRJZGVudDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLGM9XCJcIixkPXRoaXMuaW5kZXgsZSxmLGcsazt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXtrPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7aWYoXCIuXCI9PT1rfHx0aGlzLmlzSWRlbnQoayl8fHRoaXMuaXNOdW1iZXIoaykpXCIuXCI9PT1rJiYoZT10aGlzLmluZGV4KSxjKz1rO2Vsc2UgYnJlYWs7dGhpcy5pbmRleCsrfWlmKGUpZm9yKGY9dGhpcy5pbmRleDtmPHRoaXMudGV4dC5sZW5ndGg7KXtrPXRoaXMudGV4dC5jaGFyQXQoZik7aWYoXCIoXCI9PT1rKXtnPWMuc3Vic3RyKGUtZCsxKTtjPWMuc3Vic3RyKDAsZS1kKTt0aGlzLmluZGV4PWY7YnJlYWt9aWYodGhpcy5pc1doaXRlc3BhY2UoaykpZisrO2Vsc2UgYnJlYWt9ZD17aW5kZXg6ZCx0ZXh0OmN9O2lmKGdiLmhhc093blByb3BlcnR5KGMpKWQuZm49XG5nYltjXSxkLmxpdGVyYWw9ITAsZC5jb25zdGFudD0hMDtlbHNle3ZhciBtPUVjKGMsdGhpcy5vcHRpb25zLHRoaXMudGV4dCk7ZC5mbj1EKGZ1bmN0aW9uKGEsYyl7cmV0dXJuIG0oYSxjKX0se2Fzc2lnbjpmdW5jdGlvbihkLGUpe3JldHVybiB1YihkLGMsZSxhLnRleHQsYS5vcHRpb25zKX19KX10aGlzLnRva2Vucy5wdXNoKGQpO2cmJih0aGlzLnRva2Vucy5wdXNoKHtpbmRleDplLHRleHQ6XCIuXCJ9KSx0aGlzLnRva2Vucy5wdXNoKHtpbmRleDplKzEsdGV4dDpnfSkpfSxyZWFkU3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuaW5kZXg7dGhpcy5pbmRleCsrO2Zvcih2YXIgZD1cIlwiLGU9YSxmPSExO3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBnPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCksZT1lK2c7aWYoZilcInVcIj09PWc/KGY9dGhpcy50ZXh0LnN1YnN0cmluZyh0aGlzLmluZGV4KzEsdGhpcy5pbmRleCs1KSxmLm1hdGNoKC9bXFxkYS1mXXs0fS9pKXx8XG50aGlzLnRocm93RXJyb3IoXCJJbnZhbGlkIHVuaWNvZGUgZXNjYXBlIFtcXFxcdVwiK2YrXCJdXCIpLHRoaXMuaW5kZXgrPTQsZCs9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChmLDE2KSkpOmQrPVJlW2ddfHxnLGY9ITE7ZWxzZSBpZihcIlxcXFxcIj09PWcpZj0hMDtlbHNle2lmKGc9PT1hKXt0aGlzLmluZGV4Kys7dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yyx0ZXh0OmUsc3RyaW5nOmQsbGl0ZXJhbDohMCxjb25zdGFudDohMCxmbjpmdW5jdGlvbigpe3JldHVybiBkfX0pO3JldHVybn1kKz1nfXRoaXMuaW5kZXgrK310aGlzLnRocm93RXJyb3IoXCJVbnRlcm1pbmF0ZWQgcXVvdGVcIixjKX19O3ZhciBmYj1mdW5jdGlvbihhLGMsZCl7dGhpcy5sZXhlcj1hO3RoaXMuJGZpbHRlcj1jO3RoaXMub3B0aW9ucz1kfTtmYi5aRVJPPUQoZnVuY3Rpb24oKXtyZXR1cm4gMH0se2NvbnN0YW50OiEwfSk7ZmIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpmYixwYXJzZTpmdW5jdGlvbihhKXt0aGlzLnRleHQ9XG5hO3RoaXMudG9rZW5zPXRoaXMubGV4ZXIubGV4KGEpO2E9dGhpcy5zdGF0ZW1lbnRzKCk7MCE9PXRoaXMudG9rZW5zLmxlbmd0aCYmdGhpcy50aHJvd0Vycm9yKFwiaXMgYW4gdW5leHBlY3RlZCB0b2tlblwiLHRoaXMudG9rZW5zWzBdKTthLmxpdGVyYWw9ISFhLmxpdGVyYWw7YS5jb25zdGFudD0hIWEuY29uc3RhbnQ7cmV0dXJuIGF9LHByaW1hcnk6ZnVuY3Rpb24oKXt2YXIgYTtpZih0aGlzLmV4cGVjdChcIihcIikpYT10aGlzLmZpbHRlckNoYWluKCksdGhpcy5jb25zdW1lKFwiKVwiKTtlbHNlIGlmKHRoaXMuZXhwZWN0KFwiW1wiKSlhPXRoaXMuYXJyYXlEZWNsYXJhdGlvbigpO2Vsc2UgaWYodGhpcy5leHBlY3QoXCJ7XCIpKWE9dGhpcy5vYmplY3QoKTtlbHNle3ZhciBjPXRoaXMuZXhwZWN0KCk7KGE9Yy5mbil8fHRoaXMudGhyb3dFcnJvcihcIm5vdCBhIHByaW1hcnkgZXhwcmVzc2lvblwiLGMpO2EubGl0ZXJhbD0hIWMubGl0ZXJhbDthLmNvbnN0YW50PSEhYy5jb25zdGFudH1mb3IodmFyIGQ7Yz1cbnRoaXMuZXhwZWN0KFwiKFwiLFwiW1wiLFwiLlwiKTspXCIoXCI9PT1jLnRleHQ/KGE9dGhpcy5mdW5jdGlvbkNhbGwoYSxkKSxkPW51bGwpOlwiW1wiPT09Yy50ZXh0PyhkPWEsYT10aGlzLm9iamVjdEluZGV4KGEpKTpcIi5cIj09PWMudGV4dD8oZD1hLGE9dGhpcy5maWVsZEFjY2VzcyhhKSk6dGhpcy50aHJvd0Vycm9yKFwiSU1QT1NTSUJMRVwiKTtyZXR1cm4gYX0sdGhyb3dFcnJvcjpmdW5jdGlvbihhLGMpe3Rocm93IGxhKFwic3ludGF4XCIsYy50ZXh0LGEsYy5pbmRleCsxLHRoaXMudGV4dCx0aGlzLnRleHQuc3Vic3RyaW5nKGMuaW5kZXgpKTt9LHBlZWtUb2tlbjpmdW5jdGlvbigpe2lmKDA9PT10aGlzLnRva2Vucy5sZW5ndGgpdGhyb3cgbGEoXCJ1ZW9lXCIsdGhpcy50ZXh0KTtyZXR1cm4gdGhpcy50b2tlbnNbMF19LHBlZWs6ZnVuY3Rpb24oYSxjLGQsZSl7aWYoMDx0aGlzLnRva2Vucy5sZW5ndGgpe3ZhciBmPXRoaXMudG9rZW5zWzBdLGc9Zi50ZXh0O2lmKGc9PT1hfHxnPT09Y3x8Zz09PWR8fGc9PT1cbmV8fCEoYXx8Y3x8ZHx8ZSkpcmV0dXJuIGZ9cmV0dXJuITF9LGV4cGVjdDpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4oYT10aGlzLnBlZWsoYSxjLGQsZSkpPyh0aGlzLnRva2Vucy5zaGlmdCgpLGEpOiExfSxjb25zdW1lOmZ1bmN0aW9uKGEpe3RoaXMuZXhwZWN0KGEpfHx0aGlzLnRocm93RXJyb3IoXCJpcyB1bmV4cGVjdGVkLCBleHBlY3RpbmcgW1wiK2ErXCJdXCIsdGhpcy5wZWVrKCkpfSx1bmFyeUZuOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIEQoZnVuY3Rpb24oZCxlKXtyZXR1cm4gYShkLGUsYyl9LHtjb25zdGFudDpjLmNvbnN0YW50fSl9LHRlcm5hcnlGbjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIEQoZnVuY3Rpb24oZSxmKXtyZXR1cm4gYShlLGYpP2MoZSxmKTpkKGUsZil9LHtjb25zdGFudDphLmNvbnN0YW50JiZjLmNvbnN0YW50JiZkLmNvbnN0YW50fSl9LGJpbmFyeUZuOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gRChmdW5jdGlvbihlLGYpe3JldHVybiBjKGUsZixhLGQpfSx7Y29uc3RhbnQ6YS5jb25zdGFudCYmXG5kLmNvbnN0YW50fSl9LHN0YXRlbWVudHM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9W107OylpZigwPHRoaXMudG9rZW5zLmxlbmd0aCYmIXRoaXMucGVlayhcIn1cIixcIilcIixcIjtcIixcIl1cIikmJmEucHVzaCh0aGlzLmZpbHRlckNoYWluKCkpLCF0aGlzLmV4cGVjdChcIjtcIikpcmV0dXJuIDE9PT1hLmxlbmd0aD9hWzBdOmZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBlLGY9MDtmPGEubGVuZ3RoO2YrKyl7dmFyIGc9YVtmXTtnJiYoZT1nKGMsZCkpfXJldHVybiBlfX0sZmlsdGVyQ2hhaW46ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5leHByZXNzaW9uKCksYzs7KWlmKGM9dGhpcy5leHBlY3QoXCJ8XCIpKWE9dGhpcy5iaW5hcnlGbihhLGMuZm4sdGhpcy5maWx0ZXIoKSk7ZWxzZSByZXR1cm4gYX0sZmlsdGVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZXhwZWN0KCksYz10aGlzLiRmaWx0ZXIoYS50ZXh0KSxkPVtdOzspaWYoYT10aGlzLmV4cGVjdChcIjpcIikpZC5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKTtcbmVsc2V7dmFyIGU9ZnVuY3Rpb24oYSxlLGspe2s9W2tdO2Zvcih2YXIgbT0wO208ZC5sZW5ndGg7bSsrKWsucHVzaChkW21dKGEsZSkpO3JldHVybiBjLmFwcGx5KGEsayl9O3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlfX19LGV4cHJlc3Npb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hc3NpZ25tZW50KCl9LGFzc2lnbm1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlcm5hcnkoKSxjLGQ7cmV0dXJuKGQ9dGhpcy5leHBlY3QoXCI9XCIpKT8oYS5hc3NpZ258fHRoaXMudGhyb3dFcnJvcihcImltcGxpZXMgYXNzaWdubWVudCBidXQgW1wiK3RoaXMudGV4dC5zdWJzdHJpbmcoMCxkLmluZGV4KStcIl0gY2FuIG5vdCBiZSBhc3NpZ25lZCB0b1wiLGQpLGM9dGhpcy50ZXJuYXJ5KCksZnVuY3Rpb24oZCxmKXtyZXR1cm4gYS5hc3NpZ24oZCxjKGQsZiksZil9KTphfSx0ZXJuYXJ5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sb2dpY2FsT1IoKSxjLGQ7aWYodGhpcy5leHBlY3QoXCI/XCIpKXtjPXRoaXMuYXNzaWdubWVudCgpO1xuaWYoZD10aGlzLmV4cGVjdChcIjpcIikpcmV0dXJuIHRoaXMudGVybmFyeUZuKGEsYyx0aGlzLmFzc2lnbm1lbnQoKSk7dGhpcy50aHJvd0Vycm9yKFwiZXhwZWN0ZWQgOlwiLGQpfWVsc2UgcmV0dXJuIGF9LGxvZ2ljYWxPUjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmxvZ2ljYWxBTkQoKSxjOzspaWYoYz10aGlzLmV4cGVjdChcInx8XCIpKWE9dGhpcy5iaW5hcnlGbihhLGMuZm4sdGhpcy5sb2dpY2FsQU5EKCkpO2Vsc2UgcmV0dXJuIGF9LGxvZ2ljYWxBTkQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVxdWFsaXR5KCksYztpZihjPXRoaXMuZXhwZWN0KFwiJiZcIikpYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLmxvZ2ljYWxBTkQoKSk7cmV0dXJuIGF9LGVxdWFsaXR5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWxhdGlvbmFsKCksYztpZihjPXRoaXMuZXhwZWN0KFwiPT1cIixcIiE9XCIsXCI9PT1cIixcIiE9PVwiKSlhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMuZXF1YWxpdHkoKSk7cmV0dXJuIGF9LFxucmVsYXRpb25hbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYWRkaXRpdmUoKSxjO2lmKGM9dGhpcy5leHBlY3QoXCI8XCIsXCI+XCIsXCI8PVwiLFwiPj1cIikpYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLnJlbGF0aW9uYWwoKSk7cmV0dXJuIGF9LGFkZGl0aXZlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubXVsdGlwbGljYXRpdmUoKSxjO2M9dGhpcy5leHBlY3QoXCIrXCIsXCItXCIpOylhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMubXVsdGlwbGljYXRpdmUoKSk7cmV0dXJuIGF9LG11bHRpcGxpY2F0aXZlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMudW5hcnkoKSxjO2M9dGhpcy5leHBlY3QoXCIqXCIsXCIvXCIsXCIlXCIpOylhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMudW5hcnkoKSk7cmV0dXJuIGF9LHVuYXJ5OmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIHRoaXMuZXhwZWN0KFwiK1wiKT90aGlzLnByaW1hcnkoKTooYT10aGlzLmV4cGVjdChcIi1cIikpP3RoaXMuYmluYXJ5Rm4oZmIuWkVSTyxhLmZuLFxudGhpcy51bmFyeSgpKTooYT10aGlzLmV4cGVjdChcIiFcIikpP3RoaXMudW5hcnlGbihhLmZuLHRoaXMudW5hcnkoKSk6dGhpcy5wcmltYXJ5KCl9LGZpZWxkQWNjZXNzOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsZD10aGlzLmV4cGVjdCgpLnRleHQsZT1FYyhkLHRoaXMub3B0aW9ucyx0aGlzLnRleHQpO3JldHVybiBEKGZ1bmN0aW9uKGMsZCxrKXtyZXR1cm4gZShrfHxhKGMsZCkpfSx7YXNzaWduOmZ1bmN0aW9uKGUsZyxrKXsoaz1hKGUsaykpfHxhLmFzc2lnbihlLGs9e30pO3JldHVybiB1YihrLGQsZyxjLnRleHQsYy5vcHRpb25zKX19KX0sb2JqZWN0SW5kZXg6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxkPXRoaXMuZXhwcmVzc2lvbigpO3RoaXMuY29uc3VtZShcIl1cIik7cmV0dXJuIEQoZnVuY3Rpb24oZSxmKXt2YXIgZz1hKGUsZiksaz1kKGUsZiksbTtrYShrLGMudGV4dCk7aWYoIWcpcmV0dXJuIHQ7KGc9dmEoZ1trXSxjLnRleHQpKSYmKGcudGhlbiYmYy5vcHRpb25zLnVud3JhcFByb21pc2VzKSYmXG4obT1nLFwiJCR2XCJpbiBnfHwobS4kJHY9dCxtLnRoZW4oZnVuY3Rpb24oYSl7bS4kJHY9YX0pKSxnPWcuJCR2KTtyZXR1cm4gZ30se2Fzc2lnbjpmdW5jdGlvbihlLGYsZyl7dmFyIGs9a2EoZChlLGcpLGMudGV4dCk7KGc9dmEoYShlLGcpLGMudGV4dCkpfHxhLmFzc2lnbihlLGc9e30pO3JldHVybiBnW2tdPWZ9fSl9LGZ1bmN0aW9uQ2FsbDpmdW5jdGlvbihhLGMpe3ZhciBkPVtdO2lmKFwiKVwiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkbyBkLnB1c2godGhpcy5leHByZXNzaW9uKCkpO3doaWxlKHRoaXMuZXhwZWN0KFwiLFwiKSl9dGhpcy5jb25zdW1lKFwiKVwiKTt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbihmLGcpe2Zvcih2YXIgaz1bXSxtPWM/YyhmLGcpOmYsaD0wO2g8ZC5sZW5ndGg7aCsrKWsucHVzaCh2YShkW2hdKGYsZyksZS50ZXh0KSk7aD1hKGYsZyxtKXx8RTt2YShtLGUudGV4dCk7dmFyIGw9ZS50ZXh0O2lmKGgpe2lmKGguY29uc3RydWN0b3I9PT1oKXRocm93IGxhKFwiaXNlY2ZuXCIsXG5sKTtpZihoPT09UGV8fGg9PT1RZXx8UWMmJmg9PT1RYyl0aHJvdyBsYShcImlzZWNmZlwiLGwpO31rPWguYXBwbHk/aC5hcHBseShtLGspOmgoa1swXSxrWzFdLGtbMl0sa1szXSxrWzRdKTtyZXR1cm4gdmEoayxlLnRleHQpfX0sYXJyYXlEZWNsYXJhdGlvbjpmdW5jdGlvbigpe3ZhciBhPVtdLGM9ITA7aWYoXCJdXCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2Rve2lmKHRoaXMucGVlayhcIl1cIikpYnJlYWs7dmFyIGQ9dGhpcy5leHByZXNzaW9uKCk7YS5wdXNoKGQpO2QuY29uc3RhbnR8fChjPSExKX13aGlsZSh0aGlzLmV4cGVjdChcIixcIikpfXRoaXMuY29uc3VtZShcIl1cIik7cmV0dXJuIEQoZnVuY3Rpb24oYyxkKXtmb3IodmFyIGc9W10saz0wO2s8YS5sZW5ndGg7aysrKWcucHVzaChhW2tdKGMsZCkpO3JldHVybiBnfSx7bGl0ZXJhbDohMCxjb25zdGFudDpjfSl9LG9iamVjdDpmdW5jdGlvbigpe3ZhciBhPVtdLGM9ITA7aWYoXCJ9XCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2Rve2lmKHRoaXMucGVlayhcIn1cIikpYnJlYWs7XG52YXIgZD10aGlzLmV4cGVjdCgpLGQ9ZC5zdHJpbmd8fGQudGV4dDt0aGlzLmNvbnN1bWUoXCI6XCIpO3ZhciBlPXRoaXMuZXhwcmVzc2lvbigpO2EucHVzaCh7a2V5OmQsdmFsdWU6ZX0pO2UuY29uc3RhbnR8fChjPSExKX13aGlsZSh0aGlzLmV4cGVjdChcIixcIikpfXRoaXMuY29uc3VtZShcIn1cIik7cmV0dXJuIEQoZnVuY3Rpb24oYyxkKXtmb3IodmFyIGU9e30sbT0wO208YS5sZW5ndGg7bSsrKXt2YXIgaD1hW21dO2VbaC5rZXldPWgudmFsdWUoYyxkKX1yZXR1cm4gZX0se2xpdGVyYWw6ITAsY29uc3RhbnQ6Y30pfX07dmFyIFZiPXt9LHhhPUMoXCIkc2NlXCIpLGdhPXtIVE1MOlwiaHRtbFwiLENTUzpcImNzc1wiLFVSTDpcInVybFwiLFJFU09VUkNFX1VSTDpcInJlc291cmNlVXJsXCIsSlM6XCJqc1wifSxZPVguY3JlYXRlRWxlbWVudChcImFcIiksSGM9dWEoVy5sb2NhdGlvbi5ocmVmLCEwKTttYy4kaW5qZWN0PVtcIiRwcm92aWRlXCJdO0ljLiRpbmplY3Q9W1wiJGxvY2FsZVwiXTtLYy4kaW5qZWN0PVtcIiRsb2NhbGVcIl07XG52YXIgTmM9XCIuXCIsSmU9e3l5eXk6JChcIkZ1bGxZZWFyXCIsNCkseXk6JChcIkZ1bGxZZWFyXCIsMiwwLCEwKSx5OiQoXCJGdWxsWWVhclwiLDEpLE1NTU06dmIoXCJNb250aFwiKSxNTU06dmIoXCJNb250aFwiLCEwKSxNTTokKFwiTW9udGhcIiwyLDEpLE06JChcIk1vbnRoXCIsMSwxKSxkZDokKFwiRGF0ZVwiLDIpLGQ6JChcIkRhdGVcIiwxKSxISDokKFwiSG91cnNcIiwyKSxIOiQoXCJIb3Vyc1wiLDEpLGhoOiQoXCJIb3Vyc1wiLDIsLTEyKSxoOiQoXCJIb3Vyc1wiLDEsLTEyKSxtbTokKFwiTWludXRlc1wiLDIpLG06JChcIk1pbnV0ZXNcIiwxKSxzczokKFwiU2Vjb25kc1wiLDIpLHM6JChcIlNlY29uZHNcIiwxKSxzc3M6JChcIk1pbGxpc2Vjb25kc1wiLDMpLEVFRUU6dmIoXCJEYXlcIiksRUVFOnZiKFwiRGF5XCIsITApLGE6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gMTI+YS5nZXRIb3VycygpP2MuQU1QTVNbMF06Yy5BTVBNU1sxXX0sWjpmdW5jdGlvbihhKXthPS0xKmEuZ2V0VGltZXpvbmVPZmZzZXQoKTtyZXR1cm4gYT0oMDw9YT9cIitcIjpcIlwiKSsoWGIoTWF0aFswPFxuYT9cImZsb29yXCI6XCJjZWlsXCJdKGEvNjApLDIpK1hiKE1hdGguYWJzKGElNjApLDIpKX19LEllPS8oKD86W155TWRIaG1zYVpFJ10rKXwoPzonKD86W14nXXwnJykqJyl8KD86RSt8eSt8TSt8ZCt8SCt8aCt8bSt8cyt8YXxaKSkoLiopLyxIZT0vXlxcLT9cXGQrJC87SmMuJGluamVjdD1bXCIkbG9jYWxlXCJdO3ZhciBGZT1iYShLKSxHZT1iYShJYSk7TGMuJGluamVjdD1bXCIkcGFyc2VcIl07dmFyIGRkPWJhKHtyZXN0cmljdDpcIkVcIixjb21waWxlOmZ1bmN0aW9uKGEsYyl7OD49USYmKGMuaHJlZnx8Yy5uYW1lfHxjLiRzZXQoXCJocmVmXCIsXCJcIiksYS5hcHBlbmQoWC5jcmVhdGVDb21tZW50KFwiSUUgZml4XCIpKSk7aWYoIWMuaHJlZiYmIWMueGxpbmtIcmVmJiYhYy5uYW1lKXJldHVybiBmdW5jdGlvbihhLGMpe3ZhciBmPVwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PXphLmNhbGwoYy5wcm9wKFwiaHJlZlwiKSk/XCJ4bGluazpocmVmXCI6XCJocmVmXCI7Yy5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7Yy5hdHRyKGYpfHxcbmEucHJldmVudERlZmF1bHQoKX0pfX19KSxGYj17fTtyKHFiLGZ1bmN0aW9uKGEsYyl7aWYoXCJtdWx0aXBsZVwiIT1hKXt2YXIgZD1wYShcIm5nLVwiK2MpO0ZiW2RdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5OjEwMCxsaW5rOmZ1bmN0aW9uKGEsZixnKXthLiR3YXRjaChnW2RdLGZ1bmN0aW9uKGEpe2cuJHNldChjLCEhYSl9KX19fX19KTtyKFtcInNyY1wiLFwic3Jjc2V0XCIsXCJocmVmXCJdLGZ1bmN0aW9uKGEpe3ZhciBjPXBhKFwibmctXCIrYSk7RmJbY109ZnVuY3Rpb24oKXtyZXR1cm57cHJpb3JpdHk6OTksbGluazpmdW5jdGlvbihkLGUsZil7dmFyIGc9YSxrPWE7XCJocmVmXCI9PT1hJiZcIltvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddXCI9PT16YS5jYWxsKGUucHJvcChcImhyZWZcIikpJiYoaz1cInhsaW5rSHJlZlwiLGYuJGF0dHJba109XCJ4bGluazpocmVmXCIsZz1udWxsKTtmLiRvYnNlcnZlKGMsZnVuY3Rpb24oYyl7Yz8oZi4kc2V0KGssYyksUSYmZyYmZS5wcm9wKGcsZltrXSkpOlwiaHJlZlwiPT09XG5hJiZmLiRzZXQoayxudWxsKX0pfX19fSk7dmFyIHliPXskYWRkQ29udHJvbDpFLCRyZW1vdmVDb250cm9sOkUsJHNldFZhbGlkaXR5OkUsJHNldERpcnR5OkUsJHNldFByaXN0aW5lOkV9O09jLiRpbmplY3Q9W1wiJGVsZW1lbnRcIixcIiRhdHRyc1wiLFwiJHNjb3BlXCIsXCIkYW5pbWF0ZVwiXTt2YXIgUmM9ZnVuY3Rpb24oYSl7cmV0dXJuW1wiJHRpbWVvdXRcIixmdW5jdGlvbihjKXtyZXR1cm57bmFtZTpcImZvcm1cIixyZXN0cmljdDphP1wiRUFDXCI6XCJFXCIsY29udHJvbGxlcjpPYyxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihhLGUsZixnKXtpZighZi5hY3Rpb24pe3ZhciBrPWZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITF9O3NiKGVbMF0sXCJzdWJtaXRcIixrKTtlLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2MoZnVuY3Rpb24oKXskYShlWzBdLFwic3VibWl0XCIsayl9LDAsITEpfSl9dmFyIG09ZS5wYXJlbnQoKS5jb250cm9sbGVyKFwiZm9ybVwiKSxcbmg9Zi5uYW1lfHxmLm5nRm9ybTtoJiZ1YihhLGgsZyxoKTtpZihtKWUub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7bS4kcmVtb3ZlQ29udHJvbChnKTtoJiZ1YihhLGgsdCxoKTtEKGcseWIpfSl9fX19fV19LGVkPVJjKCkscmQ9UmMoITApLFNlPS9eKGZ0cHxodHRwfGh0dHBzKTpcXC9cXC8oXFx3Kzp7MCwxfVxcdypAKT8oXFxTKykoOlswLTldKyk/KFxcL3xcXC8oW1xcdyMhOi4/Kz0mJUAhXFwtXFwvXSkpPyQvLFRlPS9eW2EtejAtOSEjJCUmJyorXFwvPT9eX2B7fH1+Li1dK0BbYS16MC05XShbYS16MC05LV0qW2EtejAtOV0pPyhcXC5bYS16MC05XShbYS16MC05LV0qW2EtejAtOV0pPykqJC9pLFVlPS9eXFxzKihcXC18XFwrKT8oXFxkK3woXFxkKihcXC5cXGQqKSkpXFxzKiQvLFNjPXt0ZXh0OkFiLG51bWJlcjpmdW5jdGlvbihhLGMsZCxlLGYsZyl7QWIoYSxjLGQsZSxmLGcpO2UuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXt2YXIgYz1lLiRpc0VtcHR5KGEpO2lmKGN8fFVlLnRlc3QoYSkpcmV0dXJuIGUuJHNldFZhbGlkaXR5KFwibnVtYmVyXCIsXG4hMCksXCJcIj09PWE/bnVsbDpjP2E6cGFyc2VGbG9hdChhKTtlLiRzZXRWYWxpZGl0eShcIm51bWJlclwiLCExKTtyZXR1cm4gdH0pO0tlKGUsXCJudW1iZXJcIixWZSxudWxsLGUuJCR2YWxpZGl0eVN0YXRlKTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGUuJGlzRW1wdHkoYSk/XCJcIjpcIlwiK2F9KTtkLm1pbiYmKGE9ZnVuY3Rpb24oYSl7dmFyIGM9cGFyc2VGbG9hdChkLm1pbik7cmV0dXJuIHNhKGUsXCJtaW5cIixlLiRpc0VtcHR5KGEpfHxhPj1jLGEpfSxlLiRwYXJzZXJzLnB1c2goYSksZS4kZm9ybWF0dGVycy5wdXNoKGEpKTtkLm1heCYmKGE9ZnVuY3Rpb24oYSl7dmFyIGM9cGFyc2VGbG9hdChkLm1heCk7cmV0dXJuIHNhKGUsXCJtYXhcIixlLiRpc0VtcHR5KGEpfHxhPD1jLGEpfSxlLiRwYXJzZXJzLnB1c2goYSksZS4kZm9ybWF0dGVycy5wdXNoKGEpKTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIHNhKGUsXCJudW1iZXJcIixlLiRpc0VtcHR5KGEpfHxcbmliKGEpLGEpfSl9LHVybDpmdW5jdGlvbihhLGMsZCxlLGYsZyl7QWIoYSxjLGQsZSxmLGcpO2E9ZnVuY3Rpb24oYSl7cmV0dXJuIHNhKGUsXCJ1cmxcIixlLiRpc0VtcHR5KGEpfHxTZS50ZXN0KGEpLGEpfTtlLiRmb3JtYXR0ZXJzLnB1c2goYSk7ZS4kcGFyc2Vycy5wdXNoKGEpfSxlbWFpbDpmdW5jdGlvbihhLGMsZCxlLGYsZyl7QWIoYSxjLGQsZSxmLGcpO2E9ZnVuY3Rpb24oYSl7cmV0dXJuIHNhKGUsXCJlbWFpbFwiLGUuJGlzRW1wdHkoYSl8fFRlLnRlc3QoYSksYSl9O2UuJGZvcm1hdHRlcnMucHVzaChhKTtlLiRwYXJzZXJzLnB1c2goYSl9LHJhZGlvOmZ1bmN0aW9uKGEsYyxkLGUpe3goZC5uYW1lKSYmYy5hdHRyKFwibmFtZVwiLGhiKCkpO2Mub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7Y1swXS5jaGVja2VkJiZhLiRhcHBseShmdW5jdGlvbigpe2UuJHNldFZpZXdWYWx1ZShkLnZhbHVlKX0pfSk7ZS4kcmVuZGVyPWZ1bmN0aW9uKCl7Y1swXS5jaGVja2VkPWQudmFsdWU9PWUuJHZpZXdWYWx1ZX07XG5kLiRvYnNlcnZlKFwidmFsdWVcIixlLiRyZW5kZXIpfSxjaGVja2JveDpmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1kLm5nVHJ1ZVZhbHVlLGc9ZC5uZ0ZhbHNlVmFsdWU7dihmKXx8KGY9ITApO3YoZyl8fChnPSExKTtjLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7ZS4kc2V0Vmlld1ZhbHVlKGNbMF0uY2hlY2tlZCl9KX0pO2UuJHJlbmRlcj1mdW5jdGlvbigpe2NbMF0uY2hlY2tlZD1lLiR2aWV3VmFsdWV9O2UuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT1mfTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1mfSk7ZS4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBhP2Y6Z30pfSxoaWRkZW46RSxidXR0b246RSxzdWJtaXQ6RSxyZXNldDpFLGZpbGU6RX0sVmU9W1wiYmFkSW5wdXRcIl0samM9W1wiJGJyb3dzZXJcIixcIiRzbmlmZmVyXCIsZnVuY3Rpb24oYSxjKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpcIj9uZ01vZGVsXCIsXG5saW5rOmZ1bmN0aW9uKGQsZSxmLGcpe2cmJihTY1tLKGYudHlwZSldfHxTYy50ZXh0KShkLGUsZixnLGMsYSl9fX1dLHdiPVwibmctdmFsaWRcIix4Yj1cIm5nLWludmFsaWRcIixPYT1cIm5nLXByaXN0aW5lXCIsemI9XCJuZy1kaXJ0eVwiLFdlPVtcIiRzY29wZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiRhdHRyc1wiLFwiJGVsZW1lbnRcIixcIiRwYXJzZVwiLFwiJGFuaW1hdGVcIixmdW5jdGlvbihhLGMsZCxlLGYsZyl7ZnVuY3Rpb24gayhhLGMpe2M9Yz9cIi1cIittYihjLFwiLVwiKTpcIlwiO2cucmVtb3ZlQ2xhc3MoZSwoYT94Yjp3YikrYyk7Zy5hZGRDbGFzcyhlLChhP3diOnhiKStjKX10aGlzLiRtb2RlbFZhbHVlPXRoaXMuJHZpZXdWYWx1ZT1OdW1iZXIuTmFOO3RoaXMuJHBhcnNlcnM9W107dGhpcy4kZm9ybWF0dGVycz1bXTt0aGlzLiR2aWV3Q2hhbmdlTGlzdGVuZXJzPVtdO3RoaXMuJHByaXN0aW5lPSEwO3RoaXMuJGRpcnR5PSExO3RoaXMuJHZhbGlkPSEwO3RoaXMuJGludmFsaWQ9ITE7dGhpcy4kbmFtZT1cbmQubmFtZTt2YXIgbT1mKGQubmdNb2RlbCksaD1tLmFzc2lnbjtpZighaCl0aHJvdyBDKFwibmdNb2RlbFwiKShcIm5vbmFzc2lnblwiLGQubmdNb2RlbCxpYShlKSk7dGhpcy4kcmVuZGVyPUU7dGhpcy4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4geChhKXx8XCJcIj09PWF8fG51bGw9PT1hfHxhIT09YX07dmFyIGw9ZS5pbmhlcml0ZWREYXRhKFwiJGZvcm1Db250cm9sbGVyXCIpfHx5YixuPTAscD10aGlzLiRlcnJvcj17fTtlLmFkZENsYXNzKE9hKTtrKCEwKTt0aGlzLiRzZXRWYWxpZGl0eT1mdW5jdGlvbihhLGMpe3BbYV0hPT0hYyYmKGM/KHBbYV0mJm4tLSxufHwoayghMCksdGhpcy4kdmFsaWQ9ITAsdGhpcy4kaW52YWxpZD0hMSkpOihrKCExKSx0aGlzLiRpbnZhbGlkPSEwLHRoaXMuJHZhbGlkPSExLG4rKykscFthXT0hYyxrKGMsYSksbC4kc2V0VmFsaWRpdHkoYSxjLHRoaXMpKX07dGhpcy4kc2V0UHJpc3RpbmU9ZnVuY3Rpb24oKXt0aGlzLiRkaXJ0eT0hMTt0aGlzLiRwcmlzdGluZT1cbiEwO2cucmVtb3ZlQ2xhc3MoZSx6Yik7Zy5hZGRDbGFzcyhlLE9hKX07dGhpcy4kc2V0Vmlld1ZhbHVlPWZ1bmN0aW9uKGQpe3RoaXMuJHZpZXdWYWx1ZT1kO3RoaXMuJHByaXN0aW5lJiYodGhpcy4kZGlydHk9ITAsdGhpcy4kcHJpc3RpbmU9ITEsZy5yZW1vdmVDbGFzcyhlLE9hKSxnLmFkZENsYXNzKGUsemIpLGwuJHNldERpcnR5KCkpO3IodGhpcy4kcGFyc2VycyxmdW5jdGlvbihhKXtkPWEoZCl9KTt0aGlzLiRtb2RlbFZhbHVlIT09ZCYmKHRoaXMuJG1vZGVsVmFsdWU9ZCxoKGEsZCkscih0aGlzLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLGZ1bmN0aW9uKGEpe3RyeXthKCl9Y2F0Y2goZCl7YyhkKX19KSl9O3ZhciBxPXRoaXM7YS4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgYz1tKGEpO2lmKHEuJG1vZGVsVmFsdWUhPT1jKXt2YXIgZD1xLiRmb3JtYXR0ZXJzLGU9ZC5sZW5ndGg7Zm9yKHEuJG1vZGVsVmFsdWU9YztlLS07KWM9ZFtlXShjKTtxLiR2aWV3VmFsdWUhPT1jJiYocS4kdmlld1ZhbHVlPVxuYyxxLiRyZW5kZXIoKSl9cmV0dXJuIGN9KX1dLEdkPWZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6W1wibmdNb2RlbFwiLFwiXj9mb3JtXCJdLGNvbnRyb2xsZXI6V2UsbGluazpmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1lWzBdLGc9ZVsxXXx8eWI7Zy4kYWRkQ29udHJvbChmKTthLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtnLiRyZW1vdmVDb250cm9sKGYpfSl9fX0sSWQ9YmEoe3JlcXVpcmU6XCJuZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXtlLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKXthLiRldmFsKGQubmdDaGFuZ2UpfSl9fSksa2M9ZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXtpZihlKXtkLnJlcXVpcmVkPSEwO3ZhciBmPWZ1bmN0aW9uKGEpe2lmKGQucmVxdWlyZWQmJmUuJGlzRW1wdHkoYSkpZS4kc2V0VmFsaWRpdHkoXCJyZXF1aXJlZFwiLCExKTtlbHNlIHJldHVybiBlLiRzZXRWYWxpZGl0eShcInJlcXVpcmVkXCIsXG4hMCksYX07ZS4kZm9ybWF0dGVycy5wdXNoKGYpO2UuJHBhcnNlcnMudW5zaGlmdChmKTtkLiRvYnNlcnZlKFwicmVxdWlyZWRcIixmdW5jdGlvbigpe2YoZS4kdmlld1ZhbHVlKX0pfX19fSxIZD1mdW5jdGlvbigpe3JldHVybntyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGY9KGE9L1xcLyguKilcXC8vLmV4ZWMoZC5uZ0xpc3QpKSYmUmVnRXhwKGFbMV0pfHxkLm5nTGlzdHx8XCIsXCI7ZS4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe2lmKCF4KGEpKXt2YXIgYz1bXTthJiZyKGEuc3BsaXQoZiksZnVuY3Rpb24oYSl7YSYmYy5wdXNoKGFhKGEpKX0pO3JldHVybiBjfX0pO2UuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gSihhKT9hLmpvaW4oXCIsIFwiKTp0fSk7ZS4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hYXx8IWEubGVuZ3RofX19fSxYZT0vXih0cnVlfGZhbHNlfFxcZCspJC8sSmQ9ZnVuY3Rpb24oKXtyZXR1cm57cHJpb3JpdHk6MTAwLFxuY29tcGlsZTpmdW5jdGlvbihhLGMpe3JldHVybiBYZS50ZXN0KGMubmdWYWx1ZSk/ZnVuY3Rpb24oYSxjLGYpe2YuJHNldChcInZhbHVlXCIsYS4kZXZhbChmLm5nVmFsdWUpKX06ZnVuY3Rpb24oYSxjLGYpe2EuJHdhdGNoKGYubmdWYWx1ZSxmdW5jdGlvbihhKXtmLiRzZXQoXCJ2YWx1ZVwiLGEpfSl9fX19LGpkPXlhKHtjb21waWxlOmZ1bmN0aW9uKGEpe2EuYWRkQ2xhc3MoXCJuZy1iaW5kaW5nXCIpO3JldHVybiBmdW5jdGlvbihhLGQsZSl7ZC5kYXRhKFwiJGJpbmRpbmdcIixlLm5nQmluZCk7YS4kd2F0Y2goZS5uZ0JpbmQsZnVuY3Rpb24oYSl7ZC50ZXh0KGE9PXQ/XCJcIjphKX0pfX19KSxsZD1bXCIkaW50ZXJwb2xhdGVcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe2M9YShkLmF0dHIoZS4kYXR0ci5uZ0JpbmRUZW1wbGF0ZSkpO2QuYWRkQ2xhc3MoXCJuZy1iaW5kaW5nXCIpLmRhdGEoXCIkYmluZGluZ1wiLGMpO2UuJG9ic2VydmUoXCJuZ0JpbmRUZW1wbGF0ZVwiLGZ1bmN0aW9uKGEpe2QudGV4dChhKX0pfX1dLFxua2Q9W1wiJHNjZVwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxjKXtyZXR1cm57Y29tcGlsZTpmdW5jdGlvbihkKXtkLmFkZENsYXNzKFwibmctYmluZGluZ1wiKTtyZXR1cm4gZnVuY3Rpb24oZCxmLGcpe2YuZGF0YShcIiRiaW5kaW5nXCIsZy5uZ0JpbmRIdG1sKTt2YXIgaz1jKGcubmdCaW5kSHRtbCk7ZC4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4oayhkKXx8XCJcIikudG9TdHJpbmcoKX0sZnVuY3Rpb24oYyl7Zi5odG1sKGEuZ2V0VHJ1c3RlZEh0bWwoayhkKSl8fFwiXCIpfSl9fX19XSxtZD1ZYihcIlwiLCEwKSxvZD1ZYihcIk9kZFwiLDApLG5kPVliKFwiRXZlblwiLDEpLHBkPXlhKHtjb21waWxlOmZ1bmN0aW9uKGEsYyl7Yy4kc2V0KFwibmdDbG9ha1wiLHQpO2EucmVtb3ZlQ2xhc3MoXCJuZy1jbG9ha1wiKX19KSxxZD1bZnVuY3Rpb24oKXtyZXR1cm57c2NvcGU6ITAsY29udHJvbGxlcjpcIkBcIixwcmlvcml0eTo1MDB9fV0sbGM9e30sWWU9e2JsdXI6ITAsZm9jdXM6ITB9O3IoXCJjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vtb3ZlIG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBrZXlkb3duIGtleXVwIGtleXByZXNzIHN1Ym1pdCBmb2N1cyBibHVyIGNvcHkgY3V0IHBhc3RlXCIuc3BsaXQoXCIgXCIpLFxuZnVuY3Rpb24oYSl7dmFyIGM9cGEoXCJuZy1cIithKTtsY1tjXT1bXCIkcGFyc2VcIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihkLGUpe3JldHVybntjb21waWxlOmZ1bmN0aW9uKGYsZyl7dmFyIGs9ZChnW2NdKTtyZXR1cm4gZnVuY3Rpb24oYyxkKXtkLm9uKGEsZnVuY3Rpb24oZCl7dmFyIGY9ZnVuY3Rpb24oKXtrKGMseyRldmVudDpkfSl9O1llW2FdJiZlLiQkcGhhc2U/Yy4kZXZhbEFzeW5jKGYpOmMuJGFwcGx5KGYpfSl9fX19XX0pO3ZhciB0ZD1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybnt0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHByaW9yaXR5OjYwMCx0ZXJtaW5hbDohMCxyZXN0cmljdDpcIkFcIiwkJHRsYjohMCxsaW5rOmZ1bmN0aW9uKGMsZCxlLGYsZyl7dmFyIGssbSxoO2MuJHdhdGNoKGUubmdJZixmdW5jdGlvbihmKXtVYShmKT9tfHwobT1jLiRuZXcoKSxnKG0sZnVuY3Rpb24oYyl7Y1tjLmxlbmd0aCsrXT1YLmNyZWF0ZUNvbW1lbnQoXCIgZW5kIG5nSWY6IFwiK2UubmdJZitcblwiIFwiKTtrPXtjbG9uZTpjfTthLmVudGVyKGMsZC5wYXJlbnQoKSxkKX0pKTooaCYmKGgucmVtb3ZlKCksaD1udWxsKSxtJiYobS4kZGVzdHJveSgpLG09bnVsbCksayYmKGg9RWIoay5jbG9uZSksYS5sZWF2ZShoLGZ1bmN0aW9uKCl7aD1udWxsfSksaz1udWxsKSl9KX19fV0sdWQ9W1wiJGh0dHBcIixcIiR0ZW1wbGF0ZUNhY2hlXCIsXCIkYW5jaG9yU2Nyb2xsXCIsXCIkYW5pbWF0ZVwiLFwiJHNjZVwiLGZ1bmN0aW9uKGEsYyxkLGUsZil7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6NDAwLHRlcm1pbmFsOiEwLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIsY29udHJvbGxlcjpWYS5ub29wLGNvbXBpbGU6ZnVuY3Rpb24oZyxrKXt2YXIgbT1rLm5nSW5jbHVkZXx8ay5zcmMsaD1rLm9ubG9hZHx8XCJcIixsPWsuYXV0b3Njcm9sbDtyZXR1cm4gZnVuY3Rpb24oZyxrLHEscixGKXt2YXIgdT0wLHQsdyxSLHo9ZnVuY3Rpb24oKXt3JiYody5yZW1vdmUoKSx3PW51bGwpO3QmJih0LiRkZXN0cm95KCksdD1udWxsKTtcblImJihlLmxlYXZlKFIsZnVuY3Rpb24oKXt3PW51bGx9KSx3PVIsUj1udWxsKX07Zy4kd2F0Y2goZi5wYXJzZUFzUmVzb3VyY2VVcmwobSksZnVuY3Rpb24oZil7dmFyIG09ZnVuY3Rpb24oKXsheShsKXx8bCYmIWcuJGV2YWwobCl8fGQoKX0scT0rK3U7Zj8oYS5nZXQoZix7Y2FjaGU6Y30pLnN1Y2Nlc3MoZnVuY3Rpb24oYSl7aWYocT09PXUpe3ZhciBjPWcuJG5ldygpO3IudGVtcGxhdGU9YTthPUYoYyxmdW5jdGlvbihhKXt6KCk7ZS5lbnRlcihhLG51bGwsayxtKX0pO3Q9YztSPWE7dC4kZW1pdChcIiRpbmNsdWRlQ29udGVudExvYWRlZFwiKTtnLiRldmFsKGgpfX0pLmVycm9yKGZ1bmN0aW9uKCl7cT09PXUmJnooKX0pLGcuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWRcIikpOih6KCksci50ZW1wbGF0ZT1udWxsKX0pfX19fV0sS2Q9W1wiJGNvbXBpbGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFQ0FcIixwcmlvcml0eTotNDAwLHJlcXVpcmU6XCJuZ0luY2x1ZGVcIixcbmxpbms6ZnVuY3Rpb24oYyxkLGUsZil7ZC5odG1sKGYudGVtcGxhdGUpO2EoZC5jb250ZW50cygpKShjKX19fV0sdmQ9eWEoe3ByaW9yaXR5OjQ1MCxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihhLGMsZCl7YS4kZXZhbChkLm5nSW5pdCl9fX19KSx3ZD15YSh7dGVybWluYWw6ITAscHJpb3JpdHk6MUUzfSkseGQ9W1wiJGxvY2FsZVwiLFwiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD0ve30vZztyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLGxpbms6ZnVuY3Rpb24oZSxmLGcpe3ZhciBrPWcuY291bnQsbT1nLiRhdHRyLndoZW4mJmYuYXR0cihnLiRhdHRyLndoZW4pLGg9Zy5vZmZzZXR8fDAsbD1lLiRldmFsKG0pfHx7fSxuPXt9LHA9Yy5zdGFydFN5bWJvbCgpLHE9Yy5lbmRTeW1ib2woKSxzPS9ed2hlbihNaW51cyk/KC4rKSQvO3IoZyxmdW5jdGlvbihhLGMpe3MudGVzdChjKSYmKGxbSyhjLnJlcGxhY2UoXCJ3aGVuXCIsXCJcIikucmVwbGFjZShcIk1pbnVzXCIsXCItXCIpKV09XG5mLmF0dHIoZy4kYXR0cltjXSkpfSk7cihsLGZ1bmN0aW9uKGEsZSl7bltlXT1jKGEucmVwbGFjZShkLHAraytcIi1cIitoK3EpKX0pO2UuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGM9cGFyc2VGbG9hdChlLiRldmFsKGspKTtpZihpc05hTihjKSlyZXR1cm5cIlwiO2MgaW4gbHx8KGM9YS5wbHVyYWxDYXQoYy1oKSk7cmV0dXJuIG5bY10oZSxmLCEwKX0sZnVuY3Rpb24oYSl7Zi50ZXh0KGEpfSl9fX1dLHlkPVtcIiRwYXJzZVwiLFwiJGFuaW1hdGVcIixmdW5jdGlvbihhLGMpe3ZhciBkPUMoXCJuZ1JlcGVhdFwiKTtyZXR1cm57dHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eToxRTMsdGVybWluYWw6ITAsJCR0bGI6ITAsbGluazpmdW5jdGlvbihlLGYsZyxrLG0pe3ZhciBoPWcubmdSZXBlYXQsbD1oLm1hdGNoKC9eXFxzKihbXFxzXFxTXSs/KVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT9cXHMqJC8pLG4scCxxLHMsdCx1LEE9eyRpZDpLYX07aWYoIWwpdGhyb3cgZChcImlleHBcIixcbmgpO2c9bFsxXTtrPWxbMl07KGw9bFszXSk/KG49YShsKSxwPWZ1bmN0aW9uKGEsYyxkKXt1JiYoQVt1XT1hKTtBW3RdPWM7QS4kaW5kZXg9ZDtyZXR1cm4gbihlLEEpfSk6KHE9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gS2EoYyl9LHM9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9KTtsPWcubWF0Y2goL14oPzooW1xcJFxcd10rKXxcXCgoW1xcJFxcd10rKVxccyosXFxzKihbXFwkXFx3XSspXFwpKSQvKTtpZighbCl0aHJvdyBkKFwiaWlkZXhwXCIsZyk7dD1sWzNdfHxsWzFdO3U9bFsyXTt2YXIgeT17fTtlLiR3YXRjaENvbGxlY3Rpb24oayxmdW5jdGlvbihhKXt2YXIgZyxrLGw9ZlswXSxuLEE9e30sQixJLEgsdixFLEMseCxKPVtdO2lmKFBhKGEpKUM9YSxFPXB8fHE7ZWxzZXtFPXB8fHM7Qz1bXTtmb3IoSCBpbiBhKWEuaGFzT3duUHJvcGVydHkoSCkmJlwiJFwiIT1ILmNoYXJBdCgwKSYmQy5wdXNoKEgpO0Muc29ydCgpfUI9Qy5sZW5ndGg7az1KLmxlbmd0aD1DLmxlbmd0aDtmb3IoZz0wO2c8aztnKyspaWYoSD1hPT09XG5DP2c6Q1tnXSx2PWFbSF0sbj1FKEgsdixnKSxEYShuLFwiYHRyYWNrIGJ5YCBpZFwiKSx5Lmhhc093blByb3BlcnR5KG4pKXg9eVtuXSxkZWxldGUgeVtuXSxBW25dPXgsSltnXT14O2Vsc2V7aWYoQS5oYXNPd25Qcm9wZXJ0eShuKSl0aHJvdyByKEosZnVuY3Rpb24oYSl7YSYmYS5zY29wZSYmKHlbYS5pZF09YSl9KSxkKFwiZHVwZXNcIixoLG4sbmEodikpO0pbZ109e2lkOm59O0Fbbl09ITF9Zm9yKEggaW4geSl5Lmhhc093blByb3BlcnR5KEgpJiYoeD15W0hdLGc9RWIoeC5jbG9uZSksYy5sZWF2ZShnKSxyKGcsZnVuY3Rpb24oYSl7YS4kJE5HX1JFTU9WRUQ9ITB9KSx4LnNjb3BlLiRkZXN0cm95KCkpO2c9MDtmb3Ioaz1DLmxlbmd0aDtnPGs7ZysrKXtIPWE9PT1DP2c6Q1tnXTt2PWFbSF07eD1KW2ddO0pbZy0xXSYmKGw9SltnLTFdLmNsb25lW0pbZy0xXS5jbG9uZS5sZW5ndGgtMV0pO2lmKHguc2NvcGUpe0k9eC5zY29wZTtuPWw7ZG8gbj1uLm5leHRTaWJsaW5nO3doaWxlKG4mJm4uJCROR19SRU1PVkVEKTtcbnguY2xvbmVbMF0hPW4mJmMubW92ZShFYih4LmNsb25lKSxudWxsLHcobCkpO2w9eC5jbG9uZVt4LmNsb25lLmxlbmd0aC0xXX1lbHNlIEk9ZS4kbmV3KCk7SVt0XT12O3UmJihJW3VdPUgpO0kuJGluZGV4PWc7SS4kZmlyc3Q9MD09PWc7SS4kbGFzdD1nPT09Qi0xO0kuJG1pZGRsZT0hKEkuJGZpcnN0fHxJLiRsYXN0KTtJLiRvZGQ9IShJLiRldmVuPTA9PT0oZyYxKSk7eC5zY29wZXx8bShJLGZ1bmN0aW9uKGEpe2FbYS5sZW5ndGgrK109WC5jcmVhdGVDb21tZW50KFwiIGVuZCBuZ1JlcGVhdDogXCIraCtcIiBcIik7Yy5lbnRlcihhLG51bGwsdyhsKSk7bD1hO3guc2NvcGU9STt4LmNsb25lPWE7QVt4LmlkXT14fSl9eT1BfSl9fX1dLHpkPVtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXtjLiR3YXRjaChlLm5nU2hvdyxmdW5jdGlvbihjKXthW1VhKGMpP1wicmVtb3ZlQ2xhc3NcIjpcImFkZENsYXNzXCJdKGQsXCJuZy1oaWRlXCIpfSl9fV0sc2Q9W1wiJGFuaW1hdGVcIixcbmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjLGQsZSl7Yy4kd2F0Y2goZS5uZ0hpZGUsZnVuY3Rpb24oYyl7YVtVYShjKT9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShkLFwibmctaGlkZVwiKX0pfX1dLEFkPXlhKGZ1bmN0aW9uKGEsYyxkKXthLiR3YXRjaChkLm5nU3R5bGUsZnVuY3Rpb24oYSxkKXtkJiZhIT09ZCYmcihkLGZ1bmN0aW9uKGEsZCl7Yy5jc3MoZCxcIlwiKX0pO2EmJmMuY3NzKGEpfSwhMCl9KSxCZD1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVxdWlyZTpcIm5nU3dpdGNoXCIsY29udHJvbGxlcjpbXCIkc2NvcGVcIixmdW5jdGlvbigpe3RoaXMuY2FzZXM9e319XSxsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpe3ZhciBnPVtdLGs9W10sbT1bXSxoPVtdO2MuJHdhdGNoKGUubmdTd2l0Y2h8fGUub24sZnVuY3Rpb24oZCl7dmFyIG4scDtuPTA7Zm9yKHA9bS5sZW5ndGg7bjxwOysrbiltW25dLnJlbW92ZSgpO249bS5sZW5ndGg9MDtmb3IocD1cbmgubGVuZ3RoO248cDsrK24pe3ZhciBxPWtbbl07aFtuXS4kZGVzdHJveSgpO21bbl09cTthLmxlYXZlKHEsZnVuY3Rpb24oKXttLnNwbGljZShuLDEpfSl9ay5sZW5ndGg9MDtoLmxlbmd0aD0wO2lmKGc9Zi5jYXNlc1tcIiFcIitkXXx8Zi5jYXNlc1tcIj9cIl0pYy4kZXZhbChlLmNoYW5nZSkscihnLGZ1bmN0aW9uKGQpe3ZhciBlPWMuJG5ldygpO2gucHVzaChlKTtkLnRyYW5zY2x1ZGUoZSxmdW5jdGlvbihjKXt2YXIgZT1kLmVsZW1lbnQ7ay5wdXNoKGMpO2EuZW50ZXIoYyxlLnBhcmVudCgpLGUpfSl9KX0pfX19XSxDZD15YSh7dHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eTo4MDAscmVxdWlyZTpcIl5uZ1N3aXRjaFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSxmKXtlLmNhc2VzW1wiIVwiK2QubmdTd2l0Y2hXaGVuXT1lLmNhc2VzW1wiIVwiK2QubmdTd2l0Y2hXaGVuXXx8W107ZS5jYXNlc1tcIiFcIitkLm5nU3dpdGNoV2hlbl0ucHVzaCh7dHJhbnNjbHVkZTpmLGVsZW1lbnQ6Y30pfX0pLERkPVxueWEoe3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6ODAwLHJlcXVpcmU6XCJebmdTd2l0Y2hcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUsZil7ZS5jYXNlc1tcIj9cIl09ZS5jYXNlc1tcIj9cIl18fFtdO2UuY2FzZXNbXCI/XCJdLnB1c2goe3RyYW5zY2x1ZGU6ZixlbGVtZW50OmN9KX19KSxGZD15YSh7bGluazpmdW5jdGlvbihhLGMsZCxlLGYpe2lmKCFmKXRocm93IEMoXCJuZ1RyYW5zY2x1ZGVcIikoXCJvcnBoYW5cIixpYShjKSk7ZihmdW5jdGlvbihhKXtjLmVtcHR5KCk7Yy5hcHBlbmQoYSl9KX19KSxmZD1bXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVcIix0ZXJtaW5hbDohMCxjb21waWxlOmZ1bmN0aW9uKGMsZCl7XCJ0ZXh0L25nLXRlbXBsYXRlXCI9PWQudHlwZSYmYS5wdXQoZC5pZCxjWzBdLnRleHQpfX19XSxaZT1DKFwibmdPcHRpb25zXCIpLEVkPWJhKHt0ZXJtaW5hbDohMH0pLGdkPVtcIiRjb21waWxlXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGMpe3ZhciBkPVxuL15cXHMqKFtcXHNcXFNdKz8pKD86XFxzK2FzXFxzKyhbXFxzXFxTXSs/KSk/KD86XFxzK2dyb3VwXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/XFxzK2ZvclxccysoPzooW1xcJFxcd11bXFwkXFx3XSopfCg/OlxcKFxccyooW1xcJFxcd11bXFwkXFx3XSopXFxzKixcXHMqKFtcXCRcXHddW1xcJFxcd10qKVxccypcXCkpKVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT8kLyxlPXskc2V0Vmlld1ZhbHVlOkV9O3JldHVybntyZXN0cmljdDpcIkVcIixyZXF1aXJlOltcInNlbGVjdFwiLFwiP25nTW9kZWxcIl0sY29udHJvbGxlcjpbXCIkZWxlbWVudFwiLFwiJHNjb3BlXCIsXCIkYXR0cnNcIixmdW5jdGlvbihhLGMsZCl7dmFyIG09dGhpcyxoPXt9LGw9ZSxuO20uZGF0YWJvdW5kPWQubmdNb2RlbDttLmluaXQ9ZnVuY3Rpb24oYSxjLGQpe2w9YTtuPWR9O20uYWRkT3B0aW9uPWZ1bmN0aW9uKGMpe0RhKGMsJ1wib3B0aW9uIHZhbHVlXCInKTtoW2NdPSEwO2wuJHZpZXdWYWx1ZT09YyYmKGEudmFsKGMpLG4ucGFyZW50KCkmJm4ucmVtb3ZlKCkpfTtcbm0ucmVtb3ZlT3B0aW9uPWZ1bmN0aW9uKGEpe3RoaXMuaGFzT3B0aW9uKGEpJiYoZGVsZXRlIGhbYV0sbC4kdmlld1ZhbHVlPT1hJiZ0aGlzLnJlbmRlclVua25vd25PcHRpb24oYSkpfTttLnJlbmRlclVua25vd25PcHRpb249ZnVuY3Rpb24oYyl7Yz1cIj8gXCIrS2EoYykrXCIgP1wiO24udmFsKGMpO2EucHJlcGVuZChuKTthLnZhbChjKTtuLnByb3AoXCJzZWxlY3RlZFwiLCEwKX07bS5oYXNPcHRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIGguaGFzT3duUHJvcGVydHkoYSl9O2MuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe20ucmVuZGVyVW5rbm93bk9wdGlvbj1FfSl9XSxsaW5rOmZ1bmN0aW9uKGUsZyxrLG0pe2Z1bmN0aW9uIGgoYSxjLGQsZSl7ZC4kcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGE9ZC4kdmlld1ZhbHVlO2UuaGFzT3B0aW9uKGEpPyh2LnBhcmVudCgpJiZ2LnJlbW92ZSgpLGMudmFsKGEpLFwiXCI9PT1hJiZ1LnByb3AoXCJzZWxlY3RlZFwiLCEwKSk6eChhKSYmdT9jLnZhbChcIlwiKTplLnJlbmRlclVua25vd25PcHRpb24oYSl9O1xuYy5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7YS4kYXBwbHkoZnVuY3Rpb24oKXt2LnBhcmVudCgpJiZ2LnJlbW92ZSgpO2QuJHNldFZpZXdWYWx1ZShjLnZhbCgpKX0pfSl9ZnVuY3Rpb24gbChhLGMsZCl7dmFyIGU7ZC4kcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IGJiKGQuJHZpZXdWYWx1ZSk7cihjLmZpbmQoXCJvcHRpb25cIiksZnVuY3Rpb24oYyl7Yy5zZWxlY3RlZD15KGEuZ2V0KGMudmFsdWUpKX0pfTthLiR3YXRjaChmdW5jdGlvbigpe0FhKGUsZC4kdmlld1ZhbHVlKXx8KGU9aGEoZC4kdmlld1ZhbHVlKSxkLiRyZW5kZXIoKSl9KTtjLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXthLiRhcHBseShmdW5jdGlvbigpe3ZhciBhPVtdO3IoYy5maW5kKFwib3B0aW9uXCIpLGZ1bmN0aW9uKGMpe2Muc2VsZWN0ZWQmJmEucHVzaChjLnZhbHVlKX0pO2QuJHNldFZpZXdWYWx1ZShhKX0pfSl9ZnVuY3Rpb24gbihlLGYsZyl7ZnVuY3Rpb24gaygpe3ZhciBhPXtcIlwiOltdfSxjPVtcIlwiXSxkLGgsXG5zLHQsdjtzPWcuJG1vZGVsVmFsdWU7dD13KGUpfHxbXTt2YXIgRT1uP1piKHQpOnQsSSxNLEI7TT17fTtCPSExO2lmKHEpaWYoaD1nLiRtb2RlbFZhbHVlLHgmJkooaCkpZm9yKEI9bmV3IGJiKFtdKSxkPXt9LHY9MDt2PGgubGVuZ3RoO3YrKylkW21dPWhbdl0sQi5wdXQoeChlLGQpLGhbdl0pO2Vsc2UgQj1uZXcgYmIoaCk7dj1CO3ZhciBELEs7Zm9yKEI9MDtJPUUubGVuZ3RoLEI8STtCKyspe2g9QjtpZihuKXtoPUVbQl07aWYoXCIkXCI9PT1oLmNoYXJBdCgwKSljb250aW51ZTtNW25dPWh9TVttXT10W2hdO2Q9cihlLE0pfHxcIlwiOyhoPWFbZF0pfHwoaD1hW2RdPVtdLGMucHVzaChkKSk7cT9kPXkodi5yZW1vdmUoeD94KGUsTSk6dShlLE0pKSk6KHg/KGQ9e30sZFttXT1zLGQ9eChlLGQpPT09eChlLE0pKTpkPXM9PT11KGUsTSksdj12fHxkKTtEPWwoZSxNKTtEPXkoRCk/RDpcIlwiO2gucHVzaCh7aWQ6eD94KGUsTSk6bj9FW0JdOkIsbGFiZWw6RCxzZWxlY3RlZDpkfSl9cXx8KEZ8fG51bGw9PT1cbnM/YVtcIlwiXS51bnNoaWZ0KHtpZDpcIlwiLGxhYmVsOlwiXCIsc2VsZWN0ZWQ6IXZ9KTp2fHxhW1wiXCJdLnVuc2hpZnQoe2lkOlwiP1wiLGxhYmVsOlwiXCIsc2VsZWN0ZWQ6ITB9KSk7TT0wO2ZvcihFPWMubGVuZ3RoO008RTtNKyspe2Q9Y1tNXTtoPWFbZF07ei5sZW5ndGg8PU0/KHM9e2VsZW1lbnQ6Qy5jbG9uZSgpLmF0dHIoXCJsYWJlbFwiLGQpLGxhYmVsOmgubGFiZWx9LHQ9W3NdLHoucHVzaCh0KSxmLmFwcGVuZChzLmVsZW1lbnQpKToodD16W01dLHM9dFswXSxzLmxhYmVsIT1kJiZzLmVsZW1lbnQuYXR0cihcImxhYmVsXCIscy5sYWJlbD1kKSk7RD1udWxsO0I9MDtmb3IoST1oLmxlbmd0aDtCPEk7QisrKWQ9aFtCXSwodj10W0IrMV0pPyhEPXYuZWxlbWVudCx2LmxhYmVsIT09ZC5sYWJlbCYmRC50ZXh0KHYubGFiZWw9ZC5sYWJlbCksdi5pZCE9PWQuaWQmJkQudmFsKHYuaWQ9ZC5pZCksRFswXS5zZWxlY3RlZCE9PWQuc2VsZWN0ZWQmJihELnByb3AoXCJzZWxlY3RlZFwiLHYuc2VsZWN0ZWQ9ZC5zZWxlY3RlZCksXG5RJiZELnByb3AoXCJzZWxlY3RlZFwiLHYuc2VsZWN0ZWQpKSk6KFwiXCI9PT1kLmlkJiZGP0s9RjooSz1BLmNsb25lKCkpLnZhbChkLmlkKS5wcm9wKFwic2VsZWN0ZWRcIixkLnNlbGVjdGVkKS5hdHRyKFwic2VsZWN0ZWRcIixkLnNlbGVjdGVkKS50ZXh0KGQubGFiZWwpLHQucHVzaCh7ZWxlbWVudDpLLGxhYmVsOmQubGFiZWwsaWQ6ZC5pZCxzZWxlY3RlZDpkLnNlbGVjdGVkfSkscC5hZGRPcHRpb24oZC5sYWJlbCxLKSxEP0QuYWZ0ZXIoSyk6cy5lbGVtZW50LmFwcGVuZChLKSxEPUspO2ZvcihCKys7dC5sZW5ndGg+QjspZD10LnBvcCgpLHAucmVtb3ZlT3B0aW9uKGQubGFiZWwpLGQuZWxlbWVudC5yZW1vdmUoKX1mb3IoO3oubGVuZ3RoPk07KXoucG9wKClbMF0uZWxlbWVudC5yZW1vdmUoKX12YXIgaDtpZighKGg9cy5tYXRjaChkKSkpdGhyb3cgWmUoXCJpZXhwXCIscyxpYShmKSk7dmFyIGw9YyhoWzJdfHxoWzFdKSxtPWhbNF18fGhbNl0sbj1oWzVdLHI9YyhoWzNdfHxcIlwiKSx1PWMoaFsyXT9cbmhbMV06bSksdz1jKGhbN10pLHg9aFs4XT9jKGhbOF0pOm51bGwsej1bW3tlbGVtZW50OmYsbGFiZWw6XCJcIn1dXTtGJiYoYShGKShlKSxGLnJlbW92ZUNsYXNzKFwibmctc2NvcGVcIiksRi5yZW1vdmUoKSk7Zi5lbXB0eSgpO2Yub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2UuJGFwcGx5KGZ1bmN0aW9uKCl7dmFyIGEsYz13KGUpfHxbXSxkPXt9LGgsbCxwLHIscyx2LHk7aWYocSlmb3IobD1bXSxyPTAsdj16Lmxlbmd0aDtyPHY7cisrKWZvcihhPXpbcl0scD0xLHM9YS5sZW5ndGg7cDxzO3ArKyl7aWYoKGg9YVtwXS5lbGVtZW50KVswXS5zZWxlY3RlZCl7aD1oLnZhbCgpO24mJihkW25dPWgpO2lmKHgpZm9yKHk9MDt5PGMubGVuZ3RoJiYoZFttXT1jW3ldLHgoZSxkKSE9aCk7eSsrKTtlbHNlIGRbbV09Y1toXTtsLnB1c2godShlLGQpKX19ZWxzZSBpZihoPWYudmFsKCksXCI/XCI9PWgpbD10O2Vsc2UgaWYoXCJcIj09PWgpbD1udWxsO2Vsc2UgaWYoeClmb3IoeT0wO3k8Yy5sZW5ndGg7eSsrKXtpZihkW21dPVxuY1t5XSx4KGUsZCk9PWgpe2w9dShlLGQpO2JyZWFrfX1lbHNlIGRbbV09Y1toXSxuJiYoZFtuXT1oKSxsPXUoZSxkKTtnLiRzZXRWaWV3VmFsdWUobCk7aygpfSl9KTtnLiRyZW5kZXI9aztlLiR3YXRjaENvbGxlY3Rpb24odyxrKTtlLiR3YXRjaENvbGxlY3Rpb24oZnVuY3Rpb24oKXt2YXIgYT17fSxjPXcoZSk7aWYoYyl7Zm9yKHZhciBkPUFycmF5KGMubGVuZ3RoKSxmPTAsZz1jLmxlbmd0aDtmPGc7ZisrKWFbbV09Y1tmXSxkW2ZdPWwoZSxhKTtyZXR1cm4gZH19LGspO3EmJmUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpe3JldHVybiBnLiRtb2RlbFZhbHVlfSxrKX1pZihtWzFdKXt2YXIgcD1tWzBdO209bVsxXTt2YXIgcT1rLm11bHRpcGxlLHM9ay5uZ09wdGlvbnMsRj0hMSx1LEE9dyhYLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpLEM9dyhYLmNyZWF0ZUVsZW1lbnQoXCJvcHRncm91cFwiKSksdj1BLmNsb25lKCk7az0wO2Zvcih2YXIgej1nLmNoaWxkcmVuKCksRT16Lmxlbmd0aDtrPFxuRTtrKyspaWYoXCJcIj09PXpba10udmFsdWUpe3U9Rj16LmVxKGspO2JyZWFrfXAuaW5pdChtLEYsdik7cSYmKG0uJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fDA9PT1hLmxlbmd0aH0pO3M/bihlLGcsbSk6cT9sKGUsZyxtKTpoKGUsZyxtLHApfX19fV0saWQ9W1wiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oYSl7dmFyIGM9e2FkZE9wdGlvbjpFLHJlbW92ZU9wdGlvbjpFfTtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oZCxlKXtpZih4KGUudmFsdWUpKXt2YXIgZj1hKGQudGV4dCgpLCEwKTtmfHxlLiRzZXQoXCJ2YWx1ZVwiLGQudGV4dCgpKX1yZXR1cm4gZnVuY3Rpb24oYSxkLGUpe3ZhciBoPWQucGFyZW50KCksbD1oLmRhdGEoXCIkc2VsZWN0Q29udHJvbGxlclwiKXx8aC5wYXJlbnQoKS5kYXRhKFwiJHNlbGVjdENvbnRyb2xsZXJcIik7bCYmbC5kYXRhYm91bmQ/ZC5wcm9wKFwic2VsZWN0ZWRcIiwhMSk6bD1jO2Y/YS4kd2F0Y2goZixmdW5jdGlvbihhLFxuYyl7ZS4kc2V0KFwidmFsdWVcIixhKTthIT09YyYmbC5yZW1vdmVPcHRpb24oYyk7bC5hZGRPcHRpb24oYSl9KTpsLmFkZE9wdGlvbihlLnZhbHVlKTtkLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2wucmVtb3ZlT3B0aW9uKGUudmFsdWUpfSl9fX19XSxoZD1iYSh7cmVzdHJpY3Q6XCJFXCIsdGVybWluYWw6ITB9KTtXLmFuZ3VsYXIuYm9vdHN0cmFwP2NvbnNvbGUubG9nKFwiV0FSTklORzogVHJpZWQgdG8gbG9hZCBhbmd1bGFyIG1vcmUgdGhhbiBvbmNlLlwiKTooKEVhPVcualF1ZXJ5KSYmRWEuZm4ub24/KHc9RWEsRChFYS5mbix7c2NvcGU6TGEuc2NvcGUsaXNvbGF0ZVNjb3BlOkxhLmlzb2xhdGVTY29wZSxjb250cm9sbGVyOkxhLmNvbnRyb2xsZXIsaW5qZWN0b3I6TGEuaW5qZWN0b3IsaW5oZXJpdGVkRGF0YTpMYS5pbmhlcml0ZWREYXRhfSksR2IoXCJyZW1vdmVcIiwhMCwhMCwhMSksR2IoXCJlbXB0eVwiLCExLCExLCExKSxHYihcImh0bWxcIiwhMSwhMSwhMCkpOnc9UyxWYS5lbGVtZW50PXcsXG4kYyhWYSksdyhYKS5yZWFkeShmdW5jdGlvbigpe1hjKFgsZmMpfSkpfSkod2luZG93LGRvY3VtZW50KTshd2luZG93LmFuZ3VsYXIuJCRjc3AoKSYmd2luZG93LmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZChcImhlYWRcIikucHJlcGVuZCgnPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPkBjaGFyc2V0IFwiVVRGLThcIjtbbmdcXFxcOmNsb2FrXSxbbmctY2xvYWtdLFtkYXRhLW5nLWNsb2FrXSxbeC1uZy1jbG9ha10sLm5nLWNsb2FrLC54LW5nLWNsb2FrLC5uZy1oaWRle2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O31uZ1xcXFw6Zm9ybXtkaXNwbGF5OmJsb2NrO30ubmctYW5pbWF0ZS1ibG9jay10cmFuc2l0aW9uc3t0cmFuc2l0aW9uOjBzIGFsbCFpbXBvcnRhbnQ7LXdlYmtpdC10cmFuc2l0aW9uOjBzIGFsbCFpbXBvcnRhbnQ7fS5uZy1oaWRlLWFkZC1hY3RpdmUsLm5nLWhpZGUtcmVtb3Zle2Rpc3BsYXk6YmxvY2shaW1wb3J0YW50O308L3N0eWxlPicpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci5taW4uanMubWFwXG5cbjsgYnJvd3NlcmlmeV9zaGltX19kZWZpbmVfX21vZHVsZV9fZXhwb3J0X18odHlwZW9mIGFuZ3VsYXIgIT0gXCJ1bmRlZmluZWRcIiA/IGFuZ3VsYXIgOiB3aW5kb3cuYW5ndWxhcik7XG5cbn0pLmNhbGwoZ2xvYmFsLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGZ1bmN0aW9uIGRlZmluZUV4cG9ydChleCkgeyBtb2R1bGUuZXhwb3J0cyA9IGV4OyB9KTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pIiwiKGZ1bmN0aW9uIChnbG9iYWwpe1xuXG47IHJlcXVpcmUoXCIvaG9tZS9jb2Rpby93b3Jrc3BhY2UvYm93ZXJfY29tcG9uZW50cy9pb25pYy9yZWxlYXNlL2pzL2lvbmljLm1pbi5qc1wiKTtcbnJlcXVpcmUoXCIvaG9tZS9jb2Rpby93b3Jrc3BhY2UvYm93ZXJfY29tcG9uZW50cy9hbmd1bGFyL2FuZ3VsYXIubWluLmpzXCIpO1xucmVxdWlyZShcIi9ob21lL2NvZGlvL3dvcmtzcGFjZS9ib3dlcl9jb21wb25lbnRzL2FuZ3VsYXItYW5pbWF0ZS9hbmd1bGFyLWFuaW1hdGUubWluLmpzXCIpO1xucmVxdWlyZShcIi9ob21lL2NvZGlvL3dvcmtzcGFjZS9ib3dlcl9jb21wb25lbnRzL2FuZ3VsYXItc2FuaXRpemUvYW5ndWxhci1zYW5pdGl6ZS5taW4uanNcIik7XG5yZXF1aXJlKFwiL2hvbWUvY29kaW8vd29ya3NwYWNlL2Jvd2VyX2NvbXBvbmVudHMvYW5ndWxhci11aS1yb3V0ZXIvcmVsZWFzZS9hbmd1bGFyLXVpLXJvdXRlci5taW4uanNcIik7XG47X19icm93c2VyaWZ5X3NoaW1fcmVxdWlyZV9fPXJlcXVpcmU7KGZ1bmN0aW9uIGJyb3dzZXJpZnlTaGltKG1vZHVsZSwgZXhwb3J0cywgcmVxdWlyZSwgZGVmaW5lLCBicm93c2VyaWZ5X3NoaW1fX2RlZmluZV9fbW9kdWxlX19leHBvcnRfXykge1xuLyohXG4gKiBDb3B5cmlnaHQgMjAxNCBEcmlmdHkgQ28uXG4gKiBodHRwOi8vZHJpZnR5LmNvbS9cbiAqXG4gKiBJb25pYywgdjEuMC4wLWJldGEuMTNcbiAqIEEgcG93ZXJmdWwgSFRNTDUgbW9iaWxlIGFwcCBmcmFtZXdvcmsuXG4gKiBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tL1xuICpcbiAqIEJ5IEBtYXhseW5jaCwgQGJlbmpzcGVycnksIEBhZGFtZGJyYWRsZXkgPDNcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuIFBsZWFzZSBzZWUgTElDRU5TRSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqXG4gKi9cblxuIWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtpZihlLiRyb290IT09ZSl7dmFyIHQ9ZS4kcGFyZW50O2UuJCRkaXNjb25uZWN0ZWQ9ITAsdC4kJGNoaWxkSGVhZD09PWUmJih0LiQkY2hpbGRIZWFkPWUuJCRuZXh0U2libGluZyksdC4kJGNoaWxkVGFpbD09PWUmJih0LiQkY2hpbGRUYWlsPWUuJCRwcmV2U2libGluZyksZS4kJHByZXZTaWJsaW5nJiYoZS4kJHByZXZTaWJsaW5nLiQkbmV4dFNpYmxpbmc9ZS4kJG5leHRTaWJsaW5nKSxlLiQkbmV4dFNpYmxpbmcmJihlLiQkbmV4dFNpYmxpbmcuJCRwcmV2U2libGluZz1lLiQkcHJldlNpYmxpbmcpLGUuJCRuZXh0U2libGluZz1lLiQkcHJldlNpYmxpbmc9bnVsbH19ZnVuY3Rpb24gdChlKXtpZihlLiRyb290IT09ZSYmZS4kJGRpc2Nvbm5lY3RlZCl7dmFyIHQ9ZS4kcGFyZW50O2UuJCRkaXNjb25uZWN0ZWQ9ITEsZS4kJHByZXZTaWJsaW5nPXQuJCRjaGlsZFRhaWwsdC4kJGNoaWxkSGVhZD8odC4kJGNoaWxkVGFpbC4kJG5leHRTaWJsaW5nPWUsdC4kJGNoaWxkVGFpbD1lKTp0LiQkY2hpbGRIZWFkPXQuJCRjaGlsZFRhaWw9ZX19ZnVuY3Rpb24gbihlKXtyZXR1cm5bXCIkbG9nXCIsZnVuY3Rpb24odCl7ZnVuY3Rpb24gbihlKXt0aGlzLmhhbmRsZT1lfXZhciBpPXRoaXMsbz10aGlzLl9pbnN0YW5jZXM9W107dGhpcy5fcmVnaXN0ZXJJbnN0YW5jZT1mdW5jdGlvbihlLHQpe3JldHVybiBlLiQkZGVsZWdhdGVIYW5kbGU9dCxvLnB1c2goZSksZnVuY3Rpb24oKXt2YXIgdD1vLmluZGV4T2YoZSk7LTEhPT10JiZvLnNwbGljZSh0LDEpfX0sdGhpcy4kZ2V0QnlIYW5kbGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/bmV3IG4oZSk6aX0sZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe24ucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIG4saSxyPXRoaXMuaGFuZGxlLGE9YXJndW1lbnRzLHM9MDtyZXR1cm4gby5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuJCRkZWxlZ2F0ZUhhbmRsZT09PXImJihzKyssaT10W2VdLmFwcGx5KHQsYSksMT09PXMmJihuPWkpKX0pLHM/bjp0Lndhcm4oJ0RlbGVnYXRlIGZvciBoYW5kbGUgXCInK3RoaXMuaGFuZGxlKydcIiBjb3VsZCBub3QgZmluZCBhIGNvcnJlc3BvbmRpbmcgZWxlbWVudCB3aXRoIGRlbGVnYXRlLWhhbmRsZT1cIicrdGhpcy5oYW5kbGUrJ1wiISAnK2UrXCIoKSB3YXMgbm90IGNhbGxlZCFcXG5Qb3NzaWJsZSBjYXVzZTogSWYgeW91IGFyZSBjYWxsaW5nIFwiK2UrJygpIGltbWVkaWF0ZWx5LCBhbmQgeW91ciBlbGVtZW50IHdpdGggZGVsZWdhdGUtaGFuZGxlPVwiJyt0aGlzLmhhbmRsZSsnXCIgaXMgYSBjaGlsZCBvZiB5b3VyIGNvbnRyb2xsZXIsIHRoZW4geW91ciBlbGVtZW50IG1heSBub3QgYmUgY29tcGlsZWQgeWV0LiBQdXQgYSAkdGltZW91dCBhcm91bmQgeW91ciBjYWxsIHRvICcrZStcIigpIGFuZCB0cnkgYWdhaW4uXCIpfSxpW2VdPWZ1bmN0aW9uKCl7dmFyIHQsbixpPWFyZ3VtZW50cztyZXR1cm4gby5mb3JFYWNoKGZ1bmN0aW9uKG8scil7bj1vW2VdLmFwcGx5KG8saSksMD09PXImJih0PW4pfSksdH19KX1dfWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm5bZnVuY3Rpb24oKXtyZXR1cm57cHJpb3JpdHk6XCI5OVwiLGxpbms6ZnVuY3Rpb24obixpLG8pe28uJG9ic2VydmUoZSxmdW5jdGlvbihlKXtlfHxpWzBdLnJlbW92ZUF0dHJpYnV0ZSh0KX0pfX19XX1mdW5jdGlvbiBvKGUpe3JldHVybltcIiRpb25pY0dlc3R1cmVcIixcIiRwYXJzZVwiLGZ1bmN0aW9uKHQsbil7dmFyIGk9ZS5zdWJzdHIoMikudG9Mb3dlckNhc2UoKTtyZXR1cm4gZnVuY3Rpb24obyxyLGEpe3ZhciBzPW4oYVtlXSksYz1mdW5jdGlvbihlKXtvLiRhcHBseShmdW5jdGlvbigpe3Mobyx7JGV2ZW50OmV9KX0pfSxsPXQub24oaSxjLHIpO28uJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe3Qub2ZmKGwsaSxjKX0pfX1dfWZ1bmN0aW9uIHIoKXtyZXR1cm5bXCIkaW9uaWNTY3JvbGxEZWxlZ2F0ZVwiLGZ1bmN0aW9uKGUpe3JldHVybntyZXN0cmljdDpcIkVcIixsaW5rOmZ1bmN0aW9uKHQsbixpKXtmdW5jdGlvbiBvKHQpe2Zvcih2YXIgaT0zLG89dC50YXJnZXQ7aS0tJiZvOyl7aWYoby5jbGFzc0xpc3QuY29udGFpbnMoXCJidXR0b25cIil8fG8udGFnTmFtZS5tYXRjaCgvaW5wdXR8dGV4dGFyZWF8c2VsZWN0L2kpfHxvLmlzQ29udGVudEVkaXRhYmxlKXJldHVybjtvPW8ucGFyZW50Tm9kZX12YXIgcj10Lmdlc3R1cmUmJnQuZ2VzdHVyZS50b3VjaGVzWzBdfHx0LmRldGFpbC50b3VjaGVzWzBdLGE9blswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpb25pYy5Eb21VdGlsLnJlY3RDb250YWlucyhyLnBhZ2VYLHIucGFnZVksYS5sZWZ0LGEudG9wLTIwLGEubGVmdCthLndpZHRoLGEudG9wK2EuaGVpZ2h0KSYmZS5zY3JvbGxUb3AoITApfVwidHJ1ZVwiIT1pLm5vVGFwU2Nyb2xsJiYoaW9uaWMub24oXCJ0YXBcIixvLG5bMF0pLHQuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2lvbmljLm9mZihcInRhcFwiLG8sblswXSl9KSl9fX1dfWZ1bmN0aW9uIGEoZSl7cmV0dXJuW2Z1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLGNvbXBpbGU6ZnVuY3Rpb24odCl7ZnVuY3Rpb24gbih0LG4saSl7dmFyIG89KG5ldyBpb25pYy52aWV3cy5IZWFkZXJCYXIoe2VsOm5bMF0sYWxpZ25UaXRsZTppLmFsaWduVGl0bGV8fFwiY2VudGVyXCJ9KSxuWzBdKTtlPyh0LiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBvLmNsYXNzTmFtZX0sZnVuY3Rpb24oZSl7dmFyIG49LTE9PT1lLmluZGV4T2YoXCJuZy1oaWRlXCIpLGk9LTEhPT1lLmluZGV4T2YoXCJiYXItc3ViaGVhZGVyXCIpO3QuJGhhc0hlYWRlcj1uJiYhaSx0LiRoYXNTdWJoZWFkZXI9biYmaX0pLHQuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2RlbGV0ZSB0LiRoYXNIZWFkZXIsZGVsZXRlIHQuJGhhc1N1YmhlYWRlcn0pKToodC4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gby5jbGFzc05hbWV9LGZ1bmN0aW9uKGUpe3ZhciBuPS0xPT09ZS5pbmRleE9mKFwibmctaGlkZVwiKSxpPS0xIT09ZS5pbmRleE9mKFwiYmFyLXN1YmZvb3RlclwiKTt0LiRoYXNGb290ZXI9biYmIWksdC4kaGFzU3ViZm9vdGVyPW4mJml9KSx0LiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtkZWxldGUgdC4kaGFzRm9vdGVyLGRlbGV0ZSB0LiRoYXNTdWJmb290ZXJ9KSx0LiR3YXRjaChcIiRoYXNUYWJzXCIsZnVuY3Rpb24oZSl7bi50b2dnbGVDbGFzcyhcImhhcy10YWJzXCIsISFlKX0pKX10LmFkZENsYXNzKGU/XCJiYXIgYmFyLWhlYWRlclwiOlwiYmFyIGJhci1mb290ZXJcIik7dmFyIGk9dFswXS5wYXJlbnROb2RlO3JldHVybiBpLnF1ZXJ5U2VsZWN0b3IoXCIudGFicy10b3BcIikmJnQuYWRkQ2xhc3MoXCJoYXMtdGFicy10b3BcIikse3ByZTpufX19fV19ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZS5jbGllbnRIZWlnaHR9ZnVuY3Rpb24gYyhlKXtlLnN0b3BQcm9wYWdhdGlvbigpfXZhciBsPXttZXRob2Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPSExO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBpfHwoaT0hMCx0KGUpKSxuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LGZpZWxkOmZ1bmN0aW9uKGUsdCxuLGksbyl7dmFyIHI9ITEsYT1mdW5jdGlvbigpe3JldHVybiByfHwocj0hMCx0KGUpKSxvfSxzPWZ1bmN0aW9uKG4pe3JldHVybiByfHwocj0hMCx0KGUpKSxvPW4sbn07T2JqZWN0LmRlZmluZVByb3BlcnR5KG4saSx7Z2V0OmEsc2V0OnMsZW51bWVyYWJsZTohMH0pfX0sdT1hbmd1bGFyLm1vZHVsZShcImlvbmljXCIsW1wibmdBbmltYXRlXCIsXCJuZ1Nhbml0aXplXCIsXCJ1aS5yb3V0ZXJcIl0pLGQ9YW5ndWxhci5leHRlbmQsZj1hbmd1bGFyLmZvckVhY2gsaD1hbmd1bGFyLmlzRGVmaW5lZCxwPWFuZ3VsYXIuaXNTdHJpbmcsdj1hbmd1bGFyLmVsZW1lbnQ7dS5mYWN0b3J5KFwiJGlvbmljQWN0aW9uU2hlZXRcIixbXCIkcm9vdFNjb3BlXCIsXCIkY29tcGlsZVwiLFwiJGFuaW1hdGVcIixcIiR0aW1lb3V0XCIsXCIkaW9uaWNUZW1wbGF0ZUxvYWRlclwiLFwiJGlvbmljUGxhdGZvcm1cIixcIiRpb25pY0JvZHlcIixmdW5jdGlvbihlLHQsbixpLG8scixhKXtmdW5jdGlvbiBzKG8pe3ZhciBzPWUuJG5ldyghMCk7YW5ndWxhci5leHRlbmQocyx7Y2FuY2VsOmFuZ3VsYXIubm9vcCxkZXN0cnVjdGl2ZUJ1dHRvbkNsaWNrZWQ6YW5ndWxhci5ub29wLGJ1dHRvbkNsaWNrZWQ6YW5ndWxhci5ub29wLCRkZXJlZ2lzdGVyQmFja0J1dHRvbjphbmd1bGFyLm5vb3AsYnV0dG9uczpbXSxjYW5jZWxPblN0YXRlQ2hhbmdlOiEwfSxvfHx7fSk7dmFyIGM9cy5lbGVtZW50PXQoJzxpb24tYWN0aW9uLXNoZWV0IGJ1dHRvbnM9XCJidXR0b25zXCI+PC9pb24tYWN0aW9uLXNoZWV0PicpKHMpLGw9dihjWzBdLnF1ZXJ5U2VsZWN0b3IoXCIuYWN0aW9uLXNoZWV0LXdyYXBwZXJcIikpLHU9cy5jYW5jZWxPblN0YXRlQ2hhbmdlP2UuJG9uKFwiJHN0YXRlQ2hhbmdlU3VjY2Vzc1wiLGZ1bmN0aW9uKCl7cy5jYW5jZWwoKX0pOmFuZ3VsYXIubm9vcDtyZXR1cm4gcy5yZW1vdmVTaGVldD1mdW5jdGlvbihlKXtzLnJlbW92ZWR8fChzLnJlbW92ZWQ9ITAsbC5yZW1vdmVDbGFzcyhcImFjdGlvbi1zaGVldC11cFwiKSxpKGZ1bmN0aW9uKCl7YS5yZW1vdmVDbGFzcyhcImFjdGlvbi1zaGVldC1vcGVuXCIpfSw0MDApLHMuJGRlcmVnaXN0ZXJCYWNrQnV0dG9uKCksdSgpLG4ucmVtb3ZlQ2xhc3MoYyxcImFjdGl2ZVwiLGZ1bmN0aW9uKCl7cy4kZGVzdHJveSgpLGMucmVtb3ZlKCkscy5jYW5jZWwuJHNjb3BlPW51bGwsKGV8fGFuZ3VsYXIubm9vcCkoKX0pKX0scy5zaG93U2hlZXQ9ZnVuY3Rpb24oZSl7cy5yZW1vdmVkfHwoYS5hcHBlbmQoYykuYWRkQ2xhc3MoXCJhY3Rpb24tc2hlZXQtb3BlblwiKSxuLmFkZENsYXNzKGMsXCJhY3RpdmVcIixmdW5jdGlvbigpe3MucmVtb3ZlZHx8KGV8fGFuZ3VsYXIubm9vcCkoKX0pLGkoZnVuY3Rpb24oKXtzLnJlbW92ZWR8fGwuYWRkQ2xhc3MoXCJhY3Rpb24tc2hlZXQtdXBcIil9LDIwLCExKSl9LHMuJGRlcmVnaXN0ZXJCYWNrQnV0dG9uPXIucmVnaXN0ZXJCYWNrQnV0dG9uQWN0aW9uKGZ1bmN0aW9uKCl7aShzLmNhbmNlbCl9LEMpLHMuY2FuY2VsPWZ1bmN0aW9uKCl7cy5yZW1vdmVTaGVldChvLmNhbmNlbCl9LHMuYnV0dG9uQ2xpY2tlZD1mdW5jdGlvbihlKXtvLmJ1dHRvbkNsaWNrZWQoZSxvLmJ1dHRvbnNbZV0pPT09ITAmJnMucmVtb3ZlU2hlZXQoKX0scy5kZXN0cnVjdGl2ZUJ1dHRvbkNsaWNrZWQ9ZnVuY3Rpb24oKXtvLmRlc3RydWN0aXZlQnV0dG9uQ2xpY2tlZCgpPT09ITAmJnMucmVtb3ZlU2hlZXQoKX0scy5zaG93U2hlZXQoKSxzLmNhbmNlbC4kc2NvcGU9cyxzLmNhbmNlbH1yZXR1cm57c2hvdzpzfX1dKSx2LnByb3RvdHlwZS5hZGRDbGFzcz1mdW5jdGlvbihlKXt2YXIgdCxuLGksbyxyLGE7aWYoZSYmXCJuZy1zY29wZVwiIT1lJiZcIm5nLWlzb2xhdGUtc2NvcGVcIiE9ZSlmb3IodD0wO3Q8dGhpcy5sZW5ndGg7dCsrKWlmKG89dGhpc1t0XSxvLnNldEF0dHJpYnV0ZSlpZihlLmluZGV4T2YoXCIgXCIpPDAmJm8uY2xhc3NMaXN0LmFkZClvLmNsYXNzTGlzdC5hZGQoZSk7ZWxzZXtmb3IoYT0oXCIgXCIrKG8uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKSxyPWUuc3BsaXQoXCIgXCIpLG49MDtuPHIubGVuZ3RoO24rKylpPXJbbl0udHJpbSgpLC0xPT09YS5pbmRleE9mKFwiIFwiK2krXCIgXCIpJiYoYSs9aStcIiBcIik7by5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGEudHJpbSgpKX1yZXR1cm4gdGhpc30sdi5wcm90b3R5cGUucmVtb3ZlQ2xhc3M9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLG8scjtpZihlKWZvcih0PTA7dDx0aGlzLmxlbmd0aDt0KyspaWYocj10aGlzW3RdLHIuZ2V0QXR0cmlidXRlKWlmKGUuaW5kZXhPZihcIiBcIik8MCYmci5jbGFzc0xpc3QucmVtb3ZlKXIuY2xhc3NMaXN0LnJlbW92ZShlKTtlbHNlIGZvcihpPWUuc3BsaXQoXCIgXCIpLG49MDtuPGkubGVuZ3RoO24rKylvPWlbbl0sci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLChcIiBcIisoci5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIikrXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csXCIgXCIpLnJlcGxhY2UoXCIgXCIrby50cmltKCkrXCIgXCIsXCIgXCIpLnRyaW0oKSk7cmV0dXJuIHRoaXN9LHUuZmFjdG9yeShcIiRpb25pY0JhY2tkcm9wXCIsW1wiJGRvY3VtZW50XCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbigpezE9PT0rK2EmJihyLmFkZENsYXNzKFwidmlzaWJsZVwiKSxpb25pYy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXthJiZyLmFkZENsYXNzKFwiYWN0aXZlXCIpfSkpfWZ1bmN0aW9uIGkoKXswPT09LS1hJiYoci5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSx0KGZ1bmN0aW9uKCl7IWEmJnIucmVtb3ZlQ2xhc3MoXCJ2aXNpYmxlXCIpfSw0MDAsITEpKX1mdW5jdGlvbiBvKCl7cmV0dXJuIHJ9dmFyIHI9dignPGRpdiBjbGFzcz1cImJhY2tkcm9wXCI+JyksYT0wO3JldHVybiBlWzBdLmJvZHkuYXBwZW5kQ2hpbGQoclswXSkse3JldGFpbjpuLHJlbGVhc2U6aSxnZXRFbGVtZW50Om8sX2VsZW1lbnQ6cn19XSksdS5mYWN0b3J5KFwiJGlvbmljQmluZFwiLFtcIiRwYXJzZVwiLFwiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oZSx0KXt2YXIgbj0vXlxccyooW0A9Jl0pKFxcPz8pXFxzKihcXHcqKVxccyokLztyZXR1cm4gZnVuY3Rpb24oaSxvLHIpe2Yocnx8e30sZnVuY3Rpb24ocixhKXt2YXIgcyxjLGw9ci5tYXRjaChuKXx8W10sdT1sWzNdfHxhLGQ9bFsxXTtzd2l0Y2goZCl7Y2FzZVwiQFwiOmlmKCFvW3VdKXJldHVybjtvLiRvYnNlcnZlKHUsZnVuY3Rpb24oZSl7aVthXT1lfSksb1t1XSYmKGlbYV09dChvW3VdKShpKSk7YnJlYWs7Y2FzZVwiPVwiOmlmKCFvW3VdKXJldHVybjtjPWkuJHdhdGNoKG9bdV0sZnVuY3Rpb24oZSl7aVthXT1lfSksaS4kb24oXCIkZGVzdHJveVwiLGMpO2JyZWFrO2Nhc2VcIiZcIjppZihvW3VdJiZvW3VdLm1hdGNoKFJlZ0V4cChhK1wiKC4qPylcIikpKXRocm93IG5ldyBFcnJvcignJiBleHByZXNzaW9uIGJpbmRpbmcgXCInK2ErJ1wiIGxvb2tzIGxpa2UgaXQgd2lsbCByZWN1cnNpdmVseSBjYWxsIFwiJytvW3VdKydcIiBhbmQgY2F1c2UgYSBzdGFjayBvdmVyZmxvdyEgUGxlYXNlIGNob29zZSBhIGRpZmZlcmVudCBzY29wZU5hbWUuJyk7cz1lKG9bdV0pLGlbYV09ZnVuY3Rpb24oZSl7cmV0dXJuIHMoaSxlKX19fSl9fV0pLHUuZmFjdG9yeShcIiRpb25pY0JvZHlcIixbXCIkZG9jdW1lbnRcIixmdW5jdGlvbihlKXtyZXR1cm57YWRkQ2xhc3M6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWVbMF0uYm9keS5jbGFzc0xpc3QuYWRkKGFyZ3VtZW50c1t0XSk7cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyllWzBdLmJvZHkuY2xhc3NMaXN0LnJlbW92ZShhcmd1bWVudHNbdF0pO3JldHVybiB0aGlzfSxlbmFibGVDbGFzczpmdW5jdGlvbihlKXt2YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLnNsaWNlKDEpO3JldHVybiBlP3RoaXMuYWRkQ2xhc3MuYXBwbHkodGhpcyx0KTp0aGlzLnJlbW92ZUNsYXNzLmFwcGx5KHRoaXMsdCksdGhpc30sYXBwZW5kOmZ1bmN0aW9uKHQpe3JldHVybiBlWzBdLmJvZHkuYXBwZW5kQ2hpbGQodC5sZW5ndGg/dFswXTp0KSx0aGlzfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZVswXS5ib2R5fX19XSksdS5mYWN0b3J5KFwiJGlvbmljQ2xpY2tCbG9ja1wiLFtcIiRkb2N1bWVudFwiLFwiJGlvbmljQm9keVwiLFwiJHRpbWVvdXRcIixmdW5jdGlvbihlLHQsbil7dmFyIGk9ZVswXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBpLmNsYXNzTmFtZT1cImNsaWNrLWJsb2NrXCIse3Nob3c6ZnVuY3Rpb24oKXtpLnBhcmVudEVsZW1lbnQ/aS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTp0LmFwcGVuZChpKSxuKGZ1bmN0aW9uKCl7aS5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKX0sNTAwKX0saGlkZTpmdW5jdGlvbigpe2kuY2xhc3NMaXN0LmFkZChcImhpZGVcIil9fX1dKSx1LmZhY3RvcnkoXCIkY29sbGVjdGlvbkRhdGFTb3VyY2VcIixbXCIkY2FjaGVGYWN0b3J5XCIsXCIkcGFyc2VcIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihuLGksbyl7ZnVuY3Rpb24gcihlKXtlLmNzcyhpb25pYy5DU1MuVFJBTlNGT1JNLFwidHJhbnNsYXRlM2QoLTIwMDBweCwtMjAwMHB4LDApXCIpfWZ1bmN0aW9uIGEoZSl7dGhpcy5zY29wZT1lLnNjb3BlLHRoaXMudHJhbnNjbHVkZUZuPWUudHJhbnNjbHVkZUZuLHRoaXMudHJhbnNjbHVkZVBhcmVudD1lLnRyYW5zY2x1ZGVQYXJlbnQsdGhpcy5lbGVtZW50PWUuZWxlbWVudCx0aGlzLmtleUV4cHI9ZS5rZXlFeHByLHRoaXMubGlzdEV4cHI9ZS5saXN0RXhwcix0aGlzLnRyYWNrQnlFeHByPWUudHJhY2tCeUV4cHIsdGhpcy5oZWlnaHRHZXR0ZXI9ZS5oZWlnaHRHZXR0ZXIsdGhpcy53aWR0aEdldHRlcj1lLndpZHRoR2V0dGVyLHRoaXMuZGltZW5zaW9ucz1bXSx0aGlzLmRhdGE9W10sdGhpcy5hdHRhY2hlZEl0ZW1zPXt9LHRoaXMuQkFDS1VQX0lURU1TX0xFTkdUSD0yMCx0aGlzLmJhY2t1cEl0ZW1zQXJyYXk9W119cmV0dXJuIGEucHJvdG90eXBlPXtzZXR1cDpmdW5jdGlvbigpe2lmKCF0aGlzLmlzU2V0dXApe3RoaXMuaXNTZXR1cD0hMDtmb3IodmFyIGU9MDtlPHRoaXMuQkFDS1VQX0lURU1TX0xFTkdUSDtlKyspdGhpcy5kZXRhY2hJdGVtKHRoaXMuY3JlYXRlSXRlbSgpKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRpbWVuc2lvbnMubGVuZ3RoPTAsdGhpcy5kYXRhPW51bGwsdGhpcy5iYWNrdXBJdGVtc0FycmF5Lmxlbmd0aD0wLHRoaXMuYXR0YWNoZWRJdGVtcz17fX0sY2FsY3VsYXRlRGF0YURpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgZT17fTt0aGlzLmRpbWVuc2lvbnM9dGhpcy5kYXRhLm1hcChmdW5jdGlvbih0LG4pe3JldHVybiBlW3RoaXMua2V5RXhwcl09dCxlLiRpbmRleD1uLHt3aWR0aDp0aGlzLndpZHRoR2V0dGVyKHRoaXMuc2NvcGUsZSksaGVpZ2h0OnRoaXMuaGVpZ2h0R2V0dGVyKHRoaXMuc2NvcGUsZSl9fSx0aGlzKSx0aGlzLmRpbWVuc2lvbnM9dGhpcy5iZWZvcmVTaWJsaW5ncy5jb25jYXQodGhpcy5kaW1lbnNpb25zKS5jb25jYXQodGhpcy5hZnRlclNpYmxpbmdzKSx0aGlzLmRhdGFTdGFydEluZGV4PXRoaXMuYmVmb3JlU2libGluZ3MubGVuZ3RofSxjcmVhdGVJdGVtOmZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIGUuc2NvcGU9dGhpcy5zY29wZS4kbmV3KCksdGhpcy50cmFuc2NsdWRlRm4oZS5zY29wZSxmdW5jdGlvbih0KXt0LmNzcyhcInBvc2l0aW9uXCIsXCJhYnNvbHV0ZVwiKSxlLmVsZW1lbnQ9dH0pLHRoaXMudHJhbnNjbHVkZVBhcmVudC5hcHBlbmQoZS5lbGVtZW50KSxlfSxnZXRJdGVtOmZ1bmN0aW9uKGUpe3JldHVybihpdGVtPXRoaXMuYXR0YWNoZWRJdGVtc1tlXSl8fCgoaXRlbT10aGlzLmJhY2t1cEl0ZW1zQXJyYXkucG9wKCkpP3QoaXRlbS5zY29wZSk6aXRlbT10aGlzLmNyZWF0ZUl0ZW0oKSksaXRlbX0sYXR0YWNoSXRlbUF0SW5kZXg6ZnVuY3Rpb24oZSl7aWYoZTx0aGlzLmRhdGFTdGFydEluZGV4KXJldHVybiB0aGlzLmJlZm9yZVNpYmxpbmdzW2VdO2lmKGUtPXRoaXMuZGF0YVN0YXJ0SW5kZXgsZT50aGlzLmRhdGEubGVuZ3RoLTEpcmV0dXJuIHRoaXMuYWZ0ZXJTaWJsaW5nc1tlLXRoaXMuZGF0YVN0YXJ0SW5kZXhdO3ZhciB0PXRoaXMuZ2V0SXRlbShlKSxuPXRoaXMuZGF0YVtlXTtyZXR1cm4odC5pbmRleCE9PWV8fHQuc2NvcGVbdGhpcy5rZXlFeHByXSE9PW4pJiYodC5pbmRleD10LnNjb3BlLiRpbmRleD1lLHQuc2NvcGVbdGhpcy5rZXlFeHByXT1uLHQuc2NvcGUuJGZpcnN0PTA9PT1lLHQuc2NvcGUuJGxhc3Q9ZT09PXRoaXMuZ2V0TGVuZ3RoKCktMSx0LnNjb3BlLiRtaWRkbGU9ISh0LnNjb3BlLiRmaXJzdHx8dC5zY29wZS4kbGFzdCksdC5zY29wZS4kb2RkPSEodC5zY29wZS4kZXZlbj0wPT09KDEmZSkpLG8uJCRwaGFzZXx8dC5zY29wZS4kZGlnZXN0KCkpLHRoaXMuYXR0YWNoZWRJdGVtc1tlXT10LHR9LGRlc3Ryb3lJdGVtOmZ1bmN0aW9uKGUpe2UuZWxlbWVudC5yZW1vdmUoKSxlLnNjb3BlLiRkZXN0cm95KCksZS5zY29wZT1udWxsLGUuZWxlbWVudD1udWxsfSxkZXRhY2hJdGVtOmZ1bmN0aW9uKHQpe2RlbGV0ZSB0aGlzLmF0dGFjaGVkSXRlbXNbdC5pbmRleF0sdC5pc091dHNpZGU/cih0LmVsZW1lbnQpOnRoaXMuYmFja3VwSXRlbXNBcnJheS5sZW5ndGg+PXRoaXMuQkFDS1VQX0lURU1TX0xFTkdUSD90aGlzLmRlc3Ryb3lJdGVtKHQpOih0aGlzLmJhY2t1cEl0ZW1zQXJyYXkucHVzaCh0KSxyKHQuZWxlbWVudCksZSh0LnNjb3BlKSl9LGdldExlbmd0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpbWVuc2lvbnMmJnRoaXMuZGltZW5zaW9ucy5sZW5ndGh8fDB9LHNldERhdGE6ZnVuY3Rpb24oZSx0LG4pe3RoaXMuZGF0YT1lfHxbXSx0aGlzLmJlZm9yZVNpYmxpbmdzPXR8fFtdLHRoaXMuYWZ0ZXJTaWJsaW5ncz1ufHxbXSx0aGlzLmNhbGN1bGF0ZURhdGFEaW1lbnNpb25zKCksdGhpcy5hZnRlclNpYmxpbmdzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5lbGVtZW50LmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpcIjBcIixsZWZ0OlwiMFwifSkscihlLmVsZW1lbnQpfSl9fSxhfV0pLHUuZmFjdG9yeShcIiRjb2xsZWN0aW9uUmVwZWF0TWFuYWdlclwiLFtcIiRyb290U2NvcGVcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbi52aWV3cG9ydFNpemV9dmFyIG49dGhpczt0aGlzLmRhdGFTb3VyY2U9ZS5kYXRhU291cmNlLHRoaXMuZWxlbWVudD1lLmVsZW1lbnQsdGhpcy5zY3JvbGxWaWV3PWUuc2Nyb2xsVmlldyx0aGlzLmlzVmVydGljYWw9ISF0aGlzLnNjcm9sbFZpZXcub3B0aW9ucy5zY3JvbGxpbmdZLHRoaXMucmVuZGVyZWRJdGVtcz17fSx0aGlzLmRpbWVuc2lvbnM9W10sdGhpcy5zZXRDdXJyZW50SW5kZXgoMCksdGhpcy5zY3JvbGxWaWV3Ll9fJGNhbGxiYWNrPXRoaXMuc2Nyb2xsVmlldy5fX2NhbGxiYWNrLHRoaXMuc2Nyb2xsVmlldy5fX2NhbGxiYWNrPWFuZ3VsYXIuYmluZCh0aGlzLHRoaXMucmVuZGVyU2Nyb2xsKSx0aGlzLmlzVmVydGljYWw/KHRoaXMuc2Nyb2xsVmlldy5vcHRpb25zLmdldENvbnRlbnRIZWlnaHQ9dCx0aGlzLnNjcm9sbFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsVmlldy5fX3Njcm9sbFRvcH0sdGhpcy5zY3JvbGxNYXhWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbFZpZXcuX19tYXhTY3JvbGxUb3B9LHRoaXMuc2Nyb2xsU2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbFZpZXcuX19jbGllbnRIZWlnaHR9LHRoaXMuc2Vjb25kYXJ5U2Nyb2xsU2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbFZpZXcuX19jbGllbnRXaWR0aH0sdGhpcy50cmFuc2Zvcm1TdHJpbmc9ZnVuY3Rpb24oZSx0KXtyZXR1cm5cInRyYW5zbGF0ZTNkKFwiK3QrXCJweCxcIitlK1wicHgsMClcIn0sdGhpcy5wcmltYXJ5RGltZW5zaW9uPWZ1bmN0aW9uKGUpe3JldHVybiBlLmhlaWdodH0sdGhpcy5zZWNvbmRhcnlEaW1lbnNpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGUud2lkdGh9KToodGhpcy5zY3JvbGxWaWV3Lm9wdGlvbnMuZ2V0Q29udGVudFdpZHRoPXQsdGhpcy5zY3JvbGxWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbFZpZXcuX19zY3JvbGxMZWZ0fSx0aGlzLnNjcm9sbE1heFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsVmlldy5fX21heFNjcm9sbExlZnR9LHRoaXMuc2Nyb2xsU2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbFZpZXcuX19jbGllbnRXaWR0aH0sdGhpcy5zZWNvbmRhcnlTY3JvbGxTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsVmlldy5fX2NsaWVudEhlaWdodH0sdGhpcy50cmFuc2Zvcm1TdHJpbmc9ZnVuY3Rpb24oZSx0KXtyZXR1cm5cInRyYW5zbGF0ZTNkKFwiK2UrXCJweCxcIit0K1wicHgsMClcIn0sdGhpcy5wcmltYXJ5RGltZW5zaW9uPWZ1bmN0aW9uKGUpe3JldHVybiBlLndpZHRofSx0aGlzLnNlY29uZGFyeURpbWVuc2lvbj1mdW5jdGlvbihlKXtyZXR1cm4gZS5oZWlnaHR9KX1yZXR1cm4gZS5wcm90b3R5cGU9e2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcmVkSXRlbXM9e30sdGhpcy5yZW5kZXI9YW5ndWxhci5ub29wLHRoaXMuY2FsY3VsYXRlRGltZW5zaW9ucz1hbmd1bGFyLm5vb3AsdGhpcy5kaW1lbnNpb25zPVtdfSxjYWxjdWxhdGVEaW1lbnNpb25zOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgcj17cHJpbWFyeVNpemU6dGhpcy5wcmltYXJ5RGltZW5zaW9uKGUpLHNlY29uZGFyeVNpemU6TWF0aC5taW4odGhpcy5zZWNvbmRhcnlEaW1lbnNpb24oZSksbyl9O3JldHVybiB0JiYoaSs9dC5zZWNvbmRhcnlTaXplLHQucHJpbWFyeVBvcz09PW4mJmkrci5zZWNvbmRhcnlTaXplPm8mJihpPTAsbis9dC5wcmltYXJ5U2l6ZSkpLHIucHJpbWFyeVBvcz1uLHIuc2Vjb25kYXJ5UG9zPWksdD1yLHJ9dmFyIHQsbj0wLGk9MCxvPXRoaXMuc2Vjb25kYXJ5U2Nyb2xsU2l6ZSgpO3RoaXMuZGF0YVNvdXJjZS5iZWZvcmVTaWJsaW5ncyYmdGhpcy5kYXRhU291cmNlLmJlZm9yZVNpYmxpbmdzLmZvckVhY2goZSx0aGlzKTt2YXIgcj1uKyh0P3QucHJpbWFyeVNpemU6MCk7bj1pPTAsdD1udWxsO3ZhciBhPXRoaXMuZGF0YVNvdXJjZS5kaW1lbnNpb25zLm1hcChlLHRoaXMpLHM9bisodD90LnByaW1hcnlTaXplOjApO3JldHVybntiZWZvcmVTaXplOnIsdG90YWxTaXplOnMsZGltZW5zaW9uczphfX0scmVzaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jYWxjdWxhdGVEaW1lbnNpb25zKCk7dGhpcy5kaW1lbnNpb25zPWUuZGltZW5zaW9ucyx0aGlzLnZpZXdwb3J0U2l6ZT1lLnRvdGFsU2l6ZSx0aGlzLmJlZm9yZVNpemU9ZS5iZWZvcmVTaXplLHRoaXMuc2V0Q3VycmVudEluZGV4KDApLHRoaXMucmVuZGVyKCEwKSx0aGlzLmRhdGFTb3VyY2Uuc2V0dXAoKX0sc2V0Q3VycmVudEluZGV4OmZ1bmN0aW9uKGUpe3ZhciB0PSh0aGlzLmRpbWVuc2lvbnNbZV18fHt9KS5wcmltYXJ5UG9zfHwwO3RoaXMuY3VycmVudEluZGV4PWUsdGhpcy5oYXNQcmV2SW5kZXg9ZT4wLHRoaXMuaGFzUHJldkluZGV4JiYodGhpcy5wcmV2aW91c1Bvcz1NYXRoLm1heCh0LXRoaXMuZGltZW5zaW9uc1tlLTFdLnByaW1hcnlTaXplLHRoaXMuZGltZW5zaW9uc1tlLTFdLnByaW1hcnlQb3MpKSx0aGlzLmhhc05leHRJbmRleD1lKzE8dGhpcy5kYXRhU291cmNlLmdldExlbmd0aCgpLHRoaXMuaGFzTmV4dEluZGV4JiYodGhpcy5uZXh0UG9zPU1hdGgubWluKHQrdGhpcy5kaW1lbnNpb25zW2UrMV0ucHJpbWFyeVNpemUsdGhpcy5kaW1lbnNpb25zW2UrMV0ucHJpbWFyeVBvcykpfSxyZW5kZXJTY3JvbGw6aW9uaWMuYW5pbWF0aW9uRnJhbWVUaHJvdHRsZShmdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdGhpcy5yZW5kZXJJZk5lZWRlZCh0aGlzLmlzVmVydGljYWw/dDplKSx0aGlzLnNjcm9sbFZpZXcuX18kY2FsbGJhY2soZSx0LG4saSl9KSxyZW5kZXJJZk5lZWRlZDpmdW5jdGlvbihlKXsodGhpcy5oYXNOZXh0SW5kZXgmJmU+PXRoaXMubmV4dFBvc3x8dGhpcy5oYXNQcmV2SW5kZXgmJmU8dGhpcy5wcmV2aW91c1BvcykmJnRoaXMucmVuZGVyKCl9LGdldEluZGV4Rm9yU2Nyb2xsVmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbjtpZih0PD10aGlzLmRpbWVuc2lvbnNbZV0ucHJpbWFyeVBvcylmb3IoOyhuPXRoaXMuZGltZW5zaW9uc1tlLTFdKSYmbi5wcmltYXJ5UG9zPnQ7KWUtLTtlbHNlIGZvcig7KG49dGhpcy5kaW1lbnNpb25zW2UrMV0pJiZuLnByaW1hcnlQb3M8dDspZSsrO3JldHVybiBlfSxyZW5kZXI6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe2U8aS5kYXRhU291cmNlLmRhdGFTdGFydEluZGV4fHxpLnJlbmRlckl0ZW0oZSx0LnByaW1hcnlQb3MtaS5iZWZvcmVTaXplLHQuc2Vjb25kYXJ5UG9zKX12YXIgbixpPXRoaXMsbz10aGlzLmN1cnJlbnRJbmRleD49dGhpcy5kYXRhU291cmNlLmdldExlbmd0aCgpO2lmKG98fGUpe2ZvcihuIGluIHRoaXMucmVuZGVyZWRJdGVtcyl0aGlzLnJlbW92ZUl0ZW0obik7aWYobylyZXR1cm59Zm9yKHZhciByLGE9dGhpcy5zY3JvbGxWYWx1ZSgpLHM9dGhpcy5zY3JvbGxTaXplKCksYz1zK2EsbD10aGlzLmdldEluZGV4Rm9yU2Nyb2xsVmFsdWUodGhpcy5jdXJyZW50SW5kZXgsYSksdT1NYXRoLm1heChsLTEsMCk7dT4wJiYocj10aGlzLmRpbWVuc2lvbnNbdV0pJiZyLnByaW1hcnlQb3M9PT10aGlzLmRpbWVuc2lvbnNbbC0xXS5wcmltYXJ5UG9zOyl1LS07Zm9yKG49dTsocj10aGlzLmRpbWVuc2lvbnNbbl0pJiZyLnByaW1hcnlQb3Mtci5wcmltYXJ5U2l6ZTxjOyl0KG4sciksbisrO2kuZGltZW5zaW9uc1tuXSYmKHQobixpLmRpbWVuc2lvbnNbbl0pLG4rKyksaS5kaW1lbnNpb25zW25dJiZ0KG4saS5kaW1lbnNpb25zW25dKTt2YXIgZD1uO2Zvcih2YXIgZiBpbiB0aGlzLnJlbmRlcmVkSXRlbXMpKHU+Znx8Zj5kKSYmdGhpcy5yZW1vdmVJdGVtKGYpO3RoaXMuc2V0Q3VycmVudEluZGV4KGwpfSxyZW5kZXJJdGVtOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLmRhdGFTb3VyY2UuYXR0YWNoSXRlbUF0SW5kZXgoZSk7aSYmaS5lbGVtZW50PygoaS5wcmltYXJ5UG9zIT09dHx8aS5zZWNvbmRhcnlQb3MhPT1uKSYmKGkuZWxlbWVudC5jc3MoaW9uaWMuQ1NTLlRSQU5TRk9STSx0aGlzLnRyYW5zZm9ybVN0cmluZyh0LG4pKSxpLnByaW1hcnlQb3M9dCxpLnNlY29uZGFyeVBvcz1uKSx0aGlzLnJlbmRlcmVkSXRlbXNbZV09aSk6ZGVsZXRlIHRoaXMucmVuZGVyZWRJdGVtc1tlXX0scmVtb3ZlSXRlbTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnJlbmRlcmVkSXRlbXNbZV07dCYmKHQucHJpbWFyeVBvcz10LnNlY29uZGFyeVBvcz1udWxsLHRoaXMuZGF0YVNvdXJjZS5kZXRhY2hJdGVtKHQpLGRlbGV0ZSB0aGlzLnJlbmRlcmVkSXRlbXNbZV0pfX0sZX1dKSx1LmZhY3RvcnkoXCIkaW9uaWNHZXN0dXJlXCIsW2Z1bmN0aW9uKCl7cmV0dXJue29uOmZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB3aW5kb3cuaW9uaWMub25HZXN0dXJlKGUsdCxuWzBdLGkpfSxvZmY6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB3aW5kb3cuaW9uaWMub2ZmR2VzdHVyZShlLHQsbil9fX1dKSx1LnByb3ZpZGVyKFwiJGlvbmljQ29uZmlnXCIsZnVuY3Rpb24oKXt2YXIgZT17cHJlZmV0Y2hUZW1wbGF0ZXM6ITB9O3RoaXMucHJlZmV0Y2hUZW1wbGF0ZXM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJihlLnByZWZldGNoVGVtcGxhdGVzPXQpLGUucHJlZmV0Y2hUZW1wbGF0ZXN9LHRoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBlfX0pO3ZhciBnPSc8ZGl2IGNsYXNzPVwibG9hZGluZy1jb250YWluZXJcIj48ZGl2IGNsYXNzPVwibG9hZGluZ1wiPjwvZGl2PjwvZGl2PicsbT1cIiRpb25pY0xvYWRpbmcgaW5zdGFuY2UuaGlkZSgpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFVzZSAkaW9uaWNMb2FkaW5nLmhpZGUoKS5cIiwkPVwiJGlvbmljTG9hZGluZyBpbnN0YW5jZS5zaG93KCkgaGFzIGJlZW4gZGVwcmVjYXRlZC4gVXNlICRpb25pY0xvYWRpbmcuc2hvdygpLlwiLHc9XCIkaW9uaWNMb2FkaW5nIGluc3RhbmNlLnNldENvbnRlbnQoKSBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgJGlvbmljTG9hZGluZy5zaG93KHsgdGVtcGxhdGU6ICdteSBjb250ZW50JyB9KS5cIjt1LmNvbnN0YW50KFwiJGlvbmljTG9hZGluZ0NvbmZpZ1wiLHt0ZW1wbGF0ZTonPGkgY2xhc3M9XCJpY29uIGlvbi1sb2FkaW5nLWRcIj48L2k+J30pLmZhY3RvcnkoXCIkaW9uaWNMb2FkaW5nXCIsW1wiJGlvbmljTG9hZGluZ0NvbmZpZ1wiLFwiJGlvbmljQm9keVwiLFwiJGlvbmljVGVtcGxhdGVMb2FkZXJcIixcIiRpb25pY0JhY2tkcm9wXCIsXCIkdGltZW91dFwiLFwiJHFcIixcIiRsb2dcIixcIiRjb21waWxlXCIsXCIkaW9uaWNQbGF0Zm9ybVwiLGZ1bmN0aW9uKGUsdCxuLGksbyxyLGEscyxjKXtmdW5jdGlvbiB1KCl7cmV0dXJuIHB8fChwPW4uY29tcGlsZSh7dGVtcGxhdGU6ZyxhcHBlbmRUbzp0LmdldCgpfSkudGhlbihmdW5jdGlvbihlKXt2YXIgYT1lO3JldHVybiBlLnNob3c9ZnVuY3Rpb24oZSl7dmFyIGM9ZS50ZW1wbGF0ZVVybD9uLmxvYWQoZS50ZW1wbGF0ZVVybCk6ci53aGVuKGUudGVtcGxhdGV8fGUuY29udGVudHx8XCJcIik7dGhpcy5pc1Nob3dufHwodGhpcy5oYXNCYWNrZHJvcD0hZS5ub0JhY2tkcm9wJiZlLnNob3dCYWNrZHJvcCE9PSExLHRoaXMuaGFzQmFja2Ryb3AmJihpLnJldGFpbigpLGkuZ2V0RWxlbWVudCgpLmFkZENsYXNzKFwiYmFja2Ryb3AtbG9hZGluZ1wiKSkpLGUuZHVyYXRpb24mJihvLmNhbmNlbCh0aGlzLmR1cmF0aW9uVGltZW91dCksdGhpcy5kdXJhdGlvblRpbWVvdXQ9byhhbmd1bGFyLmJpbmQodGhpcyx0aGlzLmhpZGUpLCtlLmR1cmF0aW9uKSksYy50aGVuKGZ1bmN0aW9uKGUpe2lmKGUpe3ZhciBuPWEuZWxlbWVudC5jaGlsZHJlbigpO24uaHRtbChlKSxzKG4uY29udGVudHMoKSkoYS5zY29wZSl9YS5pc1Nob3duJiYoYS5lbGVtZW50LmFkZENsYXNzKFwidmlzaWJsZVwiKSxpb25pYy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXthLmlzU2hvd24mJihhLmVsZW1lbnQuYWRkQ2xhc3MoXCJhY3RpdmVcIiksdC5hZGRDbGFzcyhcImxvYWRpbmctYWN0aXZlXCIpKX0pKX0pLHRoaXMuaXNTaG93bj0hMH0sZS5oaWRlPWZ1bmN0aW9uKCl7dGhpcy5pc1Nob3duJiYodGhpcy5oYXNCYWNrZHJvcCYmKGkucmVsZWFzZSgpLGkuZ2V0RWxlbWVudCgpLnJlbW92ZUNsYXNzKFwiYmFja2Ryb3AtbG9hZGluZ1wiKSksYS5lbGVtZW50LnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLHQucmVtb3ZlQ2xhc3MoXCJsb2FkaW5nLWFjdGl2ZVwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IWEuaXNTaG93biYmYS5lbGVtZW50LnJlbW92ZUNsYXNzKFwidmlzaWJsZVwiKX0sMjAwKSksby5jYW5jZWwodGhpcy5kdXJhdGlvblRpbWVvdXQpLHRoaXMuaXNTaG93bj0hMX0sZX0pKSxwfWZ1bmN0aW9uIGYodCl7dD1kKGV8fHt9LHR8fHt9KTt2YXIgbj10LmRlbGF5fHx0LnNob3dEZWxheXx8MDtyZXR1cm4gYiYmby5jYW5jZWwoYiksYj1vKGFuZ3VsYXIubm9vcCxuKSxiLnRoZW4odSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdigpLHY9Yy5yZWdpc3RlckJhY2tCdXR0b25BY3Rpb24oYW5ndWxhci5ub29wLFQpLGUuc2hvdyh0KX0pLHtoaWRlOmwubWV0aG9kKG0sYS5lcnJvcixoKSxzaG93OmwubWV0aG9kKCQsYS5lcnJvcixmdW5jdGlvbigpe2YodCl9KSxzZXRDb250ZW50OmwubWV0aG9kKHcsYS5lcnJvcixmdW5jdGlvbihlKXt1KCkudGhlbihmdW5jdGlvbih0KXt0LnNob3coe3RlbXBsYXRlOmV9KX0pfSl9fWZ1bmN0aW9uIGgoKXt2KCksby5jYW5jZWwoYiksdSgpLnRoZW4oZnVuY3Rpb24oZSl7ZS5oaWRlKCl9KX12YXIgcCx2PWFuZ3VsYXIubm9vcCxiPXIud2hlbigpO3JldHVybntzaG93OmYsaGlkZTpoLF9nZXRMb2FkZXI6dX19XSksdS5mYWN0b3J5KFwiJGlvbmljTW9kYWxcIixbXCIkcm9vdFNjb3BlXCIsXCIkaW9uaWNCb2R5XCIsXCIkY29tcGlsZVwiLFwiJHRpbWVvdXRcIixcIiRpb25pY1BsYXRmb3JtXCIsXCIkaW9uaWNUZW1wbGF0ZUxvYWRlclwiLFwiJHFcIixcIiRsb2dcIixmdW5jdGlvbihlLHQsbixpLG8scixhLHMpe3ZhciBjPWlvbmljLnZpZXdzLk1vZGFsLmluaGVyaXQoe2luaXRpYWxpemU6ZnVuY3Rpb24oZSl7aW9uaWMudmlld3MuTW9kYWwucHJvdG90eXBlLmluaXRpYWxpemUuY2FsbCh0aGlzLGUpLHRoaXMuYW5pbWF0aW9uPWUuYW5pbWF0aW9ufHxcInNsaWRlLWluLXVwXCJ9LHNob3c6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztpZihuLnNjb3BlLiQkZGVzdHJveWVkKXJldHVybiB2b2lkIHMuZXJyb3IoXCJDYW5ub3QgY2FsbCBcIituLnZpZXdUeXBlK1wiLnNob3coKSBhZnRlciByZW1vdmUoKS4gUGxlYXNlIGNyZWF0ZSBhIG5ldyBcIituLnZpZXdUeXBlK1wiIGluc3RhbmNlLlwiKTt2YXIgcj12KG4ubW9kYWxFbCk7cmV0dXJuIG4uZWwuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIiksaShmdW5jdGlvbigpe3QuYWRkQ2xhc3Mobi52aWV3VHlwZStcIi1vcGVuXCIpfSw0MDApLG4uZWwucGFyZW50RWxlbWVudHx8KHIuYWRkQ2xhc3Mobi5hbmltYXRpb24pLHQuYXBwZW5kKG4uZWwpKSxlJiZuLnBvc2l0aW9uVmlldyYmbi5wb3NpdGlvblZpZXcoZSxyKSxyLmFkZENsYXNzKFwibmctZW50ZXIgYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwibmctbGVhdmUgbmctbGVhdmUtYWN0aXZlXCIpLG4uX2lzU2hvd249ITAsbi5fZGVyZWdpc3RlckJhY2tCdXR0b249by5yZWdpc3RlckJhY2tCdXR0b25BY3Rpb24obi5oYXJkd2FyZUJhY2tCdXR0b25DbG9zZT9hbmd1bGFyLmJpbmQobixuLmhpZGUpOmFuZ3VsYXIubm9vcCxTKSxuLl9pc09wZW5Qcm9taXNlPWEuZGVmZXIoKSxpb25pYy52aWV3cy5Nb2RhbC5wcm90b3R5cGUuc2hvdy5jYWxsKG4pLGkoZnVuY3Rpb24oKXtyLmFkZENsYXNzKFwibmctZW50ZXItYWN0aXZlXCIpLGlvbmljLnRyaWdnZXIoXCJyZXNpemVcIiksbi5zY29wZS4kcGFyZW50JiZuLnNjb3BlLiRwYXJlbnQuJGJyb2FkY2FzdChuLnZpZXdUeXBlK1wiLnNob3duXCIsbiksbi5lbC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpfSwyMCksaShmdW5jdGlvbigpe24uJGVsLm9uKFwiY2xpY2tcIixmdW5jdGlvbihlKXtuLmJhY2tkcm9wQ2xpY2tUb0Nsb3NlJiZlLnRhcmdldD09PW4uZWwmJm4uaGlkZSgpfSl9LDQwMCl9LGhpZGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLG49dihlLm1vZGFsRWwpO3JldHVybiBlLmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIiksbi5hZGRDbGFzcyhcIm5nLWxlYXZlXCIpLGkoZnVuY3Rpb24oKXtuLmFkZENsYXNzKFwibmctbGVhdmUtYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwibmctZW50ZXIgbmctZW50ZXItYWN0aXZlIGFjdGl2ZVwiKX0sMjApLGUuJGVsLm9mZihcImNsaWNrXCIpLGUuX2lzU2hvd249ITEsZS5zY29wZS4kcGFyZW50JiZlLnNjb3BlLiRwYXJlbnQuJGJyb2FkY2FzdChlLnZpZXdUeXBlK1wiLmhpZGRlblwiLGUpLGUuX2RlcmVnaXN0ZXJCYWNrQnV0dG9uJiZlLl9kZXJlZ2lzdGVyQmFja0J1dHRvbigpLGlvbmljLnZpZXdzLk1vZGFsLnByb3RvdHlwZS5oaWRlLmNhbGwoZSksaShmdW5jdGlvbigpe3QucmVtb3ZlQ2xhc3MoZS52aWV3VHlwZStcIi1vcGVuXCIpLGUuZWwuY2xhc3NMaXN0LmFkZChcImhpZGVcIil9LGUuaGlkZURlbGF5fHwzMjApfSxyZW1vdmU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBlLnNjb3BlLiRwYXJlbnQmJmUuc2NvcGUuJHBhcmVudC4kYnJvYWRjYXN0KGUudmlld1R5cGUrXCIucmVtb3ZlZFwiLGUpLGUuaGlkZSgpLnRoZW4oZnVuY3Rpb24oKXtlLnNjb3BlLiRkZXN0cm95KCksZS4kZWwucmVtb3ZlKCl9KX0saXNTaG93bjpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5faXNTaG93bn19KSxsPWZ1bmN0aW9uKHQsaSl7dmFyIG89aS5zY29wZSYmaS5zY29wZS4kbmV3KCl8fGUuJG5ldyghMCk7aS52aWV3VHlwZT1pLnZpZXdUeXBlfHxcIm1vZGFsXCIsZChvLHskaGFzSGVhZGVyOiExLCRoYXNTdWJoZWFkZXI6ITEsJGhhc0Zvb3RlcjohMSwkaGFzU3ViZm9vdGVyOiExLCRoYXNUYWJzOiExLCRoYXNUYWJzVG9wOiExfSk7dmFyIHI9bihcIjxpb24tXCIraS52aWV3VHlwZStcIj5cIit0K1wiPC9pb24tXCIraS52aWV3VHlwZStcIj5cIikobyk7aS4kZWw9cixpLmVsPXJbMF0saS5tb2RhbEVsPWkuZWwucXVlcnlTZWxlY3RvcihcIi5cIitpLnZpZXdUeXBlKTt2YXIgYT1uZXcgYyhpKTtyZXR1cm4gYS5zY29wZT1vLGkuc2NvcGV8fChvW2kudmlld1R5cGVdPWEpLGF9O3JldHVybntmcm9tVGVtcGxhdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1sKGUsdHx8e30pO3JldHVybiBufSxmcm9tVGVtcGxhdGVVcmw6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpO3JldHVybiBhbmd1bGFyLmlzRnVuY3Rpb24odCkmJihpPXQsdD1uKSxyLmxvYWQoZSkudGhlbihmdW5jdGlvbihlKXt2YXIgbj1sKGUsdHx8e30pO3JldHVybiBpJiZpKG4pLG59KX19fV0pLHUuc2VydmljZShcIiRpb25pY05hdkJhckRlbGVnYXRlXCIsbihbXCJiYWNrXCIsXCJhbGlnblwiLFwic2hvd0JhY2tCdXR0b25cIixcInNob3dCYXJcIixcInNldFRpdGxlXCIsXCJjaGFuZ2VUaXRsZVwiLFwiZ2V0VGl0bGVcIixcImdldFByZXZpb3VzVGl0bGVcIl0pKTt2YXIgYj0xMDAseT0xNTAsUz0yMDAsQz0zMDAsaz00MDAsVD01MDA7dS5jb25zdGFudChcIiRpb25pY1BsYXRmb3JtRGVmYXVsdHNcIix7aW9zOnskaW9uaWNOYXZCYXJDb25maWc6e3RyYW5zaXRpb246XCJuYXYtdGl0bGUtc2xpZGUtaW9zXCIsYWxpZ25UaXRsZTpcImNlbnRlclwiLGJhY2tCdXR0b25JY29uOlwiaW9uLWlvczctYXJyb3ctYmFja1wifSwkaW9uaWNOYXZWaWV3Q29uZmlnOnt0cmFuc2l0aW9uOlwic2xpZGUtaW9zXCJ9LCRpb25pY1RhYnNDb25maWc6e3R5cGU6XCJcIixwb3NpdGlvbjpcIlwifX0sYW5kcm9pZDp7JGlvbmljTmF2QmFyQ29uZmlnOnt0cmFuc2l0aW9uOlwibmF2LXRpdGxlLXNsaWRlLWZ1bGxcIixhbGlnblRpdGxlOlwiY2VudGVyXCIsYmFja0J1dHRvbkljb246XCJpb24taW9zNy1hcnJvdy1iYWNrXCJ9LCRpb25pY05hdlZpZXdDb25maWc6e3RyYW5zaXRpb246XCJzbGlkZS1mdWxsXCJ9LCRpb25pY1RhYnNDb25maWc6e3R5cGU6XCJ0YWJzLXN0cmlwZWRcIixwb3NpdGlvbjpcIlwifX19KSx1LmNvbmZpZyhbXCIkaW9uaWNQbGF0Zm9ybURlZmF1bHRzXCIsXCIkaW5qZWN0b3JcIixmdW5jdGlvbihlLHQpe3ZhciBuPWlvbmljLlBsYXRmb3JtLnBsYXRmb3JtKCksaT1mdW5jdGlvbihlKXtmKGUsZnVuY3Rpb24oZSxuKXtkKHQuZ2V0KG4pLGUpfSl9O3N3aXRjaChuKXtjYXNlXCJpb3NcIjppKGUuaW9zKTticmVhaztjYXNlXCJhbmRyb2lkXCI6aShlLmFuZHJvaWQpfX1dKSx1LnByb3ZpZGVyKFwiJGlvbmljUGxhdGZvcm1cIixmdW5jdGlvbigpe3JldHVybnskZ2V0OltcIiRxXCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oZSl7dmFyIHQ9e29uSGFyZHdhcmVCYWNrQnV0dG9uOmZ1bmN0aW9uKGUpe2lvbmljLlBsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uKCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImJhY2tidXR0b25cIixlLCExKX0pfSxvZmZIYXJkd2FyZUJhY2tCdXR0b246ZnVuY3Rpb24oZSl7aW9uaWMuUGxhdGZvcm0ucmVhZHkoZnVuY3Rpb24oKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmFja2J1dHRvblwiLGUpfSl9LCRiYWNrQnV0dG9uQWN0aW9uczp7fSxyZWdpc3RlckJhY2tCdXR0b25BY3Rpb246ZnVuY3Rpb24oZSxuLGkpe3QuX2hhc0JhY2tCdXR0b25IYW5kbGVyfHwodC4kYmFja0J1dHRvbkFjdGlvbnM9e30sdC5vbkhhcmR3YXJlQmFja0J1dHRvbih0LmhhcmR3YXJlQmFja0J1dHRvbkNsaWNrKSx0Ll9oYXNCYWNrQnV0dG9uSGFuZGxlcj0hMCk7dmFyIG89e2lkOmk/aTppb25pYy5VdGlscy5uZXh0VWlkKCkscHJpb3JpdHk6bj9uOjAsZm46ZX07cmV0dXJuIHQuJGJhY2tCdXR0b25BY3Rpb25zW28uaWRdPW8sZnVuY3Rpb24oKXtkZWxldGUgdC4kYmFja0J1dHRvbkFjdGlvbnNbby5pZF19fSxoYXJkd2FyZUJhY2tCdXR0b25DbGljazpmdW5jdGlvbihlKXt2YXIgbixpO2ZvcihpIGluIHQuJGJhY2tCdXR0b25BY3Rpb25zKSghbnx8dC4kYmFja0J1dHRvbkFjdGlvbnNbaV0ucHJpb3JpdHk+PW4ucHJpb3JpdHkpJiYobj10LiRiYWNrQnV0dG9uQWN0aW9uc1tpXSk7cmV0dXJuIG4/KG4uZm4oZSksbik6dm9pZCAwfSxpczpmdW5jdGlvbihlKXtyZXR1cm4gaW9uaWMuUGxhdGZvcm0uaXMoZSl9LG9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGlvbmljLlBsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uKCl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihlLHQsITEpfSksZnVuY3Rpb24oKXtpb25pYy5QbGF0Zm9ybS5yZWFkeShmdW5jdGlvbigpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0KX0pfX0scmVhZHk6ZnVuY3Rpb24odCl7dmFyIG49ZS5kZWZlcigpO3JldHVybiBpb25pYy5QbGF0Zm9ybS5yZWFkeShmdW5jdGlvbigpe24ucmVzb2x2ZSgpLHQmJnQoKX0pLG4ucHJvbWlzZX19O3JldHVybiB0fV19fSksdS5mYWN0b3J5KFwiJGlvbmljUG9wb3ZlclwiLFtcIiRpb25pY01vZGFsXCIsXCIkaW9uaWNQb3NpdGlvblwiLFwiJGRvY3VtZW50XCIsXCIkd2luZG93XCIsZnVuY3Rpb24oZSx0LG4saSl7ZnVuY3Rpb24gbyhlLG8pe3ZhciBhPWFuZ3VsYXIuZWxlbWVudChlLnRhcmdldHx8ZSkscz10Lm9mZnNldChhKSxjPW8ucHJvcChcIm9mZnNldFdpZHRoXCIpLGw9by5wcm9wKFwib2Zmc2V0SGVpZ2h0XCIpLHU9blswXS5ib2R5LmNsaWVudFdpZHRoLGQ9aS5pbm5lckhlaWdodCxmPXtsZWZ0OnMubGVmdCtzLndpZHRoLzItYy8yfSxoPXYob1swXS5xdWVyeVNlbGVjdG9yKFwiLnBvcG92ZXItYXJyb3dcIikpO2YubGVmdDxyP2YubGVmdD1yOmYubGVmdCtjK3I+dSYmKGYubGVmdD11LWMtcikscy50b3Arcy5oZWlnaHQrbD5kPyhmLnRvcD1zLnRvcC1sLG8uYWRkQ2xhc3MoXCJwb3BvdmVyLWJvdHRvbVwiKSk6KGYudG9wPXMudG9wK3MuaGVpZ2h0LG8ucmVtb3ZlQ2xhc3MoXCJwb3BvdmVyLWJvdHRvbVwiKSksaC5jc3Moe2xlZnQ6cy5sZWZ0K3Mud2lkdGgvMi1oLnByb3AoXCJvZmZzZXRXaWR0aFwiKS8yLWYubGVmdCtcInB4XCJ9KSxvLmNzcyh7dG9wOmYudG9wK1wicHhcIixsZWZ0OmYubGVmdCtcInB4XCIsbWFyZ2luTGVmdDpcIjBcIixvcGFjaXR5OlwiMVwifSl9dmFyIHI9NixhPXt2aWV3VHlwZTpcInBvcG92ZXJcIixoaWRlRGVsYXk6MSxhbmltYXRpb246XCJub25lXCIscG9zaXRpb25WaWV3Om99O3JldHVybntmcm9tVGVtcGxhdGU6ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5mcm9tVGVtcGxhdGUodCxpb25pYy5VdGlscy5leHRlbmQobnx8e30sYSkpfSxmcm9tVGVtcGxhdGVVcmw6ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5mcm9tVGVtcGxhdGVVcmwodCxuLGlvbmljLlV0aWxzLmV4dGVuZChufHx7fSxhKSl9fX1dKTt2YXIgST0nPGRpdiBjbGFzcz1cInBvcHVwLWNvbnRhaW5lclwiPjxkaXYgY2xhc3M9XCJwb3B1cFwiPjxkaXYgY2xhc3M9XCJwb3B1cC1oZWFkXCI+PGgzIGNsYXNzPVwicG9wdXAtdGl0bGVcIiBuZy1iaW5kLWh0bWw9XCJ0aXRsZVwiPjwvaDM+PGg1IGNsYXNzPVwicG9wdXAtc3ViLXRpdGxlXCIgbmctYmluZC1odG1sPVwic3ViVGl0bGVcIiBuZy1pZj1cInN1YlRpdGxlXCI+PC9oNT48L2Rpdj48ZGl2IGNsYXNzPVwicG9wdXAtYm9keVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJwb3B1cC1idXR0b25zXCI+PGJ1dHRvbiBuZy1yZXBlYXQ9XCJidXR0b24gaW4gYnV0dG9uc1wiIG5nLWNsaWNrPVwiJGJ1dHRvblRhcHBlZChidXR0b24sICRldmVudClcIiBjbGFzcz1cImJ1dHRvblwiIG5nLWNsYXNzPVwiYnV0dG9uLnR5cGUgfHwgXFwnYnV0dG9uLWRlZmF1bHRcXCdcIiBuZy1iaW5kLWh0bWw9XCJidXR0b24udGV4dFwiPjwvYnV0dG9uPjwvZGl2PjwvZGl2PjwvZGl2Pic7dS5mYWN0b3J5KFwiJGlvbmljUG9wdXBcIixbXCIkaW9uaWNUZW1wbGF0ZUxvYWRlclwiLFwiJGlvbmljQmFja2Ryb3BcIixcIiRxXCIsXCIkdGltZW91dFwiLFwiJHJvb3RTY29wZVwiLFwiJGlvbmljQm9keVwiLFwiJGNvbXBpbGVcIixcIiRpb25pY1BsYXRmb3JtXCIsZnVuY3Rpb24oZSx0LG4saSxvLHIsYSxzKXtmdW5jdGlvbiBjKHQpe3Q9ZCh7c2NvcGU6bnVsbCx0aXRsZTpcIlwiLGJ1dHRvbnM6W119LHR8fHt9KTt2YXIgbz1lLmNvbXBpbGUoe3RlbXBsYXRlOkksc2NvcGU6dC5zY29wZSYmdC5zY29wZS4kbmV3KCksYXBwZW5kVG86ci5nZXQoKX0pLHM9dC50ZW1wbGF0ZVVybD9lLmxvYWQodC50ZW1wbGF0ZVVybCk6bi53aGVuKHQudGVtcGxhdGV8fHQuY29udGVudHx8XCJcIik7cmV0dXJuIG4uYWxsKFtvLHNdKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBvPWVbMF0scj1lWzFdLHM9bi5kZWZlcigpO28ucmVzcG9uc2VEZWZlcnJlZD1zO3ZhciBjPXYoby5lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtYm9keVwiKSk7cmV0dXJuIHI/KGMuaHRtbChyKSxhKGMuY29udGVudHMoKSkoby5zY29wZSkpOmMucmVtb3ZlKCksZChvLnNjb3BlLHt0aXRsZTp0LnRpdGxlLGJ1dHRvbnM6dC5idXR0b25zLHN1YlRpdGxlOnQuc3ViVGl0bGUsJGJ1dHRvblRhcHBlZDpmdW5jdGlvbihlLHQpe3ZhciBuPShlLm9uVGFwfHxhbmd1bGFyLm5vb3ApKHQpO3Q9dC5vcmlnaW5hbEV2ZW50fHx0LHQuZGVmYXVsdFByZXZlbnRlZHx8cy5yZXNvbHZlKG4pfX0pLG8uc2hvdz1mdW5jdGlvbigpe28uaXNTaG93bnx8KG8uaXNTaG93bj0hMCxpb25pYy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtvLmlzU2hvd24mJihvLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJwb3B1cC1oaWRkZW5cIiksby5lbGVtZW50LmFkZENsYXNzKFwicG9wdXAtc2hvd2luZyBhY3RpdmVcIiksZihvLmVsZW1lbnQpKX0pKX0sby5oaWRlPWZ1bmN0aW9uKGUpe3JldHVybiBlPWV8fGFuZ3VsYXIubm9vcCxvLmlzU2hvd24/KG8uaXNTaG93bj0hMSxvLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksby5lbGVtZW50LmFkZENsYXNzKFwicG9wdXAtaGlkZGVuXCIpLHZvaWQgaShlLDI1MCkpOmUoKX0sby5yZW1vdmU9ZnVuY3Rpb24oKXtvLnJlbW92ZWR8fChvLmhpZGUoZnVuY3Rpb24oKXtvLmVsZW1lbnQucmVtb3ZlKCksby5zY29wZS4kZGVzdHJveSgpfSksby5yZW1vdmVkPSEwKX0sb30pfWZ1bmN0aW9uIGwoKXskWzBdJiYkWzBdLnJlc3BvbnNlRGVmZXJyZWQucmVzb2x2ZSgpfWZ1bmN0aW9uIHUoZSl7ZnVuY3Rpb24gbihlKXtvLnRoZW4oZnVuY3Rpb24odCl7dC5yZW1vdmVkfHx0LnJlc3BvbnNlRGVmZXJyZWQucmVzb2x2ZShlKX0pfXZhciBvPXcuX2NyZWF0ZVBvcHVwKGUpLGE9JFswXTthJiZhLmhpZGUoKTt2YXIgYz1pKGFuZ3VsYXIubm9vcCxhP20uc3RhY2tQdXNoRGVsYXk6MCkudGhlbihmdW5jdGlvbigpe3JldHVybiBvfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gYXx8KHIuYWRkQ2xhc3MoXCJwb3B1cC1vcGVuXCIpLHQucmV0YWluKCksdy5fYmFja0J1dHRvbkFjdGlvbkRvbmU9cy5yZWdpc3RlckJhY2tCdXR0b25BY3Rpb24obCxrKSksJC51bnNoaWZ0KGUpLGUuc2hvdygpLGUucmVzcG9uc2VEZWZlcnJlZC5ub3RpZnkoe2Nsb3NlOmMuY2xvc2V9KSxlLnJlc3BvbnNlRGVmZXJyZWQucHJvbWlzZS50aGVuKGZ1bmN0aW9uKG4pe3ZhciBvPSQuaW5kZXhPZihlKTstMSE9PW8mJiQuc3BsaWNlKG8sMSksZS5yZW1vdmUoKTt2YXIgYT0kWzBdO3JldHVybiBhP2Euc2hvdygpOihpKGZ1bmN0aW9uKCl7ci5yZW1vdmVDbGFzcyhcInBvcHVwLW9wZW5cIil9LDQwMCksdC5yZWxlYXNlKCksKHcuX2JhY2tCdXR0b25BY3Rpb25Eb25lfHxhbmd1bGFyLm5vb3ApKCkpLG59KX0pO3JldHVybiBjLmNsb3NlPW4sY31mdW5jdGlvbiBmKGUpe3ZhciB0PWVbMF0ucXVlcnlTZWxlY3RvcihcIlthdXRvZm9jdXNdXCIpO3QmJnQuZm9jdXMoKX1mdW5jdGlvbiBoKGUpe3JldHVybiB1KGQoe2J1dHRvbnM6W3t0ZXh0OmUub2tUZXh0fHxcIk9LXCIsdHlwZTplLm9rVHlwZXx8XCJidXR0b24tcG9zaXRpdmVcIixvblRhcDpmdW5jdGlvbigpe3JldHVybiEwfX1dfSxlfHx7fSkpfWZ1bmN0aW9uIHAoZSl7cmV0dXJuIHUoZCh7YnV0dG9uczpbe3RleHQ6ZS5jYW5jZWxUZXh0fHxcIkNhbmNlbFwiLHR5cGU6ZS5jYW5jZWxUeXBlfHxcImJ1dHRvbi1kZWZhdWx0XCIsb25UYXA6ZnVuY3Rpb24oKXtyZXR1cm4hMX19LHt0ZXh0OmUub2tUZXh0fHxcIk9LXCIsdHlwZTplLm9rVHlwZXx8XCJidXR0b24tcG9zaXRpdmVcIixvblRhcDpmdW5jdGlvbigpe3JldHVybiEwfX1dfSxlfHx7fSkpfWZ1bmN0aW9uIGcoZSl7dmFyIHQ9by4kbmV3KCEwKTt0LmRhdGE9e307dmFyIG49XCJcIjtyZXR1cm4gZS50ZW1wbGF0ZSYmLzxbYS16XVtcXHNcXFNdKj4vaS50ZXN0KGUudGVtcGxhdGUpPT09ITEmJihuPVwiPHNwYW4+XCIrZS50ZW1wbGF0ZStcIjwvc3Bhbj5cIixkZWxldGUgZS50ZW1wbGF0ZSksdShkKHt0ZW1wbGF0ZTpuKyc8aW5wdXQgbmctbW9kZWw9XCJkYXRhLnJlc3BvbnNlXCIgdHlwZT1cIicrKGUuaW5wdXRUeXBlfHxcInRleHRcIikrJ1wiIHBsYWNlaG9sZGVyPVwiJysoZS5pbnB1dFBsYWNlaG9sZGVyfHxcIlwiKSsnXCI+JyxzY29wZTp0LGJ1dHRvbnM6W3t0ZXh0OmUuY2FuY2VsVGV4dHx8XCJDYW5jZWxcIix0eXBlOmUuY2FuY2VsVHlwZXx8XCJidXR0b24tZGVmYXVsdFwiLG9uVGFwOmZ1bmN0aW9uKCl7fX0se3RleHQ6ZS5va1RleHR8fFwiT0tcIix0eXBlOmUub2tUeXBlfHxcImJ1dHRvbi1wb3NpdGl2ZVwiLG9uVGFwOmZ1bmN0aW9uKCl7cmV0dXJuIHQuZGF0YS5yZXNwb25zZXx8XCJcIn19XX0sZXx8e30pKX12YXIgbT17c3RhY2tQdXNoRGVsYXk6NzV9LCQ9W10sdz17c2hvdzp1LGFsZXJ0OmgsY29uZmlybTpwLHByb21wdDpnLF9jcmVhdGVQb3B1cDpjLF9wb3B1cFN0YWNrOiR9O3JldHVybiB3fV0pLHUuZmFjdG9yeShcIiRpb25pY1Bvc2l0aW9uXCIsW1wiJGRvY3VtZW50XCIsXCIkd2luZG93XCIsZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsbil7cmV0dXJuIGUuY3VycmVudFN0eWxlP2UuY3VycmVudFN0eWxlW25dOnQuZ2V0Q29tcHV0ZWRTdHlsZT90LmdldENvbXB1dGVkU3R5bGUoZSlbbl06ZS5zdHlsZVtuXX1mdW5jdGlvbiBpKGUpe3JldHVyblwic3RhdGljXCI9PT0obihlLFwicG9zaXRpb25cIil8fFwic3RhdGljXCIpfXZhciBvPWZ1bmN0aW9uKHQpe2Zvcih2YXIgbj1lWzBdLG89dC5vZmZzZXRQYXJlbnR8fG47byYmbyE9PW4mJmkobyk7KW89by5vZmZzZXRQYXJlbnQ7cmV0dXJuIG98fG59O3JldHVybntwb3NpdGlvbjpmdW5jdGlvbih0KXt2YXIgbj10aGlzLm9mZnNldCh0KSxpPXt0b3A6MCxsZWZ0OjB9LHI9byh0WzBdKTtyIT1lWzBdJiYoaT10aGlzLm9mZnNldChhbmd1bGFyLmVsZW1lbnQocikpLGkudG9wKz1yLmNsaWVudFRvcC1yLnNjcm9sbFRvcCxpLmxlZnQrPXIuY2xpZW50TGVmdC1yLnNjcm9sbExlZnQpO3ZhciBhPXRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue3dpZHRoOmEud2lkdGh8fHQucHJvcChcIm9mZnNldFdpZHRoXCIpLGhlaWdodDphLmhlaWdodHx8dC5wcm9wKFwib2Zmc2V0SGVpZ2h0XCIpLHRvcDpuLnRvcC1pLnRvcCxsZWZ0Om4ubGVmdC1pLmxlZnR9fSxvZmZzZXQ6ZnVuY3Rpb24obil7dmFyIGk9blswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm57d2lkdGg6aS53aWR0aHx8bi5wcm9wKFwib2Zmc2V0V2lkdGhcIiksaGVpZ2h0OmkuaGVpZ2h0fHxuLnByb3AoXCJvZmZzZXRIZWlnaHRcIiksdG9wOmkudG9wKyh0LnBhZ2VZT2Zmc2V0fHxlWzBdLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApLGxlZnQ6aS5sZWZ0Kyh0LnBhZ2VYT2Zmc2V0fHxlWzBdLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0KX19fX1dKSx1LnNlcnZpY2UoXCIkaW9uaWNTY3JvbGxEZWxlZ2F0ZVwiLG4oW1wicmVzaXplXCIsXCJzY3JvbGxUb3BcIixcInNjcm9sbEJvdHRvbVwiLFwic2Nyb2xsVG9cIixcInNjcm9sbEJ5XCIsXCJ6b29tVG9cIixcInpvb21CeVwiLFwiZ2V0U2Nyb2xsUG9zaXRpb25cIixcImFuY2hvclNjcm9sbFwiLFwiZ2V0U2Nyb2xsVmlld1wiLFwicmVtZW1iZXJTY3JvbGxQb3NpdGlvblwiLFwiZm9yZ2V0U2Nyb2xsUG9zaXRpb25cIixcInNjcm9sbFRvUmVtZW1iZXJlZFBvc2l0aW9uXCJdKSksdS5zZXJ2aWNlKFwiJGlvbmljU2lkZU1lbnVEZWxlZ2F0ZVwiLG4oW1widG9nZ2xlTGVmdFwiLFwidG9nZ2xlUmlnaHRcIixcImdldE9wZW5SYXRpb1wiLFwiaXNPcGVuXCIsXCJpc09wZW5MZWZ0XCIsXCJpc09wZW5SaWdodFwiLFwiY2FuRHJhZ0NvbnRlbnRcIixcImVkZ2VEcmFnVGhyZXNob2xkXCJdKSksdS5zZXJ2aWNlKFwiJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZVwiLG4oW1widXBkYXRlXCIsXCJzbGlkZVwiLFwiZW5hYmxlU2xpZGVcIixcInByZXZpb3VzXCIsXCJuZXh0XCIsXCJzdG9wXCIsXCJzdGFydFwiLFwiY3VycmVudEluZGV4XCIsXCJzbGlkZXNDb3VudFwiXSkpLHUuc2VydmljZShcIiRpb25pY1RhYnNEZWxlZ2F0ZVwiLG4oW1wic2VsZWN0XCIsXCJzZWxlY3RlZEluZGV4XCJdKSksZnVuY3Rpb24oKXt2YXIgZT1bXTt1LmZhY3RvcnkoXCIkaW9uaWNUZW1wbGF0ZUNhY2hlXCIsW1wiJGh0dHBcIixcIiR0ZW1wbGF0ZUNhY2hlXCIsXCIkdGltZW91dFwiLFwiJGlvbmljQ29uZmlnXCIsZnVuY3Rpb24odCxuLGksbyl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gYS5sZW5ndGg+NTAwPyExOlwidW5kZWZpbmVkXCI9PXR5cGVvZiBlP2MoKToocChlKSYmKGU9W2VdKSxmKGUsZnVuY3Rpb24oZSl7YS5wdXNoKGUpfSksdm9pZChzJiZjKCkpKX12YXIgYT1lLHM9ITEsYz1mdW5jdGlvbigpe2lmKG8ucHJlZmV0Y2hUZW1wbGF0ZXMhPT0hMSYmKHIuX3J1bkNvdW50Kysscz0hMCwwIT09YS5sZW5ndGgpKXtmb3IodmFyIGU9MDs1PmUmJih0ZW1wbGF0ZT1hLnBvcCgpKTspcCh0ZW1wbGF0ZSkmJnQuZ2V0KHRlbXBsYXRlLHtjYWNoZTpufSksZSsrO2EubGVuZ3RoJiZpKGZ1bmN0aW9uKCl7YygpfSwxZTMpfX07cmV0dXJuIHIuX3J1bkNvdW50PTAscn1dKS5jb25maWcoW1wiJHN0YXRlUHJvdmlkZXJcIixcIiRpb25pY0NvbmZpZ1Byb3ZpZGVyXCIsZnVuY3Rpb24odCxuKXt2YXIgaT10LnN0YXRlO3Quc3RhdGU9ZnVuY3Rpb24obyxyKXtpZihcIm9iamVjdFwiPT10eXBlb2YgciYmbi5wcmVmZXRjaFRlbXBsYXRlcygpIT09ITEpe3ZhciBhPXIucHJlZmV0Y2hUZW1wbGF0ZSE9PSExO2lmKGEmJnAoci50ZW1wbGF0ZVVybCkmJmUucHVzaChyLnRlbXBsYXRlVXJsKSxhbmd1bGFyLmlzT2JqZWN0KHIudmlld3MpKWZvcih2YXIgcyBpbiByLnZpZXdzKWE9ci52aWV3c1tzXS5wcmVmZXRjaFRlbXBsYXRlIT09ITEsYSYmcChyLnZpZXdzW3NdLnRlbXBsYXRlVXJsKSYmZS5wdXNoKHIudmlld3Nbc10udGVtcGxhdGVVcmwpfXJldHVybiBpLmNhbGwodCxvLHIpfX1dKS5ydW4oW1wiJGlvbmljVGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGUpe2UoKX1dKX0oKSx1LmZhY3RvcnkoXCIkaW9uaWNUZW1wbGF0ZUxvYWRlclwiLFtcIiRjb21waWxlXCIsXCIkY29udHJvbGxlclwiLFwiJGh0dHBcIixcIiRxXCIsXCIkcm9vdFNjb3BlXCIsXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGUsdCxuLGksbyxyKXtmdW5jdGlvbiBhKGUpe3JldHVybiBuLmdldChlLHtjYWNoZTpyfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS5kYXRhJiZlLmRhdGEudHJpbSgpfSl9ZnVuY3Rpb24gcyhuKXtuPWQoe3RlbXBsYXRlOlwiXCIsdGVtcGxhdGVVcmw6XCJcIixzY29wZTpudWxsLGNvbnRyb2xsZXI6bnVsbCxsb2NhbHM6e30sYXBwZW5kVG86bnVsbH0sbnx8e30pO3ZhciByPW4udGVtcGxhdGVVcmw/dGhpcy5sb2FkKG4udGVtcGxhdGVVcmwpOmkud2hlbihuLnRlbXBsYXRlKTtyZXR1cm4gci50aGVuKGZ1bmN0aW9uKGkpe3ZhciByLGE9bi5zY29wZXx8by4kbmV3KCkscz12KFwiPGRpdj5cIikuaHRtbChpKS5jb250ZW50cygpO3JldHVybiBuLmNvbnRyb2xsZXImJihyPXQobi5jb250cm9sbGVyLGQobi5sb2NhbHMseyRzY29wZTphfSkpLHMuY2hpbGRyZW4oKS5kYXRhKFwiJG5nQ29udHJvbGxlckNvbnRyb2xsZXJcIixyKSksbi5hcHBlbmRUbyYmdihuLmFwcGVuZFRvKS5hcHBlbmQocyksZShzKShhKSx7ZWxlbWVudDpzLHNjb3BlOmF9fSl9cmV0dXJue2xvYWQ6YSxjb21waWxlOnN9fV0pLHUucnVuKFtcIiRyb290U2NvcGVcIixcIiRzdGF0ZVwiLFwiJGxvY2F0aW9uXCIsXCIkZG9jdW1lbnRcIixcIiRhbmltYXRlXCIsXCIkaW9uaWNQbGF0Zm9ybVwiLFwiJGlvbmljVmlld1NlcnZpY2VcIixmdW5jdGlvbihlLHQsbixpLG8scixhKXtmdW5jdGlvbiBzKHQpe3JldHVybiBlLiR2aWV3SGlzdG9yeS5iYWNrVmlldz9lLiR2aWV3SGlzdG9yeS5iYWNrVmlldy5nbygpOmlvbmljLlBsYXRmb3JtLmV4aXRBcHAoKSx0LnByZXZlbnREZWZhdWx0KCksITF9ZS4kdmlld0hpc3Rvcnk9e2hpc3Rvcmllczp7cm9vdDp7aGlzdG9yeUlkOlwicm9vdFwiLHBhcmVudEhpc3RvcnlJZDpudWxsLHN0YWNrOltdLGN1cnNvcjotMX19LHZpZXdzOnt9LGJhY2tWaWV3Om51bGwsZm9yd2FyZFZpZXc6bnVsbCxjdXJyZW50VmlldzpudWxsLGRpc2FibGVkUmVnaXN0cmFibGVUYWdOYW1lczpbXX0sYS5kaXNhYmxlUmVnaXN0ZXJCeVRhZ05hbWUmJihhLmRpc2FibGVSZWdpc3RlckJ5VGFnTmFtZShcImlvbi10YWJzXCIpLGEuZGlzYWJsZVJlZ2lzdGVyQnlUYWdOYW1lKFwiaW9uLXNpZGUtbWVudXNcIikpLGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3RhcnRcIixmdW5jdGlvbigpe2lvbmljLmtleWJvYXJkLmhpZGUoKX0pLGUuJG9uKFwidmlld1N0YXRlLmNoYW5nZUhpc3RvcnlcIixmdW5jdGlvbihpLG8pe2lmKG8pe3ZhciByPW8uaGlzdG9yeUlkP2UuJHZpZXdIaXN0b3J5Lmhpc3Rvcmllc1tvLmhpc3RvcnlJZF06bnVsbDtpZihyJiZyLmN1cnNvcj4tMSYmci5jdXJzb3I8ci5zdGFjay5sZW5ndGgpe3ZhciBhPXIuc3RhY2tbci5jdXJzb3JdO3JldHVybiBhLmdvKG8pfSFvLnVybCYmby51aVNyZWYmJihvLnVybD10LmhyZWYoby51aVNyZWYpKSxvLnVybCYmKDA9PT1vLnVybC5pbmRleE9mKFwiI1wiKSYmKG8udXJsPW8udXJsLnJlcGxhY2UoXCIjXCIsXCJcIikpLG8udXJsIT09bi51cmwoKSYmbi51cmwoby51cmwpKX19KSxlLiRvbihcInZpZXdTdGF0ZS52aWV3RW50ZXJcIixmdW5jdGlvbihlLHQpe3QmJnQudGl0bGUmJihpWzBdLnRpdGxlPXQudGl0bGUpfSksci5yZWdpc3RlckJhY2tCdXR0b25BY3Rpb24ocyxiKX1dKS5mYWN0b3J5KFwiJGlvbmljVmlld1NlcnZpY2VcIixbXCIkcm9vdFNjb3BlXCIsXCIkc3RhdGVcIixcIiRsb2NhdGlvblwiLFwiJHdpbmRvd1wiLFwiJGluamVjdG9yXCIsXCIkYW5pbWF0ZVwiLFwiJGlvbmljTmF2Vmlld0NvbmZpZ1wiLFwiJGlvbmljQ2xpY2tCbG9ja1wiLGZ1bmN0aW9uKGUsdCxuLGksbyxyLGEscyl7ZnVuY3Rpb24gYygpe3JldHVybiBpb25pYy5VdGlscy5uZXh0VWlkKCl9dmFyIGw9ZnVuY3Rpb24oKXt9O3JldHVybiBsLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKGUpe2lmKGUpe2Zvcih2YXIgdCBpbiBlKXRoaXNbdF09ZVt0XTtyZXR1cm4gdGhpc31yZXR1cm4gbnVsbH0sbC5wcm90b3R5cGUuZ289ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZU5hbWU/dC5nbyh0aGlzLnN0YXRlTmFtZSx0aGlzLnN0YXRlUGFyYW1zKTp0aGlzLnVybCYmdGhpcy51cmwhPT1uLnVybCgpP2UuJHZpZXdIaXN0b3J5LmJhY2tWaWV3PT09dGhpcz9pLmhpc3RvcnkuZ28oLTEpOmUuJHZpZXdIaXN0b3J5LmZvcndhcmRWaWV3PT09dGhpcz9pLmhpc3RvcnkuZ28oMSk6dm9pZCBuLnVybCh0aGlzLnVybCk6bnVsbH0sbC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuc2NvcGUmJih0aGlzLnNjb3BlLiRkZXN0cm95JiZ0aGlzLnNjb3BlLiRkZXN0cm95KCksdGhpcy5zY29wZT1udWxsKX0se3JlZ2lzdGVyOmZ1bmN0aW9uKHQsaSl7dmFyIG89ZS4kdmlld0hpc3Rvcnkscj10aGlzLmdldEN1cnJlbnRTdGF0ZUlkKCksYT10aGlzLl9nZXRIaXN0b3J5KHQpLHM9by5jdXJyZW50VmlldyxsPW8uYmFja1ZpZXcsdT1vLmZvcndhcmRWaWV3LGQ9dGhpcy5uZXh0Vmlld09wdGlvbnMoKSxmPXt2aWV3SWQ6bnVsbCxuYXZBY3Rpb246bnVsbCxuYXZEaXJlY3Rpb246bnVsbCxoaXN0b3J5SWQ6YS5oaXN0b3J5SWR9O2lmKGkmJiF0aGlzLmlzVGFnTmFtZVJlZ2lzdHJhYmxlKGkpKXJldHVybiBmLm5hdkFjdGlvbj1cImRpc2FibGVkQnlUYWdOYW1lXCIsZjtpZihzJiZzLnN0YXRlSWQ9PT1yJiZzLmhpc3RvcnlJZD09PWEuaGlzdG9yeUlkKXJldHVybiBmLm5hdkFjdGlvbj1cIm5vQ2hhbmdlXCIsZjtpZihvLmZvcmNlZE5hdilpb25pYy5VdGlscy5leHRlbmQoZixvLmZvcmNlZE5hdiksZS4kdmlld0hpc3RvcnkuZm9yY2VkTmF2PW51bGw7ZWxzZSBpZihsJiZsLnN0YXRlSWQ9PT1yKWYudmlld0lkPWwudmlld0lkLGYubmF2QWN0aW9uPVwibW92ZUJhY2tcIixmLnZpZXdJZD1sLnZpZXdJZCxsLmhpc3RvcnlJZD09PXMuaGlzdG9yeUlkJiYoZi5uYXZEaXJlY3Rpb249XCJiYWNrXCIpO2Vsc2UgaWYodSYmdS5zdGF0ZUlkPT09cil7Zi52aWV3SWQ9dS52aWV3SWQsZi5uYXZBY3Rpb249XCJtb3ZlRm9yd2FyZFwiLHUuaGlzdG9yeUlkPT09cy5oaXN0b3J5SWQmJihmLm5hdkRpcmVjdGlvbj1cImZvcndhcmRcIik7dmFyIGg9dGhpcy5fZ2V0UGFyZW50SGlzdG9yeU9iaih0KTt1Lmhpc3RvcnlJZCYmaC5zY29wZSYmKGguc2NvcGUuJGhpc3RvcnlJZD11Lmhpc3RvcnlJZCxmLmhpc3RvcnlJZD11Lmhpc3RvcnlJZCl9ZWxzZSBpZihzJiZzLmhpc3RvcnlJZCE9PWEuaGlzdG9yeUlkJiZhLmN1cnNvcj4tMSYmYS5zdGFjay5sZW5ndGg+MCYmYS5jdXJzb3I8YS5zdGFjay5sZW5ndGgmJmEuc3RhY2tbYS5jdXJzb3JdLnN0YXRlSWQ9PT1yKXt2YXIgcD1hLnN0YWNrW2EuY3Vyc29yXTtmLnZpZXdJZD1wLnZpZXdJZCxmLm5hdkFjdGlvbj1cIm1vdmVCYWNrXCI7dmFyIHY9dGhpcy5fZ2V0Vmlld0J5SWQocC5iYWNrVmlld0lkKTtcbnYmJnAuaGlzdG9yeUlkIT09di5oaXN0b3J5SWQmJihhLnN0YWNrW2EuY3Vyc29yXS5iYWNrVmlld0lkPXMudmlld0lkKX1lbHNle2lmKGYudmlld0lkPWMocikscyl7aWYocy5mb3J3YXJkVmlld0lkPWYudmlld0lkLGEuaGlzdG9yeUlkPT09cy5oaXN0b3J5SWQmJihmLm5hdkRpcmVjdGlvbj1cImZvcndhcmRcIiksZi5uYXZBY3Rpb249XCJuZXdWaWV3XCIsdSYmcy5zdGF0ZUlkIT09dS5zdGF0ZUlkJiZzLmhpc3RvcnlJZD09PXUuaGlzdG9yeUlkKXt2YXIgZz10aGlzLl9nZXRIaXN0b3J5QnlJZCh1Lmhpc3RvcnlJZCk7aWYoZylmb3IodmFyIG09Zy5zdGFjay5sZW5ndGgtMTttPj11LmluZGV4O20tLSlnLnN0YWNrW21dLmRlc3Ryb3koKSxnLnN0YWNrLnNwbGljZShtKX19ZWxzZSBmLm5hdkFjdGlvbj1cImluaXRpYWxWaWV3XCI7by52aWV3c1tmLnZpZXdJZF09dGhpcy5jcmVhdGVWaWV3KHt2aWV3SWQ6Zi52aWV3SWQsaW5kZXg6YS5zdGFjay5sZW5ndGgsaGlzdG9yeUlkOmEuaGlzdG9yeUlkLGJhY2tWaWV3SWQ6cyYmcy52aWV3SWQ/cy52aWV3SWQ6bnVsbCxmb3J3YXJkVmlld0lkOm51bGwsc3RhdGVJZDpyLHN0YXRlTmFtZTp0aGlzLmdldEN1cnJlbnRTdGF0ZU5hbWUoKSxzdGF0ZVBhcmFtczp0aGlzLmdldEN1cnJlbnRTdGF0ZVBhcmFtcygpLHVybDpuLnVybCgpfSksXCJtb3ZlQmFja1wiPT1mLm5hdkFjdGlvbiYmZS4kZW1pdChcIiR2aWV3SGlzdG9yeS52aWV3QmFja1wiLHMudmlld0lkLGYudmlld0lkKSxhLnN0YWNrLnB1c2goby52aWV3c1tmLnZpZXdJZF0pfXJldHVybiBkJiYoZC5kaXNhYmxlQW5pbWF0ZSYmKGYubmF2RGlyZWN0aW9uPW51bGwpLGQuZGlzYWJsZUJhY2smJihvLnZpZXdzW2Yudmlld0lkXS5iYWNrVmlld0lkPW51bGwpLHRoaXMubmV4dFZpZXdPcHRpb25zKG51bGwpKSx0aGlzLnNldE5hdlZpZXdzKGYudmlld0lkKSxhLmN1cnNvcj1vLmN1cnJlbnRWaWV3LmluZGV4LGZ9LHNldE5hdlZpZXdzOmZ1bmN0aW9uKHQpe3ZhciBuPWUuJHZpZXdIaXN0b3J5O24uY3VycmVudFZpZXc9dGhpcy5fZ2V0Vmlld0J5SWQodCksbi5iYWNrVmlldz10aGlzLl9nZXRCYWNrVmlldyhuLmN1cnJlbnRWaWV3KSxuLmZvcndhcmRWaWV3PXRoaXMuX2dldEZvcndhcmRWaWV3KG4uY3VycmVudFZpZXcpLGUuJGJyb2FkY2FzdChcIiR2aWV3SGlzdG9yeS5oaXN0b3J5Q2hhbmdlXCIse3Nob3dCYWNrOm4uYmFja1ZpZXcmJm4uYmFja1ZpZXcuaGlzdG9yeUlkPT09bi5jdXJyZW50Vmlldy5oaXN0b3J5SWR9KX0scmVnaXN0ZXJIaXN0b3J5OmZ1bmN0aW9uKGUpe2UuJGhpc3RvcnlJZD1pb25pYy5VdGlscy5uZXh0VWlkKCl9LGNyZWF0ZVZpZXc6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGw7cmV0dXJuIHQuaW5pdGlhbGl6ZShlKX0sZ2V0Q3VycmVudFZpZXc6ZnVuY3Rpb24oKXtyZXR1cm4gZS4kdmlld0hpc3RvcnkuY3VycmVudFZpZXd9LGdldEJhY2tWaWV3OmZ1bmN0aW9uKCl7cmV0dXJuIGUuJHZpZXdIaXN0b3J5LmJhY2tWaWV3fSxnZXRGb3J3YXJkVmlldzpmdW5jdGlvbigpe3JldHVybiBlLiR2aWV3SGlzdG9yeS5mb3J3YXJkVmlld30sZ2V0TmF2RGlyZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGUuJHZpZXdIaXN0b3J5Lm5hdkRpcmVjdGlvbn0sZ2V0Q3VycmVudFN0YXRlTmFtZTpmdW5jdGlvbigpe3JldHVybiB0JiZ0LmN1cnJlbnQ/dC5jdXJyZW50Lm5hbWU6bnVsbH0saXNDdXJyZW50U3RhdGVOYXZWaWV3OmZ1bmN0aW9uKGUpe3JldHVybiB0JiZ0LmN1cnJlbnQmJnQuY3VycmVudC52aWV3cyYmdC5jdXJyZW50LnZpZXdzW2VdPyEwOiExfSxnZXRDdXJyZW50U3RhdGVQYXJhbXM6ZnVuY3Rpb24oKXt2YXIgZTtpZih0JiZ0LnBhcmFtcylmb3IodmFyIG4gaW4gdC5wYXJhbXMpdC5wYXJhbXMuaGFzT3duUHJvcGVydHkobikmJihlPWV8fHt9LGVbbl09dC5wYXJhbXNbbl0pO3JldHVybiBlfSxnZXRDdXJyZW50U3RhdGVJZDpmdW5jdGlvbigpe3ZhciBlO2lmKHQmJnQuY3VycmVudCYmdC5jdXJyZW50Lm5hbWUpe2lmKGU9dC5jdXJyZW50Lm5hbWUsdC5wYXJhbXMpZm9yKHZhciBuIGluIHQucGFyYW1zKXQucGFyYW1zLmhhc093blByb3BlcnR5KG4pJiZ0LnBhcmFtc1tuXSYmKGUrPVwiX1wiK24rXCI9XCIrdC5wYXJhbXNbbl0pO3JldHVybiBlfXJldHVybiBpb25pYy5VdGlscy5uZXh0VWlkKCl9LGdvVG9IaXN0b3J5Um9vdDpmdW5jdGlvbih0KXtpZih0KXt2YXIgbj1lLiR2aWV3SGlzdG9yeS5oaXN0b3JpZXNbdF07aWYobiYmbi5zdGFjay5sZW5ndGgpe2lmKGUuJHZpZXdIaXN0b3J5LmN1cnJlbnRWaWV3JiZlLiR2aWV3SGlzdG9yeS5jdXJyZW50Vmlldy52aWV3SWQ9PT1uLnN0YWNrWzBdLnZpZXdJZClyZXR1cm47ZS4kdmlld0hpc3RvcnkuZm9yY2VkTmF2PXt2aWV3SWQ6bi5zdGFja1swXS52aWV3SWQsbmF2QWN0aW9uOlwibW92ZUJhY2tcIixuYXZEaXJlY3Rpb246XCJiYWNrXCJ9LG4uc3RhY2tbMF0uZ28oKX19fSxfZ2V0Vmlld0J5SWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQ/ZS4kdmlld0hpc3Rvcnkudmlld3NbdF06bnVsbH0sX2dldEJhY2tWaWV3OmZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMuX2dldFZpZXdCeUlkKGUuYmFja1ZpZXdJZCk6bnVsbH0sX2dldEZvcndhcmRWaWV3OmZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMuX2dldFZpZXdCeUlkKGUuZm9yd2FyZFZpZXdJZCk6bnVsbH0sX2dldEhpc3RvcnlCeUlkOmZ1bmN0aW9uKHQpe3JldHVybiB0P2UuJHZpZXdIaXN0b3J5Lmhpc3Rvcmllc1t0XTpudWxsfSxfZ2V0SGlzdG9yeTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLl9nZXRQYXJlbnRIaXN0b3J5T2JqKHQpO3JldHVybiBlLiR2aWV3SGlzdG9yeS5oaXN0b3JpZXNbbi5oaXN0b3J5SWRdfHwoZS4kdmlld0hpc3RvcnkuaGlzdG9yaWVzW24uaGlzdG9yeUlkXT17aGlzdG9yeUlkOm4uaGlzdG9yeUlkLHBhcmVudEhpc3RvcnlJZDp0aGlzLl9nZXRQYXJlbnRIaXN0b3J5T2JqKG4uc2NvcGUuJHBhcmVudCkuaGlzdG9yeUlkLHN0YWNrOltdLGN1cnNvcjotMX0pLGUuJHZpZXdIaXN0b3J5Lmhpc3Rvcmllc1tuLmhpc3RvcnlJZF19LF9nZXRQYXJlbnRIaXN0b3J5T2JqOmZ1bmN0aW9uKHQpe2Zvcih2YXIgbj10O247KXtpZihuLmhhc093blByb3BlcnR5KFwiJGhpc3RvcnlJZFwiKSlyZXR1cm57aGlzdG9yeUlkOm4uJGhpc3RvcnlJZCxzY29wZTpufTtuPW4uJHBhcmVudH1yZXR1cm57aGlzdG9yeUlkOlwicm9vdFwiLHNjb3BlOmV9fSxuZXh0Vmlld09wdGlvbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dm9pZCh0aGlzLl9uZXh0T3B0cz1lKTp0aGlzLl9uZXh0T3B0c30sZ2V0UmVuZGVyZXI6ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoZSl7Zm9yKHZhciB0PVwiXCI7IXQmJmU7KXQ9ZS5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIiksZT1lLnBhcmVudEVsZW1lbnQ7cmV0dXJuIHQ/dDphLnRyYW5zaXRpb259ZnVuY3Rpb24gbygpe2QmJmVbMF0uY2xhc3NMaXN0LmFkZChkKSxcImJhY2tcIj09PWMubmF2RGlyZWN0aW9uP2VbMF0uY2xhc3NMaXN0LmFkZChcInJldmVyc2VcIik6ZVswXS5jbGFzc0xpc3QucmVtb3ZlKFwicmV2ZXJzZVwiKX12YXIgYyxsLHU9dGhpcyxkPWkoZVswXSk7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybntlbnRlcjpmdW5jdGlvbihuKXtyZXR1cm4gbCYmdD8obygpLG4uYWRkQ2xhc3MoXCJuZy1lbnRlclwiKSxzLnNob3coKSx2b2lkIHIuZW50ZXIobixlLG51bGwsZnVuY3Rpb24oKXtzLmhpZGUoKSxkJiZlWzBdLmNsYXNzTGlzdC5yZW1vdmUoZCl9KSk6KGx8fHMuaGlkZSgpLHZvaWQgZS5hcHBlbmQobikpfSxsZWF2ZTpmdW5jdGlvbigpe3ZhciBuPWUuY29udGVudHMoKTtyZXR1cm4gbCYmdD8obygpLHZvaWQgci5sZWF2ZShuLGZ1bmN0aW9uKCl7bi5yZW1vdmUoKX0pKTp2b2lkIG4ucmVtb3ZlKCl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGUpe3JldHVybiBjPXUucmVnaXN0ZXIobixlKSxsPW51bGwhPT1kJiZudWxsIT09Yy5uYXZEaXJlY3Rpb24sY319fX0sZGlzYWJsZVJlZ2lzdGVyQnlUYWdOYW1lOmZ1bmN0aW9uKHQpe2UuJHZpZXdIaXN0b3J5LmRpc2FibGVkUmVnaXN0cmFibGVUYWdOYW1lcy5wdXNoKHQudG9VcHBlckNhc2UoKSl9LGlzVGFnTmFtZVJlZ2lzdHJhYmxlOmZ1bmN0aW9uKHQpe3ZhciBuLGksbz1lLiR2aWV3SGlzdG9yeS5kaXNhYmxlZFJlZ2lzdHJhYmxlVGFnTmFtZXM7Zm9yKG49MDtuPHQubGVuZ3RoO24rKylpZigxPT09dFtuXS5ub2RlVHlwZSlmb3IoaT0wO2k8by5sZW5ndGg7aSsrKWlmKHRbbl0udGFnTmFtZT09PW9baV0pcmV0dXJuITE7cmV0dXJuITB9LGNsZWFySGlzdG9yeTpmdW5jdGlvbigpe3ZhciB0PWUuJHZpZXdIaXN0b3J5Lmhpc3RvcmllcyxuPWUuJHZpZXdIaXN0b3J5LmN1cnJlbnRWaWV3O2lmKHQpZm9yKHZhciBpIGluIHQpdFtpXS5zdGFjayYmKHRbaV0uc3RhY2s9W10sdFtpXS5jdXJzb3I9LTEpLG4mJm4uaGlzdG9yeUlkPT09aT8obi5iYWNrVmlld0lkPW51bGwsbi5mb3J3YXJkVmlld0lkPW51bGwsdFtpXS5zdGFjay5wdXNoKG4pKTp0W2ldLmRlc3Ryb3kmJnRbaV0uZGVzdHJveSgpO2Zvcih2YXIgbyBpbiBlLiR2aWV3SGlzdG9yeS52aWV3cylvIT09bi52aWV3SWQmJmRlbGV0ZSBlLiR2aWV3SGlzdG9yeS52aWV3c1tvXTtuJiZ0aGlzLnNldE5hdlZpZXdzKG4udmlld0lkKX19fV0pLHUuY29uZmlnKFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe3JldHVybiBlLl9faGFzaD1lLmhhc2gsZS5oYXNoPWZ1bmN0aW9uKG4pe3JldHVybiBhbmd1bGFyLmlzRGVmaW5lZChuKSYmdChmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2Nyb2xsLWNvbnRlbnRcIik7ZSYmKGUuc2Nyb2xsVG9wPTApfSwwLCExKSxlLl9faGFzaChuKX0sZX1lLmRlY29yYXRvcihcIiRsb2NhdGlvblwiLFtcIiRkZWxlZ2F0ZVwiLFwiJHRpbWVvdXRcIix0XSl9XSksdS5zZXJ2aWNlKFwiJGlvbmljTGlzdERlbGVnYXRlXCIsbihbXCJzaG93UmVvcmRlclwiLFwic2hvd0RlbGV0ZVwiLFwiY2FuU3dpcGVJdGVtc1wiLFwiY2xvc2VPcHRpb25CdXR0b25zXCJdKSkuY29udHJvbGxlcihcIiRpb25pY0xpc3RcIixbXCIkc2NvcGVcIixcIiRhdHRyc1wiLFwiJHBhcnNlXCIsXCIkaW9uaWNMaXN0RGVsZWdhdGVcIixmdW5jdGlvbihlLHQsbixpKXt2YXIgbz0hMCxyPSExLGE9ITEscz1pLl9yZWdpc3Rlckluc3RhbmNlKHRoaXMsdC5kZWxlZ2F0ZUhhbmRsZSk7ZS4kb24oXCIkZGVzdHJveVwiLHMpLHRoaXMuc2hvd1Jlb3JkZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJihyPSEhZSkscn0sdGhpcy5zaG93RGVsZXRlPWZ1bmN0aW9uKGUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoJiYoYT0hIWUpLGF9LHRoaXMuY2FuU3dpcGVJdGVtcz1mdW5jdGlvbihlKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCYmKG89ISFlKSxvfSx0aGlzLmNsb3NlT3B0aW9uQnV0dG9ucz1mdW5jdGlvbigpe3RoaXMubGlzdFZpZXcmJnRoaXMubGlzdFZpZXcuY2xlYXJEcmFnRWZmZWN0cygpfX1dKSx1LmNvbnRyb2xsZXIoXCIkaW9uaWNOYXZCYXJcIixbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixcIiRpb25pY1ZpZXdTZXJ2aWNlXCIsXCIkYW5pbWF0ZVwiLFwiJGNvbXBpbGVcIixcIiRpb25pY05hdkJhckRlbGVnYXRlXCIsZnVuY3Rpb24oZSx0LG4saSxvLHIsYSl7dC5wYXJlbnQoKS5kYXRhKFwiJGlvbk5hdkJhckNvbnRyb2xsZXJcIix0aGlzKTt2YXIgcz1hLl9yZWdpc3Rlckluc3RhbmNlKHRoaXMsbi5kZWxlZ2F0ZUhhbmRsZSk7ZS4kb24oXCIkZGVzdHJveVwiLHMpLGUuJG9uKFwiJHZpZXdIaXN0b3J5Lmhpc3RvcnlDaGFuZ2VcIixmdW5jdGlvbihlLHQpe2JhY2tJc1Nob3duPSEhdC5zaG93QmFja30pO3ZhciBjPXRoaXM7dGhpcy5sZWZ0QnV0dG9uc0VsZW1lbnQ9dih0WzBdLnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9ucy5sZWZ0LWJ1dHRvbnNcIikpLHRoaXMucmlnaHRCdXR0b25zRWxlbWVudD12KHRbMF0ucXVlcnlTZWxlY3RvcihcIi5idXR0b25zLnJpZ2h0LWJ1dHRvbnNcIikpLHRoaXMuYmFjaz1mdW5jdGlvbigpe3ZhciBlPWkuZ2V0QmFja1ZpZXcoKTtyZXR1cm4gZSYmZS5nbygpLCExfSx0aGlzLmFsaWduPWZ1bmN0aW9uKGUpe3RoaXMuX2hlYWRlckJhclZpZXcuYWxpZ24oZSl9LHRoaXMuc2hvd0JhY2tCdXR0b249ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJihlLmJhY2tCdXR0b25TaG93bj0hIXQpLCEoIWUuaGFzQmFja0J1dHRvbnx8IWUuYmFja0J1dHRvblNob3duKX0sdGhpcy5zaG93QmFyPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoJiYoZS5pc0ludmlzaWJsZT0hdCxlLiRwYXJlbnQuJGhhc0hlYWRlcj0hIXQpLCFlLmlzSW52aXNpYmxlfSx0aGlzLnNldFRpdGxlPWZ1bmN0aW9uKHQpe2UudGl0bGUhPT10JiYoZS5vbGRUaXRsZT1lLnRpdGxlLGUudGl0bGU9dHx8XCJcIil9LHRoaXMuY2hhbmdlVGl0bGU9ZnVuY3Rpb24obixpKXtyZXR1cm4gZS50aXRsZT09PW4/KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiYWNrSXNTaG93biYmIWJhY2tJc1Nob3duJiZlLmJhY2tCdXR0b25TaG93biYmdih0WzBdLnF1ZXJ5U2VsZWN0b3IoXCIuYmFjay1idXR0b25cIikpLmFkZENsYXNzKFwibmctaGlkZVwiKSwhMSk6KHRoaXMuc2V0VGl0bGUobiksZS5pc1JldmVyc2U9XCJiYWNrXCI9PWksZS5zaG91bGRBbmltYXRlPSEhaSxlLnNob3VsZEFuaW1hdGU/dGhpcy5fYW5pbWF0ZVRpdGxlcygpOnRoaXMuX2hlYWRlckJhclZpZXcuYWxpZ24oKSwhMCl9LHRoaXMuZ2V0VGl0bGU9ZnVuY3Rpb24oKXtyZXR1cm4gZS50aXRsZXx8XCJcIn0sdGhpcy5nZXRQcmV2aW91c1RpdGxlPWZ1bmN0aW9uKCl7cmV0dXJuIGUub2xkVGl0bGV8fFwiXCJ9LHRoaXMuX2FuaW1hdGVUaXRsZXM9ZnVuY3Rpb24oKXt2YXIgbixpLGE7YT10WzBdLnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGl0bGVcIiksYS5sZW5ndGgmJihuPXIoJzxoMSBjbGFzcz1cInRpdGxlXCIgbmctYmluZC1odG1sPVwib2xkVGl0bGVcIj48L2gxPicpKGUpLHYoYVthLmxlbmd0aC0xXSkucmVwbGFjZVdpdGgobikpLGk9cignPGgxIGNsYXNzPVwidGl0bGUgaW52aXNpYmxlXCIgbmctYmluZC1odG1sPVwidGl0bGVcIj48L2gxPicpKGUpLGlvbmljLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe24mJm8ubGVhdmUodihuKSk7dmFyIHI9biYmdihuKXx8bnVsbDtvLmVudGVyKGksdCxyLGZ1bmN0aW9uKCl7Yy5faGVhZGVyQmFyVmlldy5hbGlnbigpfSksZihhLGZ1bmN0aW9uKGUpe2UmJmUucGFyZW50Tm9kZSYmdihlKS5yZW1vdmUoKX0pLGUuJGRpZ2VzdCgpLGlvbmljLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe2lbMF0uY2xhc3NMaXN0LnJlbW92ZShcImludmlzaWJsZVwiKX0pfSl9fV0pLHUuZmFjdG9yeShcIiQkc2Nyb2xsVmFsdWVDYWNoZVwiLGZ1bmN0aW9uKCl7cmV0dXJue319KS5jb250cm9sbGVyKFwiJGlvbmljU2Nyb2xsXCIsW1wiJHNjb3BlXCIsXCJzY3JvbGxWaWV3T3B0aW9uc1wiLFwiJHRpbWVvdXRcIixcIiR3aW5kb3dcIixcIiQkc2Nyb2xsVmFsdWVDYWNoZVwiLFwiJGxvY2F0aW9uXCIsXCIkcm9vdFNjb3BlXCIsXCIkZG9jdW1lbnRcIixcIiRpb25pY1Njcm9sbERlbGVnYXRlXCIsZnVuY3Rpb24oZSx0LG4saSxvLHIsYSxzLGMpe3ZhciBsPXRoaXM7dGhpcy5fX3RpbWVvdXQ9bix0aGlzLl9zY3JvbGxWaWV3T3B0aW9ucz10O3ZhciB1PXRoaXMuZWxlbWVudD10LmVsLGQ9dGhpcy4kZWxlbWVudD12KHUpLGY9dGhpcy5zY3JvbGxWaWV3PW5ldyBpb25pYy52aWV3cy5TY3JvbGwodCk7KGQucGFyZW50KCkubGVuZ3RoP2QucGFyZW50KCk6ZCkuZGF0YShcIiQkaW9uaWNTY3JvbGxDb250cm9sbGVyXCIsdGhpcyk7dmFyIGg9Yy5fcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLHQuZGVsZWdhdGVIYW5kbGUpO2FuZ3VsYXIuaXNEZWZpbmVkKHQuYm91bmNpbmcpfHxpb25pYy5QbGF0Zm9ybS5yZWFkeShmdW5jdGlvbigpe2Yub3B0aW9ucy5ib3VuY2luZz0hMCxpb25pYy5QbGF0Zm9ybS5pc0FuZHJvaWQoKSYmKGYub3B0aW9ucy5ib3VuY2luZz0hMSxmLm9wdGlvbnMuZGVjZWxlcmF0aW9uPS45NSl9KTt2YXIgcD1hbmd1bGFyLmJpbmQoZixmLnJlc2l6ZSk7aW9uaWMub24oXCJyZXNpemVcIixwLGkpO3ZhciBnPWFuZ3VsYXIubm9vcCxtPWFuZ3VsYXIubm9vcCwkPWZ1bmN0aW9uKHQpe3ZhciBuPSh0Lm9yaWdpbmFsRXZlbnR8fHQpLmRldGFpbHx8e307ZS4kb25TY3JvbGwmJmUuJG9uU2Nyb2xsKHtldmVudDp0LHNjcm9sbFRvcDpuLnNjcm9sbFRvcHx8MCxzY3JvbGxMZWZ0Om4uc2Nyb2xsTGVmdHx8MH0pfTtkLm9uKFwic2Nyb2xsXCIsJCksZS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7aCgpLGYuX19jbGVhbnVwKCksaW9uaWMub2ZmKFwicmVzaXplXCIscCxpKSxpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixwKSxtKCksZygpLGwuX3JlbWVtYmVyU2Nyb2xsSWQmJihvW2wuX3JlbWVtYmVyU2Nyb2xsSWRdPWYuZ2V0VmFsdWVzKCkpLHQ9bnVsbCxsLl9zY3JvbGxWaWV3T3B0aW9ucz1udWxsLGwuZWxlbWVudD1udWxsLGQub2ZmKFwic2Nyb2xsXCIsJCksZD1udWxsLGwuJGVsZW1lbnQ9bnVsbCxsLnNjcm9sbFZpZXc9bnVsbCxmPW51bGx9KSxtPWUuJG9uKFwiJHZpZXdDb250ZW50TG9hZGVkXCIsZnVuY3Rpb24odCxpKXtpZighdC5kZWZhdWx0UHJldmVudGVkKXt0LnByZXZlbnREZWZhdWx0KCk7dmFyIG89aSYmaS52aWV3SWR8fGUuJGhpc3RvcnlJZDtvJiZuKGZ1bmN0aW9uKCl7bC5yZW1lbWJlclNjcm9sbFBvc2l0aW9uKG8pLGwuc2Nyb2xsVG9SZW1lbWJlcmVkUG9zaXRpb24oKSxnPWEuJG9uKFwiJHZpZXdIaXN0b3J5LnZpZXdCYWNrXCIsZnVuY3Rpb24oZSx0KXtvPT09dCYmbC5mb3JnZXRTY3JvbGxQb3NpdGlvbigpfSl9LDAsITEpfX0pLG4oZnVuY3Rpb24oKXtmJiZmLnJ1biYmZi5ydW4oKX0pLHRoaXMuX3JlbWVtYmVyU2Nyb2xsSWQ9bnVsbCx0aGlzLmdldFNjcm9sbFZpZXc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zY3JvbGxWaWV3fSx0aGlzLmdldFNjcm9sbFBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsVmlldy5nZXRWYWx1ZXMoKX0sdGhpcy5yZXNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gbihwKS50aGVuKGZ1bmN0aW9uKCl7ZCYmZC50cmlnZ2VySGFuZGxlcihcInNjcm9sbC5yZXNpemVcIil9KX0sdGhpcy5zY3JvbGxUb3A9ZnVuY3Rpb24oZSl7dGhpcy5yZXNpemUoKS50aGVuKGZ1bmN0aW9uKCl7Zi5zY3JvbGxUbygwLDAsISFlKX0pfSx0aGlzLnNjcm9sbEJvdHRvbT1mdW5jdGlvbihlKXt0aGlzLnJlc2l6ZSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgdD1mLmdldFNjcm9sbE1heCgpO2Yuc2Nyb2xsVG8odC5sZWZ0LHQudG9wLCEhZSl9KX0sdGhpcy5zY3JvbGxUbz1mdW5jdGlvbihlLHQsbil7dGhpcy5yZXNpemUoKS50aGVuKGZ1bmN0aW9uKCl7Zi5zY3JvbGxUbyhlLHQsISFuKX0pfSx0aGlzLnpvb21Ubz1mdW5jdGlvbihlLHQsbixpKXt0aGlzLnJlc2l6ZSgpLnRoZW4oZnVuY3Rpb24oKXtmLnpvb21UbyhlLCEhdCxuLGkpfSl9LHRoaXMuem9vbUJ5PWZ1bmN0aW9uKGUsdCxuLGkpe3RoaXMucmVzaXplKCkudGhlbihmdW5jdGlvbigpe2Yuem9vbUJ5KGUsISF0LG4saSl9KX0sdGhpcy5zY3JvbGxCeT1mdW5jdGlvbihlLHQsbil7dGhpcy5yZXNpemUoKS50aGVuKGZ1bmN0aW9uKCl7Zi5zY3JvbGxCeShlLHQsISFuKX0pfSx0aGlzLmFuY2hvclNjcm9sbD1mdW5jdGlvbihlKXt0aGlzLnJlc2l6ZSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgdD1yLmhhc2goKSxuPXQmJnNbMF0uZ2V0RWxlbWVudEJ5SWQodCk7aWYoIXR8fCFuKXJldHVybiB2b2lkIGYuc2Nyb2xsVG8oMCwwLCEhZSk7dmFyIGk9bixvPTAsYT0wLGM9MDtkbyBudWxsIT09aSYmKG8rPWkub2Zmc2V0TGVmdCksbnVsbCE9PWkmJihhKz1pLm9mZnNldFRvcCksaT1pLm9mZnNldFBhcmVudCxjKys7d2hpbGUoaS5hdHRyaWJ1dGVzIT1sLmVsZW1lbnQuYXR0cmlidXRlcyYmaS5vZmZzZXRQYXJlbnQpO2Yuc2Nyb2xsVG8obyxhLCEhZSl9KX0sdGhpcy5yZW1lbWJlclNjcm9sbFBvc2l0aW9uPWZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcihcIk11c3Qgc3VwcGx5IGFuIGlkIHRvIHJlbWVtYmVyIHRoZSBzY3JvbGwgYnkhXCIpO3RoaXMuX3JlbWVtYmVyU2Nyb2xsSWQ9ZX0sdGhpcy5mb3JnZXRTY3JvbGxQb3NpdGlvbj1mdW5jdGlvbigpe2RlbGV0ZSBvW3RoaXMuX3JlbWVtYmVyU2Nyb2xsSWRdLHRoaXMuX3JlbWVtYmVyU2Nyb2xsSWQ9bnVsbH0sdGhpcy5zY3JvbGxUb1JlbWVtYmVyZWRQb3NpdGlvbj1mdW5jdGlvbihlKXt2YXIgdD1vW3RoaXMuX3JlbWVtYmVyU2Nyb2xsSWRdO3QmJnRoaXMucmVzaXplKCkudGhlbihmdW5jdGlvbigpe2YmJmYuc2Nyb2xsVG8mJmYuc2Nyb2xsVG8oK3QubGVmdCwrdC50b3AsZSl9KX0sdGhpcy5fc2V0UmVmcmVzaGVyPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5yZWZyZXNoZXI9dCxvPWwucmVmcmVzaGVyLmNsaWVudEhlaWdodHx8NjA7Zi5hY3RpdmF0ZVB1bGxUb1JlZnJlc2gobyxmdW5jdGlvbigpe2kuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKSxlLiRvblB1bGxpbmcoKX0sZnVuY3Rpb24oKXtuKGZ1bmN0aW9uKCl7aS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpLGkuY2xhc3NMaXN0LnJlbW92ZShcInJlZnJlc2hpbmdcIiksaS5jbGFzc0xpc3QucmVtb3ZlKFwicmVmcmVzaGluZy10YWlsXCIpLGkuY2xhc3NMaXN0LmFkZChcImludmlzaWJsZVwiKX0sMzAwKX0sZnVuY3Rpb24oKXtpLmNsYXNzTGlzdC5hZGQoXCJyZWZyZXNoaW5nXCIpLGUuJG9uUmVmcmVzaCgpfSxmdW5jdGlvbigpe2kuY2xhc3NMaXN0LnJlbW92ZShcImludmlzaWJsZVwiKX0sZnVuY3Rpb24oKXtpLmNsYXNzTGlzdC5hZGQoXCJpbnZpc2libGVcIil9LGZ1bmN0aW9uKCl7aS5jbGFzc0xpc3QuYWRkKFwicmVmcmVzaGluZy10YWlsXCIpfSl9fV0pLHUuY29udHJvbGxlcihcIiRpb25pY1NpZGVNZW51c1wiLFtcIiRzY29wZVwiLFwiJGF0dHJzXCIsXCIkaW9uaWNTaWRlTWVudURlbGVnYXRlXCIsXCIkaW9uaWNQbGF0Zm9ybVwiLFwiJGlvbmljQm9keVwiLGZ1bmN0aW9uKGUsdCxuLGksbyl7dmFyIHIsYSxzLGMsbCx1LGQsZj10aGlzO2YuJHNjb3BlPWUsZi5pbml0aWFsaXplPWZ1bmN0aW9uKGUpe2YubGVmdD1lLmxlZnQsZi5yaWdodD1lLnJpZ2h0LGYuc2V0Q29udGVudChlLmNvbnRlbnQpLGYuZHJhZ1RocmVzaG9sZFg9ZS5kcmFnVGhyZXNob2xkWHx8MTB9LGYuc2V0Q29udGVudD1mdW5jdGlvbihlKXtlJiYoZi5jb250ZW50PWUsZi5jb250ZW50Lm9uRHJhZz1mdW5jdGlvbihlKXtmLl9oYW5kbGVEcmFnKGUpfSxmLmNvbnRlbnQuZW5kRHJhZz1mdW5jdGlvbihlKXtmLl9lbmREcmFnKGUpfSl9LGYuaXNPcGVuTGVmdD1mdW5jdGlvbigpe3JldHVybiBmLmdldE9wZW5BbW91bnQoKT4wfSxmLmlzT3BlblJpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIGYuZ2V0T3BlbkFtb3VudCgpPDB9LGYudG9nZ2xlTGVmdD1mdW5jdGlvbihlKXtpZighZCYmZi5sZWZ0LmlzRW5hYmxlZCl7dmFyIHQ9Zi5nZXRPcGVuQW1vdW50KCk7MD09PWFyZ3VtZW50cy5sZW5ndGgmJihlPTA+PXQpLGYuY29udGVudC5lbmFibGVBbmltYXRpb24oKSxmLm9wZW5QZXJjZW50YWdlKGU/MTAwOjApfX0sZi50b2dnbGVSaWdodD1mdW5jdGlvbihlKXtpZighZCYmZi5yaWdodC5pc0VuYWJsZWQpe3ZhciB0PWYuZ2V0T3BlbkFtb3VudCgpOzA9PT1hcmd1bWVudHMubGVuZ3RoJiYoZT10Pj0wKSxmLmNvbnRlbnQuZW5hYmxlQW5pbWF0aW9uKCksZi5vcGVuUGVyY2VudGFnZShlPy0xMDA6MCl9fSxmLmNsb3NlPWZ1bmN0aW9uKCl7Zi5vcGVuUGVyY2VudGFnZSgwKX0sZi5nZXRPcGVuQW1vdW50PWZ1bmN0aW9uKCl7cmV0dXJuIGYuY29udGVudCYmZi5jb250ZW50LmdldFRyYW5zbGF0ZVgoKXx8MH0sZi5nZXRPcGVuUmF0aW89ZnVuY3Rpb24oKXt2YXIgZT1mLmdldE9wZW5BbW91bnQoKTtyZXR1cm4gZT49MD9lL2YubGVmdC53aWR0aDplL2YucmlnaHQud2lkdGh9LGYuaXNPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuIDAhPT1mLmdldE9wZW5BbW91bnQoKX0sZi5nZXRPcGVuUGVyY2VudGFnZT1mdW5jdGlvbigpe3JldHVybiAxMDAqZi5nZXRPcGVuUmF0aW8oKX0sZi5vcGVuUGVyY2VudGFnZT1mdW5jdGlvbihlKXt2YXIgdD1lLzEwMDtpZihmLmxlZnQmJmU+PTApZi5vcGVuQW1vdW50KGYubGVmdC53aWR0aCp0KTtlbHNlIGlmKGYucmlnaHQmJjA+ZSl7e2YucmlnaHQud2lkdGh9Zi5vcGVuQW1vdW50KGYucmlnaHQud2lkdGgqdCl9by5lbmFibGVDbGFzcygwIT09ZSxcIm1lbnUtb3BlblwiKX0sZi5vcGVuQW1vdW50PWZ1bmN0aW9uKGUpe3ZhciB0PWYubGVmdCYmZi5sZWZ0LndpZHRofHwwLG49Zi5yaWdodCYmZi5yaWdodC53aWR0aHx8MDtyZXR1cm4oZi5sZWZ0JiZmLmxlZnQuaXNFbmFibGVkfHwhKGU+MCkpJiYoZi5yaWdodCYmZi5yaWdodC5pc0VuYWJsZWR8fCEoMD5lKSk/YSYmZT50P3ZvaWQgZi5jb250ZW50LnNldFRyYW5zbGF0ZVgodCk6ciYmLW4+ZT92b2lkIGYuY29udGVudC5zZXRUcmFuc2xhdGVYKC1uKTooZi5jb250ZW50LnNldFRyYW5zbGF0ZVgoZSksdm9pZChlPj0wPyhhPSEwLHI9ITEsZT4wJiYoZi5yaWdodCYmZi5yaWdodC5wdXNoRG93biYmZi5yaWdodC5wdXNoRG93bigpLGYubGVmdCYmZi5sZWZ0LmJyaW5nVXAmJmYubGVmdC5icmluZ1VwKCkpKToocj0hMCxhPSExLGYucmlnaHQmJmYucmlnaHQuYnJpbmdVcCYmZi5yaWdodC5icmluZ1VwKCksZi5sZWZ0JiZmLmxlZnQucHVzaERvd24mJmYubGVmdC5wdXNoRG93bigpKSkpOnZvaWQgZi5jb250ZW50LnNldFRyYW5zbGF0ZVgoMCl9LGYuc25hcFRvUmVzdD1mdW5jdGlvbihlKXtmLmNvbnRlbnQuZW5hYmxlQW5pbWF0aW9uKCkscz0hMTt2YXIgdD1mLmdldE9wZW5SYXRpbygpO2lmKDA9PT10KXJldHVybiB2b2lkIGYub3BlblBlcmNlbnRhZ2UoMCk7dmFyIG49LjMsaT1lLmdlc3R1cmUudmVsb2NpdHlYLG89ZS5nZXN0dXJlLmRpcmVjdGlvbjtmLm9wZW5QZXJjZW50YWdlKHQ+MCYmLjU+dCYmXCJyaWdodFwiPT1vJiZuPmk/MDp0Pi41JiZcImxlZnRcIj09byYmbj5pPzEwMDowPnQmJnQ+LS41JiZcImxlZnRcIj09byYmbj5pPzA6LjU+dCYmXCJyaWdodFwiPT1vJiZuPmk/LTEwMDpcInJpZ2h0XCI9PW8mJnQ+PTAmJih0Pj0uNXx8aT5uKT8xMDA6XCJsZWZ0XCI9PW8mJjA+PXQmJigtLjU+PXR8fGk+bik/LTEwMDowKX0sZi5pc0FzaWRlRXhwb3NlZD1mdW5jdGlvbigpe3JldHVybiEhZH0sZi5leHBvc2VBc2lkZT1mdW5jdGlvbihlKXtmLmxlZnQmJmYubGVmdC5pc0VuYWJsZWQmJihmLmNsb3NlKCksZD1lLGYuY29udGVudC5zZXRNYXJnaW5MZWZ0KGQ/Zi5sZWZ0LndpZHRoOjApLGYuJHNjb3BlLiRlbWl0KFwiJGlvbmljRXhwb3NlQXNpZGVcIixkKSl9LGYuYWN0aXZlQXNpZGVSZXNpemluZz1mdW5jdGlvbihlKXtvLmVuYWJsZUNsYXNzKGUsXCJhc2lkZS1yZXNpemluZ1wiKX0sZi5fZW5kRHJhZz1mdW5jdGlvbihlKXtkfHwocyYmZi5zbmFwVG9SZXN0KGUpLGM9bnVsbCxsPW51bGwsdT1udWxsKX0sZi5faGFuZGxlRHJhZz1mdW5jdGlvbihlKXtkfHwoYz9sPWUuZ2VzdHVyZS50b3VjaGVzWzBdLnBhZ2VYOihjPWUuZ2VzdHVyZS50b3VjaGVzWzBdLnBhZ2VYLGw9YyksIXMmJk1hdGguYWJzKGwtYyk+Zi5kcmFnVGhyZXNob2xkWCYmKGM9bCxzPSEwLGYuY29udGVudC5kaXNhYmxlQW5pbWF0aW9uKCksdT1mLmdldE9wZW5BbW91bnQoKSkscyYmZi5vcGVuQW1vdW50KHUrKGwtYykpKX0sZi5jYW5EcmFnQ29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCYmKGUuZHJhZ0NvbnRlbnQ9ISF0KSxlLmRyYWdDb250ZW50fSxmLmVkZ2VUaHJlc2hvbGQ9MjUsZi5lZGdlVGhyZXNob2xkRW5hYmxlZD0hMSxmLmVkZ2VEcmFnVGhyZXNob2xkPWZ1bmN0aW9uKGUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoJiYoYW5ndWxhci5pc051bWJlcihlKSYmZT4wPyhmLmVkZ2VUaHJlc2hvbGQ9ZSxmLmVkZ2VUaHJlc2hvbGRFbmFibGVkPSEwKTpmLmVkZ2VUaHJlc2hvbGRFbmFibGVkPSEhZSksZi5lZGdlVGhyZXNob2xkRW5hYmxlZH0sZi5pc0RyYWdnYWJsZVRhcmdldD1mdW5jdGlvbih0KXt2YXIgbj1mLmVkZ2VUaHJlc2hvbGRFbmFibGVkJiYhZi5pc09wZW4oKSxpPXQuZ2VzdHVyZS5zdGFydEV2ZW50JiZ0Lmdlc3R1cmUuc3RhcnRFdmVudC5jZW50ZXImJnQuZ2VzdHVyZS5zdGFydEV2ZW50LmNlbnRlci5wYWdlWCxvPSFufHxpPD1mLmVkZ2VUaHJlc2hvbGR8fGk+PWYuY29udGVudC5lbGVtZW50Lm9mZnNldFdpZHRoLWYuZWRnZVRocmVzaG9sZDtyZXR1cm4oZS5kcmFnQ29udGVudHx8Zi5pc09wZW4oKSkmJm8mJiF0Lmdlc3R1cmUuc3JjRXZlbnQuZGVmYXVsdFByZXZlbnRlZCYmIXQudGFyZ2V0LnRhZ05hbWUubWF0Y2goL2lucHV0fHRleHRhcmVhfHNlbGVjdHxvYmplY3R8ZW1iZWQvaSkmJiF0LnRhcmdldC5pc0NvbnRlbnRFZGl0YWJsZSYmISh0LnRhcmdldC5kYXRhc2V0P3QudGFyZ2V0LmRhdGFzZXQucHJldmVudFNjcm9sbDpcInRydWVcIj09dC50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1wcmV2ZW50LXNjcm9sbFwiKSl9LGUuc2lkZU1lbnVDb250ZW50VHJhbnNsYXRlWD0wO3ZhciBoPWFuZ3VsYXIubm9vcCxwPWFuZ3VsYXIuYmluZChmLGYuY2xvc2UpO2UuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIDAhPT1mLmdldE9wZW5BbW91bnQoKX0sZnVuY3Rpb24oZSl7aCgpLGUmJihoPWkucmVnaXN0ZXJCYWNrQnV0dG9uQWN0aW9uKHAseSkpfSk7dmFyIHY9bi5fcmVnaXN0ZXJJbnN0YW5jZShmLHQuZGVsZWdhdGVIYW5kbGUpO2UuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe3YoKSxoKCl9KSxmLmluaXRpYWxpemUoe2xlZnQ6e3dpZHRoOjI3NX0scmlnaHQ6e3dpZHRoOjI3NX19KX1dKSx1LmNvbnRyb2xsZXIoXCIkaW9uaWNUYWJcIixbXCIkc2NvcGVcIixcIiRpb25pY1ZpZXdTZXJ2aWNlXCIsXCIkYXR0cnNcIixcIiRsb2NhdGlvblwiLFwiJHN0YXRlXCIsZnVuY3Rpb24oZSx0LG4saSxvKXt0aGlzLiRzY29wZT1lLHRoaXMuaHJlZk1hdGNoZXNTdGF0ZT1mdW5jdGlvbigpe3JldHVybiBuLmhyZWYmJjA9PT1pLnBhdGgoKS5pbmRleE9mKG4uaHJlZi5yZXBsYWNlKC9eIy8sXCJcIikucmVwbGFjZSgvXFwvJC8sXCJcIikpfSx0aGlzLnNyZWZNYXRjaGVzU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbi51aVNyZWYmJm8uaW5jbHVkZXMobi51aVNyZWYuc3BsaXQoXCIoXCIpWzBdKX0sdGhpcy5uYXZOYW1lTWF0Y2hlc1N0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmF2Vmlld05hbWUmJnQuaXNDdXJyZW50U3RhdGVOYXZWaWV3KHRoaXMubmF2Vmlld05hbWUpfSx0aGlzLnRhYk1hdGNoZXNTdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhyZWZNYXRjaGVzU3RhdGUoKXx8dGhpcy5zcmVmTWF0Y2hlc1N0YXRlKCl8fHRoaXMubmF2TmFtZU1hdGNoZXNTdGF0ZSgpfX1dKSx1LmNvbnRyb2xsZXIoXCIkaW9uaWNUYWJzXCIsW1wiJHNjb3BlXCIsXCIkaW9uaWNWaWV3U2VydmljZVwiLFwiJGVsZW1lbnRcIixmdW5jdGlvbihlLHQpe3ZhciBuPW51bGwsaT10aGlzO2kudGFicz1bXSxpLnNlbGVjdGVkSW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gaS50YWJzLmluZGV4T2Yobil9LGkuc2VsZWN0ZWRUYWI9ZnVuY3Rpb24oKXtyZXR1cm4gbn0saS5hZGQ9ZnVuY3Rpb24oZSl7dC5yZWdpc3Rlckhpc3RvcnkoZSksaS50YWJzLnB1c2goZSksMT09PWkudGFicy5sZW5ndGgmJmkuc2VsZWN0KGUpfSxpLnJlbW92ZT1mdW5jdGlvbihlKXt2YXIgdD1pLnRhYnMuaW5kZXhPZihlKTtpZigtMSE9PXQpe2lmKGUuJHRhYlNlbGVjdGVkKWlmKGkuZGVzZWxlY3QoZSksMT09PWkudGFicy5sZW5ndGgpO2Vsc2V7dmFyIG49dD09PWkudGFicy5sZW5ndGgtMT90LTE6dCsxO2kuc2VsZWN0KGkudGFic1tuXSl9aS50YWJzLnNwbGljZSh0LDEpfX0saS5kZXNlbGVjdD1mdW5jdGlvbihlKXtlLiR0YWJTZWxlY3RlZCYmKG49bnVsbCxlLiR0YWJTZWxlY3RlZD0hMSwoZS5vbkRlc2VsZWN0fHxhbmd1bGFyLm5vb3ApKCkpfSxpLnNlbGVjdD1mdW5jdGlvbihvLHIpe3ZhciBhO2lmKGFuZ3VsYXIuaXNOdW1iZXIobyk/KGE9byxvPWkudGFic1thXSk6YT1pLnRhYnMuaW5kZXhPZihvKSwxPT09YXJndW1lbnRzLmxlbmd0aCYmKHI9ISghby5uYXZWaWV3TmFtZSYmIW8udWlTcmVmKSksbiYmbi4kaGlzdG9yeUlkPT1vLiRoaXN0b3J5SWQpciYmdC5nb1RvSGlzdG9yeVJvb3Qoby4kaGlzdG9yeUlkKTtlbHNlIGlmKGYoaS50YWJzLGZ1bmN0aW9uKGUpe2kuZGVzZWxlY3QoZSl9KSxuPW8sby4kdGFiU2VsZWN0ZWQ9ITAsKG8ub25TZWxlY3R8fGFuZ3VsYXIubm9vcCkoKSxyKXt2YXIgcz17dHlwZTpcInRhYlwiLHRhYkluZGV4OmEsaGlzdG9yeUlkOm8uJGhpc3RvcnlJZCxuYXZWaWV3TmFtZTpvLm5hdlZpZXdOYW1lLGhhc05hdlZpZXc6ISFvLm5hdlZpZXdOYW1lLHRpdGxlOm8udGl0bGUsdXJsOm8uaHJlZix1aVNyZWY6by51aVNyZWZ9O2UuJGVtaXQoXCJ2aWV3U3RhdGUuY2hhbmdlSGlzdG9yeVwiLHMpfX19XSksdS5kaXJlY3RpdmUoXCJpb25BY3Rpb25TaGVldFwiLFtcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGUpe3JldHVybntyZXN0cmljdDpcIkVcIixzY29wZTohMCxyZXBsYWNlOiEwLGxpbms6ZnVuY3Rpb24odCxuKXt2YXIgaT1mdW5jdGlvbihlKXsyNz09ZS53aGljaCYmKHQuY2FuY2VsKCksdC4kYXBwbHkoKSl9LG89ZnVuY3Rpb24oZSl7ZS50YXJnZXQ9PW5bMF0mJih0LmNhbmNlbCgpLHQuJGFwcGx5KCkpfTt0LiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtuLnJlbW92ZSgpLGUudW5iaW5kKFwia2V5dXBcIixpKX0pLGUuYmluZChcImtleXVwXCIsaSksbi5iaW5kKFwiY2xpY2tcIixvKX0sdGVtcGxhdGU6JzxkaXYgY2xhc3M9XCJhY3Rpb24tc2hlZXQtYmFja2Ryb3BcIj48ZGl2IGNsYXNzPVwiYWN0aW9uLXNoZWV0LXdyYXBwZXJcIj48ZGl2IGNsYXNzPVwiYWN0aW9uLXNoZWV0XCI+PGRpdiBjbGFzcz1cImFjdGlvbi1zaGVldC1ncm91cFwiPjxkaXYgY2xhc3M9XCJhY3Rpb24tc2hlZXQtdGl0bGVcIiBuZy1pZj1cInRpdGxlVGV4dFwiIG5nLWJpbmQtaHRtbD1cInRpdGxlVGV4dFwiPjwvZGl2PjxidXR0b24gY2xhc3M9XCJidXR0b25cIiBuZy1jbGljaz1cImJ1dHRvbkNsaWNrZWQoJGluZGV4KVwiIG5nLXJlcGVhdD1cImJ1dHRvbiBpbiBidXR0b25zXCIgbmctYmluZC1odG1sPVwiYnV0dG9uLnRleHRcIj48L2J1dHRvbj48L2Rpdj48ZGl2IGNsYXNzPVwiYWN0aW9uLXNoZWV0LWdyb3VwXCIgbmctaWY9XCJkZXN0cnVjdGl2ZVRleHRcIj48YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGRlc3RydWN0aXZlXCIgbmctY2xpY2s9XCJkZXN0cnVjdGl2ZUJ1dHRvbkNsaWNrZWQoKVwiIG5nLWJpbmQtaHRtbD1cImRlc3RydWN0aXZlVGV4dFwiPjwvYnV0dG9uPjwvZGl2PjxkaXYgY2xhc3M9XCJhY3Rpb24tc2hlZXQtZ3JvdXBcIiBuZy1pZj1cImNhbmNlbFRleHRcIj48YnV0dG9uIGNsYXNzPVwiYnV0dG9uXCIgbmctY2xpY2s9XCJjYW5jZWwoKVwiIG5nLWJpbmQtaHRtbD1cImNhbmNlbFRleHRcIj48L2J1dHRvbj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nfX1dKSx1LmRpcmVjdGl2ZShcImlvbkNoZWNrYm94XCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVwbGFjZTohMCxyZXF1aXJlOlwiP25nTW9kZWxcIix0cmFuc2NsdWRlOiEwLHRlbXBsYXRlOic8bGFiZWwgY2xhc3M9XCJpdGVtIGl0ZW0tY2hlY2tib3hcIj48ZGl2IGNsYXNzPVwiY2hlY2tib3ggY2hlY2tib3gtaW5wdXQtaGlkZGVuIGRpc2FibGUtcG9pbnRlci1ldmVudHNcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCI+PGkgY2xhc3M9XCJjaGVja2JveC1pY29uXCI+PC9pPjwvZGl2PjxkaXYgY2xhc3M9XCJpdGVtLWNvbnRlbnQgZGlzYWJsZS1wb2ludGVyLWV2ZW50c1wiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+PC9sYWJlbD4nLGNvbXBpbGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmZpbmQoXCJpbnB1dFwiKTtmKHtuYW1lOnQubmFtZSxcIm5nLXZhbHVlXCI6dC5uZ1ZhbHVlLFwibmctbW9kZWxcIjp0Lm5nTW9kZWwsXCJuZy1jaGVja2VkXCI6dC5uZ0NoZWNrZWQsXCJuZy1kaXNhYmxlZFwiOnQubmdEaXNhYmxlZCxcIm5nLXRydWUtdmFsdWVcIjp0Lm5nVHJ1ZVZhbHVlLFwibmctZmFsc2UtdmFsdWVcIjp0Lm5nRmFsc2VWYWx1ZSxcIm5nLWNoYW5nZVwiOnQubmdDaGFuZ2V9LGZ1bmN0aW9uKGUsdCl7aChlKSYmbi5hdHRyKHQsZSl9KX19fSk7dmFyIHg9XCJDYW5ub3QgY3JlYXRlIGEgY29sbGVjdGlvbi1yZXBlYXQgd2l0aGluIGEgc2Nyb2xsVmlldyB0aGF0IGlzIHNjcm9sbGFibGUgb24gYm90aCB4IGFuZCB5IGF4aXMuICBDaG9vc2UgZWl0aGVyIHggZGlyZWN0aW9uIG9yIHkgZGlyZWN0aW9uLlwiLEI9XCJjb2xsZWN0aW9uLXJlcGVhdCBleHBlY3RlZCBhdHRyaWJ1dGUgY29sbGVjdGlvbi1pdGVtLWhlaWdodCB0byBiZSBhIGFuIGV4cHJlc3Npb24gdGhhdCByZXR1cm5zIGEgbnVtYmVyIChpbiBwaXhlbHMpIG9yIHBlcmNlbnRhZ2UuXCIsVj1cImNvbGxlY3Rpb24tcmVwZWF0IGV4cGVjdGVkIGF0dHJpYnV0ZSBjb2xsZWN0aW9uLWl0ZW0td2lkdGggdG8gYmUgYSBhbiBleHByZXNzaW9uIHRoYXQgcmV0dXJucyBhIG51bWJlciAoaW4gcGl4ZWxzKSBvciBwZXJjZW50YWdlLlwiLEU9XCJjb2xsZWN0aW9uLXJlcGVhdCBleHBlY3RlZCBleHByZXNzaW9uIGluIGZvcm0gb2YgJ19pdGVtXyBpbiBfY29sbGVjdGlvbl9bIHRyYWNrIGJ5IF9pZF9dJyBidXQgZ290ICclJ1wiO3UuZGlyZWN0aXZlKFwiY29sbGVjdGlvblJlcGVhdFwiLFtcIiRjb2xsZWN0aW9uUmVwZWF0TWFuYWdlclwiLFwiJGNvbGxlY3Rpb25EYXRhU291cmNlXCIsXCIkcGFyc2VcIixmdW5jdGlvbihlLHQsbil7cmV0dXJue3ByaW9yaXR5OjFlMyx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHRlcm1pbmFsOiEwLCQkdGxiOiEwLHJlcXVpcmU6XCJeJGlvbmljU2Nyb2xsXCIsY29udHJvbGxlcjpbZnVuY3Rpb24oKXt9XSxsaW5rOmZ1bmN0aW9uKGksbyxyLGEscyl7ZnVuY3Rpb24gYyhlKXt2YXIgdD1bXSxuPVtdLGk9ITA7ZihJLmNoaWxkcmVuLGZ1bmN0aW9uKGUpe2lmKGlvbmljLkRvbVV0aWwuZWxlbWVudElzRGVzY2VuZGFudChvWzBdLGUsSSkpaT0hMTtlbHNle2lmKGUuaGFzQXR0cmlidXRlKFwiY29sbGVjdGlvbi1yZXBlYXQtaWdub3JlXCIpKXJldHVybjt2YXIgcj1lLm9mZnNldFdpZHRoLGE9ZS5vZmZzZXRIZWlnaHQ7aWYociYmYSl7dmFyIHM9dihlKTsoaT90Om4pLnB1c2goe3dpZHRoOmUub2Zmc2V0V2lkdGgsaGVpZ2h0OmUub2Zmc2V0SGVpZ2h0LGVsZW1lbnQ6cyxzY29wZTpzLmlzb2xhdGVTY29wZSgpfHxzLnNjb3BlKCksaXNPdXRzaWRlOiEwfSl9fX0pLGQucmVzaXplKCksay5zZXREYXRhKGUsdCxuKSxULnJlc2l6ZSgpfWZ1bmN0aW9uIGwoKXtjKGkuJGV2YWwoUykpfXZhciB1PXYoJzxkaXYgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZTtcIj4nKTtvLnBhcmVudCgpWzBdLmluc2VydEJlZm9yZSh1WzBdLG9bMF0pLHUuYXBwZW5kKG8pO3ZhciBkPWEuc2Nyb2xsVmlldztpZihkLm9wdGlvbnMuc2Nyb2xsaW5nWCYmZC5vcHRpb25zLnNjcm9sbGluZ1kpdGhyb3cgbmV3IEVycm9yKHgpO3ZhciBoPSEhZC5vcHRpb25zLnNjcm9sbGluZ1k7aWYoaCYmIXIuY29sbGVjdGlvbkl0ZW1IZWlnaHQpdGhyb3cgbmV3IEVycm9yKEIpO2lmKCFoJiYhci5jb2xsZWN0aW9uSXRlbVdpZHRoKXRocm93IG5ldyBFcnJvcihWKTt2YXIgZz1uKHIuY29sbGVjdGlvbkl0ZW1IZWlnaHR8fCdcIjEwMCVcIicpLG09bihyLmNvbGxlY3Rpb25JdGVtV2lkdGh8fCdcIjEwMCVcIicpLCQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj1nKGUsdCk7cmV0dXJuIHAobikmJm4uaW5kZXhPZihcIiVcIik+LTE/TWF0aC5mbG9vcihwYXJzZUludChuLDEwKS8xMDAqZC5fX2NsaWVudEhlaWdodCk6bn0sdz1mdW5jdGlvbihlLHQpe3ZhciBuPW0oZSx0KTtyZXR1cm4gcChuKSYmbi5pbmRleE9mKFwiJVwiKT4tMT9NYXRoLmZsb29yKHBhcnNlSW50KG4sMTApLzEwMCpkLl9fY2xpZW50V2lkdGgpOm59LGI9ci5jb2xsZWN0aW9uUmVwZWF0Lm1hdGNoKC9eXFxzKihbXFxzXFxTXSs/KVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT9cXHMqJC8pO2lmKCFiKXRocm93IG5ldyBFcnJvcihFLnJlcGxhY2UoXCIlXCIsci5jb2xsZWN0aW9uUmVwZWF0KSk7dmFyIHk9YlsxXSxTPWJbMl0sQz1iWzNdLGs9bmV3IHQoe3Njb3BlOmksdHJhbnNjbHVkZUZuOnMsdHJhbnNjbHVkZVBhcmVudDpvLnBhcmVudCgpLGtleUV4cHI6eSxsaXN0RXhwcjpTLHRyYWNrQnlFeHByOkMsaGVpZ2h0R2V0dGVyOiQsd2lkdGhHZXR0ZXI6d30pLFQ9bmV3IGUoe2RhdGFTb3VyY2U6ayxlbGVtZW50OmEuJGVsZW1lbnQsc2Nyb2xsVmlldzphLnNjcm9sbFZpZXd9KTtpLiR3YXRjaENvbGxlY3Rpb24oUyxmdW5jdGlvbihlKXtpZihlJiYhYW5ndWxhci5pc0FycmF5KGUpKXRocm93IG5ldyBFcnJvcihcImNvbGxlY3Rpb24tcmVwZWF0IGV4cGVjdHMgYW4gYXJyYXkgdG8gcmVwZWF0IG92ZXIsIGJ1dCBpbnN0ZWFkIGdvdCAnXCIrdHlwZW9mIGUrXCInLlwiKTtjKGUpfSk7dmFyIEk9YS5zY3JvbGxWaWV3Ll9fY29udGVudDthLiRlbGVtZW50Lm9uKFwic2Nyb2xsLnJlc2l6ZVwiLGwpLGlvbmljLm9uKFwicmVzaXplXCIsbCx3aW5kb3cpLGkuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe1QuZGVzdHJveSgpLGsuZGVzdHJveSgpLGlvbmljLm9mZihcInJlc2l6ZVwiLGwsd2luZG93KX0pfX19XSkuZGlyZWN0aXZlKHtuZ1NyYzppKFwibmdTcmNcIixcInNyY1wiKSxuZ1NyY3NldDppKFwibmdTcmNzZXRcIixcInNyY3NldFwiKSxuZ0hyZWY6aShcIm5nSHJlZlwiLFwiaHJlZlwiKX0pLHUuZGlyZWN0aXZlKFwiaW9uQ29udGVudFwiLFtcIiR0aW1lb3V0XCIsXCIkY29udHJvbGxlclwiLFwiJGlvbmljQmluZFwiLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpcIl4/aW9uTmF2Vmlld1wiLHNjb3BlOiEwLHByaW9yaXR5OjgwMCxjb21waWxlOmZ1bmN0aW9uKGUsaSl7ZnVuY3Rpb24gbyhlLG8sYSl7dmFyIHM9ZS4kcGFyZW50O2lmKGUuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuKHMuJGhhc0hlYWRlcj9cIiBoYXMtaGVhZGVyXCI6XCJcIikrKHMuJGhhc1N1YmhlYWRlcj9cIiBoYXMtc3ViaGVhZGVyXCI6XCJcIikrKHMuJGhhc0Zvb3Rlcj9cIiBoYXMtZm9vdGVyXCI6XCJcIikrKHMuJGhhc1N1YmZvb3Rlcj9cIiBoYXMtc3ViZm9vdGVyXCI6XCJcIikrKHMuJGhhc1RhYnM/XCIgaGFzLXRhYnNcIjpcIlwiKSsocy4kaGFzVGFic1RvcD9cIiBoYXMtdGFicy10b3BcIjpcIlwiKX0sZnVuY3Rpb24oZSx0KXtvLnJlbW92ZUNsYXNzKHQpLG8uYWRkQ2xhc3MoZSl9KSxlLiRoYXNIZWFkZXI9ZS4kaGFzU3ViaGVhZGVyPWUuJGhhc0Zvb3Rlcj1lLiRoYXNTdWJmb290ZXI9ZS4kaGFzVGFicz1lLiRoYXNUYWJzVG9wPSExLG4oZSxhLHskb25TY3JvbGw6XCImb25TY3JvbGxcIiwkb25TY3JvbGxDb21wbGV0ZTpcIiZvblNjcm9sbENvbXBsZXRlXCIsaGFzQm91bmNpbmc6XCJAXCIscGFkZGluZzpcIkBcIixkaXJlY3Rpb246XCJAXCIsc2Nyb2xsYmFyWDpcIkBcIixzY3JvbGxiYXJZOlwiQFwiLHN0YXJ0WDpcIkBcIixzdGFydFk6XCJAXCIsc2Nyb2xsRXZlbnRJbnRlcnZhbDpcIkBcIn0pLGUuZGlyZWN0aW9uPWUuZGlyZWN0aW9ufHxcInlcIixhbmd1bGFyLmlzRGVmaW5lZChhLnBhZGRpbmcpJiZlLiR3YXRjaChhLnBhZGRpbmcsZnVuY3Rpb24oZSl7KHJ8fG8pLnRvZ2dsZUNsYXNzKFwicGFkZGluZ1wiLCEhZSl9KSxcImZhbHNlXCI9PT1hLnNjcm9sbCk7ZWxzZSBpZihcInRydWVcIj09PWkub3ZlcmZsb3dTY3JvbGwpby5hZGRDbGFzcyhcIm92ZXJmbG93LXNjcm9sbFwiKTtlbHNle3ZhciBjPXtlbDpvWzBdLGRlbGVnYXRlSGFuZGxlOmkuZGVsZWdhdGVIYW5kbGUsbG9ja2luZzpcInRydWVcIj09PShpLmxvY2tpbmd8fFwidHJ1ZVwiKSxib3VuY2luZzplLiRldmFsKGUuaGFzQm91bmNpbmcpLHN0YXJ0WDplLiRldmFsKGUuc3RhcnRYKXx8MCxzdGFydFk6ZS4kZXZhbChlLnN0YXJ0WSl8fDAsc2Nyb2xsYmFyWDplLiRldmFsKGUuc2Nyb2xsYmFyWCkhPT0hMSxzY3JvbGxiYXJZOmUuJGV2YWwoZS5zY3JvbGxiYXJZKSE9PSExLHNjcm9sbGluZ1g6ZS5kaXJlY3Rpb24uaW5kZXhPZihcInhcIik+PTAsc2Nyb2xsaW5nWTplLmRpcmVjdGlvbi5pbmRleE9mKFwieVwiKT49MCxzY3JvbGxFdmVudEludGVydmFsOnBhcnNlSW50KGUuc2Nyb2xsRXZlbnRJbnRlcnZhbCwxMCl8fDEwLHNjcm9sbGluZ0NvbXBsZXRlOmZ1bmN0aW9uKCl7ZS4kb25TY3JvbGxDb21wbGV0ZSh7c2Nyb2xsVG9wOnRoaXMuX19zY3JvbGxUb3Asc2Nyb2xsTGVmdDp0aGlzLl9fc2Nyb2xsTGVmdH0pfX07dChcIiRpb25pY1Njcm9sbFwiLHskc2NvcGU6ZSxzY3JvbGxWaWV3T3B0aW9uczpjfSksZS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7Yy5zY3JvbGxpbmdDb21wbGV0ZT1hbmd1bGFyLm5vb3AsZGVsZXRlIGMuZWwscj1udWxsLG89bnVsbCxpLiQkZWxlbWVudD1udWxsfSl9fXZhciByO3JldHVybiBlLmFkZENsYXNzKFwic2Nyb2xsLWNvbnRlbnQgaW9uaWMtc2Nyb2xsXCIpLFwiZmFsc2VcIiE9aS5zY3JvbGw/KHI9dignPGRpdiBjbGFzcz1cInNjcm9sbFwiPjwvZGl2PicpLHIuYXBwZW5kKGUuY29udGVudHMoKSksZS5hcHBlbmQocikpOmUuYWRkQ2xhc3MoXCJzY3JvbGwtY29udGVudC1mYWxzZVwiKSx7cHJlOm99fX19XSksdS5kaXJlY3RpdmUoXCJleHBvc2VBc2lkZVdoZW5cIixbXCIkd2luZG93XCIsZnVuY3Rpb24oZSl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCJeaW9uU2lkZU1lbnVzXCIsbGluazpmdW5jdGlvbih0LG4saSxvKXtmdW5jdGlvbiByKCl7dmFyIHQ9XCJsYXJnZVwiPT1pLmV4cG9zZUFzaWRlV2hlbj9cIihtaW4td2lkdGg6NzY4cHgpXCI6aS5leHBvc2VBc2lkZVdoZW47by5leHBvc2VBc2lkZShlLm1hdGNoTWVkaWEodCkubWF0Y2hlcyksby5hY3RpdmVBc2lkZVJlc2l6aW5nKCExKX1mdW5jdGlvbiBhKCl7by5hY3RpdmVBc2lkZVJlc2l6aW5nKCEwKSxzKCl9dmFyIHM9aW9uaWMuZGVib3VuY2UoZnVuY3Rpb24oKXt0LiRhcHBseShmdW5jdGlvbigpe3IoKX0pfSwzMDAsITEpO3IoKSxpb25pYy5vbihcInJlc2l6ZVwiLGEsZSksdC4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7aW9uaWMub2ZmKFwicmVzaXplXCIsYSxlKX0pfX19XSk7dmFyIF89XCJvbkhvbGQgb25UYXAgb25Ub3VjaCBvblJlbGVhc2Ugb25EcmFnIG9uRHJhZ1VwIG9uRHJhZ1JpZ2h0IG9uRHJhZ0Rvd24gb25EcmFnTGVmdCBvblN3aXBlIG9uU3dpcGVVcCBvblN3aXBlUmlnaHQgb25Td2lwZURvd24gb25Td2lwZUxlZnRcIi5zcGxpdChcIiBcIik7Xy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3UuZGlyZWN0aXZlKGUsbyhlKSl9KSx1LmRpcmVjdGl2ZShcImlvbk5hdkJhclwiLHIoKSkuZGlyZWN0aXZlKFwiaW9uSGVhZGVyQmFyXCIscigpKS5kaXJlY3RpdmUoXCJpb25IZWFkZXJCYXJcIixhKCEwKSkuZGlyZWN0aXZlKFwiaW9uRm9vdGVyQmFyXCIsYSghMSkpLHUuZGlyZWN0aXZlKFwiaW9uSW5maW5pdGVTY3JvbGxcIixbXCIkdGltZW91dFwiLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0LG4pe3JldHVybiBuP3QqKDEtcGFyc2VGbG9hdChlLDEwKS8xMDApOnQtcGFyc2VGbG9hdChlLDEwKX1yZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpbXCJeJGlvbmljU2Nyb2xsXCIsXCJpb25JbmZpbml0ZVNjcm9sbFwiXSx0ZW1wbGF0ZTonPGkgY2xhc3M9XCJpY29uIHt7aWNvbigpfX0gaWNvbi1yZWZyZXNoaW5nXCI+PC9pPicsc2NvcGU6ITAsY29udHJvbGxlcjpbXCIkc2NvcGVcIixcIiRhdHRyc1wiLGZ1bmN0aW9uKGUsbil7dGhpcy5pc0xvYWRpbmc9ITEsdGhpcy5zY3JvbGxWaWV3PW51bGwsdGhpcy5nZXRNYXhTY3JvbGw9ZnVuY3Rpb24oKXt2YXIgZT0obi5kaXN0YW5jZXx8XCIyLjUlXCIpLnRyaW0oKSxpPS0xIT09ZS5pbmRleE9mKFwiJVwiKSxvPXRoaXMuc2Nyb2xsVmlldy5nZXRTY3JvbGxNYXgoKTtyZXR1cm57bGVmdDp0aGlzLnNjcm9sbFZpZXcub3B0aW9ucy5zY3JvbGxpbmdYP3QoZSxvLmxlZnQsaSk6LTEsdG9wOnRoaXMuc2Nyb2xsVmlldy5vcHRpb25zLnNjcm9sbGluZ1k/dChlLG8udG9wLGkpOi0xfX19XSxsaW5rOmZ1bmN0aW9uKHQsbixpLG8pe2Z1bmN0aW9uIHIoKXtpZighcy5pc0xvYWRpbmcpe3ZhciBlPWMuZ2V0VmFsdWVzKCksdD1zLmdldE1heFNjcm9sbCgpOygtMSE9PXQubGVmdCYmZS5sZWZ0Pj10LmxlZnR8fC0xIT09dC50b3AmJmUudG9wPj10LnRvcCkmJmwoKX19dmFyIGE9b1swXSxzPW9bMV0sYz1zLnNjcm9sbFZpZXc9YS5zY3JvbGxWaWV3O3QuaWNvbj1mdW5jdGlvbigpe3JldHVybiBhbmd1bGFyLmlzRGVmaW5lZChpLmljb24pP2kuaWNvbjpcImlvbi1sb2FkaW5nLWRcIn07dmFyIGw9ZnVuY3Rpb24oKXtuWzBdLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIikscy5pc0xvYWRpbmc9ITAsdC4kcGFyZW50JiZ0LiRwYXJlbnQuJGFwcGx5KGkub25JbmZpbml0ZXx8XCJcIil9LHU9ZnVuY3Rpb24oKXtuWzBdLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIiksZShmdW5jdGlvbigpe2MucmVzaXplKCksZCgpfSwwLCExKSxzLmlzTG9hZGluZz0hMX07dC4kb24oXCJzY3JvbGwuaW5maW5pdGVTY3JvbGxDb21wbGV0ZVwiLGZ1bmN0aW9uKCl7dSgpfSksdC4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7YSYmYS4kZWxlbWVudCYmYS4kZWxlbWVudC5vZmYoXCJzY3JvbGxcIixkKX0pO3ZhciBkPWlvbmljLmFuaW1hdGlvbkZyYW1lVGhyb3R0bGUocik7c2V0VGltZW91dChkKSxhLiRlbGVtZW50Lm9uKFwic2Nyb2xsXCIsZCl9fX1dKTt2YXIgQT0nPGEgY2xhc3M9XCJpdGVtLWNvbnRlbnRcIiBuZy1ocmVmPVwie3skaHJlZigpfX1cIiB0YXJnZXQ9XCJ7eyR0YXJnZXQoKX19XCI+PC9hPicsUD0nPGRpdiBjbGFzcz1cIml0ZW0tY29udGVudFwiPjwvZGl2Pic7dS5kaXJlY3RpdmUoXCJpb25JdGVtXCIsW1wiJGFuaW1hdGVcIixcIiRjb21waWxlXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsY29udHJvbGxlcjpbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsZnVuY3Rpb24oZSx0KXt0aGlzLiRzY29wZT1lLHRoaXMuJGVsZW1lbnQ9dH1dLHNjb3BlOiEwLGNvbXBpbGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1hbmd1bGFyLmlzRGVmaW5lZCh0LmhyZWYpfHxhbmd1bGFyLmlzRGVmaW5lZCh0Lm5nSHJlZil8fGFuZ3VsYXIuaXNEZWZpbmVkKHQudWlTcmVmKSxpPW58fC9pb24tKGRlbGV0ZXxvcHRpb258cmVvcmRlciktYnV0dG9uL2kudGVzdChlLmh0bWwoKSk7aWYoaSl7dmFyIG89dihuP0E6UCk7by5hcHBlbmQoZS5jb250ZW50cygpKSxlLmFwcGVuZChvKSxlLmFkZENsYXNzKFwiaXRlbSBpdGVtLWNvbXBsZXhcIil9ZWxzZSBlLmFkZENsYXNzKFwiaXRlbVwiKTtyZXR1cm4gZnVuY3Rpb24oZSx0LG4pe2UuJGhyZWY9ZnVuY3Rpb24oKXtyZXR1cm4gbi5ocmVmfHxuLm5nSHJlZn0sZS4kdGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG4udGFyZ2V0fHxcIl9zZWxmXCJ9fX19fV0pO3ZhciBEPSc8ZGl2IGNsYXNzPVwiaXRlbS1sZWZ0LWVkaXQgaXRlbS1kZWxldGUgZW5hYmxlLXBvaW50ZXItZXZlbnRzXCI+PC9kaXY+Jzt1LmRpcmVjdGl2ZShcImlvbkRlbGV0ZUJ1dHRvblwiLFtcIiRhbmltYXRlXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpbXCJeaW9uSXRlbVwiLFwiXj9pb25MaXN0XCJdLHByaW9yaXR5Ok51bWJlci5NQVhfVkFMVUUsY29tcGlsZTpmdW5jdGlvbihlLHQpe3JldHVybiB0LiRzZXQoXCJjbGFzc1wiLCh0W1wiY2xhc3NcIl18fFwiXCIpK1wiIGJ1dHRvbiBpY29uIGJ1dHRvbi1pY29uXCIsITApLGZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBvPWlbMF0scj1pWzFdLGE9dihEKTthLmFwcGVuZCh0KSxvLiRlbGVtZW50LmFwcGVuZChhKS5hZGRDbGFzcyhcIml0ZW0tbGVmdC1lZGl0YWJsZVwiKSxyJiZyLnNob3dEZWxldGUoKSYmYS5hZGRDbGFzcyhcInZpc2libGUgYWN0aXZlXCIpfX19fV0pLHUuZGlyZWN0aXZlKFwiaXRlbUZsb2F0aW5nTGFiZWxcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkNcIixsaW5rOmZ1bmN0aW9uKGUsdCl7dmFyIG49dFswXSxpPW4ucXVlcnlTZWxlY3RvcihcImlucHV0LCB0ZXh0YXJlYVwiKSxvPW4ucXVlcnlTZWxlY3RvcihcIi5pbnB1dC1sYWJlbFwiKTtpZihpJiZvKXt2YXIgcj1mdW5jdGlvbigpe2kudmFsdWU/by5jbGFzc0xpc3QuYWRkKFwiaGFzLWlucHV0XCIpOm8uY2xhc3NMaXN0LnJlbW92ZShcImhhcy1pbnB1dFwiKX07aS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIixyKTt2YXIgYT1hbmd1bGFyLmVsZW1lbnQoaSkuY29udHJvbGxlcihcIm5nTW9kZWxcIik7YSYmKGEuJHJlbmRlcj1mdW5jdGlvbigpe2kudmFsdWU9YS4kdmlld1ZhbHVlfHxcIlwiLHIoKX0pLGUuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2kucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImlucHV0XCIscil9KX19fX0pO3ZhciBIPSc8ZGl2IGNsYXNzPVwiaXRlbS1vcHRpb25zIGludmlzaWJsZVwiPjwvZGl2Pic7dS5kaXJlY3RpdmUoXCJpb25PcHRpb25CdXR0b25cIixbXCIkY29tcGlsZVwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtlLnN0b3BQcm9wYWdhdGlvbigpfXJldHVybntyZXN0cmljdDpcIkVcIixyZXF1aXJlOlwiXmlvbkl0ZW1cIixwcmlvcml0eTpOdW1iZXIuTUFYX1ZBTFVFLGNvbXBpbGU6ZnVuY3Rpb24odCxuKXtyZXR1cm4gbi4kc2V0KFwiY2xhc3NcIiwobltcImNsYXNzXCJdfHxcIlwiKStcIiBidXR0b25cIiwhMCksZnVuY3Rpb24odCxuLGksbyl7by5vcHRpb25zQ29udGFpbmVyfHwoby5vcHRpb25zQ29udGFpbmVyPXYoSCksby4kZWxlbWVudC5hcHBlbmQoby5vcHRpb25zQ29udGFpbmVyKSksby5vcHRpb25zQ29udGFpbmVyLmFwcGVuZChuKSxuLm9uKFwiY2xpY2tcIixlKX19fX1dKTt2YXIgTD0nPGRpdiBkYXRhLXByZXZlbnQtc2Nyb2xsPVwidHJ1ZVwiIGNsYXNzPVwiaXRlbS1yaWdodC1lZGl0IGl0ZW0tcmVvcmRlciBlbmFibGUtcG9pbnRlci1ldmVudHNcIj48L2Rpdj4nO3UuZGlyZWN0aXZlKFwiaW9uUmVvcmRlckJ1dHRvblwiLFtcIiRhbmltYXRlXCIsXCIkcGFyc2VcIixmdW5jdGlvbihlLHQpe3JldHVybntyZXN0cmljdDpcIkVcIixyZXF1aXJlOltcIl5pb25JdGVtXCIsXCJeP2lvbkxpc3RcIl0scHJpb3JpdHk6TnVtYmVyLk1BWF9WQUxVRSxjb21waWxlOmZ1bmN0aW9uKGUsbil7cmV0dXJuIG4uJHNldChcImNsYXNzXCIsKG5bXCJjbGFzc1wiXXx8XCJcIikrXCIgYnV0dG9uIGljb24gYnV0dG9uLWljb25cIiwhMCksZVswXS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXByZXZlbnQtc2Nyb2xsXCIsITApLGZ1bmN0aW9uKGUsbixpLG8pe3ZhciByPW9bMF0sYT1vWzFdLHM9dChpLm9uUmVvcmRlcik7ZS4kb25SZW9yZGVyPWZ1bmN0aW9uKHQsbil7cyhlLHskZnJvbUluZGV4OnQsJHRvSW5kZXg6bn0pfSxpLm5nQ2xpY2t8fGkub25DbGlja3x8aS5vbmNsaWNrfHwoblswXS5vbmNsaWNrPWZ1bmN0aW9uKGUpe3JldHVybiBlLnN0b3BQcm9wYWdhdGlvbigpLCExfSk7dmFyIGM9dihMKTtjLmFwcGVuZChuKSxyLiRlbGVtZW50LmFwcGVuZChjKS5hZGRDbGFzcyhcIml0ZW0tcmlnaHQtZWRpdGFibGVcIiksYSYmYS5zaG93UmVvcmRlcigpJiZjLmFkZENsYXNzKFwidmlzaWJsZSBhY3RpdmVcIil9fX19XSksdS5kaXJlY3RpdmUoXCJrZXlib2FyZEF0dGFjaFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXtpZighaW9uaWMuUGxhdGZvcm0uaXNBbmRyb2lkKCl8fGlvbmljLlBsYXRmb3JtLmlzRnVsbFNjcmVlbil7dmFyIG49ZS5rZXlib2FyZEhlaWdodHx8ZS5kZXRhaWwua2V5Ym9hcmRIZWlnaHQ7dC5jc3MoXCJib3R0b21cIixuK1wicHhcIiksbz10LmNvbnRyb2xsZXIoXCIkaW9uaWNTY3JvbGxcIiksbyYmKG8uc2Nyb2xsVmlldy5fX2NvbnRhaW5lci5zdHlsZS5ib3R0b209bitzKHRbMF0pK1wicHhcIil9fWZ1bmN0aW9uIGkoKXsoIWlvbmljLlBsYXRmb3JtLmlzQW5kcm9pZCgpfHxpb25pYy5QbGF0Zm9ybS5pc0Z1bGxTY3JlZW4pJiYodC5jc3MoXCJib3R0b21cIixcIlwiKSxvJiYoby5zY3JvbGxWaWV3Ll9fY29udGFpbmVyLnN0eWxlLmJvdHRvbT1cIlwiKSl9aW9uaWMub24oXCJuYXRpdmUua2V5Ym9hcmRzaG93XCIsbix3aW5kb3cpLGlvbmljLm9uKFwibmF0aXZlLmtleWJvYXJkaGlkZVwiLGksd2luZG93KSxpb25pYy5vbihcIm5hdGl2ZS5zaG93a2V5Ym9hcmRcIixuLHdpbmRvdyksaW9uaWMub24oXCJuYXRpdmUuaGlkZWtleWJvYXJkXCIsaSx3aW5kb3cpO3ZhciBvO2UuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2lvbmljLm9mZihcIm5hdGl2ZS5rZXlib2FyZHNob3dcIixuLHdpbmRvdyksaW9uaWMub2ZmKFwibmF0aXZlLmtleWJvYXJkaGlkZVwiLGksd2luZG93KSxpb25pYy5vZmYoXCJuYXRpdmUuc2hvd2tleWJvYXJkXCIsbix3aW5kb3cpLGlvbmljLm9mZihcIm5hdGl2ZS5oaWRla2V5Ym9hcmRcIixpLHdpbmRvdyl9KX19KSx1LmRpcmVjdGl2ZShcImlvbkxpc3RcIixbXCIkYW5pbWF0ZVwiLFwiJHRpbWVvdXRcIixmdW5jdGlvbihlLHQpe3JldHVybntyZXN0cmljdDpcIkVcIixyZXF1aXJlOltcImlvbkxpc3RcIixcIl4/JGlvbmljU2Nyb2xsXCJdLGNvbnRyb2xsZXI6XCIkaW9uaWNMaXN0XCIsY29tcGlsZTpmdW5jdGlvbihlLG4pe3ZhciBpPXYoJzxkaXYgY2xhc3M9XCJsaXN0XCI+JykuYXBwZW5kKGUuY29udGVudHMoKSkuYWRkQ2xhc3Mobi50eXBlKTtyZXR1cm4gZS5hcHBlbmQoaSksZnVuY3Rpb24oZSxpLG8scil7ZnVuY3Rpb24gYSgpe2Z1bmN0aW9uIG8oZSx0KXt0KCkmJmUuYWRkQ2xhc3MoXCJ2aXNpYmxlXCIpfHxlLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGlvbmljLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe3QoKSYmZS5hZGRDbGFzcyhcImFjdGl2ZVwiKXx8ZS5yZW1vdmVDbGFzcyhcInZpc2libGVcIil9KX1zLmxpc3RWaWV3PW5ldyBpb25pYy52aWV3cy5MaXN0Vmlldyh7ZWw6aVswXSxsaXN0RWw6aS5jaGlsZHJlbigpWzBdLHNjcm9sbEVsOmMmJmMuZWxlbWVudCxzY3JvbGxWaWV3OmMmJmMuc2Nyb2xsVmlldyxvblJlb3JkZXI6ZnVuY3Rpb24oZSxuLGkpe3ZhciBvPXYoZSkuc2NvcGUoKTtvJiZvLiRvblJlb3JkZXImJnQoZnVuY3Rpb24oKXtvLiRvblJlb3JkZXIobixpKX0pfSxjYW5Td2lwZTpmdW5jdGlvbigpe3JldHVybiBzLmNhblN3aXBlSXRlbXMoKX19KTtoKG4uY2FuU3dpcGUpJiZlLiR3YXRjaChcIiEhKFwiK24uY2FuU3dpcGUrXCIpXCIsZnVuY3Rpb24oZSl7cy5jYW5Td2lwZUl0ZW1zKGUpfSksaChuLnNob3dEZWxldGUpJiZlLiR3YXRjaChcIiEhKFwiK24uc2hvd0RlbGV0ZStcIilcIixmdW5jdGlvbihlKXtzLnNob3dEZWxldGUoZSl9KSxoKG4uc2hvd1Jlb3JkZXIpJiZlLiR3YXRjaChcIiEhKFwiK24uc2hvd1Jlb3JkZXIrXCIpXCIsZnVuY3Rpb24oZSl7cy5zaG93UmVvcmRlcihlKX0pLGUuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIHMuc2hvd0RlbGV0ZSgpfSxmdW5jdGlvbihlLHQpe2lmKGV8fHQpe2UmJnMuY2xvc2VPcHRpb25CdXR0b25zKCkscy5jYW5Td2lwZUl0ZW1zKCFlKSxpLmNoaWxkcmVuKCkudG9nZ2xlQ2xhc3MoXCJsaXN0LWxlZnQtZWRpdGluZ1wiLGUpLGkudG9nZ2xlQ2xhc3MoXCJkaXNhYmxlLXBvaW50ZXItZXZlbnRzXCIsZSk7dmFyIG49dihpWzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJpdGVtLWRlbGV0ZVwiKSk7byhuLHMuc2hvd0RlbGV0ZSl9fSksZS4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gcy5zaG93UmVvcmRlcigpfSxmdW5jdGlvbihlLHQpe2lmKGV8fHQpe2UmJnMuY2xvc2VPcHRpb25CdXR0b25zKCkscy5jYW5Td2lwZUl0ZW1zKCFlKSxpLmNoaWxkcmVuKCkudG9nZ2xlQ2xhc3MoXCJsaXN0LXJpZ2h0LWVkaXRpbmdcIixlKSxpLnRvZ2dsZUNsYXNzKFwiZGlzYWJsZS1wb2ludGVyLWV2ZW50c1wiLGUpO3ZhciBuPXYoaVswXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiaXRlbS1yZW9yZGVyXCIpKTtvKG4scy5zaG93UmVvcmRlcil9fSl9dmFyIHM9clswXSxjPXJbMV07dChhKX19fX1dKSx1LmRpcmVjdGl2ZShcIm1lbnVDbG9zZVwiLFtcIiRpb25pY1ZpZXdTZXJ2aWNlXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBQ1wiLHJlcXVpcmU6XCJeaW9uU2lkZU1lbnVzXCIsbGluazpmdW5jdGlvbihlLHQsbixpKXt0LmJpbmQoXCJjbGlja1wiLGZ1bmN0aW9uKCl7aS5jbG9zZSgpfSl9fX1dKSx1LmRpcmVjdGl2ZShcIm1lbnVUb2dnbGVcIixbXCIkaW9uaWNWaWV3U2VydmljZVwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQUNcIixyZXF1aXJlOlwiXmlvblNpZGVNZW51c1wiLGxpbms6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIG89bi5tZW51VG9nZ2xlfHxcImxlZnRcIjt0LmJpbmQoXCJjbGlja1wiLGZ1bmN0aW9uKCl7XCJsZWZ0XCI9PT1vP2kudG9nZ2xlTGVmdCgpOlwicmlnaHRcIj09PW8mJmkudG9nZ2xlUmlnaHQoKX0pfX19XSksdS5kaXJlY3RpdmUoXCJpb25Nb2RhbFwiLFtmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVcIix0cmFuc2NsdWRlOiEwLHJlcGxhY2U6ITAsY29udHJvbGxlcjpbZnVuY3Rpb24oKXt9XSx0ZW1wbGF0ZTonPGRpdiBjbGFzcz1cIm1vZGFsLWJhY2tkcm9wXCI+PGRpdiBjbGFzcz1cIm1vZGFsLXdyYXBwZXJcIiBuZy10cmFuc2NsdWRlPjwvZGl2PjwvZGl2Pid9fV0pLHUuZGlyZWN0aXZlKFwiaW9uTW9kYWxWaWV3XCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsY29tcGlsZTpmdW5jdGlvbihlKXtlLmFkZENsYXNzKFwibW9kYWxcIil9fX0pLHUuZGlyZWN0aXZlKFwiaW9uTmF2QmFja0J1dHRvblwiLFtcIiRhbmltYXRlXCIsXCIkcm9vdFNjb3BlXCIsXCIkc2FuaXRpemVcIixcIiRpb25pY05hdkJhckNvbmZpZ1wiLFwiJGlvbmljTmdDbGlja1wiLGZ1bmN0aW9uKGUsdCxuLGksbyl7dmFyIHI9ITE7cmV0dXJuIHQuJG9uKFwiJHZpZXdIaXN0b3J5Lmhpc3RvcnlDaGFuZ2VcIixmdW5jdGlvbihlLHQpe3I9ISF0LnNob3dCYWNrfSkse3Jlc3RyaWN0OlwiRVwiLHJlcXVpcmU6XCJeaW9uTmF2QmFyXCIsY29tcGlsZTpmdW5jdGlvbih0KXt0LmFkZENsYXNzKFwiYnV0dG9uIGJhY2stYnV0dG9uIG5nLWhpZGVcIik7dmFyIGE9ISEodC5odG1sKCl8fFwiXCIpLm1hdGNoKC9jbGFzcz0uKj9pb24tLyk7cmV0dXJuIGZ1bmN0aW9uKHQscyxjLGwpe2F8fC0xIT09c1swXS5jbGFzc05hbWUuaW5kZXhPZihcImlvbi1cIil8fHMuYWRkQ2xhc3MoaS5iYWNrQnV0dG9uSWNvbiksaChjLm5nQ2xpY2spfHxvKHQscyxsLmJhY2spLHQuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGgoYy5mcm9tVGl0bGUpJiYoc1swXS5pbm5lckhUTUw9JzxzcGFuIGNsYXNzPVwiYmFjay1idXR0b24tdGl0bGVcIj4nK24odC5vbGRUaXRsZSkrXCI8L3NwYW4+XCIpLCEoIXJ8fCF0LmJhY2tCdXR0b25TaG93bil9LGlvbmljLmFuaW1hdGlvbkZyYW1lVGhyb3R0bGUoZnVuY3Rpb24odCl7dD9lLnJlbW92ZUNsYXNzKHMsXCJuZy1oaWRlXCIpOmUuYWRkQ2xhc3MocyxcIm5nLWhpZGVcIil9KSl9fX19XSksdS5jb25zdGFudChcIiRpb25pY05hdkJhckNvbmZpZ1wiLHt0cmFuc2l0aW9uOlwibmF2LXRpdGxlLXNsaWRlLWlvczdcIixhbGlnblRpdGxlOlwiY2VudGVyXCIsYmFja0J1dHRvbkljb246XCJpb24taW9zNy1hcnJvdy1iYWNrXCJ9KSx1LmRpcmVjdGl2ZShcImlvbk5hdkJhclwiLFtcIiRpb25pY1ZpZXdTZXJ2aWNlXCIsXCIkcm9vdFNjb3BlXCIsXCIkYW5pbWF0ZVwiLFwiJGNvbXBpbGVcIixcIiRpb25pY05hdkJhckNvbmZpZ1wiLGZ1bmN0aW9uKGUsdCxuLGksbyl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLGNvbnRyb2xsZXI6XCIkaW9uaWNOYXZCYXJcIixzY29wZTohMCxjb21waWxlOmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQsbixpKXtpLl9oZWFkZXJCYXJWaWV3PW5ldyBpb25pYy52aWV3cy5IZWFkZXJCYXIoe2VsOnRbMF0sYWxpZ25UaXRsZTpuLmFsaWduVGl0bGV8fG8uYWxpZ25UaXRsZXx8XCJjZW50ZXJcIn0pLGUuYmFja0J1dHRvblNob3duPSExLGUuc2hvdWxkQW5pbWF0ZT0hMCxlLmlzUmV2ZXJzZT0hMSxlLmlzSW52aXNpYmxlPSEwLGUuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2UuJHBhcmVudC4kaGFzSGVhZGVyPSExfSksZS4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4oZS5pc1JldmVyc2U/XCIgcmV2ZXJzZVwiOlwiXCIpKyhlLmlzSW52aXNpYmxlP1wiIGludmlzaWJsZVwiOlwiXCIpKyhlLnNob3VsZEFuaW1hdGU/XCJcIjpcIiBuby1hbmltYXRpb25cIil9LGZ1bmN0aW9uKGUsbil7dC5yZW1vdmVDbGFzcyhuKSx0LmFkZENsYXNzKGUpfSl9cmV0dXJuIGUuYWRkQ2xhc3MoXCJiYXIgYmFyLWhlYWRlciBuYXYtYmFyXCIpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImJ1dHRvbnMgbGVmdC1idXR0b25zXCI+IDwvZGl2PjxoMSBuZy1iaW5kLWh0bWw9XCJ0aXRsZVwiIGNsYXNzPVwidGl0bGVcIj48L2gxPjxkaXYgY2xhc3M9XCJidXR0b25zIHJpZ2h0LWJ1dHRvbnNcIj4gPC9kaXY+JyksZS5hZGRDbGFzcyhoKHQuYW5pbWF0aW9uKT90LmFuaW1hdGlvbjpvLnRyYW5zaXRpb24pLHtwcmU6bn19fX1dKSx1LmRpcmVjdGl2ZShcImlvbk5hdkJ1dHRvbnNcIixbXCIkY29tcGlsZVwiLFwiJGFuaW1hdGVcIixmdW5jdGlvbihlLHQpe3JldHVybntyZXF1aXJlOlwiXmlvbk5hdkJhclwiLHJlc3RyaWN0OlwiRVwiLGNvbXBpbGU6ZnVuY3Rpb24obil7dmFyIGk9bi5jb250ZW50cygpLnJlbW92ZSgpO1xucmV0dXJuIGZ1bmN0aW9uKG4sbyxyLGEpe3ZhciBzPVwicmlnaHRcIj09PXIuc2lkZT9hLnJpZ2h0QnV0dG9uc0VsZW1lbnQ6YS5sZWZ0QnV0dG9uc0VsZW1lbnQsYz12KFwiPHNwYW4+XCIpLmFwcGVuZChpKTtvLmFwcGVuZChjKSxlKGMpKG4pLGlvbmljLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe24uJCRkZXN0cm95ZWR8fHQuZW50ZXIoYyxzKX0pLG4uJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe3QubGVhdmUoYyl9KSxvLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIil9fX19XSksdS5kaXJlY3RpdmUoXCJuYXZDbGVhclwiLFtcIiRpb25pY1ZpZXdTZXJ2aWNlXCIsXCIkc3RhdGVcIixcIiRsb2NhdGlvblwiLFwiJHdpbmRvd1wiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGUsdCxuLGksbyl7cmV0dXJuIG8uJG9uKFwiJHN0YXRlQ2hhbmdlRXJyb3JcIixmdW5jdGlvbigpe2UubmV4dFZpZXdPcHRpb25zKG51bGwpfSkse3ByaW9yaXR5OjEwMCxyZXN0cmljdDpcIkFDXCIsY29tcGlsZTpmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxuKXtmdW5jdGlvbiBvKCl7cj10LiRvbihcIiRzdGF0ZUNoYW5nZVN0YXJ0XCIsZnVuY3Rpb24oKXtlLm5leHRWaWV3T3B0aW9ucyh7ZGlzYWJsZUFuaW1hdGU6ITAsZGlzYWJsZUJhY2s6ITB9KSxyKCl9KSxpLnNldFRpbWVvdXQociwzMDApfXZhciByO24ub24oXCJjbGlja1wiLG8pfXJldHVybntwcmU6dH19fX1dKSx1LmNvbnN0YW50KFwiJGlvbmljTmF2Vmlld0NvbmZpZ1wiLHt0cmFuc2l0aW9uOlwic2xpZGUtbGVmdC1yaWdodC1pb3M3XCJ9KSx1LmRpcmVjdGl2ZShcImlvbk5hdlZpZXdcIixbXCIkaW9uaWNWaWV3U2VydmljZVwiLFwiJHN0YXRlXCIsXCIkY29tcGlsZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oZSx0LG4saSxvKXt2YXIgcj0hMSxhPXtyZXN0cmljdDpcIkVcIix0ZXJtaW5hbDohMCxwcmlvcml0eToyZTMsdHJhbnNjbHVkZTohMCxjb250cm9sbGVyOmZ1bmN0aW9uKCl7fSxjb21waWxlOmZ1bmN0aW9uKHMsYyxsKXtyZXR1cm4gZnVuY3Rpb24ocyxjLHUpe2Z1bmN0aW9uIGQocil7by5lbmFibGVkKCk9PT0hMSYmKHI9ITEpO3ZhciBhPXQuJGN1cnJlbnQmJnQuJGN1cnJlbnQubG9jYWxzW3BdO2lmKGEhPT1oKXt2YXIgbD1lLmdldFJlbmRlcmVyKGMsdSxzKTtpZihmJiYoZi4kZGVzdHJveSgpLGY9bnVsbCksIWEpcmV0dXJuIGg9bnVsbCx3LnN0YXRlPW51bGwsYy5hcHBlbmQobSk7dmFyIGQ9dihcIjxkaXY+PC9kaXY+XCIpLmh0bWwoYS4kdGVtcGxhdGUpLmNvbnRlbnRzKCksJD1sKCkucmVnaXN0ZXIoZCk7bChyKS5sZWF2ZSgpLGg9YSx3LnN0YXRlPWEuJCRzdGF0ZSxsKHIpLmVudGVyKGQpO3ZhciBiPW4oZCk7aWYoZj1zLiRuZXcoKSxmLiRuYXZEaXJlY3Rpb249JC5uYXZEaXJlY3Rpb24sYS4kJGNvbnRyb2xsZXIpe2EuJHNjb3BlPWY7dmFyIHk9aShhLiQkY29udHJvbGxlcixhKTtjLmNoaWxkcmVuKCkuZGF0YShcIiRuZ0NvbnRyb2xsZXJDb250cm9sbGVyXCIseSl9YihmKTt2YXIgUz1lLl9nZXRWaWV3QnlJZCgkLnZpZXdJZCl8fHt9O2YuJGJyb2FkY2FzdChcIiR2aWV3Q29udGVudExvYWRlZFwiLFMpLGcmJmYuJGV2YWwoZyksZD1udWxsfX12YXIgZixoLHA9dVthLm5hbWVdfHx1Lm5hbWV8fFwiXCIsZz11Lm9ubG9hZHx8XCJcIixtPWwocyk7Yy5hcHBlbmQobSk7dmFyICQ9Yy5wYXJlbnQoKS5pbmhlcml0ZWREYXRhKFwiJHVpVmlld1wiKTtwLmluZGV4T2YoXCJAXCIpPDAmJihwPXArXCJAXCIrKCQmJiQuc3RhdGU/JC5zdGF0ZS5uYW1lOlwiXCIpKTt2YXIgdz17bmFtZTpwLHN0YXRlOm51bGx9O2MuZGF0YShcIiR1aVZpZXdcIix3KTt2YXIgYj1mdW5jdGlvbigpe2lmKCFyKXtyPSEwO3RyeXtkKCEwKX1jYXRjaChlKXt0aHJvdyByPSExLGV9cj0hMX19O3MuJG9uKFwiJHN0YXRlQ2hhbmdlU3VjY2Vzc1wiLGIpLGQoITEpfX19O3JldHVybiBhfV0pLHUuY29uZmlnKFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oZSl7ZS5kZWNvcmF0b3IoXCJuZ0NsaWNrRGlyZWN0aXZlXCIsW1wiJGRlbGVnYXRlXCIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2hpZnQoKSxlfV0pfV0pLmZhY3RvcnkoXCIkaW9uaWNOZ0NsaWNrXCIsW1wiJHBhcnNlXCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbixpKXt2YXIgbz1hbmd1bGFyLmlzRnVuY3Rpb24oaSk/aTplKGkpO24ub24oXCJjbGlja1wiLGZ1bmN0aW9uKGUpe3QuJGFwcGx5KGZ1bmN0aW9uKCl7byh0LHskZXZlbnQ6ZX0pfSl9KSxuLm9uY2xpY2s9ZnVuY3Rpb24oKXt9fX1dKS5kaXJlY3RpdmUoXCJuZ0NsaWNrXCIsW1wiJGlvbmljTmdDbGlja1wiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG4saSl7ZSh0LG4saS5uZ0NsaWNrKX19XSkuZGlyZWN0aXZlKFwiaW9uU3RvcEV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsbGluazpmdW5jdGlvbihlLHQsbil7dC5iaW5kKG4uaW9uU3RvcEV2ZW50LGMpfX19KSx1LmRpcmVjdGl2ZShcImlvblBhbmVcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVcIixsaW5rOmZ1bmN0aW9uKGUsdCl7dC5hZGRDbGFzcyhcInBhbmVcIil9fX0pLHUuZGlyZWN0aXZlKFwiaW9uUG9wb3ZlclwiLFtmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVcIix0cmFuc2NsdWRlOiEwLHJlcGxhY2U6ITAsY29udHJvbGxlcjpbZnVuY3Rpb24oKXt9XSx0ZW1wbGF0ZTonPGRpdiBjbGFzcz1cInBvcG92ZXItYmFja2Ryb3BcIj48ZGl2IGNsYXNzPVwicG9wb3Zlci13cmFwcGVyXCIgbmctdHJhbnNjbHVkZT48L2Rpdj48L2Rpdj4nfX1dKSx1LmRpcmVjdGl2ZShcImlvblBvcG92ZXJWaWV3XCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsY29tcGlsZTpmdW5jdGlvbihlKXtlLmFwcGVuZChhbmd1bGFyLmVsZW1lbnQoJzxkaXYgY2xhc3M9XCJwb3BvdmVyLWFycm93XCI+PC9kaXY+JykpLGUuYWRkQ2xhc3MoXCJwb3BvdmVyXCIpfX19KSx1LmRpcmVjdGl2ZShcImlvblJhZGlvXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVwbGFjZTohMCxyZXF1aXJlOlwiP25nTW9kZWxcIix0cmFuc2NsdWRlOiEwLHRlbXBsYXRlOic8bGFiZWwgY2xhc3M9XCJpdGVtIGl0ZW0tcmFkaW9cIj48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cInJhZGlvLWdyb3VwXCI+PGRpdiBjbGFzcz1cIml0ZW0tY29udGVudCBkaXNhYmxlLXBvaW50ZXItZXZlbnRzXCIgbmctdHJhbnNjbHVkZT48L2Rpdj48aSBjbGFzcz1cInJhZGlvLWljb24gZGlzYWJsZS1wb2ludGVyLWV2ZW50cyBpY29uIGlvbi1jaGVja21hcmtcIj48L2k+PC9sYWJlbD4nLGNvbXBpbGU6ZnVuY3Rpb24oZSx0KXt0Lmljb24mJmUuY2hpbGRyZW4oKS5lcSgyKS5yZW1vdmVDbGFzcyhcImlvbi1jaGVja21hcmtcIikuYWRkQ2xhc3ModC5pY29uKTt2YXIgbj1lLmZpbmQoXCJpbnB1dFwiKTtyZXR1cm4gZih7bmFtZTp0Lm5hbWUsdmFsdWU6dC52YWx1ZSxkaXNhYmxlZDp0LmRpc2FibGVkLFwibmctdmFsdWVcIjp0Lm5nVmFsdWUsXCJuZy1tb2RlbFwiOnQubmdNb2RlbCxcIm5nLWRpc2FibGVkXCI6dC5uZ0Rpc2FibGVkLFwibmctY2hhbmdlXCI6dC5uZ0NoYW5nZX0sZnVuY3Rpb24oZSx0KXtoKGUpJiZuLmF0dHIodCxlKX0pLGZ1bmN0aW9uKGUsdCxuKXtlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIGUubmdWYWx1ZXx8bi52YWx1ZX19fX19KSx1LmRpcmVjdGl2ZShcImlvblJlZnJlc2hlclwiLFtcIiRpb25pY0JpbmRcIixmdW5jdGlvbihlKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVwbGFjZTohMCxyZXF1aXJlOlwiXiRpb25pY1Njcm9sbFwiLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwic2Nyb2xsLXJlZnJlc2hlclwiIGNvbGxlY3Rpb24tcmVwZWF0LWlnbm9yZT48ZGl2IGNsYXNzPVwiaW9uaWMtcmVmcmVzaGVyLWNvbnRlbnRcIiBuZy1jbGFzcz1cIntcXCdpb25pYy1yZWZyZXNoZXItd2l0aC10ZXh0XFwnOiBwdWxsaW5nVGV4dCB8fCByZWZyZXNoaW5nVGV4dH1cIj48ZGl2IGNsYXNzPVwiaWNvbi1wdWxsaW5nXCIgbmctY2xhc3M9XCJ7XFwncHVsbGluZy1yb3RhdGlvbi1kaXNhYmxlZFxcJzpkaXNhYmxlUHVsbGluZ1JvdGF0aW9ufVwiPjxpIGNsYXNzPVwiaWNvbiB7e3B1bGxpbmdJY29ufX1cIj48L2k+PC9kaXY+PGRpdiBjbGFzcz1cInRleHQtcHVsbGluZ1wiIG5nLWJpbmQtaHRtbD1cInB1bGxpbmdUZXh0XCI+PC9kaXY+PGkgY2xhc3M9XCJpY29uIHt7cmVmcmVzaGluZ0ljb259fSBpY29uLXJlZnJlc2hpbmdcIj48L2k+PGRpdiBjbGFzcz1cInRleHQtcmVmcmVzaGluZ1wiIG5nLWJpbmQtaHRtbD1cInJlZnJlc2hpbmdUZXh0XCI+PC9kaXY+PC9kaXY+PC9kaXY+Jyxjb21waWxlOmZ1bmN0aW9uKHQsbil7cmV0dXJuIGFuZ3VsYXIuaXNVbmRlZmluZWQobi5wdWxsaW5nSWNvbikmJm4uJHNldChcInB1bGxpbmdJY29uXCIsXCJpb24taW9zNy1hcnJvdy1kb3duXCIpLGFuZ3VsYXIuaXNVbmRlZmluZWQobi5yZWZyZXNoaW5nSWNvbikmJm4uJHNldChcInJlZnJlc2hpbmdJY29uXCIsXCJpb24tbG9hZGluZy1kXCIpLGZ1bmN0aW9uKHQsbixpLG8pe2UodCxpLHtwdWxsaW5nSWNvbjpcIkBcIixwdWxsaW5nVGV4dDpcIkBcIixyZWZyZXNoaW5nSWNvbjpcIkBcIixyZWZyZXNoaW5nVGV4dDpcIkBcIixkaXNhYmxlUHVsbGluZ1JvdGF0aW9uOlwiQFwiLCRvblJlZnJlc2g6XCImb25SZWZyZXNoXCIsJG9uUHVsbGluZzpcIiZvblB1bGxpbmdcIn0pLG8uX3NldFJlZnJlc2hlcih0LG5bMF0pLHQuJG9uKFwic2Nyb2xsLnJlZnJlc2hDb21wbGV0ZVwiLGZ1bmN0aW9uKCl7dC4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7by5zY3JvbGxWaWV3LmZpbmlzaFB1bGxUb1JlZnJlc2goKX0pfSl9fX19XSksdS5kaXJlY3RpdmUoXCJpb25TY3JvbGxcIixbXCIkdGltZW91dFwiLFwiJGNvbnRyb2xsZXJcIixcIiRpb25pY0JpbmRcIixmdW5jdGlvbihlLHQsbil7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHNjb3BlOiEwLGNvbnRyb2xsZXI6ZnVuY3Rpb24oKXt9LGNvbXBpbGU6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaShlLGkscil7dmFyIGEscztuKGUscix7ZGlyZWN0aW9uOlwiQFwiLHBhZ2luZzpcIkBcIiwkb25TY3JvbGw6XCImb25TY3JvbGxcIixzY3JvbGw6XCJAXCIsc2Nyb2xsYmFyWDpcIkBcIixzY3JvbGxiYXJZOlwiQFwiLHpvb21pbmc6XCJAXCIsbWluWm9vbTpcIkBcIixtYXhab29tOlwiQFwifSksZS5kaXJlY3Rpb249ZS5kaXJlY3Rpb258fFwieVwiLGFuZ3VsYXIuaXNEZWZpbmVkKHIucGFkZGluZykmJmUuJHdhdGNoKHIucGFkZGluZyxmdW5jdGlvbihlKXtvLnRvZ2dsZUNsYXNzKFwicGFkZGluZ1wiLCEhZSl9KSxlLiRldmFsKGUucGFnaW5nKT09PSEwJiZvLmFkZENsYXNzKFwic2Nyb2xsLXBhZ2luZ1wiKSxlLmRpcmVjdGlvbnx8KGUuZGlyZWN0aW9uPVwieVwiKTt2YXIgYz1lLiRldmFsKGUucGFnaW5nKT09PSEwLGw9e2VsOmlbMF0sZGVsZWdhdGVIYW5kbGU6ci5kZWxlZ2F0ZUhhbmRsZSxsb2NraW5nOlwidHJ1ZVwiPT09KHIubG9ja2luZ3x8XCJ0cnVlXCIpLGJvdW5jaW5nOmUuJGV2YWwoci5oYXNCb3VuY2luZykscGFnaW5nOmMsc2Nyb2xsYmFyWDplLiRldmFsKGUuc2Nyb2xsYmFyWCkhPT0hMSxzY3JvbGxiYXJZOmUuJGV2YWwoZS5zY3JvbGxiYXJZKSE9PSExLHNjcm9sbGluZ1g6ZS5kaXJlY3Rpb24uaW5kZXhPZihcInhcIik+PTAsc2Nyb2xsaW5nWTplLmRpcmVjdGlvbi5pbmRleE9mKFwieVwiKT49MCx6b29taW5nOmUuJGV2YWwoZS56b29taW5nKT09PSEwLG1heFpvb206ZS4kZXZhbChlLm1heFpvb20pfHwzLG1pblpvb206ZS4kZXZhbChlLm1pblpvb20pfHwuNX07YyYmKGwuc3BlZWRNdWx0aXBsaWVyPS44LGwuYm91bmNpbmc9ITEpLHM9dChcIiRpb25pY1Njcm9sbFwiLHskc2NvcGU6ZSxzY3JvbGxWaWV3T3B0aW9uczpsfSksYT1lLiRwYXJlbnQuc2Nyb2xsVmlldz1zLnNjcm9sbFZpZXd9ZS5hZGRDbGFzcyhcInNjcm9sbC12aWV3IGlvbmljLXNjcm9sbFwiKTt2YXIgbz12KCc8ZGl2IGNsYXNzPVwic2Nyb2xsXCI+PC9kaXY+Jyk7cmV0dXJuIG8uYXBwZW5kKGUuY29udGVudHMoKSksZS5hcHBlbmQobykse3ByZTppfX19fV0pLHUuZGlyZWN0aXZlKFwiaW9uU2lkZU1lbnVcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVcIixyZXF1aXJlOlwiXmlvblNpZGVNZW51c1wiLHNjb3BlOiEwLGNvbXBpbGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYW5ndWxhci5pc1VuZGVmaW5lZCh0LmlzRW5hYmxlZCkmJnQuJHNldChcImlzRW5hYmxlZFwiLFwidHJ1ZVwiKSxhbmd1bGFyLmlzVW5kZWZpbmVkKHQud2lkdGgpJiZ0LiRzZXQoXCJ3aWR0aFwiLFwiMjc1XCIpLGUuYWRkQ2xhc3MoXCJtZW51IG1lbnUtXCIrdC5zaWRlKSxmdW5jdGlvbihlLG4saSxvKXtlLnNpZGU9aS5zaWRlfHxcImxlZnRcIjt2YXIgcj1vW2Uuc2lkZV09bmV3IGlvbmljLnZpZXdzLlNpZGVNZW51KHt3aWR0aDp0LndpZHRoLGVsOm5bMF0saXNFbmFibGVkOiEwfSk7ZS4kd2F0Y2goaS53aWR0aCxmdW5jdGlvbihlKXt2YXIgdD0rZTt0JiZ0PT1lJiZyLnNldFdpZHRoKCtlKX0pLGUuJHdhdGNoKGkuaXNFbmFibGVkLGZ1bmN0aW9uKGUpe3Iuc2V0SXNFbmFibGVkKCEhZSl9KX19fX0pLHUuZGlyZWN0aXZlKFwiaW9uU2lkZU1lbnVDb250ZW50XCIsW1wiJHRpbWVvdXRcIixcIiRpb25pY0dlc3R1cmVcIixcIiR3aW5kb3dcIixmdW5jdGlvbihlLHQsbil7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXF1aXJlOlwiXmlvblNpZGVNZW51c1wiLHNjb3BlOiEwLGNvbXBpbGU6ZnVuY3Rpb24oaSxvKXtmdW5jdGlvbiByKHIsYSxzLGMpe2Z1bmN0aW9uIGwoZSl7MCE9PWMuZ2V0T3BlbkFtb3VudCgpPyhjLmNsb3NlKCksZS5nZXN0dXJlLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCksdj1udWxsLGc9bnVsbCk6dnx8KHY9aW9uaWMudGFwLnBvaW50ZXJDb29yZChlLmdlc3R1cmUuc3JjRXZlbnQpKX1mdW5jdGlvbiB1KGUpe2MuaXNEcmFnZ2FibGVUYXJnZXQoZSkmJlwieFwiPT1wKGUpJiYoYy5faGFuZGxlRHJhZyhlKSxlLmdlc3R1cmUuc3JjRXZlbnQucHJldmVudERlZmF1bHQoKSl9ZnVuY3Rpb24gZChlKXtcInhcIj09cChlKSYmZS5nZXN0dXJlLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCl9ZnVuY3Rpb24gZihlKXtjLl9lbmREcmFnKGUpLHY9bnVsbCxnPW51bGx9ZnVuY3Rpb24gcChlKXtpZihnKXJldHVybiBnO2lmKGUmJmUuZ2VzdHVyZSl7aWYodil7dmFyIHQ9aW9uaWMudGFwLnBvaW50ZXJDb29yZChlLmdlc3R1cmUuc3JjRXZlbnQpLG49TWF0aC5hYnModC54LXYueCksaT1NYXRoLmFicyh0Lnktdi55KSxvPWk+bj9cInlcIjpcInhcIjtyZXR1cm4gTWF0aC5tYXgobixpKT4zMCYmKGc9byksb312PWlvbmljLnRhcC5wb2ludGVyQ29vcmQoZS5nZXN0dXJlLnNyY0V2ZW50KX1yZXR1cm5cInhcIn12YXIgdj1udWxsLGc9bnVsbDthLmFkZENsYXNzKFwibWVudS1jb250ZW50IHBhbmVcIiksaChvLmRyYWdDb250ZW50KT9yLiR3YXRjaChvLmRyYWdDb250ZW50LGZ1bmN0aW9uKGUpe2MuY2FuRHJhZ0NvbnRlbnQoZSl9KTpjLmNhbkRyYWdDb250ZW50KCEwKSxoKG8uZWRnZURyYWdUaHJlc2hvbGQpJiZyLiR3YXRjaChvLmVkZ2VEcmFnVGhyZXNob2xkLGZ1bmN0aW9uKGUpe2MuZWRnZURyYWdUaHJlc2hvbGQoZSl9KTt2YXIgbT17ZWxlbWVudDppWzBdLG9uRHJhZzpmdW5jdGlvbigpe30sZW5kRHJhZzpmdW5jdGlvbigpe30sZ2V0VHJhbnNsYXRlWDpmdW5jdGlvbigpe3JldHVybiByLnNpZGVNZW51Q29udGVudFRyYW5zbGF0ZVh8fDB9LHNldFRyYW5zbGF0ZVg6aW9uaWMuYW5pbWF0aW9uRnJhbWVUaHJvdHRsZShmdW5jdGlvbih0KXt2YXIgbj1tLm9mZnNldFgrdDthWzBdLnN0eWxlW2lvbmljLkNTUy5UUkFOU0ZPUk1dPVwidHJhbnNsYXRlM2QoXCIrbitcInB4LDAsMClcIixlKGZ1bmN0aW9uKCl7ci5zaWRlTWVudUNvbnRlbnRUcmFuc2xhdGVYPXR9KX0pLHNldE1hcmdpbkxlZnQ6aW9uaWMuYW5pbWF0aW9uRnJhbWVUaHJvdHRsZShmdW5jdGlvbihlKXtlPyhlPXBhcnNlSW50KGUsMTApLGFbMF0uc3R5bGVbaW9uaWMuQ1NTLlRSQU5TRk9STV09XCJ0cmFuc2xhdGUzZChcIitlK1wicHgsMCwwKVwiLGFbMF0uc3R5bGUud2lkdGg9bi5pbm5lcldpZHRoLWUrXCJweFwiLG0ub2Zmc2V0WD1lKTooYVswXS5zdHlsZVtpb25pYy5DU1MuVFJBTlNGT1JNXT1cInRyYW5zbGF0ZTNkKDAsMCwwKVwiLGFbMF0uc3R5bGUud2lkdGg9XCJcIixtLm9mZnNldFg9MCl9KSxlbmFibGVBbmltYXRpb246ZnVuY3Rpb24oKXtyLmFuaW1hdGlvbkVuYWJsZWQ9ITAsYVswXS5jbGFzc0xpc3QuYWRkKFwibWVudS1hbmltYXRlZFwiKX0sZGlzYWJsZUFuaW1hdGlvbjpmdW5jdGlvbigpe3IuYW5pbWF0aW9uRW5hYmxlZD0hMSxhWzBdLmNsYXNzTGlzdC5yZW1vdmUoXCJtZW51LWFuaW1hdGVkXCIpfSxvZmZzZXRYOjB9O2Muc2V0Q29udGVudChtKTt2YXIgJD17c3RvcF9icm93c2VyX2JlaGF2aW9yOiExfSx3PXQub24oXCJ0YXBcIixsLGEsJCksYj10Lm9uKFwiZHJhZ3JpZ2h0XCIsdSxhLCQpLHk9dC5vbihcImRyYWdsZWZ0XCIsdSxhLCQpLFM9dC5vbihcImRyYWd1cFwiLGQsYSwkKSxDPXQub24oXCJkcmFnZG93blwiLGQsYSwkKSxrPXQub24oXCJyZWxlYXNlXCIsZixhLCQpO3IuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe3Qub2ZmKHksXCJkcmFnbGVmdFwiLHUpLHQub2ZmKGIsXCJkcmFncmlnaHRcIix1KSx0Lm9mZihTLFwiZHJhZ3VwXCIsZCksdC5vZmYoQyxcImRyYWdkb3duXCIsZCksdC5vZmYoayxcInJlbGVhc2VcIixmKSx0Lm9mZih3LFwidGFwXCIsbCl9KX1yZXR1cm57cHJlOnJ9fX19XSksdS5kaXJlY3RpdmUoXCJpb25TaWRlTWVudXNcIixbXCIkaW9uaWNCb2R5XCIsZnVuY3Rpb24oZSl7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIsY29udHJvbGxlcjpcIiRpb25pY1NpZGVNZW51c1wiLGNvbXBpbGU6ZnVuY3Rpb24odCxuKXtmdW5jdGlvbiBpKHQpe3QuJG9uKFwiJGlvbmljRXhwb3NlQXNpZGVcIixmdW5jdGlvbihuLGkpe3QuJGV4cG9zZUFzaWRlfHwodC4kZXhwb3NlQXNpZGU9e30pLHQuJGV4cG9zZUFzaWRlLmFjdGl2ZT1pLGUuZW5hYmxlQ2xhc3MoaSxcImFzaWRlLW9wZW5cIil9KSx0LiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtlLnJlbW92ZUNsYXNzKFwibWVudS1vcGVuXCIsXCJhc2lkZS1vcGVuXCIpfSl9cmV0dXJuIG4uJHNldChcImNsYXNzXCIsKG5bXCJjbGFzc1wiXXx8XCJcIikrXCIgdmlld1wiKSx7cHJlOml9fX19XSksdS5kaXJlY3RpdmUoXCJpb25TbGlkZUJveFwiLFtcIiR0aW1lb3V0XCIsXCIkY29tcGlsZVwiLFwiJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZVwiLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLHNjb3BlOnthdXRvUGxheTpcIj1cIixkb2VzQ29udGludWU6XCJAXCIsc2xpZGVJbnRlcnZhbDpcIkBcIixzaG93UGFnZXI6XCJAXCIscGFnZXJDbGljazpcIiZcIixkaXNhYmxlU2Nyb2xsOlwiQFwiLG9uU2xpZGVDaGFuZ2VkOlwiJlwiLGFjdGl2ZVNsaWRlOlwiPT9cIn0sY29udHJvbGxlcjpbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixmdW5jdGlvbih0LGksbyl7dmFyIHI9dC4kZXZhbCh0LmRvZXNDb250aW51ZSk9PT0hMCxhPWgoby5hdXRvUGxheSk/ISF0LmF1dG9QbGF5OiExLHM9YT90LiRldmFsKHQuc2xpZGVJbnRlcnZhbCl8fDRlMzowLGM9bmV3IGlvbmljLnZpZXdzLlNsaWRlcih7ZWw6aVswXSxhdXRvOnMsY29udGludW91czpyLHN0YXJ0U2xpZGU6dC5hY3RpdmVTbGlkZSxzbGlkZXNDaGFuZ2VkOmZ1bmN0aW9uKCl7dC5jdXJyZW50U2xpZGU9Yy5jdXJyZW50SW5kZXgoKSxlKGZ1bmN0aW9uKCl7fSl9LGNhbGxiYWNrOmZ1bmN0aW9uKG4pe3QuY3VycmVudFNsaWRlPW4sdC5vblNsaWRlQ2hhbmdlZCh7aW5kZXg6dC5jdXJyZW50U2xpZGUsJGluZGV4OnQuY3VycmVudFNsaWRlfSksdC4kcGFyZW50LiRicm9hZGNhc3QoXCJzbGlkZUJveC5zbGlkZUNoYW5nZWRcIixuKSx0LmFjdGl2ZVNsaWRlPW4sZShmdW5jdGlvbigpe30pfX0pO2MuZW5hYmxlU2xpZGUodC4kZXZhbChvLmRpc2FibGVTY3JvbGwpIT09ITApLHQuJHdhdGNoKFwiYWN0aXZlU2xpZGVcIixmdW5jdGlvbihlKXthbmd1bGFyLmlzRGVmaW5lZChlKSYmYy5zbGlkZShlKX0pLHQuJG9uKFwic2xpZGVCb3gubmV4dFNsaWRlXCIsZnVuY3Rpb24oKXtjLm5leHQoKX0pLHQuJG9uKFwic2xpZGVCb3gucHJldlNsaWRlXCIsZnVuY3Rpb24oKXtjLnByZXYoKX0pLHQuJG9uKFwic2xpZGVCb3guc2V0U2xpZGVcIixmdW5jdGlvbihlLHQpe2Muc2xpZGUodCl9KSx0aGlzLl9fc2xpZGVyPWM7dmFyIGw9bi5fcmVnaXN0ZXJJbnN0YW5jZShjLG8uZGVsZWdhdGVIYW5kbGUpO3QuJG9uKFwiJGRlc3Ryb3lcIixsKSx0aGlzLnNsaWRlc0NvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIGMuc2xpZGVzQ291bnQoKX0sdGhpcy5vblBhZ2VyQ2xpY2s9ZnVuY3Rpb24oZSl7dC5wYWdlckNsaWNrKHtpbmRleDplfSl9LGUoZnVuY3Rpb24oKXtjLmxvYWQoKX0pfV0sdGVtcGxhdGU6JzxkaXYgY2xhc3M9XCJzbGlkZXJcIj48ZGl2IGNsYXNzPVwic2xpZGVyLXNsaWRlc1wiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+PC9kaXY+JyxsaW5rOmZ1bmN0aW9uKGUsbil7aWYoZS4kZXZhbChlLnNob3dQYWdlcikhPT0hMSl7dmFyIGk9ZS4kbmV3KCksbz12KFwiPGlvbi1wYWdlcj48L2lvbi1wYWdlcj5cIik7bi5hcHBlbmQobyksdChvKShpKX19fX1dKS5kaXJlY3RpdmUoXCJpb25TbGlkZVwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcXVpcmU6XCJeaW9uU2xpZGVCb3hcIixjb21waWxlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZENsYXNzKFwic2xpZGVyLXNsaWRlXCIpLGZ1bmN0aW9uKCl7fX19fSkuZGlyZWN0aXZlKFwiaW9uUGFnZXJcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVcIixyZXBsYWNlOiEwLHJlcXVpcmU6XCJeaW9uU2xpZGVCb3hcIix0ZW1wbGF0ZTonPGRpdiBjbGFzcz1cInNsaWRlci1wYWdlclwiPjxzcGFuIGNsYXNzPVwic2xpZGVyLXBhZ2VyLXBhZ2VcIiBuZy1yZXBlYXQ9XCJzbGlkZSBpbiBudW1TbGlkZXMoKSB0cmFjayBieSAkaW5kZXhcIiBuZy1jbGFzcz1cInthY3RpdmU6ICRpbmRleCA9PSBjdXJyZW50U2xpZGV9XCIgbmctY2xpY2s9XCJwYWdlckNsaWNrKCRpbmRleClcIj48aSBjbGFzcz1cImljb24gaW9uLXJlY29yZFwiPjwvaT48L3NwYW4+PC9kaXY+JyxsaW5rOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBvPWZ1bmN0aW9uKGUpe2Zvcih2YXIgbj10WzBdLmNoaWxkcmVuLGk9bi5sZW5ndGgsbz0wO2k+bztvKyspbz09ZT9uW29dLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik6bltvXS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpfTtlLnBhZ2VyQ2xpY2s9ZnVuY3Rpb24oZSl7aS5vblBhZ2VyQ2xpY2soZSl9LGUubnVtU2xpZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBcnJheShpLnNsaWRlc0NvdW50KCkpfSxlLiR3YXRjaChcImN1cnJlbnRTbGlkZVwiLGZ1bmN0aW9uKGUpe28oZSl9KX19fSksdS5jb25zdGFudChcIiRpb25pY1RhYkNvbmZpZ1wiLHt0eXBlOlwiXCJ9KSx1LmRpcmVjdGl2ZShcImlvblRhYlwiLFtcIiRyb290U2NvcGVcIixcIiRhbmltYXRlXCIsXCIkaW9uaWNCaW5kXCIsXCIkY29tcGlsZVwiLGZ1bmN0aW9uKGUsdCxuLGkpe2Z1bmN0aW9uIG8oZSx0KXtyZXR1cm4gYW5ndWxhci5pc0RlZmluZWQodCk/XCIgXCIrZSsnPVwiJyt0KydcIic6XCJcIn1yZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpbXCJeaW9uVGFic1wiLFwiaW9uVGFiXCJdLHJlcGxhY2U6ITAsY29udHJvbGxlcjpcIiRpb25pY1RhYlwiLHNjb3BlOiEwLGNvbXBpbGU6ZnVuY3Rpb24oZSxyKXt2YXIgYT1cIjxpb24tdGFiLW5hdlwiK28oXCJuZy1jbGlja1wiLHIubmdDbGljaykrbyhcInRpdGxlXCIsci50aXRsZSkrbyhcImljb25cIixyLmljb24pK28oXCJpY29uLW9uXCIsci5pY29uT24pK28oXCJpY29uLW9mZlwiLHIuaWNvbk9mZikrbyhcImJhZGdlXCIsci5iYWRnZSkrbyhcImJhZGdlLXN0eWxlXCIsci5iYWRnZVN0eWxlKStvKFwiaGlkZGVuXCIsci5oaWRkZW4pK28oXCJjbGFzc1wiLHJbXCJjbGFzc1wiXSkrXCI+PC9pb24tdGFiLW5hdj5cIixzPXYoJzxkaXYgY2xhc3M9XCJwYW5lXCI+JykuYXBwZW5kKGUuY29udGVudHMoKS5yZW1vdmUoKSk7cmV0dXJuIGZ1bmN0aW9uKGUsbyxyLGMpe2Z1bmN0aW9uIGwoKXtoLnRhYk1hdGNoZXNTdGF0ZSgpJiZmLnNlbGVjdChlLCExKX12YXIgdSxkLGY9Y1swXSxoPWNbMV0scD1zWzBdLnF1ZXJ5U2VsZWN0b3IoXCJpb24tbmF2LXZpZXdcIil8fHNbMF0ucXVlcnlTZWxlY3RvcihcImRhdGEtaW9uLW5hdi12aWV3XCIpLGc9cCYmcC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO24oZSxyLHthbmltYXRlOlwiPVwiLG9uU2VsZWN0OlwiJlwiLG9uRGVzZWxlY3Q6XCImXCIsdGl0bGU6XCJAXCIsdWlTcmVmOlwiQFwiLGhyZWY6XCJAXCJ9KSxmLmFkZChlKSxlLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtlLiR0YWJzRGVzdHJveXx8Zi5yZW1vdmUoZSksbS5pc29sYXRlU2NvcGUoKS4kZGVzdHJveSgpLG0ucmVtb3ZlKCl9KSxvWzBdLnJlbW92ZUF0dHJpYnV0ZShcInRpdGxlXCIpLGcmJihoLm5hdlZpZXdOYW1lPWUubmF2Vmlld05hbWU9ZyksZS4kb24oXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsbCksbCgpO3ZhciBtPXYoYSk7bS5kYXRhKFwiJGlvblRhYnNDb250cm9sbGVyXCIsZiksbS5kYXRhKFwiJGlvblRhYkNvbnRyb2xsZXJcIixoKSxmLiR0YWJzRWxlbWVudC5hcHBlbmQoaShtKShlKSksZS4kd2F0Y2goXCIkdGFiU2VsZWN0ZWRcIixmdW5jdGlvbihuKXt1JiZ1LiRkZXN0cm95KCksdT1udWxsLGQmJnQubGVhdmUoZCksZD1udWxsLG4mJih1PWUuJG5ldygpLGQ9cy5jbG9uZSgpLHQuZW50ZXIoZCxmLiRlbGVtZW50KSxpKGQpKHUpKX0pfX19fV0pLHUuZGlyZWN0aXZlKFwiaW9uVGFiTmF2XCIsW2Z1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcGxhY2U6ITAscmVxdWlyZTpbXCJeaW9uVGFic1wiLFwiXmlvblRhYlwiXSx0ZW1wbGF0ZTonPGEgbmctY2xhc3M9XCJ7XFwndGFiLWl0ZW0tYWN0aXZlXFwnOiBpc1RhYkFjdGl2ZSgpLCBcXCdoYXMtYmFkZ2VcXCc6YmFkZ2UsIFxcJ3RhYi1oaWRkZW5cXCc6aXNIaWRkZW4oKX1cIiAgY2xhc3M9XCJ0YWItaXRlbVwiPjxzcGFuIGNsYXNzPVwiYmFkZ2Uge3tiYWRnZVN0eWxlfX1cIiBuZy1pZj1cImJhZGdlXCI+e3tiYWRnZX19PC9zcGFuPjxpIGNsYXNzPVwiaWNvbiB7e2dldEljb25PbigpfX1cIiBuZy1pZj1cImdldEljb25PbigpICYmIGlzVGFiQWN0aXZlKClcIj48L2k+PGkgY2xhc3M9XCJpY29uIHt7Z2V0SWNvbk9mZigpfX1cIiBuZy1pZj1cImdldEljb25PZmYoKSAmJiAhaXNUYWJBY3RpdmUoKVwiPjwvaT48c3BhbiBjbGFzcz1cInRhYi10aXRsZVwiIG5nLWJpbmQtaHRtbD1cInRpdGxlXCI+PC9zcGFuPjwvYT4nLHNjb3BlOnt0aXRsZTpcIkBcIixpY29uOlwiQFwiLGljb25PbjpcIkBcIixpY29uT2ZmOlwiQFwiLGJhZGdlOlwiPVwiLGhpZGRlbjpcIkBcIixiYWRnZVN0eWxlOlwiQFwiLFwiY2xhc3NcIjpcIkBcIn0sY29tcGlsZTpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlLHQsbixpKXt2YXIgbz1pWzBdLHI9aVsxXTt0WzBdLnJlbW92ZUF0dHJpYnV0ZShcInRpdGxlXCIpLGUuc2VsZWN0VGFiPWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxvLnNlbGVjdChyLiRzY29wZSwhMCl9LG4ubmdDbGlja3x8dC5vbihcImNsaWNrXCIsZnVuY3Rpb24odCl7ZS4kYXBwbHkoZnVuY3Rpb24oKXtlLnNlbGVjdFRhYih0KX0pfSksZS5pc0hpZGRlbj1mdW5jdGlvbigpe3JldHVyblwidHJ1ZVwiPT09bi5oaWRkZW58fG4uaGlkZGVuPT09ITA/ITA6ITF9LGUuZ2V0SWNvbk9uPWZ1bmN0aW9uKCl7cmV0dXJuIGUuaWNvbk9ufHxlLmljb259LGUuZ2V0SWNvbk9mZj1mdW5jdGlvbigpe3JldHVybiBlLmljb25PZmZ8fGUuaWNvbn0sZS5pc1RhYkFjdGl2ZT1mdW5jdGlvbigpe3JldHVybiBvLnNlbGVjdGVkVGFiKCk9PT1yLiRzY29wZX19fX19XSksdS5jb25zdGFudChcIiRpb25pY1RhYnNDb25maWdcIix7cG9zaXRpb246XCJcIix0eXBlOlwiXCJ9KSx1LmRpcmVjdGl2ZShcImlvblRhYnNcIixbXCIkaW9uaWNWaWV3U2VydmljZVwiLFwiJGlvbmljVGFic0RlbGVnYXRlXCIsXCIkaW9uaWNUYWJzQ29uZmlnXCIsZnVuY3Rpb24oZSx0LG4pe3JldHVybntyZXN0cmljdDpcIkVcIixzY29wZTohMCxjb250cm9sbGVyOlwiJGlvbmljVGFic1wiLGNvbXBpbGU6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaShlLG4saSxvKXt2YXIgcj10Ll9yZWdpc3Rlckluc3RhbmNlKG8saS5kZWxlZ2F0ZUhhbmRsZSk7ZS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZS4kdGFic0Rlc3Ryb3k9ITAscigpfSksby4kc2NvcGU9ZSxvLiRlbGVtZW50PW4sby4kdGFic0VsZW1lbnQ9dihuWzBdLnF1ZXJ5U2VsZWN0b3IoXCIudGFic1wiKSk7dmFyIGE9blswXTtlLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBhLmNsYXNzTmFtZX0sZnVuY3Rpb24odCl7dmFyIG49LTEhPT10LmluZGV4T2YoXCJ0YWJzLXRvcFwiKSxpPS0xIT09dC5pbmRleE9mKFwidGFicy1pdGVtLWhpZGVcIik7ZS4kaGFzVGFicz0hbiYmIWksZS4kaGFzVGFic1RvcD1uJiYhaX0pLGUuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2RlbGV0ZSBlLiRoYXNUYWJzLGRlbGV0ZSBlLiRoYXNUYWJzVG9wfSl9ZS5hZGRDbGFzcyhcInZpZXdcIik7dmFyIG89dignPGRpdiBjbGFzcz1cInRhYnNcIj48L2Rpdj4nKTtyZXR1cm4gby5hcHBlbmQoZS5jb250ZW50cygpKSxlLmFwcGVuZChvKSxlLmFkZENsYXNzKG4ucG9zaXRpb24pLGUuYWRkQ2xhc3Mobi50eXBlKSx7cHJlOml9fX19XSksdS5kaXJlY3RpdmUoXCJpb25Ub2dnbGVcIixbXCIkaW9uaWNHZXN0dXJlXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcGxhY2U6ITAscmVxdWlyZTpcIj9uZ01vZGVsXCIsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZTonPGRpdiBjbGFzcz1cIml0ZW0gaXRlbS10b2dnbGVcIj48ZGl2IG5nLXRyYW5zY2x1ZGU+PC9kaXY+PGxhYmVsIGNsYXNzPVwidG9nZ2xlXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiPjxkaXYgY2xhc3M9XCJ0cmFja1wiPjxkaXYgY2xhc3M9XCJoYW5kbGVcIj48L2Rpdj48L2Rpdj48L2xhYmVsPjwvZGl2PicsY29tcGlsZTpmdW5jdGlvbihlLHQpe3ZhciBuPWUuZmluZChcImlucHV0XCIpO3JldHVybiBmKHtuYW1lOnQubmFtZSxcIm5nLXZhbHVlXCI6dC5uZ1ZhbHVlLFwibmctbW9kZWxcIjp0Lm5nTW9kZWwsXCJuZy1jaGVja2VkXCI6dC5uZ0NoZWNrZWQsXCJuZy1kaXNhYmxlZFwiOnQubmdEaXNhYmxlZCxcIm5nLXRydWUtdmFsdWVcIjp0Lm5nVHJ1ZVZhbHVlLFwibmctZmFsc2UtdmFsdWVcIjp0Lm5nRmFsc2VWYWx1ZSxcIm5nLWNoYW5nZVwiOnQubmdDaGFuZ2V9LGZ1bmN0aW9uKGUsdCl7aChlKSYmbi5hdHRyKHQsZSl9KSx0LnRvZ2dsZUNsYXNzJiZlWzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwibGFiZWxcIilbMF0uY2xhc3NMaXN0LmFkZCh0LnRvZ2dsZUNsYXNzKSxmdW5jdGlvbihlLHQpe3ZhciBuLGksbyxyO249dFswXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxhYmVsXCIpWzBdLGk9bi5jaGlsZHJlblswXSxvPW4uY2hpbGRyZW5bMV0scj1vLmNoaWxkcmVuWzBdO3ZhciBhPXYoaSkuY29udHJvbGxlcihcIm5nTW9kZWxcIik7ZS50b2dnbGU9bmV3IGlvbmljLnZpZXdzLlRvZ2dsZSh7ZWw6bix0cmFjazpvLGNoZWNrYm94OmksaGFuZGxlOnIsb25DaGFuZ2U6ZnVuY3Rpb24oKXthLiRzZXRWaWV3VmFsdWUoaS5jaGVja2VkPyEwOiExKSxlLiRhcHBseSgpfX0pLGUuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2UudG9nZ2xlLmRlc3Ryb3koKX0pfX19fV0pLHUuZGlyZWN0aXZlKFwiaW9uVmlld1wiLFtcIiRpb25pY1ZpZXdTZXJ2aWNlXCIsXCIkcm9vdFNjb3BlXCIsXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixwcmlvcml0eToxZTMscmVxdWlyZTpbXCJeP2lvbk5hdkJhclwiLFwiXj9pb25Nb2RhbFwiXSxjb21waWxlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZENsYXNzKFwicGFuZVwiKSxlWzBdLnJlbW92ZUF0dHJpYnV0ZShcInRpdGxlXCIpLGZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBvPWlbMF0scj1pWzFdO2lmKG8mJiFyKXtpZihhbmd1bGFyLmlzRGVmaW5lZChuLnRpdGxlKSl7dmFyIGE9bi50aXRsZTtvLmNoYW5nZVRpdGxlKGEsZS4kbmF2RGlyZWN0aW9uKSxuLiRvYnNlcnZlKFwidGl0bGVcIixmdW5jdGlvbihlKXtvLnNldFRpdGxlKGUpfSl9dmFyIHM9YW5ndWxhci5pc0RlZmluZWQobi5oaWRlQmFja0J1dHRvbik/bi5oaWRlQmFja0J1dHRvbjpcImZhbHNlXCI7ZS4kd2F0Y2gocyxmdW5jdGlvbihlKXtvLnNob3dCYWNrQnV0dG9uKCFlKX0pO3ZhciBjPWFuZ3VsYXIuaXNEZWZpbmVkKG4uaGlkZU5hdkJhcik/bi5oaWRlTmF2QmFyOlwiZmFsc2VcIjtlLiR3YXRjaChjLGZ1bmN0aW9uKGUpe28uc2hvd0JhcighZSl9KX19fX19XSl9KCk7XG47IGJyb3dzZXJpZnlfc2hpbV9fZGVmaW5lX19tb2R1bGVfX2V4cG9ydF9fKHR5cGVvZiBpb25pYyAhPSBcInVuZGVmaW5lZFwiID8gaW9uaWMgOiB3aW5kb3cuaW9uaWMpO1xuXG59KS5jYWxsKGdsb2JhbCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmdW5jdGlvbiBkZWZpbmVFeHBvcnQoZXgpIHsgbW9kdWxlLmV4cG9ydHMgPSBleDsgfSk7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KSIsIi8qIVxuICogQ29weXJpZ2h0IDIwMTQgRHJpZnR5IENvLlxuICogaHR0cDovL2RyaWZ0eS5jb20vXG4gKlxuICogSW9uaWMsIHYxLjAuMC1iZXRhLjEzXG4gKiBBIHBvd2VyZnVsIEhUTUw1IG1vYmlsZSBhcHAgZnJhbWV3b3JrLlxuICogaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbS9cbiAqXG4gKiBCeSBAbWF4bHluY2gsIEBiZW5qc3BlcnJ5LCBAYWRhbWRicmFkbGV5IDwzXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLiBQbGVhc2Ugc2VlIExJQ0VOU0UgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICovXG5cbiFmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4pe3QhPT0hMT9rLmFkZEV2ZW50TGlzdGVuZXIoZSxqW2VdLG4pOmsucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLGpbZV0pfWZ1bmN0aW9uIHQoZSl7dmFyIHQ9VChlLnRhcmdldCksaT1FKHQpO2lmKGlvbmljLnRhcC5yZXF1aXJlc05hdGl2ZUNsaWNrKGkpfHx6KXJldHVybiExO3ZhciByPWlvbmljLnRhcC5wb2ludGVyQ29vcmQoZSk7bihcImNsaWNrXCIsaSxyLngsci55KSxfKGkpfWZ1bmN0aW9uIG4oZSx0LG4saSl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtyLmluaXRNb3VzZUV2ZW50KGUsITAsITAsd2luZG93LDEsMCwwLG4saSwhMSwhMSwhMSwhMSwwLG51bGwpLHIuaXNJb25pY1RhcD0hMCx0LmRpc3BhdGNoRXZlbnQocil9ZnVuY3Rpb24gaShlKXtyZXR1cm4oXCJzdWJtaXRcIiE9ZS50YXJnZXQudHlwZXx8MCE9PWUuZGV0YWlsKSYmKGlvbmljLnNjcm9sbC5pc1Njcm9sbGluZyYmaW9uaWMudGFwLmNvbnRhaW5zT3JJc1RleHRJbnB1dChlLnRhcmdldCl8fCFlLmlzSW9uaWNUYXAmJiFpb25pYy50YXAucmVxdWlyZXNOYXRpdmVDbGljayhlLnRhcmdldCkpPyhlLnN0b3BQcm9wYWdhdGlvbigpLGlvbmljLnRhcC5pc0xhYmVsV2l0aFRleHRJbnB1dChlLnRhcmdldCl8fGUucHJldmVudERlZmF1bHQoKSwhMSk6dm9pZCAwfWZ1bmN0aW9uIHIodCl7aWYoIXQuaXNJb25pY1RhcCYmIWQodCkpe2lmKFgpcmV0dXJuIHQuc3RvcFByb3BhZ2F0aW9uKCksaW9uaWMudGFwLmlzVGV4dElucHV0KHQudGFyZ2V0KSYmcT09PXQudGFyZ2V0fHwvXihzZWxlY3R8b3B0aW9uKSQvaS50ZXN0KHQudGFyZ2V0LnRhZ05hbWUpfHx0LnByZXZlbnREZWZhdWx0KCksITE7ej0hMSxGPWlvbmljLnRhcC5wb2ludGVyQ29vcmQodCksZShcIm1vdXNlbW92ZVwiKSxpb25pYy5hY3RpdmF0b3Iuc3RhcnQodCl9fWZ1bmN0aW9uIG8obil7cmV0dXJuIFg/KG4uc3RvcFByb3BhZ2F0aW9uKCksbi5wcmV2ZW50RGVmYXVsdCgpLCExKTpkKG4pfHwvXihzZWxlY3R8b3B0aW9uKSQvaS50ZXN0KG4udGFyZ2V0LnRhZ05hbWUpPyExOih2KG4pfHx0KG4pLGUoXCJtb3VzZW1vdmVcIiwhMSksaW9uaWMuYWN0aXZhdG9yLmVuZCgpLHZvaWQoej0hMSkpfWZ1bmN0aW9uIHModCl7cmV0dXJuIHYodCk/KGUoXCJtb3VzZW1vdmVcIiwhMSksaW9uaWMuYWN0aXZhdG9yLmVuZCgpLHo9ITAsITEpOnZvaWQgMH1mdW5jdGlvbiBhKHQpe2lmKCFkKHQpJiYoej0hMSxoKCksRj1pb25pYy50YXAucG9pbnRlckNvb3JkKHQpLGUoVSksaW9uaWMuYWN0aXZhdG9yLnN0YXJ0KHQpLGlvbmljLlBsYXRmb3JtLmlzSU9TKCkmJmlvbmljLnRhcC5pc0xhYmVsV2l0aFRleHRJbnB1dCh0LnRhcmdldCkpKXt2YXIgbj1FKFQodC50YXJnZXQpKTtuIT09WSYmdC5wcmV2ZW50RGVmYXVsdCgpfX1mdW5jdGlvbiBsKGUpe2QoZSl8fChoKCksdihlKXx8KHQoZSksL14oc2VsZWN0fG9wdGlvbikkL2kudGVzdChlLnRhcmdldC50YWdOYW1lKSYmZS5wcmV2ZW50RGVmYXVsdCgpKSxxPWUudGFyZ2V0LHUoKSl9ZnVuY3Rpb24gYyh0KXtyZXR1cm4gdih0KT8oej0hMCxlKFUsITEpLGlvbmljLmFjdGl2YXRvci5lbmQoKSwhMSk6dm9pZCAwfWZ1bmN0aW9uIHUoKXtlKFUsITEpLGlvbmljLmFjdGl2YXRvci5lbmQoKSx6PSExfWZ1bmN0aW9uIGgoKXtYPSEwLGNsZWFyVGltZW91dChIKSxIPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtYPSExfSwyZTMpfWZ1bmN0aW9uIGQoZSl7cmV0dXJuIGUuaXNUYXBIYW5kbGVkPyEwOihlLmlzVGFwSGFuZGxlZD0hMCxpb25pYy5zY3JvbGwuaXNTY3JvbGxpbmcmJmlvbmljLnRhcC5jb250YWluc09ySXNUZXh0SW5wdXQoZS50YXJnZXQpPyhlLnByZXZlbnREZWZhdWx0KCksITApOnZvaWQgMCl9ZnVuY3Rpb24gXyhlKXtXPW51bGw7dmFyIHQ9ITE7XCJTRUxFQ1RcIj09ZS50YWdOYW1lPyhuKFwibW91c2Vkb3duXCIsZSwwLDApLGUuZm9jdXMmJmUuZm9jdXMoKSx0PSEwKTpnKCk9PT1lP3Q9ITA6L14oaW5wdXR8dGV4dGFyZWEpJC9pLnRlc3QoZS50YWdOYW1lKXx8ZS5pc0NvbnRlbnRFZGl0YWJsZT8odD0hMCxlLmZvY3VzJiZlLmZvY3VzKCksZS52YWx1ZT1lLnZhbHVlLFgmJihXPWUpKTpmKCksdCYmKGcoZSksaW9uaWMudHJpZ2dlcihcImlvbmljLmZvY3VzaW5cIix7dGFyZ2V0OmV9LCEwKSl9ZnVuY3Rpb24gZigpe3ZhciBlPWcoKTtlJiYoL14oaW5wdXR8dGV4dGFyZWF8c2VsZWN0KSQvaS50ZXN0KGUudGFnTmFtZSl8fGUuaXNDb250ZW50RWRpdGFibGUpJiZlLmJsdXIoKSxnKG51bGwpfWZ1bmN0aW9uIHAoZSl7WCYmaW9uaWMudGFwLmlzVGV4dElucHV0KGcoKSkmJmlvbmljLnRhcC5pc1RleHRJbnB1dChXKSYmVyE9PWUudGFyZ2V0JiYoVy5mb2N1cygpLFc9bnVsbCksaW9uaWMuc2Nyb2xsLmlzU2Nyb2xsaW5nPSExfWZ1bmN0aW9uIG0oKXtnKG51bGwpfWZ1bmN0aW9uIGcoZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJihZPWUpLFl8fGRvY3VtZW50LmFjdGl2ZUVsZW1lbnR9ZnVuY3Rpb24gdihlKXtpZighZXx8MSE9PWUudGFyZ2V0Lm5vZGVUeXBlfHwhRnx8MD09PUYueCYmMD09PUYueSlyZXR1cm4hMTt2YXIgdD1pb25pYy50YXAucG9pbnRlckNvb3JkKGUpLG49ISghZS50YXJnZXQuY2xhc3NMaXN0fHwhZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKSxpPW4mZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnV0dG9uXCIpP1o6QjtyZXR1cm4gTWF0aC5hYnMoRi54LXQueCk+aXx8TWF0aC5hYnMoRi55LXQueSk+aX1mdW5jdGlvbiBUKGUsdCl7Zm9yKHZhciBuPWUsaT0wOzY+aSYmbjtpKyspe2lmKFwiTEFCRUxcIj09PW4udGFnTmFtZSlyZXR1cm4gbjtuPW4ucGFyZW50RWxlbWVudH1yZXR1cm4gdCE9PSExP2U6dm9pZCAwfWZ1bmN0aW9uIEUoZSl7aWYoZSYmXCJMQUJFTFwiPT09ZS50YWdOYW1lKXtpZihlLmNvbnRyb2wpcmV0dXJuIGUuY29udHJvbDtpZihlLnF1ZXJ5U2VsZWN0b3Ipe3ZhciB0PWUucXVlcnlTZWxlY3RvcihcImlucHV0LHRleHRhcmVhLHNlbGVjdFwiKTtpZih0KXJldHVybiB0fX1yZXR1cm4gZX1mdW5jdGlvbiBTKCl7QSgpPyh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm5hdGl2ZS5rZXlib2FyZHNob3dcIix3KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm5hdGl2ZS5rZXlib2FyZGhpZGVcIixMKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm5hdGl2ZS5zaG93a2V5Ym9hcmRcIix3KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm5hdGl2ZS5oaWRla2V5Ym9hcmRcIixMKSk6ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIixMKSxkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJpb25pYy5mb2N1c2luXCIsYiksZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLGIpLGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsRyksd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkP2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJNU1BvaW50ZXJEb3duXCIsUyk6ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixTKX1mdW5jdGlvbiB3KGUpe2NsZWFyVGltZW91dChLKSxpb25pYy5rZXlib2FyZC5oZWlnaHQ9ZS5rZXlib2FyZEhlaWdodH1mdW5jdGlvbiBiKGUpe2UudGFyZ2V0JiZpb25pYy50YXAuaXNUZXh0SW5wdXQoZS50YXJnZXQpJiYhaW9uaWMudGFwLmlzRGF0ZUlucHV0KGUudGFyZ2V0KSYmUChlLnRhcmdldCkmJihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLE0sITEpLGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wPTAsZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKFwiLnNjcm9sbC1jb250ZW50XCIpLnNjcm9sbFRvcD0wLCQ9ZS50YXJnZXQseShlKSl9ZnVuY3Rpb24geShlKXtjbGVhclRpbWVvdXQoSiksY2xlYXJUaW1lb3V0KEspLEo9c2V0VGltZW91dChmdW5jdGlvbigpe2lmKCEodHQrMzUwPkRhdGUubm93KCkpKXt0dD1EYXRlLm5vdygpO3ZhciB0LG49JC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPTA7UT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3Q9SSgpLGk+MTAmJihjbGVhckludGVydmFsKFEpLHQ9Mjc1KSx0JiYoY2xlYXJJbnRlcnZhbChRKSxEKGUudGFyZ2V0LG4udG9wLG4uYm90dG9tLGV0LHQpKSxpKyt9LDEwMCl9fSwzMil9ZnVuY3Rpb24gRChlLHQsbixpLHIpe3ZhciBvPXt0YXJnZXQ6ZSxlbGVtZW50VG9wOk1hdGgucm91bmQodCksZWxlbWVudEJvdHRvbTpNYXRoLnJvdW5kKG4pLGtleWJvYXJkSGVpZ2h0OnIsdmlld3BvcnRIZWlnaHQ6aX07cmV0dXJuIG8uaGFzUGx1Z2luPUEoKSxvLmNvbnRlbnRIZWlnaHQ9aS1yLG8uaXNFbGVtZW50VW5kZXJLZXlib2FyZD1vLmVsZW1lbnRCb3R0b20+by5jb250ZW50SGVpZ2h0LGlvbmljLmtleWJvYXJkLmlzT3Blbj0hMCwkPWUsaW9uaWMudHJpZ2dlcihcInNjcm9sbENoaWxkSW50b1ZpZXdcIixvLCEwKSxpb25pYy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQobnQpfSksd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkP2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJNU1BvaW50ZXJNb3ZlXCIsTiwhMSk6ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLE4sITEpLG99ZnVuY3Rpb24gTCgpe2NsZWFyVGltZW91dChLKSxLPXNldFRpbWVvdXQoaW9uaWMua2V5Ym9hcmQuaGlkZSwzNTApfWZ1bmN0aW9uIHgoKXtDKCk+ZXQmJihldD1DKCkpfWZ1bmN0aW9uIE0oZSl7aW9uaWMuc2Nyb2xsLmlzU2Nyb2xsaW5nJiZOKGUpfWZ1bmN0aW9uIE4oZSl7XCJURVhUQVJFQVwiIT09ZS50YXJnZXQudGFnTmFtZSYmZS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIEcoKXt2YXIgZT1DKCk7aWYoZT09PWV0KXZhciB0PTAsbj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3Q+MTAmJmNsZWFySW50ZXJ2YWwobiksZT1DKCksZSE9PWV0JiYoaW9uaWMua2V5Ym9hcmQubGFuZHNjYXBlPWV0PmU/ITA6ITEsZXQ9ZSxjbGVhckludGVydmFsKG4pKSx0Kyt9LDUwKTtlbHNlIGV0PWV9ZnVuY3Rpb24gSSgpe3JldHVybiBpb25pYy5rZXlib2FyZC5oZWlnaHQ/aW9uaWMua2V5Ym9hcmQuaGVpZ2h0OmlvbmljLlBsYXRmb3JtLmlzQW5kcm9pZCgpP2lvbmljLlBsYXRmb3JtLmlzRnVsbFNjcmVlbj8yNzU6QygpPGV0P2V0LUMoKTowOmlvbmljLlBsYXRmb3JtLmlzSU9TKCk/aW9uaWMua2V5Ym9hcmQubGFuZHNjYXBlPzIwNjppb25pYy5QbGF0Zm9ybS5pc1dlYlZpZXcoKT8yNjA6MjE2OjI3NX1mdW5jdGlvbiBDKCl7cmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodHx8c2NyZWVuLmhlaWdodH1mdW5jdGlvbiBQKGUpe2Zvcig7ZTspe2lmKGUuY2xhc3NMaXN0LmNvbnRhaW5zKGl0KSlyZXR1cm4hMDtlPWUucGFyZW50RWxlbWVudH1yZXR1cm4hMX1mdW5jdGlvbiBBKCl7cmV0dXJuISEod2luZG93LmNvcmRvdmEmJmNvcmRvdmEucGx1Z2lucyYmY29yZG92YS5wbHVnaW5zLktleWJvYXJkKX1mdW5jdGlvbiBPKCl7dmFyIGU7Zm9yKGU9MDtlPGRvY3VtZW50LmhlYWQuY2hpbGRyZW4ubGVuZ3RoO2UrKylpZihcInZpZXdwb3J0XCI9PWRvY3VtZW50LmhlYWQuY2hpbGRyZW5bZV0ubmFtZSl7cnQ9ZG9jdW1lbnQuaGVhZC5jaGlsZHJlbltlXTticmVha31pZihydCl7dmFyIHQsbj1ydC5jb250ZW50LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLFwiXCIpLnNwbGl0KFwiLFwiKTtmb3IoZT0wO2U8bi5sZW5ndGg7ZSsrKW5bZV0mJih0PW5bZV0uc3BsaXQoXCI9XCIpLG90W3RbMF1dPXQubGVuZ3RoPjE/dFsxXTpcIl9cIik7UigpfX1mdW5jdGlvbiBSKCl7dmFyIGU9b3Qud2lkdGgsdD1vdC5oZWlnaHQsbj1pb25pYy5QbGF0Zm9ybSxpPW4udmVyc2lvbigpLHI9XCJkZXZpY2Utd2lkdGhcIixvPVwiZGV2aWNlLWhlaWdodFwiLHM9aW9uaWMudmlld3BvcnQub3JpZW50YXRpb24oKTtkZWxldGUgb3QuaGVpZ2h0LG90LndpZHRoPXIsbi5pc0lQYWQoKT9pPjc/ZGVsZXRlIG90LndpZHRoOm4uaXNXZWJWaWV3KCk/OTA9PXM/b3QuaGVpZ2h0PVwiMFwiOjc9PWkmJihvdC5oZWlnaHQ9byk6Nz5pJiYob3QuaGVpZ2h0PVwiMFwiKTpuLmlzSU9TKCkmJihuLmlzV2ViVmlldygpP2k+Nz9kZWxldGUgb3Qud2lkdGg6Nz5pP3QmJihvdC5oZWlnaHQ9XCIwXCIpOjc9PWkmJihvdC5oZWlnaHQ9byk6Nz5pJiZ0JiYob3QuaGVpZ2h0PVwiMFwiKSksKGUhPT1vdC53aWR0aHx8dCE9PW90LmhlaWdodCkmJlYoKX1mdW5jdGlvbiBWKCl7dmFyIGUsdD1bXTtmb3IoZSBpbiBvdClvdFtlXSYmdC5wdXNoKGUrKFwiX1wiPT1vdFtlXT9cIlwiOlwiPVwiK290W2VdKSk7cnQuY29udGVudD10LmpvaW4oXCIsIFwiKX13aW5kb3cuaW9uaWM9d2luZG93LmlvbmljfHx7fSx3aW5kb3cuaW9uaWMudmlld3M9e30sd2luZG93LmlvbmljLnZlcnNpb249XCIxLjAuMC1iZXRhLjEzXCIsZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoKXtvPSEwO2Zvcih2YXIgZT0wO2U8ci5sZW5ndGg7ZSsrKW4ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJbZV0pO3I9W10sdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGkpfXZhciByPVtdLG89XCJjb21wbGV0ZVwiPT09dC5yZWFkeVN0YXRlfHxcImludGVyYWN0aXZlXCI9PT10LnJlYWR5U3RhdGU7b3x8dC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGkpLGUuX3JBRj1mdW5jdGlvbigpe3JldHVybiBlLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZS53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGUubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbih0KXtlLnNldFRpbWVvdXQodCwxNil9fSgpO3ZhciBzPWUuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fGUud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGUubW96Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGUud2Via2l0Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lO24uRG9tVXRpbD17cmVxdWVzdEFuaW1hdGlvbkZyYW1lOmZ1bmN0aW9uKHQpe3JldHVybiBlLl9yQUYodCl9LGNhbmNlbEFuaW1hdGlvbkZyYW1lOmZ1bmN0aW9uKGUpe3MoZSl9LGFuaW1hdGlvbkZyYW1lVGhyb3R0bGU6ZnVuY3Rpb24oZSl7dmFyIHQsaSxyO3JldHVybiBmdW5jdGlvbigpe3Q9YXJndW1lbnRzLHI9dGhpcyxpfHwoaT0hMCxuLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe2UuYXBwbHkocix0KSxpPSExfSkpfX0sZ2V0UG9zaXRpb25JblBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm57bGVmdDplLm9mZnNldExlZnQsdG9wOmUub2Zmc2V0VG9wfX0scmVhZHk6ZnVuY3Rpb24oZSl7bz9uLnJlcXVlc3RBbmltYXRpb25GcmFtZShlKTpyLnB1c2goZSl9LGdldFRleHRCb3VuZHM6ZnVuY3Rpb24obil7aWYodC5jcmVhdGVSYW5nZSl7dmFyIGk9dC5jcmVhdGVSYW5nZSgpO2lmKGkuc2VsZWN0Tm9kZUNvbnRlbnRzKG4pLGkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KXt2YXIgcj1pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKHIpe3ZhciBvPWUuc2Nyb2xsWCxzPWUuc2Nyb2xsWTtyZXR1cm57dG9wOnIudG9wK3MsbGVmdDpyLmxlZnQrbyxyaWdodDpyLmxlZnQrbytyLndpZHRoLGJvdHRvbTpyLnRvcCtzK3IuaGVpZ2h0LHdpZHRoOnIud2lkdGgsaGVpZ2h0OnIuaGVpZ2h0fX19fXJldHVybiBudWxsfSxnZXRDaGlsZEluZGV4OmZ1bmN0aW9uKGUsdCl7aWYodClmb3IodmFyIG4saT1lLnBhcmVudE5vZGUuY2hpbGRyZW4scj0wLG89MCxzPWkubGVuZ3RoO3M+cjtyKyspaWYobj1pW3JdLG4ubm9kZU5hbWUmJm4ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09dCl7aWYobj09ZSlyZXR1cm4gbztvKyt9cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUucGFyZW50Tm9kZS5jaGlsZHJlbikuaW5kZXhPZihlKX0sc3dhcE5vZGVzOmZ1bmN0aW9uKGUsdCl7dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHQpfSxlbGVtZW50SXNEZXNjZW5kYW50OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1lO2Rve2lmKGk9PT10KXJldHVybiEwO2k9aS5wYXJlbnROb2RlfXdoaWxlKGkmJmkhPT1uKTtyZXR1cm4hMX0sZ2V0UGFyZW50V2l0aENsYXNzOmZ1bmN0aW9uKGUsdCxuKXtmb3Iobj1ufHwxMDtlLnBhcmVudE5vZGUmJm4tLTspe2lmKGUucGFyZW50Tm9kZS5jbGFzc0xpc3QmJmUucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnModCkpcmV0dXJuIGUucGFyZW50Tm9kZTtlPWUucGFyZW50Tm9kZX1yZXR1cm4gbnVsbH0sZ2V0UGFyZW50T3JTZWxmV2l0aENsYXNzOmZ1bmN0aW9uKGUsdCxuKXtmb3Iobj1ufHwxMDtlJiZuLS07KXtpZihlLmNsYXNzTGlzdCYmZS5jbGFzc0xpc3QuY29udGFpbnModCkpcmV0dXJuIGU7ZT1lLnBhcmVudE5vZGV9cmV0dXJuIG51bGx9LHJlY3RDb250YWluczpmdW5jdGlvbihlLHQsbixpLHIsbyl7cmV0dXJuIG4+ZXx8ZT5yPyExOmk+dHx8dD5vPyExOiEwfX0sbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9bi5Eb21VdGlsLnJlcXVlc3RBbmltYXRpb25GcmFtZSxuLmNhbmNlbEFuaW1hdGlvbkZyYW1lPW4uRG9tVXRpbC5jYW5jZWxBbmltYXRpb25GcmFtZSxuLmFuaW1hdGlvbkZyYW1lVGhyb3R0bGU9bi5Eb21VdGlsLmFuaW1hdGlvbkZyYW1lVGhyb3R0bGV9KHdpbmRvdyxkb2N1bWVudCxpb25pYyksZnVuY3Rpb24oZSl7ZS5DdXN0b21FdmVudD1mdW5jdGlvbigpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudClyZXR1cm4gQ3VzdG9tRXZlbnQ7dmFyIGU9ZnVuY3Rpb24oZSx0KXt2YXIgbjt0PXR8fHtidWJibGVzOiExLGNhbmNlbGFibGU6ITEsZGV0YWlsOnZvaWQgMH07dHJ5e249ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKSxuLmluaXRDdXN0b21FdmVudChlLHQuYnViYmxlcyx0LmNhbmNlbGFibGUsdC5kZXRhaWwpfWNhdGNoKGkpe249ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtmb3IodmFyIHIgaW4gdCluW3JdPXRbcl07bi5pbml0RXZlbnQoZSx0LmJ1YmJsZXMsdC5jYW5jZWxhYmxlKX1yZXR1cm4gbn07cmV0dXJuIGUucHJvdG90eXBlPXdpbmRvdy5FdmVudC5wcm90b3R5cGUsZX0oKSxlLkV2ZW50Q29udHJvbGxlcj17VklSVFVBTElaRURfRVZFTlRTOltcInRhcFwiLFwic3dpcGVcIixcInN3aXBlcmlnaHRcIixcInN3aXBlbGVmdFwiLFwiZHJhZ1wiLFwiaG9sZFwiLFwicmVsZWFzZVwiXSx0cmlnZ2VyOmZ1bmN0aW9uKHQsbixpLHIpe3ZhciBvPW5ldyBlLkN1c3RvbUV2ZW50KHQse2RldGFpbDpuLGJ1YmJsZXM6ISFpLGNhbmNlbGFibGU6ISFyfSk7biYmbi50YXJnZXQmJm4udGFyZ2V0LmRpc3BhdGNoRXZlbnQmJm4udGFyZ2V0LmRpc3BhdGNoRXZlbnQobyl8fHdpbmRvdy5kaXNwYXRjaEV2ZW50KG8pfSxvbjpmdW5jdGlvbih0LG4saSl7Zm9yKHZhciByPWl8fHdpbmRvdyxvPTAscz10aGlzLlZJUlRVQUxJWkVEX0VWRU5UUy5sZW5ndGg7cz5vO28rKylpZih0PT10aGlzLlZJUlRVQUxJWkVEX0VWRU5UU1tvXSl7dmFyIGE9bmV3IGUuR2VzdHVyZShpKTtyZXR1cm4gYS5vbih0LG4pLGF9ci5hZGRFdmVudExpc3RlbmVyKHQsbil9LG9mZjpmdW5jdGlvbihlLHQsbil7bi5yZW1vdmVFdmVudExpc3RlbmVyKGUsdCl9LG9uR2VzdHVyZTpmdW5jdGlvbih0LG4saSxyKXt2YXIgbz1uZXcgZS5HZXN0dXJlKGkscik7cmV0dXJuIG8ub24odCxuKSxvfSxvZmZHZXN0dXJlOmZ1bmN0aW9uKGUsdCxuKXtlLm9mZih0LG4pfSxoYW5kbGVQb3BTdGF0ZTpmdW5jdGlvbigpe319LGUub249ZnVuY3Rpb24oKXtlLkV2ZW50Q29udHJvbGxlci5vbi5hcHBseShlLkV2ZW50Q29udHJvbGxlcixhcmd1bWVudHMpfSxlLm9mZj1mdW5jdGlvbigpe2UuRXZlbnRDb250cm9sbGVyLm9mZi5hcHBseShlLkV2ZW50Q29udHJvbGxlcixhcmd1bWVudHMpfSxlLnRyaWdnZXI9ZS5FdmVudENvbnRyb2xsZXIudHJpZ2dlcixlLm9uR2VzdHVyZT1mdW5jdGlvbigpe3JldHVybiBlLkV2ZW50Q29udHJvbGxlci5vbkdlc3R1cmUuYXBwbHkoZS5FdmVudENvbnRyb2xsZXIub25HZXN0dXJlLGFyZ3VtZW50cyl9LGUub2ZmR2VzdHVyZT1mdW5jdGlvbigpe3JldHVybiBlLkV2ZW50Q29udHJvbGxlci5vZmZHZXN0dXJlLmFwcGx5KGUuRXZlbnRDb250cm9sbGVyLm9mZkdlc3R1cmUsYXJndW1lbnRzKX19KHdpbmRvdy5pb25pYyksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe2lmKCFlLkdlc3R1cmVzLlJFQURZKXtlLkdlc3R1cmVzLmV2ZW50LmRldGVybWluZUV2ZW50VHlwZXMoKTtmb3IodmFyIHQgaW4gZS5HZXN0dXJlcy5nZXN0dXJlcyllLkdlc3R1cmVzLmdlc3R1cmVzLmhhc093blByb3BlcnR5KHQpJiZlLkdlc3R1cmVzLmRldGVjdGlvbi5yZWdpc3RlcihlLkdlc3R1cmVzLmdlc3R1cmVzW3RdKTtlLkdlc3R1cmVzLmV2ZW50Lm9uVG91Y2goZS5HZXN0dXJlcy5ET0NVTUVOVCxlLkdlc3R1cmVzLkVWRU5UX01PVkUsZS5HZXN0dXJlcy5kZXRlY3Rpb24uZGV0ZWN0KSxlLkdlc3R1cmVzLmV2ZW50Lm9uVG91Y2goZS5HZXN0dXJlcy5ET0NVTUVOVCxlLkdlc3R1cmVzLkVWRU5UX0VORCxlLkdlc3R1cmVzLmRldGVjdGlvbi5kZXRlY3QpLGUuR2VzdHVyZXMuUkVBRFk9ITB9fWUuR2VzdHVyZT1mdW5jdGlvbih0LG4pe3JldHVybiBuZXcgZS5HZXN0dXJlcy5JbnN0YW5jZSh0LG58fHt9KX0sZS5HZXN0dXJlcz17fSxlLkdlc3R1cmVzLmRlZmF1bHRzPXtzdG9wX2Jyb3dzZXJfYmVoYXZpb3I6XCJkaXNhYmxlLXVzZXItYmVoYXZpb3JcIn0sZS5HZXN0dXJlcy5IQVNfUE9JTlRFUkVWRU5UUz13aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkfHx3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQsZS5HZXN0dXJlcy5IQVNfVE9VQ0hFVkVOVFM9XCJvbnRvdWNoc3RhcnRcImluIHdpbmRvdyxlLkdlc3R1cmVzLk1PQklMRV9SRUdFWD0vbW9iaWxlfHRhYmxldHxpcChhZHxob25lfG9kKXxhbmRyb2lkfHNpbGsvaSxlLkdlc3R1cmVzLk5PX01PVVNFRVZFTlRTPWUuR2VzdHVyZXMuSEFTX1RPVUNIRVZFTlRTJiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaChlLkdlc3R1cmVzLk1PQklMRV9SRUdFWCksZS5HZXN0dXJlcy5FVkVOVF9UWVBFUz17fSxlLkdlc3R1cmVzLkRJUkVDVElPTl9ET1dOPVwiZG93blwiLGUuR2VzdHVyZXMuRElSRUNUSU9OX0xFRlQ9XCJsZWZ0XCIsZS5HZXN0dXJlcy5ESVJFQ1RJT05fVVA9XCJ1cFwiLGUuR2VzdHVyZXMuRElSRUNUSU9OX1JJR0hUPVwicmlnaHRcIixlLkdlc3R1cmVzLlBPSU5URVJfTU9VU0U9XCJtb3VzZVwiLGUuR2VzdHVyZXMuUE9JTlRFUl9UT1VDSD1cInRvdWNoXCIsZS5HZXN0dXJlcy5QT0lOVEVSX1BFTj1cInBlblwiLGUuR2VzdHVyZXMuRVZFTlRfU1RBUlQ9XCJzdGFydFwiLGUuR2VzdHVyZXMuRVZFTlRfTU9WRT1cIm1vdmVcIixlLkdlc3R1cmVzLkVWRU5UX0VORD1cImVuZFwiLGUuR2VzdHVyZXMuRE9DVU1FTlQ9d2luZG93LmRvY3VtZW50LGUuR2VzdHVyZXMucGx1Z2lucz17fSxlLkdlc3R1cmVzLlJFQURZPSExLGUuR2VzdHVyZXMuSW5zdGFuY2U9ZnVuY3Rpb24obixpKXt2YXIgcj10aGlzO2lmKG51bGwhPT1uKXJldHVybiB0KCksdGhpcy5lbGVtZW50PW4sdGhpcy5lbmFibGVkPSEwLHRoaXMub3B0aW9ucz1lLkdlc3R1cmVzLnV0aWxzLmV4dGVuZChlLkdlc3R1cmVzLnV0aWxzLmV4dGVuZCh7fSxlLkdlc3R1cmVzLmRlZmF1bHRzKSxpfHx7fSksdGhpcy5vcHRpb25zLnN0b3BfYnJvd3Nlcl9iZWhhdmlvciYmZS5HZXN0dXJlcy51dGlscy5zdG9wRGVmYXVsdEJyb3dzZXJCZWhhdmlvcih0aGlzLmVsZW1lbnQsdGhpcy5vcHRpb25zLnN0b3BfYnJvd3Nlcl9iZWhhdmlvciksZS5HZXN0dXJlcy5ldmVudC5vblRvdWNoKG4sZS5HZXN0dXJlcy5FVkVOVF9TVEFSVCxmdW5jdGlvbih0KXtyLmVuYWJsZWQmJmUuR2VzdHVyZXMuZGV0ZWN0aW9uLnN0YXJ0RGV0ZWN0KHIsdCl9KSx0aGlzfSxlLkdlc3R1cmVzLkluc3RhbmNlLnByb3RvdHlwZT17b246ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49ZS5zcGxpdChcIiBcIiksaT0wO2k8bi5sZW5ndGg7aSsrKXRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKG5baV0sdCwhMSk7cmV0dXJuIHRoaXN9LG9mZjpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1lLnNwbGl0KFwiIFwiKSxpPTA7aTxuLmxlbmd0aDtpKyspdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIobltpXSx0LCExKTtyZXR1cm4gdGhpc30sdHJpZ2dlcjpmdW5jdGlvbih0LG4pe3ZhciBpPWUuR2VzdHVyZXMuRE9DVU1FTlQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtpLmluaXRFdmVudCh0LCEwLCEwKSxpLmdlc3R1cmU9bjt2YXIgcj10aGlzLmVsZW1lbnQ7cmV0dXJuIGUuR2VzdHVyZXMudXRpbHMuaGFzUGFyZW50KG4udGFyZ2V0LHIpJiYocj1uLnRhcmdldCksci5kaXNwYXRjaEV2ZW50KGkpLHRoaXN9LGVuYWJsZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lbmFibGVkPWUsdGhpc319O3ZhciBuPW51bGwsaT0hMSxyPSExO2UuR2VzdHVyZXMuZXZlbnQ9e2JpbmREb206ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgaT10LnNwbGl0KFwiIFwiKSxyPTA7cjxpLmxlbmd0aDtyKyspZS5hZGRFdmVudExpc3RlbmVyKGlbcl0sbiwhMSl9LG9uVG91Y2g6ZnVuY3Rpb24odCxvLHMpe3ZhciBhPXRoaXM7dGhpcy5iaW5kRG9tKHQsZS5HZXN0dXJlcy5FVkVOVF9UWVBFU1tvXSxmdW5jdGlvbihsKXt2YXIgYz1sLnR5cGUudG9Mb3dlckNhc2UoKTtpZighYy5tYXRjaCgvbW91c2UvKXx8IXIpe2MubWF0Y2goL3RvdWNoLyl8fGMubWF0Y2goL3BvaW50ZXJkb3duLyl8fGMubWF0Y2goL21vdXNlLykmJjE9PT1sLndoaWNoP2k9ITA6Yy5tYXRjaCgvbW91c2UvKSYmMSE9PWwud2hpY2gmJihpPSExKSxjLm1hdGNoKC90b3VjaHxwb2ludGVyLykmJihyPSEwKTt2YXIgdT0wO2kmJihlLkdlc3R1cmVzLkhBU19QT0lOVEVSRVZFTlRTJiZvIT1lLkdlc3R1cmVzLkVWRU5UX0VORD91PWUuR2VzdHVyZXMuUG9pbnRlckV2ZW50LnVwZGF0ZVBvaW50ZXIobyxsKTpjLm1hdGNoKC90b3VjaC8pP3U9bC50b3VjaGVzLmxlbmd0aDpyfHwodT1jLm1hdGNoKC91cC8pPzA6MSksdT4wJiZvPT1lLkdlc3R1cmVzLkVWRU5UX0VORD9vPWUuR2VzdHVyZXMuRVZFTlRfTU9WRTp1fHwobz1lLkdlc3R1cmVzLkVWRU5UX0VORCksKHV8fG51bGw9PT1uKSYmKG49bCkscy5jYWxsKGUuR2VzdHVyZXMuZGV0ZWN0aW9uLGEuY29sbGVjdEV2ZW50RGF0YSh0LG8sYS5nZXRUb3VjaExpc3QobixvKSxsKSksZS5HZXN0dXJlcy5IQVNfUE9JTlRFUkVWRU5UUyYmbz09ZS5HZXN0dXJlcy5FVkVOVF9FTkQmJih1PWUuR2VzdHVyZXMuUG9pbnRlckV2ZW50LnVwZGF0ZVBvaW50ZXIobyxsKSkpLHV8fChuPW51bGwsaT0hMSxyPSExLGUuR2VzdHVyZXMuUG9pbnRlckV2ZW50LnJlc2V0KCkpfX0pfSxkZXRlcm1pbmVFdmVudFR5cGVzOmZ1bmN0aW9uKCl7dmFyIHQ7dD1lLkdlc3R1cmVzLkhBU19QT0lOVEVSRVZFTlRTP2UuR2VzdHVyZXMuUG9pbnRlckV2ZW50LmdldEV2ZW50cygpOmUuR2VzdHVyZXMuTk9fTU9VU0VFVkVOVFM/W1widG91Y2hzdGFydFwiLFwidG91Y2htb3ZlXCIsXCJ0b3VjaGVuZCB0b3VjaGNhbmNlbFwiXTpbXCJ0b3VjaHN0YXJ0IG1vdXNlZG93blwiLFwidG91Y2htb3ZlIG1vdXNlbW92ZVwiLFwidG91Y2hlbmQgdG91Y2hjYW5jZWwgbW91c2V1cFwiXSxlLkdlc3R1cmVzLkVWRU5UX1RZUEVTW2UuR2VzdHVyZXMuRVZFTlRfU1RBUlRdPXRbMF0sZS5HZXN0dXJlcy5FVkVOVF9UWVBFU1tlLkdlc3R1cmVzLkVWRU5UX01PVkVdPXRbMV0sZS5HZXN0dXJlcy5FVkVOVF9UWVBFU1tlLkdlc3R1cmVzLkVWRU5UX0VORF09dFsyXX0sZ2V0VG91Y2hMaXN0OmZ1bmN0aW9uKHQpe3JldHVybiBlLkdlc3R1cmVzLkhBU19QT0lOVEVSRVZFTlRTP2UuR2VzdHVyZXMuUG9pbnRlckV2ZW50LmdldFRvdWNoTGlzdCgpOnQudG91Y2hlcz90LnRvdWNoZXM6KHQuaWRlbnRpZmllcj0xLFt0XSl9LGNvbGxlY3RFdmVudERhdGE6ZnVuY3Rpb24odCxuLGkscil7dmFyIG89ZS5HZXN0dXJlcy5QT0lOVEVSX1RPVUNIO3JldHVybihyLnR5cGUubWF0Y2goL21vdXNlLyl8fGUuR2VzdHVyZXMuUG9pbnRlckV2ZW50Lm1hdGNoVHlwZShlLkdlc3R1cmVzLlBPSU5URVJfTU9VU0UscikpJiYobz1lLkdlc3R1cmVzLlBPSU5URVJfTU9VU0UpLHtjZW50ZXI6ZS5HZXN0dXJlcy51dGlscy5nZXRDZW50ZXIoaSksdGltZVN0YW1wOihuZXcgRGF0ZSkuZ2V0VGltZSgpLHRhcmdldDpyLnRhcmdldCx0b3VjaGVzOmksZXZlbnRUeXBlOm4scG9pbnRlclR5cGU6byxzcmNFdmVudDpyLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dGhpcy5zcmNFdmVudC5wcmV2ZW50TWFuaXB1bGF0aW9uJiZ0aGlzLnNyY0V2ZW50LnByZXZlbnRNYW5pcHVsYXRpb24oKSx0aGlzLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0fSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wRGV0ZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuR2VzdHVyZXMuZGV0ZWN0aW9uLnN0b3BEZXRlY3QoKX19fX0sZS5HZXN0dXJlcy5Qb2ludGVyRXZlbnQ9e3BvaW50ZXJzOnt9LGdldFRvdWNoTGlzdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1bXTtyZXR1cm4gT2JqZWN0LmtleXMoZS5wb2ludGVycykuc29ydCgpLmZvckVhY2goZnVuY3Rpb24obil7dC5wdXNoKGUucG9pbnRlcnNbbl0pfSksdH0sdXBkYXRlUG9pbnRlcjpmdW5jdGlvbih0LG4pe3JldHVybiB0PT1lLkdlc3R1cmVzLkVWRU5UX0VORD90aGlzLnBvaW50ZXJzPXt9OihuLmlkZW50aWZpZXI9bi5wb2ludGVySWQsdGhpcy5wb2ludGVyc1tuLnBvaW50ZXJJZF09biksT2JqZWN0LmtleXModGhpcy5wb2ludGVycykubGVuZ3RofSxtYXRjaFR5cGU6ZnVuY3Rpb24odCxuKXtpZighbi5wb2ludGVyVHlwZSlyZXR1cm4hMTt2YXIgaT17fTtyZXR1cm4gaVtlLkdlc3R1cmVzLlBPSU5URVJfTU9VU0VdPW4ucG9pbnRlclR5cGU9PW4uTVNQT0lOVEVSX1RZUEVfTU9VU0V8fG4ucG9pbnRlclR5cGU9PWUuR2VzdHVyZXMuUE9JTlRFUl9NT1VTRSxpW2UuR2VzdHVyZXMuUE9JTlRFUl9UT1VDSF09bi5wb2ludGVyVHlwZT09bi5NU1BPSU5URVJfVFlQRV9UT1VDSHx8bi5wb2ludGVyVHlwZT09ZS5HZXN0dXJlcy5QT0lOVEVSX1RPVUNILGlbZS5HZXN0dXJlcy5QT0lOVEVSX1BFTl09bi5wb2ludGVyVHlwZT09bi5NU1BPSU5URVJfVFlQRV9QRU58fG4ucG9pbnRlclR5cGU9PWUuR2VzdHVyZXMuUE9JTlRFUl9QRU4saVt0XX0sZ2V0RXZlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuW1wicG9pbnRlcmRvd24gTVNQb2ludGVyRG93blwiLFwicG9pbnRlcm1vdmUgTVNQb2ludGVyTW92ZVwiLFwicG9pbnRlcnVwIHBvaW50ZXJjYW5jZWwgTVNQb2ludGVyVXAgTVNQb2ludGVyQ2FuY2VsXCJdfSxyZXNldDpmdW5jdGlvbigpe3RoaXMucG9pbnRlcnM9e319fSxlLkdlc3R1cmVzLnV0aWxzPXtleHRlbmQ6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgaSBpbiB0KXZvaWQgMCE9PWVbaV0mJm58fChlW2ldPXRbaV0pO3JldHVybiBlfSxoYXNQYXJlbnQ6ZnVuY3Rpb24oZSx0KXtmb3IoO2U7KXtpZihlPT10KXJldHVybiEwO2U9ZS5wYXJlbnROb2RlfXJldHVybiExfSxnZXRDZW50ZXI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49W10saT0wLHI9ZS5sZW5ndGg7cj5pO2krKyl0LnB1c2goZVtpXS5wYWdlWCksbi5wdXNoKGVbaV0ucGFnZVkpO3JldHVybntwYWdlWDooTWF0aC5taW4uYXBwbHkoTWF0aCx0KStNYXRoLm1heC5hcHBseShNYXRoLHQpKS8yLHBhZ2VZOihNYXRoLm1pbi5hcHBseShNYXRoLG4pK01hdGgubWF4LmFwcGx5KE1hdGgsbikpLzJ9fSxnZXRWZWxvY2l0eTpmdW5jdGlvbihlLHQsbil7cmV0dXJue3g6TWF0aC5hYnModC9lKXx8MCx5Ok1hdGguYWJzKG4vZSl8fDB9fSxnZXRBbmdsZTpmdW5jdGlvbihlLHQpe3ZhciBuPXQucGFnZVktZS5wYWdlWSxpPXQucGFnZVgtZS5wYWdlWDtyZXR1cm4gMTgwKk1hdGguYXRhbjIobixpKS9NYXRoLlBJfSxnZXREaXJlY3Rpb246ZnVuY3Rpb24odCxuKXt2YXIgaT1NYXRoLmFicyh0LnBhZ2VYLW4ucGFnZVgpLHI9TWF0aC5hYnModC5wYWdlWS1uLnBhZ2VZKTtyZXR1cm4gaT49cj90LnBhZ2VYLW4ucGFnZVg+MD9lLkdlc3R1cmVzLkRJUkVDVElPTl9MRUZUOmUuR2VzdHVyZXMuRElSRUNUSU9OX1JJR0hUOnQucGFnZVktbi5wYWdlWT4wP2UuR2VzdHVyZXMuRElSRUNUSU9OX1VQOmUuR2VzdHVyZXMuRElSRUNUSU9OX0RPV059LGdldERpc3RhbmNlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dC5wYWdlWC1lLnBhZ2VYLGk9dC5wYWdlWS1lLnBhZ2VZO3JldHVybiBNYXRoLnNxcnQobipuK2kqaSl9LGdldFNjYWxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubGVuZ3RoPj0yJiZ0Lmxlbmd0aD49Mj90aGlzLmdldERpc3RhbmNlKHRbMF0sdFsxXSkvdGhpcy5nZXREaXN0YW5jZShlWzBdLGVbMV0pOjF9LGdldFJvdGF0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubGVuZ3RoPj0yJiZ0Lmxlbmd0aD49Mj90aGlzLmdldEFuZ2xlKHRbMV0sdFswXSktdGhpcy5nZXRBbmdsZShlWzFdLGVbMF0pOjB9LGlzVmVydGljYWw6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PWUuR2VzdHVyZXMuRElSRUNUSU9OX1VQfHx0PT1lLkdlc3R1cmVzLkRJUkVDVElPTl9ET1dOfSxzdG9wRGVmYXVsdEJyb3dzZXJCZWhhdmlvcjpmdW5jdGlvbihlLHQpe2UmJmUuY2xhc3NMaXN0JiYoZS5jbGFzc0xpc3QuYWRkKHQpLGUub25zZWxlY3RzdGFydD1mdW5jdGlvbigpe3JldHVybiExfSl9fSxlLkdlc3R1cmVzLmRldGVjdGlvbj17Z2VzdHVyZXM6W10sY3VycmVudDpudWxsLHByZXZpb3VzOm51bGwsc3RvcHBlZDohMSxzdGFydERldGVjdDpmdW5jdGlvbih0LG4pe3RoaXMuY3VycmVudHx8KHRoaXMuc3RvcHBlZD0hMSx0aGlzLmN1cnJlbnQ9e2luc3Q6dCxzdGFydEV2ZW50OmUuR2VzdHVyZXMudXRpbHMuZXh0ZW5kKHt9LG4pLGxhc3RFdmVudDohMSxuYW1lOlwiXCJ9LHRoaXMuZGV0ZWN0KG4pKX0sZGV0ZWN0OmZ1bmN0aW9uKHQpe2lmKHRoaXMuY3VycmVudCYmIXRoaXMuc3RvcHBlZCl7dD10aGlzLmV4dGVuZEV2ZW50RGF0YSh0KTtmb3IodmFyIG49dGhpcy5jdXJyZW50Lmluc3Qub3B0aW9ucyxpPTAscj10aGlzLmdlc3R1cmVzLmxlbmd0aDtyPmk7aSsrKXt2YXIgbz10aGlzLmdlc3R1cmVzW2ldO2lmKCF0aGlzLnN0b3BwZWQmJm5bby5uYW1lXSE9PSExJiZvLmhhbmRsZXIuY2FsbChvLHQsdGhpcy5jdXJyZW50Lmluc3QpPT09ITEpe3RoaXMuc3RvcERldGVjdCgpO2JyZWFrfX1yZXR1cm4gdGhpcy5jdXJyZW50JiYodGhpcy5jdXJyZW50Lmxhc3RFdmVudD10KSx0LmV2ZW50VHlwZT09ZS5HZXN0dXJlcy5FVkVOVF9FTkQmJiF0LnRvdWNoZXMubGVuZ3RoLTEmJnRoaXMuc3RvcERldGVjdCgpLHR9fSxzdG9wRGV0ZWN0OmZ1bmN0aW9uKCl7dGhpcy5wcmV2aW91cz1lLkdlc3R1cmVzLnV0aWxzLmV4dGVuZCh7fSx0aGlzLmN1cnJlbnQpLHRoaXMuY3VycmVudD1udWxsLHRoaXMuc3RvcHBlZD0hMH0sZXh0ZW5kRXZlbnREYXRhOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMuY3VycmVudC5zdGFydEV2ZW50O2lmKG4mJih0LnRvdWNoZXMubGVuZ3RoIT1uLnRvdWNoZXMubGVuZ3RofHx0LnRvdWNoZXM9PT1uLnRvdWNoZXMpKXtuLnRvdWNoZXM9W107Zm9yKHZhciBpPTAscj10LnRvdWNoZXMubGVuZ3RoO3I+aTtpKyspbi50b3VjaGVzLnB1c2goZS5HZXN0dXJlcy51dGlscy5leHRlbmQoe30sdC50b3VjaGVzW2ldKSl9dmFyIG89dC50aW1lU3RhbXAtbi50aW1lU3RhbXAscz10LmNlbnRlci5wYWdlWC1uLmNlbnRlci5wYWdlWCxhPXQuY2VudGVyLnBhZ2VZLW4uY2VudGVyLnBhZ2VZLGw9ZS5HZXN0dXJlcy51dGlscy5nZXRWZWxvY2l0eShvLHMsYSk7cmV0dXJuIGUuR2VzdHVyZXMudXRpbHMuZXh0ZW5kKHQse2RlbHRhVGltZTpvLGRlbHRhWDpzLGRlbHRhWTphLHZlbG9jaXR5WDpsLngsdmVsb2NpdHlZOmwueSxkaXN0YW5jZTplLkdlc3R1cmVzLnV0aWxzLmdldERpc3RhbmNlKG4uY2VudGVyLHQuY2VudGVyKSxhbmdsZTplLkdlc3R1cmVzLnV0aWxzLmdldEFuZ2xlKG4uY2VudGVyLHQuY2VudGVyKSxkaXJlY3Rpb246ZS5HZXN0dXJlcy51dGlscy5nZXREaXJlY3Rpb24obi5jZW50ZXIsdC5jZW50ZXIpLHNjYWxlOmUuR2VzdHVyZXMudXRpbHMuZ2V0U2NhbGUobi50b3VjaGVzLHQudG91Y2hlcykscm90YXRpb246ZS5HZXN0dXJlcy51dGlscy5nZXRSb3RhdGlvbihuLnRvdWNoZXMsdC50b3VjaGVzKSxzdGFydEV2ZW50Om59KSx0fSxyZWdpc3RlcjpmdW5jdGlvbih0KXt2YXIgbj10LmRlZmF1bHRzfHx7fTtyZXR1cm4gdm9pZCAwPT09blt0Lm5hbWVdJiYoblt0Lm5hbWVdPSEwKSxlLkdlc3R1cmVzLnV0aWxzLmV4dGVuZChlLkdlc3R1cmVzLmRlZmF1bHRzLG4sITApLHQuaW5kZXg9dC5pbmRleHx8MWUzLHRoaXMuZ2VzdHVyZXMucHVzaCh0KSx0aGlzLmdlc3R1cmVzLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5pbmRleDx0LmluZGV4Py0xOmUuaW5kZXg+dC5pbmRleD8xOjB9KSx0aGlzLmdlc3R1cmVzfX0sZS5HZXN0dXJlcy5nZXN0dXJlcz1lLkdlc3R1cmVzLmdlc3R1cmVzfHx7fSxlLkdlc3R1cmVzLmdlc3R1cmVzLkhvbGQ9e25hbWU6XCJob2xkXCIsaW5kZXg6MTAsZGVmYXVsdHM6e2hvbGRfdGltZW91dDo1MDAsaG9sZF90aHJlc2hvbGQ6MX0sdGltZXI6bnVsbCxoYW5kbGVyOmZ1bmN0aW9uKHQsbil7c3dpdGNoKHQuZXZlbnRUeXBlKXtjYXNlIGUuR2VzdHVyZXMuRVZFTlRfU1RBUlQ6Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpLGUuR2VzdHVyZXMuZGV0ZWN0aW9uLmN1cnJlbnQubmFtZT10aGlzLm5hbWUsdGhpcy50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XCJob2xkXCI9PWUuR2VzdHVyZXMuZGV0ZWN0aW9uLmN1cnJlbnQubmFtZSYmKGUudGFwLmNhbmNlbENsaWNrKCksbi50cmlnZ2VyKFwiaG9sZFwiLHQpKX0sbi5vcHRpb25zLmhvbGRfdGltZW91dCk7YnJlYWs7Y2FzZSBlLkdlc3R1cmVzLkVWRU5UX01PVkU6dC5kaXN0YW5jZT5uLm9wdGlvbnMuaG9sZF90aHJlc2hvbGQmJmNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTticmVhaztjYXNlIGUuR2VzdHVyZXMuRVZFTlRfRU5EOmNsZWFyVGltZW91dCh0aGlzLnRpbWVyKX19fSxlLkdlc3R1cmVzLmdlc3R1cmVzLlRhcD17bmFtZTpcInRhcFwiLGluZGV4OjEwMCxkZWZhdWx0czp7dGFwX21heF90b3VjaHRpbWU6MjUwLHRhcF9tYXhfZGlzdGFuY2U6MTAsdGFwX2Fsd2F5czohMCxkb3VibGV0YXBfZGlzdGFuY2U6MjAsZG91YmxldGFwX2ludGVydmFsOjMwMH0saGFuZGxlcjpmdW5jdGlvbih0LG4pe2lmKHQuZXZlbnRUeXBlPT1lLkdlc3R1cmVzLkVWRU5UX0VORCYmXCJ0b3VjaGNhbmNlbFwiIT10LnNyY0V2ZW50LnR5cGUpe3ZhciBpPWUuR2VzdHVyZXMuZGV0ZWN0aW9uLnByZXZpb3VzLHI9ITE7aWYodC5kZWx0YVRpbWU+bi5vcHRpb25zLnRhcF9tYXhfdG91Y2h0aW1lfHx0LmRpc3RhbmNlPm4ub3B0aW9ucy50YXBfbWF4X2Rpc3RhbmNlKXJldHVybjtpJiZcInRhcFwiPT1pLm5hbWUmJnQudGltZVN0YW1wLWkubGFzdEV2ZW50LnRpbWVTdGFtcDxuLm9wdGlvbnMuZG91YmxldGFwX2ludGVydmFsJiZ0LmRpc3RhbmNlPG4ub3B0aW9ucy5kb3VibGV0YXBfZGlzdGFuY2UmJihuLnRyaWdnZXIoXCJkb3VibGV0YXBcIix0KSxyPSEwKSwoIXJ8fG4ub3B0aW9ucy50YXBfYWx3YXlzKSYmKGUuR2VzdHVyZXMuZGV0ZWN0aW9uLmN1cnJlbnQubmFtZT1cInRhcFwiLG4udHJpZ2dlcihcInRhcFwiLHQpKX19fSxlLkdlc3R1cmVzLmdlc3R1cmVzLlN3aXBlPXtuYW1lOlwic3dpcGVcIixpbmRleDo0MCxkZWZhdWx0czp7c3dpcGVfbWF4X3RvdWNoZXM6MSxzd2lwZV92ZWxvY2l0eTouN30saGFuZGxlcjpmdW5jdGlvbih0LG4pe2lmKHQuZXZlbnRUeXBlPT1lLkdlc3R1cmVzLkVWRU5UX0VORCl7aWYobi5vcHRpb25zLnN3aXBlX21heF90b3VjaGVzPjAmJnQudG91Y2hlcy5sZW5ndGg+bi5vcHRpb25zLnN3aXBlX21heF90b3VjaGVzKXJldHVybjsodC52ZWxvY2l0eVg+bi5vcHRpb25zLnN3aXBlX3ZlbG9jaXR5fHx0LnZlbG9jaXR5WT5uLm9wdGlvbnMuc3dpcGVfdmVsb2NpdHkpJiYobi50cmlnZ2VyKHRoaXMubmFtZSx0KSxuLnRyaWdnZXIodGhpcy5uYW1lK3QuZGlyZWN0aW9uLHQpKX19fSxlLkdlc3R1cmVzLmdlc3R1cmVzLkRyYWc9e25hbWU6XCJkcmFnXCIsaW5kZXg6NTAsZGVmYXVsdHM6e2RyYWdfbWluX2Rpc3RhbmNlOjEwLGNvcnJlY3RfZm9yX2RyYWdfbWluX2Rpc3RhbmNlOiEwLGRyYWdfbWF4X3RvdWNoZXM6MSxkcmFnX2Jsb2NrX2hvcml6b250YWw6ITAsZHJhZ19ibG9ja192ZXJ0aWNhbDohMCxkcmFnX2xvY2tfdG9fYXhpczohMSxkcmFnX2xvY2tfbWluX2Rpc3RhbmNlOjI1fSx0cmlnZ2VyZWQ6ITEsaGFuZGxlcjpmdW5jdGlvbih0LG4pe2lmKGUuR2VzdHVyZXMuZGV0ZWN0aW9uLmN1cnJlbnQubmFtZSE9dGhpcy5uYW1lJiZ0aGlzLnRyaWdnZXJlZClyZXR1cm4gbi50cmlnZ2VyKHRoaXMubmFtZStcImVuZFwiLHQpLHZvaWQodGhpcy50cmlnZ2VyZWQ9ITEpO2lmKCEobi5vcHRpb25zLmRyYWdfbWF4X3RvdWNoZXM+MCYmdC50b3VjaGVzLmxlbmd0aD5uLm9wdGlvbnMuZHJhZ19tYXhfdG91Y2hlcykpc3dpdGNoKHQuZXZlbnRUeXBlKXtjYXNlIGUuR2VzdHVyZXMuRVZFTlRfU1RBUlQ6dGhpcy50cmlnZ2VyZWQ9ITE7YnJlYWs7Y2FzZSBlLkdlc3R1cmVzLkVWRU5UX01PVkU6aWYodC5kaXN0YW5jZTxuLm9wdGlvbnMuZHJhZ19taW5fZGlzdGFuY2UmJmUuR2VzdHVyZXMuZGV0ZWN0aW9uLmN1cnJlbnQubmFtZSE9dGhpcy5uYW1lKXJldHVybjtpZihlLkdlc3R1cmVzLmRldGVjdGlvbi5jdXJyZW50Lm5hbWUhPXRoaXMubmFtZSYmKGUuR2VzdHVyZXMuZGV0ZWN0aW9uLmN1cnJlbnQubmFtZT10aGlzLm5hbWUsbi5vcHRpb25zLmNvcnJlY3RfZm9yX2RyYWdfbWluX2Rpc3RhbmNlKSl7dmFyIGk9TWF0aC5hYnMobi5vcHRpb25zLmRyYWdfbWluX2Rpc3RhbmNlL3QuZGlzdGFuY2UpO2UuR2VzdHVyZXMuZGV0ZWN0aW9uLmN1cnJlbnQuc3RhcnRFdmVudC5jZW50ZXIucGFnZVgrPXQuZGVsdGFYKmksZS5HZXN0dXJlcy5kZXRlY3Rpb24uY3VycmVudC5zdGFydEV2ZW50LmNlbnRlci5wYWdlWSs9dC5kZWx0YVkqaSx0PWUuR2VzdHVyZXMuZGV0ZWN0aW9uLmV4dGVuZEV2ZW50RGF0YSh0KX0oZS5HZXN0dXJlcy5kZXRlY3Rpb24uY3VycmVudC5sYXN0RXZlbnQuZHJhZ19sb2NrZWRfdG9fYXhpc3x8bi5vcHRpb25zLmRyYWdfbG9ja190b19heGlzJiZuLm9wdGlvbnMuZHJhZ19sb2NrX21pbl9kaXN0YW5jZTw9dC5kaXN0YW5jZSkmJih0LmRyYWdfbG9ja2VkX3RvX2F4aXM9ITApO3ZhciByPWUuR2VzdHVyZXMuZGV0ZWN0aW9uLmN1cnJlbnQubGFzdEV2ZW50LmRpcmVjdGlvbjt0LmRyYWdfbG9ja2VkX3RvX2F4aXMmJnIhPT10LmRpcmVjdGlvbiYmKHQuZGlyZWN0aW9uPWUuR2VzdHVyZXMudXRpbHMuaXNWZXJ0aWNhbChyKT90LmRlbHRhWTwwP2UuR2VzdHVyZXMuRElSRUNUSU9OX1VQOmUuR2VzdHVyZXMuRElSRUNUSU9OX0RPV046dC5kZWx0YVg8MD9lLkdlc3R1cmVzLkRJUkVDVElPTl9MRUZUOmUuR2VzdHVyZXMuRElSRUNUSU9OX1JJR0hUKSx0aGlzLnRyaWdnZXJlZHx8KG4udHJpZ2dlcih0aGlzLm5hbWUrXCJzdGFydFwiLHQpLHRoaXMudHJpZ2dlcmVkPSEwKSxuLnRyaWdnZXIodGhpcy5uYW1lLHQpLG4udHJpZ2dlcih0aGlzLm5hbWUrdC5kaXJlY3Rpb24sdCksKG4ub3B0aW9ucy5kcmFnX2Jsb2NrX3ZlcnRpY2FsJiZlLkdlc3R1cmVzLnV0aWxzLmlzVmVydGljYWwodC5kaXJlY3Rpb24pfHxuLm9wdGlvbnMuZHJhZ19ibG9ja19ob3Jpem9udGFsJiYhZS5HZXN0dXJlcy51dGlscy5pc1ZlcnRpY2FsKHQuZGlyZWN0aW9uKSkmJnQucHJldmVudERlZmF1bHQoKTticmVhaztjYXNlIGUuR2VzdHVyZXMuRVZFTlRfRU5EOnRoaXMudHJpZ2dlcmVkJiZuLnRyaWdnZXIodGhpcy5uYW1lK1wiZW5kXCIsdCksdGhpcy50cmlnZ2VyZWQ9ITF9fX0sZS5HZXN0dXJlcy5nZXN0dXJlcy5UcmFuc2Zvcm09e25hbWU6XCJ0cmFuc2Zvcm1cIixpbmRleDo0NSxkZWZhdWx0czp7dHJhbnNmb3JtX21pbl9zY2FsZTouMDEsdHJhbnNmb3JtX21pbl9yb3RhdGlvbjoxLHRyYW5zZm9ybV9hbHdheXNfYmxvY2s6ITF9LHRyaWdnZXJlZDohMSxoYW5kbGVyOmZ1bmN0aW9uKHQsbil7aWYoZS5HZXN0dXJlcy5kZXRlY3Rpb24uY3VycmVudC5uYW1lIT10aGlzLm5hbWUmJnRoaXMudHJpZ2dlcmVkKXJldHVybiBuLnRyaWdnZXIodGhpcy5uYW1lK1wiZW5kXCIsdCksdm9pZCh0aGlzLnRyaWdnZXJlZD0hMSk7aWYoISh0LnRvdWNoZXMubGVuZ3RoPDIpKXN3aXRjaChuLm9wdGlvbnMudHJhbnNmb3JtX2Fsd2F5c19ibG9jayYmdC5wcmV2ZW50RGVmYXVsdCgpLHQuZXZlbnRUeXBlKXtjYXNlIGUuR2VzdHVyZXMuRVZFTlRfU1RBUlQ6dGhpcy50cmlnZ2VyZWQ9ITE7YnJlYWs7Y2FzZSBlLkdlc3R1cmVzLkVWRU5UX01PVkU6dmFyIGk9TWF0aC5hYnMoMS10LnNjYWxlKSxyPU1hdGguYWJzKHQucm90YXRpb24pO2lmKGk8bi5vcHRpb25zLnRyYW5zZm9ybV9taW5fc2NhbGUmJnI8bi5vcHRpb25zLnRyYW5zZm9ybV9taW5fcm90YXRpb24pcmV0dXJuO2UuR2VzdHVyZXMuZGV0ZWN0aW9uLmN1cnJlbnQubmFtZT10aGlzLm5hbWUsdGhpcy50cmlnZ2VyZWR8fChuLnRyaWdnZXIodGhpcy5uYW1lK1wic3RhcnRcIix0KSx0aGlzLnRyaWdnZXJlZD0hMCksbi50cmlnZ2VyKHRoaXMubmFtZSx0KSxyPm4ub3B0aW9ucy50cmFuc2Zvcm1fbWluX3JvdGF0aW9uJiZuLnRyaWdnZXIoXCJyb3RhdGVcIix0KSxpPm4ub3B0aW9ucy50cmFuc2Zvcm1fbWluX3NjYWxlJiYobi50cmlnZ2VyKFwicGluY2hcIix0KSxuLnRyaWdnZXIoXCJwaW5jaFwiKyh0LnNjYWxlPDE/XCJpblwiOlwib3V0XCIpLHQpKTticmVhaztjYXNlIGUuR2VzdHVyZXMuRVZFTlRfRU5EOnRoaXMudHJpZ2dlcmVkJiZuLnRyaWdnZXIodGhpcy5uYW1lK1wiZW5kXCIsdCksdGhpcy50cmlnZ2VyZWQ9ITF9fX0sZS5HZXN0dXJlcy5nZXN0dXJlcy5Ub3VjaD17bmFtZTpcInRvdWNoXCIsaW5kZXg6LTEvMCxkZWZhdWx0czp7cHJldmVudF9kZWZhdWx0OiExLHByZXZlbnRfbW91c2VldmVudHM6ITF9LGhhbmRsZXI6ZnVuY3Rpb24odCxuKXtyZXR1cm4gbi5vcHRpb25zLnByZXZlbnRfbW91c2VldmVudHMmJnQucG9pbnRlclR5cGU9PWUuR2VzdHVyZXMuUE9JTlRFUl9NT1VTRT92b2lkIHQuc3RvcERldGVjdCgpOihuLm9wdGlvbnMucHJldmVudF9kZWZhdWx0JiZ0LnByZXZlbnREZWZhdWx0KCksdm9pZCh0LmV2ZW50VHlwZT09ZS5HZXN0dXJlcy5FVkVOVF9TVEFSVCYmbi50cmlnZ2VyKHRoaXMubmFtZSx0KSkpfX0sZS5HZXN0dXJlcy5nZXN0dXJlcy5SZWxlYXNlPXtuYW1lOlwicmVsZWFzZVwiLGluZGV4OjEvMCxoYW5kbGVyOmZ1bmN0aW9uKHQsbil7dC5ldmVudFR5cGU9PWUuR2VzdHVyZXMuRVZFTlRfRU5EJiZuLnRyaWdnZXIodGhpcy5uYW1lLHQpfX19KHdpbmRvdy5pb25pYyksZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoKXtuLlBsYXRmb3JtLmlzV2ViVmlldygpP3QuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsciwhMSk6cigpLGwmJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixpLCExKX1mdW5jdGlvbiByKCl7bi5QbGF0Zm9ybS5pc1JlYWR5PSEwLG4uUGxhdGZvcm0uZGV0ZWN0KCk7Zm9yKHZhciBlPTA7ZTxoLmxlbmd0aDtlKyspaFtlXSgpO2g9W10sbi50cmlnZ2VyKFwicGxhdGZvcm1yZWFkeVwiLHt0YXJnZXQ6dH0pLG4ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7dC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJwbGF0Zm9ybS1yZWFkeVwiKX0pfXZhciBvPVwiaW9zXCIscz1cImFuZHJvaWRcIixhPVwid2luZG93c3Bob25lXCI7bi5QbGF0Zm9ybT17bmF2aWdhdG9yOmUubmF2aWdhdG9yLGlzUmVhZHk6ITEsaXNGdWxsU2NyZWVuOiExLHBsYXRmb3JtczpudWxsLGdyYWRlOm51bGwsdWE6bmF2aWdhdG9yLnVzZXJBZ2VudCxyZWFkeTpmdW5jdGlvbihlKXt0aGlzLmlzUmVhZHk/ZSgpOmgucHVzaChlKX0sZGV0ZWN0OmZ1bmN0aW9uKCl7bi5QbGF0Zm9ybS5fY2hlY2tQbGF0Zm9ybXMoKSxuLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe2Zvcih2YXIgZT0wO2U8bi5QbGF0Zm9ybS5wbGF0Zm9ybXMubGVuZ3RoO2UrKyl0LmJvZHkuY2xhc3NMaXN0LmFkZChcInBsYXRmb3JtLVwiK24uUGxhdGZvcm0ucGxhdGZvcm1zW2VdKX0pfSxzZXRHcmFkZTpmdW5jdGlvbihlKXt2YXIgaT10aGlzLmdyYWRlO3RoaXMuZ3JhZGU9ZSxuLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe2kmJnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwiZ3JhZGUtXCIraSksdC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJncmFkZS1cIitlKX0pfSxkZXZpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZXZpY2V8fHt9fSxfY2hlY2tQbGF0Zm9ybXM6ZnVuY3Rpb24oKXt0aGlzLnBsYXRmb3Jtcz1bXTt2YXIgZT1cImFcIjt0aGlzLmlzV2ViVmlldygpPyh0aGlzLnBsYXRmb3Jtcy5wdXNoKFwid2Vidmlld1wiKSx0aGlzLnBsYXRmb3Jtcy5wdXNoKFwiY29yZG92YVwiKSk6dGhpcy5wbGF0Zm9ybXMucHVzaChcImJyb3dzZXJcIiksdGhpcy5pc0lQYWQoKSYmdGhpcy5wbGF0Zm9ybXMucHVzaChcImlwYWRcIik7dmFyIHQ9dGhpcy5wbGF0Zm9ybSgpO2lmKHQpe3RoaXMucGxhdGZvcm1zLnB1c2godCk7dmFyIG49dGhpcy52ZXJzaW9uKCk7aWYobil7dmFyIGk9bi50b1N0cmluZygpO2kuaW5kZXhPZihcIi5cIik+MD9pPWkucmVwbGFjZShcIi5cIixcIl9cIik6aSs9XCJfMFwiLHRoaXMucGxhdGZvcm1zLnB1c2godCtpLnNwbGl0KFwiX1wiKVswXSksdGhpcy5wbGF0Zm9ybXMucHVzaCh0K2kpLHRoaXMuaXNBbmRyb2lkKCkmJjQuND5uP2U9ND5uP1wiY1wiOlwiYlwiOnRoaXMuaXNXaW5kb3dzUGhvbmUoKSYmKGU9XCJiXCIpfX10aGlzLnNldEdyYWRlKGUpfSxpc1dlYlZpZXc6ZnVuY3Rpb24oKXtyZXR1cm4hKCFlLmNvcmRvdmEmJiFlLlBob25lR2FwJiYhZS5waG9uZWdhcCl9LGlzSVBhZDpmdW5jdGlvbigpe3JldHVybi9pUGFkL2kudGVzdChuLlBsYXRmb3JtLm5hdmlnYXRvci5wbGF0Zm9ybSk/ITA6L2lQYWQvaS50ZXN0KHRoaXMudWEpfSxpc0lPUzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzKG8pfSxpc0FuZHJvaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pcyhzKX0saXNXaW5kb3dzUGhvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pcyhhKX0scGxhdGZvcm06ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PWMmJnRoaXMuc2V0UGxhdGZvcm0odGhpcy5kZXZpY2UoKS5wbGF0Zm9ybSksY30sc2V0UGxhdGZvcm06ZnVuY3Rpb24oZSl7Yz1cInVuZGVmaW5lZFwiIT10eXBlb2YgZSYmbnVsbCE9PWUmJmUubGVuZ3RoP2UudG9Mb3dlckNhc2UoKTp0aGlzLnVhLmluZGV4T2YoXCJBbmRyb2lkXCIpPjA/czp0aGlzLnVhLmluZGV4T2YoXCJpUGhvbmVcIik+LTF8fHRoaXMudWEuaW5kZXhPZihcImlQYWRcIik+LTF8fHRoaXMudWEuaW5kZXhPZihcImlQb2RcIik+LTE/bzp0aGlzLnVhLmluZGV4T2YoXCJXaW5kb3dzIFBob25lXCIpPi0xP2E6bi5QbGF0Zm9ybS5uYXZpZ2F0b3IucGxhdGZvcm0mJm5hdmlnYXRvci5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiIFwiKVswXXx8XCJcIn0sdmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dSYmdGhpcy5zZXRWZXJzaW9uKHRoaXMuZGV2aWNlKCkudmVyc2lvbiksdX0sc2V0VmVyc2lvbjpmdW5jdGlvbihlKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgZSYmbnVsbCE9PWUmJihlPWUuc3BsaXQoXCIuXCIpLGU9cGFyc2VGbG9hdChlWzBdK1wiLlwiKyhlLmxlbmd0aD4xP2VbMV06MCkpLCFpc05hTihlKSkpcmV0dXJuIHZvaWQodT1lKTt1PTA7dmFyIHQ9dGhpcy5wbGF0Zm9ybSgpLG49e2FuZHJvaWQ6L0FuZHJvaWQgKFxcZCspLihcXGQrKT8vLGlvczovT1MgKFxcZCspXyhcXGQrKT8vLHdpbmRvd3NwaG9uZTovV2luZG93cyBQaG9uZSAoXFxkKykuKFxcZCspPy99O25bdF0mJihlPXRoaXMudWEubWF0Y2goblt0XSksZSYmZS5sZW5ndGg+MiYmKHU9cGFyc2VGbG9hdChlWzFdK1wiLlwiK2VbMl0pKSl9LGlzOmZ1bmN0aW9uKGUpe2lmKGU9ZS50b0xvd2VyQ2FzZSgpLHRoaXMucGxhdGZvcm1zKWZvcih2YXIgdD0wO3Q8dGhpcy5wbGF0Zm9ybXMubGVuZ3RoO3QrKylpZih0aGlzLnBsYXRmb3Jtc1t0XT09PWUpcmV0dXJuITA7dmFyIG49dGhpcy5wbGF0Zm9ybSgpO3JldHVybiBuP249PT1lLnRvTG93ZXJDYXNlKCk6dGhpcy51YS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZSk+PTB9LGV4aXRBcHA6ZnVuY3Rpb24oKXt0aGlzLnJlYWR5KGZ1bmN0aW9uKCl7bmF2aWdhdG9yLmFwcCYmbmF2aWdhdG9yLmFwcC5leGl0QXBwJiZuYXZpZ2F0b3IuYXBwLmV4aXRBcHAoKX0pfSxzaG93U3RhdHVzQmFyOmZ1bmN0aW9uKGkpe3RoaXMuX3Nob3dTdGF0dXNCYXI9aSx0aGlzLnJlYWR5KGZ1bmN0aW9uKCl7bi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtuLlBsYXRmb3JtLl9zaG93U3RhdHVzQmFyPyhlLlN0YXR1c0JhciYmZS5TdGF0dXNCYXIuc2hvdygpLHQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwic3RhdHVzLWJhci1oaWRlXCIpKTooZS5TdGF0dXNCYXImJmUuU3RhdHVzQmFyLmhpZGUoKSx0LmJvZHkuY2xhc3NMaXN0LmFkZChcInN0YXR1cy1iYXItaGlkZVwiKSl9KX0pfSxmdWxsU2NyZWVuOmZ1bmN0aW9uKGUsaSl7dGhpcy5pc0Z1bGxTY3JlZW49ZSE9PSExLG4uRG9tVXRpbC5yZWFkeShmdW5jdGlvbigpe24ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7cGFuZXM9dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicGFuZVwiKTtmb3IodmFyIGU9MDtlPHBhbmVzLmxlbmd0aDtlKyspcGFuZXNbZV0uc3R5bGUuaGVpZ2h0PXBhbmVzW2VdLm9mZnNldEhlaWdodCtcInB4XCI7bi5QbGF0Zm9ybS5pc0Z1bGxTY3JlZW4/dC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJmdWxsc2NyZWVuXCIpOnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwiZnVsbHNjcmVlblwiKX0pLG4uUGxhdGZvcm0uc2hvd1N0YXR1c0JhcihpPT09ITApfSl9fTt2YXIgbCxjPW51bGwsdT1udWxsLGg9W107XCJjb21wbGV0ZVwiPT09dC5yZWFkeVN0YXRlP2koKToobD0hMCxlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsaSwhMSkpLGUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixpLCExKX0odGhpcyxkb2N1bWVudCxpb25pYyksZnVuY3Rpb24oZSx0KXtcInVzZSBzdHJpY3RcIjt0LkNTUz17fSxmdW5jdGlvbigpe3ZhciBuLGk9W1wid2Via2l0VHJhbnNmb3JtXCIsXCJ0cmFuc2Zvcm1cIixcIi13ZWJraXQtdHJhbnNmb3JtXCIsXCJ3ZWJraXQtdHJhbnNmb3JtXCIsXCItbW96LXRyYW5zZm9ybVwiLFwibW96LXRyYW5zZm9ybVwiLFwiTW96VHJhbnNmb3JtXCIsXCJtb3pUcmFuc2Zvcm1cIixcIm1zVHJhbnNmb3JtXCJdO2ZvcihuPTA7bjxpLmxlbmd0aDtuKyspaWYodm9pZCAwIT09ZS5kb2N1bWVudEVsZW1lbnQuc3R5bGVbaVtuXV0pe3QuQ1NTLlRSQU5TRk9STT1pW25dO2JyZWFrfWZvcihpPVtcIndlYmtpdFRyYW5zaXRpb25cIixcIm1velRyYW5zaXRpb25cIixcIm1zVHJhbnNpdGlvblwiLFwidHJhbnNpdGlvblwiXSxuPTA7bjxpLmxlbmd0aDtuKyspaWYodm9pZCAwIT09ZS5kb2N1bWVudEVsZW1lbnQuc3R5bGVbaVtuXV0pe3QuQ1NTLlRSQU5TSVRJT049aVtuXTticmVha319KCksXCJjbGFzc0xpc3RcImluIGUuZG9jdW1lbnRFbGVtZW50fHwhT2JqZWN0LmRlZmluZVByb3BlcnR5fHxcInVuZGVmaW5lZFwiPT10eXBlb2YgSFRNTEVsZW1lbnR8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShIVE1MRWxlbWVudC5wcm90b3R5cGUsXCJjbGFzc0xpc3RcIix7Z2V0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbixpPXQuY2xhc3NOYW1lLnNwbGl0KC9cXHMrLyk7Zm9yKG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWUoaSxpLmluZGV4T2YoYXJndW1lbnRzW25dKSxhcmd1bWVudHNbbl0pO3QuY2xhc3NOYW1lPWkuam9pbihcIiBcIil9fXZhciB0PXRoaXM7cmV0dXJue2FkZDplKGZ1bmN0aW9uKGUsdCxuKXt+dHx8ZS5wdXNoKG4pfSkscmVtb3ZlOmUoZnVuY3Rpb24oZSx0KXt+dCYmZS5zcGxpY2UodCwxKX0pLHRvZ2dsZTplKGZ1bmN0aW9uKGUsdCxuKXt+dD9lLnNwbGljZSh0LDEpOmUucHVzaChuKX0pLGNvbnRhaW5zOmZ1bmN0aW9uKGUpe3JldHVybiEhfnQuY2xhc3NOYW1lLnNwbGl0KC9cXHMrLykuaW5kZXhPZihlKX0saXRlbTpmdW5jdGlvbihlKXtyZXR1cm4gdC5jbGFzc05hbWUuc3BsaXQoL1xccysvKVtlXXx8bnVsbH19fX0pfShkb2N1bWVudCxpb25pYyk7dmFyIGssWSxYLEgseixGLFcscSxVPVwidG91Y2htb3ZlXCIsQj02LFo9NTAsaj17Y2xpY2s6aSxtb3VzZWRvd246cixtb3VzZXVwOm8sbW91c2Vtb3ZlOnMsdG91Y2hzdGFydDphLHRvdWNoZW5kOmwsdG91Y2hjYW5jZWw6dSx0b3VjaG1vdmU6Yyxwb2ludGVyZG93bjphLHBvaW50ZXJ1cDpsLHBvaW50ZXJjYW5jZWw6dSxwb2ludGVybW92ZTpjLE1TUG9pbnRlckRvd246YSxNU1BvaW50ZXJVcDpsLE1TUG9pbnRlckNhbmNlbDp1LE1TUG9pbnRlck1vdmU6Yyxmb2N1c2luOnAsZm9jdXNvdXQ6bX07aW9uaWMudGFwPXtyZWdpc3RlcjpmdW5jdGlvbih0KXtyZXR1cm4gaz10LGUoXCJjbGlja1wiLCEwLCEwKSxlKFwibW91c2V1cFwiKSxlKFwibW91c2Vkb3duXCIpLHdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQ/KGUoXCJwb2ludGVyZG93blwiKSxlKFwicG9pbnRlcnVwXCIpLGUoXCJwb2ludGNhbmNlbFwiKSxVPVwicG9pbnRlcm1vdmVcIik6d2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkPyhlKFwiTVNQb2ludGVyRG93blwiKSxlKFwiTVNQb2ludGVyVXBcIiksZShcIk1TUG9pbnRlckNhbmNlbFwiKSxVPVwiTVNQb2ludGVyTW92ZVwiKTooZShcInRvdWNoc3RhcnRcIiksZShcInRvdWNoZW5kXCIpLGUoXCJ0b3VjaGNhbmNlbFwiKSksZShcImZvY3VzaW5cIiksZShcImZvY3Vzb3V0XCIpLGZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIGopZSh0LCExKTtrPW51bGwsWT1udWxsLFg9ITEsej0hMSxGPW51bGx9fSxpZ25vcmVTY3JvbGxTdGFydDpmdW5jdGlvbihlKXtyZXR1cm4gZS5kZWZhdWx0UHJldmVudGVkfHwvXihmaWxlfHJhbmdlKSQvaS50ZXN0KGUudGFyZ2V0LnR5cGUpfHxcInRydWVcIj09KGUudGFyZ2V0LmRhdGFzZXQ/ZS50YXJnZXQuZGF0YXNldC5wcmV2ZW50U2Nyb2xsOmUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtcHJldmVudC1zY3JvbGxcIikpfHwhIS9eKG9iamVjdHxlbWJlZCkkL2kudGVzdChlLnRhcmdldC50YWdOYW1lKXx8aW9uaWMudGFwLmlzRWxlbWVudFRhcERpc2FibGVkKGUudGFyZ2V0KX0saXNUZXh0SW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuISFlJiYoXCJURVhUQVJFQVwiPT1lLnRhZ05hbWV8fFwidHJ1ZVwiPT09ZS5jb250ZW50RWRpdGFibGV8fFwiSU5QVVRcIj09ZS50YWdOYW1lJiYhL14ocmFkaW98Y2hlY2tib3h8cmFuZ2V8ZmlsZXxzdWJtaXR8cmVzZXQpJC9pLnRlc3QoZS50eXBlKSl9LGlzRGF0ZUlucHV0OmZ1bmN0aW9uKGUpe3JldHVybiEhZSYmXCJJTlBVVFwiPT1lLnRhZ05hbWUmJi9eKGRhdGV8dGltZXxkYXRldGltZS1sb2NhbHxtb250aHx3ZWVrKSQvaS50ZXN0KGUudHlwZSl9LGlzTGFiZWxXaXRoVGV4dElucHV0OmZ1bmN0aW9uKGUpe3ZhciB0PVQoZSwhMSk7cmV0dXJuISF0JiZpb25pYy50YXAuaXNUZXh0SW5wdXQoRSh0KSl9LGNvbnRhaW5zT3JJc1RleHRJbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gaW9uaWMudGFwLmlzVGV4dElucHV0KGUpfHxpb25pYy50YXAuaXNMYWJlbFdpdGhUZXh0SW5wdXQoZSl9LGNsb25lRm9jdXNlZElucHV0OmZ1bmN0aW9uKGUpe2lvbmljLnRhcC5oYXNDaGVja2VkQ2xvbmV8fChpb25pYy50YXAuaGFzQ2hlY2tlZENsb25lPSEwLGlvbmljLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe3ZhciB0PWUucXVlcnlTZWxlY3RvcihcIjpmb2N1c1wiKTtpZihpb25pYy50YXAuaXNUZXh0SW5wdXQodCkpe3ZhciBuPXQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb25lZC10ZXh0LWlucHV0XCIpO258fChuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodC50YWdOYW1lKSxuLnBsYWNlaG9sZGVyPXQucGxhY2Vob2xkZXIsbi50eXBlPXQudHlwZSxuLnZhbHVlPXQudmFsdWUsbi5zdHlsZT10LnN0eWxlLG4uY2xhc3NOYW1lPXQuY2xhc3NOYW1lLG4uY2xhc3NMaXN0LmFkZChcImNsb25lZC10ZXh0LWlucHV0XCIpLG4ucmVhZE9ubHk9ITAsdC5pc0NvbnRlbnRFZGl0YWJsZSYmKG4uY29udGVudEVkaXRhYmxlPXQuY29udGVudEVkaXRhYmxlLG4uaW5uZXJIVE1MPXQuaW5uZXJIVE1MKSx0LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKG4sdCksdC5zdHlsZS50b3A9dC5vZmZzZXRUb3AsdC5jbGFzc0xpc3QuYWRkKFwicHJldmlvdXMtaW5wdXQtZm9jdXNcIikpfX0pKX0saGFzQ2hlY2tlZENsb25lOiExLHJlbW92ZUNsb25lZElucHV0czpmdW5jdGlvbihlKXtpb25pYy50YXAuaGFzQ2hlY2tlZENsb25lPSExLGlvbmljLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe3ZhciB0LG49ZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmNsb25lZC10ZXh0LWlucHV0XCIpLGk9ZS5xdWVyeVNlbGVjdG9yQWxsKFwiLnByZXZpb3VzLWlucHV0LWZvY3VzXCIpO2Zvcih0PTA7dDxuLmxlbmd0aDt0Kyspblt0XS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKG5bdF0pO2Zvcih0PTA7dDxpLmxlbmd0aDt0KyspaVt0XS5jbGFzc0xpc3QucmVtb3ZlKFwicHJldmlvdXMtaW5wdXQtZm9jdXNcIiksaVt0XS5zdHlsZS50b3A9XCJcIixpW3RdLmZvY3VzKCl9KX0scmVxdWlyZXNOYXRpdmVDbGljazpmdW5jdGlvbihlKXtyZXR1cm4hZXx8ZS5kaXNhYmxlZHx8L14oZmlsZXxyYW5nZSkkL2kudGVzdChlLnR5cGUpfHwvXihvYmplY3R8dmlkZW8pJC9pLnRlc3QoZS50YWdOYW1lKXx8aW9uaWMudGFwLmlzTGFiZWxDb250YWluaW5nRmlsZUlucHV0KGUpPyEwOmlvbmljLnRhcC5pc0VsZW1lbnRUYXBEaXNhYmxlZChlKX0saXNMYWJlbENvbnRhaW5pbmdGaWxlSW5wdXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9VChlKTtpZihcIkxBQkVMXCIhPT10LnRhZ05hbWUpcmV0dXJuITE7dmFyIG49dC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbdHlwZT1maWxlXVwiKTtyZXR1cm4gbiYmbi5kaXNhYmxlZD09PSExPyEwOiExfSxpc0VsZW1lbnRUYXBEaXNhYmxlZDpmdW5jdGlvbihlKXtpZihlJiYxPT09ZS5ub2RlVHlwZSlmb3IodmFyIHQ9ZTt0Oyl7aWYoXCJ0cnVlXCI9PSh0LmRhdGFzZXQ/dC5kYXRhc2V0LnRhcERpc2FibGVkOnQuZ2V0QXR0cmlidXRlKFwiZGF0YS10YXAtZGlzYWJsZWRcIikpKXJldHVybiEwO3Q9dC5wYXJlbnRFbGVtZW50fXJldHVybiExfSxzZXRUb2xlcmFuY2U6ZnVuY3Rpb24oZSx0KXtCPWUsWj10fSxjYW5jZWxDbGljazpmdW5jdGlvbigpe3o9ITB9LHBvaW50ZXJDb29yZDpmdW5jdGlvbihlKXt2YXIgdD17eDowLHk6MH07aWYoZSl7dmFyIG49ZS50b3VjaGVzJiZlLnRvdWNoZXMubGVuZ3RoP2UudG91Y2hlczpbZV0saT1lLmNoYW5nZWRUb3VjaGVzJiZlLmNoYW5nZWRUb3VjaGVzWzBdfHxuWzBdO2kmJih0Lng9aS5jbGllbnRYfHxpLnBhZ2VYfHwwLHQueT1pLmNsaWVudFl8fGkucGFnZVl8fDApfXJldHVybiB0fX0saW9uaWMuRG9tVXRpbC5yZWFkeShmdW5jdGlvbigpe3ZhciBlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBhbmd1bGFyP2FuZ3VsYXI6bnVsbDsoIWV8fGUmJiFlLnNjZW5hcmlvKSYmaW9uaWMudGFwLnJlZ2lzdGVyKGRvY3VtZW50KX0pLGZ1bmN0aW9uKGUsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe289e30sdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocil9ZnVuY3Rpb24gaSgpe2Zvcih2YXIgZSBpbiBvKW9bZV0mJihvW2VdLmNsYXNzTGlzdC5hZGQobCksc1tlXT1vW2VdKTtvPXt9fWZ1bmN0aW9uIHIoKXtmb3IodmFyIGUgaW4gcylzW2VdJiYoc1tlXS5jbGFzc0xpc3QucmVtb3ZlKGwpLGRlbGV0ZSBzW2VdKX12YXIgbz17fSxzPXt9LGE9MCxsPVwiYWN0aXZhdGVkXCI7dC5hY3RpdmF0b3I9e3N0YXJ0OmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtpZighdC50YXAucmVxdWlyZXNOYXRpdmVDbGljayhlLnRhcmdldCkpe2Zvcih2YXIgcixzPWUudGFyZ2V0LGw9MDs2PmwmJihzJiYxPT09cy5ub2RlVHlwZSk7bCsrKXtpZihyJiZzLmNsYXNzTGlzdC5jb250YWlucyhcIml0ZW1cIikpe3I9czticmVha31pZihcIkFcIj09cy50YWdOYW1lfHxcIkJVVFRPTlwiPT1zLnRhZ05hbWV8fHMuaGFzQXR0cmlidXRlKFwibmctY2xpY2tcIikpe3I9cztcbmJyZWFrfWlmKHMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnV0dG9uXCIpKXtyPXM7YnJlYWt9aWYocy5jbGFzc0xpc3QuY29udGFpbnMoXCJwYW5lXCIpfHxcIkJPRFlcIj09cy50YWdOYW1lfHxcIklPTi1DT05URU5UXCI9PXMudGFnTmFtZSlicmVhaztzPXMucGFyZW50RWxlbWVudH1yJiYob1thXT1yLFwidG91Y2hzdGFydFwiPT09ZS50eXBlP24uX2FjdGl2YXRlVGltZW91dD1zZXRUaW1lb3V0KGksODApOnQucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGkpLGE9YT4xOT8wOmErMSl9fSl9LGVuZDpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl9hY3RpdmF0ZVRpbWVvdXQpLHNldFRpbWVvdXQobiwyMDApfX19KGRvY3VtZW50LGlvbmljKSxmdW5jdGlvbihlKXt2YXIgdD1bXCIwXCIsXCIwXCIsXCIwXCJdO2UuVXRpbHM9e2FycmF5TW92ZTpmdW5jdGlvbihlLHQsbil7aWYobj49ZS5sZW5ndGgpZm9yKHZhciBpPW4tZS5sZW5ndGg7aS0tKzE7KWUucHVzaCh2b2lkIDApO3JldHVybiBlLnNwbGljZShuLDAsZS5zcGxpY2UodCwxKVswXSksZX0scHJveHk6ZnVuY3Rpb24oZSx0KXt2YXIgbj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxuLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKSl9fSxkZWJvdW5jZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLHMsYTtyZXR1cm4gZnVuY3Rpb24oKXtvPXRoaXMscj1hcmd1bWVudHMscz1uZXcgRGF0ZTt2YXIgbD1mdW5jdGlvbigpe3ZhciBjPW5ldyBEYXRlLXM7dD5jP2k9c2V0VGltZW91dChsLHQtYyk6KGk9bnVsbCxufHwoYT1lLmFwcGx5KG8scikpKX0sYz1uJiYhaTtyZXR1cm4gaXx8KGk9c2V0VGltZW91dChsLHQpKSxjJiYoYT1lLmFwcGx5KG8scikpLGF9fSx0aHJvdHRsZTpmdW5jdGlvbihlLHQsbil7dmFyIGkscixvLHM9bnVsbCxhPTA7bnx8KG49e30pO3ZhciBsPWZ1bmN0aW9uKCl7YT1uLmxlYWRpbmc9PT0hMT8wOkRhdGUubm93KCkscz1udWxsLG89ZS5hcHBseShpLHIpfTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYz1EYXRlLm5vdygpO2F8fG4ubGVhZGluZyE9PSExfHwoYT1jKTt2YXIgdT10LShjLWEpO3JldHVybiBpPXRoaXMscj1hcmd1bWVudHMsMD49dT8oY2xlYXJUaW1lb3V0KHMpLHM9bnVsbCxhPWMsbz1lLmFwcGx5KGkscikpOnN8fG4udHJhaWxpbmc9PT0hMXx8KHM9c2V0VGltZW91dChsLHUpKSxvfX0saW5oZXJpdDpmdW5jdGlvbih0LG4pe3ZhciBpLHI9dGhpcztpPXQmJnQuaGFzT3duUHJvcGVydHkoXCJjb25zdHJ1Y3RvclwiKT90LmNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLmV4dGVuZChpLHIsbik7dmFyIG89ZnVuY3Rpb24oKXt0aGlzLmNvbnN0cnVjdG9yPWl9O3JldHVybiBvLnByb3RvdHlwZT1yLnByb3RvdHlwZSxpLnByb3RvdHlwZT1uZXcgbyx0JiZlLmV4dGVuZChpLnByb3RvdHlwZSx0KSxpLl9fc3VwZXJfXz1yLnByb3RvdHlwZSxpfSxleHRlbmQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl07aWYoaSlmb3IodmFyIHIgaW4gaSllW3JdPWlbcl19cmV0dXJuIGV9LG5leHRVaWQ6ZnVuY3Rpb24oKXtmb3IodmFyIGUsbj10Lmxlbmd0aDtuOyl7aWYobi0tLGU9dFtuXS5jaGFyQ29kZUF0KDApLDU3PT1lKXJldHVybiB0W25dPVwiQVwiLHQuam9pbihcIlwiKTtpZig5MCE9ZSlyZXR1cm4gdFtuXT1TdHJpbmcuZnJvbUNoYXJDb2RlKGUrMSksdC5qb2luKFwiXCIpO3Rbbl09XCIwXCJ9cmV0dXJuIHQudW5zaGlmdChcIjBcIiksdC5qb2luKFwiXCIpfX0sZS5pbmhlcml0PWUuVXRpbHMuaW5oZXJpdCxlLmV4dGVuZD1lLlV0aWxzLmV4dGVuZCxlLnRocm90dGxlPWUuVXRpbHMudGhyb3R0bGUsZS5wcm94eT1lLlV0aWxzLnByb3h5LGUuZGVib3VuY2U9ZS5VdGlscy5kZWJvdW5jZX0od2luZG93LmlvbmljKTt2YXIgJCxLLEosUSxldD1DKCksdHQ9MCxudD1cImtleWJvYXJkLW9wZW5cIixpdD1cInNjcm9sbFwiO2lvbmljLmtleWJvYXJkPXtpc09wZW46ITEsaGVpZ2h0Om51bGwsbGFuZHNjYXBlOiExLGhpZGU6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoSiksY2xlYXJUaW1lb3V0KEspLGNsZWFyVGltZW91dChRKSxpb25pYy5rZXlib2FyZC5pc09wZW49ITEsaW9uaWMudHJpZ2dlcihcInJlc2V0U2Nyb2xsVmlld1wiLHt0YXJnZXQ6JH0sITApLGlvbmljLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe2RvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShudCl9KSx3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQ/ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIk1TUG9pbnRlck1vdmVcIixOKTpkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsTiksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIixNKSxBKCkmJmNvcmRvdmEucGx1Z2lucy5LZXlib2FyZC5jbG9zZSgpfSxzaG93OmZ1bmN0aW9uKCl7QSgpJiZjb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQuc2hvdygpfX0saW9uaWMuUGxhdGZvcm0ucmVhZHkoZnVuY3Rpb24oKXt4KCksc2V0VGltZW91dCh4LDk5OSksd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkP2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJNU1BvaW50ZXJEb3duXCIsUywhMSk6ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixTLCExKX0pO3ZhciBydCxvdD17fTtpb25pYy52aWV3cG9ydD17b3JpZW50YXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LmlubmVyV2lkdGg+d2luZG93LmlubmVySGVpZ2h0PzkwOjB9fSxpb25pYy5QbGF0Zm9ybS5yZWFkeShmdW5jdGlvbigpe08oKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsZnVuY3Rpb24oKXtzZXRUaW1lb3V0KFIsMWUzKX0sITEpfSksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZS52aWV3cy5WaWV3PWZ1bmN0aW9uKCl7dGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS52aWV3cy5WaWV3LmluaGVyaXQ9ZS5pbmhlcml0LGUuZXh0ZW5kKGUudmlld3MuVmlldy5wcm90b3R5cGUse2luaXRpYWxpemU6ZnVuY3Rpb24oKXt9fSl9KHdpbmRvdy5pb25pYyk7dmFyIHN0PXtlZmZlY3Q6e319OyFmdW5jdGlvbihlKXt2YXIgdD1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4rbmV3IERhdGV9LG49NjAsaT0xZTMscj17fSxvPTE7c3QuZWZmZWN0LkFuaW1hdGU9e3JlcXVlc3RBbmltYXRpb25GcmFtZTpmdW5jdGlvbigpe3ZhciB0PWUucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxlLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZS5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGUub1JlcXVlc3RBbmltYXRpb25GcmFtZSxuPSEhdDtpZih0JiYhL3JlcXVlc3RBbmltYXRpb25GcmFtZVxcKFxcKVxccypcXHtcXHMqXFxbbmF0aXZlIGNvZGVcXF1cXHMqXFx9L2kudGVzdCh0LnRvU3RyaW5nKCkpJiYobj0hMSksbilyZXR1cm4gZnVuY3Rpb24oZSxuKXt0KGUsbil9O3ZhciBpPTYwLHI9e30sbz0wLHM9MSxhPW51bGwsbD0rbmV3IERhdGU7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXMrKztyZXR1cm4gclt0XT1lLG8rKyxudWxsPT09YSYmKGE9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt2YXIgZT0rbmV3IERhdGUsdD1yO3I9e30sbz0wO2Zvcih2YXIgbiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJih0W25dKGUpLGw9ZSk7ZS1sPjI1MDAmJihjbGVhckludGVydmFsKGEpLGE9bnVsbCl9LDFlMy9pKSksdH19KCksc3RvcDpmdW5jdGlvbihlKXt2YXIgdD1udWxsIT1yW2VdO3JldHVybiB0JiYocltlXT1udWxsKSx0fSxpc1J1bm5pbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPXJbZV19LHN0YXJ0OmZ1bmN0aW9uKGUscyxhLGwsYyx1KXt2YXIgaD10KCksZD1oLF89MCxmPTAscD1vKys7aWYodXx8KHU9ZG9jdW1lbnQuYm9keSkscCUyMD09PTApe3ZhciBtPXt9O2Zvcih2YXIgZyBpbiByKW1bZ109ITA7cj1tfXZhciB2PWZ1bmN0aW9uKG8pe3ZhciBtPW8hPT0hMCxnPXQoKTtpZighcltwXXx8cyYmIXMocCkpcmV0dXJuIHJbcF09bnVsbCx2b2lkKGEmJmEobi1mLygoZy1oKS9pKSxwLCExKSk7aWYobSlmb3IodmFyIFQ9TWF0aC5yb3VuZCgoZy1kKS8oaS9uKSktMSxFPTA7RTxNYXRoLm1pbihULDQpO0UrKyl2KCEwKSxmKys7bCYmKF89KGctaCkvbCxfPjEmJihfPTEpKTt2YXIgUz1jP2MoXyk6XztlKFMsZyxtKSE9PSExJiYxIT09X3x8IW0/bSYmKGQ9ZyxzdC5lZmZlY3QuQW5pbWF0ZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodix1KSk6KHJbcF09bnVsbCxhJiZhKG4tZi8oKGctaCkvaSkscCwxPT09X3x8bnVsbD09bCkpfTtyZXR1cm4gcltwXT0hMCxzdC5lZmZlY3QuQW5pbWF0ZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodix1KSxwfX19KHRoaXMpOyFmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbigpe30sbj1mdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5wb3coZS0xLDMpKzF9LGk9ZnVuY3Rpb24oZSl7cmV0dXJuKGUvPS41KTwxPy41Kk1hdGgucG93KGUsMyk6LjUqKE1hdGgucG93KGUtMiwzKSsyKX07ZS52aWV3cy5TY3JvbGw9ZS52aWV3cy5WaWV3LmluaGVyaXQoe2luaXRpYWxpemU6ZnVuY3Rpb24obil7dmFyIGk9dGhpczt0aGlzLl9fY29udGFpbmVyPW4uZWwsdGhpcy5fX2NvbnRlbnQ9bi5lbC5maXJzdEVsZW1lbnRDaGlsZCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5fX2NvbnRhaW5lciYmaS5fX2NvbnRlbnQmJihpLl9fY29udGFpbmVyLnNjcm9sbFRvcD0wLGkuX19jb250ZW50LnNjcm9sbFRvcD0wKX0pLHRoaXMub3B0aW9ucz17c2Nyb2xsaW5nWDohMSxzY3JvbGxiYXJYOiEwLHNjcm9sbGluZ1k6ITAsc2Nyb2xsYmFyWTohMCxzdGFydFg6MCxzdGFydFk6MCx3aGVlbERhbXBlbjo2LG1pblNjcm9sbGJhclNpemVYOjUsbWluU2Nyb2xsYmFyU2l6ZVk6NSxzY3JvbGxiYXJzRmFkZTohMCxzY3JvbGxiYXJGYWRlRGVsYXk6MzAwLHNjcm9sbGJhclJlc2l6ZUZhZGVEZWxheToxZTMsYW5pbWF0aW5nOiEwLGFuaW1hdGlvbkR1cmF0aW9uOjI1MCxib3VuY2luZzohMCxsb2NraW5nOiEwLHBhZ2luZzohMSxzbmFwcGluZzohMSx6b29taW5nOiExLG1pblpvb206LjUsbWF4Wm9vbTozLHNwZWVkTXVsdGlwbGllcjoxLGRlY2VsZXJhdGlvbjouOTcsc2Nyb2xsaW5nQ29tcGxldGU6dCxwZW5ldHJhdGlvbkRlY2VsZXJhdGlvbjouMDMscGVuZXRyYXRpb25BY2NlbGVyYXRpb246LjA4LHNjcm9sbEV2ZW50SW50ZXJ2YWw6MTAsZ2V0Q29udGVudFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KGkuX19jb250ZW50LnNjcm9sbFdpZHRoLGkuX19jb250ZW50Lm9mZnNldFdpZHRoKX0sZ2V0Q29udGVudEhlaWdodDpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1heChpLl9fY29udGVudC5zY3JvbGxIZWlnaHQsaS5fX2NvbnRlbnQub2Zmc2V0SGVpZ2h0KzIqaS5fX2NvbnRlbnQub2Zmc2V0VG9wKX19O2Zvcih2YXIgciBpbiBuKXRoaXMub3B0aW9uc1tyXT1uW3JdO3RoaXMuaGludFJlc2l6ZT1lLmRlYm91bmNlKGZ1bmN0aW9uKCl7aS5yZXNpemUoKX0sMWUzLCEwKSx0aGlzLm9uU2Nyb2xsPWZ1bmN0aW9uKCl7ZS5zY3JvbGwuaXNTY3JvbGxpbmc/KGNsZWFyVGltZW91dChpLnNjcm9sbFRpbWVyKSxpLnNjcm9sbFRpbWVyPXNldFRpbWVvdXQoaS5zZXRTY3JvbGxTdG9wLDgwKSk6c2V0VGltZW91dChpLnNldFNjcm9sbFN0YXJ0LDUwKX0sdGhpcy5zZXRTY3JvbGxTdGFydD1mdW5jdGlvbigpe2Uuc2Nyb2xsLmlzU2Nyb2xsaW5nPU1hdGguYWJzKGUuc2Nyb2xsLmxhc3RUb3AtaS5fX3Njcm9sbFRvcCk+MSxjbGVhclRpbWVvdXQoaS5zY3JvbGxUaW1lciksaS5zY3JvbGxUaW1lcj1zZXRUaW1lb3V0KGkuc2V0U2Nyb2xsU3RvcCw4MCl9LHRoaXMuc2V0U2Nyb2xsU3RvcD1mdW5jdGlvbigpe2Uuc2Nyb2xsLmlzU2Nyb2xsaW5nPSExLGUuc2Nyb2xsLmxhc3RUb3A9aS5fX3Njcm9sbFRvcH0sdGhpcy50cmlnZ2VyU2Nyb2xsRXZlbnQ9ZS50aHJvdHRsZShmdW5jdGlvbigpe2kub25TY3JvbGwoKSxlLnRyaWdnZXIoXCJzY3JvbGxcIix7c2Nyb2xsVG9wOmkuX19zY3JvbGxUb3Asc2Nyb2xsTGVmdDppLl9fc2Nyb2xsTGVmdCx0YXJnZXQ6aS5fX2NvbnRhaW5lcn0pfSx0aGlzLm9wdGlvbnMuc2Nyb2xsRXZlbnRJbnRlcnZhbCksdGhpcy50cmlnZ2VyU2Nyb2xsRW5kRXZlbnQ9ZnVuY3Rpb24oKXtlLnRyaWdnZXIoXCJzY3JvbGxlbmRcIix7c2Nyb2xsVG9wOmkuX19zY3JvbGxUb3Asc2Nyb2xsTGVmdDppLl9fc2Nyb2xsTGVmdCx0YXJnZXQ6aS5fX2NvbnRhaW5lcn0pfSx0aGlzLl9fc2Nyb2xsTGVmdD10aGlzLm9wdGlvbnMuc3RhcnRYLHRoaXMuX19zY3JvbGxUb3A9dGhpcy5vcHRpb25zLnN0YXJ0WSx0aGlzLl9fY2FsbGJhY2s9dGhpcy5nZXRSZW5kZXJGbigpLHRoaXMuX19pbml0RXZlbnRIYW5kbGVycygpLHRoaXMuX19jcmVhdGVTY3JvbGxiYXJzKCl9LHJ1bjpmdW5jdGlvbigpe3RoaXMucmVzaXplKCksdGhpcy5fX2ZhZGVTY3JvbGxiYXJzKFwib3V0XCIsdGhpcy5vcHRpb25zLnNjcm9sbGJhclJlc2l6ZUZhZGVEZWxheSl9LF9faXNTaW5nbGVUb3VjaDohMSxfX2lzVHJhY2tpbmc6ITEsX19kaWREZWNlbGVyYXRpb25Db21wbGV0ZTohMSxfX2lzR2VzdHVyaW5nOiExLF9faXNEcmFnZ2luZzohMSxfX2lzRGVjZWxlcmF0aW5nOiExLF9faXNBbmltYXRpbmc6ITEsX19jbGllbnRMZWZ0OjAsX19jbGllbnRUb3A6MCxfX2NsaWVudFdpZHRoOjAsX19jbGllbnRIZWlnaHQ6MCxfX2NvbnRlbnRXaWR0aDowLF9fY29udGVudEhlaWdodDowLF9fc25hcFdpZHRoOjEwMCxfX3NuYXBIZWlnaHQ6MTAwLF9fcmVmcmVzaEhlaWdodDpudWxsLF9fcmVmcmVzaEFjdGl2ZTohMSxfX3JlZnJlc2hBY3RpdmF0ZTpudWxsLF9fcmVmcmVzaERlYWN0aXZhdGU6bnVsbCxfX3JlZnJlc2hTdGFydDpudWxsLF9fem9vbUxldmVsOjEsX19zY3JvbGxMZWZ0OjAsX19zY3JvbGxUb3A6MCxfX21heFNjcm9sbExlZnQ6MCxfX21heFNjcm9sbFRvcDowLF9fc2NoZWR1bGVkTGVmdDowLF9fc2NoZWR1bGVkVG9wOjAsX19zY2hlZHVsZWRab29tOjAsX19sYXN0VG91Y2hMZWZ0Om51bGwsX19sYXN0VG91Y2hUb3A6bnVsbCxfX2xhc3RUb3VjaE1vdmU6bnVsbCxfX3Bvc2l0aW9uczpudWxsLF9fbWluRGVjZWxlcmF0aW9uU2Nyb2xsTGVmdDpudWxsLF9fbWluRGVjZWxlcmF0aW9uU2Nyb2xsVG9wOm51bGwsX19tYXhEZWNlbGVyYXRpb25TY3JvbGxMZWZ0Om51bGwsX19tYXhEZWNlbGVyYXRpb25TY3JvbGxUb3A6bnVsbCxfX2RlY2VsZXJhdGlvblZlbG9jaXR5WDpudWxsLF9fZGVjZWxlcmF0aW9uVmVsb2NpdHlZOm51bGwsX190cmFuc2Zvcm1Qcm9wZXJ0eTpudWxsLF9fcGVyc3BlY3RpdmVQcm9wZXJ0eTpudWxsLF9faW5kaWNhdG9yWDpudWxsLF9faW5kaWNhdG9yWTpudWxsLF9fc2Nyb2xsYmFyRmFkZVRpbWVvdXQ6bnVsbCxfX2RpZFdhaXRGb3JTaXplOm51bGwsX19zaXplclRpbWVvdXQ6bnVsbCxfX2luaXRFdmVudEhhbmRsZXJzOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZS50b3VjaGVzJiZlLnRvdWNoZXMubGVuZ3RoP2UudG91Y2hlczpbe3BhZ2VYOmUucGFnZVgscGFnZVk6ZS5wYWdlWX1dfXZhciBuPXRoaXMsaT10aGlzLl9fY29udGFpbmVyO2lmKG4uc2Nyb2xsQ2hpbGRJbnRvVmlldz1mdW5jdGlvbih0KXt2YXIgcjtpZighbi5pc1Njcm9sbGVkSW50b1ZpZXcpe2lmKGUuUGxhdGZvcm0uaXNJT1MoKXx8ZS5QbGF0Zm9ybS5pc0Z1bGxTY3JlZW4pe3I9aS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b207dmFyIG89dC5kZXRhaWwudmlld3BvcnRIZWlnaHQtcixzPU1hdGgubWF4KDAsdC5kZXRhaWwua2V5Ym9hcmRIZWlnaHQtbyk7aS5zdHlsZS5oZWlnaHQ9aS5jbGllbnRIZWlnaHQtcytcInB4XCIsaS5zdHlsZS5vdmVyZmxvdz1cInZpc2libGVcIixuLnJlc2l6ZSgpfW4uaXNTY3JvbGxlZEludG9WaWV3PSEwfWlmKHQuZGV0YWlsLmlzRWxlbWVudFVuZGVyS2V5Ym9hcmQpe3ZhciBhO2E9ZS5QbGF0Zm9ybS5pc0FuZHJvaWQoKSYmIWUuUGxhdGZvcm0uaXNGdWxsU2NyZWVuP2UuUGxhdGZvcm0udmVyc2lvbigpPDQuND81MDA6MzUwOjgwLGUuc2Nyb2xsLmlzU2Nyb2xsaW5nPSEwLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgbz0uNSppLmNsaWVudEhlaWdodDtyPWkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tO3ZhciBzPXQuZGV0YWlsLmVsZW1lbnRUb3AtcixhPXMrbzthPjAmJihlLnRhcC5jbG9uZUZvY3VzZWRJbnB1dChpLG4pLG4uc2Nyb2xsQnkoMCxhLCEwKSxuLm9uU2Nyb2xsKCkpfSxhKX10LnN0b3BQcm9wYWdhdGlvbigpfSxuLnJlc2V0U2Nyb2xsVmlldz1mdW5jdGlvbigpe24uaXNTY3JvbGxlZEludG9WaWV3JiYobi5pc1Njcm9sbGVkSW50b1ZpZXc9ITEsaS5zdHlsZS5oZWlnaHQ9XCJcIixpLnN0eWxlLm92ZXJmbG93PVwiXCIsbi5yZXNpemUoKSxlLnNjcm9sbC5pc1Njcm9sbGluZz0hMSl9LGkuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbENoaWxkSW50b1ZpZXdcIixuLnNjcm9sbENoaWxkSW50b1ZpZXcpLGkuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0U2Nyb2xsVmlld1wiLG4ucmVzZXRTY3JvbGxWaWV3KSxuLnRvdWNoU3RhcnQ9ZnVuY3Rpb24oaSl7aWYobi5zdGFydENvb3JkaW5hdGVzPWUudGFwLnBvaW50ZXJDb29yZChpKSwhZS50YXAuaWdub3JlU2Nyb2xsU3RhcnQoaSkpe2lmKG4uX19pc0Rvd249ITAsZS50YXAuY29udGFpbnNPcklzVGV4dElucHV0KGkudGFyZ2V0KXx8XCJTRUxFQ1RcIj09PWkudGFyZ2V0LnRhZ05hbWUpcmV0dXJuIHZvaWQobi5fX2hhc1N0YXJ0ZWQ9ITEpO24uX19pc1NlbGVjdGFibGU9ITAsbi5fX2VuYWJsZVNjcm9sbFk9ITAsbi5fX2hhc1N0YXJ0ZWQ9ITAsbi5kb1RvdWNoU3RhcnQodChpKSxpLnRpbWVTdGFtcCksaS5wcmV2ZW50RGVmYXVsdCgpfX0sbi50b3VjaE1vdmU9ZnVuY3Rpb24ocil7aWYoISghbi5fX2lzRG93bnx8ci5kZWZhdWx0UHJldmVudGVkfHxcIlRFWFRBUkVBXCI9PT1yLnRhcmdldC50YWdOYW1lJiZyLnRhcmdldC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCI6Zm9jdXNcIikpKXtpZighbi5fX2hhc1N0YXJ0ZWQmJihlLnRhcC5jb250YWluc09ySXNUZXh0SW5wdXQoci50YXJnZXQpfHxcIlNFTEVDVFwiPT09ci50YXJnZXQudGFnTmFtZSkpcmV0dXJuIG4uX19oYXNTdGFydGVkPSEwLG4uZG9Ub3VjaFN0YXJ0KHQociksci50aW1lU3RhbXApLHZvaWQgci5wcmV2ZW50RGVmYXVsdCgpO2lmKG4uc3RhcnRDb29yZGluYXRlcyl7dmFyIG89ZS50YXAucG9pbnRlckNvb3JkKHIpO24uX19pc1NlbGVjdGFibGUmJmUudGFwLmlzVGV4dElucHV0KHIudGFyZ2V0KSYmTWF0aC5hYnMobi5zdGFydENvb3JkaW5hdGVzLngtby54KT4yMCYmKG4uX19lbmFibGVTY3JvbGxZPSExLG4uX19pc1NlbGVjdGFibGU9ITApLG4uX19lbmFibGVTY3JvbGxZJiZNYXRoLmFicyhuLnN0YXJ0Q29vcmRpbmF0ZXMueS1vLnkpPjEwJiYobi5fX2lzU2VsZWN0YWJsZT0hMSxlLnRhcC5jbG9uZUZvY3VzZWRJbnB1dChpLG4pKX1uLmRvVG91Y2hNb3ZlKHQociksci50aW1lU3RhbXAsci5zY2FsZSksbi5fX2lzRG93bj0hMH19LG4udG91Y2hFbmQ9ZnVuY3Rpb24odCl7bi5fX2lzRG93biYmKG4uZG9Ub3VjaEVuZCh0LnRpbWVTdGFtcCksbi5fX2lzRG93bj0hMSxuLl9faGFzU3RhcnRlZD0hMSxuLl9faXNTZWxlY3RhYmxlPSEwLG4uX19lbmFibGVTY3JvbGxZPSEwLG4uX19pc0RyYWdnaW5nfHxuLl9faXNEZWNlbGVyYXRpbmd8fG4uX19pc0FuaW1hdGluZ3x8ZS50YXAucmVtb3ZlQ2xvbmVkSW5wdXRzKGksbikpfSxcIm9udG91Y2hzdGFydFwiaW4gd2luZG93KWkuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixuLnRvdWNoU3RhcnQsITEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixuLnRvdWNoTW92ZSwhMSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsbi50b3VjaEVuZCwhMSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsbi50b3VjaEVuZCwhMSk7ZWxzZSBpZih3aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKWkuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsbi50b3VjaFN0YXJ0LCExKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIixuLnRvdWNoTW92ZSwhMSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLG4udG91Y2hFbmQsITEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsbi50b3VjaEVuZCwhMSk7ZWxzZSBpZih3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpaS5hZGRFdmVudExpc3RlbmVyKFwiTVNQb2ludGVyRG93blwiLG4udG91Y2hTdGFydCwhMSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIk1TUG9pbnRlck1vdmVcIixuLnRvdWNoTW92ZSwhMSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIk1TUG9pbnRlclVwXCIsbi50b3VjaEVuZCwhMSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIk1TUG9pbnRlckNhbmNlbFwiLG4udG91Y2hFbmQsITEpO2Vsc2V7dmFyIHI9ITE7bi5tb3VzZURvd249ZnVuY3Rpb24oaSl7ZS50YXAuaWdub3JlU2Nyb2xsU3RhcnQoaSl8fFwiU0VMRUNUXCI9PT1pLnRhcmdldC50YWdOYW1lfHwobi5kb1RvdWNoU3RhcnQodChpKSxpLnRpbWVTdGFtcCksZS50YXAuaXNUZXh0SW5wdXQoaS50YXJnZXQpfHxpLnByZXZlbnREZWZhdWx0KCkscj0hMCl9LG4ubW91c2VNb3ZlPWZ1bmN0aW9uKGUpe3ImJiFlLmRlZmF1bHRQcmV2ZW50ZWQmJihuLmRvVG91Y2hNb3ZlKHQoZSksZS50aW1lU3RhbXApLHI9ITApfSxuLm1vdXNlVXA9ZnVuY3Rpb24oZSl7ciYmKG4uZG9Ub3VjaEVuZChlLnRpbWVTdGFtcCkscj0hMSl9LG4ubW91c2VXaGVlbD1lLmFuaW1hdGlvbkZyYW1lVGhyb3R0bGUoZnVuY3Rpb24odCl7dmFyIGk9ZS5Eb21VdGlsLmdldFBhcmVudE9yU2VsZldpdGhDbGFzcyh0LnRhcmdldCxcImlvbmljLXNjcm9sbFwiKTtpPT09bi5fX2NvbnRhaW5lciYmKG4uaGludFJlc2l6ZSgpLG4uc2Nyb2xsQnkodC53aGVlbERlbHRhWC9uLm9wdGlvbnMud2hlZWxEYW1wZW4sLXQud2hlZWxEZWx0YVkvbi5vcHRpb25zLndoZWVsRGFtcGVuKSxuLl9fZmFkZVNjcm9sbGJhcnMoXCJpblwiKSxjbGVhclRpbWVvdXQobi5fX3doZWVsSGlkZUJhclRpbWVvdXQpLG4uX193aGVlbEhpZGVCYXJUaW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLl9fZmFkZVNjcm9sbGJhcnMoXCJvdXRcIil9LDEwMCkpfSksaS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsbi5tb3VzZURvd24sITEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixuLm1vdXNlTW92ZSwhMSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIixuLm1vdXNlVXAsITEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXdoZWVsXCIsbi5tb3VzZVdoZWVsLCExKX19LF9fY2xlYW51cDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX19jb250YWluZXIsbj10aGlzO3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixuLnRvdWNoU3RhcnQpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixuLnRvdWNoTW92ZSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsbi50b3VjaEVuZCksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsbi50b3VjaENhbmNlbCksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIixuLnRvdWNoU3RhcnQpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLG4udG91Y2hNb3ZlKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsbi50b3VjaEVuZCksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJjYW5jZWxcIixuLnRvdWNoRW5kKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJNU1BvaW50ZXJEb3duXCIsbi50b3VjaFN0YXJ0KSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiTVNQb2ludGVyTW92ZVwiLG4udG91Y2hNb3ZlKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiTVNQb2ludGVyVXBcIixuLnRvdWNoRW5kKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiTVNQb2ludGVyQ2FuY2VsXCIsbi50b3VjaEVuZCksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsbi5tb3VzZURvd24pLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixuLm1vdXNlTW92ZSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIixuLm1vdXNlVXApLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXdoZWVsXCIsbi5tb3VzZVdoZWVsKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxDaGlsZEludG9WaWV3XCIsbi5zY3JvbGxDaGlsZEludG9WaWV3KSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNldFNjcm9sbFZpZXdcIixuLnJlc2V0U2Nyb2xsVmlldyksZS50YXAucmVtb3ZlQ2xvbmVkSW5wdXRzKHQsbiksZGVsZXRlIHRoaXMuX19jb250YWluZXIsZGVsZXRlIHRoaXMuX19jb250ZW50LGRlbGV0ZSB0aGlzLl9faW5kaWNhdG9yWCxkZWxldGUgdGhpcy5fX2luZGljYXRvclksZGVsZXRlIHRoaXMub3B0aW9ucy5lbCx0aGlzLl9fY2FsbGJhY2s9dGhpcy5zY3JvbGxDaGlsZEludG9WaWV3PXRoaXMucmVzZXRTY3JvbGxWaWV3PWFuZ3VsYXIubm9vcCx0aGlzLm1vdXNlTW92ZT10aGlzLm1vdXNlRG93bj10aGlzLm1vdXNlVXA9dGhpcy5tb3VzZVdoZWVsPXRoaXMudG91Y2hTdGFydD10aGlzLnRvdWNoTW92ZT10aGlzLnRvdWNoRW5kPXRoaXMudG91Y2hDYW5jZWw9YW5ndWxhci5ub29wLHRoaXMucmVzaXplPXRoaXMuc2Nyb2xsVG89dGhpcy56b29tVG89dGhpcy5fX3Njcm9sbGluZ0NvbXBsZXRlPWFuZ3VsYXIubm9vcCx0PW51bGx9LF9fY3JlYXRlU2Nyb2xsYmFyOmZ1bmN0aW9uKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBuLmNsYXNzTmFtZT1cInNjcm9sbC1iYXItaW5kaWNhdG9yIHNjcm9sbC1iYXItZmFkZS1vdXRcIix0LmNsYXNzTmFtZT1cImhcIj09ZT9cInNjcm9sbC1iYXIgc2Nyb2xsLWJhci1oXCI6XCJzY3JvbGwtYmFyIHNjcm9sbC1iYXItdlwiLHQuYXBwZW5kQ2hpbGQobiksdH0sX19jcmVhdGVTY3JvbGxiYXJzOmZ1bmN0aW9uKCl7dmFyIGUsdDt0aGlzLm9wdGlvbnMuc2Nyb2xsaW5nWCYmKGU9e2VsOnRoaXMuX19jcmVhdGVTY3JvbGxiYXIoXCJoXCIpLHNpemVSYXRpbzoxfSxlLmluZGljYXRvcj1lLmVsLmNoaWxkcmVuWzBdLHRoaXMub3B0aW9ucy5zY3JvbGxiYXJYJiZ0aGlzLl9fY29udGFpbmVyLmFwcGVuZENoaWxkKGUuZWwpLHRoaXMuX19pbmRpY2F0b3JYPWUpLHRoaXMub3B0aW9ucy5zY3JvbGxpbmdZJiYodD17ZWw6dGhpcy5fX2NyZWF0ZVNjcm9sbGJhcihcInZcIiksc2l6ZVJhdGlvOjF9LHQuaW5kaWNhdG9yPXQuZWwuY2hpbGRyZW5bMF0sdGhpcy5vcHRpb25zLnNjcm9sbGJhclkmJnRoaXMuX19jb250YWluZXIuYXBwZW5kQ2hpbGQodC5lbCksdGhpcy5fX2luZGljYXRvclk9dCl9LF9fcmVzaXplU2Nyb2xsYmFyczpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoZS5fX2luZGljYXRvclgpe3ZhciB0PU1hdGgubWF4KE1hdGgucm91bmQoZS5fX2NsaWVudFdpZHRoKmUuX19jbGllbnRXaWR0aC9lLl9fY29udGVudFdpZHRoKSwyMCk7dD5lLl9fY29udGVudFdpZHRoJiYodD0wKSxlLl9faW5kaWNhdG9yWC5zaXplPXQsZS5fX2luZGljYXRvclgubWluU2NhbGU9dGhpcy5vcHRpb25zLm1pblNjcm9sbGJhclNpemVYL3QsZS5fX2luZGljYXRvclguaW5kaWNhdG9yLnN0eWxlLndpZHRoPXQrXCJweFwiLGUuX19pbmRpY2F0b3JYLm1heFBvcz1lLl9fY2xpZW50V2lkdGgtdCxlLl9faW5kaWNhdG9yWC5zaXplUmF0aW89ZS5fX21heFNjcm9sbExlZnQ/ZS5fX2luZGljYXRvclgubWF4UG9zL2UuX19tYXhTY3JvbGxMZWZ0OjF9aWYoZS5fX2luZGljYXRvclkpe3ZhciBuPU1hdGgubWF4KE1hdGgucm91bmQoZS5fX2NsaWVudEhlaWdodCplLl9fY2xpZW50SGVpZ2h0L2UuX19jb250ZW50SGVpZ2h0KSwyMCk7bj5lLl9fY29udGVudEhlaWdodCYmKG49MCksZS5fX2luZGljYXRvclkuc2l6ZT1uLGUuX19pbmRpY2F0b3JZLm1pblNjYWxlPXRoaXMub3B0aW9ucy5taW5TY3JvbGxiYXJTaXplWS9uLGUuX19pbmRpY2F0b3JZLm1heFBvcz1lLl9fY2xpZW50SGVpZ2h0LW4sZS5fX2luZGljYXRvclkuaW5kaWNhdG9yLnN0eWxlLmhlaWdodD1uK1wicHhcIixlLl9faW5kaWNhdG9yWS5zaXplUmF0aW89ZS5fX21heFNjcm9sbFRvcD9lLl9faW5kaWNhdG9yWS5tYXhQb3MvZS5fX21heFNjcm9sbFRvcDoxfX0sX19yZXBvc2l0aW9uU2Nyb2xsYmFyczpmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIsbz10aGlzLHM9MCxhPTA7by5fX2luZGljYXRvclgmJihvLl9faW5kaWNhdG9yWSYmKHM9MTApLGk9TWF0aC5yb3VuZChvLl9faW5kaWNhdG9yWC5zaXplUmF0aW8qby5fX3Njcm9sbExlZnQpfHwwLHQ9by5fX3Njcm9sbExlZnQtKG8uX19tYXhTY3JvbGxMZWZ0LXMpLG8uX19zY3JvbGxMZWZ0PDA/KHdpZHRoU2NhbGU9TWF0aC5tYXgoby5fX2luZGljYXRvclgubWluU2NhbGUsKG8uX19pbmRpY2F0b3JYLnNpemUtTWF0aC5hYnMoby5fX3Njcm9sbExlZnQpKS9vLl9faW5kaWNhdG9yWC5zaXplKSxpPTAsby5fX2luZGljYXRvclguaW5kaWNhdG9yLnN0eWxlW28uX190cmFuc2Zvcm1PcmlnaW5Qcm9wZXJ0eV09XCJsZWZ0IGNlbnRlclwiKTp0PjA/KHdpZHRoU2NhbGU9TWF0aC5tYXgoby5fX2luZGljYXRvclgubWluU2NhbGUsKG8uX19pbmRpY2F0b3JYLnNpemUtdCkvby5fX2luZGljYXRvclguc2l6ZSksaT1vLl9faW5kaWNhdG9yWC5tYXhQb3MtcyxvLl9faW5kaWNhdG9yWC5pbmRpY2F0b3Iuc3R5bGVbby5fX3RyYW5zZm9ybU9yaWdpblByb3BlcnR5XT1cInJpZ2h0IGNlbnRlclwiKTooaT1NYXRoLm1pbihvLl9fbWF4U2Nyb2xsTGVmdCxNYXRoLm1heCgwLGkpKSx3aWR0aFNjYWxlPTEpLG8uX19pbmRpY2F0b3JYLmluZGljYXRvci5zdHlsZVtvLl9fdHJhbnNmb3JtUHJvcGVydHldPVwidHJhbnNsYXRlM2QoXCIraStcInB4LCAwLCAwKSBzY2FsZVgoXCIrd2lkdGhTY2FsZStcIilcIiksby5fX2luZGljYXRvclkmJihyPU1hdGgucm91bmQoby5fX2luZGljYXRvclkuc2l6ZVJhdGlvKm8uX19zY3JvbGxUb3ApfHwwLG8uX19pbmRpY2F0b3JYJiYoYT0xMCksbj1vLl9fc2Nyb2xsVG9wLShvLl9fbWF4U2Nyb2xsVG9wLWEpLG8uX19zY3JvbGxUb3A8MD8oZT1NYXRoLm1heChvLl9faW5kaWNhdG9yWS5taW5TY2FsZSwoby5fX2luZGljYXRvclkuc2l6ZS1NYXRoLmFicyhvLl9fc2Nyb2xsVG9wKSkvby5fX2luZGljYXRvclkuc2l6ZSkscj0wLG8uX19pbmRpY2F0b3JZLmluZGljYXRvci5zdHlsZVtvLl9fdHJhbnNmb3JtT3JpZ2luUHJvcGVydHldPVwiY2VudGVyIHRvcFwiKTpuPjA/KGU9TWF0aC5tYXgoby5fX2luZGljYXRvclkubWluU2NhbGUsKG8uX19pbmRpY2F0b3JZLnNpemUtbikvby5fX2luZGljYXRvclkuc2l6ZSkscj1vLl9faW5kaWNhdG9yWS5tYXhQb3MtYSxvLl9faW5kaWNhdG9yWS5pbmRpY2F0b3Iuc3R5bGVbby5fX3RyYW5zZm9ybU9yaWdpblByb3BlcnR5XT1cImNlbnRlciBib3R0b21cIik6KHI9TWF0aC5taW4oby5fX21heFNjcm9sbFRvcCxNYXRoLm1heCgwLHIpKSxlPTEpLG8uX19pbmRpY2F0b3JZLmluZGljYXRvci5zdHlsZVtvLl9fdHJhbnNmb3JtUHJvcGVydHldPVwidHJhbnNsYXRlM2QoMCxcIityK1wicHgsIDApIHNjYWxlWShcIitlK1wiKVwiKX0sX19mYWRlU2Nyb2xsYmFyczpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYodGhpcy5vcHRpb25zLnNjcm9sbGJhcnNGYWRlKXt2YXIgaT1cInNjcm9sbC1iYXItZmFkZS1vdXRcIjtuLm9wdGlvbnMuc2Nyb2xsYmFyc0ZhZGU9PT0hMCYmKGNsZWFyVGltZW91dChuLl9fc2Nyb2xsYmFyRmFkZVRpbWVvdXQpLFwiaW5cIj09ZT8obi5fX2luZGljYXRvclgmJm4uX19pbmRpY2F0b3JYLmluZGljYXRvci5jbGFzc0xpc3QucmVtb3ZlKGkpLG4uX19pbmRpY2F0b3JZJiZuLl9faW5kaWNhdG9yWS5pbmRpY2F0b3IuY2xhc3NMaXN0LnJlbW92ZShpKSk6bi5fX3Njcm9sbGJhckZhZGVUaW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLl9faW5kaWNhdG9yWCYmbi5fX2luZGljYXRvclguaW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoaSksbi5fX2luZGljYXRvclkmJm4uX19pbmRpY2F0b3JZLmluZGljYXRvci5jbGFzc0xpc3QuYWRkKGkpfSx0fHxuLm9wdGlvbnMuc2Nyb2xsYmFyRmFkZURlbGF5KSl9fSxfX3Njcm9sbGluZ0NvbXBsZXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0Lm9wdGlvbnMuc2Nyb2xsaW5nQ29tcGxldGUoKSxlLnRhcC5yZW1vdmVDbG9uZWRJbnB1dHModC5fX2NvbnRhaW5lcix0KSx0Ll9fZmFkZVNjcm9sbGJhcnMoXCJvdXRcIil9LHJlc2l6ZTpmdW5jdGlvbigpe3RoaXMuX19jb250YWluZXImJnRoaXMub3B0aW9ucyYmdGhpcy5zZXREaW1lbnNpb25zKHRoaXMuX19jb250YWluZXIuY2xpZW50V2lkdGgsdGhpcy5fX2NvbnRhaW5lci5jbGllbnRIZWlnaHQsdGhpcy5vcHRpb25zLmdldENvbnRlbnRXaWR0aCgpLHRoaXMub3B0aW9ucy5nZXRDb250ZW50SGVpZ2h0KCkpfSxnZXRSZW5kZXJGbjpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXRoaXMuX19jb250ZW50LGk9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlO1wiTW96QXBwZWFyYW5jZVwiaW4gaT9lPVwiZ2Vja29cIjpcIldlYmtpdEFwcGVhcmFuY2VcImluIGk/ZT1cIndlYmtpdFwiOlwic3RyaW5nXCI9PXR5cGVvZiBuYXZpZ2F0b3IuY3B1Q2xhc3MmJihlPVwidHJpZGVudFwiKTt2YXIgcixvPXt0cmlkZW50OlwibXNcIixnZWNrbzpcIk1velwiLHdlYmtpdDpcIldlYmtpdFwiLHByZXN0bzpcIk9cIn1bZV0scz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGE9bytcIlBlcnNwZWN0aXZlXCIsbD1vK1wiVHJhbnNmb3JtXCIsYz1vK1wiVHJhbnNmb3JtT3JpZ2luXCI7cmV0dXJuIHQuX19wZXJzcGVjdGl2ZVByb3BlcnR5PWwsdC5fX3RyYW5zZm9ybVByb3BlcnR5PWwsdC5fX3RyYW5zZm9ybU9yaWdpblByb3BlcnR5PWMscy5zdHlsZVthXSE9PXI/ZnVuY3Rpb24oZSxpLHIsbyl7bi5zdHlsZVtsXT1cInRyYW5zbGF0ZTNkKFwiKy1lK1wicHgsXCIrLWkrXCJweCwwKSBzY2FsZShcIityK1wiKVwiLHQuX19yZXBvc2l0aW9uU2Nyb2xsYmFycygpLG98fHQudHJpZ2dlclNjcm9sbEV2ZW50KCl9OnMuc3R5bGVbbF0hPT1yP2Z1bmN0aW9uKGUsaSxyLG8pe24uc3R5bGVbbF09XCJ0cmFuc2xhdGUoXCIrLWUrXCJweCxcIistaStcInB4KSBzY2FsZShcIityK1wiKVwiLHQuX19yZXBvc2l0aW9uU2Nyb2xsYmFycygpLG98fHQudHJpZ2dlclNjcm9sbEV2ZW50KCl9OmZ1bmN0aW9uKGUsaSxyLG8pe24uc3R5bGUubWFyZ2luTGVmdD1lPy1lL3IrXCJweFwiOlwiXCIsbi5zdHlsZS5tYXJnaW5Ub3A9aT8taS9yK1wicHhcIjpcIlwiLG4uc3R5bGUuem9vbT1yfHxcIlwiLHQuX19yZXBvc2l0aW9uU2Nyb2xsYmFycygpLG98fHQudHJpZ2dlclNjcm9sbEV2ZW50KCl9fSxzZXREaW1lbnNpb25zOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPXRoaXM7ZT09PStlJiYoci5fX2NsaWVudFdpZHRoPWUpLHQ9PT0rdCYmKHIuX19jbGllbnRIZWlnaHQ9dCksbj09PStuJiYoci5fX2NvbnRlbnRXaWR0aD1uKSxpPT09K2kmJihyLl9fY29udGVudEhlaWdodD1pKSxyLl9fY29tcHV0ZVNjcm9sbE1heCgpLHIuX19yZXNpemVTY3JvbGxiYXJzKCksci5zY3JvbGxUbyhyLl9fc2Nyb2xsTGVmdCxyLl9fc2Nyb2xsVG9wLCEwLG51bGwsITApfSxzZXRQb3NpdGlvbjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7bi5fX2NsaWVudExlZnQ9ZXx8MCxuLl9fY2xpZW50VG9wPXR8fDB9LHNldFNuYXBTaXplOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztuLl9fc25hcFdpZHRoPWUsbi5fX3NuYXBIZWlnaHQ9dH0sYWN0aXZhdGVQdWxsVG9SZWZyZXNoOmZ1bmN0aW9uKHQsbixpLHIsbyxzLGEpe3ZhciBsPXRoaXM7bC5fX3JlZnJlc2hIZWlnaHQ9dCxsLl9fcmVmcmVzaEFjdGl2YXRlPWZ1bmN0aW9uKCl7ZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobil9LGwuX19yZWZyZXNoRGVhY3RpdmF0ZT1mdW5jdGlvbigpe2UucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGkpfSxsLl9fcmVmcmVzaFN0YXJ0PWZ1bmN0aW9uKCl7ZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocil9LGwuX19yZWZyZXNoU2hvdz1mdW5jdGlvbigpe2UucmVxdWVzdEFuaW1hdGlvbkZyYW1lKG8pfSxsLl9fcmVmcmVzaEhpZGU9ZnVuY3Rpb24oKXtlLnJlcXVlc3RBbmltYXRpb25GcmFtZShzKX0sbC5fX3JlZnJlc2hUYWlsPWZ1bmN0aW9uKCl7ZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYSl9LGwuX19yZWZyZXNoVGFpbFRpbWU9MTAwLGwuX19taW5TcGluVGltZT02MDB9LHRyaWdnZXJQdWxsVG9SZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5fX3B1Ymxpc2godGhpcy5fX3Njcm9sbExlZnQsLXRoaXMuX19yZWZyZXNoSGVpZ2h0LHRoaXMuX196b29tTGV2ZWwsITApO3ZhciBlPW5ldyBEYXRlO3NlbGYucmVmcmVzaFN0YXJ0VGltZT1lLmdldFRpbWUoKSx0aGlzLl9fcmVmcmVzaFN0YXJ0JiZ0aGlzLl9fcmVmcmVzaFN0YXJ0KCl9LGZpbmlzaFB1bGxUb1JlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IERhdGUsbj0wO2UucmVmcmVzaFN0YXJ0VGltZStlLl9fbWluU3BpblRpbWU+dC5nZXRUaW1lKCkmJihuPWUucmVmcmVzaFN0YXJ0VGltZStlLl9fbWluU3BpblRpbWUtdC5nZXRUaW1lKCkpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9fcmVmcmVzaFRhaWwmJmUuX19yZWZyZXNoVGFpbCgpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9fcmVmcmVzaEFjdGl2ZT0hMSxlLl9fcmVmcmVzaERlYWN0aXZhdGUmJmUuX19yZWZyZXNoRGVhY3RpdmF0ZSgpLGUuc2Nyb2xsVG8oZS5fX3Njcm9sbExlZnQsZS5fX3Njcm9sbFRvcCwhMCl9LGUuX19yZWZyZXNoVGFpbFRpbWUpfSxuKX0sZ2V0VmFsdWVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm57bGVmdDplLl9fc2Nyb2xsTGVmdCx0b3A6ZS5fX3Njcm9sbFRvcCx6b29tOmUuX196b29tTGV2ZWx9fSxnZXRTY3JvbGxNYXg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybntsZWZ0OmUuX19tYXhTY3JvbGxMZWZ0LHRvcDplLl9fbWF4U2Nyb2xsVG9wfX0sem9vbVRvOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPXRoaXM7aWYoIXIub3B0aW9ucy56b29taW5nKXRocm93IG5ldyBFcnJvcihcIlpvb21pbmcgaXMgbm90IGVuYWJsZWQhXCIpO3IuX19pc0RlY2VsZXJhdGluZyYmKHN0LmVmZmVjdC5BbmltYXRlLnN0b3Aoci5fX2lzRGVjZWxlcmF0aW5nKSxyLl9faXNEZWNlbGVyYXRpbmc9ITEpO3ZhciBvPXIuX196b29tTGV2ZWw7bnVsbD09biYmKG49ci5fX2NsaWVudFdpZHRoLzIpLG51bGw9PWkmJihpPXIuX19jbGllbnRIZWlnaHQvMiksZT1NYXRoLm1heChNYXRoLm1pbihlLHIub3B0aW9ucy5tYXhab29tKSxyLm9wdGlvbnMubWluWm9vbSksci5fX2NvbXB1dGVTY3JvbGxNYXgoZSk7dmFyIHM9KG4rci5fX3Njcm9sbExlZnQpKmUvby1uLGE9KGkrci5fX3Njcm9sbFRvcCkqZS9vLWk7cz5yLl9fbWF4U2Nyb2xsTGVmdD9zPXIuX19tYXhTY3JvbGxMZWZ0OjA+cyYmKHM9MCksYT5yLl9fbWF4U2Nyb2xsVG9wP2E9ci5fX21heFNjcm9sbFRvcDowPmEmJihhPTApLHIuX19wdWJsaXNoKHMsYSxlLHQpfSx6b29tQnk6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcztyLnpvb21UbyhyLl9fem9vbUxldmVsKmUsdCxuLGkpfSxzY3JvbGxUbzpmdW5jdGlvbihlLHQsbixpLHIpe3ZhciBvPXRoaXM7aWYoby5fX2lzRGVjZWxlcmF0aW5nJiYoc3QuZWZmZWN0LkFuaW1hdGUuc3RvcChvLl9faXNEZWNlbGVyYXRpbmcpLG8uX19pc0RlY2VsZXJhdGluZz0hMSksbnVsbCE9aSYmaSE9PW8uX196b29tTGV2ZWwpe2lmKCFvLm9wdGlvbnMuem9vbWluZyl0aHJvdyBuZXcgRXJyb3IoXCJab29taW5nIGlzIG5vdCBlbmFibGVkIVwiKTtlKj1pLHQqPWksby5fX2NvbXB1dGVTY3JvbGxNYXgoaSl9ZWxzZSBpPW8uX196b29tTGV2ZWw7by5vcHRpb25zLnNjcm9sbGluZ1g/by5vcHRpb25zLnBhZ2luZz9lPU1hdGgucm91bmQoZS9vLl9fY2xpZW50V2lkdGgpKm8uX19jbGllbnRXaWR0aDpvLm9wdGlvbnMuc25hcHBpbmcmJihlPU1hdGgucm91bmQoZS9vLl9fc25hcFdpZHRoKSpvLl9fc25hcFdpZHRoKTplPW8uX19zY3JvbGxMZWZ0LG8ub3B0aW9ucy5zY3JvbGxpbmdZP28ub3B0aW9ucy5wYWdpbmc/dD1NYXRoLnJvdW5kKHQvby5fX2NsaWVudEhlaWdodCkqby5fX2NsaWVudEhlaWdodDpvLm9wdGlvbnMuc25hcHBpbmcmJih0PU1hdGgucm91bmQodC9vLl9fc25hcEhlaWdodCkqby5fX3NuYXBIZWlnaHQpOnQ9by5fX3Njcm9sbFRvcCxlPU1hdGgubWF4KE1hdGgubWluKG8uX19tYXhTY3JvbGxMZWZ0LGUpLDApLHQ9TWF0aC5tYXgoTWF0aC5taW4oby5fX21heFNjcm9sbFRvcCx0KSwwKSxlPT09by5fX3Njcm9sbExlZnQmJnQ9PT1vLl9fc2Nyb2xsVG9wJiYobj0hMSksby5fX3B1Ymxpc2goZSx0LGksbixyKX0sc2Nyb2xsQnk6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMscj1pLl9faXNBbmltYXRpbmc/aS5fX3NjaGVkdWxlZExlZnQ6aS5fX3Njcm9sbExlZnQsbz1pLl9faXNBbmltYXRpbmc/aS5fX3NjaGVkdWxlZFRvcDppLl9fc2Nyb2xsVG9wO2kuc2Nyb2xsVG8ocisoZXx8MCksbysodHx8MCksbil9LGRvTW91c2Vab29tOmZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPXRoaXMsbz1lPjA/Ljk3OjEuMDM7cmV0dXJuIHIuem9vbVRvKHIuX196b29tTGV2ZWwqbywhMSxuLXIuX19jbGllbnRMZWZ0LGktci5fX2NsaWVudFRvcCl9LGRvVG91Y2hTdGFydDpmdW5jdGlvbihlLHQpe3RoaXMuaGludFJlc2l6ZSgpLHQgaW5zdGFuY2VvZiBEYXRlJiYodD10LnZhbHVlT2YoKSksXCJudW1iZXJcIiE9dHlwZW9mIHQmJih0PURhdGUubm93KCkpO3ZhciBuPXRoaXM7bi5fX2ludGVycnVwdGVkQW5pbWF0aW9uPSEwLG4uX19pc0RlY2VsZXJhdGluZyYmKHN0LmVmZmVjdC5BbmltYXRlLnN0b3Aobi5fX2lzRGVjZWxlcmF0aW5nKSxuLl9faXNEZWNlbGVyYXRpbmc9ITEsbi5fX2ludGVycnVwdGVkQW5pbWF0aW9uPSEwKSxuLl9faXNBbmltYXRpbmcmJihzdC5lZmZlY3QuQW5pbWF0ZS5zdG9wKG4uX19pc0FuaW1hdGluZyksbi5fX2lzQW5pbWF0aW5nPSExLG4uX19pbnRlcnJ1cHRlZEFuaW1hdGlvbj0hMCk7dmFyIGkscixvPTE9PT1lLmxlbmd0aDtvPyhpPWVbMF0ucGFnZVgscj1lWzBdLnBhZ2VZKTooaT1NYXRoLmFicyhlWzBdLnBhZ2VYK2VbMV0ucGFnZVgpLzIscj1NYXRoLmFicyhlWzBdLnBhZ2VZK2VbMV0ucGFnZVkpLzIpLG4uX19pbml0aWFsVG91Y2hMZWZ0PWksbi5fX2luaXRpYWxUb3VjaFRvcD1yLG4uX19pbml0aWFsVG91Y2hlcz1lLG4uX196b29tTGV2ZWxTdGFydD1uLl9fem9vbUxldmVsLG4uX19sYXN0VG91Y2hMZWZ0PWksbi5fX2xhc3RUb3VjaFRvcD1yLG4uX19sYXN0VG91Y2hNb3ZlPXQsbi5fX2xhc3RTY2FsZT0xLG4uX19lbmFibGVTY3JvbGxYPSFvJiZuLm9wdGlvbnMuc2Nyb2xsaW5nWCxuLl9fZW5hYmxlU2Nyb2xsWT0hbyYmbi5vcHRpb25zLnNjcm9sbGluZ1ksbi5fX2lzVHJhY2tpbmc9ITAsbi5fX2RpZERlY2VsZXJhdGlvbkNvbXBsZXRlPSExLG4uX19pc0RyYWdnaW5nPSFvLG4uX19pc1NpbmdsZVRvdWNoPW8sbi5fX3Bvc2l0aW9ucz1bXX0sZG9Ub3VjaE1vdmU6ZnVuY3Rpb24oZSx0LG4pe3QgaW5zdGFuY2VvZiBEYXRlJiYodD10LnZhbHVlT2YoKSksXCJudW1iZXJcIiE9dHlwZW9mIHQmJih0PURhdGUubm93KCkpO3ZhciBpPXRoaXM7aWYoaS5fX2lzVHJhY2tpbmcpe3ZhciByLG87Mj09PWUubGVuZ3RoPyhyPU1hdGguYWJzKGVbMF0ucGFnZVgrZVsxXS5wYWdlWCkvMixvPU1hdGguYWJzKGVbMF0ucGFnZVkrZVsxXS5wYWdlWSkvMiwhbiYmaS5vcHRpb25zLnpvb21pbmcmJihuPWkuX19nZXRTY2FsZShpLl9faW5pdGlhbFRvdWNoZXMsZSkpKToocj1lWzBdLnBhZ2VYLG89ZVswXS5wYWdlWSk7dmFyIHM9aS5fX3Bvc2l0aW9ucztpZihpLl9faXNEcmFnZ2luZyl7dmFyIGE9ci1pLl9fbGFzdFRvdWNoTGVmdCxsPW8taS5fX2xhc3RUb3VjaFRvcCxjPWkuX19zY3JvbGxMZWZ0LHU9aS5fX3Njcm9sbFRvcCxoPWkuX196b29tTGV2ZWw7aWYobnVsbCE9biYmaS5vcHRpb25zLnpvb21pbmcpe3ZhciBkPWg7aWYoaD1oL2kuX19sYXN0U2NhbGUqbixoPU1hdGgubWF4KE1hdGgubWluKGgsaS5vcHRpb25zLm1heFpvb20pLGkub3B0aW9ucy5taW5ab29tKSxkIT09aCl7dmFyIF89ci1pLl9fY2xpZW50TGVmdCxmPW8taS5fX2NsaWVudFRvcDtjPShfK2MpKmgvZC1fLHU9KGYrdSkqaC9kLWYsaS5fX2NvbXB1dGVTY3JvbGxNYXgoaCl9fWlmKGkuX19lbmFibGVTY3JvbGxYKXtjLT1hKnRoaXMub3B0aW9ucy5zcGVlZE11bHRpcGxpZXI7dmFyIHA9aS5fX21heFNjcm9sbExlZnQ7KGM+cHx8MD5jKSYmKGkub3B0aW9ucy5ib3VuY2luZz9jKz1hLzIqdGhpcy5vcHRpb25zLnNwZWVkTXVsdGlwbGllcjpjPWM+cD9wOjApfWlmKGkuX19lbmFibGVTY3JvbGxZKXt1LT1sKnRoaXMub3B0aW9ucy5zcGVlZE11bHRpcGxpZXI7dmFyIG09aS5fX21heFNjcm9sbFRvcDt1Pm18fDA+dT9pLm9wdGlvbnMuYm91bmNpbmd8fGkuX19yZWZyZXNoSGVpZ2h0JiYwPnU/KHUrPWwvMip0aGlzLm9wdGlvbnMuc3BlZWRNdWx0aXBsaWVyLGkuX19lbmFibGVTY3JvbGxYfHxudWxsPT1pLl9fcmVmcmVzaEhlaWdodHx8KDA+dT8oaS5fX3JlZnJlc2hIaWRkZW49ITEsaS5fX3JlZnJlc2hTaG93KCkpOihpLl9fcmVmcmVzaEhpZGUoKSxpLl9fcmVmcmVzaEhpZGRlbj0hMCksIWkuX19yZWZyZXNoQWN0aXZlJiZ1PD0taS5fX3JlZnJlc2hIZWlnaHQ/KGkuX19yZWZyZXNoQWN0aXZlPSEwLGkuX19yZWZyZXNoQWN0aXZhdGUmJmkuX19yZWZyZXNoQWN0aXZhdGUoKSk6aS5fX3JlZnJlc2hBY3RpdmUmJnU+LWkuX19yZWZyZXNoSGVpZ2h0JiYoaS5fX3JlZnJlc2hBY3RpdmU9ITEsaS5fX3JlZnJlc2hEZWFjdGl2YXRlJiZpLl9fcmVmcmVzaERlYWN0aXZhdGUoKSkpKTp1PXU+bT9tOjA6aS5fX3JlZnJlc2hIZWlnaHQmJiFpLl9fcmVmcmVzaEhpZGRlbiYmKGkuX19yZWZyZXNoSGlkZSgpLGkuX19yZWZyZXNoSGlkZGVuPSEwKX1zLmxlbmd0aD42MCYmcy5zcGxpY2UoMCwzMCkscy5wdXNoKGMsdSx0KSxpLl9fcHVibGlzaChjLHUsaCl9ZWxzZXt2YXIgZz1pLm9wdGlvbnMubG9ja2luZz8zOjAsdj01LFQ9TWF0aC5hYnMoci1pLl9faW5pdGlhbFRvdWNoTGVmdCksRT1NYXRoLmFicyhvLWkuX19pbml0aWFsVG91Y2hUb3ApO2kuX19lbmFibGVTY3JvbGxYPWkub3B0aW9ucy5zY3JvbGxpbmdYJiZUPj1nLGkuX19lbmFibGVTY3JvbGxZPWkub3B0aW9ucy5zY3JvbGxpbmdZJiZFPj1nLHMucHVzaChpLl9fc2Nyb2xsTGVmdCxpLl9fc2Nyb2xsVG9wLHQpLGkuX19pc0RyYWdnaW5nPShpLl9fZW5hYmxlU2Nyb2xsWHx8aS5fX2VuYWJsZVNjcm9sbFkpJiYoVD49dnx8RT49diksaS5fX2lzRHJhZ2dpbmcmJihpLl9faW50ZXJydXB0ZWRBbmltYXRpb249ITEsaS5fX2ZhZGVTY3JvbGxiYXJzKFwiaW5cIikpfWkuX19sYXN0VG91Y2hMZWZ0PXIsaS5fX2xhc3RUb3VjaFRvcD1vLGkuX19sYXN0VG91Y2hNb3ZlPXQsaS5fX2xhc3RTY2FsZT1ufX0sZG9Ub3VjaEVuZDpmdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgRGF0ZSYmKHQ9dC52YWx1ZU9mKCkpLFwibnVtYmVyXCIhPXR5cGVvZiB0JiYodD1EYXRlLm5vdygpKTt2YXIgbj10aGlzO2lmKG4uX19pc1RyYWNraW5nKXtpZihuLl9faXNUcmFja2luZz0hMSxuLl9faXNEcmFnZ2luZylpZihuLl9faXNEcmFnZ2luZz0hMSxuLl9faXNTaW5nbGVUb3VjaCYmbi5vcHRpb25zLmFuaW1hdGluZyYmdC1uLl9fbGFzdFRvdWNoTW92ZTw9MTAwKXtmb3IodmFyIGk9bi5fX3Bvc2l0aW9ucyxyPWkubGVuZ3RoLTEsbz1yLHM9cjtzPjAmJmlbc10+bi5fX2xhc3RUb3VjaE1vdmUtMTAwO3MtPTMpbz1zO2lmKG8hPT1yKXt2YXIgYT1pW3JdLWlbb10sbD1uLl9fc2Nyb2xsTGVmdC1pW28tMl0sYz1uLl9fc2Nyb2xsVG9wLWlbby0xXTtuLl9fZGVjZWxlcmF0aW9uVmVsb2NpdHlYPWwvYSooMWUzLzYwKSxuLl9fZGVjZWxlcmF0aW9uVmVsb2NpdHlZPWMvYSooMWUzLzYwKTt2YXIgdT1uLm9wdGlvbnMucGFnaW5nfHxuLm9wdGlvbnMuc25hcHBpbmc/NDoxOyhNYXRoLmFicyhuLl9fZGVjZWxlcmF0aW9uVmVsb2NpdHlYKT51fHxNYXRoLmFicyhuLl9fZGVjZWxlcmF0aW9uVmVsb2NpdHlZKT51KSYmKG4uX19yZWZyZXNoQWN0aXZlfHxuLl9fc3RhcnREZWNlbGVyYXRpb24odCkpfWVsc2Ugbi5fX3Njcm9sbGluZ0NvbXBsZXRlKCl9ZWxzZSB0LW4uX19sYXN0VG91Y2hNb3ZlPjEwMCYmbi5fX3Njcm9sbGluZ0NvbXBsZXRlKCk7aWYoIW4uX19pc0RlY2VsZXJhdGluZylpZihuLl9fcmVmcmVzaEFjdGl2ZSYmbi5fX3JlZnJlc2hTdGFydCl7bi5fX3B1Ymxpc2gobi5fX3Njcm9sbExlZnQsLW4uX19yZWZyZXNoSGVpZ2h0LG4uX196b29tTGV2ZWwsITApO3ZhciBoPW5ldyBEYXRlO24ucmVmcmVzaFN0YXJ0VGltZT1oLmdldFRpbWUoKSxuLl9fcmVmcmVzaFN0YXJ0JiZuLl9fcmVmcmVzaFN0YXJ0KCksZS5QbGF0Zm9ybS5pc0FuZHJvaWQoKXx8bi5fX3N0YXJ0RGVjZWxlcmF0aW9uKCl9ZWxzZShuLl9faW50ZXJydXB0ZWRBbmltYXRpb258fG4uX19pc0RyYWdnaW5nKSYmbi5fX3Njcm9sbGluZ0NvbXBsZXRlKCksbi5zY3JvbGxUbyhuLl9fc2Nyb2xsTGVmdCxuLl9fc2Nyb2xsVG9wLCEwLG4uX196b29tTGV2ZWwpLG4uX19yZWZyZXNoQWN0aXZlJiYobi5fX3JlZnJlc2hBY3RpdmU9ITEsbi5fX3JlZnJlc2hEZWFjdGl2YXRlJiZuLl9fcmVmcmVzaERlYWN0aXZhdGUoKSk7bi5fX3Bvc2l0aW9ucy5sZW5ndGg9MH19LF9fcHVibGlzaDpmdW5jdGlvbihlLHQscixvLHMpe3ZhciBhPXRoaXMsbD1hLl9faXNBbmltYXRpbmc7aWYobCYmKHN0LmVmZmVjdC5BbmltYXRlLnN0b3AobCksYS5fX2lzQW5pbWF0aW5nPSExKSxvJiZhLm9wdGlvbnMuYW5pbWF0aW5nKXthLl9fc2NoZWR1bGVkTGVmdD1lLGEuX19zY2hlZHVsZWRUb3A9dCxhLl9fc2NoZWR1bGVkWm9vbT1yO3ZhciBjPWEuX19zY3JvbGxMZWZ0LHU9YS5fX3Njcm9sbFRvcCxoPWEuX196b29tTGV2ZWwsZD1lLWMsXz10LXUsZj1yLWgscD1mdW5jdGlvbihlLHQsbil7biYmKGEuX19zY3JvbGxMZWZ0PWMrZCplLGEuX19zY3JvbGxUb3A9dStfKmUsYS5fX3pvb21MZXZlbD1oK2YqZSxhLl9fY2FsbGJhY2smJmEuX19jYWxsYmFjayhhLl9fc2Nyb2xsTGVmdCxhLl9fc2Nyb2xsVG9wLGEuX196b29tTGV2ZWwscykpfSxtPWZ1bmN0aW9uKGUpe3JldHVybiBhLl9faXNBbmltYXRpbmc9PT1lfSxnPWZ1bmN0aW9uKGUsdCxuKXt0PT09YS5fX2lzQW5pbWF0aW5nJiYoYS5fX2lzQW5pbWF0aW5nPSExKSwoYS5fX2RpZERlY2VsZXJhdGlvbkNvbXBsZXRlfHxuKSYmYS5fX3Njcm9sbGluZ0NvbXBsZXRlKCksYS5vcHRpb25zLnpvb21pbmcmJmEuX19jb21wdXRlU2Nyb2xsTWF4KCl9O2EuX19pc0FuaW1hdGluZz1zdC5lZmZlY3QuQW5pbWF0ZS5zdGFydChwLG0sZyxhLm9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24sbD9uOmkpfWVsc2UgYS5fX3NjaGVkdWxlZExlZnQ9YS5fX3Njcm9sbExlZnQ9ZSxhLl9fc2NoZWR1bGVkVG9wPWEuX19zY3JvbGxUb3A9dCxhLl9fc2NoZWR1bGVkWm9vbT1hLl9fem9vbUxldmVsPXIsYS5fX2NhbGxiYWNrJiZhLl9fY2FsbGJhY2soZSx0LHIscyksYS5vcHRpb25zLnpvb21pbmcmJmEuX19jb21wdXRlU2Nyb2xsTWF4KCl9LF9fY29tcHV0ZVNjcm9sbE1heDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO251bGw9PWUmJihlPXQuX196b29tTGV2ZWwpLHQuX19tYXhTY3JvbGxMZWZ0PU1hdGgubWF4KHQuX19jb250ZW50V2lkdGgqZS10Ll9fY2xpZW50V2lkdGgsMCksdC5fX21heFNjcm9sbFRvcD1NYXRoLm1heCh0Ll9fY29udGVudEhlaWdodCplLXQuX19jbGllbnRIZWlnaHQsMCksdC5fX2RpZFdhaXRGb3JTaXplfHx0Ll9fbWF4U2Nyb2xsTGVmdHx8dC5fX21heFNjcm9sbFRvcHx8KHQuX19kaWRXYWl0Rm9yU2l6ZT0hMCx0Ll9fd2FpdEZvclNpemUoKSl9LF9fd2FpdEZvclNpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2NsZWFyVGltZW91dChlLl9fc2l6ZXJUaW1lb3V0KTt2YXIgdD1mdW5jdGlvbigpe2UucmVzaXplKCksZS5vcHRpb25zLnNjcm9sbGluZ1gmJiFlLl9fbWF4U2Nyb2xsTGVmdHx8ZS5vcHRpb25zLnNjcm9sbGluZ1kmJiFlLl9fbWF4U2Nyb2xsVG9wfTt0KCksZS5fX3NpemVyVGltZW91dD1zZXRUaW1lb3V0KHQsMWUzKX0sX19zdGFydERlY2VsZXJhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoZS5vcHRpb25zLnBhZ2luZyl7dmFyIHQ9TWF0aC5tYXgoTWF0aC5taW4oZS5fX3Njcm9sbExlZnQsZS5fX21heFNjcm9sbExlZnQpLDApLG49TWF0aC5tYXgoTWF0aC5taW4oZS5fX3Njcm9sbFRvcCxlLl9fbWF4U2Nyb2xsVG9wKSwwKSxpPWUuX19jbGllbnRXaWR0aCxyPWUuX19jbGllbnRIZWlnaHQ7ZS5fX21pbkRlY2VsZXJhdGlvblNjcm9sbExlZnQ9TWF0aC5mbG9vcih0L2kpKmksZS5fX21pbkRlY2VsZXJhdGlvblNjcm9sbFRvcD1NYXRoLmZsb29yKG4vcikqcixlLl9fbWF4RGVjZWxlcmF0aW9uU2Nyb2xsTGVmdD1NYXRoLmNlaWwodC9pKSppLGUuX19tYXhEZWNlbGVyYXRpb25TY3JvbGxUb3A9TWF0aC5jZWlsKG4vcikqcn1lbHNlIGUuX19taW5EZWNlbGVyYXRpb25TY3JvbGxMZWZ0PTAsZS5fX21pbkRlY2VsZXJhdGlvblNjcm9sbFRvcD0wLGUuX19tYXhEZWNlbGVyYXRpb25TY3JvbGxMZWZ0PWUuX19tYXhTY3JvbGxMZWZ0LGUuX19tYXhEZWNlbGVyYXRpb25TY3JvbGxUb3A9ZS5fX21heFNjcm9sbFRvcCxlLl9fcmVmcmVzaEFjdGl2ZSYmKGUuX19taW5EZWNlbGVyYXRpb25TY3JvbGxUb3A9LTEqZS5fX3JlZnJlc2hIZWlnaHQpO3ZhciBvPWZ1bmN0aW9uKHQsbixpKXtlLl9fc3RlcFRocm91Z2hEZWNlbGVyYXRpb24oaSl9O2UuX19taW5WZWxvY2l0eVRvS2VlcERlY2VsZXJhdGluZz1lLm9wdGlvbnMuc25hcHBpbmc/NDouMTt2YXIgcz1mdW5jdGlvbigpe3ZhciB0PU1hdGguYWJzKGUuX19kZWNlbGVyYXRpb25WZWxvY2l0eVgpPj1lLl9fbWluVmVsb2NpdHlUb0tlZXBEZWNlbGVyYXRpbmd8fE1hdGguYWJzKGUuX19kZWNlbGVyYXRpb25WZWxvY2l0eVkpPj1lLl9fbWluVmVsb2NpdHlUb0tlZXBEZWNlbGVyYXRpbmc7cmV0dXJuIHR8fChlLl9fZGlkRGVjZWxlcmF0aW9uQ29tcGxldGU9ITAsZS5vcHRpb25zLmJvdW5jaW5nJiYhZS5fX3JlZnJlc2hBY3RpdmUmJmUuc2Nyb2xsVG8oTWF0aC5taW4oTWF0aC5tYXgoZS5fX3Njcm9sbExlZnQsMCksZS5fX21heFNjcm9sbExlZnQpLE1hdGgubWluKE1hdGgubWF4KGUuX19zY3JvbGxUb3AsMCksZS5fX21heFNjcm9sbFRvcCksZS5fX3JlZnJlc2hBY3RpdmUpKSx0fSxhPWZ1bmN0aW9uKCl7ZS5fX2lzRGVjZWxlcmF0aW5nPSExLGUuX19kaWREZWNlbGVyYXRpb25Db21wbGV0ZSYmZS5fX3Njcm9sbGluZ0NvbXBsZXRlKCksZS5vcHRpb25zLnBhZ2luZyYmZS5zY3JvbGxUbyhlLl9fc2Nyb2xsTGVmdCxlLl9fc2Nyb2xsVG9wLGUub3B0aW9ucy5zbmFwcGluZyl9O2UuX19pc0RlY2VsZXJhdGluZz1zdC5lZmZlY3QuQW5pbWF0ZS5zdGFydChvLHMsYSl9LF9fc3RlcFRocm91Z2hEZWNlbGVyYXRpb246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuX19zY3JvbGxMZWZ0K3QuX19kZWNlbGVyYXRpb25WZWxvY2l0eVgsaT10Ll9fc2Nyb2xsVG9wK3QuX19kZWNlbGVyYXRpb25WZWxvY2l0eVk7aWYoIXQub3B0aW9ucy5ib3VuY2luZyl7dmFyIHI9TWF0aC5tYXgoTWF0aC5taW4odC5fX21heERlY2VsZXJhdGlvblNjcm9sbExlZnQsbiksdC5fX21pbkRlY2VsZXJhdGlvblNjcm9sbExlZnQpO3IhPT1uJiYobj1yLHQuX19kZWNlbGVyYXRpb25WZWxvY2l0eVg9MCk7dmFyIG89TWF0aC5tYXgoTWF0aC5taW4odC5fX21heERlY2VsZXJhdGlvblNjcm9sbFRvcCxpKSx0Ll9fbWluRGVjZWxlcmF0aW9uU2Nyb2xsVG9wKTtvIT09aSYmKGk9byx0Ll9fZGVjZWxlcmF0aW9uVmVsb2NpdHlZPTApfWlmKGU/dC5fX3B1Ymxpc2gobixpLHQuX196b29tTGV2ZWwpOih0Ll9fc2Nyb2xsTGVmdD1uLHQuX19zY3JvbGxUb3A9aSksIXQub3B0aW9ucy5wYWdpbmcpe3ZhciBzPXQub3B0aW9ucy5kZWNlbGVyYXRpb247dC5fX2RlY2VsZXJhdGlvblZlbG9jaXR5WCo9cyx0Ll9fZGVjZWxlcmF0aW9uVmVsb2NpdHlZKj1zfWlmKHQub3B0aW9ucy5ib3VuY2luZyl7dmFyIGE9MCxsPTAsYz10Lm9wdGlvbnMucGVuZXRyYXRpb25EZWNlbGVyYXRpb24sdT10Lm9wdGlvbnMucGVuZXRyYXRpb25BY2NlbGVyYXRpb247aWYobjx0Ll9fbWluRGVjZWxlcmF0aW9uU2Nyb2xsTGVmdD9hPXQuX19taW5EZWNlbGVyYXRpb25TY3JvbGxMZWZ0LW46bj50Ll9fbWF4RGVjZWxlcmF0aW9uU2Nyb2xsTGVmdCYmKGE9dC5fX21heERlY2VsZXJhdGlvblNjcm9sbExlZnQtbiksaTx0Ll9fbWluRGVjZWxlcmF0aW9uU2Nyb2xsVG9wP2w9dC5fX21pbkRlY2VsZXJhdGlvblNjcm9sbFRvcC1pOmk+dC5fX21heERlY2VsZXJhdGlvblNjcm9sbFRvcCYmKGw9dC5fX21heERlY2VsZXJhdGlvblNjcm9sbFRvcC1pKSwwIT09YSl7dmFyIGg9YSp0Ll9fZGVjZWxlcmF0aW9uVmVsb2NpdHlYPD10Ll9fbWluRGVjZWxlcmF0aW9uU2Nyb2xsTGVmdDtoJiYodC5fX2RlY2VsZXJhdGlvblZlbG9jaXR5WCs9YSpjKTt2YXIgZD1NYXRoLmFicyh0Ll9fZGVjZWxlcmF0aW9uVmVsb2NpdHlYKTw9dC5fX21pblZlbG9jaXR5VG9LZWVwRGVjZWxlcmF0aW5nOyghaHx8ZCkmJih0Ll9fZGVjZWxlcmF0aW9uVmVsb2NpdHlYPWEqdSl9aWYoMCE9PWwpe3ZhciBfPWwqdC5fX2RlY2VsZXJhdGlvblZlbG9jaXR5WTw9dC5fX21pbkRlY2VsZXJhdGlvblNjcm9sbFRvcDtfJiYodC5fX2RlY2VsZXJhdGlvblZlbG9jaXR5WSs9bCpjKTt2YXIgZj1NYXRoLmFicyh0Ll9fZGVjZWxlcmF0aW9uVmVsb2NpdHlZKTw9dC5fX21pblZlbG9jaXR5VG9LZWVwRGVjZWxlcmF0aW5nOyghX3x8ZikmJih0Ll9fZGVjZWxlcmF0aW9uVmVsb2NpdHlZPWwqdSl9fX0sX19nZXREaXN0YW5jZTpmdW5jdGlvbihlLHQpe3ZhciBuPXQucGFnZVgtZS5wYWdlWCxpPXQucGFnZVktZS5wYWdlWTtyZXR1cm4gTWF0aC5zcXJ0KG4qbitpKmkpfSxfX2dldFNjYWxlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztyZXR1cm4gZS5sZW5ndGg+PTImJnQubGVuZ3RoPj0yP24uX19nZXREaXN0YW5jZSh0WzBdLHRbMV0pL24uX19nZXREaXN0YW5jZShlWzBdLGVbMV0pOjF9fSksZS5zY3JvbGw9e2lzU2Nyb2xsaW5nOiExLGxhc3RUb3A6MH19KGlvbmljKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtlLnZpZXdzLkhlYWRlckJhcj1lLnZpZXdzLlZpZXcuaW5oZXJpdCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt0aGlzLmVsPXQuZWwsZS5leHRlbmQodGhpcyx7YWxpZ25UaXRsZTpcImNlbnRlclwifSx0KSx0aGlzLmFsaWduKCl9LGFsaWduOmZ1bmN0aW9uKHQpe3R8fCh0PXRoaXMuYWxpZ25UaXRsZSk7dmFyIG49dGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLnRpdGxlXCIpO2lmKG4pe3ZhciBpPXRoaXM7ZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXt2YXIgcixvLHMsYT1pLmVsLmNoaWxkTm9kZXMsbD0wLGM9MCx1PSExO2ZvcihyPTA7cjxhLmxlbmd0aDtyKyspaWYobz1hW3JdLG8udGFnTmFtZSYmXCJoMVwiPT1vLnRhZ05hbWUudG9Mb3dlckNhc2UoKSl1PSEwO2Vsc2V7aWYocz1udWxsLDM9PW8ubm9kZVR5cGUpe3ZhciBoPWUuRG9tVXRpbC5nZXRUZXh0Qm91bmRzKG8pO2gmJihzPWgud2lkdGgpfWVsc2UgMT09by5ub2RlVHlwZSYmKHM9by5vZmZzZXRXaWR0aCk7cyYmKHU/Yys9czpsKz1zKX12YXIgZD1NYXRoLm1heChsLGMpKzEwO24uc3R5bGUubGVmdD1uLnN0eWxlLnJpZ2h0PVwiXCIsXCJjZW50ZXJcIj09dD8oZD4xMCYmKG4uc3R5bGUubGVmdD1kK1wicHhcIixuLnN0eWxlLnJpZ2h0PWQrXCJweFwiKSxuLm9mZnNldFdpZHRoPG4uc2Nyb2xsV2lkdGgmJmM+MCYmKG4uc3R5bGUucmlnaHQ9Yys1K1wicHhcIikpOlwibGVmdFwiPT10PyhuLmNsYXNzTGlzdC5hZGQoXCJ0aXRsZS1sZWZ0XCIpLGw+MCYmKG4uc3R5bGUubGVmdD1sKzE1K1wicHhcIikpOlwicmlnaHRcIj09dCYmKG4uY2xhc3NMaXN0LmFkZChcInRpdGxlLXJpZ2h0XCIpLGM+MCYmKG4uc3R5bGUucmlnaHQ9YysxNStcInB4XCIpKX0pfX19KX0oaW9uaWMpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciB0PVwiaXRlbVwiLG49XCJpdGVtLWNvbnRlbnRcIixpPVwiaXRlbS1zbGlkaW5nXCIscj1cIml0ZW0tb3B0aW9uc1wiLG89XCJpdGVtLXBsYWNlaG9sZGVyXCIscz1cIml0ZW0tcmVvcmRlcmluZ1wiLGE9XCJpdGVtLXJlb3JkZXJcIixsPWZ1bmN0aW9uKCl7fTtsLnByb3RvdHlwZT17c3RhcnQ6ZnVuY3Rpb24oKXt9LGRyYWc6ZnVuY3Rpb24oKXt9LGVuZDpmdW5jdGlvbigpe30saXNTYW1lSXRlbTpmdW5jdGlvbigpe3JldHVybiExfX07dmFyIGM9ZnVuY3Rpb24oZSl7dGhpcy5kcmFnVGhyZXNob2xkWD1lLmRyYWdUaHJlc2hvbGRYfHwxMCx0aGlzLmVsPWUuZWwsdGhpcy5jYW5Td2lwZT1lLmNhblN3aXBlfTtjLnByb3RvdHlwZT1uZXcgbCxjLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihvKXt2YXIgcyxhLGwsYzt0aGlzLmNhblN3aXBlKCkmJihzPW8udGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhuKT9vLnRhcmdldDpvLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModCk/by50YXJnZXQucXVlcnlTZWxlY3RvcihcIi5cIituKTplLkRvbVV0aWwuZ2V0UGFyZW50V2l0aENsYXNzKG8udGFyZ2V0LG4pLHMmJihzLmNsYXNzTGlzdC5yZW1vdmUoaSksbD1wYXJzZUZsb2F0KHMuc3R5bGVbZS5DU1MuVFJBTlNGT1JNXS5yZXBsYWNlKFwidHJhbnNsYXRlM2QoXCIsXCJcIikuc3BsaXQoXCIsXCIpWzBdKXx8MCxhPXMucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKFwiLlwiK3IpLGEmJihhLmNsYXNzTGlzdC5yZW1vdmUoXCJpbnZpc2libGVcIiksYz1hLm9mZnNldFdpZHRoLHRoaXMuX2N1cnJlbnREcmFnPXtidXR0b25zOmEsYnV0dG9uc1dpZHRoOmMsY29udGVudDpzLHN0YXJ0T2Zmc2V0WDpsfSkpKX0sYy5wcm90b3R5cGUuaXNTYW1lSXRlbT1mdW5jdGlvbihlKXtyZXR1cm4gZS5fbGFzdERyYWcmJnRoaXMuX2N1cnJlbnREcmFnP3RoaXMuX2N1cnJlbnREcmFnLmNvbnRlbnQ9PWUuX2xhc3REcmFnLmNvbnRlbnQ6ITF9LGMucHJvdG90eXBlLmNsZWFuPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbGFzdERyYWc7dCYmKHQuY29udGVudC5zdHlsZVtlLkNTUy5UUkFOU0lUSU9OXT1cIlwiLHQuY29udGVudC5zdHlsZVtlLkNTUy5UUkFOU0ZPUk1dPVwiXCIsZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5idXR0b25zJiZ0LmJ1dHRvbnMuY2xhc3NMaXN0LmFkZChcImludmlzaWJsZVwiKX0sMjUwKX0pKX0sYy5wcm90b3R5cGUuZHJhZz1lLmFuaW1hdGlvbkZyYW1lVGhyb3R0bGUoZnVuY3Rpb24odCl7dmFyIG47aWYodGhpcy5fY3VycmVudERyYWcmJighdGhpcy5faXNEcmFnZ2luZyYmKE1hdGguYWJzKHQuZ2VzdHVyZS5kZWx0YVgpPnRoaXMuZHJhZ1RocmVzaG9sZFh8fE1hdGguYWJzKHRoaXMuX2N1cnJlbnREcmFnLnN0YXJ0T2Zmc2V0WCk+MCkmJih0aGlzLl9pc0RyYWdnaW5nPSEwKSx0aGlzLl9pc0RyYWdnaW5nKSl7bj10aGlzLl9jdXJyZW50RHJhZy5idXR0b25zV2lkdGg7dmFyIGk9TWF0aC5taW4oMCx0aGlzLl9jdXJyZW50RHJhZy5zdGFydE9mZnNldFgrdC5nZXN0dXJlLmRlbHRhWCk7LW4+aSYmKGk9TWF0aC5taW4oLW4sLW4rLjQqKHQuZ2VzdHVyZS5kZWx0YVgrbikpKSx0aGlzLl9jdXJyZW50RHJhZy5jb250ZW50LnN0eWxlW2UuQ1NTLlRSQU5TRk9STV09XCJ0cmFuc2xhdGUzZChcIitpK1wicHgsIDAsIDApXCIsdGhpcy5fY3VycmVudERyYWcuY29udGVudC5zdHlsZVtlLkNTUy5UUkFOU0lUSU9OXT1cIm5vbmVcIlxufX0pLGMucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0LG4pe3ZhciBpPXRoaXM7aWYoIXRoaXMuX2N1cnJlbnREcmFnKXJldHVybiB2b2lkKG4mJm4oKSk7dmFyIHI9LXRoaXMuX2N1cnJlbnREcmFnLmJ1dHRvbnNXaWR0aDt0Lmdlc3R1cmUuZGVsdGFYPi0odGhpcy5fY3VycmVudERyYWcuYnV0dG9uc1dpZHRoLzIpJiYoXCJsZWZ0XCI9PXQuZ2VzdHVyZS5kaXJlY3Rpb24mJk1hdGguYWJzKHQuZ2VzdHVyZS52ZWxvY2l0eVgpPC4zP3I9MDpcInJpZ2h0XCI9PXQuZ2VzdHVyZS5kaXJlY3Rpb24mJihyPTApKSxlLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe2lmKDA9PT1yKXtpLl9jdXJyZW50RHJhZy5jb250ZW50LnN0eWxlW2UuQ1NTLlRSQU5TRk9STV09XCJcIjt2YXIgdD1pLl9jdXJyZW50RHJhZy5idXR0b25zO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0JiZ0LmNsYXNzTGlzdC5hZGQoXCJpbnZpc2libGVcIil9LDI1MCl9ZWxzZSBpLl9jdXJyZW50RHJhZy5jb250ZW50LnN0eWxlW2UuQ1NTLlRSQU5TRk9STV09XCJ0cmFuc2xhdGUzZChcIityK1wicHgsIDAsIDApXCI7aS5fY3VycmVudERyYWcuY29udGVudC5zdHlsZVtlLkNTUy5UUkFOU0lUSU9OXT1cIlwiLGkuX2xhc3REcmFnPWkuX2N1cnJlbnREcmFnLGkuX2N1cnJlbnREcmFnPW51bGwsbiYmbigpfSl9O3ZhciB1PWZ1bmN0aW9uKGUpe2lmKHRoaXMuZHJhZ1RocmVzaG9sZFk9ZS5kcmFnVGhyZXNob2xkWXx8MCx0aGlzLm9uUmVvcmRlcj1lLm9uUmVvcmRlcix0aGlzLmxpc3RFbD1lLmxpc3RFbCx0aGlzLmVsPWUuZWwsdGhpcy5zY3JvbGxFbD1lLnNjcm9sbEVsLHRoaXMuc2Nyb2xsVmlldz1lLnNjcm9sbFZpZXcsdGhpcy5saXN0RWxUcnVlVG9wPTAsdGhpcy5saXN0RWwub2Zmc2V0UGFyZW50KXt2YXIgdD10aGlzLmxpc3RFbDtkbyB0aGlzLmxpc3RFbFRydWVUb3ArPXQub2Zmc2V0VG9wLHQ9dC5vZmZzZXRQYXJlbnQ7d2hpbGUodCl9fTt1LnByb3RvdHlwZT1uZXcgbCx1LnByb3RvdHlwZS5fbW92ZUVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIG49dC5nZXN0dXJlLmNlbnRlci5wYWdlWSt0aGlzLnNjcm9sbFZpZXcuZ2V0VmFsdWVzKCkudG9wLXRoaXMuX2N1cnJlbnREcmFnLmVsZW1lbnRIZWlnaHQvMi10aGlzLmxpc3RFbFRydWVUb3A7dGhpcy5lbC5zdHlsZVtlLkNTUy5UUkFOU0ZPUk1dPVwidHJhbnNsYXRlM2QoMCwgXCIrbitcInB4LCAwKVwifSx1LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXt2YXIgbj1lLkRvbVV0aWwuZ2V0Q2hpbGRJbmRleCh0aGlzLmVsLHRoaXMuZWwubm9kZU5hbWUudG9Mb3dlckNhc2UoKSksaT10aGlzLmVsLnNjcm9sbEhlaWdodCxyPXRoaXMuZWwuY2xvbmVOb2RlKCEwKTtyLmNsYXNzTGlzdC5hZGQobyksdGhpcy5lbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShyLHRoaXMuZWwpLHRoaXMuZWwuY2xhc3NMaXN0LmFkZChzKSx0aGlzLl9jdXJyZW50RHJhZz17ZWxlbWVudEhlaWdodDppLHN0YXJ0SW5kZXg6bixwbGFjZWhvbGRlcjpyLHNjcm9sbEhlaWdodDpzY3JvbGwsbGlzdDpyLnBhcmVudE5vZGV9LHRoaXMuX21vdmVFbGVtZW50KHQpfSx1LnByb3RvdHlwZS5kcmFnPWUuYW5pbWF0aW9uRnJhbWVUaHJvdHRsZShmdW5jdGlvbih0KXt2YXIgbj10aGlzO2lmKHRoaXMuX2N1cnJlbnREcmFnKXt2YXIgaT0wLHI9dC5nZXN0dXJlLmNlbnRlci5wYWdlWSxvPXRoaXMubGlzdEVsVHJ1ZVRvcDtpZih0aGlzLnNjcm9sbFZpZXcpe3ZhciBzPXRoaXMuc2Nyb2xsVmlldy5fX2NvbnRhaW5lcjtpPXRoaXMuc2Nyb2xsVmlldy5nZXRWYWx1ZXMoKS50b3A7dmFyIGE9cy5vZmZzZXRUb3AsbD1hLXIrdGhpcy5fY3VycmVudERyYWcuZWxlbWVudEhlaWdodC8yLGM9cit0aGlzLl9jdXJyZW50RHJhZy5lbGVtZW50SGVpZ2h0LzItYS1zLm9mZnNldEhlaWdodDt0Lmdlc3R1cmUuZGVsdGFZPDAmJmw+MCYmaT4wJiYodGhpcy5zY3JvbGxWaWV3LnNjcm9sbEJ5KG51bGwsLWwpLGUucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7bi5kcmFnKHQpfSkpLHQuZ2VzdHVyZS5kZWx0YVk+MCYmYz4wJiZpPHRoaXMuc2Nyb2xsVmlldy5nZXRTY3JvbGxNYXgoKS50b3AmJih0aGlzLnNjcm9sbFZpZXcuc2Nyb2xsQnkobnVsbCxjKSxlLnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe24uZHJhZyh0KX0pKX0hdGhpcy5faXNEcmFnZ2luZyYmTWF0aC5hYnModC5nZXN0dXJlLmRlbHRhWSk+dGhpcy5kcmFnVGhyZXNob2xkWSYmKHRoaXMuX2lzRHJhZ2dpbmc9ITApLHRoaXMuX2lzRHJhZ2dpbmcmJih0aGlzLl9tb3ZlRWxlbWVudCh0KSx0aGlzLl9jdXJyZW50RHJhZy5jdXJyZW50WT1pK3Itbyl9fSksdS5wcm90b3R5cGUuX2dldFJlb3JkZXJJbmRleD1mdW5jdGlvbigpe2Zvcih2YXIgZSx0PXRoaXMsbj0odGhpcy5fY3VycmVudERyYWcucGxhY2Vob2xkZXIsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fY3VycmVudERyYWcucGxhY2Vob2xkZXIucGFyZW50Tm9kZS5jaGlsZHJlbikuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLm5vZGVOYW1lPT09dC5lbC5ub2RlTmFtZSYmZSE9PXQuZWx9KSksaT10aGlzLl9jdXJyZW50RHJhZy5jdXJyZW50WSxyPTAsbz1uLmxlbmd0aDtvPnI7cisrKWlmKGU9bltyXSxyPT09by0xKXtpZihpPmUub2Zmc2V0VG9wKXJldHVybiByfWVsc2UgaWYoMD09PXIpe2lmKGk8ZS5vZmZzZXRUb3ArZS5vZmZzZXRIZWlnaHQpcmV0dXJuIHJ9ZWxzZSBpZihpPmUub2Zmc2V0VG9wLWUub2Zmc2V0SGVpZ2h0LzImJmk8ZS5vZmZzZXRUb3ArZS5vZmZzZXRIZWlnaHQpcmV0dXJuIHI7cmV0dXJuIHRoaXMuX2N1cnJlbnREcmFnLnN0YXJ0SW5kZXh9LHUucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0LG4pe2lmKCF0aGlzLl9jdXJyZW50RHJhZylyZXR1cm4gdm9pZChuJiZuKCkpO3ZhciBpPXRoaXMuX2N1cnJlbnREcmFnLnBsYWNlaG9sZGVyLHI9dGhpcy5fZ2V0UmVvcmRlckluZGV4KCk7dGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKHMpLHRoaXMuZWwuc3R5bGVbZS5DU1MuVFJBTlNGT1JNXT1cIlwiLGkucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5lbCxpKSxpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaSksdGhpcy5vblJlb3JkZXImJnRoaXMub25SZW9yZGVyKHRoaXMuZWwsdGhpcy5fY3VycmVudERyYWcuc3RhcnRJbmRleCxyKSx0aGlzLl9jdXJyZW50RHJhZz1udWxsLG4mJm4oKX0sZS52aWV3cy5MaXN0Vmlldz1lLnZpZXdzLlZpZXcuaW5oZXJpdCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt2YXIgbj10aGlzO3Q9ZS5leHRlbmQoe29uUmVvcmRlcjpmdW5jdGlvbigpe30sdmlydHVhbFJlbW92ZVRocmVzaG9sZDotMjAwLHZpcnR1YWxBZGRUaHJlc2hvbGQ6MjAwLGNhblN3aXBlOmZ1bmN0aW9uKCl7cmV0dXJuITB9fSx0KSxlLmV4dGVuZCh0aGlzLHQpLCF0aGlzLml0ZW1IZWlnaHQmJnRoaXMubGlzdEVsJiYodGhpcy5pdGVtSGVpZ2h0PXRoaXMubGlzdEVsLmNoaWxkcmVuWzBdJiZwYXJzZUludCh0aGlzLmxpc3RFbC5jaGlsZHJlblswXS5zdHlsZS5oZWlnaHQsMTApKSx0aGlzLm9uUmVmcmVzaD10Lm9uUmVmcmVzaHx8ZnVuY3Rpb24oKXt9LHRoaXMub25SZWZyZXNoT3BlbmluZz10Lm9uUmVmcmVzaE9wZW5pbmd8fGZ1bmN0aW9uKCl7fSx0aGlzLm9uUmVmcmVzaEhvbGRpbmc9dC5vblJlZnJlc2hIb2xkaW5nfHxmdW5jdGlvbigpe30sd2luZG93LmlvbmljLm9uR2VzdHVyZShcInJlbGVhc2VcIixmdW5jdGlvbihlKXtuLl9oYW5kbGVFbmREcmFnKGUpfSx0aGlzLmVsKSx3aW5kb3cuaW9uaWMub25HZXN0dXJlKFwiZHJhZ1wiLGZ1bmN0aW9uKGUpe24uX2hhbmRsZURyYWcoZSl9LHRoaXMuZWwpLHRoaXMuX2luaXREcmFnKCl9LHN0b3BSZWZyZXNoaW5nOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLmxpc3QtcmVmcmVzaGVyXCIpO2Uuc3R5bGUuaGVpZ2h0PVwiMHB4XCJ9LGRpZFNjcm9sbDpmdW5jdGlvbihlKXtpZih0aGlzLmlzVmlydHVhbCl7dmFyIHQ9dGhpcy5pdGVtSGVpZ2h0LG49KHRoaXMubGlzdEVsLmNoaWxkcmVuLmxlbmd0aCxlLnRhcmdldC5zY3JvbGxIZWlnaHQpLGk9dGhpcy5lbC5wYXJlbnROb2RlLm9mZnNldEhlaWdodCxyPShlLnNjcm9sbFRvcCxNYXRoLm1heCgwLGUuc2Nyb2xsVG9wK3RoaXMudmlydHVhbFJlbW92ZVRocmVzaG9sZCkpLG89TWF0aC5taW4obixNYXRoLmFicyhlLnNjcm9sbFRvcCkraSt0aGlzLnZpcnR1YWxBZGRUaHJlc2hvbGQpLHM9TWF0aC5mbG9vcigoby1yKS90KSxhPXBhcnNlSW50KE1hdGguYWJzKHIvdCksMTApLGw9cGFyc2VJbnQoTWF0aC5hYnMoby90KSwxMCk7dGhpcy5fdmlydHVhbEl0ZW1zVG9SZW1vdmU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5saXN0RWwuY2hpbGRyZW4sMCxhKTt7QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5saXN0RWwuY2hpbGRyZW4sYSxhK3MpfXRoaXMucmVuZGVyVmlld3BvcnQmJnRoaXMucmVuZGVyVmlld3BvcnQocixvLGEsbCl9fSxkaWRTdG9wU2Nyb2xsaW5nOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1ZpcnR1YWwpZm9yKHZhciBlPTA7ZTx0aGlzLl92aXJ0dWFsSXRlbXNUb1JlbW92ZS5sZW5ndGg7ZSsrKXt7dGhpcy5fdmlydHVhbEl0ZW1zVG9SZW1vdmVbZV19dGhpcy5kaWRIaWRlSXRlbSYmdGhpcy5kaWRIaWRlSXRlbShlKX19LGNsZWFyRHJhZ0VmZmVjdHM6ZnVuY3Rpb24oKXt0aGlzLl9sYXN0RHJhZ09wJiYodGhpcy5fbGFzdERyYWdPcC5jbGVhbiYmdGhpcy5fbGFzdERyYWdPcC5jbGVhbigpLHRoaXMuX2xhc3REcmFnT3A9bnVsbCl9LF9pbml0RHJhZzpmdW5jdGlvbigpe3RoaXMuX2xhc3REcmFnT3A9dGhpcy5fZHJhZ09wLHRoaXMuX2RyYWdPcD1udWxsfSxfZ2V0SXRlbTpmdW5jdGlvbihlKXtmb3IoO2U7KXtpZihlLmNsYXNzTGlzdCYmZS5jbGFzc0xpc3QuY29udGFpbnModCkpcmV0dXJuIGU7ZT1lLnBhcmVudE5vZGV9cmV0dXJuIG51bGx9LF9zdGFydERyYWc6ZnVuY3Rpb24odCl7dmFyIG49dGhpczt0aGlzLl9pc0RyYWdnaW5nPSExO3ZhciBpLHI9dGhpcy5fbGFzdERyYWdPcDshZS5Eb21VdGlsLmdldFBhcmVudE9yU2VsZldpdGhDbGFzcyh0LnRhcmdldCxhKXx8XCJ1cFwiIT10Lmdlc3R1cmUuZGlyZWN0aW9uJiZcImRvd25cIiE9dC5nZXN0dXJlLmRpcmVjdGlvbj8hdGhpcy5fZGlkRHJhZ1VwT3JEb3duJiYoXCJsZWZ0XCI9PXQuZ2VzdHVyZS5kaXJlY3Rpb258fFwicmlnaHRcIj09dC5nZXN0dXJlLmRpcmVjdGlvbikmJk1hdGguYWJzKHQuZ2VzdHVyZS5kZWx0YVgpPjUmJihpPXRoaXMuX2dldEl0ZW0odC50YXJnZXQpLGkmJmkucXVlcnlTZWxlY3RvcihcIi5pdGVtLW9wdGlvbnNcIikmJih0aGlzLl9kcmFnT3A9bmV3IGMoe2VsOnRoaXMuZWwsY2FuU3dpcGU6dGhpcy5jYW5Td2lwZX0pLHRoaXMuX2RyYWdPcC5zdGFydCh0KSx0LnByZXZlbnREZWZhdWx0KCkpKTooaT10aGlzLl9nZXRJdGVtKHQudGFyZ2V0KSxpJiYodGhpcy5fZHJhZ09wPW5ldyB1KHtsaXN0RWw6dGhpcy5lbCxlbDppLHNjcm9sbEVsOnRoaXMuc2Nyb2xsRWwsc2Nyb2xsVmlldzp0aGlzLnNjcm9sbFZpZXcsb25SZW9yZGVyOmZ1bmN0aW9uKGUsdCxpKXtuLm9uUmVvcmRlciYmbi5vblJlb3JkZXIoZSx0LGkpfX0pLHRoaXMuX2RyYWdPcC5zdGFydCh0KSx0LnByZXZlbnREZWZhdWx0KCkpKSxyJiZ0aGlzLl9kcmFnT3AmJiF0aGlzLl9kcmFnT3AuaXNTYW1lSXRlbShyKSYmdC5kZWZhdWx0UHJldmVudGVkJiZyLmNsZWFuJiZyLmNsZWFuKCl9LF9oYW5kbGVFbmREcmFnOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fZGlkRHJhZ1VwT3JEb3duPSExLHRoaXMuX2RyYWdPcCYmdGhpcy5fZHJhZ09wLmVuZChlLGZ1bmN0aW9uKCl7dC5faW5pdERyYWcoKX0pfSxfaGFuZGxlRHJhZzpmdW5jdGlvbihlKXtNYXRoLmFicyhlLmdlc3R1cmUuZGVsdGFZKT41JiYodGhpcy5fZGlkRHJhZ1VwT3JEb3duPSEwKSx0aGlzLmlzRHJhZ2dpbmd8fHRoaXMuX2RyYWdPcHx8dGhpcy5fc3RhcnREcmFnKGUpLHRoaXMuX2RyYWdPcCYmKGUuZ2VzdHVyZS5zcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2RyYWdPcC5kcmFnKGUpKX19KX0oaW9uaWMpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Uudmlld3MuTW9kYWw9ZS52aWV3cy5WaWV3LmluaGVyaXQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCl7dD1lLmV4dGVuZCh7Zm9jdXNGaXJzdElucHV0OiExLHVuZm9jdXNPbkhpZGU6ITAsZm9jdXNGaXJzdERlbGF5OjYwMCxiYWNrZHJvcENsaWNrVG9DbG9zZTohMCxoYXJkd2FyZUJhY2tCdXR0b25DbG9zZTohMH0sdCksZS5leHRlbmQodGhpcyx0KSx0aGlzLmVsPXQuZWx9LHNob3c6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuZm9jdXNGaXJzdElucHV0JiZ3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PWUuZWwucXVlcnlTZWxlY3RvcihcImlucHV0LCB0ZXh0YXJlYVwiKTt0JiZ0LmZvY3VzJiZ0LmZvY3VzKCl9LGUuZm9jdXNGaXJzdERlbGF5KX0saGlkZTpmdW5jdGlvbigpe2lmKHRoaXMudW5mb2N1c09uSGlkZSl7dmFyIGU9dGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXQsIHRleHRhcmVhXCIpO3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspZVt0XS5ibHVyJiZlW3RdLmJsdXIoKX0pfX19KX0oaW9uaWMpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Uudmlld3MuU2lkZU1lbnU9ZS52aWV3cy5WaWV3LmluaGVyaXQoe2luaXRpYWxpemU6ZnVuY3Rpb24oZSl7dGhpcy5lbD1lLmVsLHRoaXMuaXNFbmFibGVkPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBlLmlzRW5hYmxlZD8hMDplLmlzRW5hYmxlZCx0aGlzLnNldFdpZHRoKGUud2lkdGgpfSxnZXRGdWxsV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53aWR0aH0sc2V0V2lkdGg6ZnVuY3Rpb24oZSl7dGhpcy53aWR0aD1lLHRoaXMuZWwuc3R5bGUud2lkdGg9ZStcInB4XCJ9LHNldElzRW5hYmxlZDpmdW5jdGlvbihlKXt0aGlzLmlzRW5hYmxlZD1lfSxicmluZ1VwOmZ1bmN0aW9uKCl7XCIwXCIhPT10aGlzLmVsLnN0eWxlLnpJbmRleCYmKHRoaXMuZWwuc3R5bGUuekluZGV4PVwiMFwiKX0scHVzaERvd246ZnVuY3Rpb24oKXtcIi0xXCIhPT10aGlzLmVsLnN0eWxlLnpJbmRleCYmKHRoaXMuZWwuc3R5bGUuekluZGV4PVwiLTFcIil9fSksZS52aWV3cy5TaWRlTWVudUNvbnRlbnQ9ZS52aWV3cy5WaWV3LmluaGVyaXQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCl7ZS5leHRlbmQodGhpcyx7YW5pbWF0aW9uQ2xhc3M6XCJtZW51LWFuaW1hdGVkXCIsb25EcmFnOmZ1bmN0aW9uKCl7fSxvbkVuZERyYWc6ZnVuY3Rpb24oKXt9fSx0KSxlLm9uR2VzdHVyZShcImRyYWdcIixlLnByb3h5KHRoaXMuX29uRHJhZyx0aGlzKSx0aGlzLmVsKSxlLm9uR2VzdHVyZShcInJlbGVhc2VcIixlLnByb3h5KHRoaXMuX29uRW5kRHJhZyx0aGlzKSx0aGlzLmVsKX0sX29uRHJhZzpmdW5jdGlvbihlKXt0aGlzLm9uRHJhZyYmdGhpcy5vbkRyYWcoZSl9LF9vbkVuZERyYWc6ZnVuY3Rpb24oZSl7dGhpcy5vbkVuZERyYWcmJnRoaXMub25FbmREcmFnKGUpfSxkaXNhYmxlQW5pbWF0aW9uOmZ1bmN0aW9uKCl7dGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuYW5pbWF0aW9uQ2xhc3MpfSxlbmFibGVBbmltYXRpb246ZnVuY3Rpb24oKXt0aGlzLmVsLmNsYXNzTGlzdC5hZGQodGhpcy5hbmltYXRpb25DbGFzcyl9LGdldFRyYW5zbGF0ZVg6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VGbG9hdCh0aGlzLmVsLnN0eWxlW2UuQ1NTLlRSQU5TRk9STV0ucmVwbGFjZShcInRyYW5zbGF0ZTNkKFwiLFwiXCIpLnNwbGl0KFwiLFwiKVswXSl9LHNldFRyYW5zbGF0ZVg6ZS5hbmltYXRpb25GcmFtZVRocm90dGxlKGZ1bmN0aW9uKHQpe3RoaXMuZWwuc3R5bGVbZS5DU1MuVFJBTlNGT1JNXT1cInRyYW5zbGF0ZTNkKFwiK3QrXCJweCwgMCwgMClcIn0pfSl9KGlvbmljKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtlLnZpZXdzLlNsaWRlcj1lLnZpZXdzLlZpZXcuaW5oZXJpdCh7aW5pdGlhbGl6ZTpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7bT1FLmNoaWxkcmVuLFQ9bS5sZW5ndGgsbS5sZW5ndGg8MiYmKGUuY29udGludW91cz0hMSksZi50cmFuc2l0aW9ucyYmZS5jb250aW51b3VzJiZtLmxlbmd0aDwzJiYoRS5hcHBlbmRDaGlsZChtWzBdLmNsb25lTm9kZSghMCkpLEUuYXBwZW5kQ2hpbGQoRS5jaGlsZHJlblsxXS5jbG9uZU5vZGUoITApKSxtPUUuY2hpbGRyZW4pLGc9bmV3IEFycmF5KG0ubGVuZ3RoKSx2PXAub2Zmc2V0V2lkdGh8fHAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgsRS5zdHlsZS53aWR0aD1tLmxlbmd0aCp2K1wicHhcIjtmb3IodmFyIHQ9bS5sZW5ndGg7dC0tOyl7dmFyIG49bVt0XTtuLnN0eWxlLndpZHRoPXYrXCJweFwiLG4uc2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiLHQpLGYudHJhbnNpdGlvbnMmJihuLnN0eWxlLmxlZnQ9dCotditcInB4XCIscyh0LFM+dD8tdjp0PlM/djowLDApKX1lLmNvbnRpbnVvdXMmJmYudHJhbnNpdGlvbnMmJihzKHIoUy0xKSwtdiwwKSxzKHIoUysxKSx2LDApKSxmLnRyYW5zaXRpb25zfHwoRS5zdHlsZS5sZWZ0PVMqLXYrXCJweFwiKSxwLnN0eWxlLnZpc2liaWxpdHk9XCJ2aXNpYmxlXCIsZS5zbGlkZXNDaGFuZ2VkJiZlLnNsaWRlc0NoYW5nZWQoKX1mdW5jdGlvbiBuKCl7ZS5jb250aW51b3VzP28oUy0xKTpTJiZvKFMtMSl9ZnVuY3Rpb24gaSgpe2UuY29udGludW91cz9vKFMrMSk6UzxtLmxlbmd0aC0xJiZvKFMrMSl9ZnVuY3Rpb24gcihlKXtyZXR1cm4obS5sZW5ndGgrZSVtLmxlbmd0aCklbS5sZW5ndGh9ZnVuY3Rpb24gbyh0LG4pe2lmKFMhPXQpe2lmKGYudHJhbnNpdGlvbnMpe3ZhciBpPU1hdGguYWJzKFMtdCkvKFMtdCk7aWYoZS5jb250aW51b3VzKXt2YXIgbz1pO2k9LWdbcih0KV0vdixpIT09byYmKHQ9LWkqbS5sZW5ndGgrdCl9Zm9yKHZhciBhPU1hdGguYWJzKFMtdCktMTthLS07KXMocigodD5TP3Q6UyktYS0xKSx2KmksMCk7dD1yKHQpLHMoUyx2Kmksbnx8dykscyh0LDAsbnx8dyksZS5jb250aW51b3VzJiZzKHIodC1pKSwtKHYqaSksMCl9ZWxzZSB0PXIodCksbChTKi12LHQqLXYsbnx8dyk7Uz10LF8oZS5jYWxsYmFjayYmZS5jYWxsYmFjayhTLG1bU10pKX19ZnVuY3Rpb24gcyhlLHQsbil7YShlLHQsbiksZ1tlXT10fWZ1bmN0aW9uIGEoZSx0LG4pe3ZhciBpPW1bZV0scj1pJiZpLnN0eWxlO3ImJihyLndlYmtpdFRyYW5zaXRpb25EdXJhdGlvbj1yLk1velRyYW5zaXRpb25EdXJhdGlvbj1yLm1zVHJhbnNpdGlvbkR1cmF0aW9uPXIuT1RyYW5zaXRpb25EdXJhdGlvbj1yLnRyYW5zaXRpb25EdXJhdGlvbj1uK1wibXNcIixyLndlYmtpdFRyYW5zZm9ybT1cInRyYW5zbGF0ZShcIit0K1wicHgsMCl0cmFuc2xhdGVaKDApXCIsci5tc1RyYW5zZm9ybT1yLk1velRyYW5zZm9ybT1yLk9UcmFuc2Zvcm09XCJ0cmFuc2xhdGVYKFwiK3QrXCJweClcIil9ZnVuY3Rpb24gbCh0LG4saSl7aWYoIWkpcmV0dXJuIHZvaWQoRS5zdHlsZS5sZWZ0PW4rXCJweFwiKTt2YXIgcj0rbmV3IERhdGUsbz1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3ZhciBzPStuZXcgRGF0ZS1yO3JldHVybiBzPmk/KEUuc3R5bGUubGVmdD1uK1wicHhcIixEJiZjKCksZS50cmFuc2l0aW9uRW5kJiZlLnRyYW5zaXRpb25FbmQuY2FsbChldmVudCxTLG1bU10pLHZvaWQgY2xlYXJJbnRlcnZhbChvKSk6dm9pZChFLnN0eWxlLmxlZnQ9KG4tdCkqKE1hdGguZmxvb3Iocy9pKjEwMCkvMTAwKSt0K1wicHhcIil9LDQpfWZ1bmN0aW9uIGMoKXtiPXNldFRpbWVvdXQoaSxEKX1mdW5jdGlvbiB1KCl7RD1lLmF1dG98fDAsY2xlYXJUaW1lb3V0KGIpfXZhciBoPXRoaXMsZD1mdW5jdGlvbigpe30sXz1mdW5jdGlvbihlKXtzZXRUaW1lb3V0KGV8fGQsMCl9LGY9e2FkZEV2ZW50TGlzdGVuZXI6ISF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcix0b3VjaDpcIm9udG91Y2hzdGFydFwiaW4gd2luZG93fHx3aW5kb3cuRG9jdW1lbnRUb3VjaCYmZG9jdW1lbnQgaW5zdGFuY2VvZiBEb2N1bWVudFRvdWNoLHRyYW5zaXRpb25zOmZ1bmN0aW9uKGUpe3ZhciB0PVtcInRyYW5zaXRpb25Qcm9wZXJ0eVwiLFwiV2Via2l0VHJhbnNpdGlvblwiLFwiTW96VHJhbnNpdGlvblwiLFwiT1RyYW5zaXRpb25cIixcIm1zVHJhbnNpdGlvblwiXTtmb3IodmFyIG4gaW4gdClpZih2b2lkIDAhPT1lLnN0eWxlW3Rbbl1dKXJldHVybiEwO3JldHVybiExfShkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3dpcGVcIikpfSxwPWUuZWw7aWYocCl7dmFyIG0sZyx2LFQsRT1wLmNoaWxkcmVuWzBdO2U9ZXx8e307dmFyIFM9cGFyc2VJbnQoZS5zdGFydFNsaWRlLDEwKXx8MCx3PWUuc3BlZWR8fDMwMDtlLmNvbnRpbnVvdXM9dm9pZCAwIT09ZS5jb250aW51b3VzP2UuY29udGludW91czohMDt2YXIgYix5LEQ9ZS5hdXRvfHwwLEw9e30seD17fSxNPXtoYW5kbGVFdmVudDpmdW5jdGlvbihuKXtzd2l0Y2goKFwibW91c2Vkb3duXCI9PW4udHlwZXx8XCJtb3VzZXVwXCI9PW4udHlwZXx8XCJtb3VzZW1vdmVcIj09bi50eXBlKSYmKG4udG91Y2hlcz1be3BhZ2VYOm4ucGFnZVgscGFnZVk6bi5wYWdlWX1dKSxuLnR5cGUpe2Nhc2VcIm1vdXNlZG93blwiOnRoaXMuc3RhcnQobik7YnJlYWs7Y2FzZVwidG91Y2hzdGFydFwiOnRoaXMuc3RhcnQobik7YnJlYWs7Y2FzZVwidG91Y2htb3ZlXCI6dGhpcy50b3VjaG1vdmUobik7YnJlYWs7Y2FzZVwibW91c2Vtb3ZlXCI6dGhpcy50b3VjaG1vdmUobik7YnJlYWs7Y2FzZVwidG91Y2hlbmRcIjpfKHRoaXMuZW5kKG4pKTticmVhaztjYXNlXCJtb3VzZXVwXCI6Xyh0aGlzLmVuZChuKSk7YnJlYWs7Y2FzZVwid2Via2l0VHJhbnNpdGlvbkVuZFwiOmNhc2VcIm1zVHJhbnNpdGlvbkVuZFwiOmNhc2VcIm9UcmFuc2l0aW9uRW5kXCI6Y2FzZVwib3RyYW5zaXRpb25lbmRcIjpjYXNlXCJ0cmFuc2l0aW9uZW5kXCI6Xyh0aGlzLnRyYW5zaXRpb25FbmQobikpO2JyZWFrO2Nhc2VcInJlc2l6ZVwiOl8odCl9ZS5zdG9wUHJvcGFnYXRpb24mJm4uc3RvcFByb3BhZ2F0aW9uKCl9LHN0YXJ0OmZ1bmN0aW9uKGUpe3ZhciB0PWUudG91Y2hlc1swXTtMPXt4OnQucGFnZVgseTp0LnBhZ2VZLHRpbWU6K25ldyBEYXRlfSx5PXZvaWQgMCx4PXt9LGYudG91Y2g/KEUuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMsITEpLEUuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcywhMSkpOihFLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLCExKSxFLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcywhMSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLCExKSl9LHRvdWNobW92ZTpmdW5jdGlvbih0KXtpZighKHQudG91Y2hlcy5sZW5ndGg+MXx8dC5zY2FsZSYmMSE9PXQuc2NhbGV8fGguc2xpZGVJc0Rpc2FibGVkKSl7ZS5kaXNhYmxlU2Nyb2xsJiZ0LnByZXZlbnREZWZhdWx0KCk7dmFyIG49dC50b3VjaGVzWzBdO3g9e3g6bi5wYWdlWC1MLngseTpuLnBhZ2VZLUwueX0sXCJ1bmRlZmluZWRcIj09dHlwZW9mIHkmJih5PSEhKHl8fE1hdGguYWJzKHgueCk8TWF0aC5hYnMoeC55KSkpLHl8fCh0LnByZXZlbnREZWZhdWx0KCksdSgpLGUuY29udGludW91cz8oYShyKFMtMSkseC54K2dbcihTLTEpXSwwKSxhKFMseC54K2dbU10sMCksYShyKFMrMSkseC54K2dbcihTKzEpXSwwKSk6KHgueD14LngvKCFTJiZ4Lng+MHx8Uz09bS5sZW5ndGgtMSYmeC54PDA/TWF0aC5hYnMoeC54KS92KzE6MSksYShTLTEseC54K2dbUy0xXSwwKSxhKFMseC54K2dbU10sMCksYShTKzEseC54K2dbUysxXSwwKSkpfX0sZW5kOmZ1bmN0aW9uKCl7dmFyIHQ9K25ldyBEYXRlLUwudGltZSxuPU51bWJlcih0KTwyNTAmJk1hdGguYWJzKHgueCk+MjB8fE1hdGguYWJzKHgueCk+di8yLGk9IVMmJngueD4wfHxTPT1tLmxlbmd0aC0xJiZ4Lng8MDtlLmNvbnRpbnVvdXMmJihpPSExKTt2YXIgbz14Lng8MDt5fHwobiYmIWk/KG8/KGUuY29udGludW91cz8ocyhyKFMtMSksLXYsMCkscyhyKFMrMiksdiwwKSk6cyhTLTEsLXYsMCkscyhTLGdbU10tdix3KSxzKHIoUysxKSxnW3IoUysxKV0tdix3KSxTPXIoUysxKSk6KGUuY29udGludW91cz8ocyhyKFMrMSksdiwwKSxzKHIoUy0yKSwtdiwwKSk6cyhTKzEsdiwwKSxzKFMsZ1tTXSt2LHcpLHMocihTLTEpLGdbcihTLTEpXSt2LHcpLFM9cihTLTEpKSxlLmNhbGxiYWNrJiZlLmNhbGxiYWNrKFMsbVtTXSkpOmUuY29udGludW91cz8ocyhyKFMtMSksLXYsdykscyhTLDAsdykscyhyKFMrMSksdix3KSk6KHMoUy0xLC12LHcpLHMoUywwLHcpLHMoUysxLHYsdykpKSxmLnRvdWNoPyhFLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixNLCExKSxFLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLE0sITEpKTooRS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsTSwhMSksRS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLE0sITEpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsTSwhMSkpfSx0cmFuc2l0aW9uRW5kOmZ1bmN0aW9uKHQpe3BhcnNlSW50KHQudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIiksMTApPT1TJiYoRCYmYygpLGUudHJhbnNpdGlvbkVuZCYmZS50cmFuc2l0aW9uRW5kLmNhbGwodCxTLG1bU10pKX19O3RoaXMudXBkYXRlPWZ1bmN0aW9uKCl7c2V0VGltZW91dCh0KX0sdGhpcy5zZXR1cD1mdW5jdGlvbigpe3QoKX0sdGhpcy5lbmFibGVTbGlkZT1mdW5jdGlvbihlKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCYmKHRoaXMuc2xpZGVJc0Rpc2FibGVkPSFlKSwhdGhpcy5zbGlkZUlzRGlzYWJsZWR9LHRoaXMuc2xpZGU9ZnVuY3Rpb24oZSx0KXt1KCksbyhlLHQpfSx0aGlzLnByZXY9dGhpcy5wcmV2aW91cz1mdW5jdGlvbigpe3UoKSxuKCl9LHRoaXMubmV4dD1mdW5jdGlvbigpe3UoKSxpKCl9LHRoaXMuc3RvcD1mdW5jdGlvbigpe3UoKX0sdGhpcy5zdGFydD1mdW5jdGlvbigpe2MoKX0sdGhpcy5jdXJyZW50SW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gU30sdGhpcy5zbGlkZXNDb3VudD1mdW5jdGlvbigpe3JldHVybiBUfSx0aGlzLmtpbGw9ZnVuY3Rpb24oKXt1KCksRS5zdHlsZS53aWR0aD1cIlwiLEUuc3R5bGUubGVmdD1cIlwiO2Zvcih2YXIgZT1tLmxlbmd0aDtlLS07KXt2YXIgdD1tW2VdO3Quc3R5bGUud2lkdGg9XCJcIix0LnN0eWxlLmxlZnQ9XCJcIixmLnRyYW5zaXRpb25zJiZhKGUsMCwwKX1mLmFkZEV2ZW50TGlzdGVuZXI/KEUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixNLCExKSxFLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsTSwhMSksRS5yZW1vdmVFdmVudExpc3RlbmVyKFwibXNUcmFuc2l0aW9uRW5kXCIsTSwhMSksRS5yZW1vdmVFdmVudExpc3RlbmVyKFwib1RyYW5zaXRpb25FbmRcIixNLCExKSxFLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvdHJhbnNpdGlvbmVuZFwiLE0sITEpLEUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIixNLCExKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLE0sITEpKTp3aW5kb3cub25yZXNpemU9bnVsbH0sdGhpcy5sb2FkPWZ1bmN0aW9uKCl7dCgpLEQmJmMoKSxmLmFkZEV2ZW50TGlzdGVuZXI/KGYudG91Y2g/RS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLE0sITEpOkUuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLE0sITEpLGYudHJhbnNpdGlvbnMmJihFLmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsTSwhMSksRS5hZGRFdmVudExpc3RlbmVyKFwibXNUcmFuc2l0aW9uRW5kXCIsTSwhMSksRS5hZGRFdmVudExpc3RlbmVyKFwib1RyYW5zaXRpb25FbmRcIixNLCExKSxFLmFkZEV2ZW50TGlzdGVuZXIoXCJvdHJhbnNpdGlvbmVuZFwiLE0sITEpLEUuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIixNLCExKSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIixNLCExKSk6d2luZG93Lm9ucmVzaXplPWZ1bmN0aW9uKCl7dCgpfX19fX0pfShpb25pYyksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZS52aWV3cy5Ub2dnbGU9ZS52aWV3cy5WaWV3LmluaGVyaXQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCl7dmFyIG49dGhpczt0aGlzLmVsPXQuZWwsdGhpcy5jaGVja2JveD10LmNoZWNrYm94LHRoaXMudHJhY2s9dC50cmFjayx0aGlzLmhhbmRsZT10LmhhbmRsZSx0aGlzLm9wZW5QZXJjZW50PS0xLHRoaXMub25DaGFuZ2U9dC5vbkNoYW5nZXx8ZnVuY3Rpb24oKXt9LHRoaXMudHJpZ2dlclRocmVzaG9sZD10LnRyaWdnZXJUaHJlc2hvbGR8fDIwLHRoaXMuZHJhZ1N0YXJ0SGFuZGxlcj1mdW5jdGlvbihlKXtuLmRyYWdTdGFydChlKX0sdGhpcy5kcmFnSGFuZGxlcj1mdW5jdGlvbihlKXtuLmRyYWcoZSl9LHRoaXMuaG9sZEhhbmRsZXI9ZnVuY3Rpb24oZSl7bi5ob2xkKGUpfSx0aGlzLnJlbGVhc2VIYW5kbGVyPWZ1bmN0aW9uKGUpe24ucmVsZWFzZShlKX0sdGhpcy5kcmFnU3RhcnRHZXN0dXJlPWUub25HZXN0dXJlKFwiZHJhZ3N0YXJ0XCIsdGhpcy5kcmFnU3RhcnRIYW5kbGVyLHRoaXMuZWwpLHRoaXMuZHJhZ0dlc3R1cmU9ZS5vbkdlc3R1cmUoXCJkcmFnXCIsdGhpcy5kcmFnSGFuZGxlcix0aGlzLmVsKSx0aGlzLmRyYWdIb2xkR2VzdHVyZT1lLm9uR2VzdHVyZShcImhvbGRcIix0aGlzLmhvbGRIYW5kbGVyLHRoaXMuZWwpLHRoaXMuZHJhZ1JlbGVhc2VHZXN0dXJlPWUub25HZXN0dXJlKFwicmVsZWFzZVwiLHRoaXMucmVsZWFzZUhhbmRsZXIsdGhpcy5lbCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtlLm9mZkdlc3R1cmUodGhpcy5kcmFnU3RhcnRHZXN0dXJlLFwiZHJhZ3N0YXJ0XCIsdGhpcy5kcmFnU3RhcnRHZXN0dXJlKSxlLm9mZkdlc3R1cmUodGhpcy5kcmFnR2VzdHVyZSxcImRyYWdcIix0aGlzLmRyYWdHZXN0dXJlKSxlLm9mZkdlc3R1cmUodGhpcy5kcmFnSG9sZEdlc3R1cmUsXCJob2xkXCIsdGhpcy5ob2xkSGFuZGxlciksZS5vZmZHZXN0dXJlKHRoaXMuZHJhZ1JlbGVhc2VHZXN0dXJlLFwicmVsZWFzZVwiLHRoaXMucmVsZWFzZUhhbmRsZXIpfSx0YXA6ZnVuY3Rpb24oKXtcImRpc2FibGVkXCIhPT10aGlzLmVsLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpJiZ0aGlzLnZhbCghdGhpcy5jaGVja2JveC5jaGVja2VkKX0sZHJhZ1N0YXJ0OmZ1bmN0aW9uKGUpe3RoaXMuY2hlY2tib3guZGlzYWJsZWR8fCh0aGlzLl9kcmFnSW5mbz17d2lkdGg6dGhpcy5lbC5vZmZzZXRXaWR0aCxsZWZ0OnRoaXMuZWwub2Zmc2V0TGVmdCxyaWdodDp0aGlzLmVsLm9mZnNldExlZnQrdGhpcy5lbC5vZmZzZXRXaWR0aCx0cmlnZ2VyWDp0aGlzLmVsLm9mZnNldFdpZHRoLzIsaW5pdGlhbFN0YXRlOnRoaXMuY2hlY2tib3guY2hlY2tlZH0sZS5nZXN0dXJlLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCksdGhpcy5ob2xkKGUpKX0sZHJhZzpmdW5jdGlvbih0KXt2YXIgbj10aGlzO3RoaXMuX2RyYWdJbmZvJiYodC5nZXN0dXJlLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCksZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtpZihuLl9kcmFnSW5mbyl7dmFyIGU9KG4udHJhY2sub2Zmc2V0TGVmdCtuLmhhbmRsZS5vZmZzZXRXaWR0aC8yLG4udHJhY2sub2Zmc2V0TGVmdCtuLnRyYWNrLm9mZnNldFdpZHRoLW4uaGFuZGxlLm9mZnNldFdpZHRoLzIsdC5nZXN0dXJlLmRlbHRhWCx0Lmdlc3R1cmUudG91Y2hlc1swXS5wYWdlWC1uLl9kcmFnSW5mby5sZWZ0KSxpPW4uX2RyYWdJbmZvLndpZHRoLW4udHJpZ2dlclRocmVzaG9sZDtuLl9kcmFnSW5mby5pbml0aWFsU3RhdGU/ZTxuLnRyaWdnZXJUaHJlc2hvbGQ/bi5zZXRPcGVuUGVyY2VudCgwKTplPm4uX2RyYWdJbmZvLnRyaWdnZXJYJiZuLnNldE9wZW5QZXJjZW50KDEwMCk6ZTxuLl9kcmFnSW5mby50cmlnZ2VyWD9uLnNldE9wZW5QZXJjZW50KDApOmU+aSYmbi5zZXRPcGVuUGVyY2VudCgxMDApfX0pKX0sZW5kRHJhZzpmdW5jdGlvbigpe3RoaXMuX2RyYWdJbmZvPW51bGx9LGhvbGQ6ZnVuY3Rpb24oKXt0aGlzLmVsLmNsYXNzTGlzdC5hZGQoXCJkcmFnZ2luZ1wiKX0scmVsZWFzZTpmdW5jdGlvbihlKXt0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoXCJkcmFnZ2luZ1wiKSx0aGlzLmVuZERyYWcoZSl9LHNldE9wZW5QZXJjZW50OmZ1bmN0aW9uKHQpe2lmKHRoaXMub3BlblBlcmNlbnQ8MHx8dDx0aGlzLm9wZW5QZXJjZW50LTN8fHQ+dGhpcy5vcGVuUGVyY2VudCszKWlmKHRoaXMub3BlblBlcmNlbnQ9dCwwPT09dCl0aGlzLnZhbCghMSk7ZWxzZSBpZigxMDA9PT10KXRoaXMudmFsKCEwKTtlbHNle3ZhciBuPU1hdGgucm91bmQodC8xMDAqdGhpcy50cmFjay5vZmZzZXRXaWR0aC10aGlzLmhhbmRsZS5vZmZzZXRXaWR0aCk7bj0xPm4/MDpuLHRoaXMuaGFuZGxlLnN0eWxlW2UuQ1NTLlRSQU5TRk9STV09XCJ0cmFuc2xhdGUzZChcIituK1wicHgsMCwwKVwifX0sdmFsOmZ1bmN0aW9uKHQpe3JldHVybih0PT09ITB8fHQ9PT0hMSkmJihcIlwiIT09dGhpcy5oYW5kbGUuc3R5bGVbZS5DU1MuVFJBTlNGT1JNXSYmKHRoaXMuaGFuZGxlLnN0eWxlW2UuQ1NTLlRSQU5TRk9STV09XCJcIiksdGhpcy5jaGVja2JveC5jaGVja2VkPXQsdGhpcy5vcGVuUGVyY2VudD10PzEwMDowLHRoaXMub25DaGFuZ2UmJnRoaXMub25DaGFuZ2UoKSksdGhpcy5jaGVja2JveC5jaGVja2VkfX0pfShpb25pYyl9KCk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGFwcCkge1xuICAgIC8vIGluamVjdDpzdGFydFxuICAgIHJlcXVpcmUoJy4vbG9naW4nKShhcHApO1xuICAgIHJlcXVpcmUoJy4vbmV3c2ZlZWQnKShhcHApO1xuICAgIC8vIGluamVjdDplbmRcbn07IiwiJ3VzZSBzdHJpY3QnO1xudmFyIGNvbnRyb2xsZXJuYW1lID0gJ2xvZ2luJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcHApIHtcbiAgICAvKmpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cblxuICAgIHZhciBkZXBzID0gWydmYWNlYm9vayddO1xuXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcihmYWNlYm9vaykge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZmFjZWJvb2subG9naW4oKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb250cm9sbGVyLiRpbmplY3QgPSBkZXBzO1xuICAgIGFwcC5jb250cm9sbGVyKGFwcC5uYW1lICsgJy4nICsgY29udHJvbGxlcm5hbWUsIGNvbnRyb2xsZXIpO1xufTsiLCIndXNlIHN0cmljdCc7XG52YXIgY29udHJvbGxlcm5hbWUgPSAnbmV3c2ZlZWQnO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXBwKSB7XG4gICAgLypqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG5cbiAgICB2YXIgZGVwcyA9IFsnJHEnLCAnJHJvb3RTY29wZScsICckaW9uaWNMb2FkaW5nJywgJyRzdGF0ZScsICdmYWNlYm9vayddO1xuXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkcSwgJHJvb3RTY29wZSwgJGlvbmljTG9hZGluZywgJHN0YXRlLCBmYWNlYm9vaykge1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2YXIgYWN0aXZhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAkaW9uaWNMb2FkaW5nLnNob3coe1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPGkgY2xhc3M9XCJpY29uIGlvbi1sb2FkaW5nLWNcIiBzdHlsZT1cImZvbnQtc2l6ZTo0MHB4O1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogJ2ZhZGUtaW4nLFxuICAgICAgICAgICAgICAgIHNob3dCYWNrZHJvcDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZigkcm9vdFNjb3BlLml0ZW1zKSB7XG4gICAgICAgICAgICAgICAgdm0uaXRlbXMgPSAkcm9vdFNjb3BlLml0ZW1zO1xuICAgICAgICAgICAgICAgIHZtLmZyaWVuZHMgPSAkcm9vdFNjb3BlLmZyaWVuZHM7XG4gICAgICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh2bS5pdGVtcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZtLml0ZW1zID0gW107XG4gICAgICAgICAgICAgICAgdm0uZnJpZW5kcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICdmaWVsZHMnOiAnZnVsbF9waWN0dXJlLGxpa2VzLGRlc2NyaXB0aW9uLGNvbW1lbnRzLGZyb20sc3RvcnksbWVzc2FnZSxuYW1lLGNyZWF0ZWRfdGltZSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGZhY2Vib29rLmdldCgnL21lL2hvbWUnLCBmaWVsZHMpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZtLml0ZW1zID0gcmVzLmRhdGEuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5pdGVtcyA9IHJlcy5kYXRhLmRhdGE7XG5cbiAgICAgICAgICAgICAgICAgICAgdm0uZnJpZW5kcyA9IF8uY2hhaW4odm0uaXRlbXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC51bmlxKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudmFsdWUoKTtcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5mcmllbmRzID0gdm0uZnJpZW5kcztcblxuICAgICAgICAgICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh2bS5pdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgIC8vJGlvbmljQmFja2Ryb3AucmVsZWFzZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICB2bS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZhY2Vib29rLmxvZ291dCgpO1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZtLmRvUmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZGVsZXRlICRyb290U2NvcGUuaXRlbXM7XG5cbiAgICAgICAgICAgIGFjdGl2YXRlKCkuXG4gICAgICAgICAgICBmaW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnc2Nyb2xsLnJlZnJlc2hDb21wbGV0ZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29udHJvbGxlci4kaW5qZWN0ID0gZGVwcztcbiAgICBhcHAuY29udHJvbGxlcihhcHAubmFtZSArICcuJyArIGNvbnRyb2xsZXJuYW1lLCBjb250cm9sbGVyKTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xucmVxdWlyZSgnYW5ndWxhci11aS1yb3V0ZXInKTtcbnJlcXVpcmUoJ2FuZ3VsYXItaW9uaWMnKTtcblxudmFyIG1vZHVsZW5hbWUgPSAnY29tbW9uJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lc3BhY2UpIHtcblxuICAgIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZSArICcuJyArIG1vZHVsZW5hbWU7XG5cbiAgICB2YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcbiAgICB2YXIgbmdGYWNlYm9vayA9IHJlcXVpcmUoJy4uL25nRmFjZWJvb2snKShuYW1lc3BhY2UpO1xuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShmdWxsbmFtZSwgWyd1aS5yb3V0ZXInLCAnaW9uaWMnLCBuZ0ZhY2Vib29rLm5hbWVdKTtcbiAgICAvLyBpbmplY3Q6Zm9sZGVycyBzdGFydFxuICAgIHJlcXVpcmUoJy4vY29udHJvbGxlcnMnKShhcHApO1xuXG4gICAgLy8gaW5qZWN0OmZvbGRlcnMgZW5kXG4gICAgYXBwLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsXG4gICAgICAgIGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCdsb2dpbicsIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2xvZ2luJyxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vdmlld3MvbG9naW4uaHRtbCcpLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBmdWxsbmFtZSArICcubG9naW4gYXMgdm0nXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ3RhYnMnLCB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJy90YWJzJyxcbiAgICAgICAgICAgICAgICAgICAgYWJzdHJhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL3ZpZXdzL3RhYnMuaHRtbCcpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ3RhYnMubmV3c2ZlZWQnLCB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9uZXdzZmVlZCcsXG4gICAgICAgICAgICAgICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAndGFiLW5ld3NmZWVkJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL3ZpZXdzL25ld3NmZWVkLmh0bWwnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBmdWxsbmFtZSArICcubmV3c2ZlZWQgYXMgdm0nXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5zdGF0ZSgndGFicy5yZXF1ZXN0cycsIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3JlcXVlc3RzJyxcbiAgICAgICAgICAgICAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd0YWItcmVxdWVzdHMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vdmlld3MvcmVxdWVzdHMuaHRtbCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bGxuYW1lICsgJy5uZXdzZmVlZCBhcyB2bSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnN0YXRlKCd0YWJzLm1lc3NhZ2VzJywge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvbWVzc2FnZXMnLFxuICAgICAgICAgICAgICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3RhYi1tZXNzYWdlcyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi92aWV3cy9tZXNzYWdlcy5odG1sJylcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnN0YXRlKCd0YWJzLm5vdGlmaWNhdGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9ub3RpZmljYXRpb25zJyxcbiAgICAgICAgICAgICAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd0YWItbm90aWZpY2F0aW9ucyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi92aWV3cy9ub3RpZmljYXRpb25zLmh0bWwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ3RhYnMubW9yZScsIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL21vcmUnLFxuICAgICAgICAgICAgICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3RhYi1tb3JlJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL3ZpZXdzL21vcmUuaHRtbCcpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9sb2dpbicpO1xuICAgICAgICB9XG4gICAgXSk7XG4gICAgcmV0dXJuIGFwcDtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSAnPGlvbi12aWV3PlxcbicgK1xuICAgICcgICAgPGlvbi1jb250ZW50IGNsYXNzPVwiZmJsb2dpblwiPlxcbicgK1xuICAgICcgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50IHBhZGRpbmcgaGFzLWhlYWRlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYnV0dG9uLWJsb2NrXCIgc3R5bGU9XCJ0ZXh0LWFsaWduOmNlbnRlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJpbWFnZXMvZmFjZWJvb2stdGl0bGUucG5nXCIgd2lkdGg9XCI2MCVcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gYnV0dG9uLWJsb2NrIGJ1dHRvbi1wb3NpdGl2ZSBmYi1idXR0b24tbG9naW5cIiBuZy1jbGljaz1cInZtLmxvZ2luKClcIj5Mb2dpbjwvYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICcgICAgPC9pb24tY29udGVudD5cXG4nICtcbiAgICAnPC9pb24tdmlldz4nOyIsIm1vZHVsZS5leHBvcnRzID0gJzxpb24tdmlldz5cXG4nICtcbiAgICAnICAgIDxpb24taGVhZGVyLWJhciBjbGFzcz1cImJhci1wb3NpdGl2ZSBiYXItZmItYmx1ZVwiPlxcbicgK1xuICAgICcgICAgICAgIDxoMSBjbGFzcz1cInRpdGxlXCI+TWVzc2FnZXM8L2gxPlxcbicgK1xuICAgICcgICAgPC9pb24taGVhZGVyLWJhcj5cXG4nICtcbiAgICAnICAgIDxpb24tY29udGVudD48L2lvbi1jb250ZW50PlxcbicgK1xuICAgICc8L2lvbi12aWV3Pic7IiwibW9kdWxlLmV4cG9ydHMgPSAnPGlvbi12aWV3PlxcbicgK1xuICAgICcgICAgPGlvbi1oZWFkZXItYmFyIGNsYXNzPVwiYmFyLXBvc2l0aXZlIGJhci1mYi1ibHVlXCI+XFxuJyArXG4gICAgJyAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW0taW5wdXQtd3JhcHBlciBmYnNlYXJjaFwiPiA8aSBjbGFzcz1cImljb24gaW9uLWlvczctc2VhcmNoIHBsYWNlaG9sZGVyLWljb25cIj48L2k+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwic2VhcmNoXCIgY2xhc3M9XCJcIiBwbGFjZWhvbGRlcj1cIlNlYXJjaFwiPlxcbicgK1xuICAgICcgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICcgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gYnV0dG9uLWNsZWFyXCI+IDxpIGNsYXNzPVwiaWNvbiBpb24tbmF2aWNvblwiPjwvaT5cXG4nICtcbiAgICAnICAgICAgICA8L2J1dHRvbj5cXG4nICtcbiAgICAnICAgIDwvaW9uLWhlYWRlci1iYXI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgPGlvbi1jb250ZW50PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8ZGl2IGNsYXNzPVwibGlzdFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8YSBjbGFzcz1cIml0ZW0gaXRlbS1pY29uLWxlZnRcIiBocmVmPVwiXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImljb24gaW9uLWVtYWlsIGVuZXJnaXplZFwiPjwvaT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIEF2aSBIYWlhdFxcbicgK1xuICAgICcgICAgICAgICAgICA8L2E+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICA8YSBjbGFzcz1cIml0ZW0gaXRlbS1pY29uLWxlZnQgaXRlbS1pY29uLXJpZ2h0XCIgaHJlZj1cIlwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uIGlvbi1jaGF0YnViYmxlLXdvcmtpbmcgYXNzZXJ0aXZlXCI+PC9pPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgVXBkYXRlIEluZm9cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYmFkZ2UgYmFkZ2UtcG9zaXRpdmVcIj4xODwvc3Bhbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9hPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW0gaXRlbS1kaXZpZGVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICBBUFBTXFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgPGEgY2xhc3M9XCJpdGVtIGl0ZW0taWNvbi1sZWZ0XCIgaHJlZj1cIlwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uIGlvbi1taWMtYSBkYXJrXCI+PC9pPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgUmVjb3JkIGFsYnVtXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIml0ZW0tbm90ZVwiPkdyYW1teTwvc3Bhbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9hPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgPGEgY2xhc3M9XCJpdGVtIGl0ZW0taWNvbi1sZWZ0XCIgaHJlZj1cIlwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uIGlvbi1wZXJzb24tc3RhbGtlciBwb3NpdGl2ZVwiPjwvaT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIEZpbmQgRnJpZW5kc1xcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJiYWRnZSBiYWRnZS1wb3NpdGl2ZVwiPjIwKzwvc3Bhbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9hPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8L2lvbi1jb250ZW50PlxcbicgK1xuICAgICc8L2lvbi12aWV3Pic7IiwibW9kdWxlLmV4cG9ydHMgPSAnPGlvbi12aWV3IGNsYXNzPVwiZ3JheS1iYWNrZ3JvdW5kXCI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgPCEtLSAgICAgSEVBREVSIChTRUFSQ0gpIC0tPlxcbicgK1xuICAgICcgICAgPGlvbi1oZWFkZXItYmFyIGNsYXNzPVwiYmFyLXBvc2l0aXZlIGJhci1mYi1ibHVlXCI+XFxuJyArXG4gICAgJyAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW0taW5wdXQtd3JhcHBlciBmYnNlYXJjaFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8aSBjbGFzcz1cImljb24gaW9uLWlvczctc2VhcmNoIHBsYWNlaG9sZGVyLWljb25cIj48L2k+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwic2VhcmNoXCIgcGxhY2Vob2xkZXI9XCJTZWFyY2hcIj5cXG4nICtcbiAgICAnICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGJ1dHRvbi1jbGVhclwiIG5nLWNsaWNrPVwidm0ubG9nb3V0KClcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uIGlvbi1uYXZpY29uXCI+PC9pPlxcbicgK1xuICAgICcgICAgICAgIDwvYnV0dG9uPlxcbicgK1xuICAgICcgICAgPC9pb24taGVhZGVyLWJhcj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8IS0tICAgICBTVUIgSEVBREVSICAtLT5cXG4nICtcbiAgICAnICAgIDxpb24taGVhZGVyLWJhciBjbGFzcz1cImJhci1zdWJoZWFkZXIgYmFyLXN0YWJsZVwiPlxcbicgK1xuICAgICcgICAgICAgIDxkaXYgY2xhc3M9XCJidXR0b24tYmFyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gYnV0dG9uLWNsZWFyIHNtYWxsLWZvbnRcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbiBpb24tY29tcG9zZVwiPjwvaT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIFN0YXR1c1xcbicgK1xuICAgICcgICAgICAgICAgICA8L2J1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBidXR0b24tY2xlYXIgc21hbGwtZm9udFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uIGlvbi1jYW1lcmFcIj48L2k+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICBQaG90b1xcbicgK1xuICAgICcgICAgICAgICAgICA8L2J1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBidXR0b24tY2xlYXIgc21hbGwtZm9udFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uIGlvbi1sb2NhdGlvblwiPjwvaT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIENoZWNrIGluXFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICcgICAgPC9pb24taGVhZGVyLWJhcj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8IS0tICAgICBDT05URU5UIC0tPlxcbicgK1xuICAgICcgICAgPGlvbi1jb250ZW50PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8aW9uLXJlZnJlc2hlciAgb24tcmVmcmVzaD1cInZtLmRvUmVmcmVzaCgpXCIgcmVmcmVzaGluZy1pY29uPVwiXCI+XFxuJyArXG4gICAgJyAgICAgICAgPC9pb24tcmVmcmVzaGVyPlxcbicgK1xuICAgICcgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0IGNhcmQgZmJjYXJkXCIgbmctcmVwZWF0PVwiaXRlbSBpbiB2bS5pdGVtc1wiPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW0gaXRlbS1hdmF0YXJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxpbWcgbmctc3JjPVwiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20ve3sgaXRlbS5mcm9tLmlkIH19L3BpY3R1cmVcIiAvPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGgyPnt7aXRlbS5mcm9tLm5hbWV9fTwvaDI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8cD57e2l0ZW0uY3JlYXRlZF90aW1lIHwgZGF0ZTpcXCdNTU0gZCwgeSBoOm1tYVxcJ319PC9wPlxcbicgK1xuICAgICcgICAgICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW0gaXRlbS1ib2R5XCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8cCBuZy1pZj1cIml0ZW0uc3RvcnlcIj57e2l0ZW0uc3Rvcnl9fTwvcD5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxwPnt7aXRlbS5tZXNzYWdlfX08L3A+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8cCBuZy1pZj1cIml0ZW0ubmFtZVwiPnt7aXRlbS5uYW1lfX08L3A+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8cCBuZy1pZj1cIml0ZW0uZGVzY3JpcHRpb25cIj57e2l0ZW0uZGVzY3JpcHRpb259fTwvcD5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxpbWcgbmctaWY9XCJpdGVtLmZ1bGxfcGljdHVyZVwiIG5nLXNyYz1cInt7IGl0ZW0uZnVsbF9waWN0dXJlIH19XCIgc3R5bGU9XCJ3aWR0aDoxMDAlOyBib3gtc2hhZG93OjVweCA1cHggNXB4IGdyZXlcIiAvPlxcbicgK1xuICAgICcgICAgICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGEgY2xhc3M9XCJpdGVtXCIgbmctaWY9XCJpdGVtLmxpa2VzIHx8IGl0ZW0uY29tbWVudHNcIj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8aDQ+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPHNwYW4gbmctaWY9XCJpdGVtLmxpa2VzXCIgY2xhc3M9XCJwYWRkaW5nXCI+e3tpdGVtLmxpa2VzLmRhdGEubGVuZ3RofX0gTGlrZXM8L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPHNwYW4gbmctaWY9XCJpdGVtLmNvbW1lbnRzXCIgY2xhc3M9XCJwYWRkaW5nXCI+e3tpdGVtLmNvbW1lbnRzLmRhdGEubGVuZ3RofX0gQ29tbWVudHM8L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L2g0PlxcbicgK1xuICAgICcgICAgICAgICAgICA8L2E+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXRlbSBwb3NpdGl2ZVwiIHN0eWxlPVwicGFkZGluZzowO2JhY2tncm91bmQtY29sb3I6I0Y3RjdGN1wiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ1dHRvbi1iYXIgYmFyLXBvc2l0aXZlIHBvc2l0aXZlXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBidXR0b24tbGlnaHQgYnV0dG9uLWNsZWFyIHNtYWxsLWZvbnRcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJpY29uIGlvbi10aHVtYnN1cFwiPjwvaT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgTGlrZVxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gYnV0dG9uLWxpZ2h0IGJ1dHRvbi1jbGVhciBzbWFsbC1mb250XCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbiBpb24tY2hhdGJveFwiPjwvaT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgQ29tbWVudFxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gYnV0dG9uLWxpZ2h0IGJ1dHRvbi1jbGVhciBzbWFsbC1mb250XCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbiBpb24tc2hhcmVcIj48L2k+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIFNoYXJlXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgPC9pb24tY29udGVudD5cXG4nICtcbiAgICAnPC9pb24tdmlldz4nOyIsIm1vZHVsZS5leHBvcnRzID0gJzxpb24tdmlldz5cXG4nICtcbiAgICAnICAgIDxpb24taGVhZGVyLWJhciBjbGFzcz1cImJhci1wb3NpdGl2ZSBiYXItZmItYmx1ZVwiPlxcbicgK1xuICAgICcgICAgICAgIDxoMSBjbGFzcz1cInRpdGxlXCI+Tm90aWZpY2F0aW9uczwvaDE+XFxuJyArXG4gICAgJyAgICA8L2lvbi1oZWFkZXItYmFyPlxcbicgK1xuICAgICcgICAgPGlvbi1jb250ZW50PjwvaW9uLWNvbnRlbnQ+XFxuJyArXG4gICAgJzwvaW9uLXZpZXc+JzsiLCJtb2R1bGUuZXhwb3J0cyA9ICc8aW9uLXZpZXc+XFxuJyArXG4gICAgJyAgICA8aW9uLWhlYWRlci1iYXIgY2xhc3M9XCJiYXIgYmFyLXBvc2l0aXZlIGJhci1mYi1ibHVlXCI+XFxuJyArXG4gICAgJyAgICAgICAgPGgxIGNsYXNzPVwidGl0bGVcIj5GcmllbmRzIFJlcXVlc3RzPC9oMT5cXG4nICtcbiAgICAnICAgIDwvaW9uLWhlYWRlci1iYXI+XFxuJyArXG4gICAgJyAgICA8aW9uLWNvbnRlbnQ+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDxpb24tbGlzdCBuZy1yZXBlYXQ9XCJpdGVtIGluIHZtLmZyaWVuZHNcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGlvbi1pdGVtIGNsYXNzPVwiaXRlbS10aHVtYm5haWwtbGVmdFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGltZyBuZy1zcmM9XCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS97eyBpdGVtLmlkIH19L3BpY3R1cmU/d2lkdGg9MTIwJmhlaWdodD0xMjBcIiBjbGFzcz1cInJvdW5kZWQtaW1hZ2VcIi8+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8aDI+e3tpdGVtLm5hbWV9fTwvaDI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8cD4xIG11dHVhbCBmcmllbmQ8L3A+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYnV0dG9uLWJhclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gYnV0dG9uLXBvc2l0aXZlIGJ1dHRvbi1zbWFsbFwiID5Db25maXJtPC9idXR0b24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBidXR0b24tbGlnaHQgYnV0dG9uLXNtYWxsIFwiIHN0eWxlPVwibWFyZ2luLWxlZnQ6MTBweFwiPk5vdCBOb3c8L2J1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgPC9pb24taXRlbT5cXG4nICtcbiAgICAnICAgICAgICA8L2lvbi1saXN0PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDwvaW9uLWNvbnRlbnQ+XFxuJyArXG4gICAgJzwvaW9uLXZpZXc+JzsiLCJtb2R1bGUuZXhwb3J0cyA9ICc8aW9uLXRhYnMgY2xhc3M9XCJ0YWJzLWljb24tdG9wIHRhYnMtbGlnaHQgZmJuZXdzIHhmYWRlLWluLW5vdC1vdXRcIj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgPGlvbi10YWIgdGl0bGU9XCJOZXdzIEZlZWRcIiBpY29uPVwiaWNvbiBpb24tZG9jdW1lbnQtdGV4dFwiICB1aS1zcmVmPVwidGFicy5uZXdzZmVlZFwiPlxcbicgK1xuICAgICcgICAgPGlvbi1uYXYtdmlldyBuYW1lPVwidGFiLW5ld3NmZWVkXCI+PC9pb24tbmF2LXZpZXc+XFxuJyArXG4gICAgJyAgPC9pb24tdGFiPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICA8aW9uLXRhYiB0aXRsZT1cIlJlcXVlc3RzXCIgaWNvbj1cImljb24gaW9uLXBlcnNvbi1zdGFsa2VyXCIgdWktc3JlZj1cInRhYnMucmVxdWVzdHNcIj5cXG4nICtcbiAgICAnICAgIDxpb24tbmF2LXZpZXcgbmFtZT1cInRhYi1yZXF1ZXN0c1wiPjwvaW9uLW5hdi12aWV3PlxcbicgK1xuICAgICcgIDwvaW9uLXRhYj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgPGlvbi10YWIgdGl0bGU9XCJNZXNzYWdlc1wiIGljb249XCJpY29uIGlvbi1jaGF0Ym94XCIgdWktc3JlZj1cInRhYnMubWVzc2FnZXNcIj5cXG4nICtcbiAgICAnICAgIDxpb24tbmF2LXZpZXcgbmFtZT1cInRhYi1tZXNzYWdlc1wiPjwvaW9uLW5hdi12aWV3PlxcbicgK1xuICAgICcgIDwvaW9uLXRhYj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgPGlvbi10YWIgdGl0bGU9XCJOb3RpZmljYXRpb25zXCIgaWNvbj1cImljb24gaW9uLWFuZHJvaWQtZWFydGhcIiB1aS1zcmVmPVwidGFicy5ub3RpZmljYXRpb25zXCI+XFxuJyArXG4gICAgJyAgICA8aW9uLW5hdi12aWV3IG5hbWU9XCJ0YWItbm90aWZpY2F0aW9uc1wiPjwvaW9uLW5hdi12aWV3PlxcbicgK1xuICAgICcgIDwvaW9uLXRhYj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgPGlvbi10YWIgdGl0bGU9XCJNb3JlXCIgaWNvbj1cImljb24gaW9uLW5hdmljb25cIiB1aS1zcmVmPVwidGFicy5tb3JlXCI+XFxuJyArXG4gICAgJyAgICA8aW9uLW5hdi12aWV3IG5hbWU9XCJ0YWItbW9yZVwiPjwvaW9uLW5hdi12aWV3PlxcbicgK1xuICAgICcgIDwvaW9uLXRhYj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJzwvaW9uLXRhYnM+JzsiLCIndXNlIHN0cmljdCc7XG5yZXF1aXJlKCdhbmd1bGFyLXVpLXJvdXRlcicpO1xucmVxdWlyZSgnYW5ndWxhci1pb25pYycpO1xuXG52YXIgbW9kdWxlbmFtZSA9ICduZ0ZhY2Vib29rJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lc3BhY2UpIHtcblxuICAgIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZSArICcuJyArIG1vZHVsZW5hbWU7XG5cbiAgICB2YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcbiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoZnVsbG5hbWUsIFsndWkucm91dGVyJywgJ2lvbmljJ10pO1xuICAgIC8vIGluamVjdDpmb2xkZXJzIHN0YXJ0XG4gICAgcmVxdWlyZSgnLi9zZXJ2aWNlcycpKGFwcCk7XG5cbiAgICAvLyBpbmplY3Q6Zm9sZGVycyBlbmRcblxuICAgIHJldHVybiBhcHA7XG59OyIsIid1c2Ugc3RyaWN0JztcbnZhciBzZXJ2aWNlbmFtZSA9ICdmYWNlYm9vayc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXBwKSB7XG5cbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gWyckd2luZG93JywgJyRyb290U2NvcGUnLCAnJHEnLCAnJGh0dHAnXTtcblxuICAgIGZ1bmN0aW9uIHNlcnZpY2UoJHdpbmRvdywgJHJvb3RTY29wZSwgJHEsICRodHRwKSB7XG4gICAgICAgIHZhciBGQl9MT0dJTl9VUkwgPSAnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2RpYWxvZy9vYXV0aCc7XG4gICAgICAgIC8vIEJ5IGRlZmF1bHQgd2Ugc3RvcmUgZmJ0b2tlbiBpbiBzZXNzaW9uU3RvcmFnZS4gVGhpcyBjYW4gYmUgb3ZlcnJpZGVuIGluIGluaXQoKVxuICAgICAgICB2YXIgdG9rZW5TdG9yZSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlO1xuICAgICAgICB2YXIgZmJBcHBJZDtcbiAgICAgICAgdmFyIG9hdXRoUmVkaXJlY3RVUkw7XG4gICAgICAgIC8vIEluZGljYXRlcyBpZiB0aGUgYXBwIGlzIHJ1bm5pbmcgaW5zaWRlIENvcmRvdmFcbiAgICAgICAgdmFyIHJ1bm5pbmdJbkNvcmRvdmE7XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlcmVhZHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJ1bm5pbmdJbkNvcmRvdmEgPSB0cnVlO1xuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWxpemUgdGhlIG5nRmFjZWJvb2sgbW9kdWxlLiBZb3UgbXVzdCB1c2UgdGhpcyBmdW5jdGlvbiBhbmQgaW5pdGlhbGl6ZSB0aGUgbW9kdWxlIHdpdGggYW4gYXBwSWQgYmVmb3JlIHlvdSBjYW5cbiAgICAgICAgICogdXNlIGFueSBvdGhlciBmdW5jdGlvbi5cbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGFwcElkIC0gVGhlIGlkIG9mIHRoZSBGYWNlYm9vayBhcHBcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHJlZGlyZWN0VVJMIC0gVGhlIE9BdXRoIHJlZGlyZWN0IFVSTC4gT3B0aW9uYWwuIElmIG5vdCBwcm92aWRlZCwgd2UgdXNlIHNlbnNpYmxlIGRlZmF1bHRzLlxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gc3RvcmUgLSBUaGUgc3RvcmUgdXNlZCB0byBzYXZlIHRoZSBGYWNlYm9vayB0b2tlbi4gT3B0aW9uYWwuIElmIG5vdCBwcm92aWRlZCwgd2UgdXNlIHNlc3Npb25TdG9yYWdlLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbihhcHBJZCwgcmVkaXJlY3RVUkwsIHN0b3JlKSB7XG4gICAgICAgICAgICBmYkFwcElkID0gYXBwSWQ7XG4gICAgICAgICAgICBpZihyZWRpcmVjdFVSTCkge1xuICAgICAgICAgICAgICAgIG9hdXRoUmVkaXJlY3RVUkwgPSByZWRpcmVjdFVSTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHN0b3JlKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5TdG9yZSA9IHN0b3JlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcHBsaWNhdGlvbi1sZXZlbCBsb2dvdXQ6IHdlIHNpbXBseSBkaXNjYXJkIHRoZSB0b2tlbi5cbiAgICAgICAgICovXG4gICAgICAgIHZhciBsb2dvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRva2VuU3RvcmUuZmJ0b2tlbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTG9naW4gdG8gRmFjZWJvb2sgdXNpbmcgT0F1dGguIFRoZSBhcHAgd2lsbCByZWRpcmVjdCB0byB0aGUgZmFjZWJvb2sgcGFnZSBhbmQgYmFjayB0aGUgYXBwbGljYXRpb24gcGFnZS5cbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGZiU2NvcGUgLSBUaGUgc2V0IG9mIEZhY2Vib29rIHBlcm1pc3Npb25zIHJlcXVlc3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGxvZ2luID0gZnVuY3Rpb24oZmJTY29wZSkge1xuICAgICAgICAgICAgaWYoIWZiQXBwSWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhY2Vib29rIEFwcCBJZCBpcyBub3Qgc2V0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmYlNjb3BlID0gZmJTY29wZSB8fCAnJzsgLy9lbWFpbCx1c2VyX2ZyaWVuZHMscHVibGljX3Byb2ZpbGUsdXNlcl9hYm91dF9tZSx1c2VyX2FjdGlvbnMubmV3cyx1c2VyX2FjdGlvbnMudmlkZW8sdXNlcl9hY3Rpdml0aWVzLHVzZXJfZXZlbnRzJztcbiAgICAgICAgICAgIGxvZ291dCgpO1xuICAgICAgICAgICAgb2F1dGhSZWRpcmVjdFVSTCA9IG9hdXRoUmVkaXJlY3RVUkwgfHwgZG9jdW1lbnQubG9jYXRpb24ub3JpZ2luO1xuICAgICAgICAgICAgaWYoIXJ1bm5pbmdJbkNvcmRvdmEpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBGQl9MT0dJTl9VUkwgKyAnP2NsaWVudF9pZD0nICsgZmJBcHBJZCArICcmcmVkaXJlY3RfdXJpPScgKyBvYXV0aFJlZGlyZWN0VVJMICsgJyZyZXNwb25zZV90eXBlPXRva2VuJmRpc3BsYXk9cG9wdXAmc2NvcGU9JyArIGZiU2NvcGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IEZCX0xPR0lOX1VSTCArICc/Y2xpZW50X2lkPScgKyBmYkFwcElkICsgJyZyZWRpcmVjdF91cmk9JyArIG9hdXRoUmVkaXJlY3RVUkwgKyAnJnJlc3BvbnNlX3R5cGU9dG9rZW4mZGlzcGxheT1wb3B1cCZzY29wZT0nICsgZmJTY29wZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcXVlcnlTdHJpbmcgLSBUaGUgcXVlcnkgc3RyaW5nXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IC0gVGhlIHBhcnNlZCBxdWVyeSBzdHJpbmcgYXZhaWxhYmxlIGFzIGFuIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHBhcnNlUXVlcnlTdHJpbmcgPSBmdW5jdGlvbihxdWVyeVN0cmluZykge1xuICAgICAgICAgICAgdmFyIHFzID0gZGVjb2RlVVJJQ29tcG9uZW50KHF1ZXJ5U3RyaW5nKTtcbiAgICAgICAgICAgIHZhciBvYmogPSB7fTtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBxcy5zcGxpdCgnJicpO1xuICAgICAgICAgICAgcGFyYW1zLmZvckVhY2goZnVuY3Rpb24ocGFyYW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc3BsaXR0ZXIgPSBwYXJhbS5zcGxpdCgnPScpO1xuICAgICAgICAgICAgICAgIG9ialtzcGxpdHRlclswXV0gPSBzcGxpdHRlclsxXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2tzIHRoZSByZXNwb25zZSB1cmwgY2FsbGJhY2sgZnJvbSBmYWNlYm9vayBhbmQgc3RvcmUgdGhlIGFjY2Vzc190b2tlblxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIC0gVGhlIHVybCB3ZSBhcmUgZ2V0dGluZyBiYWNrIGZyb20gZmFjZWJvb2tcbiAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59IC0gdHJ1ZSBpZiBzdWNjZXNzZnVsbCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgb2F1dGhDYWxsYmFjayA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgLy8gUGFyc2UgdGhlIE9BdXRoIGRhdGEgcmVjZWl2ZWQgZnJvbSBGYWNlYm9va1xuICAgICAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nO1xuICAgICAgICAgICAgdmFyIG9iajtcblxuICAgICAgICAgICAgaWYodXJsLmluZGV4T2YoJ2FjY2Vzc190b2tlbj0nKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlTdHJpbmcgPSB1cmwuc3Vic3RyKHVybC5pbmRleE9mKCcjJykgKyAyKTtcbiAgICAgICAgICAgICAgICBvYmogPSBwYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKTtcbiAgICAgICAgICAgICAgICB0b2tlblN0b3JlLmZidG9rZW4gPSBvYmouYWNjZXNzX3Rva2VuO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHVybC5pbmRleE9mKCdlcnJvcj0nKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlTdHJpbmcgPSB1cmwuc3Vic3RyaW5nKHVybC5pbmRleE9mKCc/JykgKyAyLCB1cmwuaW5kZXhPZignIycpKTtcbiAgICAgICAgICAgICAgICBvYmogPSBwYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTGV0cyB5b3UgbWFrZSBhbnkgRmFjZWJvb2sgR3JhcGggQVBJIHJlcXVlc3QuXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSBSZXF1ZXN0IGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBDYW4gaW5jbHVkZTpcbiAgICAgICAgICogIG1ldGhvZDogIEhUVFAgbWV0aG9kOiBHRVQsIFBPU1QsIGV0Yy4gT3B0aW9uYWwgLSBEZWZhdWx0IGlzICdHRVQnXG4gICAgICAgICAqICBwYXRoOiAgICBwYXRoIGluIHRoZSBGYWNlYm9vayBncmFwaDogL21lLCAvbWUuZnJpZW5kcywgZXRjLiAtIFJlcXVpcmVkXG4gICAgICAgICAqICBwYXJhbXM6ICBxdWVyeVN0cmluZyBwYXJhbWV0ZXJzIGFzIGEgbWFwIC0gT3B0aW9uYWxcbiAgICAgICAgICogQHJldHVybnMge1Byb21pc2V9IC0gcmV0dXJucyBhIHByb21pc2VcbiAgICAgICAgICovXG4gICAgICAgIHZhciBhcGkgPSBmdW5jdGlvbihvYmopIHtcblxuICAgICAgICAgICAgdmFyIG1ldGhvZCA9IG9iai5tZXRob2QgfHwgJ0dFVCc7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gb2JqLnBhcmFtcyB8fCB7fTtcblxuICAgICAgICAgICAgcGFyYW1zLmFjY2Vzc190b2tlbiA9IHRva2VuU3RvcmUuZmJ0b2tlbjtcblxuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbScgKyBvYmoucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5lcnJvciAmJiBkYXRhLmVycm9yLnR5cGUgPT09ICdPQXV0aEV4Y2VwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGVtaXQoJ09BdXRoRXhjZXB0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGRlLWF1dGhvcml6ZSB0aGUgYXBwXG4gICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSAtIHJldHVybnMgYSBwcm9taXNlXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcmV2b2tlUGVybWlzc2lvbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGkoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgcGF0aDogJy9tZS9wZXJtaXNzaW9ucydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGEgUE9TVCBjYWxsIGludG8gdGhlIEdyYXBoIEFQSVxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aCAtIFRoZSBwYXRoIG9mIHRoZSBodHRwIHBvc3RcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBwYXJhbXNcbiAgICAgICAgICogQHJldHVybnMge1Byb21pc2V9IC0gcmV0dXJucyBhIHByb21pc2VcbiAgICAgICAgICovXG4gICAgICAgIHZhciBwb3N0ID0gZnVuY3Rpb24ocGF0aCwgcGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBpKHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBhIEdFVCBjYWxsIGludG8gdGhlIEdyYXBoIEFQSVxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aCAtIFRoZSBwYXRoIG9mIHRoZSBodHRwIGdldFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gVGhlIHBhcmFtc1xuICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gLSByZXR1cm5zIGEgcHJvbWlzZVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGdldCA9IGZ1bmN0aW9uKHBhdGgsIHBhcmFtcykge1xuICAgICAgICAgICAgcmV0dXJuIGFwaSh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5pdDogaW5pdCxcbiAgICAgICAgICAgIGxvZ2luOiBsb2dpbixcbiAgICAgICAgICAgIGxvZ291dDogbG9nb3V0LFxuICAgICAgICAgICAgcmV2b2tlUGVybWlzc2lvbnM6IHJldm9rZVBlcm1pc3Npb25zLFxuICAgICAgICAgICAgYXBpOiBhcGksXG4gICAgICAgICAgICBwb3N0OiBwb3N0LFxuICAgICAgICAgICAgZ2V0OiBnZXQsXG4gICAgICAgICAgICBvYXV0aENhbGxiYWNrOiBvYXV0aENhbGxiYWNrXG4gICAgICAgIH07XG5cbiAgICB9XG4gICAgc2VydmljZS4kaW5qZWN0ID0gZGVwZW5kZW5jaWVzO1xuICAgIGFwcC5mYWN0b3J5KHNlcnZpY2VuYW1lLCBzZXJ2aWNlKTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGFwcCkge1xuICAgIC8vIGluamVjdDpzdGFydFxuICAgIHJlcXVpcmUoJy4vZmFjZWJvb2snKShhcHApO1xuICAgIC8vIGluamVjdDplbmRcbn07IiwiKGZ1bmN0aW9uIChnbG9iYWwpe1xuLyoqXG4gKiBAbGljZW5zZVxuICogTG8tRGFzaCAyLjQuMSAoQ3VzdG9tIEJ1aWxkKSA8aHR0cDovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIC1vIC4vZGlzdC9sb2Rhc2guanNgXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDEzIFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjUuMiA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTMgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cDovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuOyhmdW5jdGlvbigpIHtcblxuICAvKiogVXNlZCBhcyBhIHNhZmUgcmVmZXJlbmNlIGZvciBgdW5kZWZpbmVkYCBpbiBwcmUgRVM1IGVudmlyb25tZW50cyAqL1xuICB2YXIgdW5kZWZpbmVkO1xuXG4gIC8qKiBVc2VkIHRvIHBvb2wgYXJyYXlzIGFuZCBvYmplY3RzIHVzZWQgaW50ZXJuYWxseSAqL1xuICB2YXIgYXJyYXlQb29sID0gW10sXG4gICAgICBvYmplY3RQb29sID0gW107XG5cbiAgLyoqIFVzZWQgdG8gZ2VuZXJhdGUgdW5pcXVlIElEcyAqL1xuICB2YXIgaWRDb3VudGVyID0gMDtcblxuICAvKiogVXNlZCB0byBwcmVmaXgga2V5cyB0byBhdm9pZCBpc3N1ZXMgd2l0aCBgX19wcm90b19fYCBhbmQgcHJvcGVydGllcyBvbiBgT2JqZWN0LnByb3RvdHlwZWAgKi9cbiAgdmFyIGtleVByZWZpeCA9ICtuZXcgRGF0ZSArICcnO1xuXG4gIC8qKiBVc2VkIGFzIHRoZSBzaXplIHdoZW4gb3B0aW1pemF0aW9ucyBhcmUgZW5hYmxlZCBmb3IgbGFyZ2UgYXJyYXlzICovXG4gIHZhciBsYXJnZUFycmF5U2l6ZSA9IDc1O1xuXG4gIC8qKiBVc2VkIGFzIHRoZSBtYXggc2l6ZSBvZiB0aGUgYGFycmF5UG9vbGAgYW5kIGBvYmplY3RQb29sYCAqL1xuICB2YXIgbWF4UG9vbFNpemUgPSA0MDtcblxuICAvKiogVXNlZCB0byBkZXRlY3QgYW5kIHRlc3Qgd2hpdGVzcGFjZSAqL1xuICB2YXIgd2hpdGVzcGFjZSA9IChcbiAgICAvLyB3aGl0ZXNwYWNlXG4gICAgJyBcXHRcXHgwQlxcZlxceEEwXFx1ZmVmZicgK1xuXG4gICAgLy8gbGluZSB0ZXJtaW5hdG9yc1xuICAgICdcXG5cXHJcXHUyMDI4XFx1MjAyOScgK1xuXG4gICAgLy8gdW5pY29kZSBjYXRlZ29yeSBcIlpzXCIgc3BhY2Ugc2VwYXJhdG9yc1xuICAgICdcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwJ1xuICApO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIGVtcHR5IHN0cmluZyBsaXRlcmFscyBpbiBjb21waWxlZCB0ZW1wbGF0ZSBzb3VyY2UgKi9cbiAgdmFyIHJlRW1wdHlTdHJpbmdMZWFkaW5nID0gL1xcYl9fcCBcXCs9ICcnOy9nLFxuICAgICAgcmVFbXB0eVN0cmluZ01pZGRsZSA9IC9cXGIoX19wIFxcKz0pICcnIFxcKy9nLFxuICAgICAgcmVFbXB0eVN0cmluZ1RyYWlsaW5nID0gLyhfX2VcXCguKj9cXCl8XFxiX190XFwpKSBcXCtcXG4nJzsvZztcblxuICAvKipcbiAgICogVXNlZCB0byBtYXRjaCBFUzYgdGVtcGxhdGUgZGVsaW1pdGVyc1xuICAgKiBodHRwOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1saXRlcmFscy1zdHJpbmctbGl0ZXJhbHNcbiAgICovXG4gIHZhciByZUVzVGVtcGxhdGUgPSAvXFwkXFx7KFteXFxcXH1dKig/OlxcXFwuW15cXFxcfV0qKSopXFx9L2c7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggcmVnZXhwIGZsYWdzIGZyb20gdGhlaXIgY29lcmNlZCBzdHJpbmcgdmFsdWVzICovXG4gIHZhciByZUZsYWdzID0gL1xcdyokLztcblxuICAvKiogVXNlZCB0byBkZXRlY3RlZCBuYW1lZCBmdW5jdGlvbnMgKi9cbiAgdmFyIHJlRnVuY05hbWUgPSAvXlxccypmdW5jdGlvblsgXFxuXFxyXFx0XStcXHcvO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIFwiaW50ZXJwb2xhdGVcIiB0ZW1wbGF0ZSBkZWxpbWl0ZXJzICovXG4gIHZhciByZUludGVycG9sYXRlID0gLzwlPShbXFxzXFxTXSs/KSU+L2c7XG5cbiAgLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyB3aGl0ZXNwYWNlIGFuZCB6ZXJvcyB0byBiZSByZW1vdmVkICovXG4gIHZhciByZUxlYWRpbmdTcGFjZXNBbmRaZXJvcyA9IFJlZ0V4cCgnXlsnICsgd2hpdGVzcGFjZSArICddKjArKD89LiQpJyk7XG5cbiAgLyoqIFVzZWQgdG8gZW5zdXJlIGNhcHR1cmluZyBvcmRlciBvZiB0ZW1wbGF0ZSBkZWxpbWl0ZXJzICovXG4gIHZhciByZU5vTWF0Y2ggPSAvKCReKS87XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZWN0IGZ1bmN0aW9ucyBjb250YWluaW5nIGEgYHRoaXNgIHJlZmVyZW5jZSAqL1xuICB2YXIgcmVUaGlzID0gL1xcYnRoaXNcXGIvO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIHVuZXNjYXBlZCBjaGFyYWN0ZXJzIGluIGNvbXBpbGVkIHN0cmluZyBsaXRlcmFscyAqL1xuICB2YXIgcmVVbmVzY2FwZWRTdHJpbmcgPSAvWydcXG5cXHJcXHRcXHUyMDI4XFx1MjAyOVxcXFxdL2c7XG5cbiAgLyoqIFVzZWQgdG8gYXNzaWduIGRlZmF1bHQgYGNvbnRleHRgIG9iamVjdCBwcm9wZXJ0aWVzICovXG4gIHZhciBjb250ZXh0UHJvcHMgPSBbXG4gICAgJ0FycmF5JywgJ0Jvb2xlYW4nLCAnRGF0ZScsICdGdW5jdGlvbicsICdNYXRoJywgJ051bWJlcicsICdPYmplY3QnLFxuICAgICdSZWdFeHAnLCAnU3RyaW5nJywgJ18nLCAnYXR0YWNoRXZlbnQnLCAnY2xlYXJUaW1lb3V0JywgJ2lzRmluaXRlJywgJ2lzTmFOJyxcbiAgICAncGFyc2VJbnQnLCAnc2V0VGltZW91dCdcbiAgXTtcblxuICAvKiogVXNlZCB0byBtYWtlIHRlbXBsYXRlIHNvdXJjZVVSTHMgZWFzaWVyIHRvIGlkZW50aWZ5ICovXG4gIHZhciB0ZW1wbGF0ZUNvdW50ZXIgPSAwO1xuXG4gIC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgc2hvcnRjdXRzICovXG4gIHZhciBhcmdzQ2xhc3MgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICAgIGFycmF5Q2xhc3MgPSAnW29iamVjdCBBcnJheV0nLFxuICAgICAgYm9vbENsYXNzID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuICAgICAgZGF0ZUNsYXNzID0gJ1tvYmplY3QgRGF0ZV0nLFxuICAgICAgZnVuY0NsYXNzID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICAgIG51bWJlckNsYXNzID0gJ1tvYmplY3QgTnVtYmVyXScsXG4gICAgICBvYmplY3RDbGFzcyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuICAgICAgcmVnZXhwQ2xhc3MgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICAgIHN0cmluZ0NsYXNzID0gJ1tvYmplY3QgU3RyaW5nXSc7XG5cbiAgLyoqIFVzZWQgdG8gaWRlbnRpZnkgb2JqZWN0IGNsYXNzaWZpY2F0aW9ucyB0aGF0IGBfLmNsb25lYCBzdXBwb3J0cyAqL1xuICB2YXIgY2xvbmVhYmxlQ2xhc3NlcyA9IHt9O1xuICBjbG9uZWFibGVDbGFzc2VzW2Z1bmNDbGFzc10gPSBmYWxzZTtcbiAgY2xvbmVhYmxlQ2xhc3Nlc1thcmdzQ2xhc3NdID0gY2xvbmVhYmxlQ2xhc3Nlc1thcnJheUNsYXNzXSA9XG4gIGNsb25lYWJsZUNsYXNzZXNbYm9vbENsYXNzXSA9IGNsb25lYWJsZUNsYXNzZXNbZGF0ZUNsYXNzXSA9XG4gIGNsb25lYWJsZUNsYXNzZXNbbnVtYmVyQ2xhc3NdID0gY2xvbmVhYmxlQ2xhc3Nlc1tvYmplY3RDbGFzc10gPVxuICBjbG9uZWFibGVDbGFzc2VzW3JlZ2V4cENsYXNzXSA9IGNsb25lYWJsZUNsYXNzZXNbc3RyaW5nQ2xhc3NdID0gdHJ1ZTtcblxuICAvKiogVXNlZCBhcyBhbiBpbnRlcm5hbCBgXy5kZWJvdW5jZWAgb3B0aW9ucyBvYmplY3QgKi9cbiAgdmFyIGRlYm91bmNlT3B0aW9ucyA9IHtcbiAgICAnbGVhZGluZyc6IGZhbHNlLFxuICAgICdtYXhXYWl0JzogMCxcbiAgICAndHJhaWxpbmcnOiBmYWxzZVxuICB9O1xuXG4gIC8qKiBVc2VkIGFzIHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yIGZvciBgX19iaW5kRGF0YV9fYCAqL1xuICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICAnY29uZmlndXJhYmxlJzogZmFsc2UsXG4gICAgJ2VudW1lcmFibGUnOiBmYWxzZSxcbiAgICAndmFsdWUnOiBudWxsLFxuICAgICd3cml0YWJsZSc6IGZhbHNlXG4gIH07XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZXJtaW5lIGlmIHZhbHVlcyBhcmUgb2YgdGhlIGxhbmd1YWdlIHR5cGUgT2JqZWN0ICovXG4gIHZhciBvYmplY3RUeXBlcyA9IHtcbiAgICAnYm9vbGVhbic6IGZhbHNlLFxuICAgICdmdW5jdGlvbic6IHRydWUsXG4gICAgJ29iamVjdCc6IHRydWUsXG4gICAgJ251bWJlcic6IGZhbHNlLFxuICAgICdzdHJpbmcnOiBmYWxzZSxcbiAgICAndW5kZWZpbmVkJzogZmFsc2VcbiAgfTtcblxuICAvKiogVXNlZCB0byBlc2NhcGUgY2hhcmFjdGVycyBmb3IgaW5jbHVzaW9uIGluIGNvbXBpbGVkIHN0cmluZyBsaXRlcmFscyAqL1xuICB2YXIgc3RyaW5nRXNjYXBlcyA9IHtcbiAgICAnXFxcXCc6ICdcXFxcJyxcbiAgICBcIidcIjogXCInXCIsXG4gICAgJ1xcbic6ICduJyxcbiAgICAnXFxyJzogJ3InLFxuICAgICdcXHQnOiAndCcsXG4gICAgJ1xcdTIwMjgnOiAndTIwMjgnLFxuICAgICdcXHUyMDI5JzogJ3UyMDI5J1xuICB9O1xuXG4gIC8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0ICovXG4gIHZhciByb290ID0gKG9iamVjdFR5cGVzW3R5cGVvZiB3aW5kb3ddICYmIHdpbmRvdykgfHwgdGhpcztcblxuICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGV4cG9ydHNgICovXG4gIHZhciBmcmVlRXhwb3J0cyA9IG9iamVjdFR5cGVzW3R5cGVvZiBleHBvcnRzXSAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBtb2R1bGVgICovXG4gIHZhciBmcmVlTW9kdWxlID0gb2JqZWN0VHlwZXNbdHlwZW9mIG1vZHVsZV0gJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlO1xuXG4gIC8qKiBEZXRlY3QgdGhlIHBvcHVsYXIgQ29tbW9uSlMgZXh0ZW5zaW9uIGBtb2R1bGUuZXhwb3J0c2AgKi9cbiAgdmFyIG1vZHVsZUV4cG9ydHMgPSBmcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUuZXhwb3J0cyA9PT0gZnJlZUV4cG9ydHMgJiYgZnJlZUV4cG9ydHM7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcyBvciBCcm93c2VyaWZpZWQgY29kZSBhbmQgdXNlIGl0IGFzIGByb290YCAqL1xuICB2YXIgZnJlZUdsb2JhbCA9IG9iamVjdFR5cGVzW3R5cGVvZiBnbG9iYWxdICYmIGdsb2JhbDtcbiAgaWYgKGZyZWVHbG9iYWwgJiYgKGZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsIHx8IGZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsKSkge1xuICAgIHJvb3QgPSBmcmVlR2xvYmFsO1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmluZGV4T2ZgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYmluYXJ5IHNlYXJjaGVzXG4gICAqIG9yIGBmcm9tSW5kZXhgIGNvbnN0cmFpbnRzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlIG9yIGAtMWAuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlSW5kZXhPZihhcnJheSwgdmFsdWUsIGZyb21JbmRleCkge1xuICAgIHZhciBpbmRleCA9IChmcm9tSW5kZXggfHwgMCkgLSAxLFxuICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgaWYgKGFycmF5W2luZGV4XSA9PT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICAvKipcbiAgICogQW4gaW1wbGVtZW50YXRpb24gb2YgYF8uY29udGFpbnNgIGZvciBjYWNoZSBvYmplY3RzIHRoYXQgbWltaWNzIHRoZSByZXR1cm5cbiAgICogc2lnbmF0dXJlIG9mIGBfLmluZGV4T2ZgIGJ5IHJldHVybmluZyBgMGAgaWYgdGhlIHZhbHVlIGlzIGZvdW5kLCBlbHNlIGAtMWAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjYWNoZSBUaGUgY2FjaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgYDBgIGlmIGB2YWx1ZWAgaXMgZm91bmQsIGVsc2UgYC0xYC5cbiAgICovXG4gIGZ1bmN0aW9uIGNhY2hlSW5kZXhPZihjYWNoZSwgdmFsdWUpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICBjYWNoZSA9IGNhY2hlLmNhY2hlO1xuXG4gICAgaWYgKHR5cGUgPT0gJ2Jvb2xlYW4nIHx8IHZhbHVlID09IG51bGwpIHtcbiAgICAgIHJldHVybiBjYWNoZVt2YWx1ZV0gPyAwIDogLTE7XG4gICAgfVxuICAgIGlmICh0eXBlICE9ICdudW1iZXInICYmIHR5cGUgIT0gJ3N0cmluZycpIHtcbiAgICAgIHR5cGUgPSAnb2JqZWN0JztcbiAgICB9XG4gICAgdmFyIGtleSA9IHR5cGUgPT0gJ251bWJlcicgPyB2YWx1ZSA6IGtleVByZWZpeCArIHZhbHVlO1xuICAgIGNhY2hlID0gKGNhY2hlID0gY2FjaGVbdHlwZV0pICYmIGNhY2hlW2tleV07XG5cbiAgICByZXR1cm4gdHlwZSA9PSAnb2JqZWN0J1xuICAgICAgPyAoY2FjaGUgJiYgYmFzZUluZGV4T2YoY2FjaGUsIHZhbHVlKSA+IC0xID8gMCA6IC0xKVxuICAgICAgOiAoY2FjaGUgPyAwIDogLTEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBnaXZlbiB2YWx1ZSB0byB0aGUgY29ycmVzcG9uZGluZyBjYWNoZSBvYmplY3QuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGFkZCB0byB0aGUgY2FjaGUuXG4gICAqL1xuICBmdW5jdGlvbiBjYWNoZVB1c2godmFsdWUpIHtcbiAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlLFxuICAgICAgICB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG4gICAgaWYgKHR5cGUgPT0gJ2Jvb2xlYW4nIHx8IHZhbHVlID09IG51bGwpIHtcbiAgICAgIGNhY2hlW3ZhbHVlXSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlICE9ICdudW1iZXInICYmIHR5cGUgIT0gJ3N0cmluZycpIHtcbiAgICAgICAgdHlwZSA9ICdvYmplY3QnO1xuICAgICAgfVxuICAgICAgdmFyIGtleSA9IHR5cGUgPT0gJ251bWJlcicgPyB2YWx1ZSA6IGtleVByZWZpeCArIHZhbHVlLFxuICAgICAgICAgIHR5cGVDYWNoZSA9IGNhY2hlW3R5cGVdIHx8IChjYWNoZVt0eXBlXSA9IHt9KTtcblxuICAgICAgaWYgKHR5cGUgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgKHR5cGVDYWNoZVtrZXldIHx8ICh0eXBlQ2FjaGVba2V5XSA9IFtdKSkucHVzaCh2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0eXBlQ2FjaGVba2V5XSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8ubWF4YCBhbmQgYF8ubWluYCBhcyB0aGUgZGVmYXVsdCBjYWxsYmFjayB3aGVuIGEgZ2l2ZW5cbiAgICogY29sbGVjdGlvbiBpcyBhIHN0cmluZyB2YWx1ZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFRoZSBjaGFyYWN0ZXIgdG8gaW5zcGVjdC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29kZSB1bml0IG9mIGdpdmVuIGNoYXJhY3Rlci5cbiAgICovXG4gIGZ1bmN0aW9uIGNoYXJBdENhbGxiYWNrKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmNoYXJDb2RlQXQoMCk7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBieSBgc29ydEJ5YCB0byBjb21wYXJlIHRyYW5zZm9ybWVkIGBjb2xsZWN0aW9uYCBlbGVtZW50cywgc3RhYmxlIHNvcnRpbmdcbiAgICogdGhlbSBpbiBhc2NlbmRpbmcgb3JkZXIuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gY29tcGFyZSB0byBgYmAuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBiIFRoZSBvYmplY3QgdG8gY29tcGFyZSB0byBgYWAuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHNvcnQgb3JkZXIgaW5kaWNhdG9yIG9mIGAxYCBvciBgLTFgLlxuICAgKi9cbiAgZnVuY3Rpb24gY29tcGFyZUFzY2VuZGluZyhhLCBiKSB7XG4gICAgdmFyIGFjID0gYS5jcml0ZXJpYSxcbiAgICAgICAgYmMgPSBiLmNyaXRlcmlhLFxuICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBhYy5sZW5ndGg7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgdmFyIHZhbHVlID0gYWNbaW5kZXhdLFxuICAgICAgICAgIG90aGVyID0gYmNbaW5kZXhdO1xuXG4gICAgICBpZiAodmFsdWUgIT09IG90aGVyKSB7XG4gICAgICAgIGlmICh2YWx1ZSA+IG90aGVyIHx8IHR5cGVvZiB2YWx1ZSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSA8IG90aGVyIHx8IHR5cGVvZiBvdGhlciA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBGaXhlcyBhbiBgQXJyYXkjc29ydGAgYnVnIGluIHRoZSBKUyBlbmdpbmUgZW1iZWRkZWQgaW4gQWRvYmUgYXBwbGljYXRpb25zXG4gICAgLy8gdGhhdCBjYXVzZXMgaXQsIHVuZGVyIGNlcnRhaW4gY2lyY3Vtc3RhbmNlcywgdG8gcmV0dXJuIHRoZSBzYW1lIHZhbHVlIGZvclxuICAgIC8vIGBhYCBhbmQgYGJgLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2phc2hrZW5hcy91bmRlcnNjb3JlL3B1bGwvMTI0N1xuICAgIC8vXG4gICAgLy8gVGhpcyBhbHNvIGVuc3VyZXMgYSBzdGFibGUgc29ydCBpbiBWOCBhbmQgb3RoZXIgZW5naW5lcy5cbiAgICAvLyBTZWUgaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9OTBcbiAgICByZXR1cm4gYS5pbmRleCAtIGIuaW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNhY2hlIG9iamVjdCB0byBvcHRpbWl6ZSBsaW5lYXIgc2VhcmNoZXMgb2YgbGFyZ2UgYXJyYXlzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBbYXJyYXk9W11dIFRoZSBhcnJheSB0byBzZWFyY2guXG4gICAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyB0aGUgY2FjaGUgb2JqZWN0IG9yIGBudWxsYCBpZiBjYWNoaW5nIHNob3VsZCBub3QgYmUgdXNlZC5cbiAgICovXG4gIGZ1bmN0aW9uIGNyZWF0ZUNhY2hlKGFycmF5KSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgICAgZmlyc3QgPSBhcnJheVswXSxcbiAgICAgICAgbWlkID0gYXJyYXlbKGxlbmd0aCAvIDIpIHwgMF0sXG4gICAgICAgIGxhc3QgPSBhcnJheVtsZW5ndGggLSAxXTtcblxuICAgIGlmIChmaXJzdCAmJiB0eXBlb2YgZmlyc3QgPT0gJ29iamVjdCcgJiZcbiAgICAgICAgbWlkICYmIHR5cGVvZiBtaWQgPT0gJ29iamVjdCcgJiYgbGFzdCAmJiB0eXBlb2YgbGFzdCA9PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgY2FjaGUgPSBnZXRPYmplY3QoKTtcbiAgICBjYWNoZVsnZmFsc2UnXSA9IGNhY2hlWydudWxsJ10gPSBjYWNoZVsndHJ1ZSddID0gY2FjaGVbJ3VuZGVmaW5lZCddID0gZmFsc2U7XG5cbiAgICB2YXIgcmVzdWx0ID0gZ2V0T2JqZWN0KCk7XG4gICAgcmVzdWx0LmFycmF5ID0gYXJyYXk7XG4gICAgcmVzdWx0LmNhY2hlID0gY2FjaGU7XG4gICAgcmVzdWx0LnB1c2ggPSBjYWNoZVB1c2g7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgcmVzdWx0LnB1c2goYXJyYXlbaW5kZXhdKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIGJ5IGB0ZW1wbGF0ZWAgdG8gZXNjYXBlIGNoYXJhY3RlcnMgZm9yIGluY2x1c2lvbiBpbiBjb21waWxlZFxuICAgKiBzdHJpbmcgbGl0ZXJhbHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtYXRjaCBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gZXNjYXBlLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cbiAgICovXG4gIGZ1bmN0aW9uIGVzY2FwZVN0cmluZ0NoYXIobWF0Y2gpIHtcbiAgICByZXR1cm4gJ1xcXFwnICsgc3RyaW5nRXNjYXBlc1ttYXRjaF07XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhbiBhcnJheSBmcm9tIHRoZSBhcnJheSBwb29sIG9yIGNyZWF0ZXMgYSBuZXcgb25lIGlmIHRoZSBwb29sIGlzIGVtcHR5LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFRoZSBhcnJheSBmcm9tIHRoZSBwb29sLlxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0QXJyYXkoKSB7XG4gICAgcmV0dXJuIGFycmF5UG9vbC5wb3AoKSB8fCBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGFuIG9iamVjdCBmcm9tIHRoZSBvYmplY3QgcG9vbCBvciBjcmVhdGVzIGEgbmV3IG9uZSBpZiB0aGUgcG9vbCBpcyBlbXB0eS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge09iamVjdH0gVGhlIG9iamVjdCBmcm9tIHRoZSBwb29sLlxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0T2JqZWN0KCkge1xuICAgIHJldHVybiBvYmplY3RQb29sLnBvcCgpIHx8IHtcbiAgICAgICdhcnJheSc6IG51bGwsXG4gICAgICAnY2FjaGUnOiBudWxsLFxuICAgICAgJ2NyaXRlcmlhJzogbnVsbCxcbiAgICAgICdmYWxzZSc6IGZhbHNlLFxuICAgICAgJ2luZGV4JzogMCxcbiAgICAgICdudWxsJzogZmFsc2UsXG4gICAgICAnbnVtYmVyJzogbnVsbCxcbiAgICAgICdvYmplY3QnOiBudWxsLFxuICAgICAgJ3B1c2gnOiBudWxsLFxuICAgICAgJ3N0cmluZyc6IG51bGwsXG4gICAgICAndHJ1ZSc6IGZhbHNlLFxuICAgICAgJ3VuZGVmaW5lZCc6IGZhbHNlLFxuICAgICAgJ3ZhbHVlJzogbnVsbFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVsZWFzZXMgdGhlIGdpdmVuIGFycmF5IGJhY2sgdG8gdGhlIGFycmF5IHBvb2wuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIHJlbGVhc2UuXG4gICAqL1xuICBmdW5jdGlvbiByZWxlYXNlQXJyYXkoYXJyYXkpIHtcbiAgICBhcnJheS5sZW5ndGggPSAwO1xuICAgIGlmIChhcnJheVBvb2wubGVuZ3RoIDwgbWF4UG9vbFNpemUpIHtcbiAgICAgIGFycmF5UG9vbC5wdXNoKGFycmF5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVsZWFzZXMgdGhlIGdpdmVuIG9iamVjdCBiYWNrIHRvIHRoZSBvYmplY3QgcG9vbC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcmVsZWFzZS5cbiAgICovXG4gIGZ1bmN0aW9uIHJlbGVhc2VPYmplY3Qob2JqZWN0KSB7XG4gICAgdmFyIGNhY2hlID0gb2JqZWN0LmNhY2hlO1xuICAgIGlmIChjYWNoZSkge1xuICAgICAgcmVsZWFzZU9iamVjdChjYWNoZSk7XG4gICAgfVxuICAgIG9iamVjdC5hcnJheSA9IG9iamVjdC5jYWNoZSA9IG9iamVjdC5jcml0ZXJpYSA9IG9iamVjdC5vYmplY3QgPSBvYmplY3QubnVtYmVyID0gb2JqZWN0LnN0cmluZyA9IG9iamVjdC52YWx1ZSA9IG51bGw7XG4gICAgaWYgKG9iamVjdFBvb2wubGVuZ3RoIDwgbWF4UG9vbFNpemUpIHtcbiAgICAgIG9iamVjdFBvb2wucHVzaChvYmplY3QpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTbGljZXMgdGhlIGBjb2xsZWN0aW9uYCBmcm9tIHRoZSBgc3RhcnRgIGluZGV4IHVwIHRvLCBidXQgbm90IGluY2x1ZGluZyxcbiAgICogdGhlIGBlbmRgIGluZGV4LlxuICAgKlxuICAgKiBOb3RlOiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgaW5zdGVhZCBvZiBgQXJyYXkjc2xpY2VgIHRvIHN1cHBvcnQgbm9kZSBsaXN0c1xuICAgKiBpbiBJRSA8IDkgYW5kIHRvIGVuc3VyZSBkZW5zZSBhcnJheXMgYXJlIHJldHVybmVkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2xpY2UuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBUaGUgc3RhcnQgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIGVuZCBpbmRleC5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkuXG4gICAqL1xuICBmdW5jdGlvbiBzbGljZShhcnJheSwgc3RhcnQsIGVuZCkge1xuICAgIHN0YXJ0IHx8IChzdGFydCA9IDApO1xuICAgIGlmICh0eXBlb2YgZW5kID09ICd1bmRlZmluZWQnKSB7XG4gICAgICBlbmQgPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgfVxuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBlbmQgLSBzdGFydCB8fCAwLFxuICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGggPCAwID8gMCA6IGxlbmd0aCk7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgcmVzdWx0W2luZGV4XSA9IGFycmF5W3N0YXJ0ICsgaW5kZXhdO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBgbG9kYXNoYCBmdW5jdGlvbiB1c2luZyB0aGUgZ2l2ZW4gY29udGV4dCBvYmplY3QuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgKiBAcGFyYW0ge09iamVjdH0gW2NvbnRleHQ9cm9vdF0gVGhlIGNvbnRleHQgb2JqZWN0LlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gcnVuSW5Db250ZXh0KGNvbnRleHQpIHtcbiAgICAvLyBBdm9pZCBpc3N1ZXMgd2l0aCBzb21lIEVTMyBlbnZpcm9ubWVudHMgdGhhdCBhdHRlbXB0IHRvIHVzZSB2YWx1ZXMsIG5hbWVkXG4gICAgLy8gYWZ0ZXIgYnVpbHQtaW4gY29uc3RydWN0b3JzIGxpa2UgYE9iamVjdGAsIGZvciB0aGUgY3JlYXRpb24gb2YgbGl0ZXJhbHMuXG4gICAgLy8gRVM1IGNsZWFycyB0aGlzIHVwIGJ5IHN0YXRpbmcgdGhhdCBsaXRlcmFscyBtdXN0IHVzZSBidWlsdC1pbiBjb25zdHJ1Y3RvcnMuXG4gICAgLy8gU2VlIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTEuMS41LlxuICAgIGNvbnRleHQgPSBjb250ZXh0ID8gXy5kZWZhdWx0cyhyb290Lk9iamVjdCgpLCBjb250ZXh0LCBfLnBpY2socm9vdCwgY29udGV4dFByb3BzKSkgOiByb290O1xuXG4gICAgLyoqIE5hdGl2ZSBjb25zdHJ1Y3RvciByZWZlcmVuY2VzICovXG4gICAgdmFyIEFycmF5ID0gY29udGV4dC5BcnJheSxcbiAgICAgICAgQm9vbGVhbiA9IGNvbnRleHQuQm9vbGVhbixcbiAgICAgICAgRGF0ZSA9IGNvbnRleHQuRGF0ZSxcbiAgICAgICAgRnVuY3Rpb24gPSBjb250ZXh0LkZ1bmN0aW9uLFxuICAgICAgICBNYXRoID0gY29udGV4dC5NYXRoLFxuICAgICAgICBOdW1iZXIgPSBjb250ZXh0Lk51bWJlcixcbiAgICAgICAgT2JqZWN0ID0gY29udGV4dC5PYmplY3QsXG4gICAgICAgIFJlZ0V4cCA9IGNvbnRleHQuUmVnRXhwLFxuICAgICAgICBTdHJpbmcgPSBjb250ZXh0LlN0cmluZyxcbiAgICAgICAgVHlwZUVycm9yID0gY29udGV4dC5UeXBlRXJyb3I7XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIGZvciBgQXJyYXlgIG1ldGhvZCByZWZlcmVuY2VzLlxuICAgICAqXG4gICAgICogTm9ybWFsbHkgYEFycmF5LnByb3RvdHlwZWAgd291bGQgc3VmZmljZSwgaG93ZXZlciwgdXNpbmcgYW4gYXJyYXkgbGl0ZXJhbFxuICAgICAqIGF2b2lkcyBpc3N1ZXMgaW4gTmFyd2hhbC5cbiAgICAgKi9cbiAgICB2YXIgYXJyYXlSZWYgPSBbXTtcblxuICAgIC8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMgKi9cbiAgICB2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4gICAgLyoqIFVzZWQgdG8gcmVzdG9yZSB0aGUgb3JpZ2luYWwgYF9gIHJlZmVyZW5jZSBpbiBgbm9Db25mbGljdGAgKi9cbiAgICB2YXIgb2xkRGFzaCA9IGNvbnRleHQuXztcblxuICAgIC8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGludGVybmFsIFtbQ2xhc3NdXSBvZiB2YWx1ZXMgKi9cbiAgICB2YXIgdG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuICAgIC8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUgKi9cbiAgICB2YXIgcmVOYXRpdmUgPSBSZWdFeHAoJ14nICtcbiAgICAgIFN0cmluZyh0b1N0cmluZylcbiAgICAgICAgLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJylcbiAgICAgICAgLnJlcGxhY2UoL3RvU3RyaW5nfCBmb3IgW15cXF1dKy9nLCAnLio/JykgKyAnJCdcbiAgICApO1xuXG4gICAgLyoqIE5hdGl2ZSBtZXRob2Qgc2hvcnRjdXRzICovXG4gICAgdmFyIGNlaWwgPSBNYXRoLmNlaWwsXG4gICAgICAgIGNsZWFyVGltZW91dCA9IGNvbnRleHQuY2xlYXJUaW1lb3V0LFxuICAgICAgICBmbG9vciA9IE1hdGguZmxvb3IsXG4gICAgICAgIGZuVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcsXG4gICAgICAgIGdldFByb3RvdHlwZU9mID0gaXNOYXRpdmUoZ2V0UHJvdG90eXBlT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YpICYmIGdldFByb3RvdHlwZU9mLFxuICAgICAgICBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5LFxuICAgICAgICBwdXNoID0gYXJyYXlSZWYucHVzaCxcbiAgICAgICAgc2V0VGltZW91dCA9IGNvbnRleHQuc2V0VGltZW91dCxcbiAgICAgICAgc3BsaWNlID0gYXJyYXlSZWYuc3BsaWNlLFxuICAgICAgICB1bnNoaWZ0ID0gYXJyYXlSZWYudW5zaGlmdDtcblxuICAgIC8qKiBVc2VkIHRvIHNldCBtZXRhIGRhdGEgb24gZnVuY3Rpb25zICovXG4gICAgdmFyIGRlZmluZVByb3BlcnR5ID0gKGZ1bmN0aW9uKCkge1xuICAgICAgLy8gSUUgOCBvbmx5IGFjY2VwdHMgRE9NIGVsZW1lbnRzXG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbyA9IHt9LFxuICAgICAgICAgICAgZnVuYyA9IGlzTmF0aXZlKGZ1bmMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkpICYmIGZ1bmMsXG4gICAgICAgICAgICByZXN1bHQgPSBmdW5jKG8sIG8sIG8pICYmIGZ1bmM7XG4gICAgICB9IGNhdGNoKGUpIHsgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KCkpO1xuXG4gICAgLyogTmF0aXZlIG1ldGhvZCBzaG9ydGN1dHMgZm9yIG1ldGhvZHMgd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMgKi9cbiAgICB2YXIgbmF0aXZlQ3JlYXRlID0gaXNOYXRpdmUobmF0aXZlQ3JlYXRlID0gT2JqZWN0LmNyZWF0ZSkgJiYgbmF0aXZlQ3JlYXRlLFxuICAgICAgICBuYXRpdmVJc0FycmF5ID0gaXNOYXRpdmUobmF0aXZlSXNBcnJheSA9IEFycmF5LmlzQXJyYXkpICYmIG5hdGl2ZUlzQXJyYXksXG4gICAgICAgIG5hdGl2ZUlzRmluaXRlID0gY29udGV4dC5pc0Zpbml0ZSxcbiAgICAgICAgbmF0aXZlSXNOYU4gPSBjb250ZXh0LmlzTmFOLFxuICAgICAgICBuYXRpdmVLZXlzID0gaXNOYXRpdmUobmF0aXZlS2V5cyA9IE9iamVjdC5rZXlzKSAmJiBuYXRpdmVLZXlzLFxuICAgICAgICBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICAgICAgbmF0aXZlTWluID0gTWF0aC5taW4sXG4gICAgICAgIG5hdGl2ZVBhcnNlSW50ID0gY29udGV4dC5wYXJzZUludCxcbiAgICAgICAgbmF0aXZlUmFuZG9tID0gTWF0aC5yYW5kb207XG5cbiAgICAvKiogVXNlZCB0byBsb29rdXAgYSBidWlsdC1pbiBjb25zdHJ1Y3RvciBieSBbW0NsYXNzXV0gKi9cbiAgICB2YXIgY3RvckJ5Q2xhc3MgPSB7fTtcbiAgICBjdG9yQnlDbGFzc1thcnJheUNsYXNzXSA9IEFycmF5O1xuICAgIGN0b3JCeUNsYXNzW2Jvb2xDbGFzc10gPSBCb29sZWFuO1xuICAgIGN0b3JCeUNsYXNzW2RhdGVDbGFzc10gPSBEYXRlO1xuICAgIGN0b3JCeUNsYXNzW2Z1bmNDbGFzc10gPSBGdW5jdGlvbjtcbiAgICBjdG9yQnlDbGFzc1tvYmplY3RDbGFzc10gPSBPYmplY3Q7XG4gICAgY3RvckJ5Q2xhc3NbbnVtYmVyQ2xhc3NdID0gTnVtYmVyO1xuICAgIGN0b3JCeUNsYXNzW3JlZ2V4cENsYXNzXSA9IFJlZ0V4cDtcbiAgICBjdG9yQnlDbGFzc1tzdHJpbmdDbGFzc10gPSBTdHJpbmc7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgbG9kYXNoYCBvYmplY3Qgd2hpY2ggd3JhcHMgdGhlIGdpdmVuIHZhbHVlIHRvIGVuYWJsZSBpbnR1aXRpdmVcbiAgICAgKiBtZXRob2QgY2hhaW5pbmcuXG4gICAgICpcbiAgICAgKiBJbiBhZGRpdGlvbiB0byBMby1EYXNoIG1ldGhvZHMsIHdyYXBwZXJzIGFsc28gaGF2ZSB0aGUgZm9sbG93aW5nIGBBcnJheWAgbWV0aG9kczpcbiAgICAgKiBgY29uY2F0YCwgYGpvaW5gLCBgcG9wYCwgYHB1c2hgLCBgcmV2ZXJzZWAsIGBzaGlmdGAsIGBzbGljZWAsIGBzb3J0YCwgYHNwbGljZWAsXG4gICAgICogYW5kIGB1bnNoaWZ0YFxuICAgICAqXG4gICAgICogQ2hhaW5pbmcgaXMgc3VwcG9ydGVkIGluIGN1c3RvbSBidWlsZHMgYXMgbG9uZyBhcyB0aGUgYHZhbHVlYCBtZXRob2QgaXNcbiAgICAgKiBpbXBsaWNpdGx5IG9yIGV4cGxpY2l0bHkgaW5jbHVkZWQgaW4gdGhlIGJ1aWxkLlxuICAgICAqXG4gICAgICogVGhlIGNoYWluYWJsZSB3cmFwcGVyIGZ1bmN0aW9ucyBhcmU6XG4gICAgICogYGFmdGVyYCwgYGFzc2lnbmAsIGBiaW5kYCwgYGJpbmRBbGxgLCBgYmluZEtleWAsIGBjaGFpbmAsIGBjb21wYWN0YCxcbiAgICAgKiBgY29tcG9zZWAsIGBjb25jYXRgLCBgY291bnRCeWAsIGBjcmVhdGVgLCBgY3JlYXRlQ2FsbGJhY2tgLCBgY3VycnlgLFxuICAgICAqIGBkZWJvdW5jZWAsIGBkZWZhdWx0c2AsIGBkZWZlcmAsIGBkZWxheWAsIGBkaWZmZXJlbmNlYCwgYGZpbHRlcmAsIGBmbGF0dGVuYCxcbiAgICAgKiBgZm9yRWFjaGAsIGBmb3JFYWNoUmlnaHRgLCBgZm9ySW5gLCBgZm9ySW5SaWdodGAsIGBmb3JPd25gLCBgZm9yT3duUmlnaHRgLFxuICAgICAqIGBmdW5jdGlvbnNgLCBgZ3JvdXBCeWAsIGBpbmRleEJ5YCwgYGluaXRpYWxgLCBgaW50ZXJzZWN0aW9uYCwgYGludmVydGAsXG4gICAgICogYGludm9rZWAsIGBrZXlzYCwgYG1hcGAsIGBtYXhgLCBgbWVtb2l6ZWAsIGBtZXJnZWAsIGBtaW5gLCBgb2JqZWN0YCwgYG9taXRgLFxuICAgICAqIGBvbmNlYCwgYHBhaXJzYCwgYHBhcnRpYWxgLCBgcGFydGlhbFJpZ2h0YCwgYHBpY2tgLCBgcGx1Y2tgLCBgcHVsbGAsIGBwdXNoYCxcbiAgICAgKiBgcmFuZ2VgLCBgcmVqZWN0YCwgYHJlbW92ZWAsIGByZXN0YCwgYHJldmVyc2VgLCBgc2h1ZmZsZWAsIGBzbGljZWAsIGBzb3J0YCxcbiAgICAgKiBgc29ydEJ5YCwgYHNwbGljZWAsIGB0YXBgLCBgdGhyb3R0bGVgLCBgdGltZXNgLCBgdG9BcnJheWAsIGB0cmFuc2Zvcm1gLFxuICAgICAqIGB1bmlvbmAsIGB1bmlxYCwgYHVuc2hpZnRgLCBgdW56aXBgLCBgdmFsdWVzYCwgYHdoZXJlYCwgYHdpdGhvdXRgLCBgd3JhcGAsXG4gICAgICogYW5kIGB6aXBgXG4gICAgICpcbiAgICAgKiBUaGUgbm9uLWNoYWluYWJsZSB3cmFwcGVyIGZ1bmN0aW9ucyBhcmU6XG4gICAgICogYGNsb25lYCwgYGNsb25lRGVlcGAsIGBjb250YWluc2AsIGBlc2NhcGVgLCBgZXZlcnlgLCBgZmluZGAsIGBmaW5kSW5kZXhgLFxuICAgICAqIGBmaW5kS2V5YCwgYGZpbmRMYXN0YCwgYGZpbmRMYXN0SW5kZXhgLCBgZmluZExhc3RLZXlgLCBgaGFzYCwgYGlkZW50aXR5YCxcbiAgICAgKiBgaW5kZXhPZmAsIGBpc0FyZ3VtZW50c2AsIGBpc0FycmF5YCwgYGlzQm9vbGVhbmAsIGBpc0RhdGVgLCBgaXNFbGVtZW50YCxcbiAgICAgKiBgaXNFbXB0eWAsIGBpc0VxdWFsYCwgYGlzRmluaXRlYCwgYGlzRnVuY3Rpb25gLCBgaXNOYU5gLCBgaXNOdWxsYCwgYGlzTnVtYmVyYCxcbiAgICAgKiBgaXNPYmplY3RgLCBgaXNQbGFpbk9iamVjdGAsIGBpc1JlZ0V4cGAsIGBpc1N0cmluZ2AsIGBpc1VuZGVmaW5lZGAsIGBqb2luYCxcbiAgICAgKiBgbGFzdEluZGV4T2ZgLCBgbWl4aW5gLCBgbm9Db25mbGljdGAsIGBwYXJzZUludGAsIGBwb3BgLCBgcmFuZG9tYCwgYHJlZHVjZWAsXG4gICAgICogYHJlZHVjZVJpZ2h0YCwgYHJlc3VsdGAsIGBzaGlmdGAsIGBzaXplYCwgYHNvbWVgLCBgc29ydGVkSW5kZXhgLCBgcnVuSW5Db250ZXh0YCxcbiAgICAgKiBgdGVtcGxhdGVgLCBgdW5lc2NhcGVgLCBgdW5pcXVlSWRgLCBhbmQgYHZhbHVlYFxuICAgICAqXG4gICAgICogVGhlIHdyYXBwZXIgZnVuY3Rpb25zIGBmaXJzdGAgYW5kIGBsYXN0YCByZXR1cm4gd3JhcHBlZCB2YWx1ZXMgd2hlbiBgbmAgaXNcbiAgICAgKiBwcm92aWRlZCwgb3RoZXJ3aXNlIHRoZXkgcmV0dXJuIHVud3JhcHBlZCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBFeHBsaWNpdCBjaGFpbmluZyBjYW4gYmUgZW5hYmxlZCBieSB1c2luZyB0aGUgYF8uY2hhaW5gIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBuYW1lIF9cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5pbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cmFwIGluIGEgYGxvZGFzaGAgaW5zdGFuY2UuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBhIGBsb2Rhc2hgIGluc3RhbmNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgd3JhcHBlZCA9IF8oWzEsIDIsIDNdKTtcbiAgICAgKlxuICAgICAqIC8vIHJldHVybnMgYW4gdW53cmFwcGVkIHZhbHVlXG4gICAgICogd3JhcHBlZC5yZWR1Y2UoZnVuY3Rpb24oc3VtLCBudW0pIHtcbiAgICAgKiAgIHJldHVybiBzdW0gKyBudW07XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gNlxuICAgICAqXG4gICAgICogLy8gcmV0dXJucyBhIHdyYXBwZWQgdmFsdWVcbiAgICAgKiB2YXIgc3F1YXJlcyA9IHdyYXBwZWQubWFwKGZ1bmN0aW9uKG51bSkge1xuICAgICAqICAgcmV0dXJuIG51bSAqIG51bTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheShzcXVhcmVzKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0FycmF5KHNxdWFyZXMudmFsdWUoKSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxvZGFzaCh2YWx1ZSkge1xuICAgICAgLy8gZG9uJ3Qgd3JhcCBpZiBhbHJlYWR5IHdyYXBwZWQsIGV2ZW4gaWYgd3JhcHBlZCBieSBhIGRpZmZlcmVudCBgbG9kYXNoYCBjb25zdHJ1Y3RvclxuICAgICAgcmV0dXJuICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgIWlzQXJyYXkodmFsdWUpICYmIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdfX3dyYXBwZWRfXycpKVxuICAgICAgID8gdmFsdWVcbiAgICAgICA6IG5ldyBsb2Rhc2hXcmFwcGVyKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGZhc3QgcGF0aCBmb3IgY3JlYXRpbmcgYGxvZGFzaGAgd3JhcHBlciBvYmplY3RzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cmFwIGluIGEgYGxvZGFzaGAgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjaGFpbkFsbCBBIGZsYWcgdG8gZW5hYmxlIGNoYWluaW5nIGZvciBhbGwgbWV0aG9kc1xuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYSBgbG9kYXNoYCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsb2Rhc2hXcmFwcGVyKHZhbHVlLCBjaGFpbkFsbCkge1xuICAgICAgdGhpcy5fX2NoYWluX18gPSAhIWNoYWluQWxsO1xuICAgICAgdGhpcy5fX3dyYXBwZWRfXyA9IHZhbHVlO1xuICAgIH1cbiAgICAvLyBlbnN1cmUgYG5ldyBsb2Rhc2hXcmFwcGVyYCBpcyBhbiBpbnN0YW5jZSBvZiBgbG9kYXNoYFxuICAgIGxvZGFzaFdyYXBwZXIucHJvdG90eXBlID0gbG9kYXNoLnByb3RvdHlwZTtcblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCB1c2VkIHRvIGZsYWcgZW52aXJvbm1lbnRzIGZlYXR1cmVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHR5cGUgT2JqZWN0XG4gICAgICovXG4gICAgdmFyIHN1cHBvcnQgPSBsb2Rhc2guc3VwcG9ydCA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogRGV0ZWN0IGlmIGZ1bmN0aW9ucyBjYW4gYmUgZGVjb21waWxlZCBieSBgRnVuY3Rpb24jdG9TdHJpbmdgXG4gICAgICogKGFsbCBidXQgUFMzIGFuZCBvbGRlciBPcGVyYSBtb2JpbGUgYnJvd3NlcnMgJiBhdm9pZGVkIGluIFdpbmRvd3MgOCBhcHBzKS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBfLnN1cHBvcnRcbiAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICovXG4gICAgc3VwcG9ydC5mdW5jRGVjb21wID0gIWlzTmF0aXZlKGNvbnRleHQuV2luUlRFcnJvcikgJiYgcmVUaGlzLnRlc3QocnVuSW5Db250ZXh0KTtcblxuICAgIC8qKlxuICAgICAqIERldGVjdCBpZiBgRnVuY3Rpb24jbmFtZWAgaXMgc3VwcG9ydGVkIChhbGwgYnV0IElFKS5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBfLnN1cHBvcnRcbiAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICovXG4gICAgc3VwcG9ydC5mdW5jTmFtZXMgPSB0eXBlb2YgRnVuY3Rpb24ubmFtZSA9PSAnc3RyaW5nJztcblxuICAgIC8qKlxuICAgICAqIEJ5IGRlZmF1bHQsIHRoZSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzIHVzZWQgYnkgTG8tRGFzaCBhcmUgc2ltaWxhciB0byB0aG9zZSBpblxuICAgICAqIGVtYmVkZGVkIFJ1YnkgKEVSQikuIENoYW5nZSB0aGUgZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZSBhbHRlcm5hdGl2ZVxuICAgICAqIGRlbGltaXRlcnMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAdHlwZSBPYmplY3RcbiAgICAgKi9cbiAgICBsb2Rhc2gudGVtcGxhdGVTZXR0aW5ncyA9IHtcblxuICAgICAgLyoqXG4gICAgICAgKiBVc2VkIHRvIGRldGVjdCBgZGF0YWAgcHJvcGVydHkgdmFsdWVzIHRvIGJlIEhUTUwtZXNjYXBlZC5cbiAgICAgICAqXG4gICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAgICAgKiBAdHlwZSBSZWdFeHBcbiAgICAgICAqL1xuICAgICAgJ2VzY2FwZSc6IC88JS0oW1xcc1xcU10rPyklPi9nLFxuXG4gICAgICAvKipcbiAgICAgICAqIFVzZWQgdG8gZGV0ZWN0IGNvZGUgdG8gYmUgZXZhbHVhdGVkLlxuICAgICAgICpcbiAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICAgICAqIEB0eXBlIFJlZ0V4cFxuICAgICAgICovXG4gICAgICAnZXZhbHVhdGUnOiAvPCUoW1xcc1xcU10rPyklPi9nLFxuXG4gICAgICAvKipcbiAgICAgICAqIFVzZWQgdG8gZGV0ZWN0IGBkYXRhYCBwcm9wZXJ0eSB2YWx1ZXMgdG8gaW5qZWN0LlxuICAgICAgICpcbiAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICAgICAqIEB0eXBlIFJlZ0V4cFxuICAgICAgICovXG4gICAgICAnaW50ZXJwb2xhdGUnOiByZUludGVycG9sYXRlLFxuXG4gICAgICAvKipcbiAgICAgICAqIFVzZWQgdG8gcmVmZXJlbmNlIHRoZSBkYXRhIG9iamVjdCBpbiB0aGUgdGVtcGxhdGUgdGV4dC5cbiAgICAgICAqXG4gICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAgICAgKiBAdHlwZSBzdHJpbmdcbiAgICAgICAqL1xuICAgICAgJ3ZhcmlhYmxlJzogJycsXG5cbiAgICAgIC8qKlxuICAgICAgICogVXNlZCB0byBpbXBvcnQgdmFyaWFibGVzIGludG8gdGhlIGNvbXBpbGVkIHRlbXBsYXRlLlxuICAgICAgICpcbiAgICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAgICovXG4gICAgICAnaW1wb3J0cyc6IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzLmltcG9ydHNcbiAgICAgICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgICdfJzogbG9kYXNoXG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uYmluZGAgdGhhdCBjcmVhdGVzIHRoZSBib3VuZCBmdW5jdGlvbiBhbmRcbiAgICAgKiBzZXRzIGl0cyBtZXRhIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGJpbmREYXRhIFRoZSBiaW5kIGRhdGEgYXJyYXkuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUJpbmQoYmluZERhdGEpIHtcbiAgICAgIHZhciBmdW5jID0gYmluZERhdGFbMF0sXG4gICAgICAgICAgcGFydGlhbEFyZ3MgPSBiaW5kRGF0YVsyXSxcbiAgICAgICAgICB0aGlzQXJnID0gYmluZERhdGFbNF07XG5cbiAgICAgIGZ1bmN0aW9uIGJvdW5kKCkge1xuICAgICAgICAvLyBgRnVuY3Rpb24jYmluZGAgc3BlY1xuICAgICAgICAvLyBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjMuNC41XG4gICAgICAgIGlmIChwYXJ0aWFsQXJncykge1xuICAgICAgICAgIC8vIGF2b2lkIGBhcmd1bWVudHNgIG9iamVjdCBkZW9wdGltaXphdGlvbnMgYnkgdXNpbmcgYHNsaWNlYCBpbnN0ZWFkXG4gICAgICAgICAgLy8gb2YgYEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsYCBhbmQgbm90IGFzc2lnbmluZyBgYXJndW1lbnRzYCB0byBhXG4gICAgICAgICAgLy8gdmFyaWFibGUgYXMgYSB0ZXJuYXJ5IGV4cHJlc3Npb25cbiAgICAgICAgICB2YXIgYXJncyA9IHNsaWNlKHBhcnRpYWxBcmdzKTtcbiAgICAgICAgICBwdXNoLmFwcGx5KGFyZ3MsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbWltaWMgdGhlIGNvbnN0cnVjdG9yJ3MgYHJldHVybmAgYmVoYXZpb3JcbiAgICAgICAgLy8gaHR0cDovL2VzNS5naXRodWIuaW8vI3gxMy4yLjJcbiAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBib3VuZCkge1xuICAgICAgICAgIC8vIGVuc3VyZSBgbmV3IGJvdW5kYCBpcyBhbiBpbnN0YW5jZSBvZiBgZnVuY2BcbiAgICAgICAgICB2YXIgdGhpc0JpbmRpbmcgPSBiYXNlQ3JlYXRlKGZ1bmMucHJvdG90eXBlKSxcbiAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQmluZGluZywgYXJncyB8fCBhcmd1bWVudHMpO1xuICAgICAgICAgIHJldHVybiBpc09iamVjdChyZXN1bHQpID8gcmVzdWx0IDogdGhpc0JpbmRpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyB8fCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgc2V0QmluZERhdGEoYm91bmQsIGJpbmREYXRhKTtcbiAgICAgIHJldHVybiBib3VuZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jbG9uZWAgd2l0aG91dCBhcmd1bWVudCBqdWdnbGluZyBvciBzdXBwb3J0XG4gICAgICogZm9yIGB0aGlzQXJnYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0RlZXA9ZmFsc2VdIFNwZWNpZnkgYSBkZWVwIGNsb25lLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjbG9uaW5nIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBPVtdXSBUcmFja3MgdHJhdmVyc2VkIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIEFzc29jaWF0ZXMgY2xvbmVzIHdpdGggc291cmNlIGNvdW50ZXJwYXJ0cy5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgY2xvbmVkIHZhbHVlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VDbG9uZSh2YWx1ZSwgaXNEZWVwLCBjYWxsYmFjaywgc3RhY2tBLCBzdGFja0IpIHtcbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gY2FsbGJhY2sodmFsdWUpO1xuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGluc3BlY3QgW1tDbGFzc11dXG4gICAgICB2YXIgaXNPYmogPSBpc09iamVjdCh2YWx1ZSk7XG4gICAgICBpZiAoaXNPYmopIHtcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICAgICAgICBpZiAoIWNsb25lYWJsZUNsYXNzZXNbY2xhc3NOYW1lXSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY3RvciA9IGN0b3JCeUNsYXNzW2NsYXNzTmFtZV07XG4gICAgICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7XG4gICAgICAgICAgY2FzZSBib29sQ2xhc3M6XG4gICAgICAgICAgY2FzZSBkYXRlQ2xhc3M6XG4gICAgICAgICAgICByZXR1cm4gbmV3IGN0b3IoK3ZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgbnVtYmVyQ2xhc3M6XG4gICAgICAgICAgY2FzZSBzdHJpbmdDbGFzczpcbiAgICAgICAgICAgIHJldHVybiBuZXcgY3Rvcih2YWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIHJlZ2V4cENsYXNzOlxuICAgICAgICAgICAgcmVzdWx0ID0gY3Rvcih2YWx1ZS5zb3VyY2UsIHJlRmxhZ3MuZXhlYyh2YWx1ZSkpO1xuICAgICAgICAgICAgcmVzdWx0Lmxhc3RJbmRleCA9IHZhbHVlLmxhc3RJbmRleDtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHZhciBpc0FyciA9IGlzQXJyYXkodmFsdWUpO1xuICAgICAgaWYgKGlzRGVlcCkge1xuICAgICAgICAvLyBjaGVjayBmb3IgY2lyY3VsYXIgcmVmZXJlbmNlcyBhbmQgcmV0dXJuIGNvcnJlc3BvbmRpbmcgY2xvbmVcbiAgICAgICAgdmFyIGluaXRlZFN0YWNrID0gIXN0YWNrQTtcbiAgICAgICAgc3RhY2tBIHx8IChzdGFja0EgPSBnZXRBcnJheSgpKTtcbiAgICAgICAgc3RhY2tCIHx8IChzdGFja0IgPSBnZXRBcnJheSgpKTtcblxuICAgICAgICB2YXIgbGVuZ3RoID0gc3RhY2tBLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgICAgaWYgKHN0YWNrQVtsZW5ndGhdID09IHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhY2tCW2xlbmd0aF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCA9IGlzQXJyID8gY3Rvcih2YWx1ZS5sZW5ndGgpIDoge307XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gaXNBcnIgPyBzbGljZSh2YWx1ZSkgOiBhc3NpZ24oe30sIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIC8vIGFkZCBhcnJheSBwcm9wZXJ0aWVzIGFzc2lnbmVkIGJ5IGBSZWdFeHAjZXhlY2BcbiAgICAgIGlmIChpc0Fycikge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2luZGV4JykpIHtcbiAgICAgICAgICByZXN1bHQuaW5kZXggPSB2YWx1ZS5pbmRleDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2lucHV0JykpIHtcbiAgICAgICAgICByZXN1bHQuaW5wdXQgPSB2YWx1ZS5pbnB1dDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gZXhpdCBmb3Igc2hhbGxvdyBjbG9uZVxuICAgICAgaWYgKCFpc0RlZXApIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIC8vIGFkZCB0aGUgc291cmNlIHZhbHVlIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0c1xuICAgICAgLy8gYW5kIGFzc29jaWF0ZSBpdCB3aXRoIGl0cyBjbG9uZVxuICAgICAgc3RhY2tBLnB1c2godmFsdWUpO1xuICAgICAgc3RhY2tCLnB1c2gocmVzdWx0KTtcblxuICAgICAgLy8gcmVjdXJzaXZlbHkgcG9wdWxhdGUgY2xvbmUgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKVxuICAgICAgKGlzQXJyID8gZm9yRWFjaCA6IGZvck93bikodmFsdWUsIGZ1bmN0aW9uKG9ialZhbHVlLCBrZXkpIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSBiYXNlQ2xvbmUob2JqVmFsdWUsIGlzRGVlcCwgY2FsbGJhY2ssIHN0YWNrQSwgc3RhY2tCKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaW5pdGVkU3RhY2spIHtcbiAgICAgICAgcmVsZWFzZUFycmF5KHN0YWNrQSk7XG4gICAgICAgIHJlbGVhc2VBcnJheShzdGFja0IpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jcmVhdGVgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYXNzaWduaW5nXG4gICAgICogcHJvcGVydGllcyB0byB0aGUgY3JlYXRlZCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b3R5cGUgVGhlIG9iamVjdCB0byBpbmhlcml0IGZyb20uXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlQ3JlYXRlKHByb3RvdHlwZSwgcHJvcGVydGllcykge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0KHByb3RvdHlwZSkgPyBuYXRpdmVDcmVhdGUocHJvdG90eXBlKSA6IHt9O1xuICAgIH1cbiAgICAvLyBmYWxsYmFjayBmb3IgYnJvd3NlcnMgd2l0aG91dCBgT2JqZWN0LmNyZWF0ZWBcbiAgICBpZiAoIW5hdGl2ZUNyZWF0ZSkge1xuICAgICAgYmFzZUNyZWF0ZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgZnVuY3Rpb24gT2JqZWN0KCkge31cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHByb3RvdHlwZSkge1xuICAgICAgICAgIGlmIChpc09iamVjdChwcm90b3R5cGUpKSB7XG4gICAgICAgICAgICBPYmplY3QucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBPYmplY3Q7XG4gICAgICAgICAgICBPYmplY3QucHJvdG90eXBlID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdCB8fCBjb250ZXh0Lk9iamVjdCgpO1xuICAgICAgICB9O1xuICAgICAgfSgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jcmVhdGVDYWxsYmFja2Agd2l0aG91dCBzdXBwb3J0IGZvciBjcmVhdGluZ1xuICAgICAqIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSBbZnVuYz1pZGVudGl0eV0gVGhlIHZhbHVlIHRvIGNvbnZlcnQgdG8gYSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIGNyZWF0ZWQgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcmdDb3VudF0gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgdGhlIGNhbGxiYWNrIGFjY2VwdHMuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIGEgY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUNyZWF0ZUNhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KSB7XG4gICAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gaWRlbnRpdHk7XG4gICAgICB9XG4gICAgICAvLyBleGl0IGVhcmx5IGZvciBubyBgdGhpc0FyZ2Agb3IgYWxyZWFkeSBib3VuZCBieSBgRnVuY3Rpb24jYmluZGBcbiAgICAgIGlmICh0eXBlb2YgdGhpc0FyZyA9PSAndW5kZWZpbmVkJyB8fCAhKCdwcm90b3R5cGUnIGluIGZ1bmMpKSB7XG4gICAgICAgIHJldHVybiBmdW5jO1xuICAgICAgfVxuICAgICAgdmFyIGJpbmREYXRhID0gZnVuYy5fX2JpbmREYXRhX187XG4gICAgICBpZiAodHlwZW9mIGJpbmREYXRhID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChzdXBwb3J0LmZ1bmNOYW1lcykge1xuICAgICAgICAgIGJpbmREYXRhID0gIWZ1bmMubmFtZTtcbiAgICAgICAgfVxuICAgICAgICBiaW5kRGF0YSA9IGJpbmREYXRhIHx8ICFzdXBwb3J0LmZ1bmNEZWNvbXA7XG4gICAgICAgIGlmICghYmluZERhdGEpIHtcbiAgICAgICAgICB2YXIgc291cmNlID0gZm5Ub1N0cmluZy5jYWxsKGZ1bmMpO1xuICAgICAgICAgIGlmICghc3VwcG9ydC5mdW5jTmFtZXMpIHtcbiAgICAgICAgICAgIGJpbmREYXRhID0gIXJlRnVuY05hbWUudGVzdChzb3VyY2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWJpbmREYXRhKSB7XG4gICAgICAgICAgICAvLyBjaGVja3MgaWYgYGZ1bmNgIHJlZmVyZW5jZXMgdGhlIGB0aGlzYCBrZXl3b3JkIGFuZCBzdG9yZXMgdGhlIHJlc3VsdFxuICAgICAgICAgICAgYmluZERhdGEgPSByZVRoaXMudGVzdChzb3VyY2UpO1xuICAgICAgICAgICAgc2V0QmluZERhdGEoZnVuYywgYmluZERhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gZXhpdCBlYXJseSBpZiB0aGVyZSBhcmUgbm8gYHRoaXNgIHJlZmVyZW5jZXMgb3IgYGZ1bmNgIGlzIGJvdW5kXG4gICAgICBpZiAoYmluZERhdGEgPT09IGZhbHNlIHx8IChiaW5kRGF0YSAhPT0gdHJ1ZSAmJiBiaW5kRGF0YVsxXSAmIDEpKSB7XG4gICAgICAgIHJldHVybiBmdW5jO1xuICAgICAgfVxuICAgICAgc3dpdGNoIChhcmdDb3VudCkge1xuICAgICAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhLCBiKTtcbiAgICAgICAgfTtcbiAgICAgICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgICB9O1xuICAgICAgICBjYXNlIDQ6IHJldHVybiBmdW5jdGlvbihhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiaW5kKGZ1bmMsIHRoaXNBcmcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBjcmVhdGVXcmFwcGVyYCB0aGF0IGNyZWF0ZXMgdGhlIHdyYXBwZXIgYW5kXG4gICAgICogc2V0cyBpdHMgbWV0YSBkYXRhLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBiaW5kRGF0YSBUaGUgYmluZCBkYXRhIGFycmF5LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VDcmVhdGVXcmFwcGVyKGJpbmREYXRhKSB7XG4gICAgICB2YXIgZnVuYyA9IGJpbmREYXRhWzBdLFxuICAgICAgICAgIGJpdG1hc2sgPSBiaW5kRGF0YVsxXSxcbiAgICAgICAgICBwYXJ0aWFsQXJncyA9IGJpbmREYXRhWzJdLFxuICAgICAgICAgIHBhcnRpYWxSaWdodEFyZ3MgPSBiaW5kRGF0YVszXSxcbiAgICAgICAgICB0aGlzQXJnID0gYmluZERhdGFbNF0sXG4gICAgICAgICAgYXJpdHkgPSBiaW5kRGF0YVs1XTtcblxuICAgICAgdmFyIGlzQmluZCA9IGJpdG1hc2sgJiAxLFxuICAgICAgICAgIGlzQmluZEtleSA9IGJpdG1hc2sgJiAyLFxuICAgICAgICAgIGlzQ3VycnkgPSBiaXRtYXNrICYgNCxcbiAgICAgICAgICBpc0N1cnJ5Qm91bmQgPSBiaXRtYXNrICYgOCxcbiAgICAgICAgICBrZXkgPSBmdW5jO1xuXG4gICAgICBmdW5jdGlvbiBib3VuZCgpIHtcbiAgICAgICAgdmFyIHRoaXNCaW5kaW5nID0gaXNCaW5kID8gdGhpc0FyZyA6IHRoaXM7XG4gICAgICAgIGlmIChwYXJ0aWFsQXJncykge1xuICAgICAgICAgIHZhciBhcmdzID0gc2xpY2UocGFydGlhbEFyZ3MpO1xuICAgICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydGlhbFJpZ2h0QXJncyB8fCBpc0N1cnJ5KSB7XG4gICAgICAgICAgYXJncyB8fCAoYXJncyA9IHNsaWNlKGFyZ3VtZW50cykpO1xuICAgICAgICAgIGlmIChwYXJ0aWFsUmlnaHRBcmdzKSB7XG4gICAgICAgICAgICBwdXNoLmFwcGx5KGFyZ3MsIHBhcnRpYWxSaWdodEFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNDdXJyeSAmJiBhcmdzLmxlbmd0aCA8IGFyaXR5KSB7XG4gICAgICAgICAgICBiaXRtYXNrIHw9IDE2ICYgfjMyO1xuICAgICAgICAgICAgcmV0dXJuIGJhc2VDcmVhdGVXcmFwcGVyKFtmdW5jLCAoaXNDdXJyeUJvdW5kID8gYml0bWFzayA6IGJpdG1hc2sgJiB+MyksIGFyZ3MsIG51bGwsIHRoaXNBcmcsIGFyaXR5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFyZ3MgfHwgKGFyZ3MgPSBhcmd1bWVudHMpO1xuICAgICAgICBpZiAoaXNCaW5kS2V5KSB7XG4gICAgICAgICAgZnVuYyA9IHRoaXNCaW5kaW5nW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBib3VuZCkge1xuICAgICAgICAgIHRoaXNCaW5kaW5nID0gYmFzZUNyZWF0ZShmdW5jLnByb3RvdHlwZSk7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0JpbmRpbmcsIGFyZ3MpO1xuICAgICAgICAgIHJldHVybiBpc09iamVjdChyZXN1bHQpID8gcmVzdWx0IDogdGhpc0JpbmRpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0JpbmRpbmcsIGFyZ3MpO1xuICAgICAgfVxuICAgICAgc2V0QmluZERhdGEoYm91bmQsIGJpbmREYXRhKTtcbiAgICAgIHJldHVybiBib3VuZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5kaWZmZXJlbmNlYCB0aGF0IGFjY2VwdHMgYSBzaW5nbGUgYXJyYXlcbiAgICAgKiBvZiB2YWx1ZXMgdG8gZXhjbHVkZS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHByb2Nlc3MuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlc10gVGhlIGFycmF5IG9mIHZhbHVlcyB0byBleGNsdWRlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCB2YWx1ZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZURpZmZlcmVuY2UoYXJyYXksIHZhbHVlcykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgaW5kZXhPZiA9IGdldEluZGV4T2YoKSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXG4gICAgICAgICAgaXNMYXJnZSA9IGxlbmd0aCA+PSBsYXJnZUFycmF5U2l6ZSAmJiBpbmRleE9mID09PSBiYXNlSW5kZXhPZixcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgaWYgKGlzTGFyZ2UpIHtcbiAgICAgICAgdmFyIGNhY2hlID0gY3JlYXRlQ2FjaGUodmFsdWVzKTtcbiAgICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgICAgaW5kZXhPZiA9IGNhY2hlSW5kZXhPZjtcbiAgICAgICAgICB2YWx1ZXMgPSBjYWNoZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpc0xhcmdlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcbiAgICAgICAgaWYgKGluZGV4T2YodmFsdWVzLCB2YWx1ZSkgPCAwKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaXNMYXJnZSkge1xuICAgICAgICByZWxlYXNlT2JqZWN0KHZhbHVlcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZsYXR0ZW5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAgICAgKiBzaG9ydGhhbmRzIG9yIGB0aGlzQXJnYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gZmxhdHRlbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1NoYWxsb3c9ZmFsc2VdIEEgZmxhZyB0byByZXN0cmljdCBmbGF0dGVuaW5nIHRvIGEgc2luZ2xlIGxldmVsLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU3RyaWN0PWZhbHNlXSBBIGZsYWcgdG8gcmVzdHJpY3QgZmxhdHRlbmluZyB0byBhcnJheXMgYW5kIGBhcmd1bWVudHNgIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHN0YXJ0IGZyb20uXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGZsYXR0ZW5lZCBhcnJheS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlRmxhdHRlbihhcnJheSwgaXNTaGFsbG93LCBpc1N0cmljdCwgZnJvbUluZGV4KSB7XG4gICAgICB2YXIgaW5kZXggPSAoZnJvbUluZGV4IHx8IDApIC0gMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XTtcblxuICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS5sZW5ndGggPT0gJ251bWJlcidcbiAgICAgICAgICAgICYmIChpc0FycmF5KHZhbHVlKSB8fCBpc0FyZ3VtZW50cyh2YWx1ZSkpKSB7XG4gICAgICAgICAgLy8gcmVjdXJzaXZlbHkgZmxhdHRlbiBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKVxuICAgICAgICAgIGlmICghaXNTaGFsbG93KSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGJhc2VGbGF0dGVuKHZhbHVlLCBpc1NoYWxsb3csIGlzU3RyaWN0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIHZhbEluZGV4ID0gLTEsXG4gICAgICAgICAgICAgIHZhbExlbmd0aCA9IHZhbHVlLmxlbmd0aCxcbiAgICAgICAgICAgICAgcmVzSW5kZXggPSByZXN1bHQubGVuZ3RoO1xuXG4gICAgICAgICAgcmVzdWx0Lmxlbmd0aCArPSB2YWxMZW5ndGg7XG4gICAgICAgICAgd2hpbGUgKCsrdmFsSW5kZXggPCB2YWxMZW5ndGgpIHtcbiAgICAgICAgICAgIHJlc3VsdFtyZXNJbmRleCsrXSA9IHZhbHVlW3ZhbEluZGV4XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWlzU3RyaWN0KSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzRXF1YWxgLCB3aXRob3V0IHN1cHBvcnQgZm9yIGB0aGlzQXJnYCBiaW5kaW5nLFxuICAgICAqIHRoYXQgYWxsb3dzIHBhcnRpYWwgXCJfLndoZXJlXCIgc3R5bGUgY29tcGFyaXNvbnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gYSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICAgKiBAcGFyYW0geyp9IGIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2lzV2hlcmU9ZmFsc2VdIEEgZmxhZyB0byBpbmRpY2F0ZSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQT1bXV0gVHJhY2tzIHRyYXZlcnNlZCBgYWAgb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBUcmFja3MgdHJhdmVyc2VkIGBiYCBvYmplY3RzLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZUlzRXF1YWwoYSwgYiwgY2FsbGJhY2ssIGlzV2hlcmUsIHN0YWNrQSwgc3RhY2tCKSB7XG4gICAgICAvLyB1c2VkIHRvIGluZGljYXRlIHRoYXQgd2hlbiBjb21wYXJpbmcgb2JqZWN0cywgYGFgIGhhcyBhdCBsZWFzdCB0aGUgcHJvcGVydGllcyBvZiBgYmBcbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gY2FsbGJhY2soYSwgYik7XG4gICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgcmV0dXJuICEhcmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBleGl0IGVhcmx5IGZvciBpZGVudGljYWwgdmFsdWVzXG4gICAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICAvLyB0cmVhdCBgKzBgIHZzLiBgLTBgIGFzIG5vdCBlcXVhbFxuICAgICAgICByZXR1cm4gYSAhPT0gMCB8fCAoMSAvIGEgPT0gMSAvIGIpO1xuICAgICAgfVxuICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgYSxcbiAgICAgICAgICBvdGhlclR5cGUgPSB0eXBlb2YgYjtcblxuICAgICAgLy8gZXhpdCBlYXJseSBmb3IgdW5saWtlIHByaW1pdGl2ZSB2YWx1ZXNcbiAgICAgIGlmIChhID09PSBhICYmXG4gICAgICAgICAgIShhICYmIG9iamVjdFR5cGVzW3R5cGVdKSAmJlxuICAgICAgICAgICEoYiAmJiBvYmplY3RUeXBlc1tvdGhlclR5cGVdKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBleGl0IGVhcmx5IGZvciBgbnVsbGAgYW5kIGB1bmRlZmluZWRgIGF2b2lkaW5nIEVTMydzIEZ1bmN0aW9uI2NhbGwgYmVoYXZpb3JcbiAgICAgIC8vIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMy40LjRcbiAgICAgIGlmIChhID09IG51bGwgfHwgYiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBhID09PSBiO1xuICAgICAgfVxuICAgICAgLy8gY29tcGFyZSBbW0NsYXNzXV0gbmFtZXNcbiAgICAgIHZhciBjbGFzc05hbWUgPSB0b1N0cmluZy5jYWxsKGEpLFxuICAgICAgICAgIG90aGVyQ2xhc3MgPSB0b1N0cmluZy5jYWxsKGIpO1xuXG4gICAgICBpZiAoY2xhc3NOYW1lID09IGFyZ3NDbGFzcykge1xuICAgICAgICBjbGFzc05hbWUgPSBvYmplY3RDbGFzcztcbiAgICAgIH1cbiAgICAgIGlmIChvdGhlckNsYXNzID09IGFyZ3NDbGFzcykge1xuICAgICAgICBvdGhlckNsYXNzID0gb2JqZWN0Q2xhc3M7XG4gICAgICB9XG4gICAgICBpZiAoY2xhc3NOYW1lICE9IG90aGVyQ2xhc3MpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgc3dpdGNoIChjbGFzc05hbWUpIHtcbiAgICAgICAgY2FzZSBib29sQ2xhc3M6XG4gICAgICAgIGNhc2UgZGF0ZUNsYXNzOlxuICAgICAgICAgIC8vIGNvZXJjZSBkYXRlcyBhbmQgYm9vbGVhbnMgdG8gbnVtYmVycywgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzIGFuZCBib29sZWFuc1xuICAgICAgICAgIC8vIHRvIGAxYCBvciBgMGAgdHJlYXRpbmcgaW52YWxpZCBkYXRlcyBjb2VyY2VkIHRvIGBOYU5gIGFzIG5vdCBlcXVhbFxuICAgICAgICAgIHJldHVybiArYSA9PSArYjtcblxuICAgICAgICBjYXNlIG51bWJlckNsYXNzOlxuICAgICAgICAgIC8vIHRyZWF0IGBOYU5gIHZzLiBgTmFOYCBhcyBlcXVhbFxuICAgICAgICAgIHJldHVybiAoYSAhPSArYSlcbiAgICAgICAgICAgID8gYiAhPSArYlxuICAgICAgICAgICAgLy8gYnV0IHRyZWF0IGArMGAgdnMuIGAtMGAgYXMgbm90IGVxdWFsXG4gICAgICAgICAgICA6IChhID09IDAgPyAoMSAvIGEgPT0gMSAvIGIpIDogYSA9PSArYik7XG5cbiAgICAgICAgY2FzZSByZWdleHBDbGFzczpcbiAgICAgICAgY2FzZSBzdHJpbmdDbGFzczpcbiAgICAgICAgICAvLyBjb2VyY2UgcmVnZXhlcyB0byBzdHJpbmdzIChodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjEwLjYuNClcbiAgICAgICAgICAvLyB0cmVhdCBzdHJpbmcgcHJpbWl0aXZlcyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBvYmplY3QgaW5zdGFuY2VzIGFzIGVxdWFsXG4gICAgICAgICAgcmV0dXJuIGEgPT0gU3RyaW5nKGIpO1xuICAgICAgfVxuICAgICAgdmFyIGlzQXJyID0gY2xhc3NOYW1lID09IGFycmF5Q2xhc3M7XG4gICAgICBpZiAoIWlzQXJyKSB7XG4gICAgICAgIC8vIHVud3JhcCBhbnkgYGxvZGFzaGAgd3JhcHBlZCB2YWx1ZXNcbiAgICAgICAgdmFyIGFXcmFwcGVkID0gaGFzT3duUHJvcGVydHkuY2FsbChhLCAnX193cmFwcGVkX18nKSxcbiAgICAgICAgICAgIGJXcmFwcGVkID0gaGFzT3duUHJvcGVydHkuY2FsbChiLCAnX193cmFwcGVkX18nKTtcblxuICAgICAgICBpZiAoYVdyYXBwZWQgfHwgYldyYXBwZWQpIHtcbiAgICAgICAgICByZXR1cm4gYmFzZUlzRXF1YWwoYVdyYXBwZWQgPyBhLl9fd3JhcHBlZF9fIDogYSwgYldyYXBwZWQgPyBiLl9fd3JhcHBlZF9fIDogYiwgY2FsbGJhY2ssIGlzV2hlcmUsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBleGl0IGZvciBmdW5jdGlvbnMgYW5kIERPTSBub2Rlc1xuICAgICAgICBpZiAoY2xhc3NOYW1lICE9IG9iamVjdENsYXNzKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluIG9sZGVyIHZlcnNpb25zIG9mIE9wZXJhLCBgYXJndW1lbnRzYCBvYmplY3RzIGhhdmUgYEFycmF5YCBjb25zdHJ1Y3RvcnNcbiAgICAgICAgdmFyIGN0b3JBID0gYS5jb25zdHJ1Y3RvcixcbiAgICAgICAgICAgIGN0b3JCID0gYi5jb25zdHJ1Y3RvcjtcblxuICAgICAgICAvLyBub24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbFxuICAgICAgICBpZiAoY3RvckEgIT0gY3RvckIgJiZcbiAgICAgICAgICAgICAgIShpc0Z1bmN0aW9uKGN0b3JBKSAmJiBjdG9yQSBpbnN0YW5jZW9mIGN0b3JBICYmIGlzRnVuY3Rpb24oY3RvckIpICYmIGN0b3JCIGluc3RhbmNlb2YgY3RvckIpICYmXG4gICAgICAgICAgICAgICgnY29uc3RydWN0b3InIGluIGEgJiYgJ2NvbnN0cnVjdG9yJyBpbiBiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBhc3N1bWUgY3ljbGljIHN0cnVjdHVyZXMgYXJlIGVxdWFsXG4gICAgICAvLyB0aGUgYWxnb3JpdGhtIGZvciBkZXRlY3RpbmcgY3ljbGljIHN0cnVjdHVyZXMgaXMgYWRhcHRlZCBmcm9tIEVTIDUuMVxuICAgICAgLy8gc2VjdGlvbiAxNS4xMi4zLCBhYnN0cmFjdCBvcGVyYXRpb24gYEpPYCAoaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS4xMi4zKVxuICAgICAgdmFyIGluaXRlZFN0YWNrID0gIXN0YWNrQTtcbiAgICAgIHN0YWNrQSB8fCAoc3RhY2tBID0gZ2V0QXJyYXkoKSk7XG4gICAgICBzdGFja0IgfHwgKHN0YWNrQiA9IGdldEFycmF5KCkpO1xuXG4gICAgICB2YXIgbGVuZ3RoID0gc3RhY2tBLmxlbmd0aDtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBpZiAoc3RhY2tBW2xlbmd0aF0gPT0gYSkge1xuICAgICAgICAgIHJldHVybiBzdGFja0JbbGVuZ3RoXSA9PSBiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgc2l6ZSA9IDA7XG4gICAgICByZXN1bHQgPSB0cnVlO1xuXG4gICAgICAvLyBhZGQgYGFgIGFuZCBgYmAgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzXG4gICAgICBzdGFja0EucHVzaChhKTtcbiAgICAgIHN0YWNrQi5wdXNoKGIpO1xuXG4gICAgICAvLyByZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgYW5kIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpXG4gICAgICBpZiAoaXNBcnIpIHtcbiAgICAgICAgLy8gY29tcGFyZSBsZW5ndGhzIHRvIGRldGVybWluZSBpZiBhIGRlZXAgY29tcGFyaXNvbiBpcyBuZWNlc3NhcnlcbiAgICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7XG4gICAgICAgIHNpemUgPSBiLmxlbmd0aDtcbiAgICAgICAgcmVzdWx0ID0gc2l6ZSA9PSBsZW5ndGg7XG5cbiAgICAgICAgaWYgKHJlc3VsdCB8fCBpc1doZXJlKSB7XG4gICAgICAgICAgLy8gZGVlcCBjb21wYXJlIHRoZSBjb250ZW50cywgaWdub3Jpbmcgbm9uLW51bWVyaWMgcHJvcGVydGllc1xuICAgICAgICAgIHdoaWxlIChzaXplLS0pIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGxlbmd0aCxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGJbc2l6ZV07XG5cbiAgICAgICAgICAgIGlmIChpc1doZXJlKSB7XG4gICAgICAgICAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKChyZXN1bHQgPSBiYXNlSXNFcXVhbChhW2luZGV4XSwgdmFsdWUsIGNhbGxiYWNrLCBpc1doZXJlLCBzdGFja0EsIHN0YWNrQikpKSB7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIShyZXN1bHQgPSBiYXNlSXNFcXVhbChhW3NpemVdLCB2YWx1ZSwgY2FsbGJhY2ssIGlzV2hlcmUsIHN0YWNrQSwgc3RhY2tCKSkpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gZGVlcCBjb21wYXJlIG9iamVjdHMgdXNpbmcgYGZvckluYCwgaW5zdGVhZCBvZiBgZm9yT3duYCwgdG8gYXZvaWQgYE9iamVjdC5rZXlzYFxuICAgICAgICAvLyB3aGljaCwgaW4gdGhpcyBjYXNlLCBpcyBtb3JlIGNvc3RseVxuICAgICAgICBmb3JJbihiLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBiKSB7XG4gICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoYiwga2V5KSkge1xuICAgICAgICAgICAgLy8gY291bnQgdGhlIG51bWJlciBvZiBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgc2l6ZSsrO1xuICAgICAgICAgICAgLy8gZGVlcCBjb21wYXJlIGVhY2ggcHJvcGVydHkgdmFsdWUuXG4gICAgICAgICAgICByZXR1cm4gKHJlc3VsdCA9IGhhc093blByb3BlcnR5LmNhbGwoYSwga2V5KSAmJiBiYXNlSXNFcXVhbChhW2tleV0sIHZhbHVlLCBjYWxsYmFjaywgaXNXaGVyZSwgc3RhY2tBLCBzdGFja0IpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChyZXN1bHQgJiYgIWlzV2hlcmUpIHtcbiAgICAgICAgICAvLyBlbnN1cmUgYm90aCBvYmplY3RzIGhhdmUgdGhlIHNhbWUgbnVtYmVyIG9mIHByb3BlcnRpZXNcbiAgICAgICAgICBmb3JJbihhLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBhKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChhLCBrZXkpKSB7XG4gICAgICAgICAgICAgIC8vIGBzaXplYCB3aWxsIGJlIGAtMWAgaWYgYGFgIGhhcyBtb3JlIHByb3BlcnRpZXMgdGhhbiBgYmBcbiAgICAgICAgICAgICAgcmV0dXJuIChyZXN1bHQgPSAtLXNpemUgPiAtMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN0YWNrQS5wb3AoKTtcbiAgICAgIHN0YWNrQi5wb3AoKTtcblxuICAgICAgaWYgKGluaXRlZFN0YWNrKSB7XG4gICAgICAgIHJlbGVhc2VBcnJheShzdGFja0EpO1xuICAgICAgICByZWxlYXNlQXJyYXkoc3RhY2tCKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWVyZ2VgIHdpdGhvdXQgYXJndW1lbnQganVnZ2xpbmcgb3Igc3VwcG9ydFxuICAgICAqIGZvciBgdGhpc0FyZ2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIG1lcmdpbmcgcHJvcGVydGllcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBPVtdXSBUcmFja3MgdHJhdmVyc2VkIHNvdXJjZSBvYmplY3RzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIEFzc29jaWF0ZXMgdmFsdWVzIHdpdGggc291cmNlIGNvdW50ZXJwYXJ0cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiYXNlTWVyZ2Uob2JqZWN0LCBzb3VyY2UsIGNhbGxiYWNrLCBzdGFja0EsIHN0YWNrQikge1xuICAgICAgKGlzQXJyYXkoc291cmNlKSA/IGZvckVhY2ggOiBmb3JPd24pKHNvdXJjZSwgZnVuY3Rpb24oc291cmNlLCBrZXkpIHtcbiAgICAgICAgdmFyIGZvdW5kLFxuICAgICAgICAgICAgaXNBcnIsXG4gICAgICAgICAgICByZXN1bHQgPSBzb3VyY2UsXG4gICAgICAgICAgICB2YWx1ZSA9IG9iamVjdFtrZXldO1xuXG4gICAgICAgIGlmIChzb3VyY2UgJiYgKChpc0FyciA9IGlzQXJyYXkoc291cmNlKSkgfHwgaXNQbGFpbk9iamVjdChzb3VyY2UpKSkge1xuICAgICAgICAgIC8vIGF2b2lkIG1lcmdpbmcgcHJldmlvdXNseSBtZXJnZWQgY3ljbGljIHNvdXJjZXNcbiAgICAgICAgICB2YXIgc3RhY2tMZW5ndGggPSBzdGFja0EubGVuZ3RoO1xuICAgICAgICAgIHdoaWxlIChzdGFja0xlbmd0aC0tKSB7XG4gICAgICAgICAgICBpZiAoKGZvdW5kID0gc3RhY2tBW3N0YWNrTGVuZ3RoXSA9PSBzb3VyY2UpKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gc3RhY2tCW3N0YWNrTGVuZ3RoXTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgIHZhciBpc1NoYWxsb3c7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgcmVzdWx0ID0gY2FsbGJhY2sodmFsdWUsIHNvdXJjZSk7XG4gICAgICAgICAgICAgIGlmICgoaXNTaGFsbG93ID0gdHlwZW9mIHJlc3VsdCAhPSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1NoYWxsb3cpIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSBpc0FyclxuICAgICAgICAgICAgICAgID8gKGlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbXSlcbiAgICAgICAgICAgICAgICA6IChpc1BsYWluT2JqZWN0KHZhbHVlKSA/IHZhbHVlIDoge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYWRkIGBzb3VyY2VgIGFuZCBhc3NvY2lhdGVkIGB2YWx1ZWAgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzXG4gICAgICAgICAgICBzdGFja0EucHVzaChzb3VyY2UpO1xuICAgICAgICAgICAgc3RhY2tCLnB1c2godmFsdWUpO1xuXG4gICAgICAgICAgICAvLyByZWN1cnNpdmVseSBtZXJnZSBvYmplY3RzIGFuZCBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKVxuICAgICAgICAgICAgaWYgKCFpc1NoYWxsb3cpIHtcbiAgICAgICAgICAgICAgYmFzZU1lcmdlKHZhbHVlLCBzb3VyY2UsIGNhbGxiYWNrLCBzdGFja0EsIHN0YWNrQik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgcmVzdWx0ID0gY2FsbGJhY2sodmFsdWUsIHNvdXJjZSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICByZXN1bHQgPSBzb3VyY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnJhbmRvbWAgd2l0aG91dCBhcmd1bWVudCBqdWdnbGluZyBvciBzdXBwb3J0XG4gICAgICogZm9yIHJldHVybmluZyBmbG9hdGluZy1wb2ludCBudW1iZXJzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluIFRoZSBtaW5pbXVtIHBvc3NpYmxlIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXggVGhlIG1heGltdW0gcG9zc2libGUgdmFsdWUuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyBhIHJhbmRvbSBudW1iZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmFzZVJhbmRvbShtaW4sIG1heCkge1xuICAgICAgcmV0dXJuIG1pbiArIGZsb29yKG5hdGl2ZVJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy51bmlxYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrIHNob3J0aGFuZHNcbiAgICAgKiBvciBgdGhpc0FyZ2AgYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHByb2Nlc3MuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNTb3J0ZWQ9ZmFsc2VdIEEgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IGBhcnJheWAgaXMgc29ydGVkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIGR1cGxpY2F0ZS12YWx1ZS1mcmVlIGFycmF5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJhc2VVbmlxKGFycmF5LCBpc1NvcnRlZCwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGluZGV4T2YgPSBnZXRJbmRleE9mKCksXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICB2YXIgaXNMYXJnZSA9ICFpc1NvcnRlZCAmJiBsZW5ndGggPj0gbGFyZ2VBcnJheVNpemUgJiYgaW5kZXhPZiA9PT0gYmFzZUluZGV4T2YsXG4gICAgICAgICAgc2VlbiA9IChjYWxsYmFjayB8fCBpc0xhcmdlKSA/IGdldEFycmF5KCkgOiByZXN1bHQ7XG5cbiAgICAgIGlmIChpc0xhcmdlKSB7XG4gICAgICAgIHZhciBjYWNoZSA9IGNyZWF0ZUNhY2hlKHNlZW4pO1xuICAgICAgICBpbmRleE9mID0gY2FjaGVJbmRleE9mO1xuICAgICAgICBzZWVuID0gY2FjaGU7XG4gICAgICB9XG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF0sXG4gICAgICAgICAgICBjb21wdXRlZCA9IGNhbGxiYWNrID8gY2FsbGJhY2sodmFsdWUsIGluZGV4LCBhcnJheSkgOiB2YWx1ZTtcblxuICAgICAgICBpZiAoaXNTb3J0ZWRcbiAgICAgICAgICAgICAgPyAhaW5kZXggfHwgc2VlbltzZWVuLmxlbmd0aCAtIDFdICE9PSBjb21wdXRlZFxuICAgICAgICAgICAgICA6IGluZGV4T2Yoc2VlbiwgY29tcHV0ZWQpIDwgMFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKGNhbGxiYWNrIHx8IGlzTGFyZ2UpIHtcbiAgICAgICAgICAgIHNlZW4ucHVzaChjb21wdXRlZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGlzTGFyZ2UpIHtcbiAgICAgICAgcmVsZWFzZUFycmF5KHNlZW4uYXJyYXkpO1xuICAgICAgICByZWxlYXNlT2JqZWN0KHNlZW4pO1xuICAgICAgfSBlbHNlIGlmIChjYWxsYmFjaykge1xuICAgICAgICByZWxlYXNlQXJyYXkoc2Vlbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGFnZ3JlZ2F0ZXMgYSBjb2xsZWN0aW9uLCBjcmVhdGluZyBhbiBvYmplY3QgY29tcG9zZWRcbiAgICAgKiBvZiBrZXlzIGdlbmVyYXRlZCBmcm9tIHRoZSByZXN1bHRzIG9mIHJ1bm5pbmcgZWFjaCBlbGVtZW50IG9mIHRoZSBjb2xsZWN0aW9uXG4gICAgICogdGhyb3VnaCBhIGNhbGxiYWNrLiBUaGUgZ2l2ZW4gYHNldHRlcmAgZnVuY3Rpb24gc2V0cyB0aGUga2V5cyBhbmQgdmFsdWVzXG4gICAgICogb2YgdGhlIGNvbXBvc2VkIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc2V0dGVyIFRoZSBzZXR0ZXIgZnVuY3Rpb24uXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWdncmVnYXRvciBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGVBZ2dyZWdhdG9yKHNldHRlcikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuXG4gICAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcblxuICAgICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xuICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBjb2xsZWN0aW9uW2luZGV4XTtcbiAgICAgICAgICAgIHNldHRlcihyZXN1bHQsIHZhbHVlLCBjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pLCBjb2xsZWN0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgIHNldHRlcihyZXN1bHQsIHZhbHVlLCBjYWxsYmFjayh2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSwgY29sbGVjdGlvbik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLCBlaXRoZXIgY3VycmllcyBvciBpbnZva2VzIGBmdW5jYFxuICAgICAqIHdpdGggYW4gb3B0aW9uYWwgYHRoaXNgIGJpbmRpbmcgYW5kIHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxzdHJpbmd9IGZ1bmMgVGhlIGZ1bmN0aW9uIG9yIG1ldGhvZCBuYW1lIHRvIHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBtZXRob2QgZmxhZ3MgdG8gY29tcG9zZS5cbiAgICAgKiAgVGhlIGJpdG1hc2sgbWF5IGJlIGNvbXBvc2VkIG9mIHRoZSBmb2xsb3dpbmcgZmxhZ3M6XG4gICAgICogIDEgLSBgXy5iaW5kYFxuICAgICAqICAyIC0gYF8uYmluZEtleWBcbiAgICAgKiAgNCAtIGBfLmN1cnJ5YFxuICAgICAqICA4IC0gYF8uY3VycnlgIChib3VuZClcbiAgICAgKiAgMTYgLSBgXy5wYXJ0aWFsYFxuICAgICAqICAzMiAtIGBfLnBhcnRpYWxSaWdodGBcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBbcGFydGlhbEFyZ3NdIEFuIGFycmF5IG9mIGFyZ3VtZW50cyB0byBwcmVwZW5kIHRvIHRob3NlXG4gICAgICogIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtBcnJheX0gW3BhcnRpYWxSaWdodEFyZ3NdIEFuIGFycmF5IG9mIGFyZ3VtZW50cyB0byBhcHBlbmQgdG8gdGhvc2VcbiAgICAgKiAgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJpdHldIFRoZSBhcml0eSBvZiBgZnVuY2AuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlV3JhcHBlcihmdW5jLCBiaXRtYXNrLCBwYXJ0aWFsQXJncywgcGFydGlhbFJpZ2h0QXJncywgdGhpc0FyZywgYXJpdHkpIHtcbiAgICAgIHZhciBpc0JpbmQgPSBiaXRtYXNrICYgMSxcbiAgICAgICAgICBpc0JpbmRLZXkgPSBiaXRtYXNrICYgMixcbiAgICAgICAgICBpc0N1cnJ5ID0gYml0bWFzayAmIDQsXG4gICAgICAgICAgaXNDdXJyeUJvdW5kID0gYml0bWFzayAmIDgsXG4gICAgICAgICAgaXNQYXJ0aWFsID0gYml0bWFzayAmIDE2LFxuICAgICAgICAgIGlzUGFydGlhbFJpZ2h0ID0gYml0bWFzayAmIDMyO1xuXG4gICAgICBpZiAoIWlzQmluZEtleSAmJiAhaXNGdW5jdGlvbihmdW5jKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xuICAgICAgfVxuICAgICAgaWYgKGlzUGFydGlhbCAmJiAhcGFydGlhbEFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGJpdG1hc2sgJj0gfjE2O1xuICAgICAgICBpc1BhcnRpYWwgPSBwYXJ0aWFsQXJncyA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGlzUGFydGlhbFJpZ2h0ICYmICFwYXJ0aWFsUmlnaHRBcmdzLmxlbmd0aCkge1xuICAgICAgICBiaXRtYXNrICY9IH4zMjtcbiAgICAgICAgaXNQYXJ0aWFsUmlnaHQgPSBwYXJ0aWFsUmlnaHRBcmdzID0gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgYmluZERhdGEgPSBmdW5jICYmIGZ1bmMuX19iaW5kRGF0YV9fO1xuICAgICAgaWYgKGJpbmREYXRhICYmIGJpbmREYXRhICE9PSB0cnVlKSB7XG4gICAgICAgIC8vIGNsb25lIGBiaW5kRGF0YWBcbiAgICAgICAgYmluZERhdGEgPSBzbGljZShiaW5kRGF0YSk7XG4gICAgICAgIGlmIChiaW5kRGF0YVsyXSkge1xuICAgICAgICAgIGJpbmREYXRhWzJdID0gc2xpY2UoYmluZERhdGFbMl0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiaW5kRGF0YVszXSkge1xuICAgICAgICAgIGJpbmREYXRhWzNdID0gc2xpY2UoYmluZERhdGFbM10pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNldCBgdGhpc0JpbmRpbmdgIGlzIG5vdCBwcmV2aW91c2x5IGJvdW5kXG4gICAgICAgIGlmIChpc0JpbmQgJiYgIShiaW5kRGF0YVsxXSAmIDEpKSB7XG4gICAgICAgICAgYmluZERhdGFbNF0gPSB0aGlzQXJnO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNldCBpZiBwcmV2aW91c2x5IGJvdW5kIGJ1dCBub3QgY3VycmVudGx5IChzdWJzZXF1ZW50IGN1cnJpZWQgZnVuY3Rpb25zKVxuICAgICAgICBpZiAoIWlzQmluZCAmJiBiaW5kRGF0YVsxXSAmIDEpIHtcbiAgICAgICAgICBiaXRtYXNrIHw9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IGN1cnJpZWQgYXJpdHkgaWYgbm90IHlldCBzZXRcbiAgICAgICAgaWYgKGlzQ3VycnkgJiYgIShiaW5kRGF0YVsxXSAmIDQpKSB7XG4gICAgICAgICAgYmluZERhdGFbNV0gPSBhcml0eTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhcHBlbmQgcGFydGlhbCBsZWZ0IGFyZ3VtZW50c1xuICAgICAgICBpZiAoaXNQYXJ0aWFsKSB7XG4gICAgICAgICAgcHVzaC5hcHBseShiaW5kRGF0YVsyXSB8fCAoYmluZERhdGFbMl0gPSBbXSksIHBhcnRpYWxBcmdzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhcHBlbmQgcGFydGlhbCByaWdodCBhcmd1bWVudHNcbiAgICAgICAgaWYgKGlzUGFydGlhbFJpZ2h0KSB7XG4gICAgICAgICAgdW5zaGlmdC5hcHBseShiaW5kRGF0YVszXSB8fCAoYmluZERhdGFbM10gPSBbXSksIHBhcnRpYWxSaWdodEFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIC8vIG1lcmdlIGZsYWdzXG4gICAgICAgIGJpbmREYXRhWzFdIHw9IGJpdG1hc2s7XG4gICAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyLmFwcGx5KG51bGwsIGJpbmREYXRhKTtcbiAgICAgIH1cbiAgICAgIC8vIGZhc3QgcGF0aCBmb3IgYF8uYmluZGBcbiAgICAgIHZhciBjcmVhdGVyID0gKGJpdG1hc2sgPT0gMSB8fCBiaXRtYXNrID09PSAxNykgPyBiYXNlQmluZCA6IGJhc2VDcmVhdGVXcmFwcGVyO1xuICAgICAgcmV0dXJuIGNyZWF0ZXIoW2Z1bmMsIGJpdG1hc2ssIHBhcnRpYWxBcmdzLCBwYXJ0aWFsUmlnaHRBcmdzLCB0aGlzQXJnLCBhcml0eV0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZWQgYnkgYGVzY2FwZWAgdG8gY29udmVydCBjaGFyYWN0ZXJzIHRvIEhUTUwgZW50aXRpZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtYXRjaCBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gZXNjYXBlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgY2hhcmFjdGVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVzY2FwZUh0bWxDaGFyKG1hdGNoKSB7XG4gICAgICByZXR1cm4gaHRtbEVzY2FwZXNbbWF0Y2hdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGFwcHJvcHJpYXRlIFwiaW5kZXhPZlwiIGZ1bmN0aW9uLiBJZiB0aGUgYF8uaW5kZXhPZmAgbWV0aG9kIGlzXG4gICAgICogY3VzdG9taXplZCwgdGhpcyBtZXRob2QgcmV0dXJucyB0aGUgY3VzdG9tIG1ldGhvZCwgb3RoZXJ3aXNlIGl0IHJldHVybnNcbiAgICAgKiB0aGUgYGJhc2VJbmRleE9mYCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBcImluZGV4T2ZcIiBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRJbmRleE9mKCkge1xuICAgICAgdmFyIHJlc3VsdCA9IChyZXN1bHQgPSBsb2Rhc2guaW5kZXhPZikgPT09IGluZGV4T2YgPyBiYXNlSW5kZXhPZiA6IHJlc3VsdDtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTmF0aXZlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicgJiYgcmVOYXRpdmUudGVzdCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBgdGhpc2AgYmluZGluZyBkYXRhIG9uIGEgZ2l2ZW4gZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHNldCBkYXRhIG9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHZhbHVlIFRoZSBkYXRhIGFycmF5IHRvIHNldC5cbiAgICAgKi9cbiAgICB2YXIgc2V0QmluZERhdGEgPSAhZGVmaW5lUHJvcGVydHkgPyBub29wIDogZnVuY3Rpb24oZnVuYywgdmFsdWUpIHtcbiAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSB2YWx1ZTtcbiAgICAgIGRlZmluZVByb3BlcnR5KGZ1bmMsICdfX2JpbmREYXRhX18nLCBkZXNjcmlwdG9yKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQSBmYWxsYmFjayBpbXBsZW1lbnRhdGlvbiBvZiBgaXNQbGFpbk9iamVjdGAgd2hpY2ggY2hlY2tzIGlmIGEgZ2l2ZW4gdmFsdWVcbiAgICAgKiBpcyBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGUgYE9iamVjdGAgY29uc3RydWN0b3IsIGFzc3VtaW5nIG9iamVjdHMgY3JlYXRlZFxuICAgICAqIGJ5IHRoZSBgT2JqZWN0YCBjb25zdHJ1Y3RvciBoYXZlIG5vIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMgYW5kIHRoYXRcbiAgICAgKiB0aGVyZSBhcmUgbm8gYE9iamVjdC5wcm90b3R5cGVgIGV4dGVuc2lvbnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2hpbUlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgICAgIHZhciBjdG9yLFxuICAgICAgICAgIHJlc3VsdDtcblxuICAgICAgLy8gYXZvaWQgbm9uIE9iamVjdCBvYmplY3RzLCBgYXJndW1lbnRzYCBvYmplY3RzLCBhbmQgRE9NIGVsZW1lbnRzXG4gICAgICBpZiAoISh2YWx1ZSAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBvYmplY3RDbGFzcykgfHxcbiAgICAgICAgICAoY3RvciA9IHZhbHVlLmNvbnN0cnVjdG9yLCBpc0Z1bmN0aW9uKGN0b3IpICYmICEoY3RvciBpbnN0YW5jZW9mIGN0b3IpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBJbiBtb3N0IGVudmlyb25tZW50cyBhbiBvYmplY3QncyBvd24gcHJvcGVydGllcyBhcmUgaXRlcmF0ZWQgYmVmb3JlXG4gICAgICAvLyBpdHMgaW5oZXJpdGVkIHByb3BlcnRpZXMuIElmIHRoZSBsYXN0IGl0ZXJhdGVkIHByb3BlcnR5IGlzIGFuIG9iamVjdCdzXG4gICAgICAvLyBvd24gcHJvcGVydHkgdGhlbiB0aGVyZSBhcmUgbm8gaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAgICAgIGZvckluKHZhbHVlLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIHJlc3VsdCA9IGtleTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHR5cGVvZiByZXN1bHQgPT0gJ3VuZGVmaW5lZCcgfHwgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgcmVzdWx0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2VkIGJ5IGB1bmVzY2FwZWAgdG8gY29udmVydCBIVE1MIGVudGl0aWVzIHRvIGNoYXJhY3RlcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtYXRjaCBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gdW5lc2NhcGUuXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdW5lc2NhcGVkIGNoYXJhY3Rlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bmVzY2FwZUh0bWxDaGFyKG1hdGNoKSB7XG4gICAgICByZXR1cm4gaHRtbFVuZXNjYXBlc1ttYXRjaF07XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhbiBgYXJndW1lbnRzYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhbiBgYXJndW1lbnRzYCBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogKGZ1bmN0aW9uKCkgeyByZXR1cm4gXy5pc0FyZ3VtZW50cyhhcmd1bWVudHMpOyB9KSgxLCAyLCAzKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUubGVuZ3RoID09ICdudW1iZXInICYmXG4gICAgICAgIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFyZ3NDbGFzcyB8fCBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIEZ1bmN0aW9uXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYW4gYXJyYXksIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogKGZ1bmN0aW9uKCkgeyByZXR1cm4gXy5pc0FycmF5KGFyZ3VtZW50cyk7IH0pKCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNBcnJheShbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgaXNBcnJheSA9IG5hdGl2ZUlzQXJyYXkgfHwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLmxlbmd0aCA9PSAnbnVtYmVyJyAmJlxuICAgICAgICB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcnJheUNsYXNzIHx8IGZhbHNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBIGZhbGxiYWNrIGltcGxlbWVudGF0aW9uIG9mIGBPYmplY3Qua2V5c2Agd2hpY2ggcHJvZHVjZXMgYW4gYXJyYXkgb2YgdGhlXG4gICAgICogZ2l2ZW4gb2JqZWN0J3Mgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqL1xuICAgIHZhciBzaGltS2V5cyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgdmFyIGluZGV4LCBpdGVyYWJsZSA9IG9iamVjdCwgcmVzdWx0ID0gW107XG4gICAgICBpZiAoIWl0ZXJhYmxlKSByZXR1cm4gcmVzdWx0O1xuICAgICAgaWYgKCEob2JqZWN0VHlwZXNbdHlwZW9mIG9iamVjdF0pKSByZXR1cm4gcmVzdWx0O1xuICAgICAgICBmb3IgKGluZGV4IGluIGl0ZXJhYmxlKSB7XG4gICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoaXRlcmFibGUsIGluZGV4KSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goaW5kZXgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IGNvbXBvc2VkIG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBhbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5rZXlzKHsgJ29uZSc6IDEsICd0d28nOiAyLCAndGhyZWUnOiAzIH0pO1xuICAgICAqIC8vID0+IFsnb25lJywgJ3R3bycsICd0aHJlZSddIChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxuICAgICAqL1xuICAgIHZhciBrZXlzID0gIW5hdGl2ZUtleXMgPyBzaGltS2V5cyA6IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYXRpdmVLZXlzKG9iamVjdCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gY29udmVydCBjaGFyYWN0ZXJzIHRvIEhUTUwgZW50aXRpZXM6XG4gICAgICpcbiAgICAgKiBUaG91Z2ggdGhlIGA+YCBjaGFyYWN0ZXIgaXMgZXNjYXBlZCBmb3Igc3ltbWV0cnksIGNoYXJhY3RlcnMgbGlrZSBgPmAgYW5kIGAvYFxuICAgICAqIGRvbid0IHJlcXVpcmUgZXNjYXBpbmcgaW4gSFRNTCBhbmQgaGF2ZSBubyBzcGVjaWFsIG1lYW5pbmcgdW5sZXNzIHRoZXkncmUgcGFydFxuICAgICAqIG9mIGEgdGFnIG9yIGFuIHVucXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgKiBodHRwOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9hbWJpZ3VvdXMtYW1wZXJzYW5kcyAodW5kZXIgXCJzZW1pLXJlbGF0ZWQgZnVuIGZhY3RcIilcbiAgICAgKi9cbiAgICB2YXIgaHRtbEVzY2FwZXMgPSB7XG4gICAgICAnJic6ICcmYW1wOycsXG4gICAgICAnPCc6ICcmbHQ7JyxcbiAgICAgICc+JzogJyZndDsnLFxuICAgICAgJ1wiJzogJyZxdW90OycsXG4gICAgICBcIidcIjogJyYjMzk7J1xuICAgIH07XG5cbiAgICAvKiogVXNlZCB0byBjb252ZXJ0IEhUTUwgZW50aXRpZXMgdG8gY2hhcmFjdGVycyAqL1xuICAgIHZhciBodG1sVW5lc2NhcGVzID0gaW52ZXJ0KGh0bWxFc2NhcGVzKTtcblxuICAgIC8qKiBVc2VkIHRvIG1hdGNoIEhUTUwgZW50aXRpZXMgYW5kIEhUTUwgY2hhcmFjdGVycyAqL1xuICAgIHZhciByZUVzY2FwZWRIdG1sID0gUmVnRXhwKCcoJyArIGtleXMoaHRtbFVuZXNjYXBlcykuam9pbignfCcpICsgJyknLCAnZycpLFxuICAgICAgICByZVVuZXNjYXBlZEh0bWwgPSBSZWdFeHAoJ1snICsga2V5cyhodG1sRXNjYXBlcykuam9pbignJykgKyAnXScsICdnJyk7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIEFzc2lnbnMgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBzb3VyY2Ugb2JqZWN0KHMpIHRvIHRoZSBkZXN0aW5hdGlvblxuICAgICAqIG9iamVjdC4gU3Vic2VxdWVudCBzb3VyY2VzIHdpbGwgb3ZlcndyaXRlIHByb3BlcnR5IGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzXG4gICAgICogc291cmNlcy4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkIHRvIHByb2R1Y2UgdGhlXG4gICAgICogYXNzaWduZWQgdmFsdWVzLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdHdvXG4gICAgICogYXJndW1lbnRzOyAob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIEZ1bmN0aW9uXG4gICAgICogQGFsaWFzIGV4dGVuZFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlXSBUaGUgc291cmNlIG9iamVjdHMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGFzc2lnbmluZyB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmFzc2lnbih7ICduYW1lJzogJ2ZyZWQnIH0sIHsgJ2VtcGxveWVyJzogJ3NsYXRlJyB9KTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnLCAnZW1wbG95ZXInOiAnc2xhdGUnIH1cbiAgICAgKlxuICAgICAqIHZhciBkZWZhdWx0cyA9IF8ucGFydGlhbFJpZ2h0KF8uYXNzaWduLCBmdW5jdGlvbihhLCBiKSB7XG4gICAgICogICByZXR1cm4gdHlwZW9mIGEgPT0gJ3VuZGVmaW5lZCcgPyBiIDogYTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICduYW1lJzogJ2Jhcm5leScgfTtcbiAgICAgKiBkZWZhdWx0cyhvYmplY3QsIHsgJ25hbWUnOiAnZnJlZCcsICdlbXBsb3llcic6ICdzbGF0ZScgfSk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdiYXJuZXknLCAnZW1wbG95ZXInOiAnc2xhdGUnIH1cbiAgICAgKi9cbiAgICB2YXIgYXNzaWduID0gZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2UsIGd1YXJkKSB7XG4gICAgICB2YXIgaW5kZXgsIGl0ZXJhYmxlID0gb2JqZWN0LCByZXN1bHQgPSBpdGVyYWJsZTtcbiAgICAgIGlmICghaXRlcmFibGUpIHJldHVybiByZXN1bHQ7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICBhcmdzSW5kZXggPSAwLFxuICAgICAgICAgIGFyZ3NMZW5ndGggPSB0eXBlb2YgZ3VhcmQgPT0gJ251bWJlcicgPyAyIDogYXJncy5sZW5ndGg7XG4gICAgICBpZiAoYXJnc0xlbmd0aCA+IDMgJiYgdHlwZW9mIGFyZ3NbYXJnc0xlbmd0aCAtIDJdID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gYmFzZUNyZWF0ZUNhbGxiYWNrKGFyZ3NbLS1hcmdzTGVuZ3RoIC0gMV0sIGFyZ3NbYXJnc0xlbmd0aC0tXSwgMik7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3NMZW5ndGggPiAyICYmIHR5cGVvZiBhcmdzW2FyZ3NMZW5ndGggLSAxXSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNhbGxiYWNrID0gYXJnc1stLWFyZ3NMZW5ndGhdO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsrYXJnc0luZGV4IDwgYXJnc0xlbmd0aCkge1xuICAgICAgICBpdGVyYWJsZSA9IGFyZ3NbYXJnc0luZGV4XTtcbiAgICAgICAgaWYgKGl0ZXJhYmxlICYmIG9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0pIHtcbiAgICAgICAgdmFyIG93bkluZGV4ID0gLTEsXG4gICAgICAgICAgICBvd25Qcm9wcyA9IG9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0gJiYga2V5cyhpdGVyYWJsZSksXG4gICAgICAgICAgICBsZW5ndGggPSBvd25Qcm9wcyA/IG93blByb3BzLmxlbmd0aCA6IDA7XG5cbiAgICAgICAgd2hpbGUgKCsrb3duSW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICBpbmRleCA9IG93blByb3BzW293bkluZGV4XTtcbiAgICAgICAgICByZXN1bHRbaW5kZXhdID0gY2FsbGJhY2sgPyBjYWxsYmFjayhyZXN1bHRbaW5kZXhdLCBpdGVyYWJsZVtpbmRleF0pIDogaXRlcmFibGVbaW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNsb25lIG9mIGB2YWx1ZWAuIElmIGBpc0RlZXBgIGlzIGB0cnVlYCBuZXN0ZWQgb2JqZWN0cyB3aWxsIGFsc29cbiAgICAgKiBiZSBjbG9uZWQsIG90aGVyd2lzZSB0aGV5IHdpbGwgYmUgYXNzaWduZWQgYnkgcmVmZXJlbmNlLiBJZiBhIGNhbGxiYWNrXG4gICAgICogaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZCB0byBwcm9kdWNlIHRoZSBjbG9uZWQgdmFsdWVzLiBJZiB0aGVcbiAgICAgKiBjYWxsYmFjayByZXR1cm5zIGB1bmRlZmluZWRgIGNsb25pbmcgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC5cbiAgICAgKiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OyAodmFsdWUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0RlZXA9ZmFsc2VdIFNwZWNpZnkgYSBkZWVwIGNsb25lLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjbG9uaW5nIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgY2xvbmVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIHZhciBzaGFsbG93ID0gXy5jbG9uZShjaGFyYWN0ZXJzKTtcbiAgICAgKiBzaGFsbG93WzBdID09PSBjaGFyYWN0ZXJzWzBdO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIHZhciBkZWVwID0gXy5jbG9uZShjaGFyYWN0ZXJzLCB0cnVlKTtcbiAgICAgKiBkZWVwWzBdID09PSBjaGFyYWN0ZXJzWzBdO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLm1peGluKHtcbiAgICAgKiAgICdjbG9uZSc6IF8ucGFydGlhbFJpZ2h0KF8uY2xvbmUsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICogICAgIHJldHVybiBfLmlzRWxlbWVudCh2YWx1ZSkgPyB2YWx1ZS5jbG9uZU5vZGUoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAqICAgfSlcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIHZhciBjbG9uZSA9IF8uY2xvbmUoZG9jdW1lbnQuYm9keSk7XG4gICAgICogY2xvbmUuY2hpbGROb2Rlcy5sZW5ndGg7XG4gICAgICogLy8gPT4gMFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsb25lKHZhbHVlLCBpc0RlZXAsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICAvLyBhbGxvd3Mgd29ya2luZyB3aXRoIFwiQ29sbGVjdGlvbnNcIiBtZXRob2RzIHdpdGhvdXQgdXNpbmcgdGhlaXIgYGluZGV4YFxuICAgICAgLy8gYW5kIGBjb2xsZWN0aW9uYCBhcmd1bWVudHMgZm9yIGBpc0RlZXBgIGFuZCBgY2FsbGJhY2tgXG4gICAgICBpZiAodHlwZW9mIGlzRGVlcCAhPSAnYm9vbGVhbicgJiYgaXNEZWVwICE9IG51bGwpIHtcbiAgICAgICAgdGhpc0FyZyA9IGNhbGxiYWNrO1xuICAgICAgICBjYWxsYmFjayA9IGlzRGVlcDtcbiAgICAgICAgaXNEZWVwID0gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZUNsb25lKHZhbHVlLCBpc0RlZXAsIHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nICYmIGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkZWVwIGNsb25lIG9mIGB2YWx1ZWAuIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZVxuICAgICAqIGV4ZWN1dGVkIHRvIHByb2R1Y2UgdGhlIGNsb25lZCB2YWx1ZXMuIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGB1bmRlZmluZWRgXG4gICAgICogY2xvbmluZyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIG1ldGhvZCBpbnN0ZWFkLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG9cbiAgICAgKiBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCBvbmUgYXJndW1lbnQ7ICh2YWx1ZSkuXG4gICAgICpcbiAgICAgKiBOb3RlOiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uIHRoZSBzdHJ1Y3R1cmVkIGNsb25lIGFsZ29yaXRobS4gRnVuY3Rpb25zXG4gICAgICogYW5kIERPTSBub2RlcyBhcmUgKipub3QqKiBjbG9uZWQuIFRoZSBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYGFyZ3VtZW50c2Agb2JqZWN0cyBhbmRcbiAgICAgKiBvYmplY3RzIGNyZWF0ZWQgYnkgY29uc3RydWN0b3JzIG90aGVyIHRoYW4gYE9iamVjdGAgYXJlIGNsb25lZCB0byBwbGFpbiBgT2JqZWN0YCBvYmplY3RzLlxuICAgICAqIFNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9pbmZyYXN0cnVjdHVyZS5odG1sI2ludGVybmFsLXN0cnVjdHVyZWQtY2xvbmluZy1hbGdvcml0aG0uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGRlZXAgY2xvbmUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNsb25pbmcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBkZWVwIGNsb25lZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiB2YXIgZGVlcCA9IF8uY2xvbmVEZWVwKGNoYXJhY3RlcnMpO1xuICAgICAqIGRlZXBbMF0gPT09IGNoYXJhY3RlcnNbMF07XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIHZhciB2aWV3ID0ge1xuICAgICAqICAgJ2xhYmVsJzogJ2RvY3MnLFxuICAgICAqICAgJ25vZGUnOiBlbGVtZW50XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBjbG9uZSA9IF8uY2xvbmVEZWVwKHZpZXcsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICogICByZXR1cm4gXy5pc0VsZW1lbnQodmFsdWUpID8gdmFsdWUuY2xvbmVOb2RlKHRydWUpIDogdW5kZWZpbmVkO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogY2xvbmUubm9kZSA9PSB2aWV3Lm5vZGU7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjbG9uZURlZXAodmFsdWUsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gYmFzZUNsb25lKHZhbHVlLCB0cnVlLCB0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJyAmJiBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDEpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gdGhlIGdpdmVuIGBwcm90b3R5cGVgIG9iamVjdC4gSWYgYVxuICAgICAqIGBwcm9wZXJ0aWVzYCBvYmplY3QgaXMgcHJvdmlkZWQgaXRzIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgYXJlIGFzc2lnbmVkXG4gICAgICogdG8gdGhlIGNyZWF0ZWQgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvdG90eXBlIFRoZSBvYmplY3QgdG8gaW5oZXJpdCBmcm9tLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvcGVydGllc10gVGhlIHByb3BlcnRpZXMgdG8gYXNzaWduIHRvIHRoZSBvYmplY3QuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogZnVuY3Rpb24gU2hhcGUoKSB7XG4gICAgICogICB0aGlzLnggPSAwO1xuICAgICAqICAgdGhpcy55ID0gMDtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBDaXJjbGUoKSB7XG4gICAgICogICBTaGFwZS5jYWxsKHRoaXMpO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIENpcmNsZS5wcm90b3R5cGUgPSBfLmNyZWF0ZShTaGFwZS5wcm90b3R5cGUsIHsgJ2NvbnN0cnVjdG9yJzogQ2lyY2xlIH0pO1xuICAgICAqXG4gICAgICogdmFyIGNpcmNsZSA9IG5ldyBDaXJjbGU7XG4gICAgICogY2lyY2xlIGluc3RhbmNlb2YgQ2lyY2xlO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIGNpcmNsZSBpbnN0YW5jZW9mIFNoYXBlO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjcmVhdGUocHJvdG90eXBlLCBwcm9wZXJ0aWVzKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gYmFzZUNyZWF0ZShwcm90b3R5cGUpO1xuICAgICAgcmV0dXJuIHByb3BlcnRpZXMgPyBhc3NpZ24ocmVzdWx0LCBwcm9wZXJ0aWVzKSA6IHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBc3NpZ25zIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2Ygc291cmNlIG9iamVjdChzKSB0byB0aGUgZGVzdGluYXRpb25cbiAgICAgKiBvYmplY3QgZm9yIGFsbCBkZXN0aW5hdGlvbiBwcm9wZXJ0aWVzIHRoYXQgcmVzb2x2ZSB0byBgdW5kZWZpbmVkYC4gT25jZSBhXG4gICAgICogcHJvcGVydHkgaXMgc2V0LCBhZGRpdGlvbmFsIGRlZmF1bHRzIG9mIHRoZSBzYW1lIHByb3BlcnR5IHdpbGwgYmUgaWdub3JlZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIEZ1bmN0aW9uXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0tIHtPYmplY3R9IFtndWFyZF0gQWxsb3dzIHdvcmtpbmcgd2l0aCBgXy5yZWR1Y2VgIHdpdGhvdXQgdXNpbmcgaXRzXG4gICAgICogIGBrZXlgIGFuZCBgb2JqZWN0YCBhcmd1bWVudHMgYXMgc291cmNlcy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICduYW1lJzogJ2Jhcm5leScgfTtcbiAgICAgKiBfLmRlZmF1bHRzKG9iamVjdCwgeyAnbmFtZSc6ICdmcmVkJywgJ2VtcGxveWVyJzogJ3NsYXRlJyB9KTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2Jhcm5leScsICdlbXBsb3llcic6ICdzbGF0ZScgfVxuICAgICAqL1xuICAgIHZhciBkZWZhdWx0cyA9IGZ1bmN0aW9uKG9iamVjdCwgc291cmNlLCBndWFyZCkge1xuICAgICAgdmFyIGluZGV4LCBpdGVyYWJsZSA9IG9iamVjdCwgcmVzdWx0ID0gaXRlcmFibGU7XG4gICAgICBpZiAoIWl0ZXJhYmxlKSByZXR1cm4gcmVzdWx0O1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgYXJnc0luZGV4ID0gMCxcbiAgICAgICAgICBhcmdzTGVuZ3RoID0gdHlwZW9mIGd1YXJkID09ICdudW1iZXInID8gMiA6IGFyZ3MubGVuZ3RoO1xuICAgICAgd2hpbGUgKCsrYXJnc0luZGV4IDwgYXJnc0xlbmd0aCkge1xuICAgICAgICBpdGVyYWJsZSA9IGFyZ3NbYXJnc0luZGV4XTtcbiAgICAgICAgaWYgKGl0ZXJhYmxlICYmIG9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0pIHtcbiAgICAgICAgdmFyIG93bkluZGV4ID0gLTEsXG4gICAgICAgICAgICBvd25Qcm9wcyA9IG9iamVjdFR5cGVzW3R5cGVvZiBpdGVyYWJsZV0gJiYga2V5cyhpdGVyYWJsZSksXG4gICAgICAgICAgICBsZW5ndGggPSBvd25Qcm9wcyA/IG93blByb3BzLmxlbmd0aCA6IDA7XG5cbiAgICAgICAgd2hpbGUgKCsrb3duSW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICBpbmRleCA9IG93blByb3BzW293bkluZGV4XTtcbiAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdFtpbmRleF0gPT0gJ3VuZGVmaW5lZCcpIHJlc3VsdFtpbmRleF0gPSBpdGVyYWJsZVtpbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRJbmRleGAgZXhjZXB0IHRoYXQgaXQgcmV0dXJucyB0aGUga2V5IG9mIHRoZVxuICAgICAqIGZpcnN0IGVsZW1lbnQgdGhhdCBwYXNzZXMgdGhlIGNhbGxiYWNrIGNoZWNrLCBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50IGl0c2VsZi5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlclxuICAgICAqICBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkIHRvXG4gICAgICogIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge3N0cmluZ3x1bmRlZmluZWR9IFJldHVybnMgdGhlIGtleSBvZiB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgdW5kZWZpbmVkYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSB7XG4gICAgICogICAnYmFybmV5JzogeyAgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH0sXG4gICAgICogICAnZnJlZCc6IHsgICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfSxcbiAgICAgKiAgICdwZWJibGVzJzogeyAnYWdlJzogMSwgICdibG9ja2VkJzogZmFsc2UgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLmZpbmRLZXkoY2hhcmFjdGVycywgZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICByZXR1cm4gY2hyLmFnZSA8IDQwO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+ICdiYXJuZXknIChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kS2V5KGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDEgfSk7XG4gICAgICogLy8gPT4gJ3BlYmJsZXMnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRLZXkoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKTtcbiAgICAgKiAvLyA9PiAnZnJlZCdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaW5kS2V5KG9iamVjdCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciByZXN1bHQ7XG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICBmb3JPd24ob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmplY3QpIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBrZXksIG9iamVjdCkpIHtcbiAgICAgICAgICByZXN1bHQgPSBrZXk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kS2V5YCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXG4gICAgICogb2YgYSBgY29sbGVjdGlvbmAgaW4gdGhlIG9wcG9zaXRlIG9yZGVyLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyXG4gICAgICogIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWQgdG9cbiAgICAgKiAgY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfHVuZGVmaW5lZH0gUmV0dXJucyB0aGUga2V5IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IHtcbiAgICAgKiAgICdiYXJuZXknOiB7ICAnYWdlJzogMzYsICdibG9ja2VkJzogdHJ1ZSB9LFxuICAgICAqICAgJ2ZyZWQnOiB7ICAgICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxuICAgICAqICAgJ3BlYmJsZXMnOiB7ICdhZ2UnOiAxLCAgJ2Jsb2NrZWQnOiB0cnVlIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5maW5kTGFzdEtleShjaGFyYWN0ZXJzLCBmdW5jdGlvbihjaHIpIHtcbiAgICAgKiAgIHJldHVybiBjaHIuYWdlIDwgNDA7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gcmV0dXJucyBgcGViYmxlc2AsIGFzc3VtaW5nIGBfLmZpbmRLZXlgIHJldHVybnMgYGJhcm5leWBcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZExhc3RLZXkoY2hhcmFjdGVycywgeyAnYWdlJzogNDAgfSk7XG4gICAgICogLy8gPT4gJ2ZyZWQnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRMYXN0S2V5KGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XG4gICAgICogLy8gPT4gJ3BlYmJsZXMnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmluZExhc3RLZXkob2JqZWN0LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIGZvck93blJpZ2h0KG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqZWN0KSB7XG4gICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwga2V5LCBvYmplY3QpKSB7XG4gICAgICAgICAgcmVzdWx0ID0ga2V5O1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgb3duIGFuZCBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIGFuIG9iamVjdCxcbiAgICAgKiBleGVjdXRpbmcgdGhlIGNhbGxiYWNrIGZvciBlYWNoIHByb3BlcnR5LiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgXG4gICAgICogYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwga2V5LCBvYmplY3QpLiBDYWxsYmFja3MgbWF5IGV4aXRcbiAgICAgKiBpdGVyYXRpb24gZWFybHkgYnkgZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIEZ1bmN0aW9uXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIFNoYXBlKCkge1xuICAgICAqICAgdGhpcy54ID0gMDtcbiAgICAgKiAgIHRoaXMueSA9IDA7XG4gICAgICogfVxuICAgICAqXG4gICAgICogU2hhcGUucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgICogICB0aGlzLnggKz0geDtcbiAgICAgKiAgIHRoaXMueSArPSB5O1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLmZvckluKG5ldyBTaGFwZSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBsb2dzICd4JywgJ3knLCBhbmQgJ21vdmUnIChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxuICAgICAqL1xuICAgIHZhciBmb3JJbiA9IGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgaW5kZXgsIGl0ZXJhYmxlID0gY29sbGVjdGlvbiwgcmVzdWx0ID0gaXRlcmFibGU7XG4gICAgICBpZiAoIWl0ZXJhYmxlKSByZXR1cm4gcmVzdWx0O1xuICAgICAgaWYgKCFvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdKSByZXR1cm4gcmVzdWx0O1xuICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayAmJiB0eXBlb2YgdGhpc0FyZyA9PSAndW5kZWZpbmVkJyA/IGNhbGxiYWNrIDogYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgZm9yIChpbmRleCBpbiBpdGVyYWJsZSkge1xuICAgICAgICAgIGlmIChjYWxsYmFjayhpdGVyYWJsZVtpbmRleF0sIGluZGV4LCBjb2xsZWN0aW9uKSA9PT0gZmFsc2UpIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5mb3JJbmAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xuICAgICAqIG9mIGEgYGNvbGxlY3Rpb25gIGluIHRoZSBvcHBvc2l0ZSBvcmRlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBTaGFwZSgpIHtcbiAgICAgKiAgIHRoaXMueCA9IDA7XG4gICAgICogICB0aGlzLnkgPSAwO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIFNoYXBlLnByb3RvdHlwZS5tb3ZlID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAqICAgdGhpcy54ICs9IHg7XG4gICAgICogICB0aGlzLnkgKz0geTtcbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5mb3JJblJpZ2h0KG5ldyBTaGFwZSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAqICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBsb2dzICdtb3ZlJywgJ3knLCBhbmQgJ3gnIGFzc3VtaW5nIGBfLmZvckluIGAgbG9ncyAneCcsICd5JywgYW5kICdtb3ZlJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZvckluUmlnaHQob2JqZWN0LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIHBhaXJzID0gW107XG5cbiAgICAgIGZvckluKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICBwYWlycy5wdXNoKGtleSwgdmFsdWUpO1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBsZW5ndGggPSBwYWlycy5sZW5ndGg7XG4gICAgICBjYWxsYmFjayA9IGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKHBhaXJzW2xlbmd0aC0tXSwgcGFpcnNbbGVuZ3RoXSwgb2JqZWN0KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgYW4gb2JqZWN0LCBleGVjdXRpbmcgdGhlIGNhbGxiYWNrXG4gICAgICogZm9yIGVhY2ggcHJvcGVydHkuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxuICAgICAqIGFyZ3VtZW50czsgKHZhbHVlLCBrZXksIG9iamVjdCkuIENhbGxiYWNrcyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnlcbiAgICAgKiBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5mb3JPd24oeyAnMCc6ICd6ZXJvJywgJzEnOiAnb25lJywgJ2xlbmd0aCc6IDIgfSwgZnVuY3Rpb24obnVtLCBrZXkpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGtleSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gbG9ncyAnMCcsICcxJywgYW5kICdsZW5ndGgnIChwcm9wZXJ0eSBvcmRlciBpcyBub3QgZ3VhcmFudGVlZCBhY3Jvc3MgZW52aXJvbm1lbnRzKVxuICAgICAqL1xuICAgIHZhciBmb3JPd24gPSBmdW5jdGlvbihjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIGluZGV4LCBpdGVyYWJsZSA9IGNvbGxlY3Rpb24sIHJlc3VsdCA9IGl0ZXJhYmxlO1xuICAgICAgaWYgKCFpdGVyYWJsZSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgIGlmICghb2JqZWN0VHlwZXNbdHlwZW9mIGl0ZXJhYmxlXSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgJiYgdHlwZW9mIHRoaXNBcmcgPT0gJ3VuZGVmaW5lZCcgPyBjYWxsYmFjayA6IGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICAgIHZhciBvd25JbmRleCA9IC0xLFxuICAgICAgICAgICAgb3duUHJvcHMgPSBvYmplY3RUeXBlc1t0eXBlb2YgaXRlcmFibGVdICYmIGtleXMoaXRlcmFibGUpLFxuICAgICAgICAgICAgbGVuZ3RoID0gb3duUHJvcHMgPyBvd25Qcm9wcy5sZW5ndGggOiAwO1xuXG4gICAgICAgIHdoaWxlICgrK293bkluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgaW5kZXggPSBvd25Qcm9wc1tvd25JbmRleF07XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKGl0ZXJhYmxlW2luZGV4XSwgaW5kZXgsIGNvbGxlY3Rpb24pID09PSBmYWxzZSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZvck93bmAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xuICAgICAqIG9mIGEgYGNvbGxlY3Rpb25gIGluIHRoZSBvcHBvc2l0ZSBvcmRlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZvck93blJpZ2h0KHsgJzAnOiAnemVybycsICcxJzogJ29uZScsICdsZW5ndGgnOiAyIH0sIGZ1bmN0aW9uKG51bSwga2V5KSB7XG4gICAgICogICBjb25zb2xlLmxvZyhrZXkpO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IGxvZ3MgJ2xlbmd0aCcsICcxJywgYW5kICcwJyBhc3N1bWluZyBgXy5mb3JPd25gIGxvZ3MgJzAnLCAnMScsIGFuZCAnbGVuZ3RoJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZvck93blJpZ2h0KG9iamVjdCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBwcm9wcyA9IGtleXMob2JqZWN0KSxcbiAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cbiAgICAgIGNhbGxiYWNrID0gYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbbGVuZ3RoXTtcbiAgICAgICAgaWYgKGNhbGxiYWNrKG9iamVjdFtrZXldLCBrZXksIG9iamVjdCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNvcnRlZCBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcyBvZiBhbGwgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLFxuICAgICAqIG93biBhbmQgaW5oZXJpdGVkLCBvZiBgb2JqZWN0YCB0aGF0IGhhdmUgZnVuY3Rpb24gdmFsdWVzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIG1ldGhvZHNcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcyB0aGF0IGhhdmUgZnVuY3Rpb24gdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZ1bmN0aW9ucyhfKTtcbiAgICAgKiAvLyA9PiBbJ2FsbCcsICdhbnknLCAnYmluZCcsICdiaW5kQWxsJywgJ2Nsb25lJywgJ2NvbXBhY3QnLCAnY29tcG9zZScsIC4uLl1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmdW5jdGlvbnMob2JqZWN0KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICBmb3JJbihvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0LnNvcnQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSBuYW1lIGV4aXN0cyBhcyBhIGRpcmVjdCBwcm9wZXJ0eSBvZiBgb2JqZWN0YCxcbiAgICAgKiBpbnN0ZWFkIG9mIGFuIGluaGVyaXRlZCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGtleSBpcyBhIGRpcmVjdCBwcm9wZXJ0eSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmhhcyh7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDMgfSwgJ2InKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaGFzKG9iamVjdCwga2V5KSB7XG4gICAgICByZXR1cm4gb2JqZWN0ID8gaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgOiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiB0aGUgaW52ZXJ0ZWQga2V5cyBhbmQgdmFsdWVzIG9mIHRoZSBnaXZlbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnZlcnQuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3JlYXRlZCBpbnZlcnRlZCBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaW52ZXJ0KHsgJ2ZpcnN0JzogJ2ZyZWQnLCAnc2Vjb25kJzogJ2Jhcm5leScgfSk7XG4gICAgICogLy8gPT4geyAnZnJlZCc6ICdmaXJzdCcsICdiYXJuZXknOiAnc2Vjb25kJyB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gaW52ZXJ0KG9iamVjdCkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgcHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICAgIHJlc3VsdCA9IHt9O1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuICAgICAgICByZXN1bHRbb2JqZWN0W2tleV1dID0ga2V5O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGJvb2xlYW4gdmFsdWUuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhIGJvb2xlYW4gdmFsdWUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0Jvb2xlYW4obnVsbCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gZmFsc2UgfHxcbiAgICAgICAgdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IGJvb2xDbGFzcyB8fCBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGRhdGUuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhIGRhdGUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0RhdGUobmV3IERhdGUpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0RhdGUodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZGF0ZUNsYXNzIHx8IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgRE9NIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBhIERPTSBlbGVtZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNFbGVtZW50KGRvY3VtZW50LmJvZHkpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0VsZW1lbnQodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSAmJiB2YWx1ZS5ub2RlVHlwZSA9PT0gMSB8fCBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBlbXB0eS4gQXJyYXlzLCBzdHJpbmdzLCBvciBgYXJndW1lbnRzYCBvYmplY3RzIHdpdGggYVxuICAgICAqIGxlbmd0aCBvZiBgMGAgYW5kIG9iamVjdHMgd2l0aCBubyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGFyZSBjb25zaWRlcmVkXG4gICAgICogXCJlbXB0eVwiLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBlbXB0eSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmlzRW1wdHkoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0VtcHR5KHt9KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRW1wdHkoJycpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0VtcHR5KHZhbHVlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIHZhciBjbGFzc05hbWUgPSB0b1N0cmluZy5jYWxsKHZhbHVlKSxcbiAgICAgICAgICBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7XG5cbiAgICAgIGlmICgoY2xhc3NOYW1lID09IGFycmF5Q2xhc3MgfHwgY2xhc3NOYW1lID09IHN0cmluZ0NsYXNzIHx8IGNsYXNzTmFtZSA9PSBhcmdzQ2xhc3MgKSB8fFxuICAgICAgICAgIChjbGFzc05hbWUgPT0gb2JqZWN0Q2xhc3MgJiYgdHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyAmJiBpc0Z1bmN0aW9uKHZhbHVlLnNwbGljZSkpKSB7XG4gICAgICAgIHJldHVybiAhbGVuZ3RoO1xuICAgICAgfVxuICAgICAgZm9yT3duKHZhbHVlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIChyZXN1bHQgPSBmYWxzZSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBkZWVwIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZVxuICAgICAqIGVxdWl2YWxlbnQgdG8gZWFjaCBvdGhlci4gSWYgYSBjYWxsYmFjayBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIGV4ZWN1dGVkXG4gICAgICogdG8gY29tcGFyZSB2YWx1ZXMuIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGB1bmRlZmluZWRgIGNvbXBhcmlzb25zIHdpbGxcbiAgICAgKiBiZSBoYW5kbGVkIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmRcbiAgICAgKiBpbnZva2VkIHdpdGggdHdvIGFyZ3VtZW50czsgKGEsIGIpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IGEgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAgICogQHBhcmFtIHsqfSBiIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7ICduYW1lJzogJ2ZyZWQnIH07XG4gICAgICogdmFyIGNvcHkgPSB7ICduYW1lJzogJ2ZyZWQnIH07XG4gICAgICpcbiAgICAgKiBvYmplY3QgPT0gY29weTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5pc0VxdWFsKG9iamVjdCwgY29weSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogdmFyIHdvcmRzID0gWydoZWxsbycsICdnb29kYnllJ107XG4gICAgICogdmFyIG90aGVyV29yZHMgPSBbJ2hpJywgJ2dvb2RieWUnXTtcbiAgICAgKlxuICAgICAqIF8uaXNFcXVhbCh3b3Jkcywgb3RoZXJXb3JkcywgZnVuY3Rpb24oYSwgYikge1xuICAgICAqICAgdmFyIHJlR3JlZXQgPSAvXig/OmhlbGxvfGhpKSQvaSxcbiAgICAgKiAgICAgICBhR3JlZXQgPSBfLmlzU3RyaW5nKGEpICYmIHJlR3JlZXQudGVzdChhKSxcbiAgICAgKiAgICAgICBiR3JlZXQgPSBfLmlzU3RyaW5nKGIpICYmIHJlR3JlZXQudGVzdChiKTtcbiAgICAgKlxuICAgICAqICAgcmV0dXJuIChhR3JlZXQgfHwgYkdyZWV0KSA/IChhR3JlZXQgPT0gYkdyZWV0KSA6IHVuZGVmaW5lZDtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNFcXVhbChhLCBiLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIGJhc2VJc0VxdWFsKGEsIGIsIHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nICYmIGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzLCBvciBjYW4gYmUgY29lcmNlZCB0bywgYSBmaW5pdGUgbnVtYmVyLlxuICAgICAqXG4gICAgICogTm90ZTogVGhpcyBpcyBub3QgdGhlIHNhbWUgYXMgbmF0aXZlIGBpc0Zpbml0ZWAgd2hpY2ggd2lsbCByZXR1cm4gdHJ1ZSBmb3JcbiAgICAgKiBib29sZWFucyBhbmQgZW1wdHkgc3RyaW5ncy4gU2VlIGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMS4yLjUuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHZhbHVlYCBpcyBmaW5pdGUsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0Zpbml0ZSgtMTAxKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzRmluaXRlKCcxMCcpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNGaW5pdGUodHJ1ZSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNGaW5pdGUoJycpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzRmluaXRlKEluZmluaXR5KTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRmluaXRlKHZhbHVlKSB7XG4gICAgICByZXR1cm4gbmF0aXZlSXNGaW5pdGUodmFsdWUpICYmICFuYXRpdmVJc05hTihwYXJzZUZsb2F0KHZhbHVlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc0Z1bmN0aW9uKF8pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbic7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIGxhbmd1YWdlIHR5cGUgb2YgT2JqZWN0LlxuICAgICAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNPYmplY3Qoe30pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzT2JqZWN0KDEpO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgICAgIC8vIGNoZWNrIGlmIHRoZSB2YWx1ZSBpcyB0aGUgRUNNQVNjcmlwdCBsYW5ndWFnZSB0eXBlIG9mIE9iamVjdFxuICAgICAgLy8gaHR0cDovL2VzNS5naXRodWIuaW8vI3g4XG4gICAgICAvLyBhbmQgYXZvaWQgYSBWOCBidWdcbiAgICAgIC8vIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTFcbiAgICAgIHJldHVybiAhISh2YWx1ZSAmJiBvYmplY3RUeXBlc1t0eXBlb2YgdmFsdWVdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBgTmFOYC5cbiAgICAgKlxuICAgICAqIE5vdGU6IFRoaXMgaXMgbm90IHRoZSBzYW1lIGFzIG5hdGl2ZSBgaXNOYU5gIHdoaWNoIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3JcbiAgICAgKiBgdW5kZWZpbmVkYCBhbmQgb3RoZXIgbm9uLW51bWVyaWMgdmFsdWVzLiBTZWUgaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS4xLjIuNC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGBOYU5gLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNOYU4oTmFOKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTmFOKG5ldyBOdW1iZXIoTmFOKSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogaXNOYU4odW5kZWZpbmVkKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmlzTmFOKHVuZGVmaW5lZCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc05hTih2YWx1ZSkge1xuICAgICAgLy8gYE5hTmAgYXMgYSBwcmltaXRpdmUgaXMgdGhlIG9ubHkgdmFsdWUgdGhhdCBpcyBub3QgZXF1YWwgdG8gaXRzZWxmXG4gICAgICAvLyAocGVyZm9ybSB0aGUgW1tDbGFzc11dIGNoZWNrIGZpcnN0IHRvIGF2b2lkIGVycm9ycyB3aXRoIHNvbWUgaG9zdCBvYmplY3RzIGluIElFKVxuICAgICAgcmV0dXJuIGlzTnVtYmVyKHZhbHVlKSAmJiB2YWx1ZSAhPSArdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYG51bGxgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYG51bGxgLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNOdWxsKG51bGwpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uaXNOdWxsKHVuZGVmaW5lZCk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc051bGwodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIG51bWJlci5cbiAgICAgKlxuICAgICAqIE5vdGU6IGBOYU5gIGlzIGNvbnNpZGVyZWQgYSBudW1iZXIuIFNlZSBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDguNS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgbnVtYmVyLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNOdW1iZXIoOC40ICogNSk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8XG4gICAgICAgIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBudW1iZXJDbGFzcyB8fCBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGUgYE9iamVjdGAgY29uc3RydWN0b3IuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGZ1bmN0aW9uIFNoYXBlKCkge1xuICAgICAqICAgdGhpcy54ID0gMDtcbiAgICAgKiAgIHRoaXMueSA9IDA7XG4gICAgICogfVxuICAgICAqXG4gICAgICogXy5pc1BsYWluT2JqZWN0KG5ldyBTaGFwZSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKlxuICAgICAqIF8uaXNQbGFpbk9iamVjdChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICpcbiAgICAgKiBfLmlzUGxhaW5PYmplY3QoeyAneCc6IDAsICd5JzogMCB9KTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGlzUGxhaW5PYmplY3QgPSAhZ2V0UHJvdG90eXBlT2YgPyBzaGltSXNQbGFpbk9iamVjdCA6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoISh2YWx1ZSAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSBvYmplY3RDbGFzcykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIHZhbHVlT2YgPSB2YWx1ZS52YWx1ZU9mLFxuICAgICAgICAgIG9ialByb3RvID0gaXNOYXRpdmUodmFsdWVPZikgJiYgKG9ialByb3RvID0gZ2V0UHJvdG90eXBlT2YodmFsdWVPZikpICYmIGdldFByb3RvdHlwZU9mKG9ialByb3RvKTtcblxuICAgICAgcmV0dXJuIG9ialByb3RvXG4gICAgICAgID8gKHZhbHVlID09IG9ialByb3RvIHx8IGdldFByb3RvdHlwZU9mKHZhbHVlKSA9PSBvYmpQcm90bylcbiAgICAgICAgOiBzaGltSXNQbGFpbk9iamVjdCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcmVndWxhciBleHByZXNzaW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYSByZWd1bGFyIGV4cHJlc3Npb24sIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc1JlZ0V4cCgvZnJlZC8pO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1JlZ0V4cCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSByZWdleHBDbGFzcyB8fCBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBPYmplY3RzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBgdmFsdWVgIGlzIGEgc3RyaW5nLCBlbHNlIGBmYWxzZWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaXNTdHJpbmcoJ2ZyZWQnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHxcbiAgICAgICAgdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN0cmluZ0NsYXNzIHx8IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGB1bmRlZmluZWRgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB2YWx1ZWAgaXMgYHVuZGVmaW5lZGAsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pc1VuZGVmaW5lZCh2b2lkIDApO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAndW5kZWZpbmVkJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9iamVjdCB3aXRoIHRoZSBzYW1lIGtleXMgYXMgYG9iamVjdGAgYW5kIHZhbHVlcyBnZW5lcmF0ZWQgYnlcbiAgICAgKiBydW5uaW5nIGVhY2ggb3duIGVudW1lcmFibGUgcHJvcGVydHkgb2YgYG9iamVjdGAgdGhyb3VnaCB0aGUgY2FsbGJhY2suXG4gICAgICogVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50cztcbiAgICAgKiAodmFsdWUsIGtleSwgb2JqZWN0KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHZhbHVlcyBvZiB0aGUgcmVzdWx0cyBvZiBlYWNoIGBjYWxsYmFja2AgZXhlY3V0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLm1hcFZhbHVlcyh7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDN9ICwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBudW0gKiAzOyB9KTtcbiAgICAgKiAvLyA9PiB7ICdhJzogMywgJ2InOiA2LCAnYyc6IDkgfVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSB7XG4gICAgICogICAnZnJlZCc6IHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9LFxuICAgICAqICAgJ3BlYmJsZXMnOiB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYWdlJzogMSB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ubWFwVmFsdWVzKGNoYXJhY3RlcnMsICdhZ2UnKTtcbiAgICAgKiAvLyA9PiB7ICdmcmVkJzogNDAsICdwZWJibGVzJzogMSB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFwVmFsdWVzKG9iamVjdCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcblxuICAgICAgZm9yT3duKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqZWN0KSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gY2FsbGJhY2sodmFsdWUsIGtleSwgb2JqZWN0KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWN1cnNpdmVseSBtZXJnZXMgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiB0aGUgc291cmNlIG9iamVjdChzKSwgdGhhdFxuICAgICAqIGRvbid0IHJlc29sdmUgdG8gYHVuZGVmaW5lZGAgaW50byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LiBTdWJzZXF1ZW50IHNvdXJjZXNcbiAgICAgKiB3aWxsIG92ZXJ3cml0ZSBwcm9wZXJ0eSBhc3NpZ25tZW50cyBvZiBwcmV2aW91cyBzb3VyY2VzLiBJZiBhIGNhbGxiYWNrIGlzXG4gICAgICogcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZCB0byBwcm9kdWNlIHRoZSBtZXJnZWQgdmFsdWVzIG9mIHRoZSBkZXN0aW5hdGlvblxuICAgICAqIGFuZCBzb3VyY2UgcHJvcGVydGllcy4gSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYHVuZGVmaW5lZGAgbWVyZ2luZyB3aWxsXG4gICAgICogYmUgaGFuZGxlZCBieSB0aGUgbWV0aG9kIGluc3RlYWQuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kXG4gICAgICogaW52b2tlZCB3aXRoIHR3byBhcmd1bWVudHM7IChvYmplY3RWYWx1ZSwgc291cmNlVmFsdWUpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgbWVyZ2luZyBwcm9wZXJ0aWVzLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG5hbWVzID0ge1xuICAgICAqICAgJ2NoYXJhY3RlcnMnOiBbXG4gICAgICogICAgIHsgJ25hbWUnOiAnYmFybmV5JyB9LFxuICAgICAqICAgICB7ICduYW1lJzogJ2ZyZWQnIH1cbiAgICAgKiAgIF1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogdmFyIGFnZXMgPSB7XG4gICAgICogICAnY2hhcmFjdGVycyc6IFtcbiAgICAgKiAgICAgeyAnYWdlJzogMzYgfSxcbiAgICAgKiAgICAgeyAnYWdlJzogNDAgfVxuICAgICAqICAgXVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLm1lcmdlKG5hbWVzLCBhZ2VzKTtcbiAgICAgKiAvLyA9PiB7ICdjaGFyYWN0ZXJzJzogW3sgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sIHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9XSB9XG4gICAgICpcbiAgICAgKiB2YXIgZm9vZCA9IHtcbiAgICAgKiAgICdmcnVpdHMnOiBbJ2FwcGxlJ10sXG4gICAgICogICAndmVnZXRhYmxlcyc6IFsnYmVldCddXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBvdGhlckZvb2QgPSB7XG4gICAgICogICAnZnJ1aXRzJzogWydiYW5hbmEnXSxcbiAgICAgKiAgICd2ZWdldGFibGVzJzogWydjYXJyb3QnXVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLm1lcmdlKGZvb2QsIG90aGVyRm9vZCwgZnVuY3Rpb24oYSwgYikge1xuICAgICAqICAgcmV0dXJuIF8uaXNBcnJheShhKSA/IGEuY29uY2F0KGIpIDogdW5kZWZpbmVkO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ2ZydWl0cyc6IFsnYXBwbGUnLCAnYmFuYW5hJ10sICd2ZWdldGFibGVzJzogWydiZWV0JywgJ2NhcnJvdF0gfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1lcmdlKG9iamVjdCkge1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgbGVuZ3RoID0gMjtcblxuICAgICAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICB9XG4gICAgICAvLyBhbGxvd3Mgd29ya2luZyB3aXRoIGBfLnJlZHVjZWAgYW5kIGBfLnJlZHVjZVJpZ2h0YCB3aXRob3V0IHVzaW5nXG4gICAgICAvLyB0aGVpciBgaW5kZXhgIGFuZCBgY29sbGVjdGlvbmAgYXJndW1lbnRzXG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMl0gIT0gJ251bWJlcicpIHtcbiAgICAgICAgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG4gICAgICB9XG4gICAgICBpZiAobGVuZ3RoID4gMyAmJiB0eXBlb2YgYXJnc1tsZW5ndGggLSAyXSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGJhc2VDcmVhdGVDYWxsYmFjayhhcmdzWy0tbGVuZ3RoIC0gMV0sIGFyZ3NbbGVuZ3RoLS1dLCAyKTtcbiAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID4gMiAmJiB0eXBlb2YgYXJnc1tsZW5ndGggLSAxXSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNhbGxiYWNrID0gYXJnc1stLWxlbmd0aF07XG4gICAgICB9XG4gICAgICB2YXIgc291cmNlcyA9IHNsaWNlKGFyZ3VtZW50cywgMSwgbGVuZ3RoKSxcbiAgICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICAgIHN0YWNrQSA9IGdldEFycmF5KCksXG4gICAgICAgICAgc3RhY2tCID0gZ2V0QXJyYXkoKTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgYmFzZU1lcmdlKG9iamVjdCwgc291cmNlc1tpbmRleF0sIGNhbGxiYWNrLCBzdGFja0EsIHN0YWNrQik7XG4gICAgICB9XG4gICAgICByZWxlYXNlQXJyYXkoc3RhY2tBKTtcbiAgICAgIHJlbGVhc2VBcnJheShzdGFja0IpO1xuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2hhbGxvdyBjbG9uZSBvZiBgb2JqZWN0YCBleGNsdWRpbmcgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAqIFByb3BlcnR5IG5hbWVzIG1heSBiZSBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBhcmd1bWVudHMgb3IgYXMgYXJyYXlzIG9mXG4gICAgICogcHJvcGVydHkgbmFtZXMuIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZCBmb3IgZWFjaFxuICAgICAqIHByb3BlcnR5IG9mIGBvYmplY3RgIG9taXR0aW5nIHRoZSBwcm9wZXJ0aWVzIHRoZSBjYWxsYmFjayByZXR1cm5zIHRydWV5XG4gICAgICogZm9yLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzO1xuICAgICAqICh2YWx1ZSwga2V5LCBvYmplY3QpLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258Li4uc3RyaW5nfHN0cmluZ1tdfSBbY2FsbGJhY2tdIFRoZSBwcm9wZXJ0aWVzIHRvIG9taXQgb3IgdGhlXG4gICAgICogIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYW4gb2JqZWN0IHdpdGhvdXQgdGhlIG9taXR0ZWQgcHJvcGVydGllcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5vbWl0KHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9LCAnYWdlJyk7XG4gICAgICogLy8gPT4geyAnbmFtZSc6ICdmcmVkJyB9XG4gICAgICpcbiAgICAgKiBfLm9taXQoeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH0sIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICogICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnZnJlZCcgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9taXQob2JqZWN0LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZhciBwcm9wcyA9IFtdO1xuICAgICAgICBmb3JJbihvYmplY3QsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICBwcm9wcy5wdXNoKGtleSk7XG4gICAgICAgIH0pO1xuICAgICAgICBwcm9wcyA9IGJhc2VEaWZmZXJlbmNlKHByb3BzLCBiYXNlRmxhdHRlbihhcmd1bWVudHMsIHRydWUsIGZhbHNlLCAxKSk7XG5cbiAgICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gb2JqZWN0W2tleV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgZm9ySW4ob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmplY3QpIHtcbiAgICAgICAgICBpZiAoIWNhbGxiYWNrKHZhbHVlLCBrZXksIG9iamVjdCkpIHtcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHR3byBkaW1lbnNpb25hbCBhcnJheSBvZiBhbiBvYmplY3QncyBrZXktdmFsdWUgcGFpcnMsXG4gICAgICogaS5lLiBgW1trZXkxLCB2YWx1ZTFdLCBba2V5MiwgdmFsdWUyXV1gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IE9iamVjdHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgbmV3IGFycmF5IG9mIGtleS12YWx1ZSBwYWlycy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5wYWlycyh7ICdiYXJuZXknOiAzNiwgJ2ZyZWQnOiA0MCB9KTtcbiAgICAgKiAvLyA9PiBbWydiYXJuZXknLCAzNl0sIFsnZnJlZCcsIDQwXV0gKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXG4gICAgICovXG4gICAgZnVuY3Rpb24gcGFpcnMob2JqZWN0KSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBwcm9wcyA9IGtleXMob2JqZWN0KSxcbiAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IFtrZXksIG9iamVjdFtrZXldXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNoYWxsb3cgY2xvbmUgb2YgYG9iamVjdGAgY29tcG9zZWQgb2YgdGhlIHNwZWNpZmllZCBwcm9wZXJ0aWVzLlxuICAgICAqIFByb3BlcnR5IG5hbWVzIG1heSBiZSBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBhcmd1bWVudHMgb3IgYXMgYXJyYXlzIG9mXG4gICAgICogcHJvcGVydHkgbmFtZXMuIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSBleGVjdXRlZCBmb3IgZWFjaFxuICAgICAqIHByb3BlcnR5IG9mIGBvYmplY3RgIHBpY2tpbmcgdGhlIHByb3BlcnRpZXMgdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXlcbiAgICAgKiBmb3IuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7XG4gICAgICogKHZhbHVlLCBrZXksIG9iamVjdCkuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnwuLi5zdHJpbmd8c3RyaW5nW119IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXJcbiAgICAgKiAgaXRlcmF0aW9uIG9yIHByb3BlcnR5IG5hbWVzIHRvIHBpY2ssIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIHByb3BlcnR5XG4gICAgICogIG5hbWVzIG9yIGFycmF5cyBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGFuIG9iamVjdCBjb21wb3NlZCBvZiB0aGUgcGlja2VkIHByb3BlcnRpZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucGljayh7ICduYW1lJzogJ2ZyZWQnLCAnX3VzZXJpZCc6ICdmcmVkMScgfSwgJ25hbWUnKTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnIH1cbiAgICAgKlxuICAgICAqIF8ucGljayh7ICduYW1lJzogJ2ZyZWQnLCAnX3VzZXJpZCc6ICdmcmVkMScgfSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAqICAgcmV0dXJuIGtleS5jaGFyQXQoMCkgIT0gJ18nO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnZnJlZCcgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBpY2sob2JqZWN0LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgICAgcHJvcHMgPSBiYXNlRmxhdHRlbihhcmd1bWVudHMsIHRydWUsIGZhbHNlLCAxKSxcbiAgICAgICAgICAgIGxlbmd0aCA9IGlzT2JqZWN0KG9iamVjdCkgPyBwcm9wcy5sZW5ndGggOiAwO1xuXG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBvYmplY3Rba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgZm9ySW4ob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmplY3QpIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGtleSwgb2JqZWN0KSkge1xuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbiBhbHRlcm5hdGl2ZSB0byBgXy5yZWR1Y2VgIHRoaXMgbWV0aG9kIHRyYW5zZm9ybXMgYG9iamVjdGAgdG8gYSBuZXdcbiAgICAgKiBgYWNjdW11bGF0b3JgIG9iamVjdCB3aGljaCBpcyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgZWFjaCBvZiBpdHMgb3duXG4gICAgICogZW51bWVyYWJsZSBwcm9wZXJ0aWVzIHRocm91Z2ggYSBjYWxsYmFjaywgd2l0aCBlYWNoIGNhbGxiYWNrIGV4ZWN1dGlvblxuICAgICAqIHBvdGVudGlhbGx5IG11dGF0aW5nIHRoZSBgYWNjdW11bGF0b3JgIG9iamVjdC4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvXG4gICAgICogYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggZm91ciBhcmd1bWVudHM7IChhY2N1bXVsYXRvciwgdmFsdWUsIGtleSwgb2JqZWN0KS5cbiAgICAgKiBDYWxsYmFja3MgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbYWNjdW11bGF0b3JdIFRoZSBjdXN0b20gYWNjdW11bGF0b3IgdmFsdWUuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGFjY3VtdWxhdGVkIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgc3F1YXJlcyA9IF8udHJhbnNmb3JtKFsxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMF0sIGZ1bmN0aW9uKHJlc3VsdCwgbnVtKSB7XG4gICAgICogICBudW0gKj0gbnVtO1xuICAgICAqICAgaWYgKG51bSAlIDIpIHtcbiAgICAgKiAgICAgcmV0dXJuIHJlc3VsdC5wdXNoKG51bSkgPCAzO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIC8vID0+IFsxLCA5LCAyNV1cbiAgICAgKlxuICAgICAqIHZhciBtYXBwZWQgPSBfLnRyYW5zZm9ybSh7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDMgfSwgZnVuY3Rpb24ocmVzdWx0LCBudW0sIGtleSkge1xuICAgICAqICAgcmVzdWx0W2tleV0gPSBudW0gKiAzO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ2EnOiAzLCAnYic6IDYsICdjJzogOSB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJhbnNmb3JtKG9iamVjdCwgY2FsbGJhY2ssIGFjY3VtdWxhdG9yLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgaXNBcnIgPSBpc0FycmF5KG9iamVjdCk7XG4gICAgICBpZiAoYWNjdW11bGF0b3IgPT0gbnVsbCkge1xuICAgICAgICBpZiAoaXNBcnIpIHtcbiAgICAgICAgICBhY2N1bXVsYXRvciA9IFtdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBjdG9yID0gb2JqZWN0ICYmIG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgICAgICAgcHJvdG8gPSBjdG9yICYmIGN0b3IucHJvdG90eXBlO1xuXG4gICAgICAgICAgYWNjdW11bGF0b3IgPSBiYXNlQ3JlYXRlKHByb3RvKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCA0KTtcbiAgICAgICAgKGlzQXJyID8gZm9yRWFjaCA6IGZvck93bikob2JqZWN0LCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIG9iamVjdCkge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBvYmplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IGNvbXBvc2VkIG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSB2YWx1ZXMgb2YgYG9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0c1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udmFsdWVzKHsgJ29uZSc6IDEsICd0d28nOiAyLCAndGhyZWUnOiAzIH0pO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXSAocHJvcGVydHkgb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQgYWNyb3NzIGVudmlyb25tZW50cylcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB2YWx1ZXMob2JqZWN0KSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBwcm9wcyA9IGtleXMob2JqZWN0KSxcbiAgICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IG9iamVjdFtwcm9wc1tpbmRleF1dO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgZWxlbWVudHMgZnJvbSB0aGUgc3BlY2lmaWVkIGluZGV4ZXMsIG9yIGtleXMsIG9mIHRoZVxuICAgICAqIGBjb2xsZWN0aW9uYC4gSW5kZXhlcyBtYXkgYmUgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgYXJndW1lbnRzIG9yIGFzIGFycmF5c1xuICAgICAqIG9mIGluZGV4ZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7Li4uKG51bWJlcnxudW1iZXJbXXxzdHJpbmd8c3RyaW5nW10pfSBbaW5kZXhdIFRoZSBpbmRleGVzIG9mIGBjb2xsZWN0aW9uYFxuICAgICAqICAgdG8gcmV0cmlldmUsIHNwZWNpZmllZCBhcyBpbmRpdmlkdWFsIGluZGV4ZXMgb3IgYXJyYXlzIG9mIGluZGV4ZXMuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGVsZW1lbnRzIGNvcnJlc3BvbmRpbmcgdG8gdGhlXG4gICAgICogIHByb3ZpZGVkIGluZGV4ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uYXQoWydhJywgJ2InLCAnYycsICdkJywgJ2UnXSwgWzAsIDIsIDRdKTtcbiAgICAgKiAvLyA9PiBbJ2EnLCAnYycsICdlJ11cbiAgICAgKlxuICAgICAqIF8uYXQoWydmcmVkJywgJ2Jhcm5leScsICdwZWJibGVzJ10sIDAsIDIpO1xuICAgICAqIC8vID0+IFsnZnJlZCcsICdwZWJibGVzJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhdChjb2xsZWN0aW9uKSB7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICAgIHByb3BzID0gYmFzZUZsYXR0ZW4oYXJncywgdHJ1ZSwgZmFsc2UsIDEpLFxuICAgICAgICAgIGxlbmd0aCA9IChhcmdzWzJdICYmIGFyZ3NbMl1bYXJnc1sxXV0gPT09IGNvbGxlY3Rpb24pID8gMSA6IHByb3BzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICB3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBjb2xsZWN0aW9uW3Byb3BzW2luZGV4XV07XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhIGdpdmVuIHZhbHVlIGlzIHByZXNlbnQgaW4gYSBjb2xsZWN0aW9uIHVzaW5nIHN0cmljdCBlcXVhbGl0eVxuICAgICAqIGZvciBjb21wYXJpc29ucywgaS5lLiBgPT09YC4gSWYgYGZyb21JbmRleGAgaXMgbmVnYXRpdmUsIGl0IGlzIHVzZWQgYXMgdGhlXG4gICAgICogb2Zmc2V0IGZyb20gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBpbmNsdWRlXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0geyp9IHRhcmdldCBUaGUgdmFsdWUgdG8gY2hlY2sgZm9yLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGB0YXJnZXRgIGVsZW1lbnQgaXMgZm91bmQsIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5jb250YWlucyhbMSwgMiwgM10sIDEpO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKlxuICAgICAqIF8uY29udGFpbnMoWzEsIDIsIDNdLCAxLCAyKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogXy5jb250YWlucyh7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfSwgJ2ZyZWQnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiBfLmNvbnRhaW5zKCdwZWJibGVzJywgJ2ViJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbnRhaW5zKGNvbGxlY3Rpb24sIHRhcmdldCwgZnJvbUluZGV4KSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBpbmRleE9mID0gZ2V0SW5kZXhPZigpLFxuICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDAsXG4gICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cbiAgICAgIGZyb21JbmRleCA9IChmcm9tSW5kZXggPCAwID8gbmF0aXZlTWF4KDAsIGxlbmd0aCArIGZyb21JbmRleCkgOiBmcm9tSW5kZXgpIHx8IDA7XG4gICAgICBpZiAoaXNBcnJheShjb2xsZWN0aW9uKSkge1xuICAgICAgICByZXN1bHQgPSBpbmRleE9mKGNvbGxlY3Rpb24sIHRhcmdldCwgZnJvbUluZGV4KSA+IC0xO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XG4gICAgICAgIHJlc3VsdCA9IChpc1N0cmluZyhjb2xsZWN0aW9uKSA/IGNvbGxlY3Rpb24uaW5kZXhPZih0YXJnZXQsIGZyb21JbmRleCkgOiBpbmRleE9mKGNvbGxlY3Rpb24sIHRhcmdldCwgZnJvbUluZGV4KSkgPiAtMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGlmICgrK2luZGV4ID49IGZyb21JbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuICEocmVzdWx0ID0gdmFsdWUgPT09IHRhcmdldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2Yga2V5cyBnZW5lcmF0ZWQgZnJvbSB0aGUgcmVzdWx0cyBvZiBydW5uaW5nXG4gICAgICogZWFjaCBlbGVtZW50IG9mIGBjb2xsZWN0aW9uYCB0aHJvdWdoIHRoZSBjYWxsYmFjay4gVGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVcbiAgICAgKiBvZiBlYWNoIGtleSBpcyB0aGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBrZXkgd2FzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjay5cbiAgICAgKiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzO1xuICAgICAqICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNvbXBvc2VkIGFnZ3JlZ2F0ZSBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uY291bnRCeShbNC4zLCA2LjEsIDYuNF0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gTWF0aC5mbG9vcihudW0pOyB9KTtcbiAgICAgKiAvLyA9PiB7ICc0JzogMSwgJzYnOiAyIH1cbiAgICAgKlxuICAgICAqIF8uY291bnRCeShbNC4zLCA2LjEsIDYuNF0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gdGhpcy5mbG9vcihudW0pOyB9LCBNYXRoKTtcbiAgICAgKiAvLyA9PiB7ICc0JzogMSwgJzYnOiAyIH1cbiAgICAgKlxuICAgICAqIF8uY291bnRCeShbJ29uZScsICd0d28nLCAndGhyZWUnXSwgJ2xlbmd0aCcpO1xuICAgICAqIC8vID0+IHsgJzMnOiAyLCAnNSc6IDEgfVxuICAgICAqL1xuICAgIHZhciBjb3VudEJ5ID0gY3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICAgIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwga2V5KSA/IHJlc3VsdFtrZXldKysgOiByZXN1bHRba2V5XSA9IDEpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBjYWxsYmFjayByZXR1cm5zIHRydWV5IHZhbHVlIGZvciAqKmFsbCoqIGVsZW1lbnRzIG9mXG4gICAgICogYSBjb2xsZWN0aW9uLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcbiAgICAgKiBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIGFsbFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYWxsIGVsZW1lbnRzIHBhc3NlZCB0aGUgY2FsbGJhY2sgY2hlY2ssXG4gICAgICogIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5ldmVyeShbdHJ1ZSwgMSwgbnVsbCwgJ3llcyddKTtcbiAgICAgKiAvLyA9PiBmYWxzZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmV2ZXJ5KGNoYXJhY3RlcnMsICdhZ2UnKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmV2ZXJ5KGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDM2IH0pO1xuICAgICAqIC8vID0+IGZhbHNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gZXZlcnkoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwO1xuXG4gICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIGlmICghKHJlc3VsdCA9ICEhY2FsbGJhY2soY29sbGVjdGlvbltpbmRleF0sIGluZGV4LCBjb2xsZWN0aW9uKSkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICAgIHJldHVybiAocmVzdWx0ID0gISFjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2YgYSBjb2xsZWN0aW9uLCByZXR1cm5pbmcgYW4gYXJyYXkgb2YgYWxsIGVsZW1lbnRzXG4gICAgICogdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkgZm9yLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZFxuICAgICAqIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIHNlbGVjdFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBwYXNzZWQgdGhlIGNhbGxiYWNrIGNoZWNrLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgZXZlbnMgPSBfLmZpbHRlcihbMSwgMiwgMywgNCwgNSwgNl0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gbnVtICUgMiA9PSAwOyB9KTtcbiAgICAgKiAvLyA9PiBbMiwgNCwgNl1cbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbHRlcihjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xuICAgICAqIC8vID0+IFt7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9XVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maWx0ZXIoY2hhcmFjdGVycywgeyAnYWdlJzogMzYgfSk7XG4gICAgICogLy8gPT4gW3sgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmlsdGVyKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG5cbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XG5cbiAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gY29sbGVjdGlvbltpbmRleF07XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2YgYSBjb2xsZWN0aW9uLCByZXR1cm5pbmcgdGhlIGZpcnN0IGVsZW1lbnQgdGhhdFxuICAgICAqIHRoZSBjYWxsYmFjayByZXR1cm5zIHRydWV5IGZvci4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmRcbiAgICAgKiBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBkZXRlY3QsIGZpbmRXaGVyZVxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgdW5kZWZpbmVkYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYWdlJzogMzYsICdibG9ja2VkJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiB0cnVlIH0sXG4gICAgICogICB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYWdlJzogMSwgICdibG9ja2VkJzogZmFsc2UgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLmZpbmQoY2hhcmFjdGVycywgZnVuY3Rpb24oY2hyKSB7XG4gICAgICogICByZXR1cm4gY2hyLmFnZSA8IDQwO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmluZChjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAxIH0pO1xuICAgICAqIC8vID0+ICB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYWdlJzogMSwgJ2Jsb2NrZWQnOiBmYWxzZSB9XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmQoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gZmluZChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwO1xuXG4gICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbGxlY3Rpb25baW5kZXhdO1xuICAgICAgICAgIGlmIChjYWxsYmFjayh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICBmb3JPd24oY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kYCBleGNlcHQgdGhhdCBpdCBpdGVyYXRlcyBvdmVyIGVsZW1lbnRzXG4gICAgICogb2YgYSBgY29sbGVjdGlvbmAgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGB1bmRlZmluZWRgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZpbmRMYXN0KFsxLCAyLCAzLCA0XSwgZnVuY3Rpb24obnVtKSB7XG4gICAgICogICByZXR1cm4gbnVtICUgMiA9PSAxO1xuICAgICAqIH0pO1xuICAgICAqIC8vID0+IDNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaW5kTGFzdChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIGZvckVhY2hSaWdodChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mIGEgY29sbGVjdGlvbiwgZXhlY3V0aW5nIHRoZSBjYWxsYmFjayBmb3IgZWFjaFxuICAgICAqIGVsZW1lbnQuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7XG4gICAgICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLiBDYWxsYmFja3MgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5IGJ5XG4gICAgICogZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIE5vdGU6IEFzIHdpdGggb3RoZXIgXCJDb2xsZWN0aW9uc1wiIG1ldGhvZHMsIG9iamVjdHMgd2l0aCBhIGBsZW5ndGhgIHByb3BlcnR5XG4gICAgICogYXJlIGl0ZXJhdGVkIGxpa2UgYXJyYXlzLiBUbyBhdm9pZCB0aGlzIGJlaGF2aW9yIGBfLmZvckluYCBvciBgXy5mb3JPd25gXG4gICAgICogbWF5IGJlIHVzZWQgZm9yIG9iamVjdCBpdGVyYXRpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgZWFjaFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge0FycmF5fE9iamVjdHxzdHJpbmd9IFJldHVybnMgYGNvbGxlY3Rpb25gLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfKFsxLCAyLCAzXSkuZm9yRWFjaChmdW5jdGlvbihudW0pIHsgY29uc29sZS5sb2cobnVtKTsgfSkuam9pbignLCcpO1xuICAgICAqIC8vID0+IGxvZ3MgZWFjaCBudW1iZXIgYW5kIHJldHVybnMgJzEsMiwzJ1xuICAgICAqXG4gICAgICogXy5mb3JFYWNoKHsgJ29uZSc6IDEsICd0d28nOiAyLCAndGhyZWUnOiAzIH0sIGZ1bmN0aW9uKG51bSkgeyBjb25zb2xlLmxvZyhudW0pOyB9KTtcbiAgICAgKiAvLyA9PiBsb2dzIGVhY2ggbnVtYmVyIGFuZCByZXR1cm5zIHRoZSBvYmplY3QgKHByb3BlcnR5IG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBlbnZpcm9ubWVudHMpXG4gICAgICovXG4gICAgZnVuY3Rpb24gZm9yRWFjaChjb2xsZWN0aW9uLCBjYWxsYmFjaywgdGhpc0FyZykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcblxuICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayAmJiB0eXBlb2YgdGhpc0FyZyA9PSAndW5kZWZpbmVkJyA/IGNhbGxiYWNrIDogYmFzZUNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKGNvbGxlY3Rpb25baW5kZXhdLCBpbmRleCwgY29sbGVjdGlvbikgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZvckVhY2hgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHNcbiAgICAgKiBvZiBhIGBjb2xsZWN0aW9uYCBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgZWFjaFJpZ2h0XG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fHN0cmluZ30gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8oWzEsIDIsIDNdKS5mb3JFYWNoUmlnaHQoZnVuY3Rpb24obnVtKSB7IGNvbnNvbGUubG9nKG51bSk7IH0pLmpvaW4oJywnKTtcbiAgICAgKiAvLyA9PiBsb2dzIGVhY2ggbnVtYmVyIGZyb20gcmlnaHQgdG8gbGVmdCBhbmQgcmV0dXJucyAnMywyLDEnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZm9yRWFjaFJpZ2h0KGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcbiAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2sgJiYgdHlwZW9mIHRoaXNBcmcgPT0gJ3VuZGVmaW5lZCcgPyBjYWxsYmFjayA6IGJhc2VDcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xuICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2soY29sbGVjdGlvbltsZW5ndGhdLCBsZW5ndGgsIGNvbGxlY3Rpb24pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcHJvcHMgPSBrZXlzKGNvbGxlY3Rpb24pO1xuICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG4gICAgICAgIGZvck93bihjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgICAga2V5ID0gcHJvcHMgPyBwcm9wc1stLWxlbmd0aF0gOiAtLWxlbmd0aDtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soY29sbGVjdGlvbltrZXldLCBrZXksIGNvbGxlY3Rpb24pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIGtleXMgZ2VuZXJhdGVkIGZyb20gdGhlIHJlc3VsdHMgb2YgcnVubmluZ1xuICAgICAqIGVhY2ggZWxlbWVudCBvZiBhIGNvbGxlY3Rpb24gdGhyb3VnaCB0aGUgY2FsbGJhY2suIFRoZSBjb3JyZXNwb25kaW5nIHZhbHVlXG4gICAgICogb2YgZWFjaCBrZXkgaXMgYW4gYXJyYXkgb2YgdGhlIGVsZW1lbnRzIHJlc3BvbnNpYmxlIGZvciBnZW5lcmF0aW5nIHRoZSBrZXkuXG4gICAgICogVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50cztcbiAgICAgKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYFxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNvbXBvc2VkIGFnZ3JlZ2F0ZSBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZ3JvdXBCeShbNC4yLCA2LjEsIDYuNF0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gTWF0aC5mbG9vcihudW0pOyB9KTtcbiAgICAgKiAvLyA9PiB7ICc0JzogWzQuMl0sICc2JzogWzYuMSwgNi40XSB9XG4gICAgICpcbiAgICAgKiBfLmdyb3VwQnkoWzQuMiwgNi4xLCA2LjRdLCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIHRoaXMuZmxvb3IobnVtKTsgfSwgTWF0aCk7XG4gICAgICogLy8gPT4geyAnNCc6IFs0LjJdLCAnNic6IFs2LjEsIDYuNF0gfVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5ncm91cEJ5KFsnb25lJywgJ3R3bycsICd0aHJlZSddLCAnbGVuZ3RoJyk7XG4gICAgICogLy8gPT4geyAnMyc6IFsnb25lJywgJ3R3byddLCAnNSc6IFsndGhyZWUnXSB9XG4gICAgICovXG4gICAgdmFyIGdyb3VwQnkgPSBjcmVhdGVBZ2dyZWdhdG9yKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgICAgKGhhc093blByb3BlcnR5LmNhbGwocmVzdWx0LCBrZXkpID8gcmVzdWx0W2tleV0gOiByZXN1bHRba2V5XSA9IFtdKS5wdXNoKHZhbHVlKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JqZWN0IGNvbXBvc2VkIG9mIGtleXMgZ2VuZXJhdGVkIGZyb20gdGhlIHJlc3VsdHMgb2YgcnVubmluZ1xuICAgICAqIGVhY2ggZWxlbWVudCBvZiB0aGUgY29sbGVjdGlvbiB0aHJvdWdoIHRoZSBnaXZlbiBjYWxsYmFjay4gVGhlIGNvcnJlc3BvbmRpbmdcbiAgICAgKiB2YWx1ZSBvZiBlYWNoIGtleSBpcyB0aGUgbGFzdCBlbGVtZW50IHJlc3BvbnNpYmxlIGZvciBnZW5lcmF0aW5nIHRoZSBrZXkuXG4gICAgICogVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50cztcbiAgICAgKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb21wb3NlZCBhZ2dyZWdhdGUgb2JqZWN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIga2V5cyA9IFtcbiAgICAgKiAgIHsgJ2Rpcic6ICdsZWZ0JywgJ2NvZGUnOiA5NyB9LFxuICAgICAqICAgeyAnZGlyJzogJ3JpZ2h0JywgJ2NvZGUnOiAxMDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLmluZGV4Qnkoa2V5cywgJ2RpcicpO1xuICAgICAqIC8vID0+IHsgJ2xlZnQnOiB7ICdkaXInOiAnbGVmdCcsICdjb2RlJzogOTcgfSwgJ3JpZ2h0JzogeyAnZGlyJzogJ3JpZ2h0JywgJ2NvZGUnOiAxMDAgfSB9XG4gICAgICpcbiAgICAgKiBfLmluZGV4Qnkoa2V5cywgZnVuY3Rpb24oa2V5KSB7IHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGtleS5jb2RlKTsgfSk7XG4gICAgICogLy8gPT4geyAnYSc6IHsgJ2Rpcic6ICdsZWZ0JywgJ2NvZGUnOiA5NyB9LCAnZCc6IHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH0gfVxuICAgICAqXG4gICAgICogXy5pbmRleEJ5KGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGtleSkgeyB0aGlzLmZyb21DaGFyQ29kZShrZXkuY29kZSk7IH0sIFN0cmluZyk7XG4gICAgICogLy8gPT4geyAnYSc6IHsgJ2Rpcic6ICdsZWZ0JywgJ2NvZGUnOiA5NyB9LCAnZCc6IHsgJ2Rpcic6ICdyaWdodCcsICdjb2RlJzogMTAwIH0gfVxuICAgICAqL1xuICAgIHZhciBpbmRleEJ5ID0gY3JlYXRlQWdncmVnYXRvcihmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBtZXRob2QgbmFtZWQgYnkgYG1ldGhvZE5hbWVgIG9uIGVhY2ggZWxlbWVudCBpbiB0aGUgYGNvbGxlY3Rpb25gXG4gICAgICogcmV0dXJuaW5nIGFuIGFycmF5IG9mIHRoZSByZXN1bHRzIG9mIGVhY2ggaW52b2tlZCBtZXRob2QuIEFkZGl0aW9uYWwgYXJndW1lbnRzXG4gICAgICogd2lsbCBiZSBwcm92aWRlZCB0byBlYWNoIGludm9rZWQgbWV0aG9kLiBJZiBgbWV0aG9kTmFtZWAgaXMgYSBmdW5jdGlvbiBpdFxuICAgICAqIHdpbGwgYmUgaW52b2tlZCBmb3IsIGFuZCBgdGhpc2AgYm91bmQgdG8sIGVhY2ggZWxlbWVudCBpbiB0aGUgYGNvbGxlY3Rpb25gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gbWV0aG9kTmFtZSBUaGUgbmFtZSBvZiB0aGUgbWV0aG9kIHRvIGludm9rZSBvclxuICAgICAqICB0aGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGludm9rZSB0aGUgbWV0aG9kIHdpdGguXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIHRoZSByZXN1bHRzIG9mIGVhY2ggaW52b2tlZCBtZXRob2QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaW52b2tlKFtbNSwgMSwgN10sIFszLCAyLCAxXV0sICdzb3J0Jyk7XG4gICAgICogLy8gPT4gW1sxLCA1LCA3XSwgWzEsIDIsIDNdXVxuICAgICAqXG4gICAgICogXy5pbnZva2UoWzEyMywgNDU2XSwgU3RyaW5nLnByb3RvdHlwZS5zcGxpdCwgJycpO1xuICAgICAqIC8vID0+IFtbJzEnLCAnMicsICczJ10sIFsnNCcsICc1JywgJzYnXV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbnZva2UoY29sbGVjdGlvbiwgbWV0aG9kTmFtZSkge1xuICAgICAgdmFyIGFyZ3MgPSBzbGljZShhcmd1bWVudHMsIDIpLFxuICAgICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgICAgaXNGdW5jID0gdHlwZW9mIG1ldGhvZE5hbWUgPT0gJ2Z1bmN0aW9uJyxcbiAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgPyBsZW5ndGggOiAwKTtcblxuICAgICAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXN1bHRbKytpbmRleF0gPSAoaXNGdW5jID8gbWV0aG9kTmFtZSA6IHZhbHVlW21ldGhvZE5hbWVdKS5hcHBseSh2YWx1ZSwgYXJncyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB2YWx1ZXMgYnkgcnVubmluZyBlYWNoIGVsZW1lbnQgaW4gdGhlIGNvbGxlY3Rpb25cbiAgICAgKiB0aHJvdWdoIHRoZSBjYWxsYmFjay4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoXG4gICAgICogdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBjb2xsZWN0XG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiB0aGUgcmVzdWx0cyBvZiBlYWNoIGBjYWxsYmFja2AgZXhlY3V0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLm1hcChbMSwgMiwgM10sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gbnVtICogMzsgfSk7XG4gICAgICogLy8gPT4gWzMsIDYsIDldXG4gICAgICpcbiAgICAgKiBfLm1hcCh7ICdvbmUnOiAxLCAndHdvJzogMiwgJ3RocmVlJzogMyB9LCBmdW5jdGlvbihudW0pIHsgcmV0dXJuIG51bSAqIDM7IH0pO1xuICAgICAqIC8vID0+IFszLCA2LCA5XSAocHJvcGVydHkgb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQgYWNyb3NzIGVudmlyb25tZW50cylcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5tYXAoY2hhcmFjdGVycywgJ25hbWUnKTtcbiAgICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXAoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uLmxlbmd0aCA6IDA7XG5cbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBjYWxsYmFjayhjb2xsZWN0aW9uW2luZGV4XSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICByZXN1bHRbKytpbmRleF0gPSBjYWxsYmFjayh2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgbWF4aW11bSB2YWx1ZSBvZiBhIGNvbGxlY3Rpb24uIElmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5IG9yXG4gICAgICogZmFsc2V5IGAtSW5maW5pdHlgIGlzIHJldHVybmVkLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWRcbiAgICAgKiBmb3IgZWFjaCB2YWx1ZSBpbiB0aGUgY29sbGVjdGlvbiB0byBnZW5lcmF0ZSB0aGUgY3JpdGVyaW9uIGJ5IHdoaWNoIHRoZSB2YWx1ZVxuICAgICAqIGlzIHJhbmtlZC4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXhpbXVtIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLm1heChbNCwgMiwgOCwgNl0pO1xuICAgICAqIC8vID0+IDhcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5tYXgoY2hhcmFjdGVycywgZnVuY3Rpb24oY2hyKSB7IHJldHVybiBjaHIuYWdlOyB9KTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ubWF4KGNoYXJhY3RlcnMsICdhZ2UnKTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2ZyZWQnLCAnYWdlJzogNDAgfTtcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYXgoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBjb21wdXRlZCA9IC1JbmZpbml0eSxcbiAgICAgICAgICByZXN1bHQgPSBjb21wdXRlZDtcblxuICAgICAgLy8gYWxsb3dzIHdvcmtpbmcgd2l0aCBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgIHdpdGhvdXQgdXNpbmdcbiAgICAgIC8vIHRoZWlyIGBpbmRleGAgYXJndW1lbnQgYXMgYSBjYWxsYmFja1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnZnVuY3Rpb24nICYmIHRoaXNBcmcgJiYgdGhpc0FyZ1tjYWxsYmFja10gPT09IGNvbGxlY3Rpb24pIHtcbiAgICAgICAgY2FsbGJhY2sgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKGNhbGxiYWNrID09IG51bGwgJiYgaXNBcnJheShjb2xsZWN0aW9uKSkge1xuICAgICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuXG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gY29sbGVjdGlvbltpbmRleF07XG4gICAgICAgICAgaWYgKHZhbHVlID4gcmVzdWx0KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrID0gKGNhbGxiYWNrID09IG51bGwgJiYgaXNTdHJpbmcoY29sbGVjdGlvbikpXG4gICAgICAgICAgPyBjaGFyQXRDYWxsYmFja1xuICAgICAgICAgIDogbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcblxuICAgICAgICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICAgIHZhciBjdXJyZW50ID0gY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgICBpZiAoY3VycmVudCA+IGNvbXB1dGVkKSB7XG4gICAgICAgICAgICBjb21wdXRlZCA9IGN1cnJlbnQ7XG4gICAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIG1pbmltdW0gdmFsdWUgb2YgYSBjb2xsZWN0aW9uLiBJZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eSBvclxuICAgICAqIGZhbHNleSBgSW5maW5pdHlgIGlzIHJldHVybmVkLiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWRcbiAgICAgKiBmb3IgZWFjaCB2YWx1ZSBpbiB0aGUgY29sbGVjdGlvbiB0byBnZW5lcmF0ZSB0aGUgY3JpdGVyaW9uIGJ5IHdoaWNoIHRoZSB2YWx1ZVxuICAgICAqIGlzIHJhbmtlZC4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgaXRlcmF0aW9uLiBJZiBhIHByb3BlcnR5IG5hbWUgb3Igb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZFxuICAgICAqICB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtaW5pbXVtIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLm1pbihbNCwgMiwgOCwgNl0pO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5taW4oY2hhcmFjdGVycywgZnVuY3Rpb24oY2hyKSB7IHJldHVybiBjaHIuYWdlOyB9KTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9O1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5taW4oY2hhcmFjdGVycywgJ2FnZScpO1xuICAgICAqIC8vID0+IHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH07XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWluKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgY29tcHV0ZWQgPSBJbmZpbml0eSxcbiAgICAgICAgICByZXN1bHQgPSBjb21wdXRlZDtcblxuICAgICAgLy8gYWxsb3dzIHdvcmtpbmcgd2l0aCBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgIHdpdGhvdXQgdXNpbmdcbiAgICAgIC8vIHRoZWlyIGBpbmRleGAgYXJndW1lbnQgYXMgYSBjYWxsYmFja1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPSAnZnVuY3Rpb24nICYmIHRoaXNBcmcgJiYgdGhpc0FyZ1tjYWxsYmFja10gPT09IGNvbGxlY3Rpb24pIHtcbiAgICAgICAgY2FsbGJhY2sgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKGNhbGxiYWNrID09IG51bGwgJiYgaXNBcnJheShjb2xsZWN0aW9uKSkge1xuICAgICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICAgIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuXG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gY29sbGVjdGlvbltpbmRleF07XG4gICAgICAgICAgaWYgKHZhbHVlIDwgcmVzdWx0KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrID0gKGNhbGxiYWNrID09IG51bGwgJiYgaXNTdHJpbmcoY29sbGVjdGlvbikpXG4gICAgICAgICAgPyBjaGFyQXRDYWxsYmFja1xuICAgICAgICAgIDogbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcblxuICAgICAgICBmb3JFYWNoKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICAgIHZhciBjdXJyZW50ID0gY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgICBpZiAoY3VycmVudCA8IGNvbXB1dGVkKSB7XG4gICAgICAgICAgICBjb21wdXRlZCA9IGN1cnJlbnQ7XG4gICAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIHZhbHVlIG9mIGEgc3BlY2lmaWVkIHByb3BlcnR5IGZyb20gYWxsIGVsZW1lbnRzIGluIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gcGx1Y2suXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiBfLnBsdWNrKGNoYXJhY3RlcnMsICduYW1lJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXG4gICAgICovXG4gICAgdmFyIHBsdWNrID0gbWFwO1xuXG4gICAgLyoqXG4gICAgICogUmVkdWNlcyBhIGNvbGxlY3Rpb24gdG8gYSB2YWx1ZSB3aGljaCBpcyB0aGUgYWNjdW11bGF0ZWQgcmVzdWx0IG9mIHJ1bm5pbmdcbiAgICAgKiBlYWNoIGVsZW1lbnQgaW4gdGhlIGNvbGxlY3Rpb24gdGhyb3VnaCB0aGUgY2FsbGJhY2ssIHdoZXJlIGVhY2ggc3VjY2Vzc2l2ZVxuICAgICAqIGNhbGxiYWNrIGV4ZWN1dGlvbiBjb25zdW1lcyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBwcmV2aW91cyBleGVjdXRpb24uIElmXG4gICAgICogYGFjY3VtdWxhdG9yYCBpcyBub3QgcHJvdmlkZWQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb24gd2lsbCBiZVxuICAgICAqIHVzZWQgYXMgdGhlIGluaXRpYWwgYGFjY3VtdWxhdG9yYCB2YWx1ZS4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYFxuICAgICAqIGFuZCBpbnZva2VkIHdpdGggZm91ciBhcmd1bWVudHM7IChhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgZm9sZGwsIGluamVjdFxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkIHBlciBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbYWNjdW11bGF0b3JdIEluaXRpYWwgdmFsdWUgb2YgdGhlIGFjY3VtdWxhdG9yLlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHN1bSA9IF8ucmVkdWNlKFsxLCAyLCAzXSwgZnVuY3Rpb24oc3VtLCBudW0pIHtcbiAgICAgKiAgIHJldHVybiBzdW0gKyBudW07XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gNlxuICAgICAqXG4gICAgICogdmFyIG1hcHBlZCA9IF8ucmVkdWNlKHsgJ2EnOiAxLCAnYic6IDIsICdjJzogMyB9LCBmdW5jdGlvbihyZXN1bHQsIG51bSwga2V5KSB7XG4gICAgICogICByZXN1bHRba2V5XSA9IG51bSAqIDM7XG4gICAgICogICByZXR1cm4gcmVzdWx0O1xuICAgICAqIH0sIHt9KTtcbiAgICAgKiAvLyA9PiB7ICdhJzogMywgJ2InOiA2LCAnYyc6IDkgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlZHVjZShjb2xsZWN0aW9uLCBjYWxsYmFjaywgYWNjdW11bGF0b3IsIHRoaXNBcmcpIHtcbiAgICAgIGlmICghY29sbGVjdGlvbikgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgICAgdmFyIG5vYWNjdW0gPSBhcmd1bWVudHMubGVuZ3RoIDwgMztcbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCA0KTtcblxuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG5cbiAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7XG4gICAgICAgIGlmIChub2FjY3VtKSB7XG4gICAgICAgICAgYWNjdW11bGF0b3IgPSBjb2xsZWN0aW9uWysraW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgYWNjdW11bGF0b3IgPSBjYWxsYmFjayhhY2N1bXVsYXRvciwgY29sbGVjdGlvbltpbmRleF0sIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICAgIGFjY3VtdWxhdG9yID0gbm9hY2N1bVxuICAgICAgICAgICAgPyAobm9hY2N1bSA9IGZhbHNlLCB2YWx1ZSlcbiAgICAgICAgICAgIDogY2FsbGJhY2soYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbilcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5yZWR1Y2VgIGV4Y2VwdCB0aGF0IGl0IGl0ZXJhdGVzIG92ZXIgZWxlbWVudHNcbiAgICAgKiBvZiBhIGBjb2xsZWN0aW9uYCBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgZm9sZHJcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYWxsYmFjaz1pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW2FjY3VtdWxhdG9yXSBJbml0aWFsIHZhbHVlIG9mIHRoZSBhY2N1bXVsYXRvci5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBsaXN0ID0gW1swLCAxXSwgWzIsIDNdLCBbNCwgNV1dO1xuICAgICAqIHZhciBmbGF0ID0gXy5yZWR1Y2VSaWdodChsaXN0LCBmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhLmNvbmNhdChiKTsgfSwgW10pO1xuICAgICAqIC8vID0+IFs0LCA1LCAyLCAzLCAwLCAxXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlZHVjZVJpZ2h0KGNvbGxlY3Rpb24sIGNhbGxiYWNrLCBhY2N1bXVsYXRvciwgdGhpc0FyZykge1xuICAgICAgdmFyIG5vYWNjdW0gPSBhcmd1bWVudHMubGVuZ3RoIDwgMztcbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCA0KTtcbiAgICAgIGZvckVhY2hSaWdodChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgYWNjdW11bGF0b3IgPSBub2FjY3VtXG4gICAgICAgICAgPyAobm9hY2N1bSA9IGZhbHNlLCB2YWx1ZSlcbiAgICAgICAgICA6IGNhbGxiYWNrKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIG9wcG9zaXRlIG9mIGBfLmZpbHRlcmAgdGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZWxlbWVudHMgb2YgYVxuICAgICAqIGNvbGxlY3Rpb24gdGhhdCB0aGUgY2FsbGJhY2sgZG9lcyAqKm5vdCoqIHJldHVybiB0cnVleSBmb3IuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBmYWlsZWQgdGhlIGNhbGxiYWNrIGNoZWNrLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2RkcyA9IF8ucmVqZWN0KFsxLCAyLCAzLCA0LCA1LCA2XSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBudW0gJSAyID09IDA7IH0pO1xuICAgICAqIC8vID0+IFsxLCAzLCA1XVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAsICdibG9ja2VkJzogdHJ1ZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucmVqZWN0KGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XG4gICAgICogLy8gPT4gW3sgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH1dXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnJlamVjdChjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAzNiB9KTtcbiAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWplY3QoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIHJldHVybiBmaWx0ZXIoY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiAhY2FsbGJhY2sodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhIHJhbmRvbSBlbGVtZW50IG9yIGBuYCByYW5kb20gZWxlbWVudHMgZnJvbSBhIGNvbGxlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2FtcGxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbl0gVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBzYW1wbGUuXG4gICAgICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEFsbG93cyB3b3JraW5nIHdpdGggZnVuY3Rpb25zIGxpa2UgYF8ubWFwYFxuICAgICAqICB3aXRob3V0IHVzaW5nIHRoZWlyIGBpbmRleGAgYXJndW1lbnRzIGFzIGBuYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHJhbmRvbSBzYW1wbGUocykgb2YgYGNvbGxlY3Rpb25gLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNhbXBsZShbMSwgMiwgMywgNF0pO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIF8uc2FtcGxlKFsxLCAyLCAzLCA0XSwgMik7XG4gICAgICogLy8gPT4gWzMsIDFdXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2FtcGxlKGNvbGxlY3Rpb24sIG4sIGd1YXJkKSB7XG4gICAgICBpZiAoY29sbGVjdGlvbiAmJiB0eXBlb2YgY29sbGVjdGlvbi5sZW5ndGggIT0gJ251bWJlcicpIHtcbiAgICAgICAgY29sbGVjdGlvbiA9IHZhbHVlcyhjb2xsZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHtcbiAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uW2Jhc2VSYW5kb20oMCwgY29sbGVjdGlvbi5sZW5ndGggLSAxKV0gOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gc2h1ZmZsZShjb2xsZWN0aW9uKTtcbiAgICAgIHJlc3VsdC5sZW5ndGggPSBuYXRpdmVNaW4obmF0aXZlTWF4KDAsIG4pLCByZXN1bHQubGVuZ3RoKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBzaHVmZmxlZCB2YWx1ZXMsIHVzaW5nIGEgdmVyc2lvbiBvZiB0aGUgRmlzaGVyLVlhdGVzXG4gICAgICogc2h1ZmZsZS4gU2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmlzaGVyLVlhdGVzX3NodWZmbGUuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gc2h1ZmZsZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgc2h1ZmZsZWQgY29sbGVjdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zaHVmZmxlKFsxLCAyLCAzLCA0LCA1LCA2XSk7XG4gICAgICogLy8gPT4gWzQsIDEsIDYsIDMsIDUsIDJdXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2h1ZmZsZShjb2xsZWN0aW9uKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc3VsdCA9IEFycmF5KHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgPyBsZW5ndGggOiAwKTtcblxuICAgICAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXIgcmFuZCA9IGJhc2VSYW5kb20oMCwgKytpbmRleCk7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSByZXN1bHRbcmFuZF07XG4gICAgICAgIHJlc3VsdFtyYW5kXSA9IHZhbHVlO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHNpemUgb2YgdGhlIGBjb2xsZWN0aW9uYCBieSByZXR1cm5pbmcgYGNvbGxlY3Rpb24ubGVuZ3RoYCBmb3IgYXJyYXlzXG4gICAgICogYW5kIGFycmF5LWxpa2Ugb2JqZWN0cyBvciB0aGUgbnVtYmVyIG9mIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgZm9yIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaW5zcGVjdC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGBjb2xsZWN0aW9uLmxlbmd0aGAgb3IgbnVtYmVyIG9mIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uc2l6ZShbMSwgMl0pO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIF8uc2l6ZSh7ICdvbmUnOiAxLCAndHdvJzogMiwgJ3RocmVlJzogMyB9KTtcbiAgICAgKiAvLyA9PiAzXG4gICAgICpcbiAgICAgKiBfLnNpemUoJ3BlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiA3XG4gICAgICovXG4gICAgZnVuY3Rpb24gc2l6ZShjb2xsZWN0aW9uKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMDtcbiAgICAgIHJldHVybiB0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInID8gbGVuZ3RoIDoga2V5cyhjb2xsZWN0aW9uKS5sZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBjYWxsYmFjayByZXR1cm5zIGEgdHJ1ZXkgdmFsdWUgZm9yICoqYW55KiogZWxlbWVudCBvZiBhXG4gICAgICogY29sbGVjdGlvbi4gVGhlIGZ1bmN0aW9uIHJldHVybnMgYXMgc29vbiBhcyBpdCBmaW5kcyBhIHBhc3NpbmcgdmFsdWUgYW5kXG4gICAgICogZG9lcyBub3QgaXRlcmF0ZSBvdmVyIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvXG4gICAgICogYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBhbnlcbiAgICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlZCB0aGUgY2FsbGJhY2sgY2hlY2ssXG4gICAgICogIGVsc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5zb21lKFtudWxsLCAwLCAneWVzJywgZmFsc2VdLCBCb29sZWFuKTtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYmxvY2tlZCc6IGZhbHNlIH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCwgJ2Jsb2NrZWQnOiB0cnVlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5zb21lKGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XG4gICAgICogLy8gPT4gdHJ1ZVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5zb21lKGNoYXJhY3RlcnMsIHsgJ2FnZSc6IDEgfSk7XG4gICAgICogLy8gPT4gZmFsc2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzb21lKGNvbGxlY3Rpb24sIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuXG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBjb2xsZWN0aW9uID8gY29sbGVjdGlvbi5sZW5ndGggOiAwO1xuXG4gICAgICBpZiAodHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJykge1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIGlmICgocmVzdWx0ID0gY2FsbGJhY2soY29sbGVjdGlvbltpbmRleF0sIGluZGV4LCBjb2xsZWN0aW9uKSkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yT3duKGNvbGxlY3Rpb24sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICAgIHJldHVybiAhKHJlc3VsdCA9IGNhbGxiYWNrKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAhIXJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIGVsZW1lbnRzLCBzb3J0ZWQgaW4gYXNjZW5kaW5nIG9yZGVyIGJ5IHRoZSByZXN1bHRzIG9mXG4gICAgICogcnVubmluZyBlYWNoIGVsZW1lbnQgaW4gYSBjb2xsZWN0aW9uIHRocm91Z2ggdGhlIGNhbGxiYWNrLiBUaGlzIG1ldGhvZFxuICAgICAqIHBlcmZvcm1zIGEgc3RhYmxlIHNvcnQsIHRoYXQgaXMsIGl0IHdpbGwgcHJlc2VydmUgdGhlIG9yaWdpbmFsIHNvcnQgb3JkZXJcbiAgICAgKiBvZiBlcXVhbCBlbGVtZW50cy4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoXG4gICAgICogdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcyBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY29sbGVjdGlvblxuICAgICAqIHdpbGwgYmUgc29ydGVkIGJ5IGVhY2ggcHJvcGVydHkgdmFsdWUuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2Ygc29ydGVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNvcnRCeShbMSwgMiwgM10sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gTWF0aC5zaW4obnVtKTsgfSk7XG4gICAgICogLy8gPT4gWzMsIDEsIDJdXG4gICAgICpcbiAgICAgKiBfLnNvcnRCeShbMSwgMiwgM10sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gdGhpcy5zaW4obnVtKTsgfSwgTWF0aCk7XG4gICAgICogLy8gPT4gWzMsIDEsIDJdXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdhZ2UnOiAzNiB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2FnZSc6IDQwIH0sXG4gICAgICogICB7ICduYW1lJzogJ2Jhcm5leScsICAnYWdlJzogMjYgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdhZ2UnOiAzMCB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ubWFwKF8uc29ydEJ5KGNoYXJhY3RlcnMsICdhZ2UnKSwgXy52YWx1ZXMpO1xuICAgICAqIC8vID0+IFtbJ2Jhcm5leScsIDI2XSwgWydmcmVkJywgMzBdLCBbJ2Jhcm5leScsIDM2XSwgWydmcmVkJywgNDBdXVxuICAgICAqXG4gICAgICogLy8gc29ydGluZyBieSBtdWx0aXBsZSBwcm9wZXJ0aWVzXG4gICAgICogXy5tYXAoXy5zb3J0QnkoY2hhcmFjdGVycywgWyduYW1lJywgJ2FnZSddKSwgXy52YWx1ZXMpO1xuICAgICAqIC8vID0gPiBbWydiYXJuZXknLCAyNl0sIFsnYmFybmV5JywgMzZdLCBbJ2ZyZWQnLCAzMF0sIFsnZnJlZCcsIDQwXV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzb3J0QnkoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGlzQXJyID0gaXNBcnJheShjYWxsYmFjayksXG4gICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGNvbGxlY3Rpb24ubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheSh0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInID8gbGVuZ3RoIDogMCk7XG5cbiAgICAgIGlmICghaXNBcnIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgfVxuICAgICAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSByZXN1bHRbKytpbmRleF0gPSBnZXRPYmplY3QoKTtcbiAgICAgICAgaWYgKGlzQXJyKSB7XG4gICAgICAgICAgb2JqZWN0LmNyaXRlcmlhID0gbWFwKGNhbGxiYWNrLCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIChvYmplY3QuY3JpdGVyaWEgPSBnZXRBcnJheSgpKVswXSA9IGNhbGxiYWNrKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIG9iamVjdC5pbmRleCA9IGluZGV4O1xuICAgICAgICBvYmplY3QudmFsdWUgPSB2YWx1ZTtcbiAgICAgIH0pO1xuXG4gICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoO1xuICAgICAgcmVzdWx0LnNvcnQoY29tcGFyZUFzY2VuZGluZyk7XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgdmFyIG9iamVjdCA9IHJlc3VsdFtsZW5ndGhdO1xuICAgICAgICByZXN1bHRbbGVuZ3RoXSA9IG9iamVjdC52YWx1ZTtcbiAgICAgICAgaWYgKCFpc0Fycikge1xuICAgICAgICAgIHJlbGVhc2VBcnJheShvYmplY3QuY3JpdGVyaWEpO1xuICAgICAgICB9XG4gICAgICAgIHJlbGVhc2VPYmplY3Qob2JqZWN0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGBjb2xsZWN0aW9uYCB0byBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGNvbnZlcnRlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogKGZ1bmN0aW9uKCkgeyByZXR1cm4gXy50b0FycmF5KGFyZ3VtZW50cykuc2xpY2UoMSk7IH0pKDEsIDIsIDMsIDQpO1xuICAgICAqIC8vID0+IFsyLCAzLCA0XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRvQXJyYXkoY29sbGVjdGlvbikge1xuICAgICAgaWYgKGNvbGxlY3Rpb24gJiYgdHlwZW9mIGNvbGxlY3Rpb24ubGVuZ3RoID09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiBzbGljZShjb2xsZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZXMoY29sbGVjdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBkZWVwIGNvbXBhcmlzb24gb2YgZWFjaCBlbGVtZW50IGluIGEgYGNvbGxlY3Rpb25gIHRvIHRoZSBnaXZlblxuICAgICAqIGBwcm9wZXJ0aWVzYCBvYmplY3QsIHJldHVybmluZyBhbiBhcnJheSBvZiBhbGwgZWxlbWVudHMgdGhhdCBoYXZlIGVxdWl2YWxlbnRcbiAgICAgKiBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAdHlwZSBGdW5jdGlvblxuICAgICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uc1xuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIGZpbHRlciBieS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgYXJyYXkgb2YgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBnaXZlbiBwcm9wZXJ0aWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAncGV0cyc6IFsnaG9wcHknXSB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAnYWdlJzogNDAsICdwZXRzJzogWydiYWJ5IHB1c3MnLCAnZGlubyddIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy53aGVyZShjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAzNiB9KTtcbiAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYsICdwZXRzJzogWydob3BweSddIH1dXG4gICAgICpcbiAgICAgKiBfLndoZXJlKGNoYXJhY3RlcnMsIHsgJ3BldHMnOiBbJ2Rpbm8nXSB9KTtcbiAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwLCAncGV0cyc6IFsnYmFieSBwdXNzJywgJ2Rpbm8nXSB9XVxuICAgICAqL1xuICAgIHZhciB3aGVyZSA9IGZpbHRlcjtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSB3aXRoIGFsbCBmYWxzZXkgdmFsdWVzIHJlbW92ZWQuIFRoZSB2YWx1ZXMgYGZhbHNlYCwgYG51bGxgLFxuICAgICAqIGAwYCwgYFwiXCJgLCBgdW5kZWZpbmVkYCwgYW5kIGBOYU5gIGFyZSBhbGwgZmFsc2V5LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBjb21wYWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uY29tcGFjdChbMCwgMSwgZmFsc2UsIDIsICcnLCAzXSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcGFjdChhcnJheSkge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcnJheVtpbmRleF07XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IGV4Y2x1ZGluZyBhbGwgdmFsdWVzIG9mIHRoZSBwcm92aWRlZCBhcnJheXMgdXNpbmcgc3RyaWN0XG4gICAgICogZXF1YWxpdHkgZm9yIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBwcm9jZXNzLlxuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFt2YWx1ZXNdIFRoZSBhcnJheXMgb2YgdmFsdWVzIHRvIGV4Y2x1ZGUuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIGZpbHRlcmVkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5kaWZmZXJlbmNlKFsxLCAyLCAzLCA0LCA1XSwgWzUsIDIsIDEwXSk7XG4gICAgICogLy8gPT4gWzEsIDMsIDRdXG4gICAgICovXG4gICAgZnVuY3Rpb24gZGlmZmVyZW5jZShhcnJheSkge1xuICAgICAgcmV0dXJuIGJhc2VEaWZmZXJlbmNlKGFycmF5LCBiYXNlRmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUsIDEpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRgIGV4Y2VwdCB0aGF0IGl0IHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdFxuICAgICAqIGVsZW1lbnQgdGhhdCBwYXNzZXMgdGhlIGNhbGxiYWNrIGNoZWNrLCBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50IGl0c2VsZi5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgLTFgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiBmYWxzZSB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2FnZSc6IDQwLCAnYmxvY2tlZCc6IHRydWUgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAncGViYmxlcycsICdhZ2UnOiAxLCAgJ2Jsb2NrZWQnOiBmYWxzZSB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIF8uZmluZEluZGV4KGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgcmV0dXJuIGNoci5hZ2UgPCAyMDtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRJbmRleChjaGFyYWN0ZXJzLCB7ICdhZ2UnOiAzNiB9KTtcbiAgICAgKiAvLyA9PiAwXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRJbmRleChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpO1xuICAgICAqIC8vID0+IDFcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXksIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cbiAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIGlmIChjYWxsYmFjayhhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRJbmRleGAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBlbGVtZW50c1xuICAgICAqIG9mIGEgYGNvbGxlY3Rpb25gIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgLTFgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdhZ2UnOiAzNiwgJ2Jsb2NrZWQnOiB0cnVlIH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAsICdibG9ja2VkJzogZmFsc2UgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAncGViYmxlcycsICdhZ2UnOiAxLCAgJ2Jsb2NrZWQnOiB0cnVlIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogXy5maW5kTGFzdEluZGV4KGNoYXJhY3RlcnMsIGZ1bmN0aW9uKGNocikge1xuICAgICAqICAgcmV0dXJuIGNoci5hZ2UgPiAzMDtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ud2hlcmVcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZpbmRMYXN0SW5kZXgoY2hhcmFjdGVycywgeyAnYWdlJzogMzYgfSk7XG4gICAgICogLy8gPT4gMFxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5maW5kTGFzdEluZGV4KGNoYXJhY3RlcnMsICdibG9ja2VkJyk7XG4gICAgICogLy8gPT4gMlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmRMYXN0SW5kZXgoYXJyYXksIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIGlmIChjYWxsYmFjayhhcnJheVtsZW5ndGhdLCBsZW5ndGgsIGFycmF5KSkge1xuICAgICAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBmaXJzdCBlbGVtZW50IG9yIGZpcnN0IGBuYCBlbGVtZW50cyBvZiBhbiBhcnJheS4gSWYgYSBjYWxsYmFja1xuICAgICAqIGlzIHByb3ZpZGVkIGVsZW1lbnRzIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5IGFyZSByZXR1cm5lZCBhcyBsb25nXG4gICAgICogYXMgdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kXG4gICAgICogaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAYWxpYXMgaGVhZCwgdGFrZVxuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8bnVtYmVyfHN0cmluZ30gW2NhbGxiYWNrXSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBlbGVtZW50IG9yIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gcmV0dXJuLiBJZiBhIHByb3BlcnR5IG5hbWUgb3JcbiAgICAgKiAgb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgYSBcIl8ucGx1Y2tcIiBvciBcIl8ud2hlcmVcIlxuICAgICAqICBzdHlsZSBjYWxsYmFjaywgcmVzcGVjdGl2ZWx5LlxuICAgICAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY2FsbGJhY2tgLlxuICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50KHMpIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZmlyc3QoWzEsIDIsIDNdKTtcbiAgICAgKiAvLyA9PiAxXG4gICAgICpcbiAgICAgKiBfLmZpcnN0KFsxLCAyLCAzXSwgMik7XG4gICAgICogLy8gPT4gWzEsIDJdXG4gICAgICpcbiAgICAgKiBfLmZpcnN0KFsxLCAyLCAzXSwgZnVuY3Rpb24obnVtKSB7XG4gICAgICogICByZXR1cm4gbnVtIDwgMztcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2Jsb2NrZWQnOiB0cnVlLCAgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2Jsb2NrZWQnOiBmYWxzZSwgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2Jsb2NrZWQnOiB0cnVlLCAgJ2VtcGxveWVyJzogJ25hJyB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uZmlyc3QoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKTtcbiAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdiYXJuZXknLCAnYmxvY2tlZCc6IHRydWUsICdlbXBsb3llcic6ICdzbGF0ZScgfV1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5maXJzdChjaGFyYWN0ZXJzLCB7ICdlbXBsb3llcic6ICdzbGF0ZScgfSksICduYW1lJyk7XG4gICAgICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXG4gICAgICovXG4gICAgZnVuY3Rpb24gZmlyc3QoYXJyYXksIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgbiA9IDAsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdudW1iZXInICYmIGNhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGggJiYgY2FsbGJhY2soYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgICAgbisrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuID0gY2FsbGJhY2s7XG4gICAgICAgIGlmIChuID09IG51bGwgfHwgdGhpc0FyZykge1xuICAgICAgICAgIHJldHVybiBhcnJheSA/IGFycmF5WzBdIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc2xpY2UoYXJyYXksIDAsIG5hdGl2ZU1pbihuYXRpdmVNYXgoMCwgbiksIGxlbmd0aCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZsYXR0ZW5zIGEgbmVzdGVkIGFycmF5ICh0aGUgbmVzdGluZyBjYW4gYmUgdG8gYW55IGRlcHRoKS4gSWYgYGlzU2hhbGxvd2BcbiAgICAgKiBpcyB0cnVleSwgdGhlIGFycmF5IHdpbGwgb25seSBiZSBmbGF0dGVuZWQgYSBzaW5nbGUgbGV2ZWwuIElmIGEgY2FsbGJhY2tcbiAgICAgKiBpcyBwcm92aWRlZCBlYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5IGlzIHBhc3NlZCB0aHJvdWdoIHRoZSBjYWxsYmFjayBiZWZvcmVcbiAgICAgKiBmbGF0dGVuaW5nLiBUaGUgY2FsbGJhY2sgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcbiAgICAgKiBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBmbGF0dGVuLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzU2hhbGxvdz1mYWxzZV0gQSBmbGFnIHRvIHJlc3RyaWN0IGZsYXR0ZW5pbmcgdG8gYSBzaW5nbGUgbGV2ZWwuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbY2FsbGJhY2s9aWRlbnRpdHldIFRoZSBmdW5jdGlvbiBjYWxsZWRcbiAgICAgKiAgcGVyIGl0ZXJhdGlvbi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWRcbiAgICAgKiAgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgZmxhdHRlbmVkIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmZsYXR0ZW4oWzEsIFsyXSwgWzMsIFtbNF1dXV0pO1xuICAgICAqIC8vID0+IFsxLCAyLCAzLCA0XTtcbiAgICAgKlxuICAgICAqIF8uZmxhdHRlbihbMSwgWzJdLCBbMywgW1s0XV1dXSwgdHJ1ZSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDMsIFtbNF1dXTtcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzAsICdwZXRzJzogWydob3BweSddIH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCwgJ3BldHMnOiBbJ2JhYnkgcHVzcycsICdkaW5vJ10gfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmZsYXR0ZW4oY2hhcmFjdGVycywgJ3BldHMnKTtcbiAgICAgKiAvLyA9PiBbJ2hvcHB5JywgJ2JhYnkgcHVzcycsICdkaW5vJ11cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmbGF0dGVuKGFycmF5LCBpc1NoYWxsb3csIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICAvLyBqdWdnbGUgYXJndW1lbnRzXG4gICAgICBpZiAodHlwZW9mIGlzU2hhbGxvdyAhPSAnYm9vbGVhbicgJiYgaXNTaGFsbG93ICE9IG51bGwpIHtcbiAgICAgICAgdGhpc0FyZyA9IGNhbGxiYWNrO1xuICAgICAgICBjYWxsYmFjayA9ICh0eXBlb2YgaXNTaGFsbG93ICE9ICdmdW5jdGlvbicgJiYgdGhpc0FyZyAmJiB0aGlzQXJnW2lzU2hhbGxvd10gPT09IGFycmF5KSA/IG51bGwgOiBpc1NoYWxsb3c7XG4gICAgICAgIGlzU2hhbGxvdyA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGNhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgYXJyYXkgPSBtYXAoYXJyYXksIGNhbGxiYWNrLCB0aGlzQXJnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlRmxhdHRlbihhcnJheSwgaXNTaGFsbG93KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBgdmFsdWVgIGlzIGZvdW5kIHVzaW5nXG4gICAgICogc3RyaWN0IGVxdWFsaXR5IGZvciBjb21wYXJpc29ucywgaS5lLiBgPT09YC4gSWYgdGhlIGFycmF5IGlzIGFscmVhZHkgc29ydGVkXG4gICAgICogcHJvdmlkaW5nIGB0cnVlYCBmb3IgYGZyb21JbmRleGAgd2lsbCBydW4gYSBmYXN0ZXIgYmluYXJ5IHNlYXJjaC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHBhcmFtIHtib29sZWFufG51bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20gb3IgYHRydWVgXG4gICAgICogIHRvIHBlcmZvcm0gYSBiaW5hcnkgc2VhcmNoIG9uIGEgc29ydGVkIGFycmF5LlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlIG9yIGAtMWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uaW5kZXhPZihbMSwgMiwgMywgMSwgMiwgM10sIDIpO1xuICAgICAqIC8vID0+IDFcbiAgICAgKlxuICAgICAqIF8uaW5kZXhPZihbMSwgMiwgMywgMSwgMiwgM10sIDIsIDMpO1xuICAgICAqIC8vID0+IDRcbiAgICAgKlxuICAgICAqIF8uaW5kZXhPZihbMSwgMSwgMiwgMiwgMywgM10sIDIsIHRydWUpO1xuICAgICAqIC8vID0+IDJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7XG4gICAgICBpZiAodHlwZW9mIGZyb21JbmRleCA9PSAnbnVtYmVyJykge1xuICAgICAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICAgICAgICBmcm9tSW5kZXggPSAoZnJvbUluZGV4IDwgMCA/IG5hdGl2ZU1heCgwLCBsZW5ndGggKyBmcm9tSW5kZXgpIDogZnJvbUluZGV4IHx8IDApO1xuICAgICAgfSBlbHNlIGlmIChmcm9tSW5kZXgpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gc29ydGVkSW5kZXgoYXJyYXksIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGFycmF5W2luZGV4XSA9PT0gdmFsdWUgPyBpbmRleCA6IC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvciBsYXN0IGBuYCBlbGVtZW50cyBvZiBhbiBhcnJheS4gSWYgYVxuICAgICAqIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGVsZW1lbnRzIGF0IHRoZSBlbmQgb2YgdGhlIGFycmF5IGFyZSBleGNsdWRlZCBmcm9tXG4gICAgICogdGhlIHJlc3VsdCBhcyBsb25nIGFzIHRoZSBjYWxsYmFjayByZXR1cm5zIHRydWV5LiBUaGUgY2FsbGJhY2sgaXMgYm91bmRcbiAgICAgKiB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM7ICh2YWx1ZSwgaW5kZXgsIGFycmF5KS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxudW1iZXJ8c3RyaW5nfSBbY2FsbGJhY2s9MV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgZWxlbWVudCBvciB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIGV4Y2x1ZGUuIElmIGEgcHJvcGVydHkgbmFtZSBvclxuICAgICAqICBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiXG4gICAgICogIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5pbml0aWFsKFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gWzEsIDJdXG4gICAgICpcbiAgICAgKiBfLmluaXRpYWwoWzEsIDIsIDNdLCAyKTtcbiAgICAgKiAvLyA9PiBbMV1cbiAgICAgKlxuICAgICAqIF8uaW5pdGlhbChbMSwgMiwgM10sIGZ1bmN0aW9uKG51bSkge1xuICAgICAqICAgcmV0dXJuIG51bSA+IDE7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gWzFdXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdibG9ja2VkJzogZmFsc2UsICdlbXBsb3llcic6ICdzbGF0ZScgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdibG9ja2VkJzogdHJ1ZSwgICdlbXBsb3llcic6ICdzbGF0ZScgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAncGViYmxlcycsICdibG9ja2VkJzogdHJ1ZSwgICdlbXBsb3llcic6ICduYScgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLmluaXRpYWwoY2hhcmFjdGVycywgJ2Jsb2NrZWQnKTtcbiAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2Jsb2NrZWQnOiBmYWxzZSwgJ2VtcGxveWVyJzogJ3NsYXRlJyB9XVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5wbHVjayhfLmluaXRpYWwoY2hhcmFjdGVycywgeyAnZW1wbG95ZXInOiAnbmEnIH0pLCAnbmFtZScpO1xuICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluaXRpYWwoYXJyYXksIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgbiA9IDAsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdudW1iZXInICYmIGNhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gbGVuZ3RoO1xuICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICAgIHdoaWxlIChpbmRleC0tICYmIGNhbGxiYWNrKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgICAgIG4rKztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbiA9IChjYWxsYmFjayA9PSBudWxsIHx8IHRoaXNBcmcpID8gMSA6IGNhbGxiYWNrIHx8IG47XG4gICAgICB9XG4gICAgICByZXR1cm4gc2xpY2UoYXJyYXksIDAsIG5hdGl2ZU1pbihuYXRpdmVNYXgoMCwgbGVuZ3RoIC0gbiksIGxlbmd0aCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdW5pcXVlIHZhbHVlcyBwcmVzZW50IGluIGFsbCBwcm92aWRlZCBhcnJheXMgdXNpbmdcbiAgICAgKiBzdHJpY3QgZXF1YWxpdHkgZm9yIGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheV0gVGhlIGFycmF5cyB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBzaGFyZWQgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmludGVyc2VjdGlvbihbMSwgMiwgM10sIFs1LCAyLCAxLCA0XSwgWzIsIDFdKTtcbiAgICAgKiAvLyA9PiBbMSwgMl1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbnRlcnNlY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IFtdLFxuICAgICAgICAgIGFyZ3NJbmRleCA9IC0xLFxuICAgICAgICAgIGFyZ3NMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgICAgICAgIGNhY2hlcyA9IGdldEFycmF5KCksXG4gICAgICAgICAgaW5kZXhPZiA9IGdldEluZGV4T2YoKSxcbiAgICAgICAgICB0cnVzdEluZGV4T2YgPSBpbmRleE9mID09PSBiYXNlSW5kZXhPZixcbiAgICAgICAgICBzZWVuID0gZ2V0QXJyYXkoKTtcblxuICAgICAgd2hpbGUgKCsrYXJnc0luZGV4IDwgYXJnc0xlbmd0aCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBhcmd1bWVudHNbYXJnc0luZGV4XTtcbiAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSkge1xuICAgICAgICAgIGFyZ3MucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgY2FjaGVzLnB1c2godHJ1c3RJbmRleE9mICYmIHZhbHVlLmxlbmd0aCA+PSBsYXJnZUFycmF5U2l6ZSAmJlxuICAgICAgICAgICAgY3JlYXRlQ2FjaGUoYXJnc0luZGV4ID8gYXJnc1thcmdzSW5kZXhdIDogc2VlbikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgYXJyYXkgPSBhcmdzWzBdLFxuICAgICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwLFxuICAgICAgICAgIHJlc3VsdCA9IFtdO1xuXG4gICAgICBvdXRlcjpcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBjYWNoZSA9IGNhY2hlc1swXTtcbiAgICAgICAgdmFsdWUgPSBhcnJheVtpbmRleF07XG5cbiAgICAgICAgaWYgKChjYWNoZSA/IGNhY2hlSW5kZXhPZihjYWNoZSwgdmFsdWUpIDogaW5kZXhPZihzZWVuLCB2YWx1ZSkpIDwgMCkge1xuICAgICAgICAgIGFyZ3NJbmRleCA9IGFyZ3NMZW5ndGg7XG4gICAgICAgICAgKGNhY2hlIHx8IHNlZW4pLnB1c2godmFsdWUpO1xuICAgICAgICAgIHdoaWxlICgtLWFyZ3NJbmRleCkge1xuICAgICAgICAgICAgY2FjaGUgPSBjYWNoZXNbYXJnc0luZGV4XTtcbiAgICAgICAgICAgIGlmICgoY2FjaGUgPyBjYWNoZUluZGV4T2YoY2FjaGUsIHZhbHVlKSA6IGluZGV4T2YoYXJnc1thcmdzSW5kZXhdLCB2YWx1ZSkpIDwgMCkge1xuICAgICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB3aGlsZSAoYXJnc0xlbmd0aC0tKSB7XG4gICAgICAgIGNhY2hlID0gY2FjaGVzW2FyZ3NMZW5ndGhdO1xuICAgICAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgICByZWxlYXNlT2JqZWN0KGNhY2hlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVsZWFzZUFycmF5KGNhY2hlcyk7XG4gICAgICByZWxlYXNlQXJyYXkoc2Vlbik7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxhc3QgZWxlbWVudCBvciBsYXN0IGBuYCBlbGVtZW50cyBvZiBhbiBhcnJheS4gSWYgYSBjYWxsYmFjayBpc1xuICAgICAqIHByb3ZpZGVkIGVsZW1lbnRzIGF0IHRoZSBlbmQgb2YgdGhlIGFycmF5IGFyZSByZXR1cm5lZCBhcyBsb25nIGFzIHRoZVxuICAgICAqIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkuIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWRcbiAgICAgKiB3aXRoIHRocmVlIGFyZ3VtZW50czsgKHZhbHVlLCBpbmRleCwgYXJyYXkpLlxuICAgICAqXG4gICAgICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy5wbHVja1wiIHN0eWxlXG4gICAgICogY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIG9mIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkIGZvciBgY2FsbGJhY2tgIHRoZSBjcmVhdGVkIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrXG4gICAgICogd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuIG9iamVjdCxcbiAgICAgKiBlbHNlIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fG51bWJlcnxzdHJpbmd9IFtjYWxsYmFja10gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgZWxlbWVudCBvciB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHJldHVybi4gSWYgYSBwcm9wZXJ0eSBuYW1lIG9yXG4gICAgICogIG9iamVjdCBpcyBwcm92aWRlZCBpdCB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIGEgXCJfLnBsdWNrXCIgb3IgXCJfLndoZXJlXCJcbiAgICAgKiAgc3R5bGUgY2FsbGJhY2ssIHJlc3BlY3RpdmVseS5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbGFzdCBlbGVtZW50KHMpIG9mIGBhcnJheWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubGFzdChbMSwgMiwgM10pO1xuICAgICAqIC8vID0+IDNcbiAgICAgKlxuICAgICAqIF8ubGFzdChbMSwgMiwgM10sIDIpO1xuICAgICAqIC8vID0+IFsyLCAzXVxuICAgICAqXG4gICAgICogXy5sYXN0KFsxLCAyLCAzXSwgZnVuY3Rpb24obnVtKSB7XG4gICAgICogICByZXR1cm4gbnVtID4gMTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiBbMiwgM11cbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2Jsb2NrZWQnOiBmYWxzZSwgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdmcmVkJywgICAgJ2Jsb2NrZWQnOiB0cnVlLCAgJ2VtcGxveWVyJzogJ3NsYXRlJyB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdwZWJibGVzJywgJ2Jsb2NrZWQnOiB0cnVlLCAgJ2VtcGxveWVyJzogJ25hJyB9XG4gICAgICogXTtcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucGx1Y2soXy5sYXN0KGNoYXJhY3RlcnMsICdibG9ja2VkJyksICduYW1lJyk7XG4gICAgICogLy8gPT4gWydmcmVkJywgJ3BlYmJsZXMnXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLndoZXJlXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy5sYXN0KGNoYXJhY3RlcnMsIHsgJ2VtcGxveWVyJzogJ25hJyB9KTtcbiAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdwZWJibGVzJywgJ2Jsb2NrZWQnOiB0cnVlLCAnZW1wbG95ZXInOiAnbmEnIH1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gbGFzdChhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBuID0gMCxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gJ251bWJlcicgJiYgY2FsbGJhY2sgIT0gbnVsbCkge1xuICAgICAgICB2YXIgaW5kZXggPSBsZW5ndGg7XG4gICAgICAgIGNhbGxiYWNrID0gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAzKTtcbiAgICAgICAgd2hpbGUgKGluZGV4LS0gJiYgY2FsbGJhY2soYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICAgICAgbisrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuID0gY2FsbGJhY2s7XG4gICAgICAgIGlmIChuID09IG51bGwgfHwgdGhpc0FyZykge1xuICAgICAgICAgIHJldHVybiBhcnJheSA/IGFycmF5W2xlbmd0aCAtIDFdIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc2xpY2UoYXJyYXksIG5hdGl2ZU1heCgwLCBsZW5ndGggLSBuKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGxhc3Qgb2NjdXJyZW5jZSBvZiBgdmFsdWVgIGlzIGZvdW5kIHVzaW5nIHN0cmljdFxuICAgICAqIGVxdWFsaXR5IGZvciBjb21wYXJpc29ucywgaS5lLiBgPT09YC4gSWYgYGZyb21JbmRleGAgaXMgbmVnYXRpdmUsIGl0IGlzIHVzZWRcbiAgICAgKiBhcyB0aGUgb2Zmc2V0IGZyb20gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD1hcnJheS5sZW5ndGgtMV0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlIG9yIGAtMWAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ubGFzdEluZGV4T2YoWzEsIDIsIDMsIDEsIDIsIDNdLCAyKTtcbiAgICAgKiAvLyA9PiA0XG4gICAgICpcbiAgICAgKiBfLmxhc3RJbmRleE9mKFsxLCAyLCAzLCAxLCAyLCAzXSwgMiwgMyk7XG4gICAgICogLy8gPT4gMVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGxhc3RJbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7XG4gICAgICB2YXIgaW5kZXggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gICAgICBpZiAodHlwZW9mIGZyb21JbmRleCA9PSAnbnVtYmVyJykge1xuICAgICAgICBpbmRleCA9IChmcm9tSW5kZXggPCAwID8gbmF0aXZlTWF4KDAsIGluZGV4ICsgZnJvbUluZGV4KSA6IG5hdGl2ZU1pbihmcm9tSW5kZXgsIGluZGV4IC0gMSkpICsgMTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgIGlmIChhcnJheVtpbmRleF0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgcHJvdmlkZWQgdmFsdWVzIGZyb20gdGhlIGdpdmVuIGFycmF5IHVzaW5nIHN0cmljdCBlcXVhbGl0eSBmb3JcbiAgICAgKiBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW3ZhbHVlXSBUaGUgdmFsdWVzIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGFycmF5ID0gWzEsIDIsIDMsIDEsIDIsIDNdO1xuICAgICAqIF8ucHVsbChhcnJheSwgMiwgMyk7XG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsxLCAxXVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHB1bGwoYXJyYXkpIHtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgIGFyZ3NJbmRleCA9IDAsXG4gICAgICAgICAgYXJnc0xlbmd0aCA9IGFyZ3MubGVuZ3RoLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcblxuICAgICAgd2hpbGUgKCsrYXJnc0luZGV4IDwgYXJnc0xlbmd0aCkge1xuICAgICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICAgIHZhbHVlID0gYXJnc1thcmdzSW5kZXhdO1xuICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgIGlmIChhcnJheVtpbmRleF0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICBzcGxpY2UuY2FsbChhcnJheSwgaW5kZXgtLSwgMSk7XG4gICAgICAgICAgICBsZW5ndGgtLTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIG51bWJlcnMgKHBvc2l0aXZlIGFuZC9vciBuZWdhdGl2ZSkgcHJvZ3Jlc3NpbmcgZnJvbVxuICAgICAqIGBzdGFydGAgdXAgdG8gYnV0IG5vdCBpbmNsdWRpbmcgYGVuZGAuIElmIGBzdGFydGAgaXMgbGVzcyB0aGFuIGBzdG9wYCBhXG4gICAgICogemVyby1sZW5ndGggcmFuZ2UgaXMgY3JlYXRlZCB1bmxlc3MgYSBuZWdhdGl2ZSBgc3RlcGAgaXMgc3BlY2lmaWVkLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHN0YXJ0IG9mIHRoZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSBlbmQgb2YgdGhlIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RlcD0xXSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IG9yIGRlY3JlbWVudCBieS5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYSBuZXcgcmFuZ2UgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoNCk7XG4gICAgICogLy8gPT4gWzAsIDEsIDIsIDNdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDEsIDUpO1xuICAgICAqIC8vID0+IFsxLCAyLCAzLCA0XVxuICAgICAqXG4gICAgICogXy5yYW5nZSgwLCAyMCwgNSk7XG4gICAgICogLy8gPT4gWzAsIDUsIDEwLCAxNV1cbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoMCwgLTQsIC0xKTtcbiAgICAgKiAvLyA9PiBbMCwgLTEsIC0yLCAtM11cbiAgICAgKlxuICAgICAqIF8ucmFuZ2UoMSwgNCwgMCk7XG4gICAgICogLy8gPT4gWzEsIDEsIDFdXG4gICAgICpcbiAgICAgKiBfLnJhbmdlKDApO1xuICAgICAqIC8vID0+IFtdXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmFuZ2Uoc3RhcnQsIGVuZCwgc3RlcCkge1xuICAgICAgc3RhcnQgPSArc3RhcnQgfHwgMDtcbiAgICAgIHN0ZXAgPSB0eXBlb2Ygc3RlcCA9PSAnbnVtYmVyJyA/IHN0ZXAgOiAoK3N0ZXAgfHwgMSk7XG5cbiAgICAgIGlmIChlbmQgPT0gbnVsbCkge1xuICAgICAgICBlbmQgPSBzdGFydDtcbiAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgfVxuICAgICAgLy8gdXNlIGBBcnJheShsZW5ndGgpYCBzbyBlbmdpbmVzIGxpa2UgQ2hha3JhIGFuZCBWOCBhdm9pZCBzbG93ZXIgbW9kZXNcbiAgICAgIC8vIGh0dHA6Ly95b3V0dS5iZS9YQXFJcEdVOFpaayN0PTE3bTI1c1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KDAsIGNlaWwoKGVuZCAtIHN0YXJ0KSAvIChzdGVwIHx8IDEpKSksXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgcmVzdWx0W2luZGV4XSA9IHN0YXJ0O1xuICAgICAgICBzdGFydCArPSBzdGVwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBlbGVtZW50cyBmcm9tIGFuIGFycmF5IHRoYXQgdGhlIGNhbGxiYWNrIHJldHVybnMgdHJ1ZXkgZm9yXG4gICAgICogYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgcmVtb3ZlZCBlbGVtZW50cy4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYFxuICAgICAqIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgbmV3IGFycmF5IG9mIHJlbW92ZWQgZWxlbWVudHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBhcnJheSA9IFsxLCAyLCAzLCA0LCA1LCA2XTtcbiAgICAgKiB2YXIgZXZlbnMgPSBfLnJlbW92ZShhcnJheSwgZnVuY3Rpb24obnVtKSB7IHJldHVybiBudW0gJSAyID09IDA7IH0pO1xuICAgICAqXG4gICAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgICAqIC8vID0+IFsxLCAzLCA1XVxuICAgICAqXG4gICAgICogY29uc29sZS5sb2coZXZlbnMpO1xuICAgICAqIC8vID0+IFsyLCA0LCA2XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZShhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgY2FsbGJhY2sgPSBsb2Rhc2guY3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDMpO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuICAgICAgICBpZiAoY2FsbGJhY2sodmFsdWUsIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgc3BsaWNlLmNhbGwoYXJyYXksIGluZGV4LS0sIDEpO1xuICAgICAgICAgIGxlbmd0aC0tO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBvcHBvc2l0ZSBvZiBgXy5pbml0aWFsYCB0aGlzIG1ldGhvZCBnZXRzIGFsbCBidXQgdGhlIGZpcnN0IGVsZW1lbnQgb3JcbiAgICAgKiBmaXJzdCBgbmAgZWxlbWVudHMgb2YgYW4gYXJyYXkuIElmIGEgY2FsbGJhY2sgZnVuY3Rpb24gaXMgcHJvdmlkZWQgZWxlbWVudHNcbiAgICAgKiBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheSBhcmUgZXhjbHVkZWQgZnJvbSB0aGUgcmVzdWx0IGFzIGxvbmcgYXMgdGhlXG4gICAgICogY2FsbGJhY2sgcmV0dXJucyB0cnVleS4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZFxuICAgICAqIHdpdGggdGhyZWUgYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyBkcm9wLCB0YWlsXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxudW1iZXJ8c3RyaW5nfSBbY2FsbGJhY2s9MV0gVGhlIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAqICBwZXIgZWxlbWVudCBvciB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIGV4Y2x1ZGUuIElmIGEgcHJvcGVydHkgbmFtZSBvclxuICAgICAqICBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiXG4gICAgICogIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5yZXN0KFsxLCAyLCAzXSk7XG4gICAgICogLy8gPT4gWzIsIDNdXG4gICAgICpcbiAgICAgKiBfLnJlc3QoWzEsIDIsIDNdLCAyKTtcbiAgICAgKiAvLyA9PiBbM11cbiAgICAgKlxuICAgICAqIF8ucmVzdChbMSwgMiwgM10sIGZ1bmN0aW9uKG51bSkge1xuICAgICAqICAgcmV0dXJuIG51bSA8IDM7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gWzNdXG4gICAgICpcbiAgICAgKiB2YXIgY2hhcmFjdGVycyA9IFtcbiAgICAgKiAgIHsgJ25hbWUnOiAnYmFybmV5JywgICdibG9ja2VkJzogdHJ1ZSwgICdlbXBsb3llcic6ICdzbGF0ZScgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgICdibG9ja2VkJzogZmFsc2UsICAnZW1wbG95ZXInOiAnc2xhdGUnIH0sXG4gICAgICogICB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYmxvY2tlZCc6IHRydWUsICdlbXBsb3llcic6ICduYScgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBcIl8ucGx1Y2tcIiBjYWxsYmFjayBzaG9ydGhhbmRcbiAgICAgKiBfLnBsdWNrKF8ucmVzdChjaGFyYWN0ZXJzLCAnYmxvY2tlZCcpLCAnbmFtZScpO1xuICAgICAqIC8vID0+IFsnZnJlZCcsICdwZWJibGVzJ11cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy53aGVyZVwiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8ucmVzdChjaGFyYWN0ZXJzLCB7ICdlbXBsb3llcic6ICdzbGF0ZScgfSk7XG4gICAgICogLy8gPT4gW3sgJ25hbWUnOiAncGViYmxlcycsICdibG9ja2VkJzogdHJ1ZSwgJ2VtcGxveWVyJzogJ25hJyB9XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlc3QoYXJyYXksIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9ICdudW1iZXInICYmIGNhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgdmFyIG4gPSAwLFxuICAgICAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcblxuICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoICYmIGNhbGxiYWNrKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgICAgIG4rKztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbiA9IChjYWxsYmFjayA9PSBudWxsIHx8IHRoaXNBcmcpID8gMSA6IG5hdGl2ZU1heCgwLCBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2xpY2UoYXJyYXksIG4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZXMgYSBiaW5hcnkgc2VhcmNoIHRvIGRldGVybWluZSB0aGUgc21hbGxlc3QgaW5kZXggYXQgd2hpY2ggYSB2YWx1ZVxuICAgICAqIHNob3VsZCBiZSBpbnNlcnRlZCBpbnRvIGEgZ2l2ZW4gc29ydGVkIGFycmF5IGluIG9yZGVyIHRvIG1haW50YWluIHRoZSBzb3J0XG4gICAgICogb3JkZXIgb2YgdGhlIGFycmF5LiBJZiBhIGNhbGxiYWNrIGlzIHByb3ZpZGVkIGl0IHdpbGwgYmUgZXhlY3V0ZWQgZm9yXG4gICAgICogYHZhbHVlYCBhbmQgZWFjaCBlbGVtZW50IG9mIGBhcnJheWAgdG8gY29tcHV0ZSB0aGVpciBzb3J0IHJhbmtpbmcuIFRoZVxuICAgICAqIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIG9uZSBhcmd1bWVudDsgKHZhbHVlKS5cbiAgICAgKlxuICAgICAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ucGx1Y2tcIiBzdHlsZVxuICAgICAqIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGNhbGxiYWNrYCB0aGUgY3JlYXRlZCBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFja1xuICAgICAqIHdpbGwgcmV0dXJuIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlbiBvYmplY3QsXG4gICAgICogZWxzZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGV2YWx1YXRlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggYXQgd2hpY2ggYHZhbHVlYCBzaG91bGQgYmUgaW5zZXJ0ZWRcbiAgICAgKiAgaW50byBgYXJyYXlgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnNvcnRlZEluZGV4KFsyMCwgMzAsIDUwXSwgNDApO1xuICAgICAqIC8vID0+IDJcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIFwiXy5wbHVja1wiIGNhbGxiYWNrIHNob3J0aGFuZFxuICAgICAqIF8uc29ydGVkSW5kZXgoW3sgJ3gnOiAyMCB9LCB7ICd4JzogMzAgfSwgeyAneCc6IDUwIH1dLCB7ICd4JzogNDAgfSwgJ3gnKTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiB2YXIgZGljdCA9IHtcbiAgICAgKiAgICd3b3JkVG9OdW1iZXInOiB7ICd0d2VudHknOiAyMCwgJ3RoaXJ0eSc6IDMwLCAnZm91cnR5JzogNDAsICdmaWZ0eSc6IDUwIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5zb3J0ZWRJbmRleChbJ3R3ZW50eScsICd0aGlydHknLCAnZmlmdHknXSwgJ2ZvdXJ0eScsIGZ1bmN0aW9uKHdvcmQpIHtcbiAgICAgKiAgIHJldHVybiBkaWN0LndvcmRUb051bWJlclt3b3JkXTtcbiAgICAgKiB9KTtcbiAgICAgKiAvLyA9PiAyXG4gICAgICpcbiAgICAgKiBfLnNvcnRlZEluZGV4KFsndHdlbnR5JywgJ3RoaXJ0eScsICdmaWZ0eSddLCAnZm91cnR5JywgZnVuY3Rpb24od29yZCkge1xuICAgICAqICAgcmV0dXJuIHRoaXMud29yZFRvTnVtYmVyW3dvcmRdO1xuICAgICAqIH0sIGRpY3QpO1xuICAgICAqIC8vID0+IDJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzb3J0ZWRJbmRleChhcnJheSwgdmFsdWUsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgbG93ID0gMCxcbiAgICAgICAgICBoaWdoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiBsb3c7XG5cbiAgICAgIC8vIGV4cGxpY2l0bHkgcmVmZXJlbmNlIGBpZGVudGl0eWAgZm9yIGJldHRlciBpbmxpbmluZyBpbiBGaXJlZm94XG4gICAgICBjYWxsYmFjayA9IGNhbGxiYWNrID8gbG9kYXNoLmNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrLCB0aGlzQXJnLCAxKSA6IGlkZW50aXR5O1xuICAgICAgdmFsdWUgPSBjYWxsYmFjayh2YWx1ZSk7XG5cbiAgICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgIHZhciBtaWQgPSAobG93ICsgaGlnaCkgPj4+IDE7XG4gICAgICAgIChjYWxsYmFjayhhcnJheVttaWRdKSA8IHZhbHVlKVxuICAgICAgICAgID8gbG93ID0gbWlkICsgMVxuICAgICAgICAgIDogaGlnaCA9IG1pZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsb3c7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB1bmlxdWUgdmFsdWVzLCBpbiBvcmRlciwgb2YgdGhlIHByb3ZpZGVkIGFycmF5cyB1c2luZ1xuICAgICAqIHN0cmljdCBlcXVhbGl0eSBmb3IgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHsuLi5BcnJheX0gW2FycmF5XSBUaGUgYXJyYXlzIHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGFuIGFycmF5IG9mIGNvbWJpbmVkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy51bmlvbihbMSwgMiwgM10sIFs1LCAyLCAxLCA0XSwgWzIsIDFdKTtcbiAgICAgKiAvLyA9PiBbMSwgMiwgMywgNSwgNF1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bmlvbigpIHtcbiAgICAgIHJldHVybiBiYXNlVW5pcShiYXNlRmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZHVwbGljYXRlLXZhbHVlLWZyZWUgdmVyc2lvbiBvZiBhbiBhcnJheSB1c2luZyBzdHJpY3QgZXF1YWxpdHlcbiAgICAgKiBmb3IgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuIElmIHRoZSBhcnJheSBpcyBzb3J0ZWQsIHByb3ZpZGluZ1xuICAgICAqIGB0cnVlYCBmb3IgYGlzU29ydGVkYCB3aWxsIHVzZSBhIGZhc3RlciBhbGdvcml0aG0uIElmIGEgY2FsbGJhY2sgaXMgcHJvdmlkZWRcbiAgICAgKiBlYWNoIGVsZW1lbnQgb2YgYGFycmF5YCBpcyBwYXNzZWQgdGhyb3VnaCB0aGUgY2FsbGJhY2sgYmVmb3JlIHVuaXF1ZW5lc3NcbiAgICAgKiBpcyBjb21wdXRlZC4gVGhlIGNhbGxiYWNrIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZCB3aXRoIHRocmVlXG4gICAgICogYXJndW1lbnRzOyAodmFsdWUsIGluZGV4LCBhcnJheSkuXG4gICAgICpcbiAgICAgKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLnBsdWNrXCIgc3R5bGVcbiAgICAgKiBjYWxsYmFjayB3aWxsIHJldHVybiB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgZm9yIGBjYWxsYmFja2AgdGhlIGNyZWF0ZWQgXCJfLndoZXJlXCIgc3R5bGUgY2FsbGJhY2tcbiAgICAgKiB3aWxsIHJldHVybiBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW4gb2JqZWN0LFxuICAgICAqIGVsc2UgYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyB1bmlxdWVcbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHByb2Nlc3MuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNTb3J0ZWQ9ZmFsc2VdIEEgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IGBhcnJheWAgaXMgc29ydGVkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2NhbGxiYWNrPWlkZW50aXR5XSBUaGUgZnVuY3Rpb24gY2FsbGVkXG4gICAgICogIHBlciBpdGVyYXRpb24uIElmIGEgcHJvcGVydHkgbmFtZSBvciBvYmplY3QgaXMgcHJvdmlkZWQgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogIHRvIGNyZWF0ZSBhIFwiXy5wbHVja1wiIG9yIFwiXy53aGVyZVwiIHN0eWxlIGNhbGxiYWNrLCByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjYWxsYmFja2AuXG4gICAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGEgZHVwbGljYXRlLXZhbHVlLWZyZWUgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8udW5pcShbMSwgMiwgMSwgMywgMV0pO1xuICAgICAqIC8vID0+IFsxLCAyLCAzXVxuICAgICAqXG4gICAgICogXy51bmlxKFsxLCAxLCAyLCAyLCAzXSwgdHJ1ZSk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICpcbiAgICAgKiBfLnVuaXEoWydBJywgJ2InLCAnQycsICdhJywgJ0InLCAnYyddLCBmdW5jdGlvbihsZXR0ZXIpIHsgcmV0dXJuIGxldHRlci50b0xvd2VyQ2FzZSgpOyB9KTtcbiAgICAgKiAvLyA9PiBbJ0EnLCAnYicsICdDJ11cbiAgICAgKlxuICAgICAqIF8udW5pcShbMSwgMi41LCAzLCAxLjUsIDIsIDMuNV0sIGZ1bmN0aW9uKG51bSkgeyByZXR1cm4gdGhpcy5mbG9vcihudW0pOyB9LCBNYXRoKTtcbiAgICAgKiAvLyA9PiBbMSwgMi41LCAzXVxuICAgICAqXG4gICAgICogLy8gdXNpbmcgXCJfLnBsdWNrXCIgY2FsbGJhY2sgc2hvcnRoYW5kXG4gICAgICogXy51bmlxKFt7ICd4JzogMSB9LCB7ICd4JzogMiB9LCB7ICd4JzogMSB9XSwgJ3gnKTtcbiAgICAgKiAvLyA9PiBbeyAneCc6IDEgfSwgeyAneCc6IDIgfV1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bmlxKGFycmF5LCBpc1NvcnRlZCwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIC8vIGp1Z2dsZSBhcmd1bWVudHNcbiAgICAgIGlmICh0eXBlb2YgaXNTb3J0ZWQgIT0gJ2Jvb2xlYW4nICYmIGlzU29ydGVkICE9IG51bGwpIHtcbiAgICAgICAgdGhpc0FyZyA9IGNhbGxiYWNrO1xuICAgICAgICBjYWxsYmFjayA9ICh0eXBlb2YgaXNTb3J0ZWQgIT0gJ2Z1bmN0aW9uJyAmJiB0aGlzQXJnICYmIHRoaXNBcmdbaXNTb3J0ZWRdID09PSBhcnJheSkgPyBudWxsIDogaXNTb3J0ZWQ7XG4gICAgICAgIGlzU29ydGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoY2FsbGJhY2sgIT0gbnVsbCkge1xuICAgICAgICBjYWxsYmFjayA9IGxvZGFzaC5jcmVhdGVDYWxsYmFjayhjYWxsYmFjaywgdGhpc0FyZywgMyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZVVuaXEoYXJyYXksIGlzU29ydGVkLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBleGNsdWRpbmcgYWxsIHByb3ZpZGVkIHZhbHVlcyB1c2luZyBzdHJpY3QgZXF1YWxpdHkgZm9yXG4gICAgICogY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQXJyYXlzXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGZpbHRlci5cbiAgICAgKiBAcGFyYW0gey4uLip9IFt2YWx1ZV0gVGhlIHZhbHVlcyB0byBleGNsdWRlLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ud2l0aG91dChbMSwgMiwgMSwgMCwgMywgMSwgNF0sIDAsIDEpO1xuICAgICAqIC8vID0+IFsyLCAzLCA0XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdpdGhvdXQoYXJyYXkpIHtcbiAgICAgIHJldHVybiBiYXNlRGlmZmVyZW5jZShhcnJheSwgc2xpY2UoYXJndW1lbnRzLCAxKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSB0aGF0IGlzIHRoZSBzeW1tZXRyaWMgZGlmZmVyZW5jZSBvZiB0aGUgcHJvdmlkZWQgYXJyYXlzLlxuICAgICAqIFNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N5bW1ldHJpY19kaWZmZXJlbmNlLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEFycmF5c1xuICAgICAqIEBwYXJhbSB7Li4uQXJyYXl9IFthcnJheV0gVGhlIGFycmF5cyB0byBpbnNwZWN0LlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiB2YWx1ZXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8ueG9yKFsxLCAyLCAzXSwgWzUsIDIsIDEsIDRdKTtcbiAgICAgKiAvLyA9PiBbMywgNSwgNF1cbiAgICAgKlxuICAgICAqIF8ueG9yKFsxLCAyLCA1XSwgWzIsIDMsIDVdLCBbMywgNCwgNV0pO1xuICAgICAqIC8vID0+IFsxLCA0LCA1XVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHhvcigpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBhcnJheSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICAgIGlmIChpc0FycmF5KGFycmF5KSB8fCBpc0FyZ3VtZW50cyhhcnJheSkpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzdWx0XG4gICAgICAgICAgICA/IGJhc2VVbmlxKGJhc2VEaWZmZXJlbmNlKHJlc3VsdCwgYXJyYXkpLmNvbmNhdChiYXNlRGlmZmVyZW5jZShhcnJheSwgcmVzdWx0KSkpXG4gICAgICAgICAgICA6IGFycmF5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0IHx8IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgZ3JvdXBlZCBlbGVtZW50cywgdGhlIGZpcnN0IG9mIHdoaWNoIGNvbnRhaW5zIHRoZSBmaXJzdFxuICAgICAqIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBhcnJheXMsIHRoZSBzZWNvbmQgb2Ygd2hpY2ggY29udGFpbnMgdGhlIHNlY29uZFxuICAgICAqIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBhcnJheXMsIGFuZCBzbyBvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBhbGlhcyB1bnppcFxuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0gey4uLkFycmF5fSBbYXJyYXldIEFycmF5cyB0byBwcm9jZXNzLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBhIG5ldyBhcnJheSBvZiBncm91cGVkIGVsZW1lbnRzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnppcChbJ2ZyZWQnLCAnYmFybmV5J10sIFszMCwgNDBdLCBbdHJ1ZSwgZmFsc2VdKTtcbiAgICAgKiAvLyA9PiBbWydmcmVkJywgMzAsIHRydWVdLCBbJ2Jhcm5leScsIDQwLCBmYWxzZV1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gemlwKCkge1xuICAgICAgdmFyIGFycmF5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHMgOiBhcmd1bWVudHNbMF0sXG4gICAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBhcnJheSA/IG1heChwbHVjayhhcnJheSwgJ2xlbmd0aCcpKSA6IDAsXG4gICAgICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoIDwgMCA/IDAgOiBsZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbaW5kZXhdID0gcGx1Y2soYXJyYXksIGluZGV4KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgZnJvbSBhcnJheXMgb2YgYGtleXNgIGFuZCBgdmFsdWVzYC4gUHJvdmlkZVxuICAgICAqIGVpdGhlciBhIHNpbmdsZSB0d28gZGltZW5zaW9uYWwgYXJyYXksIGkuZS4gYFtba2V5MSwgdmFsdWUxXSwgW2tleTIsIHZhbHVlMl1dYFxuICAgICAqIG9yIHR3byBhcnJheXMsIG9uZSBvZiBga2V5c2AgYW5kIG9uZSBvZiBjb3JyZXNwb25kaW5nIGB2YWx1ZXNgLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIG9iamVjdFxuICAgICAqIEBjYXRlZ29yeSBBcnJheXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBrZXlzIFRoZSBhcnJheSBvZiBrZXlzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IFt2YWx1ZXM9W11dIFRoZSBhcnJheSBvZiB2YWx1ZXMuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBhbiBvYmplY3QgY29tcG9zZWQgb2YgdGhlIGdpdmVuIGtleXMgYW5kXG4gICAgICogIGNvcnJlc3BvbmRpbmcgdmFsdWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnppcE9iamVjdChbJ2ZyZWQnLCAnYmFybmV5J10sIFszMCwgNDBdKTtcbiAgICAgKiAvLyA9PiB7ICdmcmVkJzogMzAsICdiYXJuZXknOiA0MCB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gemlwT2JqZWN0KGtleXMsIHZhbHVlcykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0ga2V5cyA/IGtleXMubGVuZ3RoIDogMCxcbiAgICAgICAgICByZXN1bHQgPSB7fTtcblxuICAgICAgaWYgKCF2YWx1ZXMgJiYgbGVuZ3RoICYmICFpc0FycmF5KGtleXNbMF0pKSB7XG4gICAgICAgIHZhbHVlcyA9IFtdO1xuICAgICAgfVxuICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXNbaW5kZXhdO1xuICAgICAgICBpZiAodmFsdWVzKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZXNbaW5kZXhdO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSkge1xuICAgICAgICAgIHJlc3VsdFtrZXlbMF1dID0ga2V5WzFdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgZXhlY3V0ZXMgYGZ1bmNgLCB3aXRoICB0aGUgYHRoaXNgIGJpbmRpbmcgYW5kXG4gICAgICogYXJndW1lbnRzIG9mIHRoZSBjcmVhdGVkIGZ1bmN0aW9uLCBvbmx5IGFmdGVyIGJlaW5nIGNhbGxlZCBgbmAgdGltZXMuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0aGUgZnVuY3Rpb24gbXVzdCBiZSBjYWxsZWQgYmVmb3JlXG4gICAgICogIGBmdW5jYCBpcyBleGVjdXRlZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyByZXN0cmljdGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgc2F2ZXMgPSBbJ3Byb2ZpbGUnLCAnc2V0dGluZ3MnXTtcbiAgICAgKlxuICAgICAqIHZhciBkb25lID0gXy5hZnRlcihzYXZlcy5sZW5ndGgsIGZ1bmN0aW9uKCkge1xuICAgICAqICAgY29uc29sZS5sb2coJ0RvbmUgc2F2aW5nIScpO1xuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogXy5mb3JFYWNoKHNhdmVzLCBmdW5jdGlvbih0eXBlKSB7XG4gICAgICogICBhc3luY1NhdmUoeyAndHlwZSc6IHR5cGUsICdjb21wbGV0ZSc6IGRvbmUgfSk7XG4gICAgICogfSk7XG4gICAgICogLy8gPT4gbG9ncyAnRG9uZSBzYXZpbmchJywgYWZ0ZXIgYWxsIHNhdmVzIGhhdmUgY29tcGxldGVkXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWZ0ZXIobiwgZnVuYykge1xuICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bmMpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgtLW4gPCAxKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsIGludm9rZXMgYGZ1bmNgIHdpdGggdGhlIGB0aGlzYFxuICAgICAqIGJpbmRpbmcgb2YgYHRoaXNBcmdgIGFuZCBwcmVwZW5kcyBhbnkgYWRkaXRpb25hbCBgYmluZGAgYXJndW1lbnRzIHRvIHRob3NlXG4gICAgICogcHJvdmlkZWQgdG8gdGhlIGJvdW5kIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGJpbmQuXG4gICAgICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmddIEFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBib3VuZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGZ1bmMgPSBmdW5jdGlvbihncmVldGluZykge1xuICAgICAqICAgcmV0dXJuIGdyZWV0aW5nICsgJyAnICsgdGhpcy5uYW1lO1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBmdW5jID0gXy5iaW5kKGZ1bmMsIHsgJ25hbWUnOiAnZnJlZCcgfSwgJ2hpJyk7XG4gICAgICogZnVuYygpO1xuICAgICAqIC8vID0+ICdoaSBmcmVkJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJpbmQoZnVuYywgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAyXG4gICAgICAgID8gY3JlYXRlV3JhcHBlcihmdW5jLCAxNywgc2xpY2UoYXJndW1lbnRzLCAyKSwgbnVsbCwgdGhpc0FyZylcbiAgICAgICAgOiBjcmVhdGVXcmFwcGVyKGZ1bmMsIDEsIG51bGwsIG51bGwsIHRoaXNBcmcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJpbmRzIG1ldGhvZHMgb2YgYW4gb2JqZWN0IHRvIHRoZSBvYmplY3QgaXRzZWxmLCBvdmVyd3JpdGluZyB0aGUgZXhpc3RpbmdcbiAgICAgKiBtZXRob2QuIE1ldGhvZCBuYW1lcyBtYXkgYmUgc3BlY2lmaWVkIGFzIGluZGl2aWR1YWwgYXJndW1lbnRzIG9yIGFzIGFycmF5c1xuICAgICAqIG9mIG1ldGhvZCBuYW1lcy4gSWYgbm8gbWV0aG9kIG5hbWVzIGFyZSBwcm92aWRlZCBhbGwgdGhlIGZ1bmN0aW9uIHByb3BlcnRpZXNcbiAgICAgKiBvZiBgb2JqZWN0YCB3aWxsIGJlIGJvdW5kLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBiaW5kIGFuZCBhc3NpZ24gdGhlIGJvdW5kIG1ldGhvZHMgdG8uXG4gICAgICogQHBhcmFtIHsuLi5zdHJpbmd9IFttZXRob2ROYW1lXSBUaGUgb2JqZWN0IG1ldGhvZCBuYW1lcyB0b1xuICAgICAqICBiaW5kLCBzcGVjaWZpZWQgYXMgaW5kaXZpZHVhbCBtZXRob2QgbmFtZXMgb3IgYXJyYXlzIG9mIG1ldGhvZCBuYW1lcy5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgdmlldyA9IHtcbiAgICAgKiAgICdsYWJlbCc6ICdkb2NzJyxcbiAgICAgKiAgICdvbkNsaWNrJzogZnVuY3Rpb24oKSB7IGNvbnNvbGUubG9nKCdjbGlja2VkICcgKyB0aGlzLmxhYmVsKTsgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLmJpbmRBbGwodmlldyk7XG4gICAgICogalF1ZXJ5KCcjZG9jcycpLm9uKCdjbGljaycsIHZpZXcub25DbGljayk7XG4gICAgICogLy8gPT4gbG9ncyAnY2xpY2tlZCBkb2NzJywgd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBiaW5kQWxsKG9iamVjdCkge1xuICAgICAgdmFyIGZ1bmNzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBiYXNlRmxhdHRlbihhcmd1bWVudHMsIHRydWUsIGZhbHNlLCAxKSA6IGZ1bmN0aW9ucyhvYmplY3QpLFxuICAgICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gZnVuY3MubGVuZ3RoO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gZnVuY3NbaW5kZXhdO1xuICAgICAgICBvYmplY3Rba2V5XSA9IGNyZWF0ZVdyYXBwZXIob2JqZWN0W2tleV0sIDEsIG51bGwsIG51bGwsIG9iamVjdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwgaW52b2tlcyB0aGUgbWV0aG9kIGF0IGBvYmplY3Rba2V5XWBcbiAgICAgKiBhbmQgcHJlcGVuZHMgYW55IGFkZGl0aW9uYWwgYGJpbmRLZXlgIGFyZ3VtZW50cyB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgYm91bmRcbiAgICAgKiBmdW5jdGlvbi4gVGhpcyBtZXRob2QgZGlmZmVycyBmcm9tIGBfLmJpbmRgIGJ5IGFsbG93aW5nIGJvdW5kIGZ1bmN0aW9ucyB0b1xuICAgICAqIHJlZmVyZW5jZSBtZXRob2RzIHRoYXQgd2lsbCBiZSByZWRlZmluZWQgb3IgZG9uJ3QgeWV0IGV4aXN0LlxuICAgICAqIFNlZSBodHRwOi8vbWljaGF1eC5jYS9hcnRpY2xlcy9sYXp5LWZ1bmN0aW9uLWRlZmluaXRpb24tcGF0dGVybi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdGhlIG1ldGhvZCBiZWxvbmdzIHRvLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ10gQXJndW1lbnRzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJvdW5kIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0ge1xuICAgICAqICAgJ25hbWUnOiAnZnJlZCcsXG4gICAgICogICAnZ3JlZXQnOiBmdW5jdGlvbihncmVldGluZykge1xuICAgICAqICAgICByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyB0aGlzLm5hbWU7XG4gICAgICogICB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBmdW5jID0gXy5iaW5kS2V5KG9iamVjdCwgJ2dyZWV0JywgJ2hpJyk7XG4gICAgICogZnVuYygpO1xuICAgICAqIC8vID0+ICdoaSBmcmVkJ1xuICAgICAqXG4gICAgICogb2JqZWN0LmdyZWV0ID0gZnVuY3Rpb24oZ3JlZXRpbmcpIHtcbiAgICAgKiAgIHJldHVybiBncmVldGluZyArICd5YSAnICsgdGhpcy5uYW1lICsgJyEnO1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBmdW5jKCk7XG4gICAgICogLy8gPT4gJ2hpeWEgZnJlZCEnXG4gICAgICovXG4gICAgZnVuY3Rpb24gYmluZEtleShvYmplY3QsIGtleSkge1xuICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAyXG4gICAgICAgID8gY3JlYXRlV3JhcHBlcihrZXksIDE5LCBzbGljZShhcmd1bWVudHMsIDIpLCBudWxsLCBvYmplY3QpXG4gICAgICAgIDogY3JlYXRlV3JhcHBlcihrZXksIDMsIG51bGwsIG51bGwsIG9iamVjdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaXMgdGhlIGNvbXBvc2l0aW9uIG9mIHRoZSBwcm92aWRlZCBmdW5jdGlvbnMsXG4gICAgICogd2hlcmUgZWFjaCBmdW5jdGlvbiBjb25zdW1lcyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuXG4gICAgICogRm9yIGV4YW1wbGUsIGNvbXBvc2luZyB0aGUgZnVuY3Rpb25zIGBmKClgLCBgZygpYCwgYW5kIGBoKClgIHByb2R1Y2VzIGBmKGcoaCgpKSlgLlxuICAgICAqIEVhY2ggZnVuY3Rpb24gaXMgZXhlY3V0ZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIGNvbXBvc2VkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IFtmdW5jXSBGdW5jdGlvbnMgdG8gY29tcG9zZS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBjb21wb3NlZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHJlYWxOYW1lTWFwID0ge1xuICAgICAqICAgJ3BlYmJsZXMnOiAncGVuZWxvcGUnXG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBmb3JtYXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICogICBuYW1lID0gcmVhbE5hbWVNYXBbbmFtZS50b0xvd2VyQ2FzZSgpXSB8fCBuYW1lO1xuICAgICAqICAgcmV0dXJuIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciBncmVldCA9IGZ1bmN0aW9uKGZvcm1hdHRlZCkge1xuICAgICAqICAgcmV0dXJuICdIaXlhICcgKyBmb3JtYXR0ZWQgKyAnISc7XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIHZhciB3ZWxjb21lID0gXy5jb21wb3NlKGdyZWV0LCBmb3JtYXQpO1xuICAgICAqIHdlbGNvbWUoJ3BlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiAnSGl5YSBQZW5lbG9wZSEnXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcG9zZSgpIHtcbiAgICAgIHZhciBmdW5jcyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICBsZW5ndGggPSBmdW5jcy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuY3NbbGVuZ3RoXSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgICAgbGVuZ3RoID0gZnVuY3MubGVuZ3RoO1xuXG4gICAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICAgIGFyZ3MgPSBbZnVuY3NbbGVuZ3RoXS5hcHBseSh0aGlzLCBhcmdzKV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyZ3NbMF07XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB3aGljaCBhY2NlcHRzIG9uZSBvciBtb3JlIGFyZ3VtZW50cyBvZiBgZnVuY2AgdGhhdCB3aGVuXG4gICAgICogaW52b2tlZCBlaXRoZXIgZXhlY3V0ZXMgYGZ1bmNgIHJldHVybmluZyBpdHMgcmVzdWx0LCBpZiBhbGwgYGZ1bmNgIGFyZ3VtZW50c1xuICAgICAqIGhhdmUgYmVlbiBwcm92aWRlZCwgb3IgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyBvbmUgb3IgbW9yZSBvZiB0aGVcbiAgICAgKiByZW1haW5pbmcgYGZ1bmNgIGFyZ3VtZW50cywgYW5kIHNvIG9uLiBUaGUgYXJpdHkgb2YgYGZ1bmNgIGNhbiBiZSBzcGVjaWZpZWRcbiAgICAgKiBpZiBgZnVuYy5sZW5ndGhgIGlzIG5vdCBzdWZmaWNpZW50LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGN1cnJ5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYXJpdHk9ZnVuYy5sZW5ndGhdIFRoZSBhcml0eSBvZiBgZnVuY2AuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY3VycmllZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGN1cnJpZWQgPSBfLmN1cnJ5KGZ1bmN0aW9uKGEsIGIsIGMpIHtcbiAgICAgKiAgIGNvbnNvbGUubG9nKGEgKyBiICsgYyk7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBjdXJyaWVkKDEpKDIpKDMpO1xuICAgICAqIC8vID0+IDZcbiAgICAgKlxuICAgICAqIGN1cnJpZWQoMSwgMikoMyk7XG4gICAgICogLy8gPT4gNlxuICAgICAqXG4gICAgICogY3VycmllZCgxLCAyLCAzKTtcbiAgICAgKiAvLyA9PiA2XG4gICAgICovXG4gICAgZnVuY3Rpb24gY3VycnkoZnVuYywgYXJpdHkpIHtcbiAgICAgIGFyaXR5ID0gdHlwZW9mIGFyaXR5ID09ICdudW1iZXInID8gYXJpdHkgOiAoK2FyaXR5IHx8IGZ1bmMubGVuZ3RoKTtcbiAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsIDQsIG51bGwsIG51bGwsIG51bGwsIGFyaXR5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGRlbGF5IHRoZSBleGVjdXRpb24gb2YgYGZ1bmNgIHVudGlsIGFmdGVyXG4gICAgICogYHdhaXRgIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSBpdCB3YXMgaW52b2tlZC5cbiAgICAgKiBQcm92aWRlIGFuIG9wdGlvbnMgb2JqZWN0IHRvIGluZGljYXRlIHRoYXQgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uXG4gICAgICogdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBTdWJzZXF1ZW50IGNhbGxzXG4gICAgICogdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBjYWxsLlxuICAgICAqXG4gICAgICogTm90ZTogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCBgZnVuY2Agd2lsbCBiZSBjYWxsZWRcbiAgICAgKiBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIGlzXG4gICAgICogaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0IFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV0gU3BlY2lmeSBleGVjdXRpb24gb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF0gVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGNhbGxlZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdIFNwZWNpZnkgZXhlY3V0aW9uIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogLy8gYXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eFxuICAgICAqIHZhciBsYXp5TGF5b3V0ID0gXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCk7XG4gICAgICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIGxhenlMYXlvdXQpO1xuICAgICAqXG4gICAgICogLy8gZXhlY3V0ZSBgc2VuZE1haWxgIHdoZW4gdGhlIGNsaWNrIGV2ZW50IGlzIGZpcmVkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHNcbiAgICAgKiBqUXVlcnkoJyNwb3N0Ym94Jykub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gICAgICogICAnbGVhZGluZyc6IHRydWUsXG4gICAgICogICAndHJhaWxpbmcnOiBmYWxzZVxuICAgICAqIH0pO1xuICAgICAqXG4gICAgICogLy8gZW5zdXJlIGBiYXRjaExvZ2AgaXMgZXhlY3V0ZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHNcbiAgICAgKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG4gICAgICogc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHtcbiAgICAgKiAgICdtYXhXYWl0JzogMTAwMFxuICAgICAqIH0sIGZhbHNlKTtcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgICB2YXIgYXJncyxcbiAgICAgICAgICBtYXhUaW1lb3V0SWQsXG4gICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgIHN0YW1wLFxuICAgICAgICAgIHRoaXNBcmcsXG4gICAgICAgICAgdGltZW91dElkLFxuICAgICAgICAgIHRyYWlsaW5nQ2FsbCxcbiAgICAgICAgICBsYXN0Q2FsbGVkID0gMCxcbiAgICAgICAgICBtYXhXYWl0ID0gZmFsc2UsXG4gICAgICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuYykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcjtcbiAgICAgIH1cbiAgICAgIHdhaXQgPSBuYXRpdmVNYXgoMCwgd2FpdCkgfHwgMDtcbiAgICAgIGlmIChvcHRpb25zID09PSB0cnVlKSB7XG4gICAgICAgIHZhciBsZWFkaW5nID0gdHJ1ZTtcbiAgICAgICAgdHJhaWxpbmcgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICAgICAgbGVhZGluZyA9IG9wdGlvbnMubGVhZGluZztcbiAgICAgICAgbWF4V2FpdCA9ICdtYXhXYWl0JyBpbiBvcHRpb25zICYmIChuYXRpdmVNYXgod2FpdCwgb3B0aW9ucy5tYXhXYWl0KSB8fCAwKTtcbiAgICAgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyBvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gICAgICB9XG4gICAgICB2YXIgZGVsYXllZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3coKSAtIHN0YW1wKTtcbiAgICAgICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgICAgaWYgKG1heFRpbWVvdXRJZCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG1heFRpbWVvdXRJZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBpc0NhbGxlZCA9IHRyYWlsaW5nQ2FsbDtcbiAgICAgICAgICBtYXhUaW1lb3V0SWQgPSB0aW1lb3V0SWQgPSB0cmFpbGluZ0NhbGwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKGlzQ2FsbGVkKSB7XG4gICAgICAgICAgICBsYXN0Q2FsbGVkID0gbm93KCk7XG4gICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKCF0aW1lb3V0SWQgJiYgIW1heFRpbWVvdXRJZCkge1xuICAgICAgICAgICAgICBhcmdzID0gdGhpc0FyZyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZGVsYXllZCwgcmVtYWluaW5nKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIG1heERlbGF5ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICB9XG4gICAgICAgIG1heFRpbWVvdXRJZCA9IHRpbWVvdXRJZCA9IHRyYWlsaW5nQ2FsbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRyYWlsaW5nIHx8IChtYXhXYWl0ICE9PSB3YWl0KSkge1xuICAgICAgICAgIGxhc3RDYWxsZWQgPSBub3coKTtcbiAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgICAgICAgIGlmICghdGltZW91dElkICYmICFtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgICAgIGFyZ3MgPSB0aGlzQXJnID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgc3RhbXAgPSBub3coKTtcbiAgICAgICAgdGhpc0FyZyA9IHRoaXM7XG4gICAgICAgIHRyYWlsaW5nQ2FsbCA9IHRyYWlsaW5nICYmICh0aW1lb3V0SWQgfHwgIWxlYWRpbmcpO1xuXG4gICAgICAgIGlmIChtYXhXYWl0ID09PSBmYWxzZSkge1xuICAgICAgICAgIHZhciBsZWFkaW5nQ2FsbCA9IGxlYWRpbmcgJiYgIXRpbWVvdXRJZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIW1heFRpbWVvdXRJZCAmJiAhbGVhZGluZykge1xuICAgICAgICAgICAgbGFzdENhbGxlZCA9IHN0YW1wO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgcmVtYWluaW5nID0gbWF4V2FpdCAtIChzdGFtcCAtIGxhc3RDYWxsZWQpLFxuICAgICAgICAgICAgICBpc0NhbGxlZCA9IHJlbWFpbmluZyA8PSAwO1xuXG4gICAgICAgICAgaWYgKGlzQ2FsbGVkKSB7XG4gICAgICAgICAgICBpZiAobWF4VGltZW91dElkKSB7XG4gICAgICAgICAgICAgIG1heFRpbWVvdXRJZCA9IGNsZWFyVGltZW91dChtYXhUaW1lb3V0SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdENhbGxlZCA9IHN0YW1wO1xuICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoIW1heFRpbWVvdXRJZCkge1xuICAgICAgICAgICAgbWF4VGltZW91dElkID0gc2V0VGltZW91dChtYXhEZWxheWVkLCByZW1haW5pbmcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNDYWxsZWQgJiYgdGltZW91dElkKSB7XG4gICAgICAgICAgdGltZW91dElkID0gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRpbWVvdXRJZCAmJiB3YWl0ICE9PSBtYXhXYWl0KSB7XG4gICAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dChkZWxheWVkLCB3YWl0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVhZGluZ0NhbGwpIHtcbiAgICAgICAgICBpc0NhbGxlZCA9IHRydWU7XG4gICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNDYWxsZWQgJiYgIXRpbWVvdXRJZCAmJiAhbWF4VGltZW91dElkKSB7XG4gICAgICAgICAgYXJncyA9IHRoaXNBcmcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlZmVycyBleGVjdXRpbmcgdGhlIGBmdW5jYCBmdW5jdGlvbiB1bnRpbCB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhcyBjbGVhcmVkLlxuICAgICAqIEFkZGl0aW9uYWwgYXJndW1lbnRzIHdpbGwgYmUgcHJvdmlkZWQgdG8gYGZ1bmNgIHdoZW4gaXQgaXMgaW52b2tlZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWZlci5cbiAgICAgKiBAcGFyYW0gey4uLip9IFthcmddIEFyZ3VtZW50cyB0byBpbnZva2UgdGhlIGZ1bmN0aW9uIHdpdGguXG4gICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8uZGVmZXIoZnVuY3Rpb24odGV4dCkgeyBjb25zb2xlLmxvZyh0ZXh0KTsgfSwgJ2RlZmVycmVkJyk7XG4gICAgICogLy8gbG9ncyAnZGVmZXJyZWQnIGFmdGVyIG9uZSBvciBtb3JlIG1pbGxpc2Vjb25kc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRlZmVyKGZ1bmMpIHtcbiAgICAgIGlmICghaXNGdW5jdGlvbihmdW5jKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xuICAgICAgfVxuICAgICAgdmFyIGFyZ3MgPSBzbGljZShhcmd1bWVudHMsIDEpO1xuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTsgfSwgMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIGBmdW5jYCBmdW5jdGlvbiBhZnRlciBgd2FpdGAgbWlsbGlzZWNvbmRzLiBBZGRpdGlvbmFsIGFyZ3VtZW50c1xuICAgICAqIHdpbGwgYmUgcHJvdmlkZWQgdG8gYGZ1bmNgIHdoZW4gaXQgaXMgaW52b2tlZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWxheS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2FpdCBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheSBleGVjdXRpb24uXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnXSBBcmd1bWVudHMgdG8gaW52b2tlIHRoZSBmdW5jdGlvbiB3aXRoLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVyIGlkLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmRlbGF5KGZ1bmN0aW9uKHRleHQpIHsgY29uc29sZS5sb2codGV4dCk7IH0sIDEwMDAsICdsYXRlcicpO1xuICAgICAqIC8vID0+IGxvZ3MgJ2xhdGVyJyBhZnRlciBvbmUgc2Vjb25kXG4gICAgICovXG4gICAgZnVuY3Rpb24gZGVsYXkoZnVuYywgd2FpdCkge1xuICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bmMpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XG4gICAgICB9XG4gICAgICB2YXIgYXJncyA9IHNsaWNlKGFyZ3VtZW50cywgMik7XG4gICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsgZnVuYy5hcHBseSh1bmRlZmluZWQsIGFyZ3MpOyB9LCB3YWl0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBtZW1vaXplcyB0aGUgcmVzdWx0IG9mIGBmdW5jYC4gSWYgYHJlc29sdmVyYCBpc1xuICAgICAqIHByb3ZpZGVkIGl0IHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIGNhY2hlIGtleSBmb3Igc3RvcmluZyB0aGUgcmVzdWx0XG4gICAgICogYmFzZWQgb24gdGhlIGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uIEJ5IGRlZmF1bHQsIHRoZVxuICAgICAqIGZpcnN0IGFyZ3VtZW50IHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbiBpcyB1c2VkIGFzIHRoZSBjYWNoZSBrZXkuXG4gICAgICogVGhlIGBmdW5jYCBpcyBleGVjdXRlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uXG4gICAgICogVGhlIHJlc3VsdCBjYWNoZSBpcyBleHBvc2VkIGFzIHRoZSBgY2FjaGVgIHByb3BlcnR5IG9uIHRoZSBtZW1vaXplZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvbnNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBoYXZlIGl0cyBvdXRwdXQgbWVtb2l6ZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Jlc29sdmVyXSBBIGZ1bmN0aW9uIHVzZWQgdG8gcmVzb2x2ZSB0aGUgY2FjaGUga2V5LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IG1lbW9pemluZyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGZpYm9uYWNjaSA9IF8ubWVtb2l6ZShmdW5jdGlvbihuKSB7XG4gICAgICogICByZXR1cm4gbiA8IDIgPyBuIDogZmlib25hY2NpKG4gLSAxKSArIGZpYm9uYWNjaShuIC0gMik7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBmaWJvbmFjY2koOSlcbiAgICAgKiAvLyA9PiAzNFxuICAgICAqXG4gICAgICogdmFyIGRhdGEgPSB7XG4gICAgICogICAnZnJlZCc6IHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiA0MCB9LFxuICAgICAqICAgJ3BlYmJsZXMnOiB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYWdlJzogMSB9XG4gICAgICogfTtcbiAgICAgKlxuICAgICAqIC8vIG1vZGlmeWluZyB0aGUgcmVzdWx0IGNhY2hlXG4gICAgICogdmFyIGdldCA9IF8ubWVtb2l6ZShmdW5jdGlvbihuYW1lKSB7IHJldHVybiBkYXRhW25hbWVdOyB9LCBfLmlkZW50aXR5KTtcbiAgICAgKiBnZXQoJ3BlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ3BlYmJsZXMnLCAnYWdlJzogMSB9XG4gICAgICpcbiAgICAgKiBnZXQuY2FjaGUucGViYmxlcy5uYW1lID0gJ3BlbmVsb3BlJztcbiAgICAgKiBnZXQoJ3BlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ3BlbmVsb3BlJywgJ2FnZSc6IDEgfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1lbW9pemUoZnVuYywgcmVzb2x2ZXIpIHtcbiAgICAgIGlmICghaXNGdW5jdGlvbihmdW5jKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yO1xuICAgICAgfVxuICAgICAgdmFyIG1lbW9pemVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjYWNoZSA9IG1lbW9pemVkLmNhY2hlLFxuICAgICAgICAgICAga2V5ID0gcmVzb2x2ZXIgPyByZXNvbHZlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDoga2V5UHJlZml4ICsgYXJndW1lbnRzWzBdO1xuXG4gICAgICAgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGNhY2hlLCBrZXkpXG4gICAgICAgICAgPyBjYWNoZVtrZXldXG4gICAgICAgICAgOiAoY2FjaGVba2V5XSA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgICB9XG4gICAgICBtZW1vaXplZC5jYWNoZSA9IHt9O1xuICAgICAgcmV0dXJuIG1lbW9pemVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGlzIHJlc3RyaWN0ZWQgdG8gZXhlY3V0ZSBgZnVuY2Agb25jZS4gUmVwZWF0IGNhbGxzIHRvXG4gICAgICogdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgY2FsbC4gVGhlIGBmdW5jYCBpcyBleGVjdXRlZFxuICAgICAqIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBjcmVhdGVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHJlc3RyaWN0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHJlc3RyaWN0ZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBpbml0aWFsaXplID0gXy5vbmNlKGNyZWF0ZUFwcGxpY2F0aW9uKTtcbiAgICAgKiBpbml0aWFsaXplKCk7XG4gICAgICogaW5pdGlhbGl6ZSgpO1xuICAgICAqIC8vIGBpbml0aWFsaXplYCBleGVjdXRlcyBgY3JlYXRlQXBwbGljYXRpb25gIG9uY2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbmNlKGZ1bmMpIHtcbiAgICAgIHZhciByYW4sXG4gICAgICAgICAgcmVzdWx0O1xuXG4gICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuYykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHJhbikge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmFuID0gdHJ1ZTtcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgICAgIC8vIGNsZWFyIHRoZSBgZnVuY2AgdmFyaWFibGUgc28gdGhlIGZ1bmN0aW9uIG1heSBiZSBnYXJiYWdlIGNvbGxlY3RlZFxuICAgICAgICBmdW5jID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLCBpbnZva2VzIGBmdW5jYCB3aXRoIGFueSBhZGRpdGlvbmFsXG4gICAgICogYHBhcnRpYWxgIGFyZ3VtZW50cyBwcmVwZW5kZWQgdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi4gVGhpc1xuICAgICAqIG1ldGhvZCBpcyBzaW1pbGFyIHRvIGBfLmJpbmRgIGV4Y2VwdCBpdCBkb2VzICoqbm90KiogYWx0ZXIgdGhlIGB0aGlzYCBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHBhcnRpYWxseSBhcHBseSBhcmd1bWVudHMgdG8uXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnXSBBcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcGFydGlhbGx5IGFwcGxpZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBncmVldCA9IGZ1bmN0aW9uKGdyZWV0aW5nLCBuYW1lKSB7IHJldHVybiBncmVldGluZyArICcgJyArIG5hbWU7IH07XG4gICAgICogdmFyIGhpID0gXy5wYXJ0aWFsKGdyZWV0LCAnaGknKTtcbiAgICAgKiBoaSgnZnJlZCcpO1xuICAgICAqIC8vID0+ICdoaSBmcmVkJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBhcnRpYWwoZnVuYykge1xuICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIoZnVuYywgMTYsIHNsaWNlKGFyZ3VtZW50cywgMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8ucGFydGlhbGAgZXhjZXB0IHRoYXQgYHBhcnRpYWxgIGFyZ3VtZW50cyBhcmVcbiAgICAgKiBhcHBlbmRlZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHBhcnRpYWxseSBhcHBseSBhcmd1bWVudHMgdG8uXG4gICAgICogQHBhcmFtIHsuLi4qfSBbYXJnXSBBcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcGFydGlhbGx5IGFwcGxpZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBkZWZhdWx0c0RlZXAgPSBfLnBhcnRpYWxSaWdodChfLm1lcmdlLCBfLmRlZmF1bHRzKTtcbiAgICAgKlxuICAgICAqIHZhciBvcHRpb25zID0ge1xuICAgICAqICAgJ3ZhcmlhYmxlJzogJ2RhdGEnLFxuICAgICAqICAgJ2ltcG9ydHMnOiB7ICdqcSc6ICQgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBkZWZhdWx0c0RlZXAob3B0aW9ucywgXy50ZW1wbGF0ZVNldHRpbmdzKTtcbiAgICAgKlxuICAgICAqIG9wdGlvbnMudmFyaWFibGVcbiAgICAgKiAvLyA9PiAnZGF0YSdcbiAgICAgKlxuICAgICAqIG9wdGlvbnMuaW1wb3J0c1xuICAgICAqIC8vID0+IHsgJ18nOiBfLCAnanEnOiAkIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwYXJ0aWFsUmlnaHQoZnVuYykge1xuICAgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIoZnVuYywgMzIsIG51bGwsIHNsaWNlKGFyZ3VtZW50cywgMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGV4ZWN1dGVkLCB3aWxsIG9ubHkgY2FsbCB0aGUgYGZ1bmNgIGZ1bmN0aW9uXG4gICAgICogYXQgbW9zdCBvbmNlIHBlciBldmVyeSBgd2FpdGAgbWlsbGlzZWNvbmRzLiBQcm92aWRlIGFuIG9wdGlvbnMgb2JqZWN0IHRvXG4gICAgICogaW5kaWNhdGUgdGhhdCBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2VcbiAgICAgKiBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFN1YnNlcXVlbnQgY2FsbHMgdG8gdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsXG4gICAgICogcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgIGNhbGwuXG4gICAgICpcbiAgICAgKiBOb3RlOiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgIGBmdW5jYCB3aWxsIGJlIGNhbGxlZFxuICAgICAqIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gaXNcbiAgICAgKiBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gdGhyb3R0bGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdhaXQgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gdGhyb3R0bGUgZXhlY3V0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBvcHRpb25zIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9dHJ1ZV0gU3BlY2lmeSBleGVjdXRpb24gb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdIFNwZWNpZnkgZXhlY3V0aW9uIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHRocm90dGxlZCBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogLy8gYXZvaWQgZXhjZXNzaXZlbHkgdXBkYXRpbmcgdGhlIHBvc2l0aW9uIHdoaWxlIHNjcm9sbGluZ1xuICAgICAqIHZhciB0aHJvdHRsZWQgPSBfLnRocm90dGxlKHVwZGF0ZVBvc2l0aW9uLCAxMDApO1xuICAgICAqIGpRdWVyeSh3aW5kb3cpLm9uKCdzY3JvbGwnLCB0aHJvdHRsZWQpO1xuICAgICAqXG4gICAgICogLy8gZXhlY3V0ZSBgcmVuZXdUb2tlbmAgd2hlbiB0aGUgY2xpY2sgZXZlbnQgaXMgZmlyZWQsIGJ1dCBub3QgbW9yZSB0aGFuIG9uY2UgZXZlcnkgNSBtaW51dGVzXG4gICAgICogalF1ZXJ5KCcuaW50ZXJhY3RpdmUnKS5vbignY2xpY2snLCBfLnRocm90dGxlKHJlbmV3VG9rZW4sIDMwMDAwMCwge1xuICAgICAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAgICAgKiB9KSk7XG4gICAgICovXG4gICAgZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICAgICAgdmFyIGxlYWRpbmcgPSB0cnVlLFxuICAgICAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bmMpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3I7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucyA9PT0gZmFsc2UpIHtcbiAgICAgICAgbGVhZGluZyA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgICAgICBsZWFkaW5nID0gJ2xlYWRpbmcnIGluIG9wdGlvbnMgPyBvcHRpb25zLmxlYWRpbmcgOiBsZWFkaW5nO1xuICAgICAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/IG9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgICAgIH1cbiAgICAgIGRlYm91bmNlT3B0aW9ucy5sZWFkaW5nID0gbGVhZGluZztcbiAgICAgIGRlYm91bmNlT3B0aW9ucy5tYXhXYWl0ID0gd2FpdDtcbiAgICAgIGRlYm91bmNlT3B0aW9ucy50cmFpbGluZyA9IHRyYWlsaW5nO1xuXG4gICAgICByZXR1cm4gZGVib3VuY2UoZnVuYywgd2FpdCwgZGVib3VuY2VPcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBwcm92aWRlcyBgdmFsdWVgIHRvIHRoZSB3cmFwcGVyIGZ1bmN0aW9uIGFzIGl0c1xuICAgICAqIGZpcnN0IGFyZ3VtZW50LiBBZGRpdGlvbmFsIGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZnVuY3Rpb24gYXJlIGFwcGVuZGVkXG4gICAgICogdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIHdyYXBwZXIgZnVuY3Rpb24uIFRoZSB3cmFwcGVyIGlzIGV4ZWN1dGVkIHdpdGhcbiAgICAgKiB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB3cmFwcGVyIFRoZSB3cmFwcGVyIGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgcCA9IF8ud3JhcChfLmVzY2FwZSwgZnVuY3Rpb24oZnVuYywgdGV4dCkge1xuICAgICAqICAgcmV0dXJuICc8cD4nICsgZnVuYyh0ZXh0KSArICc8L3A+JztcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIHAoJ0ZyZWQsIFdpbG1hLCAmIFBlYmJsZXMnKTtcbiAgICAgKiAvLyA9PiAnPHA+RnJlZCwgV2lsbWEsICZhbXA7IFBlYmJsZXM8L3A+J1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXAodmFsdWUsIHdyYXBwZXIpIHtcbiAgICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKHdyYXBwZXIsIDE2LCBbdmFsdWVdKTtcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYHZhbHVlYC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byByZXR1cm4gZnJvbSB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgb2JqZWN0ID0geyAnbmFtZSc6ICdmcmVkJyB9O1xuICAgICAqIHZhciBnZXR0ZXIgPSBfLmNvbnN0YW50KG9iamVjdCk7XG4gICAgICogZ2V0dGVyKCkgPT09IG9iamVjdDtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29uc3RhbnQodmFsdWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9kdWNlcyBhIGNhbGxiYWNrIGJvdW5kIHRvIGFuIG9wdGlvbmFsIGB0aGlzQXJnYC4gSWYgYGZ1bmNgIGlzIGEgcHJvcGVydHlcbiAgICAgKiBuYW1lIHRoZSBjcmVhdGVkIGNhbGxiYWNrIHdpbGwgcmV0dXJuIHRoZSBwcm9wZXJ0eSB2YWx1ZSBmb3IgYSBnaXZlbiBlbGVtZW50LlxuICAgICAqIElmIGBmdW5jYCBpcyBhbiBvYmplY3QgdGhlIGNyZWF0ZWQgY2FsbGJhY2sgd2lsbCByZXR1cm4gYHRydWVgIGZvciBlbGVtZW50c1xuICAgICAqIHRoYXQgY29udGFpbiB0aGUgZXF1aXZhbGVudCBvYmplY3QgcHJvcGVydGllcywgb3RoZXJ3aXNlIGl0IHdpbGwgcmV0dXJuIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHBhcmFtIHsqfSBbZnVuYz1pZGVudGl0eV0gVGhlIHZhbHVlIHRvIGNvbnZlcnQgdG8gYSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIGNyZWF0ZWQgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFthcmdDb3VudF0gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgdGhlIGNhbGxiYWNrIGFjY2VwdHMuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIGEgY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gd3JhcCB0byBjcmVhdGUgY3VzdG9tIGNhbGxiYWNrIHNob3J0aGFuZHNcbiAgICAgKiBfLmNyZWF0ZUNhbGxiYWNrID0gXy53cmFwKF8uY3JlYXRlQ2FsbGJhY2ssIGZ1bmN0aW9uKGZ1bmMsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XG4gICAgICogICB2YXIgbWF0Y2ggPSAvXiguKz8pX18oW2dsXXQpKC4rKSQvLmV4ZWMoY2FsbGJhY2spO1xuICAgICAqICAgcmV0dXJuICFtYXRjaCA/IGZ1bmMoY2FsbGJhY2ssIHRoaXNBcmcpIDogZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICogICAgIHJldHVybiBtYXRjaFsyXSA9PSAnZ3QnID8gb2JqZWN0W21hdGNoWzFdXSA+IG1hdGNoWzNdIDogb2JqZWN0W21hdGNoWzFdXSA8IG1hdGNoWzNdO1xuICAgICAqICAgfTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIF8uZmlsdGVyKGNoYXJhY3RlcnMsICdhZ2VfX2d0MzgnKTtcbiAgICAgKiAvLyA9PiBbeyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2FsbGJhY2soZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcbiAgICAgIHZhciB0eXBlID0gdHlwZW9mIGZ1bmM7XG4gICAgICBpZiAoZnVuYyA9PSBudWxsIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gYmFzZUNyZWF0ZUNhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KTtcbiAgICAgIH1cbiAgICAgIC8vIGhhbmRsZSBcIl8ucGx1Y2tcIiBzdHlsZSBjYWxsYmFjayBzaG9ydGhhbmRzXG4gICAgICBpZiAodHlwZSAhPSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gcHJvcGVydHkoZnVuYyk7XG4gICAgICB9XG4gICAgICB2YXIgcHJvcHMgPSBrZXlzKGZ1bmMpLFxuICAgICAgICAgIGtleSA9IHByb3BzWzBdLFxuICAgICAgICAgIGEgPSBmdW5jW2tleV07XG5cbiAgICAgIC8vIGhhbmRsZSBcIl8ud2hlcmVcIiBzdHlsZSBjYWxsYmFjayBzaG9ydGhhbmRzXG4gICAgICBpZiAocHJvcHMubGVuZ3RoID09IDEgJiYgYSA9PT0gYSAmJiAhaXNPYmplY3QoYSkpIHtcbiAgICAgICAgLy8gZmFzdCBwYXRoIHRoZSBjb21tb24gY2FzZSBvZiBwcm92aWRpbmcgYW4gb2JqZWN0IHdpdGggYSBzaW5nbGVcbiAgICAgICAgLy8gcHJvcGVydHkgY29udGFpbmluZyBhIHByaW1pdGl2ZSB2YWx1ZVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgICAgdmFyIGIgPSBvYmplY3Rba2V5XTtcbiAgICAgICAgICByZXR1cm4gYSA9PT0gYiAmJiAoYSAhPT0gMCB8fCAoMSAvIGEgPT0gMSAvIGIpKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXG4gICAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICAgIGlmICghKHJlc3VsdCA9IGJhc2VJc0VxdWFsKG9iamVjdFtwcm9wc1tsZW5ndGhdXSwgZnVuY1twcm9wc1tsZW5ndGhdXSwgbnVsbCwgdHJ1ZSkpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGNoYXJhY3RlcnMgYCZgLCBgPGAsIGA+YCwgYFwiYCwgYW5kIGAnYCBpbiBgc3RyaW5nYCB0byB0aGVpclxuICAgICAqIGNvcnJlc3BvbmRpbmcgSFRNTCBlbnRpdGllcy5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLmVzY2FwZSgnRnJlZCwgV2lsbWEsICYgUGViYmxlcycpO1xuICAgICAqIC8vID0+ICdGcmVkLCBXaWxtYSwgJmFtcDsgUGViYmxlcydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlc2NhcGUoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nID09IG51bGwgPyAnJyA6IFN0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVVbmVzY2FwZWRIdG1sLCBlc2NhcGVIdG1sQ2hhcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgcHJvdmlkZWQgdG8gaXQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBBbnkgdmFsdWUuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ25hbWUnOiAnZnJlZCcgfTtcbiAgICAgKiBfLmlkZW50aXR5KG9iamVjdCkgPT09IG9iamVjdDtcbiAgICAgKiAvLyA9PiB0cnVlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaWRlbnRpdHkodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGZ1bmN0aW9uIHByb3BlcnRpZXMgb2YgYSBzb3VyY2Ugb2JqZWN0IHRvIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogSWYgYG9iamVjdGAgaXMgYSBmdW5jdGlvbiBtZXRob2RzIHdpbGwgYmUgYWRkZWQgdG8gaXRzIHByb3RvdHlwZSBhcyB3ZWxsLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fSBbb2JqZWN0PWxvZGFzaF0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIGZ1bmN0aW9ucyB0byBhZGQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jaGFpbj10cnVlXSBTcGVjaWZ5IHdoZXRoZXIgdGhlIGZ1bmN0aW9ucyBhZGRlZCBhcmUgY2hhaW5hYmxlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBmdW5jdGlvbiBjYXBpdGFsaXplKHN0cmluZykge1xuICAgICAqICAgcmV0dXJuIHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIF8ubWl4aW4oeyAnY2FwaXRhbGl6ZSc6IGNhcGl0YWxpemUgfSk7XG4gICAgICogXy5jYXBpdGFsaXplKCdmcmVkJyk7XG4gICAgICogLy8gPT4gJ0ZyZWQnXG4gICAgICpcbiAgICAgKiBfKCdmcmVkJykuY2FwaXRhbGl6ZSgpLnZhbHVlKCk7XG4gICAgICogLy8gPT4gJ0ZyZWQnXG4gICAgICpcbiAgICAgKiBfLm1peGluKHsgJ2NhcGl0YWxpemUnOiBjYXBpdGFsaXplIH0sIHsgJ2NoYWluJzogZmFsc2UgfSk7XG4gICAgICogXygnZnJlZCcpLmNhcGl0YWxpemUoKTtcbiAgICAgKiAvLyA9PiAnRnJlZCdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtaXhpbihvYmplY3QsIHNvdXJjZSwgb3B0aW9ucykge1xuICAgICAgdmFyIGNoYWluID0gdHJ1ZSxcbiAgICAgICAgICBtZXRob2ROYW1lcyA9IHNvdXJjZSAmJiBmdW5jdGlvbnMoc291cmNlKTtcblxuICAgICAgaWYgKCFzb3VyY2UgfHwgKCFvcHRpb25zICYmICFtZXRob2ROYW1lcy5sZW5ndGgpKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICAgICAgICBvcHRpb25zID0gc291cmNlO1xuICAgICAgICB9XG4gICAgICAgIGN0b3IgPSBsb2Rhc2hXcmFwcGVyO1xuICAgICAgICBzb3VyY2UgPSBvYmplY3Q7XG4gICAgICAgIG9iamVjdCA9IGxvZGFzaDtcbiAgICAgICAgbWV0aG9kTmFtZXMgPSBmdW5jdGlvbnMoc291cmNlKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zID09PSBmYWxzZSkge1xuICAgICAgICBjaGFpbiA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChvcHRpb25zKSAmJiAnY2hhaW4nIGluIG9wdGlvbnMpIHtcbiAgICAgICAgY2hhaW4gPSBvcHRpb25zLmNoYWluO1xuICAgICAgfVxuICAgICAgdmFyIGN0b3IgPSBvYmplY3QsXG4gICAgICAgICAgaXNGdW5jID0gaXNGdW5jdGlvbihjdG9yKTtcblxuICAgICAgZm9yRWFjaChtZXRob2ROYW1lcywgZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgICAgICB2YXIgZnVuYyA9IG9iamVjdFttZXRob2ROYW1lXSA9IHNvdXJjZVttZXRob2ROYW1lXTtcbiAgICAgICAgaWYgKGlzRnVuYykge1xuICAgICAgICAgIGN0b3IucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY2hhaW5BbGwgPSB0aGlzLl9fY2hhaW5fXyxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuX193cmFwcGVkX18sXG4gICAgICAgICAgICAgICAgYXJncyA9IFt2YWx1ZV07XG5cbiAgICAgICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBmdW5jLmFwcGx5KG9iamVjdCwgYXJncyk7XG4gICAgICAgICAgICBpZiAoY2hhaW4gfHwgY2hhaW5BbGwpIHtcbiAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSByZXN1bHQgJiYgaXNPYmplY3QocmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBjdG9yKHJlc3VsdCk7XG4gICAgICAgICAgICAgIHJlc3VsdC5fX2NoYWluX18gPSBjaGFpbkFsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV2ZXJ0cyB0aGUgJ18nIHZhcmlhYmxlIHRvIGl0cyBwcmV2aW91cyB2YWx1ZSBhbmQgcmV0dXJucyBhIHJlZmVyZW5jZSB0b1xuICAgICAqIHRoZSBgbG9kYXNoYCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiB2YXIgbG9kYXNoID0gXy5ub0NvbmZsaWN0KCk7XG4gICAgICovXG4gICAgZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcbiAgICAgIGNvbnRleHQuXyA9IG9sZERhc2g7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIG5vLW9wZXJhdGlvbiBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIG9iamVjdCA9IHsgJ25hbWUnOiAnZnJlZCcgfTtcbiAgICAgKiBfLm5vb3Aob2JqZWN0KSA9PT0gdW5kZWZpbmVkO1xuICAgICAqIC8vID0+IHRydWVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBub29wKCkge1xuICAgICAgLy8gbm8gb3BlcmF0aW9uIHBlcmZvcm1lZFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIFVuaXggZXBvY2hcbiAgICAgKiAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIHN0YW1wID0gXy5ub3coKTtcbiAgICAgKiBfLmRlZmVyKGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApOyB9KTtcbiAgICAgKiAvLyA9PiBsb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBmdW5jdGlvbiB0byBiZSBjYWxsZWRcbiAgICAgKi9cbiAgICB2YXIgbm93ID0gaXNOYXRpdmUobm93ID0gRGF0ZS5ub3cpICYmIG5vdyB8fCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGdpdmVuIHZhbHVlIGludG8gYW4gaW50ZWdlciBvZiB0aGUgc3BlY2lmaWVkIHJhZGl4LlxuICAgICAqIElmIGByYWRpeGAgaXMgYHVuZGVmaW5lZGAgb3IgYDBgIGEgYHJhZGl4YCBvZiBgMTBgIGlzIHVzZWQgdW5sZXNzIHRoZVxuICAgICAqIGB2YWx1ZWAgaXMgYSBoZXhhZGVjaW1hbCwgaW4gd2hpY2ggY2FzZSBhIGByYWRpeGAgb2YgYDE2YCBpcyB1c2VkLlxuICAgICAqXG4gICAgICogTm90ZTogVGhpcyBtZXRob2QgYXZvaWRzIGRpZmZlcmVuY2VzIGluIG5hdGl2ZSBFUzMgYW5kIEVTNSBgcGFyc2VJbnRgXG4gICAgICogaW1wbGVtZW50YXRpb25zLiBTZWUgaHR0cDovL2VzNS5naXRodWIuaW8vI0UuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYXJzZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JhZGl4XSBUaGUgcmFkaXggdXNlZCB0byBpbnRlcnByZXQgdGhlIHZhbHVlIHRvIHBhcnNlLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG5ldyBpbnRlZ2VyIHZhbHVlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnBhcnNlSW50KCcwOCcpO1xuICAgICAqIC8vID0+IDhcbiAgICAgKi9cbiAgICB2YXIgcGFyc2VJbnQgPSBuYXRpdmVQYXJzZUludCh3aGl0ZXNwYWNlICsgJzA4JykgPT0gOCA/IG5hdGl2ZVBhcnNlSW50IDogZnVuY3Rpb24odmFsdWUsIHJhZGl4KSB7XG4gICAgICAvLyBGaXJlZm94IDwgMjEgYW5kIE9wZXJhIDwgMTUgZm9sbG93IHRoZSBFUzMgc3BlY2lmaWVkIGltcGxlbWVudGF0aW9uIG9mIGBwYXJzZUludGBcbiAgICAgIHJldHVybiBuYXRpdmVQYXJzZUludChpc1N0cmluZyh2YWx1ZSkgPyB2YWx1ZS5yZXBsYWNlKHJlTGVhZGluZ1NwYWNlc0FuZFplcm9zLCAnJykgOiB2YWx1ZSwgcmFkaXggfHwgMCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBcIl8ucGx1Y2tcIiBzdHlsZSBmdW5jdGlvbiwgd2hpY2ggcmV0dXJucyB0aGUgYGtleWAgdmFsdWUgb2YgYVxuICAgICAqIGdpdmVuIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byByZXRyaWV2ZS5cbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGNoYXJhY3RlcnMgPSBbXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9LFxuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfVxuICAgICAqIF07XG4gICAgICpcbiAgICAgKiB2YXIgZ2V0TmFtZSA9IF8ucHJvcGVydHkoJ25hbWUnKTtcbiAgICAgKlxuICAgICAqIF8ubWFwKGNoYXJhY3RlcnMsIGdldE5hbWUpO1xuICAgICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxuICAgICAqXG4gICAgICogXy5zb3J0QnkoY2hhcmFjdGVycywgZ2V0TmFtZSk7XG4gICAgICogLy8gPT4gW3sgJ25hbWUnOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1dXG4gICAgICovXG4gICAgZnVuY3Rpb24gcHJvcGVydHkoa2V5KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBvYmplY3Rba2V5XTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvZHVjZXMgYSByYW5kb20gbnVtYmVyIGJldHdlZW4gYG1pbmAgYW5kIGBtYXhgIChpbmNsdXNpdmUpLiBJZiBvbmx5IG9uZVxuICAgICAqIGFyZ3VtZW50IGlzIHByb3ZpZGVkIGEgbnVtYmVyIGJldHdlZW4gYDBgIGFuZCB0aGUgZ2l2ZW4gbnVtYmVyIHdpbGwgYmVcbiAgICAgKiByZXR1cm5lZC4gSWYgYGZsb2F0aW5nYCBpcyB0cnVleSBvciBlaXRoZXIgYG1pbmAgb3IgYG1heGAgYXJlIGZsb2F0cyBhXG4gICAgICogZmxvYXRpbmctcG9pbnQgbnVtYmVyIHdpbGwgYmUgcmV0dXJuZWQgaW5zdGVhZCBvZiBhbiBpbnRlZ2VyLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbWluPTBdIFRoZSBtaW5pbXVtIHBvc3NpYmxlIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbWF4PTFdIFRoZSBtYXhpbXVtIHBvc3NpYmxlIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zsb2F0aW5nPWZhbHNlXSBTcGVjaWZ5IHJldHVybmluZyBhIGZsb2F0aW5nLXBvaW50IG51bWJlci5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGEgcmFuZG9tIG51bWJlci5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXy5yYW5kb20oMCwgNSk7XG4gICAgICogLy8gPT4gYW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDVcbiAgICAgKlxuICAgICAqIF8ucmFuZG9tKDUpO1xuICAgICAqIC8vID0+IGFsc28gYW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDVcbiAgICAgKlxuICAgICAqIF8ucmFuZG9tKDUsIHRydWUpO1xuICAgICAqIC8vID0+IGEgZmxvYXRpbmctcG9pbnQgbnVtYmVyIGJldHdlZW4gMCBhbmQgNVxuICAgICAqXG4gICAgICogXy5yYW5kb20oMS4yLCA1LjIpO1xuICAgICAqIC8vID0+IGEgZmxvYXRpbmctcG9pbnQgbnVtYmVyIGJldHdlZW4gMS4yIGFuZCA1LjJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByYW5kb20obWluLCBtYXgsIGZsb2F0aW5nKSB7XG4gICAgICB2YXIgbm9NaW4gPSBtaW4gPT0gbnVsbCxcbiAgICAgICAgICBub01heCA9IG1heCA9PSBudWxsO1xuXG4gICAgICBpZiAoZmxvYXRpbmcgPT0gbnVsbCkge1xuICAgICAgICBpZiAodHlwZW9mIG1pbiA9PSAnYm9vbGVhbicgJiYgbm9NYXgpIHtcbiAgICAgICAgICBmbG9hdGluZyA9IG1pbjtcbiAgICAgICAgICBtaW4gPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFub01heCAmJiB0eXBlb2YgbWF4ID09ICdib29sZWFuJykge1xuICAgICAgICAgIGZsb2F0aW5nID0gbWF4O1xuICAgICAgICAgIG5vTWF4ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG5vTWluICYmIG5vTWF4KSB7XG4gICAgICAgIG1heCA9IDE7XG4gICAgICB9XG4gICAgICBtaW4gPSArbWluIHx8IDA7XG4gICAgICBpZiAobm9NYXgpIHtcbiAgICAgICAgbWF4ID0gbWluO1xuICAgICAgICBtaW4gPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWF4ID0gK21heCB8fCAwO1xuICAgICAgfVxuICAgICAgaWYgKGZsb2F0aW5nIHx8IG1pbiAlIDEgfHwgbWF4ICUgMSkge1xuICAgICAgICB2YXIgcmFuZCA9IG5hdGl2ZVJhbmRvbSgpO1xuICAgICAgICByZXR1cm4gbmF0aXZlTWluKG1pbiArIChyYW5kICogKG1heCAtIG1pbiArIHBhcnNlRmxvYXQoJzFlLScgKyAoKHJhbmQgKycnKS5sZW5ndGggLSAxKSkpKSwgbWF4KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlUmFuZG9tKG1pbiwgbWF4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNvbHZlcyB0aGUgdmFsdWUgb2YgcHJvcGVydHkgYGtleWAgb24gYG9iamVjdGAuIElmIGBrZXlgIGlzIGEgZnVuY3Rpb25cbiAgICAgKiBpdCB3aWxsIGJlIGludm9rZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgYG9iamVjdGAgYW5kIGl0cyByZXN1bHQgcmV0dXJuZWQsXG4gICAgICogZWxzZSB0aGUgcHJvcGVydHkgdmFsdWUgaXMgcmV0dXJuZWQuIElmIGBvYmplY3RgIGlzIGZhbHNleSB0aGVuIGB1bmRlZmluZWRgXG4gICAgICogaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gcmVzb2x2ZS5cbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBvYmplY3QgPSB7XG4gICAgICogICAnY2hlZXNlJzogJ2NydW1wZXRzJyxcbiAgICAgKiAgICdzdHVmZic6IGZ1bmN0aW9uKCkge1xuICAgICAqICAgICByZXR1cm4gJ25vbnNlbnNlJztcbiAgICAgKiAgIH1cbiAgICAgKiB9O1xuICAgICAqXG4gICAgICogXy5yZXN1bHQob2JqZWN0LCAnY2hlZXNlJyk7XG4gICAgICogLy8gPT4gJ2NydW1wZXRzJ1xuICAgICAqXG4gICAgICogXy5yZXN1bHQob2JqZWN0LCAnc3R1ZmYnKTtcbiAgICAgKiAvLyA9PiAnbm9uc2Vuc2UnXG4gICAgICovXG4gICAgZnVuY3Rpb24gcmVzdWx0KG9iamVjdCwga2V5KSB7XG4gICAgICBpZiAob2JqZWN0KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IG9iamVjdFtrZXldO1xuICAgICAgICByZXR1cm4gaXNGdW5jdGlvbih2YWx1ZSkgPyBvYmplY3Rba2V5XSgpIDogdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBtaWNyby10ZW1wbGF0aW5nIG1ldGhvZCB0aGF0IGhhbmRsZXMgYXJiaXRyYXJ5IGRlbGltaXRlcnMsIHByZXNlcnZlc1xuICAgICAqIHdoaXRlc3BhY2UsIGFuZCBjb3JyZWN0bHkgZXNjYXBlcyBxdW90ZXMgd2l0aGluIGludGVycG9sYXRlZCBjb2RlLlxuICAgICAqXG4gICAgICogTm90ZTogSW4gdGhlIGRldmVsb3BtZW50IGJ1aWxkLCBgXy50ZW1wbGF0ZWAgdXRpbGl6ZXMgc291cmNlVVJMcyBmb3IgZWFzaWVyXG4gICAgICogZGVidWdnaW5nLiBTZWUgaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvZGV2ZWxvcGVydG9vbHMvc291cmNlbWFwcy8jdG9jLXNvdXJjZXVybFxuICAgICAqXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gcHJlY29tcGlsaW5nIHRlbXBsYXRlcyBzZWU6XG4gICAgICogaHR0cDovL2xvZGFzaC5jb20vY3VzdG9tLWJ1aWxkc1xuICAgICAqXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gQ2hyb21lIGV4dGVuc2lvbiBzYW5kYm94ZXMgc2VlOlxuICAgICAqIGh0dHA6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9zdGFibGUvZXh0ZW5zaW9ucy9zYW5kYm94aW5nRXZhbC5odG1sXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGhlIHRlbXBsYXRlIHRleHQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgVGhlIGRhdGEgb2JqZWN0IHVzZWQgdG8gcG9wdWxhdGUgdGhlIHRleHQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gICAgICogQHBhcmFtIHtSZWdFeHB9IFtvcHRpb25zLmVzY2FwZV0gVGhlIFwiZXNjYXBlXCIgZGVsaW1pdGVyLlxuICAgICAqIEBwYXJhbSB7UmVnRXhwfSBbb3B0aW9ucy5ldmFsdWF0ZV0gVGhlIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXIuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmltcG9ydHNdIEFuIG9iamVjdCB0byBpbXBvcnQgaW50byB0aGUgdGVtcGxhdGUgYXMgbG9jYWwgdmFyaWFibGVzLlxuICAgICAqIEBwYXJhbSB7UmVnRXhwfSBbb3B0aW9ucy5pbnRlcnBvbGF0ZV0gVGhlIFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXIuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzb3VyY2VVUkxdIFRoZSBzb3VyY2VVUkwgb2YgdGhlIHRlbXBsYXRlJ3MgY29tcGlsZWQgc291cmNlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdmFyaWFibGVdIFRoZSBkYXRhIG9iamVjdCB2YXJpYWJsZSBuYW1lLlxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbnxzdHJpbmd9IFJldHVybnMgYSBjb21waWxlZCBmdW5jdGlvbiB3aGVuIG5vIGBkYXRhYCBvYmplY3RcbiAgICAgKiAgaXMgZ2l2ZW4sIGVsc2UgaXQgcmV0dXJucyB0aGUgaW50ZXJwb2xhdGVkIHRleHQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBcImludGVycG9sYXRlXCIgZGVsaW1pdGVyIHRvIGNyZWF0ZSBhIGNvbXBpbGVkIHRlbXBsYXRlXG4gICAgICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGVsbG8gPCU9IG5hbWUgJT4nKTtcbiAgICAgKiBjb21waWxlZCh7ICduYW1lJzogJ2ZyZWQnIH0pO1xuICAgICAqIC8vID0+ICdoZWxsbyBmcmVkJ1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIFwiZXNjYXBlXCIgZGVsaW1pdGVyIHRvIGVzY2FwZSBIVE1MIGluIGRhdGEgcHJvcGVydHkgdmFsdWVzXG4gICAgICogXy50ZW1wbGF0ZSgnPGI+PCUtIHZhbHVlICU+PC9iPicsIHsgJ3ZhbHVlJzogJzxzY3JpcHQ+JyB9KTtcbiAgICAgKiAvLyA9PiAnPGI+Jmx0O3NjcmlwdCZndDs8L2I+J1xuICAgICAqXG4gICAgICogLy8gdXNpbmcgdGhlIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXIgdG8gZ2VuZXJhdGUgSFRNTFxuICAgICAqIHZhciBsaXN0ID0gJzwlIF8uZm9yRWFjaChwZW9wbGUsIGZ1bmN0aW9uKG5hbWUpIHsgJT48bGk+PCUtIG5hbWUgJT48L2xpPjwlIH0pOyAlPic7XG4gICAgICogXy50ZW1wbGF0ZShsaXN0LCB7ICdwZW9wbGUnOiBbJ2ZyZWQnLCAnYmFybmV5J10gfSk7XG4gICAgICogLy8gPT4gJzxsaT5mcmVkPC9saT48bGk+YmFybmV5PC9saT4nXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgRVM2IGRlbGltaXRlciBhcyBhbiBhbHRlcm5hdGl2ZSB0byB0aGUgZGVmYXVsdCBcImludGVycG9sYXRlXCIgZGVsaW1pdGVyXG4gICAgICogXy50ZW1wbGF0ZSgnaGVsbG8gJHsgbmFtZSB9JywgeyAnbmFtZSc6ICdwZWJibGVzJyB9KTtcbiAgICAgKiAvLyA9PiAnaGVsbG8gcGViYmxlcydcbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBpbnRlcm5hbCBgcHJpbnRgIGZ1bmN0aW9uIGluIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXJzXG4gICAgICogXy50ZW1wbGF0ZSgnPCUgcHJpbnQoXCJoZWxsbyBcIiArIG5hbWUpOyAlPiEnLCB7ICduYW1lJzogJ2Jhcm5leScgfSk7XG4gICAgICogLy8gPT4gJ2hlbGxvIGJhcm5leSEnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyBhIGN1c3RvbSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzXG4gICAgICogXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xuICAgICAqICAgJ2ludGVycG9sYXRlJzogL3t7KFtcXHNcXFNdKz8pfX0vZ1xuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBfLnRlbXBsYXRlKCdoZWxsbyB7eyBuYW1lIH19IScsIHsgJ25hbWUnOiAnbXVzdGFjaGUnIH0pO1xuICAgICAqIC8vID0+ICdoZWxsbyBtdXN0YWNoZSEnXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYGltcG9ydHNgIG9wdGlvbiB0byBpbXBvcnQgalF1ZXJ5XG4gICAgICogdmFyIGxpc3QgPSAnPCUganEuZWFjaChwZW9wbGUsIGZ1bmN0aW9uKG5hbWUpIHsgJT48bGk+PCUtIG5hbWUgJT48L2xpPjwlIH0pOyAlPic7XG4gICAgICogXy50ZW1wbGF0ZShsaXN0LCB7ICdwZW9wbGUnOiBbJ2ZyZWQnLCAnYmFybmV5J10gfSwgeyAnaW1wb3J0cyc6IHsgJ2pxJzogalF1ZXJ5IH0gfSk7XG4gICAgICogLy8gPT4gJzxsaT5mcmVkPC9saT48bGk+YmFybmV5PC9saT4nXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYHNvdXJjZVVSTGAgb3B0aW9uIHRvIHNwZWNpZnkgYSBjdXN0b20gc291cmNlVVJMIGZvciB0aGUgdGVtcGxhdGVcbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoZWxsbyA8JT0gbmFtZSAlPicsIG51bGwsIHsgJ3NvdXJjZVVSTCc6ICcvYmFzaWMvZ3JlZXRpbmcuanN0JyB9KTtcbiAgICAgKiBjb21waWxlZChkYXRhKTtcbiAgICAgKiAvLyA9PiBmaW5kIHRoZSBzb3VyY2Ugb2YgXCJncmVldGluZy5qc3RcIiB1bmRlciB0aGUgU291cmNlcyB0YWIgb3IgUmVzb3VyY2VzIHBhbmVsIG9mIHRoZSB3ZWIgaW5zcGVjdG9yXG4gICAgICpcbiAgICAgKiAvLyB1c2luZyB0aGUgYHZhcmlhYmxlYCBvcHRpb24gdG8gZW5zdXJlIGEgd2l0aC1zdGF0ZW1lbnQgaXNuJ3QgdXNlZCBpbiB0aGUgY29tcGlsZWQgdGVtcGxhdGVcbiAgICAgKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoaSA8JT0gZGF0YS5uYW1lICU+IScsIG51bGwsIHsgJ3ZhcmlhYmxlJzogJ2RhdGEnIH0pO1xuICAgICAqIGNvbXBpbGVkLnNvdXJjZTtcbiAgICAgKiAvLyA9PiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICogICB2YXIgX190LCBfX3AgPSAnJywgX19lID0gXy5lc2NhcGU7XG4gICAgICogICBfX3AgKz0gJ2hpICcgKyAoKF9fdCA9ICggZGF0YS5uYW1lICkpID09IG51bGwgPyAnJyA6IF9fdCkgKyAnISc7XG4gICAgICogICByZXR1cm4gX19wO1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIC8vIHVzaW5nIHRoZSBgc291cmNlYCBwcm9wZXJ0eSB0byBpbmxpbmUgY29tcGlsZWQgdGVtcGxhdGVzIGZvciBtZWFuaW5nZnVsXG4gICAgICogLy8gbGluZSBudW1iZXJzIGluIGVycm9yIG1lc3NhZ2VzIGFuZCBhIHN0YWNrIHRyYWNlXG4gICAgICogZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4oY3dkLCAnanN0LmpzJyksICdcXFxuICAgICAqICAgdmFyIEpTVCA9IHtcXFxuICAgICAqICAgICBcIm1haW5cIjogJyArIF8udGVtcGxhdGUobWFpblRleHQpLnNvdXJjZSArICdcXFxuICAgICAqICAgfTtcXFxuICAgICAqICcpO1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHRlbXBsYXRlKHRleHQsIGRhdGEsIG9wdGlvbnMpIHtcbiAgICAgIC8vIGJhc2VkIG9uIEpvaG4gUmVzaWcncyBgdG1wbGAgaW1wbGVtZW50YXRpb25cbiAgICAgIC8vIGh0dHA6Ly9lam9obi5vcmcvYmxvZy9qYXZhc2NyaXB0LW1pY3JvLXRlbXBsYXRpbmcvXG4gICAgICAvLyBhbmQgTGF1cmEgRG9rdG9yb3ZhJ3MgZG9ULmpzXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vb2xhZG8vZG9UXG4gICAgICB2YXIgc2V0dGluZ3MgPSBsb2Rhc2gudGVtcGxhdGVTZXR0aW5ncztcbiAgICAgIHRleHQgPSBTdHJpbmcodGV4dCB8fCAnJyk7XG5cbiAgICAgIC8vIGF2b2lkIG1pc3NpbmcgZGVwZW5kZW5jaWVzIHdoZW4gYGl0ZXJhdG9yVGVtcGxhdGVgIGlzIG5vdCBkZWZpbmVkXG4gICAgICBvcHRpb25zID0gZGVmYXVsdHMoe30sIG9wdGlvbnMsIHNldHRpbmdzKTtcblxuICAgICAgdmFyIGltcG9ydHMgPSBkZWZhdWx0cyh7fSwgb3B0aW9ucy5pbXBvcnRzLCBzZXR0aW5ncy5pbXBvcnRzKSxcbiAgICAgICAgICBpbXBvcnRzS2V5cyA9IGtleXMoaW1wb3J0cyksXG4gICAgICAgICAgaW1wb3J0c1ZhbHVlcyA9IHZhbHVlcyhpbXBvcnRzKTtcblxuICAgICAgdmFyIGlzRXZhbHVhdGluZyxcbiAgICAgICAgICBpbmRleCA9IDAsXG4gICAgICAgICAgaW50ZXJwb2xhdGUgPSBvcHRpb25zLmludGVycG9sYXRlIHx8IHJlTm9NYXRjaCxcbiAgICAgICAgICBzb3VyY2UgPSBcIl9fcCArPSAnXCI7XG5cbiAgICAgIC8vIGNvbXBpbGUgdGhlIHJlZ2V4cCB0byBtYXRjaCBlYWNoIGRlbGltaXRlclxuICAgICAgdmFyIHJlRGVsaW1pdGVycyA9IFJlZ0V4cChcbiAgICAgICAgKG9wdGlvbnMuZXNjYXBlIHx8IHJlTm9NYXRjaCkuc291cmNlICsgJ3wnICtcbiAgICAgICAgaW50ZXJwb2xhdGUuc291cmNlICsgJ3wnICtcbiAgICAgICAgKGludGVycG9sYXRlID09PSByZUludGVycG9sYXRlID8gcmVFc1RlbXBsYXRlIDogcmVOb01hdGNoKS5zb3VyY2UgKyAnfCcgK1xuICAgICAgICAob3B0aW9ucy5ldmFsdWF0ZSB8fCByZU5vTWF0Y2gpLnNvdXJjZSArICd8JCdcbiAgICAgICwgJ2cnKTtcblxuICAgICAgdGV4dC5yZXBsYWNlKHJlRGVsaW1pdGVycywgZnVuY3Rpb24obWF0Y2gsIGVzY2FwZVZhbHVlLCBpbnRlcnBvbGF0ZVZhbHVlLCBlc1RlbXBsYXRlVmFsdWUsIGV2YWx1YXRlVmFsdWUsIG9mZnNldCkge1xuICAgICAgICBpbnRlcnBvbGF0ZVZhbHVlIHx8IChpbnRlcnBvbGF0ZVZhbHVlID0gZXNUZW1wbGF0ZVZhbHVlKTtcblxuICAgICAgICAvLyBlc2NhcGUgY2hhcmFjdGVycyB0aGF0IGNhbm5vdCBiZSBpbmNsdWRlZCBpbiBzdHJpbmcgbGl0ZXJhbHNcbiAgICAgICAgc291cmNlICs9IHRleHQuc2xpY2UoaW5kZXgsIG9mZnNldCkucmVwbGFjZShyZVVuZXNjYXBlZFN0cmluZywgZXNjYXBlU3RyaW5nQ2hhcik7XG5cbiAgICAgICAgLy8gcmVwbGFjZSBkZWxpbWl0ZXJzIHdpdGggc25pcHBldHNcbiAgICAgICAgaWYgKGVzY2FwZVZhbHVlKSB7XG4gICAgICAgICAgc291cmNlICs9IFwiJyArXFxuX19lKFwiICsgZXNjYXBlVmFsdWUgKyBcIikgK1xcbidcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZhbHVhdGVWYWx1ZSkge1xuICAgICAgICAgIGlzRXZhbHVhdGluZyA9IHRydWU7XG4gICAgICAgICAgc291cmNlICs9IFwiJztcXG5cIiArIGV2YWx1YXRlVmFsdWUgKyBcIjtcXG5fX3AgKz0gJ1wiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnRlcnBvbGF0ZVZhbHVlKSB7XG4gICAgICAgICAgc291cmNlICs9IFwiJyArXFxuKChfX3QgPSAoXCIgKyBpbnRlcnBvbGF0ZVZhbHVlICsgXCIpKSA9PSBudWxsID8gJycgOiBfX3QpICtcXG4nXCI7XG4gICAgICAgIH1cbiAgICAgICAgaW5kZXggPSBvZmZzZXQgKyBtYXRjaC5sZW5ndGg7XG5cbiAgICAgICAgLy8gdGhlIEpTIGVuZ2luZSBlbWJlZGRlZCBpbiBBZG9iZSBwcm9kdWN0cyByZXF1aXJlcyByZXR1cm5pbmcgdGhlIGBtYXRjaGBcbiAgICAgICAgLy8gc3RyaW5nIGluIG9yZGVyIHRvIHByb2R1Y2UgdGhlIGNvcnJlY3QgYG9mZnNldGAgdmFsdWVcbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgfSk7XG5cbiAgICAgIHNvdXJjZSArPSBcIic7XFxuXCI7XG5cbiAgICAgIC8vIGlmIGB2YXJpYWJsZWAgaXMgbm90IHNwZWNpZmllZCwgd3JhcCBhIHdpdGgtc3RhdGVtZW50IGFyb3VuZCB0aGUgZ2VuZXJhdGVkXG4gICAgICAvLyBjb2RlIHRvIGFkZCB0aGUgZGF0YSBvYmplY3QgdG8gdGhlIHRvcCBvZiB0aGUgc2NvcGUgY2hhaW5cbiAgICAgIHZhciB2YXJpYWJsZSA9IG9wdGlvbnMudmFyaWFibGUsXG4gICAgICAgICAgaGFzVmFyaWFibGUgPSB2YXJpYWJsZTtcblxuICAgICAgaWYgKCFoYXNWYXJpYWJsZSkge1xuICAgICAgICB2YXJpYWJsZSA9ICdvYmonO1xuICAgICAgICBzb3VyY2UgPSAnd2l0aCAoJyArIHZhcmlhYmxlICsgJykge1xcbicgKyBzb3VyY2UgKyAnXFxufVxcbic7XG4gICAgICB9XG4gICAgICAvLyBjbGVhbnVwIGNvZGUgYnkgc3RyaXBwaW5nIGVtcHR5IHN0cmluZ3NcbiAgICAgIHNvdXJjZSA9IChpc0V2YWx1YXRpbmcgPyBzb3VyY2UucmVwbGFjZShyZUVtcHR5U3RyaW5nTGVhZGluZywgJycpIDogc291cmNlKVxuICAgICAgICAucmVwbGFjZShyZUVtcHR5U3RyaW5nTWlkZGxlLCAnJDEnKVxuICAgICAgICAucmVwbGFjZShyZUVtcHR5U3RyaW5nVHJhaWxpbmcsICckMTsnKTtcblxuICAgICAgLy8gZnJhbWUgY29kZSBhcyB0aGUgZnVuY3Rpb24gYm9keVxuICAgICAgc291cmNlID0gJ2Z1bmN0aW9uKCcgKyB2YXJpYWJsZSArICcpIHtcXG4nICtcbiAgICAgICAgKGhhc1ZhcmlhYmxlID8gJycgOiB2YXJpYWJsZSArICcgfHwgKCcgKyB2YXJpYWJsZSArICcgPSB7fSk7XFxuJykgK1xuICAgICAgICBcInZhciBfX3QsIF9fcCA9ICcnLCBfX2UgPSBfLmVzY2FwZVwiICtcbiAgICAgICAgKGlzRXZhbHVhdGluZ1xuICAgICAgICAgID8gJywgX19qID0gQXJyYXkucHJvdG90eXBlLmpvaW47XFxuJyArXG4gICAgICAgICAgICBcImZ1bmN0aW9uIHByaW50KCkgeyBfX3AgKz0gX19qLmNhbGwoYXJndW1lbnRzLCAnJykgfVxcblwiXG4gICAgICAgICAgOiAnO1xcbidcbiAgICAgICAgKSArXG4gICAgICAgIHNvdXJjZSArXG4gICAgICAgICdyZXR1cm4gX19wXFxufSc7XG5cbiAgICAgIC8vIFVzZSBhIHNvdXJjZVVSTCBmb3IgZWFzaWVyIGRlYnVnZ2luZy5cbiAgICAgIC8vIGh0dHA6Ly93d3cuaHRtbDVyb2Nrcy5jb20vZW4vdHV0b3JpYWxzL2RldmVsb3BlcnRvb2xzL3NvdXJjZW1hcHMvI3RvYy1zb3VyY2V1cmxcbiAgICAgIHZhciBzb3VyY2VVUkwgPSAnXFxuLypcXG4vLyMgc291cmNlVVJMPScgKyAob3B0aW9ucy5zb3VyY2VVUkwgfHwgJy9sb2Rhc2gvdGVtcGxhdGUvc291cmNlWycgKyAodGVtcGxhdGVDb3VudGVyKyspICsgJ10nKSArICdcXG4qLyc7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBGdW5jdGlvbihpbXBvcnRzS2V5cywgJ3JldHVybiAnICsgc291cmNlICsgc291cmNlVVJMKS5hcHBseSh1bmRlZmluZWQsIGltcG9ydHNWYWx1ZXMpO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGUuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdChkYXRhKTtcbiAgICAgIH1cbiAgICAgIC8vIHByb3ZpZGUgdGhlIGNvbXBpbGVkIGZ1bmN0aW9uJ3Mgc291cmNlIGJ5IGl0cyBgdG9TdHJpbmdgIG1ldGhvZCwgaW5cbiAgICAgIC8vIHN1cHBvcnRlZCBlbnZpcm9ubWVudHMsIG9yIHRoZSBgc291cmNlYCBwcm9wZXJ0eSBhcyBhIGNvbnZlbmllbmNlIGZvclxuICAgICAgLy8gaW5saW5pbmcgY29tcGlsZWQgdGVtcGxhdGVzIGR1cmluZyB0aGUgYnVpbGQgcHJvY2Vzc1xuICAgICAgcmVzdWx0LnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIGNhbGxiYWNrIGBuYCB0aW1lcywgcmV0dXJuaW5nIGFuIGFycmF5IG9mIHRoZSByZXN1bHRzXG4gICAgICogb2YgZWFjaCBjYWxsYmFjayBleGVjdXRpb24uIFRoZSBjYWxsYmFjayBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWRcbiAgICAgKiB3aXRoIG9uZSBhcmd1bWVudDsgKGluZGV4KS5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBVdGlsaXRpZXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGV4ZWN1dGUgdGhlIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGNhbGxiYWNrYC5cbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHJlc3VsdHMgb2YgZWFjaCBgY2FsbGJhY2tgIGV4ZWN1dGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogdmFyIGRpY2VSb2xscyA9IF8udGltZXMoMywgXy5wYXJ0aWFsKF8ucmFuZG9tLCAxLCA2KSk7XG4gICAgICogLy8gPT4gWzMsIDYsIDRdXG4gICAgICpcbiAgICAgKiBfLnRpbWVzKDMsIGZ1bmN0aW9uKG4pIHsgbWFnZS5jYXN0U3BlbGwobik7IH0pO1xuICAgICAqIC8vID0+IGNhbGxzIGBtYWdlLmNhc3RTcGVsbChuKWAgdGhyZWUgdGltZXMsIHBhc3NpbmcgYG5gIG9mIGAwYCwgYDFgLCBhbmQgYDJgIHJlc3BlY3RpdmVseVxuICAgICAqXG4gICAgICogXy50aW1lcygzLCBmdW5jdGlvbihuKSB7IHRoaXMuY2FzdChuKTsgfSwgbWFnZSk7XG4gICAgICogLy8gPT4gYWxzbyBjYWxscyBgbWFnZS5jYXN0U3BlbGwobilgIHRocmVlIHRpbWVzXG4gICAgICovXG4gICAgZnVuY3Rpb24gdGltZXMobiwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIG4gPSAobiA9ICtuKSA+IC0xID8gbiA6IDA7XG4gICAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgICByZXN1bHQgPSBBcnJheShuKTtcblxuICAgICAgY2FsbGJhY2sgPSBiYXNlQ3JlYXRlQ2FsbGJhY2soY2FsbGJhY2ssIHRoaXNBcmcsIDEpO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBuKSB7XG4gICAgICAgIHJlc3VsdFtpbmRleF0gPSBjYWxsYmFjayhpbmRleCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBpbnZlcnNlIG9mIGBfLmVzY2FwZWAgdGhpcyBtZXRob2QgY29udmVydHMgdGhlIEhUTUwgZW50aXRpZXNcbiAgICAgKiBgJmFtcDtgLCBgJmx0O2AsIGAmZ3Q7YCwgYCZxdW90O2AsIGFuZCBgJiMzOTtgIGluIGBzdHJpbmdgIHRvIHRoZWlyXG4gICAgICogY29ycmVzcG9uZGluZyBjaGFyYWN0ZXJzLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IFV0aWxpdGllc1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byB1bmVzY2FwZS5cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmVzY2FwZWQgc3RyaW5nLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnVuZXNjYXBlKCdGcmVkLCBCYXJuZXkgJmFtcDsgUGViYmxlcycpO1xuICAgICAqIC8vID0+ICdGcmVkLCBCYXJuZXkgJiBQZWJibGVzJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuZXNjYXBlKHN0cmluZykge1xuICAgICAgcmV0dXJuIHN0cmluZyA9PSBudWxsID8gJycgOiBTdHJpbmcoc3RyaW5nKS5yZXBsYWNlKHJlRXNjYXBlZEh0bWwsIHVuZXNjYXBlSHRtbENoYXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIHVuaXF1ZSBJRC4gSWYgYHByZWZpeGAgaXMgcHJvdmlkZWQgdGhlIElEIHdpbGwgYmUgYXBwZW5kZWQgdG8gaXQuXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgVXRpbGl0aWVzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcmVmaXhdIFRoZSB2YWx1ZSB0byBwcmVmaXggdGhlIElEIHdpdGguXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdW5pcXVlIElELlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBfLnVuaXF1ZUlkKCdjb250YWN0XycpO1xuICAgICAqIC8vID0+ICdjb250YWN0XzEwNCdcbiAgICAgKlxuICAgICAqIF8udW5pcXVlSWQoKTtcbiAgICAgKiAvLyA9PiAnMTA1J1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVuaXF1ZUlkKHByZWZpeCkge1xuICAgICAgdmFyIGlkID0gKytpZENvdW50ZXI7XG4gICAgICByZXR1cm4gU3RyaW5nKHByZWZpeCA9PSBudWxsID8gJycgOiBwcmVmaXgpICsgaWQ7XG4gICAgfVxuXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYGxvZGFzaGAgb2JqZWN0IHRoYXQgd3JhcHMgdGhlIGdpdmVuIHZhbHVlIHdpdGggZXhwbGljaXRcbiAgICAgKiBtZXRob2QgY2hhaW5pbmcgZW5hYmxlZC5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDaGFpbmluZ1xuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAuXG4gICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgd3JhcHBlciBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAgJ2FnZSc6IDM2IH0sXG4gICAgICogICB7ICduYW1lJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAncGViYmxlcycsICdhZ2UnOiAxIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogdmFyIHlvdW5nZXN0ID0gXy5jaGFpbihjaGFyYWN0ZXJzKVxuICAgICAqICAgICAuc29ydEJ5KCdhZ2UnKVxuICAgICAqICAgICAubWFwKGZ1bmN0aW9uKGNocikgeyByZXR1cm4gY2hyLm5hbWUgKyAnIGlzICcgKyBjaHIuYWdlOyB9KVxuICAgICAqICAgICAuZmlyc3QoKVxuICAgICAqICAgICAudmFsdWUoKTtcbiAgICAgKiAvLyA9PiAncGViYmxlcyBpcyAxJ1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNoYWluKHZhbHVlKSB7XG4gICAgICB2YWx1ZSA9IG5ldyBsb2Rhc2hXcmFwcGVyKHZhbHVlKTtcbiAgICAgIHZhbHVlLl9fY2hhaW5fXyA9IHRydWU7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW52b2tlcyBgaW50ZXJjZXB0b3JgIHdpdGggdGhlIGB2YWx1ZWAgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IGFuZCB0aGVuXG4gICAgICogcmV0dXJucyBgdmFsdWVgLiBUaGUgcHVycG9zZSBvZiB0aGlzIG1ldGhvZCBpcyB0byBcInRhcCBpbnRvXCIgYSBtZXRob2RcbiAgICAgKiBjaGFpbiBpbiBvcmRlciB0byBwZXJmb3JtIG9wZXJhdGlvbnMgb24gaW50ZXJtZWRpYXRlIHJlc3VsdHMgd2l0aGluXG4gICAgICogdGhlIGNoYWluLlxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGNhdGVnb3J5IENoYWluaW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvdmlkZSB0byBgaW50ZXJjZXB0b3JgLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGludGVyY2VwdG9yIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogXyhbMSwgMiwgMywgNF0pXG4gICAgICogIC50YXAoZnVuY3Rpb24oYXJyYXkpIHsgYXJyYXkucG9wKCk7IH0pXG4gICAgICogIC5yZXZlcnNlKClcbiAgICAgKiAgLnZhbHVlKCk7XG4gICAgICogLy8gPT4gWzMsIDIsIDFdXG4gICAgICovXG4gICAgZnVuY3Rpb24gdGFwKHZhbHVlLCBpbnRlcmNlcHRvcikge1xuICAgICAgaW50ZXJjZXB0b3IodmFsdWUpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgZXhwbGljaXQgbWV0aG9kIGNoYWluaW5nIG9uIHRoZSB3cmFwcGVyIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBuYW1lIGNoYWluXG4gICAgICogQG1lbWJlck9mIF9cbiAgICAgKiBAY2F0ZWdvcnkgQ2hhaW5pbmdcbiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgd3JhcHBlciBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIHZhciBjaGFyYWN0ZXJzID0gW1xuICAgICAqICAgeyAnbmFtZSc6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICAgKiAgIHsgJ25hbWUnOiAnZnJlZCcsICAgJ2FnZSc6IDQwIH1cbiAgICAgKiBdO1xuICAgICAqXG4gICAgICogLy8gd2l0aG91dCBleHBsaWNpdCBjaGFpbmluZ1xuICAgICAqIF8oY2hhcmFjdGVycykuZmlyc3QoKTtcbiAgICAgKiAvLyA9PiB7ICduYW1lJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9XG4gICAgICpcbiAgICAgKiAvLyB3aXRoIGV4cGxpY2l0IGNoYWluaW5nXG4gICAgICogXyhjaGFyYWN0ZXJzKS5jaGFpbigpXG4gICAgICogICAuZmlyc3QoKVxuICAgICAqICAgLnBpY2soJ2FnZScpXG4gICAgICogICAudmFsdWUoKTtcbiAgICAgKiAvLyA9PiB7ICdhZ2UnOiAzNiB9XG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcHBlckNoYWluKCkge1xuICAgICAgdGhpcy5fX2NoYWluX18gPSB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvZHVjZXMgdGhlIGB0b1N0cmluZ2AgcmVzdWx0IG9mIHRoZSB3cmFwcGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQG5hbWUgdG9TdHJpbmdcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEBjYXRlZ29yeSBDaGFpbmluZ1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZyByZXN1bHQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8oWzEsIDIsIDNdKS50b1N0cmluZygpO1xuICAgICAqIC8vID0+ICcxLDIsMydcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB3cmFwcGVyVG9TdHJpbmcoKSB7XG4gICAgICByZXR1cm4gU3RyaW5nKHRoaXMuX193cmFwcGVkX18pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4dHJhY3RzIHRoZSB3cmFwcGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQG5hbWUgdmFsdWVPZlxuICAgICAqIEBtZW1iZXJPZiBfXG4gICAgICogQGFsaWFzIHZhbHVlXG4gICAgICogQGNhdGVnb3J5IENoYWluaW5nXG4gICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHdyYXBwZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIF8oWzEsIDIsIDNdKS52YWx1ZU9mKCk7XG4gICAgICogLy8gPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcHBlclZhbHVlT2YoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fX3dyYXBwZWRfXztcbiAgICB9XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8vIGFkZCBmdW5jdGlvbnMgdGhhdCByZXR1cm4gd3JhcHBlZCB2YWx1ZXMgd2hlbiBjaGFpbmluZ1xuICAgIGxvZGFzaC5hZnRlciA9IGFmdGVyO1xuICAgIGxvZGFzaC5hc3NpZ24gPSBhc3NpZ247XG4gICAgbG9kYXNoLmF0ID0gYXQ7XG4gICAgbG9kYXNoLmJpbmQgPSBiaW5kO1xuICAgIGxvZGFzaC5iaW5kQWxsID0gYmluZEFsbDtcbiAgICBsb2Rhc2guYmluZEtleSA9IGJpbmRLZXk7XG4gICAgbG9kYXNoLmNoYWluID0gY2hhaW47XG4gICAgbG9kYXNoLmNvbXBhY3QgPSBjb21wYWN0O1xuICAgIGxvZGFzaC5jb21wb3NlID0gY29tcG9zZTtcbiAgICBsb2Rhc2guY29uc3RhbnQgPSBjb25zdGFudDtcbiAgICBsb2Rhc2guY291bnRCeSA9IGNvdW50Qnk7XG4gICAgbG9kYXNoLmNyZWF0ZSA9IGNyZWF0ZTtcbiAgICBsb2Rhc2guY3JlYXRlQ2FsbGJhY2sgPSBjcmVhdGVDYWxsYmFjaztcbiAgICBsb2Rhc2guY3VycnkgPSBjdXJyeTtcbiAgICBsb2Rhc2guZGVib3VuY2UgPSBkZWJvdW5jZTtcbiAgICBsb2Rhc2guZGVmYXVsdHMgPSBkZWZhdWx0cztcbiAgICBsb2Rhc2guZGVmZXIgPSBkZWZlcjtcbiAgICBsb2Rhc2guZGVsYXkgPSBkZWxheTtcbiAgICBsb2Rhc2guZGlmZmVyZW5jZSA9IGRpZmZlcmVuY2U7XG4gICAgbG9kYXNoLmZpbHRlciA9IGZpbHRlcjtcbiAgICBsb2Rhc2guZmxhdHRlbiA9IGZsYXR0ZW47XG4gICAgbG9kYXNoLmZvckVhY2ggPSBmb3JFYWNoO1xuICAgIGxvZGFzaC5mb3JFYWNoUmlnaHQgPSBmb3JFYWNoUmlnaHQ7XG4gICAgbG9kYXNoLmZvckluID0gZm9ySW47XG4gICAgbG9kYXNoLmZvckluUmlnaHQgPSBmb3JJblJpZ2h0O1xuICAgIGxvZGFzaC5mb3JPd24gPSBmb3JPd247XG4gICAgbG9kYXNoLmZvck93blJpZ2h0ID0gZm9yT3duUmlnaHQ7XG4gICAgbG9kYXNoLmZ1bmN0aW9ucyA9IGZ1bmN0aW9ucztcbiAgICBsb2Rhc2guZ3JvdXBCeSA9IGdyb3VwQnk7XG4gICAgbG9kYXNoLmluZGV4QnkgPSBpbmRleEJ5O1xuICAgIGxvZGFzaC5pbml0aWFsID0gaW5pdGlhbDtcbiAgICBsb2Rhc2guaW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0aW9uO1xuICAgIGxvZGFzaC5pbnZlcnQgPSBpbnZlcnQ7XG4gICAgbG9kYXNoLmludm9rZSA9IGludm9rZTtcbiAgICBsb2Rhc2gua2V5cyA9IGtleXM7XG4gICAgbG9kYXNoLm1hcCA9IG1hcDtcbiAgICBsb2Rhc2gubWFwVmFsdWVzID0gbWFwVmFsdWVzO1xuICAgIGxvZGFzaC5tYXggPSBtYXg7XG4gICAgbG9kYXNoLm1lbW9pemUgPSBtZW1vaXplO1xuICAgIGxvZGFzaC5tZXJnZSA9IG1lcmdlO1xuICAgIGxvZGFzaC5taW4gPSBtaW47XG4gICAgbG9kYXNoLm9taXQgPSBvbWl0O1xuICAgIGxvZGFzaC5vbmNlID0gb25jZTtcbiAgICBsb2Rhc2gucGFpcnMgPSBwYWlycztcbiAgICBsb2Rhc2gucGFydGlhbCA9IHBhcnRpYWw7XG4gICAgbG9kYXNoLnBhcnRpYWxSaWdodCA9IHBhcnRpYWxSaWdodDtcbiAgICBsb2Rhc2gucGljayA9IHBpY2s7XG4gICAgbG9kYXNoLnBsdWNrID0gcGx1Y2s7XG4gICAgbG9kYXNoLnByb3BlcnR5ID0gcHJvcGVydHk7XG4gICAgbG9kYXNoLnB1bGwgPSBwdWxsO1xuICAgIGxvZGFzaC5yYW5nZSA9IHJhbmdlO1xuICAgIGxvZGFzaC5yZWplY3QgPSByZWplY3Q7XG4gICAgbG9kYXNoLnJlbW92ZSA9IHJlbW92ZTtcbiAgICBsb2Rhc2gucmVzdCA9IHJlc3Q7XG4gICAgbG9kYXNoLnNodWZmbGUgPSBzaHVmZmxlO1xuICAgIGxvZGFzaC5zb3J0QnkgPSBzb3J0Qnk7XG4gICAgbG9kYXNoLnRhcCA9IHRhcDtcbiAgICBsb2Rhc2gudGhyb3R0bGUgPSB0aHJvdHRsZTtcbiAgICBsb2Rhc2gudGltZXMgPSB0aW1lcztcbiAgICBsb2Rhc2gudG9BcnJheSA9IHRvQXJyYXk7XG4gICAgbG9kYXNoLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICBsb2Rhc2gudW5pb24gPSB1bmlvbjtcbiAgICBsb2Rhc2gudW5pcSA9IHVuaXE7XG4gICAgbG9kYXNoLnZhbHVlcyA9IHZhbHVlcztcbiAgICBsb2Rhc2gud2hlcmUgPSB3aGVyZTtcbiAgICBsb2Rhc2gud2l0aG91dCA9IHdpdGhvdXQ7XG4gICAgbG9kYXNoLndyYXAgPSB3cmFwO1xuICAgIGxvZGFzaC54b3IgPSB4b3I7XG4gICAgbG9kYXNoLnppcCA9IHppcDtcbiAgICBsb2Rhc2guemlwT2JqZWN0ID0gemlwT2JqZWN0O1xuXG4gICAgLy8gYWRkIGFsaWFzZXNcbiAgICBsb2Rhc2guY29sbGVjdCA9IG1hcDtcbiAgICBsb2Rhc2guZHJvcCA9IHJlc3Q7XG4gICAgbG9kYXNoLmVhY2ggPSBmb3JFYWNoO1xuICAgIGxvZGFzaC5lYWNoUmlnaHQgPSBmb3JFYWNoUmlnaHQ7XG4gICAgbG9kYXNoLmV4dGVuZCA9IGFzc2lnbjtcbiAgICBsb2Rhc2gubWV0aG9kcyA9IGZ1bmN0aW9ucztcbiAgICBsb2Rhc2gub2JqZWN0ID0gemlwT2JqZWN0O1xuICAgIGxvZGFzaC5zZWxlY3QgPSBmaWx0ZXI7XG4gICAgbG9kYXNoLnRhaWwgPSByZXN0O1xuICAgIGxvZGFzaC51bmlxdWUgPSB1bmlxO1xuICAgIGxvZGFzaC51bnppcCA9IHppcDtcblxuICAgIC8vIGFkZCBmdW5jdGlvbnMgdG8gYGxvZGFzaC5wcm90b3R5cGVgXG4gICAgbWl4aW4obG9kYXNoKTtcblxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgLy8gYWRkIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB1bndyYXBwZWQgdmFsdWVzIHdoZW4gY2hhaW5pbmdcbiAgICBsb2Rhc2guY2xvbmUgPSBjbG9uZTtcbiAgICBsb2Rhc2guY2xvbmVEZWVwID0gY2xvbmVEZWVwO1xuICAgIGxvZGFzaC5jb250YWlucyA9IGNvbnRhaW5zO1xuICAgIGxvZGFzaC5lc2NhcGUgPSBlc2NhcGU7XG4gICAgbG9kYXNoLmV2ZXJ5ID0gZXZlcnk7XG4gICAgbG9kYXNoLmZpbmQgPSBmaW5kO1xuICAgIGxvZGFzaC5maW5kSW5kZXggPSBmaW5kSW5kZXg7XG4gICAgbG9kYXNoLmZpbmRLZXkgPSBmaW5kS2V5O1xuICAgIGxvZGFzaC5maW5kTGFzdCA9IGZpbmRMYXN0O1xuICAgIGxvZGFzaC5maW5kTGFzdEluZGV4ID0gZmluZExhc3RJbmRleDtcbiAgICBsb2Rhc2guZmluZExhc3RLZXkgPSBmaW5kTGFzdEtleTtcbiAgICBsb2Rhc2guaGFzID0gaGFzO1xuICAgIGxvZGFzaC5pZGVudGl0eSA9IGlkZW50aXR5O1xuICAgIGxvZGFzaC5pbmRleE9mID0gaW5kZXhPZjtcbiAgICBsb2Rhc2guaXNBcmd1bWVudHMgPSBpc0FyZ3VtZW50cztcbiAgICBsb2Rhc2guaXNBcnJheSA9IGlzQXJyYXk7XG4gICAgbG9kYXNoLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcbiAgICBsb2Rhc2guaXNEYXRlID0gaXNEYXRlO1xuICAgIGxvZGFzaC5pc0VsZW1lbnQgPSBpc0VsZW1lbnQ7XG4gICAgbG9kYXNoLmlzRW1wdHkgPSBpc0VtcHR5O1xuICAgIGxvZGFzaC5pc0VxdWFsID0gaXNFcXVhbDtcbiAgICBsb2Rhc2guaXNGaW5pdGUgPSBpc0Zpbml0ZTtcbiAgICBsb2Rhc2guaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG4gICAgbG9kYXNoLmlzTmFOID0gaXNOYU47XG4gICAgbG9kYXNoLmlzTnVsbCA9IGlzTnVsbDtcbiAgICBsb2Rhc2guaXNOdW1iZXIgPSBpc051bWJlcjtcbiAgICBsb2Rhc2guaXNPYmplY3QgPSBpc09iamVjdDtcbiAgICBsb2Rhc2guaXNQbGFpbk9iamVjdCA9IGlzUGxhaW5PYmplY3Q7XG4gICAgbG9kYXNoLmlzUmVnRXhwID0gaXNSZWdFeHA7XG4gICAgbG9kYXNoLmlzU3RyaW5nID0gaXNTdHJpbmc7XG4gICAgbG9kYXNoLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG4gICAgbG9kYXNoLmxhc3RJbmRleE9mID0gbGFzdEluZGV4T2Y7XG4gICAgbG9kYXNoLm1peGluID0gbWl4aW47XG4gICAgbG9kYXNoLm5vQ29uZmxpY3QgPSBub0NvbmZsaWN0O1xuICAgIGxvZGFzaC5ub29wID0gbm9vcDtcbiAgICBsb2Rhc2gubm93ID0gbm93O1xuICAgIGxvZGFzaC5wYXJzZUludCA9IHBhcnNlSW50O1xuICAgIGxvZGFzaC5yYW5kb20gPSByYW5kb207XG4gICAgbG9kYXNoLnJlZHVjZSA9IHJlZHVjZTtcbiAgICBsb2Rhc2gucmVkdWNlUmlnaHQgPSByZWR1Y2VSaWdodDtcbiAgICBsb2Rhc2gucmVzdWx0ID0gcmVzdWx0O1xuICAgIGxvZGFzaC5ydW5JbkNvbnRleHQgPSBydW5JbkNvbnRleHQ7XG4gICAgbG9kYXNoLnNpemUgPSBzaXplO1xuICAgIGxvZGFzaC5zb21lID0gc29tZTtcbiAgICBsb2Rhc2guc29ydGVkSW5kZXggPSBzb3J0ZWRJbmRleDtcbiAgICBsb2Rhc2gudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICBsb2Rhc2gudW5lc2NhcGUgPSB1bmVzY2FwZTtcbiAgICBsb2Rhc2gudW5pcXVlSWQgPSB1bmlxdWVJZDtcblxuICAgIC8vIGFkZCBhbGlhc2VzXG4gICAgbG9kYXNoLmFsbCA9IGV2ZXJ5O1xuICAgIGxvZGFzaC5hbnkgPSBzb21lO1xuICAgIGxvZGFzaC5kZXRlY3QgPSBmaW5kO1xuICAgIGxvZGFzaC5maW5kV2hlcmUgPSBmaW5kO1xuICAgIGxvZGFzaC5mb2xkbCA9IHJlZHVjZTtcbiAgICBsb2Rhc2guZm9sZHIgPSByZWR1Y2VSaWdodDtcbiAgICBsb2Rhc2guaW5jbHVkZSA9IGNvbnRhaW5zO1xuICAgIGxvZGFzaC5pbmplY3QgPSByZWR1Y2U7XG5cbiAgICBtaXhpbihmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzb3VyY2UgPSB7fVxuICAgICAgZm9yT3duKGxvZGFzaCwgZnVuY3Rpb24oZnVuYywgbWV0aG9kTmFtZSkge1xuICAgICAgICBpZiAoIWxvZGFzaC5wcm90b3R5cGVbbWV0aG9kTmFtZV0pIHtcbiAgICAgICAgICBzb3VyY2VbbWV0aG9kTmFtZV0gPSBmdW5jO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfSgpLCBmYWxzZSk7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8vIGFkZCBmdW5jdGlvbnMgY2FwYWJsZSBvZiByZXR1cm5pbmcgd3JhcHBlZCBhbmQgdW53cmFwcGVkIHZhbHVlcyB3aGVuIGNoYWluaW5nXG4gICAgbG9kYXNoLmZpcnN0ID0gZmlyc3Q7XG4gICAgbG9kYXNoLmxhc3QgPSBsYXN0O1xuICAgIGxvZGFzaC5zYW1wbGUgPSBzYW1wbGU7XG5cbiAgICAvLyBhZGQgYWxpYXNlc1xuICAgIGxvZGFzaC50YWtlID0gZmlyc3Q7XG4gICAgbG9kYXNoLmhlYWQgPSBmaXJzdDtcblxuICAgIGZvck93bihsb2Rhc2gsIGZ1bmN0aW9uKGZ1bmMsIG1ldGhvZE5hbWUpIHtcbiAgICAgIHZhciBjYWxsYmFja2FibGUgPSBtZXRob2ROYW1lICE9PSAnc2FtcGxlJztcbiAgICAgIGlmICghbG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXSkge1xuICAgICAgICBsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdPSBmdW5jdGlvbihuLCBndWFyZCkge1xuICAgICAgICAgIHZhciBjaGFpbkFsbCA9IHRoaXMuX19jaGFpbl9fLFxuICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jKHRoaXMuX193cmFwcGVkX18sIG4sIGd1YXJkKTtcblxuICAgICAgICAgIHJldHVybiAhY2hhaW5BbGwgJiYgKG4gPT0gbnVsbCB8fCAoZ3VhcmQgJiYgIShjYWxsYmFja2FibGUgJiYgdHlwZW9mIG4gPT0gJ2Z1bmN0aW9uJykpKVxuICAgICAgICAgICAgPyByZXN1bHRcbiAgICAgICAgICAgIDogbmV3IGxvZGFzaFdyYXBwZXIocmVzdWx0LCBjaGFpbkFsbCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIC8qKlxuICAgICAqIFRoZSBzZW1hbnRpYyB2ZXJzaW9uIG51bWJlci5cbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAbWVtYmVyT2YgX1xuICAgICAqIEB0eXBlIHN0cmluZ1xuICAgICAqL1xuICAgIGxvZGFzaC5WRVJTSU9OID0gJzIuNC4xJztcblxuICAgIC8vIGFkZCBcIkNoYWluaW5nXCIgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyXG4gICAgbG9kYXNoLnByb3RvdHlwZS5jaGFpbiA9IHdyYXBwZXJDaGFpbjtcbiAgICBsb2Rhc2gucHJvdG90eXBlLnRvU3RyaW5nID0gd3JhcHBlclRvU3RyaW5nO1xuICAgIGxvZGFzaC5wcm90b3R5cGUudmFsdWUgPSB3cmFwcGVyVmFsdWVPZjtcbiAgICBsb2Rhc2gucHJvdG90eXBlLnZhbHVlT2YgPSB3cmFwcGVyVmFsdWVPZjtcblxuICAgIC8vIGFkZCBgQXJyYXlgIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB1bndyYXBwZWQgdmFsdWVzXG4gICAgZm9yRWFjaChbJ2pvaW4nLCAncG9wJywgJ3NoaWZ0J10sIGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICAgIHZhciBmdW5jID0gYXJyYXlSZWZbbWV0aG9kTmFtZV07XG4gICAgICBsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjaGFpbkFsbCA9IHRoaXMuX19jaGFpbl9fLFxuICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLl9fd3JhcHBlZF9fLCBhcmd1bWVudHMpO1xuXG4gICAgICAgIHJldHVybiBjaGFpbkFsbFxuICAgICAgICAgID8gbmV3IGxvZGFzaFdyYXBwZXIocmVzdWx0LCBjaGFpbkFsbClcbiAgICAgICAgICA6IHJlc3VsdDtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBhZGQgYEFycmF5YCBmdW5jdGlvbnMgdGhhdCByZXR1cm4gdGhlIGV4aXN0aW5nIHdyYXBwZWQgdmFsdWVcbiAgICBmb3JFYWNoKFsncHVzaCcsICdyZXZlcnNlJywgJ3NvcnQnLCAndW5zaGlmdCddLCBmdW5jdGlvbihtZXRob2ROYW1lKSB7XG4gICAgICB2YXIgZnVuYyA9IGFycmF5UmVmW21ldGhvZE5hbWVdO1xuICAgICAgbG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmdW5jLmFwcGx5KHRoaXMuX193cmFwcGVkX18sIGFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIGFkZCBgQXJyYXlgIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBuZXcgd3JhcHBlZCB2YWx1ZXNcbiAgICBmb3JFYWNoKFsnY29uY2F0JywgJ3NsaWNlJywgJ3NwbGljZSddLCBmdW5jdGlvbihtZXRob2ROYW1lKSB7XG4gICAgICB2YXIgZnVuYyA9IGFycmF5UmVmW21ldGhvZE5hbWVdO1xuICAgICAgbG9kYXNoLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IGxvZGFzaFdyYXBwZXIoZnVuYy5hcHBseSh0aGlzLl9fd3JhcHBlZF9fLCBhcmd1bWVudHMpLCB0aGlzLl9fY2hhaW5fXyk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGxvZGFzaDtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8vIGV4cG9zZSBMby1EYXNoXG4gIHZhciBfID0gcnVuSW5Db250ZXh0KCk7XG5cbiAgLy8gc29tZSBBTUQgYnVpbGQgb3B0aW1pemVycyBsaWtlIHIuanMgY2hlY2sgZm9yIGNvbmRpdGlvbiBwYXR0ZXJucyBsaWtlIHRoZSBmb2xsb3dpbmc6XG4gIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIEV4cG9zZSBMby1EYXNoIHRvIHRoZSBnbG9iYWwgb2JqZWN0IGV2ZW4gd2hlbiBhbiBBTUQgbG9hZGVyIGlzIHByZXNlbnQgaW5cbiAgICAvLyBjYXNlIExvLURhc2ggaXMgbG9hZGVkIHdpdGggYSBSZXF1aXJlSlMgc2hpbSBjb25maWcuXG4gICAgLy8gU2VlIGh0dHA6Ly9yZXF1aXJlanMub3JnL2RvY3MvYXBpLmh0bWwjY29uZmlnLXNoaW1cbiAgICByb290Ll8gPSBfO1xuXG4gICAgLy8gZGVmaW5lIGFzIGFuIGFub255bW91cyBtb2R1bGUgc28sIHRocm91Z2ggcGF0aCBtYXBwaW5nLCBpdCBjYW4gYmVcbiAgICAvLyByZWZlcmVuY2VkIGFzIHRoZSBcInVuZGVyc2NvcmVcIiBtb2R1bGVcbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXztcbiAgICB9KTtcbiAgfVxuICAvLyBjaGVjayBmb3IgYGV4cG9ydHNgIGFmdGVyIGBkZWZpbmVgIGluIGNhc2UgYSBidWlsZCBvcHRpbWl6ZXIgYWRkcyBhbiBgZXhwb3J0c2Agb2JqZWN0XG4gIGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpIHtcbiAgICAvLyBpbiBOb2RlLmpzIG9yIFJpbmdvSlNcbiAgICBpZiAobW9kdWxlRXhwb3J0cykge1xuICAgICAgKGZyZWVNb2R1bGUuZXhwb3J0cyA9IF8pLl8gPSBfO1xuICAgIH1cbiAgICAvLyBpbiBOYXJ3aGFsIG9yIFJoaW5vIC1yZXF1aXJlXG4gICAgZWxzZSB7XG4gICAgICBmcmVlRXhwb3J0cy5fID0gXztcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgLy8gaW4gYSBicm93c2VyIG9yIFJoaW5vXG4gICAgcm9vdC5fID0gXztcbiAgfVxufS5jYWxsKHRoaXMpKTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pIl19
